var Kfe=Object.defineProperty;var WX=Et=>{throw TypeError(Et)};var kfe=(Et,Lt,Ct)=>Lt in Et?Kfe(Et,Lt,{enumerable:!0,configurable:!0,writable:!0,value:Ct}):Et[Lt]=Ct;var Wt=(Et,Lt,Ct)=>kfe(Et,typeof Lt!="symbol"?Lt+"":Lt,Ct),gx=(Et,Lt,Ct)=>Lt.has(Et)||WX("Cannot "+Ct);var de=(Et,Lt,Ct)=>(gx(Et,Lt,"read from private field"),Ct?Ct.call(Et):Lt.get(Et)),Ft=(Et,Lt,Ct)=>Lt.has(Et)?WX("Cannot add the same private member more than once"):Lt instanceof WeakSet?Lt.add(Et):Lt.set(Et,Ct),dt=(Et,Lt,Ct,Vn)=>(gx(Et,Lt,"write to private field"),Vn?Vn.call(Et,Ct):Lt.set(Et,Ct),Ct),nt=(Et,Lt,Ct)=>(gx(Et,Lt,"access private method"),Ct);var jw=(Et,Lt,Ct,Vn)=>({set _(ui){dt(Et,Lt,ui,Ct)},get _(){return de(Et,Lt,Vn)}});(function(){"use strict";var Et=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Lt(u){if(Object.prototype.hasOwnProperty.call(u,"__esModule"))return u;var n=u.default;if(typeof n=="function"){var o=function i(){return this instanceof i?Reflect.construct(n,arguments,this.constructor):n.apply(this,arguments)};o.prototype=n.prototype}else o={};return Object.defineProperty(o,"__esModule",{value:!0}),Object.keys(u).forEach(function(i){var t=Object.getOwnPropertyDescriptor(u,i);Object.defineProperty(o,i,t.get?t:{enumerable:!0,get:function(){return u[i]}})}),o}var Ct={},Vn={},ui={},Xf={},ca={},Jf={},da={},la={},Kf="delete",Ht=5,ln=1<<Ht,Cr=ln-1,At={};function Uw(){return{value:!1}}function fn(u){u&&(u.value=!0)}function Vw(){}function zl(u){return u.size===void 0&&(u.size=u.__iterate(jx)),u.size}function Ni(u,n){if(typeof n!="number"){var o=n>>>0;if(""+o!==n||o===4294967295)return NaN;n=o}return n<0?zl(u)+n:n}function jx(){return!0}function kf(u,n,o){return(u===0&&!Mx(u)||o!==void 0&&u<=-o)&&(n===void 0||o!==void 0&&n>=o)}function Xl(u,n){return Lx(u,n,0)}function Wf(u,n){return Lx(u,n,n)}function Lx(u,n,o){return u===void 0?o:Mx(u)?n===1/0?n:Math.max(0,n+u)|0:n===void 0||n===u?u:Math.min(n,u)|0}function Mx(u){return u<0||u===0&&1/u===-1/0}var qx="@@__IMMUTABLE_ITERABLE__@@";function Ir(u){return!!(u&&u[qx])}var Cx="@@__IMMUTABLE_KEYED__@@";function Bt(u){return!!(u&&u[Cx])}var Bx="@@__IMMUTABLE_INDEXED__@@";function gr(u){return!!(u&&u[Bx])}function Jl(u){return Bt(u)||gr(u)}var Gt=function(n){return Ir(n)?n:Pr(n)},hn=(function(u){function n(o){return Bt(o)?o:Li(o)}return u&&(n.__proto__=u),n.prototype=Object.create(u&&u.prototype),n.prototype.constructor=n,n})(Gt),fa=(function(u){function n(o){return gr(o)?o:yn(o)}return u&&(n.__proto__=u),n.prototype=Object.create(u&&u.prototype),n.prototype.constructor=n,n})(Gt),Kl=(function(u){function n(o){return Ir(o)&&!Jl(o)?o:Yl(o)}return u&&(n.__proto__=u),n.prototype=Object.create(u&&u.prototype),n.prototype.constructor=n,n})(Gt);Gt.Keyed=hn,Gt.Indexed=fa,Gt.Set=Kl;var $x="@@__IMMUTABLE_SEQ__@@";function Yf(u){return!!(u&&u[$x])}var Ux="@@__IMMUTABLE_RECORD__@@";function ji(u){return!!(u&&u[Ux])}function Zr(u){return Ir(u)||ji(u)}var kl="@@__IMMUTABLE_ORDERED__@@";function en(u){return!!(u&&u[kl])}var Zf=0,wn=1,pn=2,Qw=typeof Symbol=="function"&&Symbol.iterator,Vx="@@iterator",jT=Qw||Vx,It=function(n){this.next=n};It.prototype.toString=function(){return"[Iterator]"},It.KEYS=Zf,It.VALUES=wn,It.ENTRIES=pn,It.prototype.inspect=It.prototype.toSource=function(){return this.toString()},It.prototype[jT]=function(){return this};function zt(u,n,o,i){var t=u===0?n:u===1?o:[n,o];return i?i.value=t:i={value:t,done:!1},i}function Br(){return{value:void 0,done:!0}}function Hw(u){return Array.isArray(u)?!0:!!LT(u)}function Qx(u){return u&&typeof u.next=="function"}function Gw(u){var n=LT(u);return n&&n.call(u)}function LT(u){var n=u&&(Qw&&u[Qw]||u[Vx]);if(typeof n=="function")return n}function wJ(u){var n=LT(u);return n&&n===u.entries}function SJ(u){var n=LT(u);return n&&n===u.keys}var Wl=Object.prototype.hasOwnProperty;function zw(u){return Array.isArray(u)||typeof u=="string"?!0:u&&typeof u=="object"&&Number.isInteger(u.length)&&u.length>=0&&(u.length===0?Object.keys(u).length===1:u.hasOwnProperty(u.length-1))}var Pr=(function(u){function n(o){return o==null?Jw():Zr(o)?o.toSeq():AJ(o)}return u&&(n.__proto__=u),n.prototype=Object.create(u&&u.prototype),n.prototype.constructor=n,n.prototype.toSeq=function(){return this},n.prototype.toString=function(){return this.__toString("Seq {","}")},n.prototype.cacheResult=function(){return!this._cache&&this.__iterateUncached&&(this._cache=this.entrySeq().toArray(),this.size=this._cache.length),this},n.prototype.__iterate=function(i,t){var e=this._cache;if(e){for(var r=e.length,a=0;a!==r;){var c=e[t?r-++a:a++];if(i(c[1],c[0],this)===!1)break}return a}return this.__iterateUncached(i,t)},n.prototype.__iterator=function(i,t){var e=this._cache;if(e){var r=e.length,a=0;return new It(function(){if(a===r)return Br();var c=e[t?r-++a:a++];return zt(i,c[0],c[1])})}return this.__iteratorUncached(i,t)},n})(Gt),Li=(function(u){function n(o){return o==null?Jw().toKeyedSeq():Ir(o)?Bt(o)?o.toSeq():o.fromEntrySeq():ji(o)?o.toSeq():Kw(o)}return u&&(n.__proto__=u),n.prototype=Object.create(u&&u.prototype),n.prototype.constructor=n,n.prototype.toKeyedSeq=function(){return this},n})(Pr),yn=(function(u){function n(o){return o==null?Jw():Ir(o)?Bt(o)?o.entrySeq():o.toIndexedSeq():ji(o)?o.toSeq().entrySeq():Gx(o)}return u&&(n.__proto__=u),n.prototype=Object.create(u&&u.prototype),n.prototype.constructor=n,n.of=function(){return n(arguments)},n.prototype.toIndexedSeq=function(){return this},n.prototype.toString=function(){return this.__toString("Seq [","]")},n})(Pr),Yl=(function(u){function n(o){return(Ir(o)&&!Jl(o)?o:yn(o)).toSetSeq()}return u&&(n.__proto__=u),n.prototype=Object.create(u&&u.prototype),n.prototype.constructor=n,n.of=function(){return n(arguments)},n.prototype.toSetSeq=function(){return this},n})(Pr);Pr.isSeq=Yf,Pr.Keyed=Li,Pr.Set=Yl,Pr.Indexed=yn,Pr.prototype[$x]=!0;var ha=(function(u){function n(o){this._array=o,this.size=o.length}return u&&(n.__proto__=u),n.prototype=Object.create(u&&u.prototype),n.prototype.constructor=n,n.prototype.get=function(i,t){return this.has(i)?this._array[Ni(this,i)]:t},n.prototype.__iterate=function(i,t){for(var e=this._array,r=e.length,a=0;a!==r;){var c=t?r-++a:a++;if(i(e[c],c,this)===!1)break}return a},n.prototype.__iterator=function(i,t){var e=this._array,r=e.length,a=0;return new It(function(){if(a===r)return Br();var c=t?r-++a:a++;return zt(i,c,e[c])})},n})(yn),Xw=(function(u){function n(o){var i=Object.keys(o).concat(Object.getOwnPropertySymbols?Object.getOwnPropertySymbols(o):[]);this._object=o,this._keys=i,this.size=i.length}return u&&(n.__proto__=u),n.prototype=Object.create(u&&u.prototype),n.prototype.constructor=n,n.prototype.get=function(i,t){return t!==void 0&&!this.has(i)?t:this._object[i]},n.prototype.has=function(i){return Wl.call(this._object,i)},n.prototype.__iterate=function(i,t){for(var e=this._object,r=this._keys,a=r.length,c=0;c!==a;){var s=r[t?a-++c:c++];if(i(e[s],s,this)===!1)break}return c},n.prototype.__iterator=function(i,t){var e=this._object,r=this._keys,a=r.length,c=0;return new It(function(){if(c===a)return Br();var s=r[t?a-++c:c++];return zt(i,s,e[s])})},n})(Li);Xw.prototype[kl]=!0;var OJ=(function(u){function n(o){this._collection=o,this.size=o.length||o.size}return u&&(n.__proto__=u),n.prototype=Object.create(u&&u.prototype),n.prototype.constructor=n,n.prototype.__iterateUncached=function(i,t){if(t)return this.cacheResult().__iterate(i,t);var e=this._collection,r=Gw(e),a=0;if(Qx(r))for(var c;!(c=r.next()).done&&i(c.value,a++,this)!==!1;);return a},n.prototype.__iteratorUncached=function(i,t){if(t)return this.cacheResult().__iterator(i,t);var e=this._collection,r=Gw(e);if(!Qx(r))return new It(Br);var a=0;return new It(function(){var c=r.next();return c.done?c:zt(i,a++,c.value)})},n})(yn),Hx;function Jw(){return Hx||(Hx=new ha([]))}function Kw(u){var n=kw(u);if(n)return n.fromEntrySeq();if(typeof u=="object")return new Xw(u);throw new TypeError("Expected Array or collection object of [k, v] entries, or keyed object: "+u)}function Gx(u){var n=kw(u);if(n)return n;throw new TypeError("Expected Array or collection object of values: "+u)}function AJ(u){var n=kw(u);if(n)return wJ(u)?n.fromEntrySeq():SJ(u)?n.toSetSeq():n;if(typeof u=="object")return new Xw(u);throw new TypeError("Expected Array or collection object of values, or keyed object: "+u)}function kw(u){return zw(u)?new ha(u):Hw(u)?new OJ(u):void 0}var zx="@@__IMMUTABLE_MAP__@@";function eh(u){return!!(u&&u[zx])}function MT(u){return eh(u)&&en(u)}function qT(u){return!!(u&&typeof u.equals=="function"&&typeof u.hashCode=="function")}function fr(u,n){if(u===n||u!==u&&n!==n)return!0;if(!u||!n)return!1;if(typeof u.valueOf=="function"&&typeof n.valueOf=="function"){if(u=u.valueOf(),n=n.valueOf(),u===n||u!==u&&n!==n)return!0;if(!u||!n)return!1}return!!(qT(u)&&qT(n)&&u.equals(n))}var th=typeof Math.imul=="function"&&Math.imul(4294967295,2)===-2?Math.imul:function(n,o){n|=0,o|=0;var i=n&65535,t=o&65535;return i*t+((n>>>16)*t+i*(o>>>16)<<16>>>0)|0};function CT(u){return u>>>1&1073741824|u&3221225471}var EJ=Object.prototype.valueOf;function $r(u){if(u==null)return Xx(u);if(typeof u.hashCode=="function")return CT(u.hashCode(u));var n=DJ(u);if(n==null)return Xx(n);switch(typeof n){case"boolean":return n?1108378657:1108378656;case"number":return xJ(n);case"string":return n.length>NJ?RJ(n):Ww(n);case"object":case"function":return IJ(n);case"symbol":return FJ(n);default:if(typeof n.toString=="function")return Ww(n.toString());throw new Error("Value type "+typeof n+" cannot be hashed.")}}function Xx(u){return u===null?1108378658:1108378659}function xJ(u){if(u!==u||u===1/0)return 0;var n=u|0;for(n!==u&&(n^=u*4294967295);u>4294967295;)u/=4294967295,n^=u;return CT(n)}function RJ(u){var n=rS[u];return n===void 0&&(n=Ww(u),tS===jJ&&(tS=0,rS={}),tS++,rS[u]=n),n}function Ww(u){for(var n=0,o=0;o<u.length;o++)n=31*n+u.charCodeAt(o)|0;return CT(n)}function FJ(u){var n=Wx[u];return n!==void 0||(n=kx(),Wx[u]=n),n}function IJ(u){var n;if(Yw&&(n=Zw.get(u),n!==void 0)||(n=u[pa],n!==void 0)||!Kx&&(n=u.propertyIsEnumerable&&u.propertyIsEnumerable[pa],n!==void 0||(n=PJ(u),n!==void 0)))return n;if(n=kx(),Yw)Zw.set(u,n);else{if(Jx!==void 0&&Jx(u)===!1)throw new Error("Non-extensible objects are not allowed as keys.");if(Kx)Object.defineProperty(u,pa,{enumerable:!1,configurable:!1,writable:!1,value:n});else if(u.propertyIsEnumerable!==void 0&&u.propertyIsEnumerable===u.constructor.prototype.propertyIsEnumerable)u.propertyIsEnumerable=function(){return this.constructor.prototype.propertyIsEnumerable.apply(this,arguments)},u.propertyIsEnumerable[pa]=n;else if(u.nodeType!==void 0)u[pa]=n;else throw new Error("Unable to set a non-enumerable property on object.")}return n}var Jx=Object.isExtensible,Kx=(function(){try{return Object.defineProperty({},"@",{}),!0}catch{return!1}})();function PJ(u){if(u&&u.nodeType>0)switch(u.nodeType){case 1:return u.uniqueID;case 9:return u.documentElement&&u.documentElement.uniqueID}}function DJ(u){return u.valueOf!==EJ&&typeof u.valueOf=="function"?u.valueOf(u):u}function kx(){var u=++eS;return eS&1073741824&&(eS=0),u}var Yw=typeof WeakMap=="function",Zw;Yw&&(Zw=new WeakMap);var Wx=Object.create(null),eS=0,pa="__immutablehash__";typeof Symbol=="function"&&(pa=Symbol(pa));var NJ=16,jJ=255,tS=0,rS={},BT=(function(u){function n(o,i){this._iter=o,this._useKeys=i,this.size=o.size}return u&&(n.__proto__=u),n.prototype=Object.create(u&&u.prototype),n.prototype.constructor=n,n.prototype.get=function(i,t){return this._iter.get(i,t)},n.prototype.has=function(i){return this._iter.has(i)},n.prototype.valueSeq=function(){return this._iter.valueSeq()},n.prototype.reverse=function(){var i=this,t=nS(this,!0);return this._useKeys||(t.valueSeq=function(){return i._iter.toSeq().reverse()}),t},n.prototype.map=function(i,t){var e=this,r=rR(this,i,t);return this._useKeys||(r.valueSeq=function(){return e._iter.toSeq().map(i,t)}),r},n.prototype.__iterate=function(i,t){var e=this;return this._iter.__iterate(function(r,a){return i(r,a,e)},t)},n.prototype.__iterator=function(i,t){return this._iter.__iterator(i,t)},n})(Li);BT.prototype[kl]=!0;var Yx=(function(u){function n(o){this._iter=o,this.size=o.size}return u&&(n.__proto__=u),n.prototype=Object.create(u&&u.prototype),n.prototype.constructor=n,n.prototype.includes=function(i){return this._iter.includes(i)},n.prototype.__iterate=function(i,t){var e=this,r=0;return t&&zl(this),this._iter.__iterate(function(a){return i(a,t?e.size-++r:r++,e)},t)},n.prototype.__iterator=function(i,t){var e=this,r=this._iter.__iterator(wn,t),a=0;return t&&zl(this),new It(function(){var c=r.next();return c.done?c:zt(i,t?e.size-++a:a++,c.value,c)})},n})(yn),Zx=(function(u){function n(o){this._iter=o,this.size=o.size}return u&&(n.__proto__=u),n.prototype=Object.create(u&&u.prototype),n.prototype.constructor=n,n.prototype.has=function(i){return this._iter.includes(i)},n.prototype.__iterate=function(i,t){var e=this;return this._iter.__iterate(function(r){return i(r,r,e)},t)},n.prototype.__iterator=function(i,t){var e=this._iter.__iterator(wn,t);return new It(function(){var r=e.next();return r.done?r:zt(i,r.value,r.value,r)})},n})(Yl),eR=(function(u){function n(o){this._iter=o,this.size=o.size}return u&&(n.__proto__=u),n.prototype=Object.create(u&&u.prototype),n.prototype.constructor=n,n.prototype.entrySeq=function(){return this._iter.toSeq()},n.prototype.__iterate=function(i,t){var e=this;return this._iter.__iterate(function(r){if(r){oR(r);var a=Ir(r);return i(a?r.get(1):r[1],a?r.get(0):r[0],e)}},t)},n.prototype.__iterator=function(i,t){var e=this._iter.__iterator(wn,t);return new It(function(){for(;;){var r=e.next();if(r.done)return r;var a=r.value;if(a){oR(a);var c=Ir(a);return zt(i,c?a.get(0):a[0],c?a.get(1):a[1],r)}}})},n})(Li);Yx.prototype.cacheResult=BT.prototype.cacheResult=Zx.prototype.cacheResult=eR.prototype.cacheResult=uS;function tR(u){var n=Qn(u);return n._iter=u,n.size=u.size,n.flip=function(){return u},n.reverse=function(){var o=u.reverse.apply(this);return o.flip=function(){return u.reverse()},o},n.has=function(o){return u.includes(o)},n.includes=function(o){return u.has(o)},n.cacheResult=uS,n.__iterateUncached=function(o,i){var t=this;return u.__iterate(function(e,r){return o(r,e,t)!==!1},i)},n.__iteratorUncached=function(o,i){if(o===pn){var t=u.__iterator(o,i);return new It(function(){var e=t.next();if(!e.done){var r=e.value[0];e.value[0]=e.value[1],e.value[1]=r}return e})}return u.__iterator(o===wn?Zf:wn,i)},n}function rR(u,n,o){var i=Qn(u);return i.size=u.size,i.has=function(t){return u.has(t)},i.get=function(t,e){var r=u.get(t,At);return r===At?e:n.call(o,r,t,u)},i.__iterateUncached=function(t,e){var r=this;return u.__iterate(function(a,c,s){return t(n.call(o,a,c,s),c,r)!==!1},e)},i.__iteratorUncached=function(t,e){var r=u.__iterator(pn,e);return new It(function(){var a=r.next();if(a.done)return a;var c=a.value,s=c[0];return zt(t,s,n.call(o,c[1],s,u),a)})},i}function nS(u,n){var o=this,i=Qn(u);return i._iter=u,i.size=u.size,i.reverse=function(){return u},u.flip&&(i.flip=function(){var t=tR(u);return t.reverse=function(){return u.flip()},t}),i.get=function(t,e){return u.get(n?t:-1-t,e)},i.has=function(t){return u.has(n?t:-1-t)},i.includes=function(t){return u.includes(t)},i.cacheResult=uS,i.__iterate=function(t,e){var r=this,a=0;return e&&zl(u),u.__iterate(function(c,s){return t(c,n?s:e?r.size-++a:a++,r)},!e)},i.__iterator=function(t,e){var r=0;e&&zl(u);var a=u.__iterator(pn,!e);return new It(function(){var c=a.next();if(c.done)return c;var s=c.value;return zt(t,n?s[0]:e?o.size-++r:r++,s[1],c)})},i}function nR(u,n,o,i){var t=Qn(u);return i&&(t.has=function(e){var r=u.get(e,At);return r!==At&&!!n.call(o,r,e,u)},t.get=function(e,r){var a=u.get(e,At);return a!==At&&n.call(o,a,e,u)?a:r}),t.__iterateUncached=function(e,r){var a=this,c=0;return u.__iterate(function(s,d,l){if(n.call(o,s,d,l))return c++,e(s,i?d:c-1,a)},r),c},t.__iteratorUncached=function(e,r){var a=u.__iterator(pn,r),c=0;return new It(function(){for(;;){var s=a.next();if(s.done)return s;var d=s.value,l=d[0],f=d[1];if(n.call(o,f,l,u))return zt(e,i?l:c++,f,s)}})},t}function LJ(u,n,o){var i=Ci().asMutable();return u.__iterate(function(t,e){i.update(n.call(o,t,e,u),0,function(r){return r+1})}),i.asImmutable()}function MJ(u,n,o){var i=Bt(u),t=(en(u)?On():Ci()).asMutable();u.__iterate(function(r,a){t.update(n.call(o,r,a,u),function(c){return c=c||[],c.push(i?[a,r]:r),c})});var e=aS(u);return t.map(function(r){return $t(u,e(r))}).asImmutable()}function qJ(u,n,o){var i=Bt(u),t=[[],[]];u.__iterate(function(r,a){t[n.call(o,r,a,u)?1:0].push(i?[a,r]:r)});var e=aS(u);return t.map(function(r){return $t(u,e(r))})}function iS(u,n,o,i){var t=u.size;if(kf(n,o,t))return u;if(typeof t>"u"&&(n<0||o<0))return iS(u.toSeq().cacheResult(),n,o,i);var e=Xl(n,t),r=Wf(o,t),a=r-e,c;a===a&&(c=a<0?0:a);var s=Qn(u);return s.size=c===0?c:u.size&&c||void 0,!i&&Yf(u)&&c>=0&&(s.get=function(d,l){return d=Ni(this,d),d>=0&&d<c?u.get(d+e,l):l}),s.__iterateUncached=function(d,l){var f=this;if(c===0)return 0;if(l)return this.cacheResult().__iterate(d,l);var h=0,p=!0,y=0;return u.__iterate(function(_,b){if(!(p&&(p=h++<e)))return y++,d(_,i?b:y-1,f)!==!1&&y!==c}),y},s.__iteratorUncached=function(d,l){if(c!==0&&l)return this.cacheResult().__iterator(d,l);if(c===0)return new It(Br);var f=u.__iterator(d,l),h=0,p=0;return new It(function(){for(;h++<e;)f.next();if(++p>c)return Br();var y=f.next();return i||d===wn||y.done?y:d===Zf?zt(d,p-1,void 0,y):zt(d,p-1,y.value[1],y)})},s}function CJ(u,n,o){var i=Qn(u);return i.__iterateUncached=function(t,e){var r=this;if(e)return this.cacheResult().__iterate(t,e);var a=0;return u.__iterate(function(c,s,d){return n.call(o,c,s,d)&&++a&&t(c,s,r)}),a},i.__iteratorUncached=function(t,e){var r=this;if(e)return this.cacheResult().__iterator(t,e);var a=u.__iterator(pn,e),c=!0;return new It(function(){if(!c)return Br();var s=a.next();if(s.done)return s;var d=s.value,l=d[0],f=d[1];return n.call(o,f,l,r)?t===pn?s:zt(t,l,f,s):(c=!1,Br())})},i}function iR(u,n,o,i){var t=Qn(u);return t.__iterateUncached=function(e,r){var a=this;if(r)return this.cacheResult().__iterate(e,r);var c=!0,s=0;return u.__iterate(function(d,l,f){if(!(c&&(c=n.call(o,d,l,f))))return s++,e(d,i?l:s-1,a)}),s},t.__iteratorUncached=function(e,r){var a=this;if(r)return this.cacheResult().__iterator(e,r);var c=u.__iterator(pn,r),s=!0,d=0;return new It(function(){var l,f,h;do{if(l=c.next(),l.done)return i||e===wn?l:e===Zf?zt(e,d++,void 0,l):zt(e,d++,l.value[1],l);var p=l.value;f=p[0],h=p[1],s&&(s=n.call(o,h,f,a))}while(s);return e===pn?l:zt(e,f,h,l)})},t}function BJ(u,n){var o=Bt(u),i=[u].concat(n).map(function(r){return Ir(r)?o&&(r=hn(r)):r=o?Kw(r):Gx(Array.isArray(r)?r:[r]),r}).filter(function(r){return r.size!==0});if(i.length===0)return u;if(i.length===1){var t=i[0];if(t===u||o&&Bt(t)||gr(u)&&gr(t))return t}var e=new ha(i);return o?e=e.toKeyedSeq():gr(u)||(e=e.toSetSeq()),e=e.flatten(!0),e.size=i.reduce(function(r,a){if(r!==void 0){var c=a.size;if(c!==void 0)return r+c}},0),e}function aR(u,n,o){var i=Qn(u);return i.__iterateUncached=function(t,e){if(e)return this.cacheResult().__iterate(t,e);var r=0,a=!1;function c(s,d){s.__iterate(function(l,f){return(!n||d<n)&&Ir(l)?c(l,d+1):(r++,t(l,o?f:r-1,i)===!1&&(a=!0)),!a},e)}return c(u,0),r},i.__iteratorUncached=function(t,e){if(e)return this.cacheResult().__iterator(t,e);var r=u.__iterator(t,e),a=[],c=0;return new It(function(){for(;r;){var s=r.next();if(s.done!==!1){r=a.pop();continue}var d=s.value;if(t===pn&&(d=d[1]),(!n||a.length<n)&&Ir(d))a.push(r),r=d.__iterator(t,e);else return o?s:zt(t,c++,d,s)}return Br()})},i}function $J(u,n,o){var i=aS(u);return u.toSeq().map(function(t,e){return i(n.call(o,t,e,u))}).flatten(!0)}function UJ(u,n){var o=Qn(u);return o.size=u.size&&u.size*2-1,o.__iterateUncached=function(i,t){var e=this,r=0;return u.__iterate(function(a){return(!r||i(n,r++,e)!==!1)&&i(a,r++,e)!==!1},t),r},o.__iteratorUncached=function(i,t){var e=u.__iterator(wn,t),r=0,a;return new It(function(){return(!a||r%2)&&(a=e.next(),a.done)?a:r%2?zt(i,r++,n):zt(i,r++,a.value,a)})},o}function Zl(u,n,o){n||(n=sR);var i=Bt(u),t=0,e=u.toSeq().map(function(r,a){return[a,r,t++,o?o(r,a,u):r]}).valueSeq().toArray();return e.sort(function(r,a){return n(r[3],a[3])||r[2]-a[2]}).forEach(i?function(r,a){e[a].length=2}:function(r,a){e[a]=r[1]}),i?Li(e):gr(u)?yn(e):Yl(e)}function $T(u,n,o){if(n||(n=sR),o){var i=u.toSeq().map(function(t,e){return[t,o(t,e,u)]}).reduce(function(t,e){return uR(n,t[1],e[1])?e:t});return i&&i[0]}return u.reduce(function(t,e){return uR(n,t,e)?e:t})}function uR(u,n,o){var i=u(o,n);return i===0&&o!==n&&(o==null||o!==o)||i>0}function UT(u,n,o,i){var t=Qn(u),e=new ha(o).map(function(r){return r.size});return t.size=i?e.max():e.min(),t.__iterate=function(r,a){for(var c=this.__iterator(wn,a),s,d=0;!(s=c.next()).done&&r(s.value,d++,this)!==!1;);return d},t.__iteratorUncached=function(r,a){var c=o.map(function(l){return l=Gt(l),Gw(a?l.reverse():l)}),s=0,d=!1;return new It(function(){var l;return d||(l=c.map(function(f){return f.next()}),d=i?l.every(function(f){return f.done}):l.some(function(f){return f.done})),d?Br():zt(r,s++,n.apply(null,l.map(function(f){return f.value})))})},t}function $t(u,n){return u===n?u:Yf(u)?n:u.constructor(n)}function oR(u){if(u!==Object(u))throw new TypeError("Expected [K, V] tuple: "+u)}function aS(u){return Bt(u)?hn:gr(u)?fa:Kl}function Qn(u){return Object.create((Bt(u)?Li:gr(u)?yn:Yl).prototype)}function uS(){return this._iter.cacheResult?(this._iter.cacheResult(),this.size=this._iter.size,this):Pr.prototype.cacheResult.call(this)}function sR(u,n){return u===void 0&&n===void 0?0:u===void 0?1:n===void 0?-1:u>n?1:u<n?-1:0}function Hn(u,n){n=n||0;for(var o=Math.max(0,u.length-n),i=new Array(o),t=0;t<o;t++)i[t]=u[t+n];return i}function oS(u,n){if(!u)throw new Error(n)}function tn(u){oS(u!==1/0,"Cannot perform this action with an infinite size.")}function cR(u){if(zw(u)&&typeof u!="string")return u;if(en(u))return u.toArray();throw new TypeError("Invalid keyPath: expected Ordered Collection or Array: "+u)}var VJ=Object.prototype.toString;function VT(u){if(!u||typeof u!="object"||VJ.call(u)!=="[object Object]")return!1;var n=Object.getPrototypeOf(u);if(n===null)return!0;for(var o=n,i=Object.getPrototypeOf(n);i!==null;)o=i,i=Object.getPrototypeOf(o);return o===n}function Mi(u){return typeof u=="object"&&(Zr(u)||Array.isArray(u)||VT(u))}function rh(u){try{return typeof u=="string"?JSON.stringify(u):String(u)}catch{return JSON.stringify(u)}}function sS(u,n){return Zr(u)?u.has(n):Mi(u)&&Wl.call(u,n)}function QT(u,n,o){return Zr(u)?u.get(n,o):sS(u,n)?typeof u.get=="function"?u.get(n):u[n]:o}function HT(u){if(Array.isArray(u))return Hn(u);var n={};for(var o in u)Wl.call(u,o)&&(n[o]=u[o]);return n}function cS(u,n){if(!Mi(u))throw new TypeError("Cannot update non-data-structure value: "+u);if(Zr(u)){if(!u.remove)throw new TypeError("Cannot update immutable value without .remove() method: "+u);return u.remove(n)}if(!Wl.call(u,n))return u;var o=HT(u);return Array.isArray(o)?o.splice(n,1):delete o[n],o}function dS(u,n,o){if(!Mi(u))throw new TypeError("Cannot update non-data-structure value: "+u);if(Zr(u)){if(!u.set)throw new TypeError("Cannot update immutable value without .set() method: "+u);return u.set(n,o)}if(Wl.call(u,n)&&o===u[n])return u;var i=HT(u);return i[n]=o,i}function qi(u,n,o,i){i||(i=o,o=void 0);var t=dR(Zr(u),u,cR(n),0,o,i);return t===At?o:t}function dR(u,n,o,i,t,e){var r=n===At;if(i===o.length){var a=r?t:n,c=e(a);return c===a?n:c}if(!r&&!Mi(n))throw new TypeError("Cannot update within non-data-structure value in path ["+o.slice(0,i).map(rh)+"]: "+n);var s=o[i],d=r?At:QT(n,s,At),l=dR(d===At?u:Zr(d),d,o,i+1,t,e);return l===d?n:l===At?cS(n,s):dS(r?u?Sn():{}:n,s,l)}function lS(u,n,o){return qi(u,n,At,function(){return o})}function fS(u,n){return lS(this,u,n)}function hS(u,n){return qi(u,n,function(){return At})}function pS(u){return hS(this,u)}function GT(u,n,o,i){return qi(u,[n],o,i)}function yS(u,n,o){return arguments.length===1?u(this):GT(this,u,n,o)}function bS(u,n,o){return qi(this,u,n,o)}function lR(){for(var u=[],n=arguments.length;n--;)u[n]=arguments[n];return hR(this,u)}function fR(u){for(var n=[],o=arguments.length-1;o-- >0;)n[o]=arguments[o+1];if(typeof u!="function")throw new TypeError("Invalid merger function: "+u);return hR(this,n,u)}function hR(u,n,o){for(var i=[],t=0;t<n.length;t++){var e=hn(n[t]);e.size!==0&&i.push(e)}return i.length===0?u:u.toSeq().size===0&&!u.__ownerID&&i.length===1?u.constructor(i[0]):u.withMutations(function(r){for(var a=o?function(s,d){GT(r,d,At,function(l){return l===At?s:o(l,s,d)})}:function(s,d){r.set(d,s)},c=0;c<i.length;c++)i[c].forEach(a)})}function pR(u){for(var n=[],o=arguments.length-1;o-- >0;)n[o]=arguments[o+1];return ih(u,n)}function yR(u,n){for(var o=[],i=arguments.length-2;i-- >0;)o[i]=arguments[i+2];return ih(n,o,u)}function bR(u){for(var n=[],o=arguments.length-1;o-- >0;)n[o]=arguments[o+1];return nh(u,n)}function _R(u,n){for(var o=[],i=arguments.length-2;i-- >0;)o[i]=arguments[i+2];return nh(n,o,u)}function nh(u,n,o){return ih(u,n,QJ(o))}function ih(u,n,o){if(!Mi(u))throw new TypeError("Cannot merge into non-data-structure value: "+u);if(Zr(u))return typeof o=="function"&&u.mergeWith?u.mergeWith.apply(u,[o].concat(n)):u.merge?u.merge.apply(u,n):u.concat.apply(u,n);for(var i=Array.isArray(u),t=u,e=i?fa:hn,r=i?function(c){t===u&&(t=HT(t)),t.push(c)}:function(c,s){var d=Wl.call(t,s),l=d&&o?o(t[s],c,s):c;(!d||l!==t[s])&&(t===u&&(t=HT(t)),t[s]=l)},a=0;a<n.length;a++)e(n[a]).forEach(r);return t}function QJ(u){function n(o,i,t){return Mi(o)&&Mi(i)&&HJ(o,i)?ih(o,[i],n):u?u(o,i,t):i}return n}function HJ(u,n){var o=Pr(u),i=Pr(n);return gr(o)===gr(i)&&Bt(o)===Bt(i)}function gR(){for(var u=[],n=arguments.length;n--;)u[n]=arguments[n];return nh(this,u)}function mR(u){for(var n=[],o=arguments.length-1;o-- >0;)n[o]=arguments[o+1];return nh(this,n,u)}function _S(u){for(var n=[],o=arguments.length-1;o-- >0;)n[o]=arguments[o+1];return qi(this,u,Sn(),function(i){return ih(i,n)})}function gS(u){for(var n=[],o=arguments.length-1;o-- >0;)n[o]=arguments[o+1];return qi(this,u,Sn(),function(i){return nh(i,n)})}function ah(u){var n=this.asMutable();return u(n),n.wasAltered()?n.__ensureOwner(this.__ownerID):this}function uh(){return this.__ownerID?this:this.__ensureOwner(new Vw)}function oh(){return this.__ensureOwner()}function mS(){return this.__altered}var Ci=(function(u){function n(o){return o==null?Sn():eh(o)&&!en(o)?o:Sn().withMutations(function(i){var t=u(o);tn(t.size),t.forEach(function(e,r){return i.set(r,e)})})}return u&&(n.__proto__=u),n.prototype=Object.create(u&&u.prototype),n.prototype.constructor=n,n.of=function(){for(var i=[],t=arguments.length;t--;)i[t]=arguments[t];return Sn().withMutations(function(e){for(var r=0;r<i.length;r+=2){if(r+1>=i.length)throw new Error("Missing value for key: "+i[r]);e.set(i[r],i[r+1])}})},n.prototype.toString=function(){return this.__toString("Map {","}")},n.prototype.get=function(i,t){return this._root?this._root.get(0,void 0,i,t):t},n.prototype.set=function(i,t){return wR(this,i,t)},n.prototype.remove=function(i){return wR(this,i,At)},n.prototype.deleteAll=function(i){var t=Gt(i);return t.size===0?this:this.withMutations(function(e){t.forEach(function(r){return e.remove(r)})})},n.prototype.clear=function(){return this.size===0?this:this.__ownerID?(this.size=0,this._root=null,this.__hash=void 0,this.__altered=!0,this):Sn()},n.prototype.sort=function(i){return On(Zl(this,i))},n.prototype.sortBy=function(i,t){return On(Zl(this,t,i))},n.prototype.map=function(i,t){var e=this;return this.withMutations(function(r){r.forEach(function(a,c){r.set(c,i.call(t,a,c,e))})})},n.prototype.__iterator=function(i,t){return new GJ(this,i,t)},n.prototype.__iterate=function(i,t){var e=this,r=0;return this._root&&this._root.iterate(function(a){return r++,i(a[1],a[0],e)},t),r},n.prototype.__ensureOwner=function(i){return i===this.__ownerID?this:i?TS(this.size,this._root,i,this.__hash):this.size===0?Sn():(this.__ownerID=i,this.__altered=!1,this)},n})(hn);Ci.isMap=eh;var Xt=Ci.prototype;Xt[zx]=!0,Xt[Kf]=Xt.remove,Xt.removeAll=Xt.deleteAll,Xt.setIn=fS,Xt.removeIn=Xt.deleteIn=pS,Xt.update=yS,Xt.updateIn=bS,Xt.merge=Xt.concat=lR,Xt.mergeWith=fR,Xt.mergeDeep=gR,Xt.mergeDeepWith=mR,Xt.mergeIn=_S,Xt.mergeDeepIn=gS,Xt.withMutations=ah,Xt.wasAltered=mS,Xt.asImmutable=oh,Xt["@@transducer/init"]=Xt.asMutable=uh,Xt["@@transducer/step"]=function(u,n){return u.set(n[0],n[1])},Xt["@@transducer/result"]=function(u){return u.asImmutable()};var sh=function(n,o){this.ownerID=n,this.entries=o};sh.prototype.get=function(n,o,i,t){for(var e=this.entries,r=0,a=e.length;r<a;r++)if(fr(i,e[r][0]))return e[r][1];return t},sh.prototype.update=function(n,o,i,t,e,r,a){for(var c=e===At,s=this.entries,d=0,l=s.length;d<l&&!fr(t,s[d][0]);d++);var f=d<l;if(f?s[d][1]===e:c)return this;if(fn(a),(c||!f)&&fn(r),!(c&&s.length===1)){if(!f&&!c&&s.length>=WJ)return zJ(n,s,t,e);var h=n&&n===this.ownerID,p=h?s:Hn(s);return f?c?d===l-1?p.pop():p[d]=p.pop():p[d]=[t,e]:p.push([t,e]),h?(this.entries=p,this):new sh(n,p)}};var ef=function(n,o,i){this.ownerID=n,this.bitmap=o,this.nodes=i};ef.prototype.get=function(n,o,i,t){o===void 0&&(o=$r(i));var e=1<<((n===0?o:o>>>n)&Cr),r=this.bitmap;return(r&e)===0?t:this.nodes[OR(r&e-1)].get(n+Ht,o,i,t)},ef.prototype.update=function(n,o,i,t,e,r,a){i===void 0&&(i=$r(t));var c=(o===0?i:i>>>o)&Cr,s=1<<c,d=this.bitmap,l=(d&s)!==0;if(!l&&e===At)return this;var f=OR(d&s-1),h=this.nodes,p=l?h[f]:void 0,y=wS(p,n,o+Ht,i,t,e,r,a);if(y===p)return this;if(!l&&y&&h.length>=YJ)return JJ(n,h,d,c,y);if(l&&!y&&h.length===2&&SR(h[f^1]))return h[f^1];if(l&&y&&h.length===1&&SR(y))return y;var _=n&&n===this.ownerID,b=l?y?d:d^s:d|s,m=l?y?AR(h,f,y,_):kJ(h,f,_):KJ(h,f,y,_);return _?(this.bitmap=b,this.nodes=m,this):new ef(n,b,m)};var ch=function(n,o,i){this.ownerID=n,this.count=o,this.nodes=i};ch.prototype.get=function(n,o,i,t){o===void 0&&(o=$r(i));var e=(n===0?o:o>>>n)&Cr,r=this.nodes[e];return r?r.get(n+Ht,o,i,t):t},ch.prototype.update=function(n,o,i,t,e,r,a){i===void 0&&(i=$r(t));var c=(o===0?i:i>>>o)&Cr,s=e===At,d=this.nodes,l=d[c];if(s&&!l)return this;var f=wS(l,n,o+Ht,i,t,e,r,a);if(f===l)return this;var h=this.count;if(!l)h++;else if(!f&&(h--,h<ZJ))return XJ(n,d,h,c);var p=n&&n===this.ownerID,y=AR(d,c,f,p);return p?(this.count=h,this.nodes=y,this):new ch(n,h,y)};var tf=function(n,o,i){this.ownerID=n,this.keyHash=o,this.entries=i};tf.prototype.get=function(n,o,i,t){for(var e=this.entries,r=0,a=e.length;r<a;r++)if(fr(i,e[r][0]))return e[r][1];return t},tf.prototype.update=function(n,o,i,t,e,r,a){i===void 0&&(i=$r(t));var c=e===At;if(i!==this.keyHash)return c?this:(fn(a),fn(r),SS(this,n,o,i,[t,e]));for(var s=this.entries,d=0,l=s.length;d<l&&!fr(t,s[d][0]);d++);var f=d<l;if(f?s[d][1]===e:c)return this;if(fn(a),(c||!f)&&fn(r),c&&l===2)return new oi(n,this.keyHash,s[d^1]);var h=n&&n===this.ownerID,p=h?s:Hn(s);return f?c?d===l-1?p.pop():p[d]=p.pop():p[d]=[t,e]:p.push([t,e]),h?(this.entries=p,this):new tf(n,this.keyHash,p)};var oi=function(n,o,i){this.ownerID=n,this.keyHash=o,this.entry=i};oi.prototype.get=function(n,o,i,t){return fr(i,this.entry[0])?this.entry[1]:t},oi.prototype.update=function(n,o,i,t,e,r,a){var c=e===At,s=fr(t,this.entry[0]);if(s?e===this.entry[1]:c)return this;if(fn(a),c){fn(r);return}return s?n&&n===this.ownerID?(this.entry[1]=e,this):new oi(n,this.keyHash,[t,e]):(fn(r),SS(this,n,o,$r(t),[t,e]))},sh.prototype.iterate=tf.prototype.iterate=function(u,n){for(var o=this.entries,i=0,t=o.length-1;i<=t;i++)if(u(o[n?t-i:i])===!1)return!1},ef.prototype.iterate=ch.prototype.iterate=function(u,n){for(var o=this.nodes,i=0,t=o.length-1;i<=t;i++){var e=o[n?t-i:i];if(e&&e.iterate(u,n)===!1)return!1}},oi.prototype.iterate=function(u,n){return u(this.entry)};var GJ=(function(u){function n(o,i,t){this._type=i,this._reverse=t,this._stack=o._root&&vR(o._root)}return u&&(n.__proto__=u),n.prototype=Object.create(u&&u.prototype),n.prototype.constructor=n,n.prototype.next=function(){for(var i=this._type,t=this._stack;t;){var e=t.node,r=t.index++,a=void 0;if(e.entry){if(r===0)return vS(i,e.entry)}else if(e.entries){if(a=e.entries.length-1,r<=a)return vS(i,e.entries[this._reverse?a-r:r])}else if(a=e.nodes.length-1,r<=a){var c=e.nodes[this._reverse?a-r:r];if(c){if(c.entry)return vS(i,c.entry);t=this._stack=vR(c,t)}continue}t=this._stack=this._stack.__prev}return Br()},n})(It);function vS(u,n){return zt(u,n[0],n[1])}function vR(u,n){return{node:u,index:0,__prev:n}}function TS(u,n,o,i){var t=Object.create(Xt);return t.size=u,t._root=n,t.__ownerID=o,t.__hash=i,t.__altered=!1,t}var TR;function Sn(){return TR||(TR=TS(0))}function wR(u,n,o){var i,t;if(u._root){var e=Uw(),r=Uw();if(i=wS(u._root,u.__ownerID,0,void 0,n,o,e,r),!r.value)return u;t=u.size+(e.value?o===At?-1:1:0)}else{if(o===At)return u;t=1,i=new sh(u.__ownerID,[[n,o]])}return u.__ownerID?(u.size=t,u._root=i,u.__hash=void 0,u.__altered=!0,u):i?TS(t,i):Sn()}function wS(u,n,o,i,t,e,r,a){return u?u.update(n,o,i,t,e,r,a):e===At?u:(fn(a),fn(r),new oi(n,i,[t,e]))}function SR(u){return u.constructor===oi||u.constructor===tf}function SS(u,n,o,i,t){if(u.keyHash===i)return new tf(n,i,[u.entry,t]);var e=(o===0?u.keyHash:u.keyHash>>>o)&Cr,r=(o===0?i:i>>>o)&Cr,a,c=e===r?[SS(u,n,o+Ht,i,t)]:(a=new oi(n,i,t),e<r?[u,a]:[a,u]);return new ef(n,1<<e|1<<r,c)}function zJ(u,n,o,i){u||(u=new Vw);for(var t=new oi(u,$r(o),[o,i]),e=0;e<n.length;e++){var r=n[e];t=t.update(u,0,void 0,r[0],r[1])}return t}function XJ(u,n,o,i){for(var t=0,e=0,r=new Array(o),a=0,c=1,s=n.length;a<s;a++,c<<=1){var d=n[a];d!==void 0&&a!==i&&(t|=c,r[e++]=d)}return new ef(u,t,r)}function JJ(u,n,o,i,t){for(var e=0,r=new Array(ln),a=0;o!==0;a++,o>>>=1)r[a]=o&1?n[e++]:void 0;return r[i]=t,new ch(u,e+1,r)}function OR(u){return u-=u>>1&1431655765,u=(u&858993459)+(u>>2&858993459),u=u+(u>>4)&252645135,u+=u>>8,u+=u>>16,u&127}function AR(u,n,o,i){var t=i?u:Hn(u);return t[n]=o,t}function KJ(u,n,o,i){var t=u.length+1;if(i&&n+1===t)return u[n]=o,u;for(var e=new Array(t),r=0,a=0;a<t;a++)a===n?(e[a]=o,r=-1):e[a]=u[a+r];return e}function kJ(u,n,o){var i=u.length-1;if(o&&n===i)return u.pop(),u;for(var t=new Array(i),e=0,r=0;r<i;r++)r===n&&(e=1),t[r]=u[r+e];return t}var WJ=ln/4,YJ=ln/2,ZJ=ln/4,ER="@@__IMMUTABLE_LIST__@@";function zT(u){return!!(u&&u[ER])}var rf=(function(u){function n(o){var i=XT();if(o==null)return i;if(zT(o))return o;var t=u(o),e=t.size;return e===0?i:(tn(e),e>0&&e<ln?lh(0,e,Ht,null,new Bi(t.toArray())):i.withMutations(function(r){r.setSize(e),t.forEach(function(a,c){return r.set(c,a)})}))}return u&&(n.__proto__=u),n.prototype=Object.create(u&&u.prototype),n.prototype.constructor=n,n.of=function(){return this(arguments)},n.prototype.toString=function(){return this.__toString("List [","]")},n.prototype.get=function(i,t){if(i=Ni(this,i),i>=0&&i<this.size){i+=this._origin;var e=FR(this,i);return e&&e.array[i&Cr]}return t},n.prototype.set=function(i,t){return eK(this,i,t)},n.prototype.remove=function(i){return this.has(i)?i===0?this.shift():i===this.size-1?this.pop():this.splice(i,1):this},n.prototype.insert=function(i,t){return this.splice(i,0,t)},n.prototype.clear=function(){return this.size===0?this:this.__ownerID?(this.size=this._origin=this._capacity=0,this._level=Ht,this._root=this._tail=this.__hash=void 0,this.__altered=!0,this):XT()},n.prototype.push=function(){var i=arguments,t=this.size;return this.withMutations(function(e){$i(e,0,t+i.length);for(var r=0;r<i.length;r++)e.set(t+r,i[r])})},n.prototype.pop=function(){return $i(this,0,-1)},n.prototype.unshift=function(){var i=arguments;return this.withMutations(function(t){$i(t,-i.length);for(var e=0;e<i.length;e++)t.set(e,i[e])})},n.prototype.shift=function(){return $i(this,1)},n.prototype.concat=function(){for(var i=arguments,t=[],e=0;e<arguments.length;e++){var r=i[e],a=u(typeof r!="string"&&Hw(r)?r:[r]);a.size!==0&&t.push(a)}return t.length===0?this:this.size===0&&!this.__ownerID&&t.length===1?this.constructor(t[0]):this.withMutations(function(c){t.forEach(function(s){return s.forEach(function(d){return c.push(d)})})})},n.prototype.setSize=function(i){return $i(this,0,i)},n.prototype.map=function(i,t){var e=this;return this.withMutations(function(r){for(var a=0;a<e.size;a++)r.set(a,i.call(t,r.get(a),a,e))})},n.prototype.slice=function(i,t){var e=this.size;return kf(i,t,e)?this:$i(this,Xl(i,e),Wf(t,e))},n.prototype.__iterator=function(i,t){var e=t?this.size:0,r=xR(this,t);return new It(function(){var a=r();return a===dh?Br():zt(i,t?--e:e++,a)})},n.prototype.__iterate=function(i,t){for(var e=t?this.size:0,r=xR(this,t),a;(a=r())!==dh&&i(a,t?--e:e++,this)!==!1;);return e},n.prototype.__ensureOwner=function(i){return i===this.__ownerID?this:i?lh(this._origin,this._capacity,this._level,this._root,this._tail,i,this.__hash):this.size===0?XT():(this.__ownerID=i,this.__altered=!1,this)},n})(fa);rf.isList=zT;var cr=rf.prototype;cr[ER]=!0,cr[Kf]=cr.remove,cr.merge=cr.concat,cr.setIn=fS,cr.deleteIn=cr.removeIn=pS,cr.update=yS,cr.updateIn=bS,cr.mergeIn=_S,cr.mergeDeepIn=gS,cr.withMutations=ah,cr.wasAltered=mS,cr.asImmutable=oh,cr["@@transducer/init"]=cr.asMutable=uh,cr["@@transducer/step"]=function(u,n){return u.push(n)},cr["@@transducer/result"]=function(u){return u.asImmutable()};var Bi=function(n,o){this.array=n,this.ownerID=o};Bi.prototype.removeBefore=function(n,o,i){if(i===o?1<<o:this.array.length===0)return this;var t=i>>>o&Cr;if(t>=this.array.length)return new Bi([],n);var e=t===0,r;if(o>0){var a=this.array[t];if(r=a&&a.removeBefore(n,o-Ht,i),r===a&&e)return this}if(e&&!r)return this;var c=nf(this,n);if(!e)for(var s=0;s<t;s++)c.array[s]=void 0;return r&&(c.array[t]=r),c},Bi.prototype.removeAfter=function(n,o,i){if(i===(o?1<<o:0)||this.array.length===0)return this;var t=i-1>>>o&Cr;if(t>=this.array.length)return this;var e;if(o>0){var r=this.array[t];if(e=r&&r.removeAfter(n,o-Ht,i),e===r&&t===this.array.length-1)return this}var a=nf(this,n);return a.array.splice(t+1),e&&(a.array[t]=e),a};var dh={};function xR(u,n){var o=u._origin,i=u._capacity,t=fh(i),e=u._tail;return r(u._root,u._level,0);function r(s,d,l){return d===0?a(s,l):c(s,d,l)}function a(s,d){var l=d===t?e&&e.array:s&&s.array,f=d>o?0:o-d,h=i-d;return h>ln&&(h=ln),function(){if(f===h)return dh;var p=n?--h:f++;return l&&l[p]}}function c(s,d,l){var f,h=s&&s.array,p=l>o?0:o-l>>d,y=(i-l>>d)+1;return y>ln&&(y=ln),function(){for(;;){if(f){var _=f();if(_!==dh)return _;f=null}if(p===y)return dh;var b=n?--y:p++;f=r(h&&h[b],d-Ht,l+(b<<d))}}}}function lh(u,n,o,i,t,e,r){var a=Object.create(cr);return a.size=n-u,a._origin=u,a._capacity=n,a._level=o,a._root=i,a._tail=t,a.__ownerID=e,a.__hash=r,a.__altered=!1,a}var RR;function XT(){return RR||(RR=lh(0,0,Ht))}function eK(u,n,o){if(n=Ni(u,n),n!==n)return u;if(n>=u.size||n<0)return u.withMutations(function(r){n<0?$i(r,n).set(0,o):$i(r,0,n+1).set(n,o)});n+=u._origin;var i=u._tail,t=u._root,e=Uw();return n>=fh(u._capacity)?i=OS(i,u.__ownerID,0,n,o,e):t=OS(t,u.__ownerID,u._level,n,o,e),e.value?u.__ownerID?(u._root=t,u._tail=i,u.__hash=void 0,u.__altered=!0,u):lh(u._origin,u._capacity,u._level,t,i):u}function OS(u,n,o,i,t,e){var r=i>>>o&Cr,a=u&&r<u.array.length;if(!a&&t===void 0)return u;var c;if(o>0){var s=u&&u.array[r],d=OS(s,n,o-Ht,i,t,e);return d===s?u:(c=nf(u,n),c.array[r]=d,c)}return a&&u.array[r]===t?u:(e&&fn(e),c=nf(u,n),t===void 0&&r===c.array.length-1?c.array.pop():c.array[r]=t,c)}function nf(u,n){return n&&u&&n===u.ownerID?u:new Bi(u?u.array.slice():[],n)}function FR(u,n){if(n>=fh(u._capacity))return u._tail;if(n<1<<u._level+Ht){for(var o=u._root,i=u._level;o&&i>0;)o=o.array[n>>>i&Cr],i-=Ht;return o}}function $i(u,n,o){n!==void 0&&(n|=0),o!==void 0&&(o|=0);var i=u.__ownerID||new Vw,t=u._origin,e=u._capacity,r=t+n,a=o===void 0?e:o<0?e+o:t+o;if(r===t&&a===e)return u;if(r>=a)return u.clear();for(var c=u._level,s=u._root,d=0;r+d<0;)s=new Bi(s&&s.array.length?[void 0,s]:[],i),c+=Ht,d+=1<<c;d&&(r+=d,t+=d,a+=d,e+=d);for(var l=fh(e),f=fh(a);f>=1<<c+Ht;)s=new Bi(s&&s.array.length?[s]:[],i),c+=Ht;var h=u._tail,p=f<l?FR(u,a-1):f>l?new Bi([],i):h;if(h&&f>l&&r<e&&h.array.length){s=nf(s,i);for(var y=s,_=c;_>Ht;_-=Ht){var b=l>>>_&Cr;y=y.array[b]=nf(y.array[b],i)}y.array[l>>>Ht&Cr]=h}if(a<e&&(p=p&&p.removeAfter(i,0,a)),r>=f)r-=f,a-=f,c=Ht,s=null,p=p&&p.removeBefore(i,0,r);else if(r>t||f<l){for(d=0;s;){var m=r>>>c&Cr;if(m!==f>>>c&Cr)break;m&&(d+=(1<<c)*m),c-=Ht,s=s.array[m]}s&&r>t&&(s=s.removeBefore(i,c,r-d)),s&&f<l&&(s=s.removeAfter(i,c,f-d)),d&&(r-=d,a-=d)}return u.__ownerID?(u.size=a-r,u._origin=r,u._capacity=a,u._level=c,u._root=s,u._tail=p,u.__hash=void 0,u.__altered=!0,u):lh(r,a,c,s,p)}function fh(u){return u<ln?0:u-1>>>Ht<<Ht}var On=(function(u){function n(o){return o==null?hh():MT(o)?o:hh().withMutations(function(i){var t=hn(o);tn(t.size),t.forEach(function(e,r){return i.set(r,e)})})}return u&&(n.__proto__=u),n.prototype=Object.create(u&&u.prototype),n.prototype.constructor=n,n.of=function(){return this(arguments)},n.prototype.toString=function(){return this.__toString("OrderedMap {","}")},n.prototype.get=function(i,t){var e=this._map.get(i);return e!==void 0?this._list.get(e)[1]:t},n.prototype.clear=function(){return this.size===0?this:this.__ownerID?(this.size=0,this._map.clear(),this._list.clear(),this.__altered=!0,this):hh()},n.prototype.set=function(i,t){return PR(this,i,t)},n.prototype.remove=function(i){return PR(this,i,At)},n.prototype.__iterate=function(i,t){var e=this;return this._list.__iterate(function(r){return r&&i(r[1],r[0],e)},t)},n.prototype.__iterator=function(i,t){return this._list.fromEntrySeq().__iterator(i,t)},n.prototype.__ensureOwner=function(i){if(i===this.__ownerID)return this;var t=this._map.__ensureOwner(i),e=this._list.__ensureOwner(i);return i?AS(t,e,i,this.__hash):this.size===0?hh():(this.__ownerID=i,this.__altered=!1,this._map=t,this._list=e,this)},n})(Ci);On.isOrderedMap=MT,On.prototype[kl]=!0,On.prototype[Kf]=On.prototype.remove;function AS(u,n,o,i){var t=Object.create(On.prototype);return t.size=u?u.size:0,t._map=u,t._list=n,t.__ownerID=o,t.__hash=i,t.__altered=!1,t}var IR;function hh(){return IR||(IR=AS(Sn(),XT()))}function PR(u,n,o){var i=u._map,t=u._list,e=i.get(n),r=e!==void 0,a,c;if(o===At){if(!r)return u;t.size>=ln&&t.size>=i.size*2?(c=t.filter(function(s,d){return s!==void 0&&e!==d}),a=c.toKeyedSeq().map(function(s){return s[0]}).flip().toMap(),u.__ownerID&&(a.__ownerID=c.__ownerID=u.__ownerID)):(a=i.remove(n),c=e===t.size-1?t.pop():t.set(e,void 0))}else if(r){if(o===t.get(e)[1])return u;a=i,c=t.set(e,[n,o])}else a=i.set(n,t.size),c=t.set(t.size,[n,o]);return u.__ownerID?(u.size=a.size,u._map=a,u._list=c,u.__hash=void 0,u.__altered=!0,u):AS(a,c)}var DR="@@__IMMUTABLE_STACK__@@";function ph(u){return!!(u&&u[DR])}var yh=(function(u){function n(o){return o==null?JT():ph(o)?o:JT().pushAll(o)}return u&&(n.__proto__=u),n.prototype=Object.create(u&&u.prototype),n.prototype.constructor=n,n.of=function(){return this(arguments)},n.prototype.toString=function(){return this.__toString("Stack [","]")},n.prototype.get=function(i,t){var e=this._head;for(i=Ni(this,i);e&&i--;)e=e.next;return e?e.value:t},n.prototype.peek=function(){return this._head&&this._head.value},n.prototype.push=function(){var i=arguments;if(arguments.length===0)return this;for(var t=this.size+arguments.length,e=this._head,r=arguments.length-1;r>=0;r--)e={value:i[r],next:e};return this.__ownerID?(this.size=t,this._head=e,this.__hash=void 0,this.__altered=!0,this):bh(t,e)},n.prototype.pushAll=function(i){if(i=u(i),i.size===0)return this;if(this.size===0&&ph(i))return i;tn(i.size);var t=this.size,e=this._head;return i.__iterate(function(r){t++,e={value:r,next:e}},!0),this.__ownerID?(this.size=t,this._head=e,this.__hash=void 0,this.__altered=!0,this):bh(t,e)},n.prototype.pop=function(){return this.slice(1)},n.prototype.clear=function(){return this.size===0?this:this.__ownerID?(this.size=0,this._head=void 0,this.__hash=void 0,this.__altered=!0,this):JT()},n.prototype.slice=function(i,t){if(kf(i,t,this.size))return this;var e=Xl(i,this.size),r=Wf(t,this.size);if(r!==this.size)return u.prototype.slice.call(this,i,t);for(var a=this.size-e,c=this._head;e--;)c=c.next;return this.__ownerID?(this.size=a,this._head=c,this.__hash=void 0,this.__altered=!0,this):bh(a,c)},n.prototype.__ensureOwner=function(i){return i===this.__ownerID?this:i?bh(this.size,this._head,i,this.__hash):this.size===0?JT():(this.__ownerID=i,this.__altered=!1,this)},n.prototype.__iterate=function(i,t){var e=this;if(t)return new ha(this.toArray()).__iterate(function(c,s){return i(c,s,e)},t);for(var r=0,a=this._head;a&&i(a.value,r++,this)!==!1;)a=a.next;return r},n.prototype.__iterator=function(i,t){if(t)return new ha(this.toArray()).__iterator(i,t);var e=0,r=this._head;return new It(function(){if(r){var a=r.value;return r=r.next,zt(i,e++,a)}return Br()})},n})(fa);yh.isStack=ph;var Ur=yh.prototype;Ur[DR]=!0,Ur.shift=Ur.pop,Ur.unshift=Ur.push,Ur.unshiftAll=Ur.pushAll,Ur.withMutations=ah,Ur.wasAltered=mS,Ur.asImmutable=oh,Ur["@@transducer/init"]=Ur.asMutable=uh,Ur["@@transducer/step"]=function(u,n){return u.unshift(n)},Ur["@@transducer/result"]=function(u){return u.asImmutable()};function bh(u,n,o,i){var t=Object.create(Ur);return t.size=u,t._head=n,t.__ownerID=o,t.__hash=i,t.__altered=!1,t}var NR;function JT(){return NR||(NR=bh(0))}var jR="@@__IMMUTABLE_SET__@@";function _h(u){return!!(u&&u[jR])}function KT(u){return _h(u)&&en(u)}function ES(u,n){if(u===n)return!0;if(!Ir(n)||u.size!==void 0&&n.size!==void 0&&u.size!==n.size||u.__hash!==void 0&&n.__hash!==void 0&&u.__hash!==n.__hash||Bt(u)!==Bt(n)||gr(u)!==gr(n)||en(u)!==en(n))return!1;if(u.size===0&&n.size===0)return!0;var o=!Jl(u);if(en(u)){var i=u.entries();return n.every(function(c,s){var d=i.next().value;return d&&fr(d[1],c)&&(o||fr(d[0],s))})&&i.next().done}var t=!1;if(u.size===void 0)if(n.size===void 0)typeof u.cacheResult=="function"&&u.cacheResult();else{t=!0;var e=u;u=n,n=e}var r=!0,a=n.__iterate(function(c,s){if(o?!u.has(c):t?!fr(c,u.get(s,At)):!fr(u.get(s,At),c))return r=!1,!1});return r&&u.size===a}function ya(u,n){var o=function(i){u.prototype[i]=n[i]};return Object.keys(n).forEach(o),Object.getOwnPropertySymbols&&Object.getOwnPropertySymbols(n).forEach(o),u}function kT(u){if(!u||typeof u!="object")return u;if(!Ir(u)){if(!Mi(u))return u;u=Pr(u)}if(Bt(u)){var n={};return u.__iterate(function(i,t){n[t]=kT(i)}),n}var o=[];return u.__iterate(function(i){o.push(kT(i))}),o}var af=(function(u){function n(o){return o==null?gh():_h(o)&&!en(o)?o:gh().withMutations(function(i){var t=u(o);tn(t.size),t.forEach(function(e){return i.add(e)})})}return u&&(n.__proto__=u),n.prototype=Object.create(u&&u.prototype),n.prototype.constructor=n,n.of=function(){return this(arguments)},n.fromKeys=function(i){return this(hn(i).keySeq())},n.intersect=function(i){return i=Gt(i).toArray(),i.length?mr.intersect.apply(n(i.pop()),i):gh()},n.union=function(i){return i=Gt(i).toArray(),i.length?mr.union.apply(n(i.pop()),i):gh()},n.prototype.toString=function(){return this.__toString("Set {","}")},n.prototype.has=function(i){return this._map.has(i)},n.prototype.add=function(i){return WT(this,this._map.set(i,i))},n.prototype.remove=function(i){return WT(this,this._map.remove(i))},n.prototype.clear=function(){return WT(this,this._map.clear())},n.prototype.map=function(i,t){var e=this,r=!1,a=WT(this,this._map.mapEntries(function(c){var s=c[1],d=i.call(t,s,s,e);return d!==s&&(r=!0),[d,d]},t));return r?a:this},n.prototype.union=function(){for(var i=[],t=arguments.length;t--;)i[t]=arguments[t];return i=i.filter(function(e){return e.size!==0}),i.length===0?this:this.size===0&&!this.__ownerID&&i.length===1?this.constructor(i[0]):this.withMutations(function(e){for(var r=0;r<i.length;r++)typeof i[r]=="string"?e.add(i[r]):u(i[r]).forEach(function(a){return e.add(a)})})},n.prototype.intersect=function(){for(var i=[],t=arguments.length;t--;)i[t]=arguments[t];if(i.length===0)return this;i=i.map(function(r){return u(r)});var e=[];return this.forEach(function(r){i.every(function(a){return a.includes(r)})||e.push(r)}),this.withMutations(function(r){e.forEach(function(a){r.remove(a)})})},n.prototype.subtract=function(){for(var i=[],t=arguments.length;t--;)i[t]=arguments[t];if(i.length===0)return this;i=i.map(function(r){return u(r)});var e=[];return this.forEach(function(r){i.some(function(a){return a.includes(r)})&&e.push(r)}),this.withMutations(function(r){e.forEach(function(a){r.remove(a)})})},n.prototype.sort=function(i){return ba(Zl(this,i))},n.prototype.sortBy=function(i,t){return ba(Zl(this,t,i))},n.prototype.wasAltered=function(){return this._map.wasAltered()},n.prototype.__iterate=function(i,t){var e=this;return this._map.__iterate(function(r){return i(r,r,e)},t)},n.prototype.__iterator=function(i,t){return this._map.__iterator(i,t)},n.prototype.__ensureOwner=function(i){if(i===this.__ownerID)return this;var t=this._map.__ensureOwner(i);return i?this.__make(t,i):this.size===0?this.__empty():(this.__ownerID=i,this._map=t,this)},n})(Kl);af.isSet=_h;var mr=af.prototype;mr[jR]=!0,mr[Kf]=mr.remove,mr.merge=mr.concat=mr.union,mr.withMutations=ah,mr.asImmutable=oh,mr["@@transducer/init"]=mr.asMutable=uh,mr["@@transducer/step"]=function(u,n){return u.add(n)},mr["@@transducer/result"]=function(u){return u.asImmutable()},mr.__empty=gh,mr.__make=LR;function WT(u,n){return u.__ownerID?(u.size=n.size,u._map=n,u):n===u._map?u:n.size===0?u.__empty():u.__make(n)}function LR(u,n){var o=Object.create(mr);return o.size=u?u.size:0,o._map=u,o.__ownerID=n,o}var MR;function gh(){return MR||(MR=LR(Sn()))}var xS=(function(u){function n(o,i,t){if(!(this instanceof n))return new n(o,i,t);if(oS(t!==0,"Cannot step a Range by 0"),o=o||0,i===void 0&&(i=1/0),t=t===void 0?1:Math.abs(t),i<o&&(t=-t),this._start=o,this._end=i,this._step=t,this.size=Math.max(0,Math.ceil((i-o)/t-1)+1),this.size===0){if(RS)return RS;RS=this}}return u&&(n.__proto__=u),n.prototype=Object.create(u&&u.prototype),n.prototype.constructor=n,n.prototype.toString=function(){return this.size===0?"Range []":"Range [ "+this._start+"..."+this._end+(this._step!==1?" by "+this._step:"")+" ]"},n.prototype.get=function(i,t){return this.has(i)?this._start+Ni(this,i)*this._step:t},n.prototype.includes=function(i){var t=(i-this._start)/this._step;return t>=0&&t<this.size&&t===Math.floor(t)},n.prototype.slice=function(i,t){return kf(i,t,this.size)?this:(i=Xl(i,this.size),t=Wf(t,this.size),t<=i?new n(0,0):new n(this.get(i,this._end),this.get(t,this._end),this._step))},n.prototype.indexOf=function(i){var t=i-this._start;if(t%this._step===0){var e=t/this._step;if(e>=0&&e<this.size)return e}return-1},n.prototype.lastIndexOf=function(i){return this.indexOf(i)},n.prototype.__iterate=function(i,t){for(var e=this.size,r=this._step,a=t?this._start+(e-1)*r:this._start,c=0;c!==e&&i(a,t?e-++c:c++,this)!==!1;)a+=t?-r:r;return c},n.prototype.__iterator=function(i,t){var e=this.size,r=this._step,a=t?this._start+(e-1)*r:this._start,c=0;return new It(function(){if(c===e)return Br();var s=a;return a+=t?-r:r,zt(i,t?e-++c:c++,s)})},n.prototype.equals=function(i){return i instanceof n?this._start===i._start&&this._end===i._end&&this._step===i._step:ES(this,i)},n})(yn),RS;function YT(u,n,o){for(var i=cR(n),t=0;t!==i.length;)if(u=QT(u,i[t++],At),u===At)return o;return u}function qR(u,n){return YT(this,u,n)}function FS(u,n){return YT(u,n,At)!==At}function tK(u){return FS(this,u)}function CR(){tn(this.size);var u={};return this.__iterate(function(n,o){u[o]=n}),u}Gt.isIterable=Ir,Gt.isKeyed=Bt,Gt.isIndexed=gr,Gt.isAssociative=Jl,Gt.isOrdered=en,Gt.Iterator=It,ya(Gt,{toArray:function(){tn(this.size);var n=new Array(this.size||0),o=Bt(this),i=0;return this.__iterate(function(t,e){n[i++]=o?[e,t]:t}),n},toIndexedSeq:function(){return new Yx(this)},toJS:function(){return kT(this)},toKeyedSeq:function(){return new BT(this,!0)},toMap:function(){return Ci(this.toKeyedSeq())},toObject:CR,toOrderedMap:function(){return On(this.toKeyedSeq())},toOrderedSet:function(){return ba(Bt(this)?this.valueSeq():this)},toSet:function(){return af(Bt(this)?this.valueSeq():this)},toSetSeq:function(){return new Zx(this)},toSeq:function(){return gr(this)?this.toIndexedSeq():Bt(this)?this.toKeyedSeq():this.toSetSeq()},toStack:function(){return yh(Bt(this)?this.valueSeq():this)},toList:function(){return rf(Bt(this)?this.valueSeq():this)},toString:function(){return"[Collection]"},__toString:function(n,o){return this.size===0?n+o:n+" "+this.toSeq().map(this.__toStringMapper).join(", ")+" "+o},concat:function(){for(var n=[],o=arguments.length;o--;)n[o]=arguments[o];return $t(this,BJ(this,n))},includes:function(n){return this.some(function(o){return fr(o,n)})},entries:function(){return this.__iterator(pn)},every:function(n,o){tn(this.size);var i=!0;return this.__iterate(function(t,e,r){if(!n.call(o,t,e,r))return i=!1,!1}),i},filter:function(n,o){return $t(this,nR(this,n,o,!0))},partition:function(n,o){return qJ(this,n,o)},find:function(n,o,i){var t=this.findEntry(n,o);return t?t[1]:i},forEach:function(n,o){return tn(this.size),this.__iterate(o?n.bind(o):n)},join:function(n){tn(this.size),n=n!==void 0?""+n:",";var o="",i=!0;return this.__iterate(function(t){i?i=!1:o+=n,o+=t!=null?t.toString():""}),o},keys:function(){return this.__iterator(Zf)},map:function(n,o){return $t(this,rR(this,n,o))},reduce:function(n,o,i){return BR(this,n,o,i,arguments.length<2,!1)},reduceRight:function(n,o,i){return BR(this,n,o,i,arguments.length<2,!0)},reverse:function(){return $t(this,nS(this,!0))},slice:function(n,o){return $t(this,iS(this,n,o,!0))},some:function(n,o){tn(this.size);var i=!1;return this.__iterate(function(t,e,r){if(n.call(o,t,e,r))return i=!0,!1}),i},sort:function(n){return $t(this,Zl(this,n))},values:function(){return this.__iterator(wn)},butLast:function(){return this.slice(0,-1)},isEmpty:function(){return this.size!==void 0?this.size===0:!this.some(function(){return!0})},count:function(n,o){return zl(n?this.toSeq().filter(n,o):this)},countBy:function(n,o){return LJ(this,n,o)},equals:function(n){return ES(this,n)},entrySeq:function(){var n=this;if(n._cache)return new ha(n._cache);var o=n.toSeq().map(nK).toIndexedSeq();return o.fromEntrySeq=function(){return n.toSeq()},o},filterNot:function(n,o){return this.filter(IS(n),o)},findEntry:function(n,o,i){var t=i;return this.__iterate(function(e,r,a){if(n.call(o,e,r,a))return t=[r,e],!1}),t},findKey:function(n,o){var i=this.findEntry(n,o);return i&&i[0]},findLast:function(n,o,i){return this.toKeyedSeq().reverse().find(n,o,i)},findLastEntry:function(n,o,i){return this.toKeyedSeq().reverse().findEntry(n,o,i)},findLastKey:function(n,o){return this.toKeyedSeq().reverse().findKey(n,o)},first:function(n){return this.find(jx,null,n)},flatMap:function(n,o){return $t(this,$J(this,n,o))},flatten:function(n){return $t(this,aR(this,n,!0))},fromEntrySeq:function(){return new eR(this)},get:function(n,o){return this.find(function(i,t){return fr(t,n)},void 0,o)},getIn:qR,groupBy:function(n,o){return MJ(this,n,o)},has:function(n){return this.get(n,At)!==At},hasIn:tK,isSubset:function(n){return n=typeof n.includes=="function"?n:Gt(n),this.every(function(o){return n.includes(o)})},isSuperset:function(n){return n=typeof n.isSubset=="function"?n:Gt(n),n.isSubset(this)},keyOf:function(n){return this.findKey(function(o){return fr(o,n)})},keySeq:function(){return this.toSeq().map(rK).toIndexedSeq()},last:function(n){return this.toSeq().reverse().first(n)},lastKeyOf:function(n){return this.toKeyedSeq().reverse().keyOf(n)},max:function(n){return $T(this,n)},maxBy:function(n,o){return $T(this,o,n)},min:function(n){return $T(this,n?$R(n):VR)},minBy:function(n,o){return $T(this,o?$R(o):VR,n)},rest:function(){return this.slice(1)},skip:function(n){return n===0?this:this.slice(Math.max(0,n))},skipLast:function(n){return n===0?this:this.slice(0,-Math.max(0,n))},skipWhile:function(n,o){return $t(this,iR(this,n,o,!0))},skipUntil:function(n,o){return this.skipWhile(IS(n),o)},sortBy:function(n,o){return $t(this,Zl(this,o,n))},take:function(n){return this.slice(0,Math.max(0,n))},takeLast:function(n){return this.slice(-Math.max(0,n))},takeWhile:function(n,o){return $t(this,CJ(this,n,o))},takeUntil:function(n,o){return this.takeWhile(IS(n),o)},update:function(n){return n(this)},valueSeq:function(){return this.toIndexedSeq()},hashCode:function(){return this.__hash||(this.__hash=iK(this))}});var Dr=Gt.prototype;Dr[qx]=!0,Dr[jT]=Dr.values,Dr.toJSON=Dr.toArray,Dr.__toStringMapper=rh,Dr.inspect=Dr.toSource=function(){return this.toString()},Dr.chain=Dr.flatMap,Dr.contains=Dr.includes,ya(hn,{flip:function(){return $t(this,tR(this))},mapEntries:function(n,o){var i=this,t=0;return $t(this,this.toSeq().map(function(e,r){return n.call(o,[r,e],t++,i)}).fromEntrySeq())},mapKeys:function(n,o){var i=this;return $t(this,this.toSeq().flip().map(function(t,e){return n.call(o,t,e,i)}).flip())}});var mh=hn.prototype;mh[Cx]=!0,mh[jT]=Dr.entries,mh.toJSON=CR,mh.__toStringMapper=function(u,n){return rh(n)+": "+rh(u)},ya(fa,{toKeyedSeq:function(){return new BT(this,!1)},filter:function(n,o){return $t(this,nR(this,n,o,!1))},findIndex:function(n,o){var i=this.findEntry(n,o);return i?i[0]:-1},indexOf:function(n){var o=this.keyOf(n);return o===void 0?-1:o},lastIndexOf:function(n){var o=this.lastKeyOf(n);return o===void 0?-1:o},reverse:function(){return $t(this,nS(this,!1))},slice:function(n,o){return $t(this,iS(this,n,o,!1))},splice:function(n,o){var i=arguments.length;if(o=Math.max(o||0,0),i===0||i===2&&!o)return this;n=Xl(n,n<0?this.count():this.size);var t=this.slice(0,n);return $t(this,i===1?t:t.concat(Hn(arguments,2),this.slice(n+o)))},findLastIndex:function(n,o){var i=this.findLastEntry(n,o);return i?i[0]:-1},first:function(n){return this.get(0,n)},flatten:function(n){return $t(this,aR(this,n,!1))},get:function(n,o){return n=Ni(this,n),n<0||this.size===1/0||this.size!==void 0&&n>this.size?o:this.find(function(i,t){return t===n},void 0,o)},has:function(n){return n=Ni(this,n),n>=0&&(this.size!==void 0?this.size===1/0||n<this.size:this.indexOf(n)!==-1)},interpose:function(n){return $t(this,UJ(this,n))},interleave:function(){var n=[this].concat(Hn(arguments)),o=UT(this.toSeq(),yn.of,n),i=o.flatten(!0);return o.size&&(i.size=o.size*n.length),$t(this,i)},keySeq:function(){return xS(0,this.size)},last:function(n){return this.get(-1,n)},skipWhile:function(n,o){return $t(this,iR(this,n,o,!1))},zip:function(){var n=[this].concat(Hn(arguments));return $t(this,UT(this,UR,n))},zipAll:function(){var n=[this].concat(Hn(arguments));return $t(this,UT(this,UR,n,!0))},zipWith:function(n){var o=Hn(arguments);return o[0]=this,$t(this,UT(this,n,o))}});var uf=fa.prototype;uf[Bx]=!0,uf[kl]=!0,ya(Kl,{get:function(n,o){return this.has(n)?n:o},includes:function(n){return this.has(n)},keySeq:function(){return this.valueSeq()}});var of=Kl.prototype;of.has=Dr.includes,of.contains=of.includes,of.keys=of.values,ya(Li,mh),ya(yn,uf),ya(Yl,of);function BR(u,n,o,i,t,e){return tn(u.size),u.__iterate(function(r,a,c){t?(t=!1,o=r):o=n.call(i,o,r,a,c)},e),o}function rK(u,n){return n}function nK(u,n){return[n,u]}function IS(u){return function(){return!u.apply(this,arguments)}}function $R(u){return function(){return-u.apply(this,arguments)}}function UR(){return Hn(arguments)}function VR(u,n){return u<n?1:u>n?-1:0}function iK(u){if(u.size===1/0)return 0;var n=en(u),o=Bt(u),i=n?1:0,t=u.__iterate(o?n?function(e,r){i=31*i+QR($r(e),$r(r))|0}:function(e,r){i=i+QR($r(e),$r(r))|0}:n?function(e){i=31*i+$r(e)|0}:function(e){i=i+$r(e)|0});return aK(t,i)}function aK(u,n){return n=th(n,3432918353),n=th(n<<15|n>>>-15,461845907),n=th(n<<13|n>>>-13,5),n=(n+3864292196|0)^u,n=th(n^n>>>16,2246822507),n=th(n^n>>>13,3266489909),n=CT(n^n>>>16),n}function QR(u,n){return u^n+2654435769+(u<<6)+(u>>2)|0}var ba=(function(u){function n(o){return o==null?PS():KT(o)?o:PS().withMutations(function(i){var t=Kl(o);tn(t.size),t.forEach(function(e){return i.add(e)})})}return u&&(n.__proto__=u),n.prototype=Object.create(u&&u.prototype),n.prototype.constructor=n,n.of=function(){return this(arguments)},n.fromKeys=function(i){return this(hn(i).keySeq())},n.prototype.toString=function(){return this.__toString("OrderedSet {","}")},n})(af);ba.isOrderedSet=KT;var _a=ba.prototype;_a[kl]=!0,_a.zip=uf.zip,_a.zipWith=uf.zipWith,_a.zipAll=uf.zipAll,_a.__empty=PS,_a.__make=HR;function HR(u,n){var o=Object.create(_a);return o.size=u?u.size:0,o._map=u,o.__ownerID=n,o}var GR;function PS(){return GR||(GR=HR(hh()))}var zR={LeftThenRight:-1,RightThenLeft:1};function uK(u){if(ji(u))throw new Error("Can not call `Record` with an immutable Record as default values. Use a plain javascript object instead.");if(Zr(u))throw new Error("Can not call `Record` with an immutable Collection as default values. Use a plain javascript object instead.");if(u===null||typeof u!="object")throw new Error("Can not call `Record` with a non-object as default values. Use a plain javascript object instead.")}var dr=function(n,o){var i;uK(n);var t=function(a){var c=this;if(a instanceof t)return a;if(!(this instanceof t))return new t(a);if(!i){i=!0;var s=Object.keys(n),d=e._indices={};e._name=o,e._keys=s,e._defaultValues=n;for(var l=0;l<s.length;l++){var f=s[l];d[f]=l,e[f]?typeof console=="object"&&console.warn&&console.warn("Cannot define "+NS(this)+' with property "'+f+'" since that property name is part of the Record API.'):oK(e,f)}}return this.__ownerID=void 0,this._values=rf().withMutations(function(h){h.setSize(c._keys.length),hn(a).forEach(function(p,y){h.set(c._indices[y],p===c._defaultValues[y]?void 0:p)})}),this},e=t.prototype=Object.create(Ut);return e.constructor=t,o&&(t.displayName=o),t};dr.prototype.toString=function(){for(var n=NS(this)+" { ",o=this._keys,i,t=0,e=o.length;t!==e;t++)i=o[t],n+=(t?", ":"")+i+": "+rh(this.get(i));return n+" }"},dr.prototype.equals=function(n){return this===n||ji(n)&&sf(this).equals(sf(n))},dr.prototype.hashCode=function(){return sf(this).hashCode()},dr.prototype.has=function(n){return this._indices.hasOwnProperty(n)},dr.prototype.get=function(n,o){if(!this.has(n))return o;var i=this._indices[n],t=this._values.get(i);return t===void 0?this._defaultValues[n]:t},dr.prototype.set=function(n,o){if(this.has(n)){var i=this._values.set(this._indices[n],o===this._defaultValues[n]?void 0:o);if(i!==this._values&&!this.__ownerID)return DS(this,i)}return this},dr.prototype.remove=function(n){return this.set(n)},dr.prototype.clear=function(){var n=this._values.clear().setSize(this._keys.length);return this.__ownerID?this:DS(this,n)},dr.prototype.wasAltered=function(){return this._values.wasAltered()},dr.prototype.toSeq=function(){return sf(this)},dr.prototype.toJS=function(){return kT(this)},dr.prototype.entries=function(){return this.__iterator(pn)},dr.prototype.__iterator=function(n,o){return sf(this).__iterator(n,o)},dr.prototype.__iterate=function(n,o){return sf(this).__iterate(n,o)},dr.prototype.__ensureOwner=function(n){if(n===this.__ownerID)return this;var o=this._values.__ensureOwner(n);return n?DS(this,o,n):(this.__ownerID=n,this._values=o,this)},dr.isRecord=ji,dr.getDescriptiveName=NS;var Ut=dr.prototype;Ut[Ux]=!0,Ut[Kf]=Ut.remove,Ut.deleteIn=Ut.removeIn=pS,Ut.getIn=qR,Ut.hasIn=Dr.hasIn,Ut.merge=lR,Ut.mergeWith=fR,Ut.mergeIn=_S,Ut.mergeDeep=gR,Ut.mergeDeepWith=mR,Ut.mergeDeepIn=gS,Ut.setIn=fS,Ut.update=yS,Ut.updateIn=bS,Ut.withMutations=ah,Ut.asMutable=uh,Ut.asImmutable=oh,Ut[jT]=Ut.entries,Ut.toJSON=Ut.toObject=Dr.toObject,Ut.inspect=Ut.toSource=function(){return this.toString()};function DS(u,n,o){var i=Object.create(Object.getPrototypeOf(u));return i._values=n,i.__ownerID=o,i}function NS(u){return u.constructor.displayName||u.constructor.name||"Record"}function sf(u){return Kw(u._keys.map(function(n){return[n,u.get(n)]}))}function oK(u,n){try{Object.defineProperty(u,n,{get:function(){return this.get(n)},set:function(o){oS(this.__ownerID,"Cannot set on an immutable record."),this.set(n,o)}})}catch{}}var XR=(function(u){function n(o,i){if(!(this instanceof n))return new n(o,i);if(this._value=o,this.size=i===void 0?1/0:Math.max(0,i),this.size===0){if(jS)return jS;jS=this}}return u&&(n.__proto__=u),n.prototype=Object.create(u&&u.prototype),n.prototype.constructor=n,n.prototype.toString=function(){return this.size===0?"Repeat []":"Repeat [ "+this._value+" "+this.size+" times ]"},n.prototype.get=function(i,t){return this.has(i)?this._value:t},n.prototype.includes=function(i){return fr(this._value,i)},n.prototype.slice=function(i,t){var e=this.size;return kf(i,t,e)?this:new n(this._value,Wf(t,e)-Xl(i,e))},n.prototype.reverse=function(){return this},n.prototype.indexOf=function(i){return fr(this._value,i)?0:-1},n.prototype.lastIndexOf=function(i){return fr(this._value,i)?this.size:-1},n.prototype.__iterate=function(i,t){for(var e=this.size,r=0;r!==e&&i(this._value,t?e-++r:r++,this)!==!1;);return r},n.prototype.__iterator=function(i,t){var e=this,r=this.size,a=0;return new It(function(){return a===r?Br():zt(i,t?r-++a:a++,e._value)})},n.prototype.equals=function(i){return i instanceof n?fr(this._value,i._value):ES(this,i)},n})(yn),jS;function JR(u,n){return KR([],n||sK,u,"",n&&n.length>2?[]:void 0,{"":u})}function KR(u,n,o,i,t,e){if(typeof o!="string"&&!Zr(o)&&(zw(o)||Hw(o)||VT(o))){if(~u.indexOf(o))throw new TypeError("Cannot convert circular structure to Immutable");u.push(o),t&&i!==""&&t.push(i);var r=n.call(e,i,Pr(o).map(function(a,c){return KR(u,n,a,c,t,o)}),t&&t.slice());return u.pop(),t&&t.pop(),r}return o}function sK(u,n){return gr(n)?n.toList():Bt(n)?n.toMap():n.toSet()}var kR="4.3.7",cK={version:kR,Collection:Gt,Iterable:Gt,Seq:Pr,Map:Ci,OrderedMap:On,List:rf,Stack:yh,Set:af,OrderedSet:ba,PairSorting:zR,Record:dr,Range:xS,Repeat:XR,is:fr,fromJS:JR,hash:$r,isImmutable:Zr,isCollection:Ir,isKeyed:Bt,isIndexed:gr,isAssociative:Jl,isOrdered:en,isValueObject:qT,isPlainObject:VT,isSeq:Yf,isList:zT,isMap:eh,isOrderedMap:MT,isStack:ph,isSet:_h,isOrderedSet:KT,isRecord:ji,get:QT,getIn:YT,has:sS,hasIn:FS,merge:pR,mergeDeep:bR,mergeWith:yR,mergeDeepWith:_R,remove:cS,removeIn:hS,set:dS,setIn:lS,update:GT,updateIn:qi},dK=Gt,lK=Object.freeze({__proto__:null,Collection:Gt,Iterable:dK,List:rf,Map:Ci,OrderedMap:On,OrderedSet:ba,PairSorting:zR,Range:xS,Record:dr,Repeat:XR,Seq:Pr,Set:af,Stack:yh,default:cK,fromJS:JR,get:QT,getIn:YT,has:sS,hasIn:FS,hash:$r,is:fr,isAssociative:Jl,isCollection:Ir,isImmutable:Zr,isIndexed:gr,isKeyed:Bt,isList:zT,isMap:eh,isOrdered:en,isOrderedMap:MT,isOrderedSet:KT,isPlainObject:VT,isRecord:ji,isSeq:Yf,isSet:_h,isStack:ph,isValueObject:qT,merge:pR,mergeDeep:bR,mergeDeepWith:_R,mergeWith:yR,remove:cS,removeIn:hS,set:dS,setIn:lS,update:GT,updateIn:qi,version:kR}),LS=Lt(lK),WR;function YR(){if(WR)return la;WR=1,Object.defineProperty(la,"__esModule",{value:!0}),la.ActionContextKey=la.ActionContext=void 0;const u=LS;let n=class ST{constructor(t={}){this.map=(0,u.Map)(t)}setDefault(t,e){return this.has(t)?this:this.set(t,e)}set(t,e){return this.setRaw(t.name,e)}setRaw(t,e){return new ST(this.map.set(t,e))}delete(t){return new ST(this.map.delete(t.name))}get(t){return this.getRaw(t.name)}getRaw(t){return this.map.get(t)}getSafe(t){if(!this.has(t))throw new Error(`Context entry ${t.name} is required but not available`);return this.get(t)}has(t){return this.hasRaw(t.name)}hasRaw(t){return this.map.has(t)}merge(...t){let e=this;for(const r of t)for(const a of r.keys())e=e.set(a,r.get(a));return e}keys(){return[...this.map.keys()].map(t=>new o(t))}toJS(){return this.map.toJS()}toString(){return`ActionContext(${JSON.stringify(this.map.toJS())})`}[Symbol.for("nodejs.util.inspect.custom")](){return`ActionContext(${JSON.stringify(this.map.toJS(),null,"  ")})`}static ensureActionContext(t){return t instanceof ST?t:new ST((0,u.Map)(t??{}))}};la.ActionContext=n;class o{constructor(t){this.name=t}}return la.ActionContextKey=o,la}var vh={},ZR;function eF(){if(ZR)return vh;ZR=1,Object.defineProperty(vh,"__esModule",{value:!0}),vh.Bus=void 0;let u=class{constructor(o){this.actors=[],this.observers=[],this.dependencyLinks=new Map,Object.assign(this,o),this.failMessage=`All actors over bus ${this.name} failed to handle an action`}subscribe(o){this.actors.push(o),this.reorderForDependencies()}subscribeObserver(o){this.observers.push(o)}unsubscribe(o){const i=this.actors.indexOf(o);return i>=0?(this.actors.splice(i,1),!0):!1}unsubscribeObserver(o){const i=this.observers.indexOf(o);return i>=0?(this.observers.splice(i,1),!0):!1}publish(o){return this.actors.map(i=>({actor:i,reply:i.test(o)}))}onRun(o,i,t){for(const e of this.observers)e.onRun(o,i,t)}addDependencies(o,i){for(const t of i){let e=this.dependencyLinks.get(t);e||(e=[],this.dependencyLinks.set(t,e)),e.push(o)}this.reorderForDependencies()}reorderForDependencies(){if(this.dependencyLinks.size>0){const o=[];for(const i of this.dependencyLinks.keys()){const t=this.actors.indexOf(i);t>=0&&(this.actors.splice(t,1),o.push(i))}for(;o.length>0;){let i=-1;for(let e=0;e<o.length;e++){let r=!0;for(const a of this.dependencyLinks.get(o[e]))if(!this.actors.includes(a)&&o.includes(a)){r=!1;break}if(r){i=e;break}}if(i<0)throw new Error(`Cyclic dependency links detected in bus ${this.name}`);const t=o.splice(i,1)[0];this.actors.push(t)}}}};return vh.Bus=u,vh}var Th={},tF;function fK(){if(tF)return Th;tF=1,Object.defineProperty(Th,"__esModule",{value:!0}),Th.BusIndexed=void 0;const u=eF();let n=class extends u.Bus{constructor(i){super(i),this.actorsIndex={}}subscribe(i){const t=this.getActorIdentifiers(i)??["_undefined_"];for(const e of t){let r=this.actorsIndex[e];r||(r=this.actorsIndex[e]=[]),r.push(i),super.subscribe(i)}}unsubscribe(i){const t=this.getActorIdentifiers(i)??["_undefined_"];let e=!1;for(const r of t){const a=this.actorsIndex[r];if(a){const c=a.indexOf(i);c>=0&&a.splice(c,1),a.length===0&&delete this.actorsIndex[r]}e=e||super.unsubscribe(i)}return e}publish(i){const t=this.getActionIdentifier(i);return t?[...this.actorsIndex[t]||[],...this.actorsIndex._undefined_||[]].map(r=>({actor:r,reply:r.test(i)})):super.publish(i)}getActorIdentifiers(i){const t=this.actorIdentifierFields.reduce((e,r)=>e[r],i);if(t)return Array.isArray(t)?t:[t]}getActionIdentifier(i){return this.actionIdentifierFields.reduce((t,e)=>t[e],i)}};return Th.BusIndexed=n,Th}var wh={},rF;function nF(){if(rF)return wh;rF=1,Object.defineProperty(wh,"__esModule",{value:!0}),wh.CONTEXT_KEY_LOGGER=void 0;const u=YR();return wh.CONTEXT_KEY_LOGGER=new u.ActionContextKey("@comunica/core:log"),wh}var Sh={},iF;function hK(){if(iF)return Sh;iF=1,Object.defineProperty(Sh,"__esModule",{value:!0}),Sh.ActionObserver=void 0;let u=class{constructor(o){Object.assign(this,o)}};return Sh.ActionObserver=u,Sh}var Oh={},aF;function pK(){if(aF)return Oh;aF=1,Object.defineProperty(Oh,"__esModule",{value:!0}),Oh.Actor=void 0;const u=nF();let n=class $l{constructor(i){this.beforeActors=[],Object.assign(this,i),this.bus.subscribe(this),this.beforeActors.length>0&&this.bus.addDependencies(this,this.beforeActors),i.busFailMessage&&(this.bus.failMessage=i.busFailMessage)}static getContextLogger(i){return i.get(u.CONTEXT_KEY_LOGGER)}runObservable(i,t){const e=this.run(i,t);return this.bus.onRun(this,i,e),e}getDefaultLogData(i,t){const e=t?t():{};return e.actor=this.name,e}logTrace(i,t,e){const r=$l.getContextLogger(i);r&&r.trace(t,this.getDefaultLogData(i,e))}logDebug(i,t,e){const r=$l.getContextLogger(i);r&&r.debug(t,this.getDefaultLogData(i,e))}logInfo(i,t,e){const r=$l.getContextLogger(i);r&&r.info(t,this.getDefaultLogData(i,e))}logWarn(i,t,e){const r=$l.getContextLogger(i);r&&r.warn(t,this.getDefaultLogData(i,e))}logError(i,t,e){const r=$l.getContextLogger(i);r&&r.error(t,this.getDefaultLogData(i,e))}logFatal(i,t,e){const r=$l.getContextLogger(i);r&&r.fatal(t,this.getDefaultLogData(i,e))}};return Oh.Actor=n,Oh}var Ah={},uF;function yK(){if(uF)return Ah;uF=1,Object.defineProperty(Ah,"__esModule",{value:!0}),Ah.Mediator=void 0;let u=class mx{constructor(o){Object.assign(this,o)}publish(o){const i=this.bus.publish(o);if(i.length===0)throw new Error(`No actors are able to reply to a message in the bus ${this.bus.name}`);return i}async mediateActor(o){return await this.mediateWith(o,this.publish(o))}async mediateTestable(o){return(await this.mediateActor(o)).mapAsync((t,e)=>t.runObservable(o,e))}async mediate(o){return(await this.mediateTestable(o)).getOrThrow()}constructFailureMessage(o,i){const t=`
        `;return`${this.bus.failMessage.replaceAll(/\$\{(.*?)\}/gu,(r,a)=>mx.getObjectValue({action:o},a.split("."))||r)}
    Error messages of failing actors:${t}${i.join(t)}`}static getObjectValue(o,i){if(i.length===0)return o;if(o)return mx.getObjectValue(o[i[0]],i.slice(1))}};return Ah.Mediator=u,Ah}var vr={},oF;function bK(){if(oF)return vr;oF=1,Object.defineProperty(vr,"__esModule",{value:!0}),vr.TestResultFailed=vr.TestResultPassed=vr.failTest=vr.passTestVoidWithSideData=vr.passTestWithSideData=vr.passTestVoid=vr.passTest=void 0;function u(a){return new e(a,void 0)}vr.passTest=u;function n(){return new e(!0,void 0)}vr.passTestVoid=n;function o(a,c){return new e(a,c)}vr.passTestWithSideData=o;function i(a){return new e(!0,a)}vr.passTestVoidWithSideData=i;function t(a){return new r(a)}vr.failTest=t;class e{constructor(c,s){this.value=c,this.sideData=s}isPassed(){return!0}isFailed(){return!1}get(){return this.value}getOrThrow(){return this.value}getSideData(){return this.sideData}getFailMessage(){}map(c){return new e(c(this.value,this.sideData),this.sideData)}async mapAsync(c){return new e(await c(this.value,this.sideData),this.sideData)}}vr.TestResultPassed=e;class r{constructor(c){this.failMessage=c}isPassed(){return!1}isFailed(){return!0}get(){}getOrThrow(){throw new Error(this.getFailMessage())}getSideData(){throw new Error(this.getFailMessage())}getFailMessage(){return this.failMessage}map(){return this}async mapAsync(){return this}}return vr.TestResultFailed=r,vr}var sF;function pe(){return sF||(sF=1,(function(u){var n=da&&da.__createBinding||(Object.create?(function(i,t,e,r){r===void 0&&(r=e);var a=Object.getOwnPropertyDescriptor(t,e);(!a||("get"in a?!t.__esModule:a.writable||a.configurable))&&(a={enumerable:!0,get:function(){return t[e]}}),Object.defineProperty(i,r,a)}):(function(i,t,e,r){r===void 0&&(r=e),i[r]=t[e]})),o=da&&da.__exportStar||function(i,t){for(var e in i)e!=="default"&&!Object.prototype.hasOwnProperty.call(t,e)&&n(t,i,e)};Object.defineProperty(u,"__esModule",{value:!0}),o(YR(),u),o(eF(),u),o(fK(),u),o(nF(),u),o(hK(),u),o(pK(),u),o(yK(),u),o(bK(),u)})(da)),da}var cF;function _K(){if(cF)return Jf;cF=1,Object.defineProperty(Jf,"__esModule",{value:!0}),Jf.ActorInit=void 0;const u=pe();let n=class extends u.Actor{constructor(i){super(i)}};return Jf.ActorInit=n,Jf}var dF;function gK(){return dF||(dF=1,(function(u){var n=ca&&ca.__createBinding||(Object.create?(function(i,t,e,r){r===void 0&&(r=e);var a=Object.getOwnPropertyDescriptor(t,e);(!a||("get"in a?!t.__esModule:a.writable||a.configurable))&&(a={enumerable:!0,get:function(){return t[e]}}),Object.defineProperty(i,r,a)}):(function(i,t,e,r){r===void 0&&(r=e),i[r]=t[e]})),o=ca&&ca.__exportStar||function(i,t){for(var e in i)e!=="default"&&!Object.prototype.hasOwnProperty.call(t,e)&&n(t,i,e)};Object.defineProperty(u,"__esModule",{value:!0}),o(_K(),u)})(ca)),ca}var lF;function fF(){if(lF)return Xf;lF=1,Object.defineProperty(Xf,"__esModule",{value:!0}),Xf.ActorInitQueryBase=void 0;const u=gK(),n=pe();let o=class extends u.ActorInit{async test(t){return(0,n.passTestVoid)()}async run(t){throw new Error("ActorInitSparql#run is not supported in the browser.")}};return Xf.ActorInitQueryBase=o,Xf}var Eh={},MS={exports:{}},hF;function Ui(){if(hF)return MS.exports;hF=1;var u=MS.exports={},n,o;function i(){throw new Error("setTimeout has not been defined")}function t(){throw new Error("clearTimeout has not been defined")}(function(){try{typeof setTimeout=="function"?n=setTimeout:n=i}catch{n=i}try{typeof clearTimeout=="function"?o=clearTimeout:o=t}catch{o=t}})();function e(y){if(n===setTimeout)return setTimeout(y,0);if((n===i||!n)&&setTimeout)return n=setTimeout,setTimeout(y,0);try{return n(y,0)}catch{try{return n.call(null,y,0)}catch{return n.call(this,y,0)}}}function r(y){if(o===clearTimeout)return clearTimeout(y);if((o===t||!o)&&clearTimeout)return o=clearTimeout,clearTimeout(y);try{return o(y)}catch{try{return o.call(null,y)}catch{return o.call(this,y)}}}var a=[],c=!1,s,d=-1;function l(){!c||!s||(c=!1,s.length?a=s.concat(a):d=-1,a.length&&f())}function f(){if(!c){var y=e(l);c=!0;for(var _=a.length;_;){for(s=a,a=[];++d<_;)s&&s[d].run();d=-1,_=a.length}s=null,c=!1,r(y)}}u.nextTick=function(y){var _=new Array(arguments.length-1);if(arguments.length>1)for(var b=1;b<arguments.length;b++)_[b-1]=arguments[b];a.push(new h(y,_)),a.length===1&&!c&&e(f)};function h(y,_){this.fun=y,this.array=_}h.prototype.run=function(){this.fun.apply(null,this.array)},u.title="browser",u.browser=!0,u.env={},u.argv=[],u.version="",u.versions={};function p(){}return u.on=p,u.addListener=p,u.once=p,u.off=p,u.removeListener=p,u.removeAllListeners=p,u.emit=p,u.prependListener=p,u.prependOnceListener=p,u.listeners=function(y){return[]},u.binding=function(y){throw new Error("process.binding is not supported")},u.cwd=function(){return"/"},u.chdir=function(y){throw new Error("process.chdir is not supported")},u.umask=function(){return 0},MS.exports}var pF;function mK(){if(pF)return Eh;pF=1,Object.defineProperty(Eh,"__esModule",{value:!0}),Eh.ActorInitQuery=void 0;const u=fF();typeof process>"u"&&(globalThis.process=Ui());class n extends u.ActorInitQueryBase{}return Eh.ActorInitQuery=n,Eh}var xh={},ga={},xt={},yF;function bF(){if(yF)return xt;yF=1,Object.defineProperty(xt,"__esModule",{value:!0}),xt.KeysStatistics=xt.KeysRdfJoin=xt.KeysMergeBindingsContext=xt.KeysRdfUpdateQuads=xt.KeysQuerySourceIdentify=xt.KeysRdfParseHtmlScript=xt.KeysRdfParseJsonLd=xt.KeysQueryOperation=xt.KeysExpressionEvaluator=xt.KeysInitQuery=xt.KeysHttpProxy=xt.KeysHttpMemento=xt.KeysHttpWayback=xt.KeysHttp=xt.KeysCore=void 0;const u=pe();return xt.KeysCore={log:u.CONTEXT_KEY_LOGGER},xt.KeysHttp={includeCredentials:new u.ActionContextKey("@comunica/bus-http:include-credentials"),auth:new u.ActionContextKey("@comunica/bus-http:auth"),fetch:new u.ActionContextKey("@comunica/bus-http:fetch"),httpTimeout:new u.ActionContextKey("@comunica/bus-http:http-timeout"),httpBodyTimeout:new u.ActionContextKey("@comunica/bus-http:http-body-timeout"),httpRetryCount:new u.ActionContextKey("@comunica/bus-http:http-retry-count"),httpRetryDelayFallback:new u.ActionContextKey("@comunica/bus-http:http-retry-delay-fallback"),httpRetryDelayLimit:new u.ActionContextKey("@comunica/bus-http:http-retry-delay-limit"),httpRetryStatusCodes:new u.ActionContextKey("@comunica/bus-http:http-retry-status-codes")},xt.KeysHttpWayback={recoverBrokenLinks:new u.ActionContextKey("@comunica/bus-http:recover-broken-links")},xt.KeysHttpMemento={datetime:new u.ActionContextKey("@comunica/actor-http-memento:datetime")},xt.KeysHttpProxy={httpProxyHandler:new u.ActionContextKey("@comunica/actor-http-proxy:httpProxyHandler")},xt.KeysInitQuery={querySourcesUnidentified:new u.ActionContextKey("@comunica/actor-init-query:querySourcesUnidentified"),initialBindings:new u.ActionContextKey("@comunica/actor-init-query:initialBindings"),queryFormat:new u.ActionContextKey("@comunica/actor-init-query:queryFormat"),graphqlSingularizeVariables:new u.ActionContextKey("@comunica/actor-init-query:singularizeVariables"),lenient:new u.ActionContextKey("@comunica/actor-init-query:lenient"),queryString:new u.ActionContextKey("@comunica/actor-init-query:queryString"),query:new u.ActionContextKey("@comunica/actor-init-query:query"),baseIRI:new u.ActionContextKey("@comunica/actor-init-query:baseIRI"),functionArgumentsCache:new u.ActionContextKey("@comunica/actor-init-query:functionArgumentsCache"),queryTimestamp:new u.ActionContextKey("@comunica/actor-init-query:queryTimestamp"),queryTimestampHighResolution:new u.ActionContextKey("@comunica/actor-init-query:queryTimestampHighResolution"),extensionFunctionCreator:new u.ActionContextKey("@comunica/actor-init-query:extensionFunctionCreator"),extensionFunctions:new u.ActionContextKey("@comunica/actor-init-query:extensionFunctions"),cliArgsHandlers:new u.ActionContextKey("@comunica/actor-init-query:cliArgsHandlers"),explain:new u.ActionContextKey("@comunica/actor-init-query:explain"),physicalQueryPlanLogger:new u.ActionContextKey("@comunica/actor-init-query:physicalQueryPlanLogger"),physicalQueryPlanNode:new u.ActionContextKey("@comunica/actor-init-query:physicalQueryPlanNode"),jsonLdContext:new u.ActionContextKey("@context"),invalidateCache:new u.ActionContextKey("@comunica/actor-init-query:invalidateCache"),dataFactory:new u.ActionContextKey("@comunica/actor-init-query:dataFactory"),distinctConstruct:new u.ActionContextKey("@comunica/actor-init-query:distinctConstruct")},xt.KeysExpressionEvaluator={extensionFunctionCreator:new u.ActionContextKey("@comunica/utils-expression-evaluator:extensionFunctionCreator"),superTypeProvider:new u.ActionContextKey("@comunica/utils-expression-evaluator:superTypeProvider"),defaultTimeZone:new u.ActionContextKey("@comunica/utils-expression-evaluator:defaultTimeZone"),actionContext:new u.ActionContextKey("@comunica/utils-expression-evaluator:actionContext")},xt.KeysQueryOperation={operation:new u.ActionContextKey("@comunica/bus-query-operation:operation"),joinLeftMetadata:new u.ActionContextKey("@comunica/bus-query-operation:joinLeftMetadata"),joinRightMetadatas:new u.ActionContextKey("@comunica/bus-query-operation:joinRightMetadatas"),joinBindings:new u.ActionContextKey("@comunica/bus-query-operation:joinBindings"),readOnly:new u.ActionContextKey("@comunica/bus-query-operation:readOnly"),isPathArbitraryLengthDistinctKey:new u.ActionContextKey("@comunica/bus-query-operation:isPathArbitraryLengthDistinct"),limitIndicator:new u.ActionContextKey("@comunica/bus-query-operation:limitIndicator"),unionDefaultGraph:new u.ActionContextKey("@comunica/bus-query-operation:unionDefaultGraph"),querySources:new u.ActionContextKey("@comunica/bus-query-operation:querySources")},xt.KeysRdfParseJsonLd={documentLoader:new u.ActionContextKey("@comunica/actor-rdf-parse-jsonld:documentLoader"),strictValues:new u.ActionContextKey("@comunica/actor-rdf-parse-jsonld:strictValues"),parserOptions:new u.ActionContextKey("@comunica/actor-rdf-parse-jsonld:parserOptions")},xt.KeysRdfParseHtmlScript={processingHtmlScript:new u.ActionContextKey("@comunica/actor-rdf-parse-html-script:processingHtmlScript"),extractAllScripts:new u.ActionContextKey("extractAllScripts")},xt.KeysQuerySourceIdentify={sourceIds:new u.ActionContextKey("@comunica/bus-query-source-identify:sourceIds"),hypermediaSourcesAggregatedStores:new u.ActionContextKey("@comunica/bus-query-source-identify:hypermediaSourcesAggregatedStores"),traverse:new u.ActionContextKey("@comunica/bus-query-source-identify:traverse")},xt.KeysRdfUpdateQuads={destination:new u.ActionContextKey("@comunica/bus-rdf-update-quads:destination")},xt.KeysMergeBindingsContext={sourcesBinding:new u.ActionContextKey("@comunica/bus-merge-bindings-context:sourcesBinding")},xt.KeysRdfJoin={lastPhysicalJoin:new u.ActionContextKey("@comunica/bus-rdf-join:lastPhysicalJoin")},xt.KeysStatistics={discoveredLinks:new u.ActionContextKey("@comunica/statistic:discoveredLinks"),dereferencedLinks:new u.ActionContextKey("@comunica/statistic:dereferencedLinks"),intermediateResults:new u.ActionContextKey("@comunica/statistic:intermediateResults")},xt}var _F;function qe(){return _F||(_F=1,(function(u){var n=ga&&ga.__createBinding||(Object.create?(function(i,t,e,r){r===void 0&&(r=e);var a=Object.getOwnPropertyDescriptor(t,e);(!a||("get"in a?!t.__esModule:a.writable||a.configurable))&&(a={enumerable:!0,get:function(){return t[e]}}),Object.defineProperty(i,r,a)}):(function(i,t,e,r){r===void 0&&(r=e),i[r]=t[e]})),o=ga&&ga.__exportStar||function(i,t){for(var e in i)e!=="default"&&!Object.prototype.hasOwnProperty.call(t,e)&&n(t,i,e)};Object.defineProperty(u,"__esModule",{value:!0}),o(bF(),u)})(ga)),ga}var gF;function vK(){if(gF)return xh;gF=1,Object.defineProperty(xh,"__esModule",{value:!0}),xh.QueryEngineBase=void 0;const u=qe(),n=pe();let o=class vx{constructor(t){this.actorInitQuery=t}async queryBindings(t,e){return this.queryOfType(t,e,"bindings")}async queryQuads(t,e){return this.queryOfType(t,e,"quads")}async queryBoolean(t,e){return this.queryOfType(t,e,"boolean")}async queryVoid(t,e){return this.queryOfType(t,e,"void")}async queryOfType(t,e,r){const a=await this.query(t,e);if(a.resultType===r)return await a.execute();throw new Error(`Query result type '${r}' was expected, while '${a.resultType}' was found.`)}async query(t,e){const r=await this.queryOrExplain(t,e);if("explain"in r)throw new Error("Tried to explain a query when in query-only mode");return r}async explain(t,e,r){return e.explain=r,await this.queryOrExplain(t,e)}async queryOrExplain(t,e){const r=n.ActionContext.ensureActionContext(e);r.get(u.KeysInitQuery.invalidateCache)&&await this.invalidateHttpCache();const{result:a}=await this.actorInitQuery.mediatorQueryProcess.mediate({query:t,context:r});return"explain"in a?a:vx.internalToFinalResult(a)}async getResultMediaTypes(t){return t=n.ActionContext.ensureActionContext(t),(await this.actorInitQuery.mediatorQueryResultSerializeMediaTypeCombiner.mediate({context:t,mediaTypes:!0})).mediaTypes}async getResultMediaTypeFormats(t){return t=n.ActionContext.ensureActionContext(t),(await this.actorInitQuery.mediatorQueryResultSerializeMediaTypeFormatCombiner.mediate({context:t,mediaTypeFormats:!0})).mediaTypeFormats}async resultToString(t,e,r){if(r=n.ActionContext.ensureActionContext(r),!e)switch(t.resultType){case"bindings":e="application/json";break;case"quads":e="application/trig";break;default:e="simple";break}const a={...await vx.finalToInternalResult(t),context:r};return(await this.actorInitQuery.mediatorQueryResultSerialize.mediate({context:r,handle:a,handleMediaType:e})).handle}invalidateHttpCache(t,e){return e=n.ActionContext.ensureActionContext(e),this.actorInitQuery.mediatorHttpInvalidate.mediate({url:t,context:e})}static internalToFinalResult(t){switch(t.type){case"bindings":return{resultType:"bindings",execute:async()=>t.bindingsStream,metadata:async()=>{const e=await t.metadata();return e.variables=e.variables.map(r=>r.variable),e},context:t.context};case"quads":return{resultType:"quads",execute:async()=>t.quadStream,metadata:async()=>await t.metadata(),context:t.context};case"boolean":return{resultType:"boolean",execute:async()=>t.execute(),context:t.context};case"void":return{resultType:"void",execute:async()=>t.execute(),context:t.context}}}static async finalToInternalResult(t){switch(t.resultType){case"bindings":return{type:"bindings",bindingsStream:await t.execute(),metadata:async()=>{const e=await t.metadata();return e.variables=e.variables.map(r=>({variable:r,canBeUndef:!1})),e}};case"quads":return{type:"quads",quadStream:await t.execute(),metadata:async()=>await t.metadata()};case"boolean":return{type:"boolean",execute:()=>t.execute()};case"void":return{type:"void",execute:()=>t.execute()}}}};return xh.QueryEngineBase=o,xh}var mF;function vF(){return mF||(mF=1,(function(u){var n=ui&&ui.__createBinding||(Object.create?(function(t,e,r,a){a===void 0&&(a=r);var c=Object.getOwnPropertyDescriptor(e,r);(!c||("get"in c?!e.__esModule:c.writable||c.configurable))&&(c={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,a,c)}):(function(t,e,r,a){a===void 0&&(a=r),t[a]=e[r]})),o=ui&&ui.__exportStar||function(t,e){for(var r in t)r!=="default"&&!Object.prototype.hasOwnProperty.call(e,r)&&n(e,t,r)};Object.defineProperty(u,"__esModule",{value:!0}),u.QueryEngineBase=void 0,o(fF(),u),o(mK(),u);var i=vK();Object.defineProperty(u,"QueryEngineBase",{enumerable:!0,get:function(){return i.QueryEngineBase}})})(ui)),ui}var ma={},Rh={},va={},qS={},TF;function TK(){return TF||(TF=1,Object.defineProperty(qS,"__esModule",{value:!0})),qS}var CS={},wF;function wK(){return wF||(wF=1,Object.defineProperty(CS,"__esModule",{value:!0})),CS}var BS={},SF;function SK(){return SF||(SF=1,Object.defineProperty(BS,"__esModule",{value:!0})),BS}var $S={},OF;function OK(){return OF||(OF=1,Object.defineProperty($S,"__esModule",{value:!0})),$S}var US={},AF;function AK(){return AF||(AF=1,Object.defineProperty(US,"__esModule",{value:!0})),US}var VS={},EF;function EK(){return EF||(EF=1,Object.defineProperty(VS,"__esModule",{value:!0})),VS}var QS={},xF;function xK(){return xF||(xF=1,Object.defineProperty(QS,"__esModule",{value:!0})),QS}var HS={},RF;function RK(){return RF||(RF=1,Object.defineProperty(HS,"__esModule",{value:!0})),HS}var GS={},FF;function FK(){return FF||(FF=1,Object.defineProperty(GS,"__esModule",{value:!0})),GS}var zS={},IF;function IK(){return IF||(IF=1,Object.defineProperty(zS,"__esModule",{value:!0})),zS}var XS={},PF;function PK(){return PF||(PF=1,Object.defineProperty(XS,"__esModule",{value:!0})),XS}var JS={},DF;function DK(){return DF||(DF=1,Object.defineProperty(JS,"__esModule",{value:!0})),JS}var KS={},NF;function NK(){return NF||(NF=1,Object.defineProperty(KS,"__esModule",{value:!0})),KS}var kS={},jF;function jK(){return jF||(jF=1,Object.defineProperty(kS,"__esModule",{value:!0})),kS}var WS={},LF;function LK(){return LF||(LF=1,Object.defineProperty(WS,"__esModule",{value:!0})),WS}var YS={},MF;function MK(){return MF||(MF=1,Object.defineProperty(YS,"__esModule",{value:!0})),YS}var ZS={},qF;function qK(){return qF||(qF=1,Object.defineProperty(ZS,"__esModule",{value:!0})),ZS}var eO={},CF;function CK(){return CF||(CF=1,Object.defineProperty(eO,"__esModule",{value:!0})),eO}var tO={},BF;function BK(){return BF||(BF=1,Object.defineProperty(tO,"__esModule",{value:!0})),tO}var Fh={},$F;function $K(){if($F)return Fh;$F=1,Object.defineProperty(Fh,"__esModule",{value:!0}),Fh.Logger=void 0;let u=class YX{static getLevelOrdinal(o){return YX.LEVELS[o]}};return Fh.Logger=u,u.LEVELS={trace:0,debug:1,info:2,warn:3,error:4,fatal:5},Fh}var Ih={},UF;function UK(){if(UF)return Ih;UF=1,Object.defineProperty(Ih,"__esModule",{value:!0}),Ih.ExpressionType=void 0;var u;return(function(n){n.Aggregate="aggregate",n.Existence="existence",n.Operator="operator",n.Term="term",n.Variable="variable"})(u||(Ih.ExpressionType=u={})),Ih}var VF;function Vi(){return VF||(VF=1,(function(u){var n=va&&va.__createBinding||(Object.create?(function(i,t,e,r){r===void 0&&(r=e);var a=Object.getOwnPropertyDescriptor(t,e);(!a||("get"in a?!t.__esModule:a.writable||a.configurable))&&(a={enumerable:!0,get:function(){return t[e]}}),Object.defineProperty(i,r,a)}):(function(i,t,e,r){r===void 0&&(r=e),i[r]=t[e]})),o=va&&va.__exportStar||function(i,t){for(var e in i)e!=="default"&&!Object.prototype.hasOwnProperty.call(t,e)&&n(t,i,e)};Object.defineProperty(u,"__esModule",{value:!0}),o(TK(),u),o(wK(),u),o(SK(),u),o(OK(),u),o(AK(),u),o(EK(),u),o(xK(),u),o(RK(),u),o(FK(),u),o(IK(),u),o(PK(),u),o(DK(),u),o(NK(),u),o(jK(),u),o(LK(),u),o(MK(),u),o(qK(),u),o(CK(),u),o(BK(),u),o($K(),u),o(UK(),u)})(va)),va}var QF;function VK(){if(QF)return Rh;QF=1,Object.defineProperty(Rh,"__esModule",{value:!0}),Rh.LoggerVoid=void 0;const u=Vi();let n=class extends u.Logger{debug(){}error(){}fatal(){}info(){}trace(){}warn(){}};return Rh.LoggerVoid=n,Rh}var HF;function QK(){return HF||(HF=1,(function(u){var n=ma&&ma.__createBinding||(Object.create?(function(i,t,e,r){r===void 0&&(r=e);var a=Object.getOwnPropertyDescriptor(t,e);(!a||("get"in a?!t.__esModule:a.writable||a.configurable))&&(a={enumerable:!0,get:function(){return t[e]}}),Object.defineProperty(i,r,a)}):(function(i,t,e,r){r===void 0&&(r=e),i[r]=t[e]})),o=ma&&ma.__exportStar||function(i,t){for(var e in i)e!=="default"&&!Object.prototype.hasOwnProperty.call(t,e)&&n(t,i,e)};Object.defineProperty(u,"__esModule",{value:!0}),o(VK(),u)})(ma)),ma}var Ta={},wa={},GF;function zF(){if(GF)return wa;GF=1,Object.defineProperty(wa,"__esModule",{value:!0}),wa.MediatorFunctionFactory=wa.ActorFunctionFactory=void 0;const u=pe();let n=class extends u.Actor{constructor(t){super(t)}};wa.ActorFunctionFactory=n;class o extends u.Mediator{}return wa.MediatorFunctionFactory=o,wa}var Ph={},XF;function HK(){if(XF)return Ph;XF=1,Object.defineProperty(Ph,"__esModule",{value:!0}),Ph.ActorFunctionFactoryDedicated=void 0;const u=pe(),n=zF();let o=class extends n.ActorFunctionFactory{constructor(t){super(t)}async test(t){return this.functionNames.includes(t.functionName)&&(this.termFunction||!t.requireTermExpression)?(0,u.passTestVoid)():(0,u.failTest)(`Actor ${this.name} can not provide implementation for "${t.functionName}", only for ${this.termFunction?"":"non-termExpression "}${this.functionNames.join(" and ")}.`)}};return Ph.ActorFunctionFactoryDedicated=o,Ph}var Dh={},JF;function GK(){if(JF)return Dh;JF=1,Object.defineProperty(Dh,"__esModule",{value:!0}),Dh.BusFunctionFactory=void 0;const u=pe();let n=class extends u.BusIndexed{constructor(i){super({...i,actorIdentifierFields:["functionNames"],actionIdentifierFields:["functionName"]})}};return Dh.BusFunctionFactory=n,Dh}var Sa={},rO={},Nh={},nO={},Tr={},Oa={},jh={},KF;function kF(){if(KF)return jh;KF=1,Object.defineProperty(jh,"__esModule",{value:!0}),jh.BlankNode=void 0;class u{constructor(o){this.termType="BlankNode",this.value=o}equals(o){return!!o&&o.termType==="BlankNode"&&o.value===this.value}}return jh.BlankNode=u,jh}var Lh={},Mh={},WF;function YF(){if(WF)return Mh;WF=1,Object.defineProperty(Mh,"__esModule",{value:!0}),Mh.DefaultGraph=void 0;class u{constructor(){this.termType="DefaultGraph",this.value=""}equals(o){return!!o&&o.termType==="DefaultGraph"}}return Mh.DefaultGraph=u,u.INSTANCE=new u,Mh}var qh={},Ch={},ZF;function iO(){if(ZF)return Ch;ZF=1,Object.defineProperty(Ch,"__esModule",{value:!0}),Ch.NamedNode=void 0;class u{constructor(o){this.termType="NamedNode",this.value=o}equals(o){return!!o&&o.termType==="NamedNode"&&o.value===this.value}}return Ch.NamedNode=u,Ch}var e6;function t6(){if(e6)return qh;e6=1,Object.defineProperty(qh,"__esModule",{value:!0}),qh.Literal=void 0;const u=iO();class n{constructor(i,t){this.termType="Literal",this.value=i,typeof t=="string"?(this.language=t,this.datatype=n.RDF_LANGUAGE_STRING):t?(this.language="",this.datatype=t):(this.language="",this.datatype=n.XSD_STRING)}equals(i){return!!i&&i.termType==="Literal"&&i.value===this.value&&i.language===this.language&&this.datatype.equals(i.datatype)}}return qh.Literal=n,n.RDF_LANGUAGE_STRING=new u.NamedNode("http://www.w3.org/1999/02/22-rdf-syntax-ns#langString"),n.XSD_STRING=new u.NamedNode("http://www.w3.org/2001/XMLSchema#string"),qh}var Bh={},r6;function n6(){if(r6)return Bh;r6=1,Object.defineProperty(Bh,"__esModule",{value:!0}),Bh.Quad=void 0;class u{constructor(o,i,t,e){this.termType="Quad",this.value="",this.subject=o,this.predicate=i,this.object=t,this.graph=e}equals(o){return!!o&&(o.termType==="Quad"||!o.termType)&&this.subject.equals(o.subject)&&this.predicate.equals(o.predicate)&&this.object.equals(o.object)&&this.graph.equals(o.graph)}}return Bh.Quad=u,Bh}var $h={},i6;function a6(){if(i6)return $h;i6=1,Object.defineProperty($h,"__esModule",{value:!0}),$h.Variable=void 0;class u{constructor(o){this.termType="Variable",this.value=o}equals(o){return!!o&&o.termType==="Variable"&&o.value===this.value}}return $h.Variable=u,$h}var u6;function zK(){if(u6)return Lh;u6=1,Object.defineProperty(Lh,"__esModule",{value:!0}),Lh.DataFactory=void 0;const u=kF(),n=YF(),o=t6(),i=iO(),t=n6(),e=a6();let r=0;class a{constructor(s){this.blankNodeCounter=0,s=s||{},this.blankNodePrefix=s.blankNodePrefix||`df_${r++}_`}namedNode(s){return new i.NamedNode(s)}blankNode(s){return new u.BlankNode(s||`${this.blankNodePrefix}${this.blankNodeCounter++}`)}literal(s,d){return new o.Literal(s,d)}variable(s){return new e.Variable(s)}defaultGraph(){return n.DefaultGraph.INSTANCE}quad(s,d,l,f){return new t.Quad(s,d,l,f||this.defaultGraph())}fromTerm(s){switch(s.termType){case"NamedNode":return this.namedNode(s.value);case"BlankNode":return this.blankNode(s.value);case"Literal":return s.language?this.literal(s.value,s.language):s.datatype.equals(o.Literal.XSD_STRING)?this.literal(s.value):this.literal(s.value,this.fromTerm(s.datatype));case"Variable":return this.variable(s.value);case"DefaultGraph":return this.defaultGraph();case"Quad":return this.quad(this.fromTerm(s.subject),this.fromTerm(s.predicate),this.fromTerm(s.object),this.fromTerm(s.graph))}}fromQuad(s){return this.fromTerm(s)}resetBlankNodeCounter(){this.blankNodeCounter=0}}return Lh.DataFactory=a,Lh}var o6;function hr(){return o6||(o6=1,(function(u){var n=Oa&&Oa.__createBinding||(Object.create?(function(i,t,e,r){r===void 0&&(r=e);var a=Object.getOwnPropertyDescriptor(t,e);(!a||("get"in a?!t.__esModule:a.writable||a.configurable))&&(a={enumerable:!0,get:function(){return t[e]}}),Object.defineProperty(i,r,a)}):(function(i,t,e,r){r===void 0&&(r=e),i[r]=t[e]})),o=Oa&&Oa.__exportStar||function(i,t){for(var e in i)e!=="default"&&!Object.prototype.hasOwnProperty.call(t,e)&&n(t,i,e)};Object.defineProperty(u,"__esModule",{value:!0}),o(kF(),u),o(zK(),u),o(YF(),u),o(t6(),u),o(iO(),u),o(n6(),u),o(a6(),u)})(Oa)),Oa}var s6;function XK(){if(s6)return Tr;s6=1,Object.defineProperty(Tr,"__esModule",{value:!0}),Tr.stringQuadToQuad=Tr.quadToStringQuad=Tr.stringToTerm=Tr.getLiteralLanguage=Tr.getLiteralType=Tr.getLiteralValue=Tr.termToString=void 0;const u=hr(),n=new u.DataFactory;function o(s){if(s)switch(s.termType){case"NamedNode":return s.value;case"BlankNode":return"_:"+s.value;case"Literal":const d=s;return'"'+d.value+'"'+(d.datatype&&d.datatype.value!=="http://www.w3.org/2001/XMLSchema#string"&&d.datatype.value!=="http://www.w3.org/1999/02/22-rdf-syntax-ns#langString"?"^^"+d.datatype.value:"")+(d.language?"@"+d.language:"");case"Quad":return`<<${o(s.subject)} ${o(s.predicate)} ${o(s.object)}${s.graph.termType==="DefaultGraph"?"":" "+o(s.graph)}>>`;case"Variable":return"?"+s.value;case"DefaultGraph":return s.value}}Tr.termToString=o;function i(s){const d=/^"([^]*)"/.exec(s);if(!d)throw new Error(s+" is not a literal");return d[1]}Tr.getLiteralValue=i;function t(s){const d=/^"[^]*"(?:\^\^([^"]+)|(@)[^@"]+)?$/.exec(s);if(!d)throw new Error(s+" is not a literal");return d[1]||(d[2]?"http://www.w3.org/1999/02/22-rdf-syntax-ns#langString":"http://www.w3.org/2001/XMLSchema#string")}Tr.getLiteralType=t;function e(s){const d=/^"[^]*"(?:@([^@"]+)|\^\^[^"]+)?$/.exec(s);if(!d)throw new Error(s+" is not a literal");return d[1]?d[1].toLowerCase():""}Tr.getLiteralLanguage=e;function r(s,d){if(d=d||n,!s||!s.length)return d.defaultGraph();switch(s[0]){case"_":return d.blankNode(s.substr(2));case"?":if(!d.variable)throw new Error("Missing 'variable()' method on the given DataFactory");return d.variable(s.substr(1));case'"':const l=e(s),f=d.namedNode(t(s));return d.literal(i(s),l||f);case"<":default:if(s[0]==="<"&&s.length>4&&s[1]==="<"&&s[s.length-1]===">"&&s[s.length-2]===">"){const h=s.slice(2,-2).trim();let p=[],y=0,_=0,b=!1;for(let m=0;m<h.length;m++){const g=h[m];if(g==="<"&&y++,g===">"){if(y===0)throw new Error("Found closing tag without opening tag in "+s);y--}if(g==='"'){let T=!1,v=m;for(;v-- >0&&h[v]==="\\";)T=!T;T||(b=!b)}if(g===" "&&!b&&y===0){for(p.push(h.slice(_,m));h[m+1]===" ";)m+=1;_=m+1}}if(y!==0)throw new Error("Found opening tag without closing tag in "+s);if(p.push(h.slice(_,h.length)),p.length!==3&&p.length!==4)throw new Error("Nested quad syntax error "+s);return p=p.map(m=>m.startsWith("<")&&!m.includes(" ")?m.slice(1,-1):m),d.quad(r(p[0]),r(p[1]),r(p[2]),p[3]?r(p[3]):void 0)}return d.namedNode(s)}}Tr.stringToTerm=r;function a(s){return{subject:o(s.subject),predicate:o(s.predicate),object:o(s.object),graph:o(s.graph)}}Tr.quadToStringQuad=a;function c(s,d){return d=d||n,d.quad(r(s.subject,d),r(s.predicate,d),r(s.object,d),r(s.graph,d))}return Tr.stringQuadToQuad=c,Tr}var c6;function Yt(){return c6||(c6=1,(function(u){Object.defineProperty(u,"__esModule",{value:!0}),u.termToString=u.stringToTerm=u.stringQuadToQuad=u.quadToStringQuad=u.getLiteralValue=u.getLiteralType=u.getLiteralLanguage=void 0;const n=XK();Object.defineProperty(u,"getLiteralLanguage",{enumerable:!0,get:function(){return n.getLiteralLanguage}}),Object.defineProperty(u,"getLiteralType",{enumerable:!0,get:function(){return n.getLiteralType}}),Object.defineProperty(u,"getLiteralValue",{enumerable:!0,get:function(){return n.getLiteralValue}}),Object.defineProperty(u,"quadToStringQuad",{enumerable:!0,get:function(){return n.quadToStringQuad}}),Object.defineProperty(u,"stringQuadToQuad",{enumerable:!0,get:function(){return n.stringQuadToQuad}}),Object.defineProperty(u,"stringToTerm",{enumerable:!0,get:function(){return n.stringToTerm}}),Object.defineProperty(u,"termToString",{enumerable:!0,get:function(){return n.termToString}})})(nO)),nO}var An={},bn={},aO,d6;function JK(){return d6||(d6=1,aO=function u(n,o){if(n===o)return!0;if(n&&o&&typeof n=="object"&&typeof o=="object"){if(n.constructor!==o.constructor)return!1;var i,t,e;if(Array.isArray(n)){if(i=n.length,i!=o.length)return!1;for(t=i;t--!==0;)if(!u(n[t],o[t]))return!1;return!0}if(n instanceof Map&&o instanceof Map){if(n.size!==o.size)return!1;for(t of n.entries())if(!o.has(t[0]))return!1;for(t of n.entries())if(!u(t[1],o.get(t[0])))return!1;return!0}if(n instanceof Set&&o instanceof Set){if(n.size!==o.size)return!1;for(t of n.entries())if(!o.has(t[0]))return!1;return!0}if(ArrayBuffer.isView(n)&&ArrayBuffer.isView(o)){if(i=n.length,i!=o.length)return!1;for(t=i;t--!==0;)if(n[t]!==o[t])return!1;return!0}if(n.constructor===RegExp)return n.source===o.source&&n.flags===o.flags;if(n.valueOf!==Object.prototype.valueOf)return n.valueOf()===o.valueOf();if(n.toString!==Object.prototype.toString)return n.toString()===o.toString();if(e=Object.keys(n),i=e.length,i!==Object.keys(o).length)return!1;for(t=i;t--!==0;)if(!Object.prototype.hasOwnProperty.call(o,e[t]))return!1;for(t=i;t--!==0;){var r=e[t];if(!u(n[r],o[r]))return!1}return!0}return n!==n&&o!==o}),aO}var uO={},l6;function Uh(){return l6||(l6=1,(function(u){Object.defineProperty(u,"__esModule",{value:!0}),u.expressionTypes=u.types=void 0,(function(n){n.ALT="alt",n.ASK="ask",n.BGP="bgp",n.CONSTRUCT="construct",n.DESCRIBE="describe",n.DISTINCT="distinct",n.EXPRESSION="expression",n.EXTEND="extend",n.FILTER="filter",n.FROM="from",n.GRAPH="graph",n.GROUP="group",n.INV="inv",n.JOIN="join",n.LEFT_JOIN="leftjoin",n.LINK="link",n.MINUS="minus",n.NOP="nop",n.NPS="nps",n.ONE_OR_MORE_PATH="OneOrMorePath",n.ORDER_BY="orderby",n.PATH="path",n.PATTERN="pattern",n.PROJECT="project",n.REDUCED="reduced",n.SEQ="seq",n.SERVICE="service",n.SLICE="slice",n.UNION="union",n.VALUES="values",n.ZERO_OR_MORE_PATH="ZeroOrMorePath",n.ZERO_OR_ONE_PATH="ZeroOrOnePath",n.COMPOSITE_UPDATE="compositeupdate",n.DELETE_INSERT="deleteinsert",n.LOAD="load",n.CLEAR="clear",n.CREATE="create",n.DROP="drop",n.ADD="add",n.MOVE="move",n.COPY="copy"})(u.types||(u.types={})),(function(n){n.AGGREGATE="aggregate",n.EXISTENCE="existence",n.NAMED="named",n.OPERATOR="operator",n.TERM="term",n.WILDCARD="wildcard"})(u.expressionTypes||(u.expressionTypes={}))})(uO)),uO}var Gn={},oO={},f6;function h6(){if(f6)return oO;f6=1;let u=class{constructor(){return n||this}equals(i){return i&&this.termType===i.termType}};Object.defineProperty(u.prototype,"value",{enumerable:!0,value:"*"}),Object.defineProperty(u.prototype,"termType",{enumerable:!0,value:"Wildcard"});var n=new u;return oO.Wildcard=u,oO}var sO,p6;function KK(){if(p6)return sO;p6=1;var u=(function(){var n=function(Fe,Ae,Le,ze){for(Le=Le||{},ze=Fe.length;ze--;Le[Fe[ze]]=Ae);return Le},o=[6,12,13,15,16,24,32,36,41,45,100,110,113,115,116,123,126,131,197,224,229,308,329,330,331,332,333],i=[2,247],t=[100,110,113,115,116,123,126,131,329,330,331,332,333],e=[2,409],r=[1,18],a=[1,27],c=[13,16,45,197,224,229,308],s=[28,29,53],d=[28,53],l=[1,42],f=[1,45],h=[1,41],p=[1,44],y=[123,126],_=[1,67],b=[39,45,87],m=[13,16,45,197,224,308],g=[1,87],T=[2,281],v=[1,86],S=[13,16,45,82,87,89,231,294,295,296,297,298,299,300,301,302,303,304,305,306,308,309,310,312],F=[6,28,29,53,63,70,73,81,83,85],M=[6,13,16,28,29,53,63,70,73,81,83,85,87,308],O=[6,13,16,28,29,45,53,63,70,73,81,82,83,85,87,89,197,231,294,295,296,297,298,299,300,301,302,303,304,305,306,308,309,310,312,314],w=[6,13,16,28,29,31,39,45,47,48,53,63,70,73,81,82,83,85,87,89,109,112,121,123,126,128,159,160,161,163,164,174,193,197,224,229,231,232,242,246,250,263,265,272,290,294,295,296,297,298,299,300,301,302,303,304,305,306,308,309,310,312,314,317,318,335,337,338,340,341,342,343,344,345,346],E=[13,16,308],R=[112,132,327,334],D=[13,16,112,132,308],B=[1,111],C=[1,117],$=[112,132,327,328,334],Z=[13,16,112,132,308,328],ee=[28,29,45,53,87],ce=[1,138],G=[1,151],fe=[1,128],me=[1,127],ye=[1,129],re=[1,140],xe=[1,141],Re=[1,142],Ie=[1,143],he=[1,144],be=[1,145],V=[1,147],P=[1,148],N=[2,457],A=[1,158],I=[1,159],q=[1,160],H=[1,152],U=[1,153],X=[1,156],Q=[1,171],k=[1,172],oe=[1,173],se=[1,174],Se=[1,175],Me=[1,176],Oe=[1,167],ue=[1,168],L=[1,169],x=[1,170],j=[1,157],z=[1,166],W=[1,161],le=[1,162],ae=[1,163],De=[1,164],Ve=[1,165],Be=[6,13,16,29,31,45,82,85,87,89,112,159,160,161,163,164,231,294,295,296,297,298,299,300,301,302,303,304,305,306,308,309,310,312,335],Ze=[1,195],J=[6,31,73,81,83,85],we=[2,285],Ee=[1,199],$e=[1,201],Pe=[6,31,70,73,81,83,85],et=[2,283],rt=[1,207],ke=[1,218],ft=[1,223],te=[1,219],ne=[1,225],Ne=[1,226],Ce=[1,224],Qe=[6,63,70,73,81,83,85],Tt=[1,236],Ue=[2,334],ht=[1,243],He=[1,241],Je=[6,193],tt=[2,349],wt=[2,339],at=[28,128],Xe=[47,48,193,272],Lr=[47,48,193,242,272],Ge=[47,48,193,242,246,272],ie=[47,48,193,242,246,250,263,265,272,290,297,298,299,300,301,302,341,342,343,344,345,346],_e=[39,47,48,193,242,246,250,263,265,272,290,297,298,299,300,301,302,338,341,342,343,344,345,346],ve=[1,271],We=[1,270],Ye=[6,13,16,29,31,39,45,47,48,70,73,76,78,81,82,83,85,87,89,112,159,160,161,163,164,193,231,242,246,250,263,265,268,269,270,271,272,273,274,276,277,279,280,283,285,290,294,295,296,297,298,299,300,301,302,303,304,305,306,308,309,310,312,335,338,341,342,343,344,345,346,347,348,349,350,351],mt=[1,281],nr=[1,280],Qt=[13,16,29,31,39,45,47,48,82,85,87,89,112,159,160,161,163,164,174,193,197,224,229,231,232,242,246,250,263,265,272,290,294,295,296,297,298,299,300,301,302,303,304,305,306,308,309,310,312,314,317,318,335,338,341,342,343,344,345,346],wi=[45,89],sn=[13,16,29,31,39,45,47,48,82,85,87,89,112,159,160,161,163,164,174,193,197,224,229,231,232,242,246,250,263,265,272,290,292,293,294,295,296,297,298,299,300,301,302,303,304,305,306,308,309,310,312,314,317,318,335,338,341,342,343,344,345,346],Kt=[13,16,31,82,174,294,295,296,297,298,299,300,301,302,303,304,305,306,308,312],mn=[31,89],Ar=[48,87],Un=[6,13,16,45,48,82,87,89,231,294,295,296,297,298,299,300,301,302,303,304,305,306,308,309,310,312,337,338],Er=[6,13,16,39,45,48,82,87,89,231,263,294,295,296,297,298,299,300,301,302,303,304,305,306,308,309,310,312,337,338,340],Il=[1,313],Mr=[6,85],Nf=[6,31,81,83,85],Pl=[2,361],cn=[2,353],Wr=[1,343],_T=[31,112,335],Si=[13,16,29,31,45,48,82,85,87,89,112,159,160,161,163,164,193,197,224,229,231,232,272,294,295,296,297,298,299,300,301,302,303,304,305,306,308,309,310,312,317,318,335],YE=[13,16,29,31,45,48,82,85,87,89,112,159,160,161,163,164,193,197,224,229,231,232,272,294,295,296,297,298,299,300,301,302,303,304,305,306,308,309,310,312,314,317,318,335],wX=[6,109,193],Dl=[31,112],lr=[13,16,45,82,87,224,263,265,268,269,270,271,273,274,276,277,279,280,283,285,294,295,296,297,298,299,300,301,302,303,304,305,306,308,312,346,347,348,349,350,351],ZE=[1,390],ex=[1,391],ea=[13,16,87,197,308,314],SX=[13,16,39,45,82,87,224,263,265,268,269,270,271,273,274,276,277,279,280,283,285,294,295,296,297,298,299,300,301,302,303,304,305,306,308,312,346,347,348,349,350,351],_w=[1,417],gw=[1,418],OX=[13,16,48,197,229,308],ta=[6,31,85],AX=[6,13,16,31,45,73,81,83,85,268,269,270,271,273,274,276,277,279,280,283,285,308,346,347,348,349,350,351],tx=[6,13,16,29,31,45,73,76,78,81,82,83,85,87,89,112,159,160,161,163,164,231,268,269,270,271,273,274,276,277,279,280,283,285,294,295,296,297,298,299,300,301,302,303,304,305,306,308,309,310,312,335,346,347,348,349,350,351],Nl=[29,31,85,112,159,160,161,163,164],mw=[1,443],vw=[1,444],EX=[1,449],jl=[31,112,193,232,318,335],Tw=[13,16,45,48,82,87,89,231,294,295,296,297,298,299,300,301,302,303,304,305,306,308,309,310,312],xX=[13,16,31,45,48,82,87,89,112,193,231,232,272,294,295,296,297,298,299,300,301,302,303,304,305,306,308,309,310,312,317,318,335],rx=[13,16,29,31,45,48,82,85,87,89,112,159,160,161,163,164,193,231,232,272,294,295,296,297,298,299,300,301,302,303,304,305,306,308,309,310,312,317,318,335],gT=[13,16,31,48,82,174,294,295,296,297,298,299,300,301,302,303,304,305,306,308,312],mT=[31,45],RX=[1,507],FX=[1,508],IX=[6,13,16,29,31,39,45,47,48,63,70,73,76,78,81,82,83,85,87,89,112,159,160,161,163,164,193,231,242,246,250,263,265,268,269,270,271,272,273,274,276,277,279,280,283,285,290,294,295,296,297,298,299,300,301,302,303,304,305,306,308,309,310,312,335,336,338,341,342,343,344,345,346,347,348,349,350,351],ww=[29,31,85,112,159,160,161,163,164,335],Ll=[6,13,16,31,45,70,73,81,83,85,87,268,269,270,271,273,274,276,277,279,280,283,285,308,346,347,348,349,350,351],PX=[13,16,31,45,48,82,87,89,112,193,197,231,232,272,294,295,296,297,298,299,300,301,302,303,304,305,306,308,309,310,312,317,318,335],DX=[2,352],nx=[13,16,197,308,314],NX=[1,565],jf=[6,13,16,31,45,76,78,81,83,85,87,268,269,270,271,273,274,276,277,279,280,283,285,308,346,347,348,349,350,351],jX=[13,16,29,31,45,82,85,87,89,112,159,160,161,163,164,231,294,295,296,297,298,299,300,301,302,303,304,305,306,308,309,310,312],Oi=[13,16,29,31,45,82,85,87,89,112,159,160,161,163,164,231,294,295,296,297,298,299,300,301,302,303,304,305,306,308,309,310,312,335],LX=[13,16,87,308],Ai=[2,364],Lf=[29,31,85,112,159,160,161,163,164,193,232,318,335],Sw=[31,112,193,232,272,318,335],Ei=[2,359],MX=[13,16,48,82,174,294,295,296,297,298,299,300,301,302,303,304,305,306,308,312],Ow=[29,31,85,112,159,160,161,163,164,193,232,272,318,335],qX=[13,16,31,45,82,87,89,112,231,294,295,296,297,298,299,300,301,302,303,304,305,306,308,309,310,312],CX=[2,347],ix={trace:function(){},yy:{},symbols_:{error:2,QueryOrUpdate:3,Prologue:4,QueryOrUpdate_group0:5,EOF:6,Query:7,Qry:8,Query_option0:9,Prologue_repetition0:10,BaseDecl:11,BASE:12,IRIREF:13,PrefixDecl:14,PREFIX:15,PNAME_NS:16,SelectClauseWildcard:17,Qry_repetition0:18,WhereClause:19,SolutionModifierNoGroup:20,SelectClauseVars:21,Qry_repetition1:22,SolutionModifier:23,CONSTRUCT:24,ConstructTemplate:25,Qry_repetition2:26,Qry_repetition3:27,WHERE:28,"{":29,Qry_option0:30,"}":31,DESCRIBE:32,Qry_group0:33,Qry_repetition4:34,Qry_option1:35,ASK:36,Qry_repetition5:37,SelectClauseBase:38,"*":39,SelectClauseVars_repetition_plus0:40,SELECT:41,SelectClauseBase_option0:42,SelectClauseItem:43,Var:44,"(":45,Expression:46,AS:47,")":48,SubSelect:49,SubSelect_option0:50,SubSelect_option1:51,DatasetClause:52,FROM:53,DatasetClause_option0:54,iri:55,WhereClause_option0:56,GroupGraphPattern:57,SolutionModifier_option0:58,SolutionModifierNoGroup_option0:59,SolutionModifierNoGroup_option1:60,SolutionModifierNoGroup_option2:61,GroupClause:62,GROUP:63,BY:64,GroupClause_repetition_plus0:65,GroupCondition:66,BuiltInCall:67,FunctionCall:68,HavingClause:69,HAVING:70,HavingClause_repetition_plus0:71,OrderClause:72,ORDER:73,OrderClause_repetition_plus0:74,OrderCondition:75,ASC:76,BrackettedExpression:77,DESC:78,Constraint:79,LimitOffsetClauses:80,LIMIT:81,INTEGER:82,OFFSET:83,ValuesClause:84,VALUES:85,InlineData:86,VAR:87,InlineData_repetition0:88,NIL:89,InlineData_repetition1:90,InlineData_repetition_plus2:91,InlineData_repetition3:92,DataBlock:93,DataBlockValueList:94,DataBlockValueList_repetition_plus0:95,Update:96,Update_repetition0:97,Update1:98,Update_option0:99,LOAD:100,Update1_option0:101,Update1_option1:102,Update1_group0:103,Update1_option2:104,GraphRefAll:105,Update1_group1:106,Update1_option3:107,GraphOrDefault:108,TO:109,CREATE:110,Update1_option4:111,GRAPH:112,INSERTDATA:113,QuadPattern:114,DELETEDATA:115,DELETEWHERE:116,Update1_option5:117,InsertDeleteClause:118,Update1_repetition0:119,IntoGraphClause:120,INTO:121,GraphRef:122,DELETE:123,InsertDeleteClause_option0:124,InsertClause:125,INSERT:126,UsingClause:127,USING:128,UsingClause_option0:129,WithClause:130,WITH:131,DEFAULT:132,GraphOrDefault_option0:133,GraphRefAll_group0:134,Quads:135,Quads_option0:136,Quads_repetition0:137,QuadsNotTriples:138,VarOrIri:139,QuadsNotTriples_option0:140,QuadsNotTriples_option1:141,QuadsNotTriples_option2:142,TriplesTemplate:143,TriplesTemplate_repetition0:144,TriplesSameSubject:145,TriplesTemplate_option0:146,GroupGraphPatternSub:147,GroupGraphPatternSub_option0:148,GroupGraphPatternSub_repetition0:149,GroupGraphPatternSubTail:150,GraphPatternNotTriples:151,GroupGraphPatternSubTail_option0:152,GroupGraphPatternSubTail_option1:153,TriplesBlock:154,TriplesBlock_repetition0:155,TriplesSameSubjectPath:156,TriplesBlock_option0:157,GroupOrUnionGraphPattern:158,OPTIONAL:159,MINUS:160,SERVICE:161,GraphPatternNotTriples_option0:162,FILTER:163,BIND:164,InlineDataOneVar:165,InlineDataFull:166,InlineDataOneVar_repetition0:167,InlineDataFull_repetition0:168,InlineDataFull_repetition_plus1:169,InlineDataFull_repetition2:170,DataBlockValue:171,Literal:172,QuotedTriple:173,UNDEF:174,GroupOrUnionGraphPattern_repetition0:175,ArgList:176,ArgList_option0:177,ArgList_repetition0:178,ExpressionList:179,ExpressionList_repetition0:180,ConstructTemplate_option0:181,ConstructTriples:182,ConstructTriples_repetition0:183,ConstructTriples_option0:184,VarOrTermOrQuotedTP:185,PropertyListNotEmpty:186,TriplesNode:187,PropertyList:188,PropertyList_option0:189,VerbObjectList:190,PropertyListNotEmpty_repetition0:191,SemiOptionalVerbObjectList:192,";":193,SemiOptionalVerbObjectList_option0:194,Verb:195,ObjectList:196,a:197,ObjectList_repetition0:198,Object:199,GraphNode:200,Object_option0:201,PropertyListPathNotEmpty:202,TriplesNodePath:203,TriplesSameSubjectPath_option0:204,O:205,PropertyListPathNotEmpty_repetition0:206,PropertyListPathNotEmptyTail:207,O_group0:208,ObjectListPath:209,ObjectListPath_repetition0:210,ObjectPath:211,GraphNodePath:212,ObjectPath_option0:213,Path:214,Path_repetition0:215,PathSequence:216,PathSequence_repetition0:217,PathEltOrInverse:218,PathElt:219,PathPrimary:220,PathElt_option0:221,PathEltOrInverse_option0:222,IriOrA:223,"!":224,PathNegatedPropertySet:225,PathOneInPropertySet:226,PathNegatedPropertySet_repetition0:227,PathNegatedPropertySet_option0:228,"^":229,TriplesNode_repetition_plus0:230,"[":231,"]":232,TriplesNodePath_repetition_plus0:233,VarOrTermOrQuotedTPExpr:234,VarOrTerm:235,GraphTerm:236,BlankNode:237,ConditionalOrExpression:238,ConditionalAndExpression:239,ConditionalOrExpression_repetition0:240,ConditionalOrExpressionTail:241,"||":242,RelationalExpression:243,ConditionalAndExpression_repetition0:244,ConditionalAndExpressionTail:245,"&&":246,NumericExpression:247,RelationalExpression_group0:248,RelationalExpression_option0:249,IN:250,MultiplicativeExpression:251,NumericExpression_repetition0:252,AdditiveExpressionTail:253,AdditiveExpressionTail_group0:254,NumericLiteralPositive:255,AdditiveExpressionTail_repetition0:256,NumericLiteralNegative:257,AdditiveExpressionTail_repetition1:258,UnaryExpression:259,MultiplicativeExpression_repetition0:260,MultiplicativeExpressionTail:261,MultiplicativeExpressionTail_group0:262,"+":263,PrimaryExpression:264,"-":265,ExprQuotedTP:266,Aggregate:267,FUNC_ARITY0:268,FUNC_ARITY1:269,FUNC_ARITY1_SPARQL_STAR:270,FUNC_ARITY2:271,",":272,FUNC_ARITY3:273,FUNC_ARITY3_SPARQL_STAR:274,BuiltInCall_group0:275,BOUND:276,BNODE:277,BuiltInCall_option0:278,EXISTS:279,COUNT:280,Aggregate_option0:281,Aggregate_group0:282,FUNC_AGGREGATE:283,Aggregate_option1:284,GROUP_CONCAT:285,Aggregate_option2:286,Aggregate_option3:287,GroupConcatSeparator:288,SEPARATOR:289,"=":290,String:291,LANGTAG:292,"^^":293,DECIMAL:294,DOUBLE:295,BOOLEAN:296,INTEGER_POSITIVE:297,DECIMAL_POSITIVE:298,DOUBLE_POSITIVE:299,INTEGER_NEGATIVE:300,DECIMAL_NEGATIVE:301,DOUBLE_NEGATIVE:302,STRING_LITERAL1:303,STRING_LITERAL2:304,STRING_LITERAL_LONG1:305,STRING_LITERAL_LONG2:306,PrefixedName:307,PNAME_LN:308,BLANK_NODE_LABEL:309,ANON:310,QuotedTP:311,"<<":312,qtSubjectOrObject:313,">>":314,DataValueTerm:315,AnnotationPattern:316,"{|":317,"|}":318,AnnotationPatternPath:319,ExprVarOrTerm:320,QueryOrUpdate_group0_option0:321,Prologue_repetition0_group0:322,Qry_group0_repetition_plus0:323,SelectClauseBase_option0_group0:324,DISTINCT:325,REDUCED:326,NAMED:327,SILENT:328,CLEAR:329,DROP:330,ADD:331,MOVE:332,COPY:333,ALL:334,".":335,UNION:336,"|":337,"/":338,PathElt_option0_group0:339,"?":340,"!=":341,"<":342,">":343,"<=":344,">=":345,NOT:346,CONCAT:347,COALESCE:348,SUBSTR:349,REGEX:350,REPLACE:351,$accept:0,$end:1},terminals_:{2:"error",6:"EOF",12:"BASE",13:"IRIREF",15:"PREFIX",16:"PNAME_NS",24:"CONSTRUCT",28:"WHERE",29:"{",31:"}",32:"DESCRIBE",36:"ASK",39:"*",41:"SELECT",45:"(",47:"AS",48:")",53:"FROM",63:"GROUP",64:"BY",70:"HAVING",73:"ORDER",76:"ASC",78:"DESC",81:"LIMIT",82:"INTEGER",83:"OFFSET",85:"VALUES",87:"VAR",89:"NIL",100:"LOAD",109:"TO",110:"CREATE",112:"GRAPH",113:"INSERTDATA",115:"DELETEDATA",116:"DELETEWHERE",121:"INTO",123:"DELETE",126:"INSERT",128:"USING",131:"WITH",132:"DEFAULT",159:"OPTIONAL",160:"MINUS",161:"SERVICE",163:"FILTER",164:"BIND",174:"UNDEF",193:";",197:"a",224:"!",229:"^",231:"[",232:"]",242:"||",246:"&&",250:"IN",263:"+",265:"-",268:"FUNC_ARITY0",269:"FUNC_ARITY1",270:"FUNC_ARITY1_SPARQL_STAR",271:"FUNC_ARITY2",272:",",273:"FUNC_ARITY3",274:"FUNC_ARITY3_SPARQL_STAR",276:"BOUND",277:"BNODE",279:"EXISTS",280:"COUNT",283:"FUNC_AGGREGATE",285:"GROUP_CONCAT",289:"SEPARATOR",290:"=",292:"LANGTAG",293:"^^",294:"DECIMAL",295:"DOUBLE",296:"BOOLEAN",297:"INTEGER_POSITIVE",298:"DECIMAL_POSITIVE",299:"DOUBLE_POSITIVE",300:"INTEGER_NEGATIVE",301:"DECIMAL_NEGATIVE",302:"DOUBLE_NEGATIVE",303:"STRING_LITERAL1",304:"STRING_LITERAL2",305:"STRING_LITERAL_LONG1",306:"STRING_LITERAL_LONG2",308:"PNAME_LN",309:"BLANK_NODE_LABEL",310:"ANON",312:"<<",314:">>",317:"{|",318:"|}",325:"DISTINCT",326:"REDUCED",327:"NAMED",328:"SILENT",329:"CLEAR",330:"DROP",331:"ADD",332:"MOVE",333:"COPY",334:"ALL",335:".",336:"UNION",337:"|",338:"/",340:"?",341:"!=",342:"<",343:">",344:"<=",345:">=",346:"NOT",347:"CONCAT",348:"COALESCE",349:"SUBSTR",350:"REGEX",351:"REPLACE"},productions_:[0,[3,3],[7,2],[4,1],[11,2],[14,3],[8,4],[8,4],[8,5],[8,7],[8,5],[8,4],[17,2],[21,2],[38,2],[43,1],[43,5],[49,4],[49,4],[52,3],[19,2],[23,2],[20,3],[62,3],[66,1],[66,1],[66,3],[66,5],[66,1],[69,2],[72,3],[75,2],[75,2],[75,1],[75,1],[80,2],[80,2],[80,4],[80,4],[84,2],[86,4],[86,4],[86,6],[86,2],[94,3],[96,3],[98,4],[98,3],[98,5],[98,4],[98,2],[98,2],[98,2],[98,5],[120,2],[118,3],[118,1],[125,2],[127,3],[130,2],[108,1],[108,2],[122,2],[105,1],[105,1],[114,3],[135,2],[138,7],[143,3],[57,3],[57,3],[147,2],[150,3],[154,3],[151,1],[151,2],[151,2],[151,3],[151,4],[151,2],[151,6],[151,1],[93,1],[93,1],[165,4],[166,4],[166,6],[171,1],[171,1],[171,1],[171,1],[158,2],[79,1],[79,1],[79,1],[68,2],[176,1],[176,5],[179,1],[179,4],[25,3],[182,3],[145,2],[145,2],[188,1],[186,2],[192,2],[190,2],[195,1],[195,1],[196,2],[199,2],[156,2],[156,2],[202,2],[207,1],[207,2],[205,2],[209,2],[211,2],[214,2],[216,2],[219,2],[218,2],[220,1],[220,2],[220,3],[225,1],[225,1],[225,4],[226,1],[226,2],[187,3],[187,3],[203,3],[203,3],[200,1],[200,1],[212,1],[212,1],[234,1],[235,1],[235,1],[139,1],[139,1],[44,1],[236,1],[236,1],[236,1],[236,1],[46,1],[238,2],[241,2],[239,2],[245,2],[243,1],[243,3],[243,4],[247,2],[253,2],[253,2],[253,2],[251,2],[261,2],[259,2],[259,2],[259,2],[259,1],[264,1],[264,1],[264,1],[264,1],[264,1],[264,1],[264,1],[77,3],[67,1],[67,2],[67,4],[67,4],[67,6],[67,8],[67,8],[67,2],[67,4],[67,2],[67,4],[67,3],[267,5],[267,5],[267,6],[288,4],[172,1],[172,2],[172,3],[172,1],[172,1],[172,1],[172,1],[172,1],[172,1],[255,1],[255,1],[255,1],[257,1],[257,1],[257,1],[291,1],[291,1],[291,1],[291,1],[55,1],[55,1],[307,1],[307,1],[237,1],[237,1],[311,5],[173,5],[313,1],[313,1],[313,1],[313,1],[313,1],[315,1],[315,1],[315,1],[185,1],[185,1],[185,1],[316,3],[319,3],[266,5],[320,1],[320,1],[320,1],[223,1],[223,1],[321,0],[321,1],[5,1],[5,1],[5,1],[9,0],[9,1],[322,1],[322,1],[10,0],[10,2],[18,0],[18,2],[22,0],[22,2],[26,0],[26,2],[27,0],[27,2],[30,0],[30,1],[323,1],[323,2],[33,1],[33,1],[34,0],[34,2],[35,0],[35,1],[37,0],[37,2],[40,1],[40,2],[324,1],[324,1],[42,0],[42,1],[50,0],[50,1],[51,0],[51,1],[54,0],[54,1],[56,0],[56,1],[58,0],[58,1],[59,0],[59,1],[60,0],[60,1],[61,0],[61,1],[65,1],[65,2],[71,1],[71,2],[74,1],[74,2],[88,0],[88,2],[90,0],[90,2],[91,1],[91,2],[92,0],[92,2],[95,1],[95,2],[97,0],[97,4],[99,0],[99,2],[101,0],[101,1],[102,0],[102,1],[103,1],[103,1],[104,0],[104,1],[106,1],[106,1],[106,1],[107,0],[107,1],[111,0],[111,1],[117,0],[117,1],[119,0],[119,2],[124,0],[124,1],[129,0],[129,1],[133,0],[133,1],[134,1],[134,1],[134,1],[136,0],[136,1],[137,0],[137,2],[140,0],[140,1],[141,0],[141,1],[142,0],[142,1],[144,0],[144,3],[146,0],[146,1],[148,0],[148,1],[149,0],[149,2],[152,0],[152,1],[153,0],[153,1],[155,0],[155,3],[157,0],[157,1],[162,0],[162,1],[167,0],[167,2],[168,0],[168,2],[169,1],[169,2],[170,0],[170,2],[175,0],[175,3],[177,0],[177,1],[178,0],[178,3],[180,0],[180,3],[181,0],[181,1],[183,0],[183,3],[184,0],[184,1],[189,0],[189,1],[191,0],[191,2],[194,0],[194,1],[198,0],[198,3],[201,0],[201,1],[204,0],[204,1],[206,0],[206,2],[208,1],[208,1],[210,0],[210,3],[213,0],[213,1],[215,0],[215,3],[217,0],[217,3],[339,1],[339,1],[339,1],[221,0],[221,1],[222,0],[222,1],[227,0],[227,3],[228,0],[228,1],[230,1],[230,2],[233,1],[233,2],[240,0],[240,2],[244,0],[244,2],[248,1],[248,1],[248,1],[248,1],[248,1],[248,1],[249,0],[249,1],[252,0],[252,2],[254,1],[254,1],[256,0],[256,2],[258,0],[258,2],[260,0],[260,2],[262,1],[262,1],[275,1],[275,1],[275,1],[275,1],[275,1],[278,0],[278,1],[281,0],[281,1],[282,1],[282,1],[284,0],[284,1],[286,0],[286,1],[287,0],[287,1]],performAction:function(Ae,Le,ze,ut,ct,K,dn){var Y=K.length-1;switch(ct){case 1:if(K[Y-1]=K[Y-1]||{},St.base&&(K[Y-1].base=St.base),St.base="",K[Y-1].prefixes=St.prefixes,St.prefixes=null,St.pathOnly){if(K[Y-1].type==="path"||"termType"in K[Y-1])return K[Y-1];throw new Error("Received full SPARQL query in path only mode")}else if(K[Y-1].type==="path"||"termType"in K[Y-1])throw new Error("Received only path in full SPARQL mode");if(K[Y-1].type==="update"){const vt={};for(const jt of K[Y-1].updates)if(jt.updateType==="insert"){const yt={};for(const Rr of jt.insert)if(Rr.type==="bgp"||Rr.type==="graph")for(const Fr of Rr.triples)Fr.subject.termType==="BlankNode"&&(yt[Fr.subject.value]=!0),Fr.predicate.termType==="BlankNode"&&(yt[Fr.predicate.value]=!0),Fr.object.termType==="BlankNode"&&(yt[Fr.object.value]=!0);for(const Rr of Object.keys(yt)){if(vt[Rr])throw new Error("Detected reuse blank node across different INSERT DATA clauses");vt[Rr]=!0}}}return K[Y-1];case 2:this.$={...K[Y-1],...K[Y],type:"query"};break;case 4:St.base=vT(K[Y]);break;case 5:St.prefixes||(St.prefixes={}),K[Y-1]=K[Y-1].substr(0,K[Y-1].length-1),K[Y]=vT(K[Y]),St.prefixes[K[Y-1]]=K[Y];break;case 6:this.$={...K[Y-3],...Cl(K[Y-2]),...K[Y-1],...K[Y]};break;case 7:if(!St.skipValidation&&(fx(K[Y-3].variables.map(jt=>lx(jt.expression))).some(jt=>jt.aggregation==="count"&&!(jt.expression instanceof Aw))||K[Y].group)){for(const jt of K[Y-3].variables)if(jt.termType==="Variable"){if(!K[Y].group||!K[Y].group.map(yt=>$f(yt)).includes($f(jt)))throw Error("Projection of ungrouped variable (?"+$f(jt)+")")}else if(lx(jt.expression).length===0){const yt=zfe(jt.expression);for(const Rr of yt)if(!K[Y].group||!K[Y].group.map||!K[Y].group.map(Fr=>$f(Fr)).includes($f(Rr)))throw Error("Use of ungrouped variable in projection of operation (?"+$f(Rr)+")")}}const Uf=K[Y-1].where.filter(vt=>vt.type==="query");if(Uf.length>0){const vt=K[Y-3].variables.filter(yt=>yt.variable&&yt.variable.value).map(yt=>yt.variable.value),jt=fx(Uf.map(yt=>yt.variables)).map(yt=>yt.value||yt.variable.value);for(const yt of vt)if(jt.indexOf(yt)>=0)throw Error("Target id of 'AS' (?"+yt+") already used in subquery")}this.$=or(K[Y-3],Cl(K[Y-2]),K[Y-1],K[Y]);break;case 8:this.$=or({queryType:"CONSTRUCT",template:K[Y-3]},Cl(K[Y-2]),K[Y-1],K[Y]);break;case 9:this.$=or({queryType:"CONSTRUCT",template:K[Y-2]=K[Y-2]?K[Y-2].triples:[]},Cl(K[Y-5]),{where:[{type:"bgp",triples:Mf([],K[Y-2])}]},K[Y]);break;case 10:this.$=or({queryType:"DESCRIBE",variables:K[Y-3]==="*"?[new Aw]:K[Y-3]},Cl(K[Y-2]),K[Y-1],K[Y]);break;case 11:this.$=or({queryType:"ASK"},Cl(K[Y-2]),K[Y-1],K[Y]);break;case 12:this.$=or(K[Y-1],{variables:[new Aw]});break;case 13:const bx=K[Y].map(vt=>vt.value||vt.variable.value),Pw=Xfe(bx);if(Pw.length>0)throw Error("Two or more of the resulting columns have the same name (?"+Pw[0]+")");this.$=or(K[Y-1],{variables:K[Y]});break;case 14:this.$=or({queryType:"SELECT"},K[Y]&&(K[Y-1]=Xr(K[Y]),K[Y]={},K[Y][K[Y-1]]=!0,K[Y]));break;case 16:case 27:this.$=qf(K[Y-3],{variable:K[Y-1]});break;case 17:case 18:this.$=or(K[Y-3],K[Y-2],K[Y-1],K[Y],{type:"query"});break;case 19:case 58:this.$={iri:K[Y],named:!!K[Y-1]};break;case 20:this.$={where:K[Y].patterns};break;case 21:this.$=or(K[Y-1],K[Y]);break;case 22:this.$=or(K[Y-2],K[Y-1],K[Y]);break;case 23:this.$={group:K[Y]};break;case 24:case 25:case 28:case 31:case 33:case 34:this.$=qf(K[Y]);break;case 26:this.$=qf(K[Y-1]);break;case 29:this.$={having:K[Y]};break;case 30:this.$={order:K[Y]};break;case 32:this.$=qf(K[Y],{descending:!0});break;case 35:this.$={limit:Bf(K[Y])};break;case 36:this.$={offset:Bf(K[Y])};break;case 37:this.$={limit:Bf(K[Y-2]),offset:Bf(K[Y])};break;case 38:this.$={limit:Bf(K[Y]),offset:Bf(K[Y-2])};break;case 39:case 43:this.$={type:"values",values:K[Y]};break;case 40:case 84:this.$=K[Y-1].map(vt=>({[K[Y-3]]:vt}));break;case 41:case 85:this.$=K[Y-1].map(()=>({}));break;case 42:case 86:var ra=K[Y-4].length;K[Y-4]=K[Y-4].map(ax),this.$=K[Y-1].map(function(vt){if(vt.length!==ra)throw Error("Inconsistent VALUES length");for(var jt={},yt=0;yt<ra;yt++)jt["?"+K[Y-4][yt].value]=vt[yt];return jt});break;case 44:case 65:case 100:case 126:case 175:this.$=K[Y-1];break;case 45:this.$={type:"update",updates:ql(K[Y-2],K[Y-1])};break;case 46:this.$=or({type:"load",silent:!!K[Y-2],source:K[Y-1]},K[Y]&&{destination:K[Y]});break;case 47:this.$={type:Xr(K[Y-2]),silent:!!K[Y-1],graph:K[Y]};break;case 48:this.$={type:Xr(K[Y-4]),silent:!!K[Y-3],source:K[Y-2],destination:K[Y]};break;case 49:this.$={type:"create",silent:!!K[Y-2],graph:{type:"graph",name:K[Y]}};break;case 50:this.$={updateType:"insert",insert:KX(K[Y])};break;case 51:this.$={updateType:"delete",delete:yx(KX(K[Y]))};break;case 52:this.$={updateType:"deletewhere",delete:yx(K[Y])};break;case 53:this.$={updateType:"insertdelete",...K[Y-4],...K[Y-3],...Cl(K[Y-2],"using"),where:K[Y].patterns};break;case 54:case 57:case 62:case 167:case 191:case 236:this.$=K[Y];break;case 55:this.$={delete:yx(K[Y-1]),insert:K[Y]||[]};break;case 56:this.$={delete:[],insert:K[Y]};break;case 59:this.$={graph:K[Y]};break;case 60:this.$={type:"graph",default:!0};break;case 61:case 63:this.$={type:"graph",name:K[Y]};break;case 64:this.$={[Xr(K[Y])]:!0};break;case 66:this.$=K[Y-1]?ni(K[Y],[K[Y-1]]):ni(K[Y]);break;case 67:var Rw=or(K[Y-3]||{triples:[]},{type:"graph",name:K[Y-5]});this.$=K[Y]?[Rw,K[Y]]:[Rw];break;case 68:case 73:this.$={type:"bgp",triples:ni(K[Y-2],[K[Y-1]])};break;case 69:this.$={type:"group",patterns:[K[Y-1]]};break;case 70:for(const vt of K[Y-1].filter(jt=>jt.type==="bind")){const jt=K[Y-1].indexOf(vt),yt=new Set;for(const Rr of K[Y-1].slice(0,jt))(Rr.type==="group"||Rr.type==="bgp")&&XX(Rr).forEach(Fr=>yt.add(Fr));if(yt.has(vt.variable.value))throw Error("Variable used to bind is already bound (?"+vt.variable.value+")")}this.$={type:"group",patterns:K[Y-1]};break;case 71:this.$=K[Y-1]?ni([K[Y-1]],K[Y]):ni(K[Y]);break;case 72:this.$=K[Y]?[K[Y-2],K[Y]]:K[Y-2];break;case 75:this.$=or(K[Y],{type:"optional"});break;case 76:this.$=or(K[Y],{type:"minus"});break;case 77:this.$=or(K[Y],{type:"graph",name:K[Y-1]});break;case 78:this.$=or(K[Y],{type:"service",name:K[Y-1],silent:!!K[Y-2]});break;case 79:this.$={type:"filter",expression:K[Y]};break;case 80:this.$={type:"bind",variable:K[Y-1],expression:K[Y-3]};break;case 89:this.$=wT(K[Y]);break;case 90:this.$=void 0;break;case 91:this.$=K[Y-1].length?{type:"union",patterns:ni(K[Y-1].map(ox),[ox(K[Y])])}:K[Y];break;case 95:this.$={...K[Y],function:K[Y-1]};break;case 96:this.$={type:"functionCall",args:[]};break;case 97:this.$={type:"functionCall",args:ql(K[Y-2],K[Y-1]),distinct:!!K[Y-3]};break;case 98:case 115:case 128:case 247:case 249:case 251:case 253:case 255:case 263:case 267:case 297:case 299:case 303:case 307:case 328:case 341:case 349:case 355:case 361:case 367:case 369:case 373:case 375:case 379:case 381:case 385:case 391:case 395:case 401:case 405:case 409:case 411:case 420:case 428:case 430:case 440:case 444:case 446:case 448:this.$=[];break;case 99:this.$=ql(K[Y-2],K[Y-1]);break;case 101:this.$=ni(K[Y-2],[K[Y-1]]);break;case 102:case 112:this.$=px(K[Y].map(vt=>or(xi(K[Y-1]),vt)));break;case 103:this.$=px(Mf(K[Y].map(vt=>or(xi(K[Y-1].entity),vt)),K[Y-1].triples));break;case 105:this.$=ni([K[Y-1]],K[Y]);break;case 106:this.$=ni(K[Y]);break;case 107:this.$=dx(K[Y-1],K[Y]);break;case 109:case 237:this.$=St.factory.namedNode(Mfe);break;case 110:case 118:this.$=ql(K[Y-1],K[Y]);break;case 111:this.$=K[Y]?{annotation:K[Y],object:K[Y-1]}:K[Y-1];break;case 113:this.$=K[Y]?px(Mf(K[Y].map(vt=>or(xi(K[Y-1].entity),vt)),K[Y-1].triples)):K[Y-1].triples;break;case 114:this.$=dx(...K[Y-1],K[Y]);break;case 116:this.$=dx(...K[Y]);break;case 117:case 159:case 163:this.$=[K[Y-1],K[Y]];break;case 119:this.$=K[Y]?{object:K[Y-1],annotation:K[Y]}:K[Y-1];break;case 120:this.$=K[Y-1].length?Cf("|",ql(K[Y-1],K[Y])):K[Y];break;case 121:this.$=K[Y-1].length?Cf("/",ql(K[Y-1],K[Y])):K[Y];break;case 122:this.$=K[Y]?Cf(K[Y],[K[Y-1]]):K[Y-1];break;case 123:this.$=K[Y-1]?Cf(K[Y-1],[K[Y]]):K[Y];break;case 125:case 131:this.$=Cf(K[Y-1],[K[Y]]);break;case 129:this.$=Cf("|",ql(K[Y-2],K[Y-1]));break;case 132:case 134:this.$=Hfe(K[Y-1]);break;case 133:case 135:this.$=Gfe(K[Y-1]);break;case 140:this.$={entity:K[Y],triples:[]};break;case 145:this.$=ax(K[Y]);break;case 149:this.$=St.factory.namedNode(BX);break;case 151:case 153:case 158:case 162:this.$=ux(K[Y-1],K[Y]);break;case 152:this.$=["||",K[Y]];break;case 154:this.$=["&&",K[Y]];break;case 156:this.$=xr(K[Y-1],[K[Y-2],K[Y]]);break;case 157:this.$=xr(K[Y-2]?"notin":"in",[K[Y-3],K[Y]]);break;case 160:this.$=["+",ux(K[Y-1],K[Y])];break;case 161:var Fw=ii(K[Y-1].value.replace("-",""),K[Y-1].datatype);this.$=["-",ux(Fw,K[Y])];break;case 164:this.$=xr("UPLUS",[K[Y]]);break;case 165:this.$=xr(K[Y-1],[K[Y]]);break;case 166:this.$=xr("UMINUS",[K[Y]]);break;case 177:this.$=xr(Xr(K[Y-1]));break;case 178:this.$=xr(Xr(K[Y-3]),[K[Y-1]]);break;case 179:this.$=wT(xr(Xr(K[Y-3]),[K[Y-1]]));break;case 180:this.$=xr(Xr(K[Y-5]),[K[Y-3],K[Y-1]]);break;case 181:this.$=xr(Xr(K[Y-7]),[K[Y-5],K[Y-3],K[Y-1]]);break;case 182:this.$=wT(xr(Xr(K[Y-7]),[K[Y-5],K[Y-3],K[Y-1]]));break;case 183:this.$=xr(Xr(K[Y-1]),K[Y]);break;case 184:this.$=xr("bound",[ax(K[Y-1])]);break;case 185:this.$=xr(K[Y-1],[]);break;case 186:this.$=xr(K[Y-3],[K[Y-1]]);break;case 187:this.$=xr(K[Y-2]?"notexists":"exists",[ox(K[Y])]);break;case 188:case 189:this.$=qf(K[Y-1],{type:"aggregate",aggregation:Xr(K[Y-4]),distinct:!!K[Y-2]});break;case 190:this.$=qf(K[Y-2],{type:"aggregate",aggregation:Xr(K[Y-5]),distinct:!!K[Y-3],separator:typeof K[Y-1]=="string"?K[Y-1]:" "});break;case 192:this.$=ii(K[Y]);break;case 193:this.$=$fe(K[Y-1],Xr(K[Y].substr(1)));break;case 194:this.$=ii(K[Y-2],K[Y]);break;case 195:case 204:this.$=ii(K[Y],$X);break;case 196:case 205:this.$=ii(K[Y],UX);break;case 197:case 206:this.$=ii(Xr(K[Y]),VX);break;case 200:this.$=ii(K[Y].toLowerCase(),Bfe);break;case 201:this.$=ii(K[Y].substr(1),$X);break;case 202:this.$=ii(K[Y].substr(1),UX);break;case 203:this.$=ii(K[Y].substr(1).toLowerCase(),VX);break;case 207:case 208:this.$=zX(K[Y],1);break;case 209:case 210:this.$=zX(K[Y],3);break;case 211:this.$=St.factory.namedNode(vT(K[Y]));break;case 213:var Iw=K[Y].indexOf(":"),sr=K[Y].substr(0,Iw),ai=St.prefixes[sr];if(!ai)throw new Error("Unknown prefix: "+sr);var Bl=vT(ai+K[Y].substr(Iw+1));this.$=St.factory.namedNode(Bl);break;case 214:if(K[Y]=K[Y].substr(0,K[Y].length-1),!(K[Y]in St.prefixes))throw new Error("Unknown prefix: "+K[Y]);var Bl=vT(St.prefixes[K[Y]]);this.$=St.factory.namedNode(Bl);break;case 215:this.$=TT(K[Y].replace(/^(_:)/,""));break;case 216:this.$=TT();break;case 217:case 218:case 232:this.$=wT(sx(K[Y-3],K[Y-2],K[Y-1]));break;case 230:case 231:this.$=wT(K[Y-1]);break;case 248:case 250:case 252:case 254:case 256:case 260:case 264:case 268:case 270:case 292:case 294:case 296:case 298:case 300:case 302:case 304:case 306:case 329:case 342:case 356:case 368:case 370:case 372:case 374:case 392:case 402:case 425:case 427:case 429:case 431:case 441:case 445:case 447:case 449:K[Y-1].push(K[Y]);break;case 259:case 269:case 291:case 293:case 295:case 301:case 305:case 371:case 424:case 426:this.$=[K[Y]];break;case 308:K[Y-3].push(K[Y-2]);break;case 350:case 362:case 376:case 380:case 382:case 386:case 396:case 406:case 410:case 412:case 421:K[Y-2].push(K[Y-1]);break}},table:[n(o,i,{3:1,4:2,10:3}),{1:[3]},n(t,[2,307],{5:4,7:5,321:6,214:7,8:8,96:9,215:10,17:11,21:12,97:16,38:17,6:[2,238],13:e,16:e,45:e,197:e,224:e,229:e,308:e,24:[1,13],32:[1,14],36:[1,15],41:r}),n([6,13,16,24,32,36,41,45,100,110,113,115,116,123,126,131,197,224,229,308,329,330,331,332,333],[2,3],{322:19,11:20,14:21,12:[1,22],15:[1,23]}),{6:[1,24]},{6:[2,240]},{6:[2,241]},{6:[2,242]},{6:[2,243],9:25,84:26,85:a},{6:[2,239]},n(c,[2,411],{216:28,217:29}),n(s,[2,249],{18:30}),n(s,[2,251],{22:31}),n(d,[2,255],{25:32,27:33,29:[1,34]}),{13:l,16:f,33:35,39:[1,37],44:39,55:40,87:h,139:38,307:43,308:p,323:36},n(s,[2,267],{37:46}),n(y,[2,326],{98:47,103:49,106:50,117:55,130:61,100:[1,48],110:[1,51],113:[1,52],115:[1,53],116:[1,54],131:[1,62],329:[1,56],330:[1,57],331:[1,58],332:[1,59],333:[1,60]}),{39:[1,63],40:64,43:65,44:66,45:_,87:h},n(b,[2,273],{42:68,324:69,325:[1,70],326:[1,71]}),n(o,[2,248]),n(o,[2,245]),n(o,[2,246]),{13:[1,72]},{16:[1,73]},{1:[2,1]},{6:[2,2]},{6:[2,244]},{45:[1,77],85:[1,78],86:74,87:[1,75],89:[1,76]},n([6,13,16,45,48,82,87,89,231,294,295,296,297,298,299,300,301,302,303,304,305,306,308,309,310,312],[2,120],{337:[1,79]}),n(m,[2,418],{218:80,222:81,229:[1,82]}),{19:83,28:g,29:T,52:84,53:v,56:85},{19:88,28:g,29:T,52:89,53:v,56:85},n(s,[2,253],{26:90}),{28:[1,91],52:92,53:v},n(S,[2,385],{181:93,182:94,183:95,31:[2,383]}),n(F,[2,263],{34:96}),n(F,[2,261],{44:39,55:40,307:43,139:97,13:l,16:f,87:h,308:p}),n(F,[2,262]),n(M,[2,259]),n(O,[2,143]),n(O,[2,144]),n([6,13,16,28,29,31,39,45,47,48,53,63,70,73,76,78,81,82,83,85,87,89,112,159,160,161,163,164,193,197,224,229,231,232,242,246,250,263,265,268,269,270,271,272,273,274,276,277,279,280,283,285,290,294,295,296,297,298,299,300,301,302,303,304,305,306,308,309,310,312,314,317,318,335,338,341,342,343,344,345,346,347,348,349,350,351],[2,145]),n(w,[2,211]),n(w,[2,212]),n(w,[2,213]),n(w,[2,214]),{19:98,28:g,29:T,52:99,53:v,56:85},{6:[2,309],99:100,193:[1,101]},n(E,[2,311],{101:102,328:[1,103]}),n(R,[2,317],{104:104,328:[1,105]}),n(D,[2,322],{107:106,328:[1,107]}),{111:108,112:[2,324],328:[1,109]},{29:B,114:110},{29:B,114:112},{29:B,114:113},{118:114,123:[1,115],125:116,126:C},n($,[2,315]),n($,[2,316]),n(Z,[2,319]),n(Z,[2,320]),n(Z,[2,321]),n(y,[2,327]),{13:l,16:f,55:118,307:43,308:p},n(s,[2,12]),n(s,[2,13],{44:66,43:119,45:_,87:h}),n(ee,[2,269]),n(ee,[2,15]),{13:l,16:f,44:136,45:ce,46:120,55:133,67:132,68:134,77:131,82:G,87:h,172:135,224:fe,238:121,239:122,243:123,247:124,251:125,255:154,257:155,259:126,263:me,264:130,265:ye,266:137,267:139,268:re,269:xe,270:Re,271:Ie,273:he,274:be,275:146,276:V,277:P,278:149,279:N,280:A,283:I,285:q,291:150,294:H,295:U,296:X,297:Q,298:k,299:oe,300:se,301:Se,302:Me,303:Oe,304:ue,305:L,306:x,307:43,308:p,312:j,346:z,347:W,348:le,349:ae,350:De,351:Ve},n(b,[2,14]),n(b,[2,274]),n(b,[2,271]),n(b,[2,272]),n(o,[2,4]),{13:[1,177]},n(Be,[2,39]),{29:[1,178]},{29:[1,179]},{87:[1,181],91:180},{45:[1,187],87:[1,185],89:[1,186],93:182,165:183,166:184},n(c,[2,410]),n([6,13,16,45,48,82,87,89,231,294,295,296,297,298,299,300,301,302,303,304,305,306,308,309,310,312,337],[2,121],{338:[1,188]}),{13:l,16:f,45:[1,193],55:194,197:Ze,219:189,220:190,223:191,224:[1,192],307:43,308:p},n(m,[2,419]),n(J,we,{20:196,59:197,69:198,70:Ee}),n(s,[2,250]),{29:$e,57:200},n(E,[2,279],{54:202,327:[1,203]}),{29:[2,282]},n(Pe,et,{23:204,58:205,62:206,63:rt}),n(s,[2,252]),{19:208,28:g,29:T,52:209,53:v,56:85},{29:[1,210]},n(d,[2,256]),{31:[1,211]},{31:[2,384]},{13:l,16:f,44:215,45:ke,55:220,82:G,87:h,89:ft,145:212,172:221,185:213,187:214,231:te,236:216,237:222,255:154,257:155,291:150,294:H,295:U,296:X,297:Q,298:k,299:oe,300:se,301:Se,302:Me,303:Oe,304:ue,305:L,306:x,307:43,308:p,309:ne,310:Ne,311:217,312:Ce},n(Qe,[2,265],{56:85,35:227,52:228,19:229,28:g,29:T,53:v}),n(M,[2,260]),n(Pe,et,{58:205,62:206,23:230,63:rt}),n(s,[2,268]),{6:[2,45]},n(o,i,{10:3,4:231}),{13:l,16:f,55:232,307:43,308:p},n(E,[2,312]),{105:233,112:Tt,122:234,132:[1,237],134:235,327:[1,238],334:[1,239]},n(R,[2,318]),n(E,Ue,{108:240,133:242,112:ht,132:He}),n(D,[2,323]),{112:[1,244]},{112:[2,325]},n(Je,[2,50]),n(S,tt,{135:245,136:246,143:247,144:248,31:wt,112:wt}),n(Je,[2,51]),n(Je,[2,52]),n(at,[2,328],{119:249}),{29:B,114:250},n(at,[2,56]),{29:B,114:251},n(y,[2,59]),n(ee,[2,270]),{47:[1,252]},n(Xe,[2,150]),n(Lr,[2,428],{240:253}),n(Ge,[2,430],{244:254}),n(Ge,[2,155],{248:255,249:256,250:[2,438],290:[1,257],341:[1,258],342:[1,259],343:[1,260],344:[1,261],345:[1,262],346:[1,263]}),n(ie,[2,440],{252:264}),n(_e,[2,448],{260:265}),{13:l,16:f,44:136,45:ce,55:133,67:132,68:134,77:131,82:G,87:h,172:135,255:154,257:155,264:266,266:137,267:139,268:re,269:xe,270:Re,271:Ie,273:he,274:be,275:146,276:V,277:P,278:149,279:N,280:A,283:I,285:q,291:150,294:H,295:U,296:X,297:Q,298:k,299:oe,300:se,301:Se,302:Me,303:Oe,304:ue,305:L,306:x,307:43,308:p,312:j,346:z,347:W,348:le,349:ae,350:De,351:Ve},{13:l,16:f,44:136,45:ce,55:133,67:132,68:134,77:131,82:G,87:h,172:135,255:154,257:155,264:267,266:137,267:139,268:re,269:xe,270:Re,271:Ie,273:he,274:be,275:146,276:V,277:P,278:149,279:N,280:A,283:I,285:q,291:150,294:H,295:U,296:X,297:Q,298:k,299:oe,300:se,301:Se,302:Me,303:Oe,304:ue,305:L,306:x,307:43,308:p,312:j,346:z,347:W,348:le,349:ae,350:De,351:Ve},{13:l,16:f,44:136,45:ce,55:133,67:132,68:134,77:131,82:G,87:h,172:135,255:154,257:155,264:268,266:137,267:139,268:re,269:xe,270:Re,271:Ie,273:he,274:be,275:146,276:V,277:P,278:149,279:N,280:A,283:I,285:q,291:150,294:H,295:U,296:X,297:Q,298:k,299:oe,300:se,301:Se,302:Me,303:Oe,304:ue,305:L,306:x,307:43,308:p,312:j,346:z,347:W,348:le,349:ae,350:De,351:Ve},n(_e,[2,167]),n(_e,[2,168]),n(_e,[2,169]),n(_e,[2,170],{176:269,45:ve,89:We}),n(_e,[2,171]),n(_e,[2,172]),n(_e,[2,173]),n(_e,[2,174]),{13:l,16:f,44:136,45:ce,46:272,55:133,67:132,68:134,77:131,82:G,87:h,172:135,224:fe,238:121,239:122,243:123,247:124,251:125,255:154,257:155,259:126,263:me,264:130,265:ye,266:137,267:139,268:re,269:xe,270:Re,271:Ie,273:he,274:be,275:146,276:V,277:P,278:149,279:N,280:A,283:I,285:q,291:150,294:H,295:U,296:X,297:Q,298:k,299:oe,300:se,301:Se,302:Me,303:Oe,304:ue,305:L,306:x,307:43,308:p,312:j,346:z,347:W,348:le,349:ae,350:De,351:Ve},n(Ye,[2,176]),{89:[1,273]},{45:[1,274]},{45:[1,275]},{45:[1,276]},{45:[1,277]},{45:[1,278]},{45:mt,89:nr,179:279},{45:[1,282]},{45:[1,284],89:[1,283]},{279:[1,285]},n(Qt,[2,192],{292:[1,286],293:[1,287]}),n(Qt,[2,195]),n(Qt,[2,196]),n(Qt,[2,197]),n(Qt,[2,198]),n(Qt,[2,199]),n(Qt,[2,200]),{13:l,16:f,44:39,55:40,82:G,87:h,139:289,172:291,255:154,257:155,266:290,291:150,294:H,295:U,296:X,297:Q,298:k,299:oe,300:se,301:Se,302:Me,303:Oe,304:ue,305:L,306:x,307:43,308:p,312:j,320:288},{45:[1,292]},{45:[1,293]},{45:[1,294]},n(wi,[2,452]),n(wi,[2,453]),n(wi,[2,454]),n(wi,[2,455]),n(wi,[2,456]),{279:[2,458]},n(sn,[2,207]),n(sn,[2,208]),n(sn,[2,209]),n(sn,[2,210]),n(Qt,[2,201]),n(Qt,[2,202]),n(Qt,[2,203]),n(Qt,[2,204]),n(Qt,[2,205]),n(Qt,[2,206]),n(o,[2,5]),n(Kt,[2,297],{88:295}),n(mn,[2,299],{90:296}),{48:[1,297],87:[1,298]},n(Ar,[2,301]),n(Be,[2,43]),n(Be,[2,82]),n(Be,[2,83]),{29:[1,299]},{29:[1,300]},{87:[1,302],169:301},n(c,[2,412]),n(Un,[2,123]),n(Un,[2,416],{221:303,339:304,39:[1,306],263:[1,307],340:[1,305]}),n(Er,[2,124]),{13:l,16:f,45:[1,311],55:194,89:[1,310],197:Ze,223:312,225:308,226:309,229:Il,307:43,308:p},n(c,e,{215:10,214:314}),n(Er,[2,236]),n(Er,[2,237]),n(Mr,[2,6]),n(Nf,[2,287],{60:315,72:316,73:[1,317]}),n(J,[2,286]),{13:l,16:f,45:ce,55:323,67:321,68:322,71:318,77:320,79:319,267:139,268:re,269:xe,270:Re,271:Ie,273:he,274:be,275:146,276:V,277:P,278:149,279:N,280:A,283:I,285:q,307:43,308:p,346:z,347:W,348:le,349:ae,350:De,351:Ve},n([6,31,63,70,73,81,83,85],[2,20]),n(S,Pl,{38:17,49:324,147:325,17:326,21:327,148:328,154:329,155:330,29:cn,31:cn,85:cn,112:cn,159:cn,160:cn,161:cn,163:cn,164:cn,41:r}),{13:l,16:f,55:331,307:43,308:p},n(E,[2,280]),n(Mr,[2,7]),n(J,we,{59:197,69:198,20:332,70:Ee}),n(Pe,[2,284]),{64:[1,333]},n(Pe,et,{58:205,62:206,23:334,63:rt}),n(s,[2,254]),n(S,tt,{144:248,30:335,143:336,31:[2,257]}),n(s,[2,100]),{31:[2,387],184:337,335:[1,338]},{13:l,16:f,44:39,55:40,87:h,139:342,186:339,190:340,195:341,197:Wr,307:43,308:p},n(_T,[2,389],{44:39,55:40,307:43,190:340,195:341,139:342,188:344,189:345,186:346,13:l,16:f,87:h,197:Wr,308:p}),n(Si,[2,227]),n(Si,[2,228]),n(Si,[2,229]),{13:l,16:f,44:215,45:ke,55:220,82:G,87:h,89:ft,172:221,185:351,187:350,200:348,230:347,231:te,234:349,236:216,237:222,255:154,257:155,291:150,294:H,295:U,296:X,297:Q,298:k,299:oe,300:se,301:Se,302:Me,303:Oe,304:ue,305:L,306:x,307:43,308:p,309:ne,310:Ne,311:217,312:Ce},{13:l,16:f,44:39,55:40,87:h,139:342,186:352,190:340,195:341,197:Wr,307:43,308:p},n(Si,[2,146]),n(Si,[2,147]),n(Si,[2,148]),n(Si,[2,149]),{13:l,16:f,44:354,55:355,82:G,87:h,172:357,237:356,255:154,257:155,291:150,294:H,295:U,296:X,297:Q,298:k,299:oe,300:se,301:Se,302:Me,303:Oe,304:ue,305:L,306:x,307:43,308:p,309:ne,310:Ne,311:358,312:Ce,313:353},n(YE,[2,215]),n(YE,[2,216]),n(Pe,et,{58:205,62:206,23:359,63:rt}),n(F,[2,264]),n(Qe,[2,266]),n(Mr,[2,11]),n(t,[2,308],{6:[2,310]}),n(Je,[2,313],{102:360,120:361,121:[1,362]}),n(Je,[2,47]),n(Je,[2,63]),n(Je,[2,64]),{13:l,16:f,55:363,307:43,308:p},n(Je,[2,336]),n(Je,[2,337]),n(Je,[2,338]),{109:[1,364]},n(wX,[2,60]),{13:l,16:f,55:365,307:43,308:p},n(E,[2,335]),{13:l,16:f,55:366,307:43,308:p},{31:[1,367]},n(Dl,[2,341],{137:368}),n(Dl,[2,340]),{13:l,16:f,44:215,45:ke,55:220,82:G,87:h,89:ft,145:369,172:221,185:213,187:214,231:te,236:216,237:222,255:154,257:155,291:150,294:H,295:U,296:X,297:Q,298:k,299:oe,300:se,301:Se,302:Me,303:Oe,304:ue,305:L,306:x,307:43,308:p,309:ne,310:Ne,311:217,312:Ce},{28:[1,370],127:371,128:[1,372]},n(at,[2,330],{124:373,125:374,126:C}),n(at,[2,57]),{44:375,87:h},n(Xe,[2,151],{241:376,242:[1,377]}),n(Lr,[2,153],{245:378,246:[1,379]}),{13:l,16:f,44:136,45:ce,55:133,67:132,68:134,77:131,82:G,87:h,172:135,224:fe,247:380,251:125,255:154,257:155,259:126,263:me,264:130,265:ye,266:137,267:139,268:re,269:xe,270:Re,271:Ie,273:he,274:be,275:146,276:V,277:P,278:149,279:N,280:A,283:I,285:q,291:150,294:H,295:U,296:X,297:Q,298:k,299:oe,300:se,301:Se,302:Me,303:Oe,304:ue,305:L,306:x,307:43,308:p,312:j,346:z,347:W,348:le,349:ae,350:De,351:Ve},{250:[1,381]},n(lr,[2,432]),n(lr,[2,433]),n(lr,[2,434]),n(lr,[2,435]),n(lr,[2,436]),n(lr,[2,437]),{250:[2,439]},n([47,48,193,242,246,250,272,290,341,342,343,344,345,346],[2,158],{253:382,254:383,255:384,257:385,263:[1,386],265:[1,387],297:Q,298:k,299:oe,300:se,301:Se,302:Me}),n(ie,[2,162],{261:388,262:389,39:ZE,338:ex}),n(_e,[2,164]),n(_e,[2,165]),n(_e,[2,166]),n(Ye,[2,95]),n(Ye,[2,96]),n(lr,[2,377],{177:392,325:[1,393]}),{48:[1,394]},n(Ye,[2,177]),{13:l,16:f,44:136,45:ce,46:395,55:133,67:132,68:134,77:131,82:G,87:h,172:135,224:fe,238:121,239:122,243:123,247:124,251:125,255:154,257:155,259:126,263:me,264:130,265:ye,266:137,267:139,268:re,269:xe,270:Re,271:Ie,273:he,274:be,275:146,276:V,277:P,278:149,279:N,280:A,283:I,285:q,291:150,294:H,295:U,296:X,297:Q,298:k,299:oe,300:se,301:Se,302:Me,303:Oe,304:ue,305:L,306:x,307:43,308:p,312:j,346:z,347:W,348:le,349:ae,350:De,351:Ve},{13:l,16:f,44:136,45:ce,46:396,55:133,67:132,68:134,77:131,82:G,87:h,172:135,224:fe,238:121,239:122,243:123,247:124,251:125,255:154,257:155,259:126,263:me,264:130,265:ye,266:137,267:139,268:re,269:xe,270:Re,271:Ie,273:he,274:be,275:146,276:V,277:P,278:149,279:N,280:A,283:I,285:q,291:150,294:H,295:U,296:X,297:Q,298:k,299:oe,300:se,301:Se,302:Me,303:Oe,304:ue,305:L,306:x,307:43,308:p,312:j,346:z,347:W,348:le,349:ae,350:De,351:Ve},{13:l,16:f,44:136,45:ce,46:397,55:133,67:132,68:134,77:131,82:G,87:h,172:135,224:fe,238:121,239:122,243:123,247:124,251:125,255:154,257:155,259:126,263:me,264:130,265:ye,266:137,267:139,268:re,269:xe,270:Re,271:Ie,273:he,274:be,275:146,276:V,277:P,278:149,279:N,280:A,283:I,285:q,291:150,294:H,295:U,296:X,297:Q,298:k,299:oe,300:se,301:Se,302:Me,303:Oe,304:ue,305:L,306:x,307:43,308:p,312:j,346:z,347:W,348:le,349:ae,350:De,351:Ve},{13:l,16:f,44:136,45:ce,46:398,55:133,67:132,68:134,77:131,82:G,87:h,172:135,224:fe,238:121,239:122,243:123,247:124,251:125,255:154,257:155,259:126,263:me,264:130,265:ye,266:137,267:139,268:re,269:xe,270:Re,271:Ie,273:he,274:be,275:146,276:V,277:P,278:149,279:N,280:A,283:I,285:q,291:150,294:H,295:U,296:X,297:Q,298:k,299:oe,300:se,301:Se,302:Me,303:Oe,304:ue,305:L,306:x,307:43,308:p,312:j,346:z,347:W,348:le,349:ae,350:De,351:Ve},{13:l,16:f,44:136,45:ce,46:399,55:133,67:132,68:134,77:131,82:G,87:h,172:135,224:fe,238:121,239:122,243:123,247:124,251:125,255:154,257:155,259:126,263:me,264:130,265:ye,266:137,267:139,268:re,269:xe,270:Re,271:Ie,273:he,274:be,275:146,276:V,277:P,278:149,279:N,280:A,283:I,285:q,291:150,294:H,295:U,296:X,297:Q,298:k,299:oe,300:se,301:Se,302:Me,303:Oe,304:ue,305:L,306:x,307:43,308:p,312:j,346:z,347:W,348:le,349:ae,350:De,351:Ve},n(Ye,[2,183]),n(Ye,[2,98]),n(lr,[2,381],{180:400}),{87:[1,401]},n(Ye,[2,185]),{13:l,16:f,44:136,45:ce,46:402,55:133,67:132,68:134,77:131,82:G,87:h,172:135,224:fe,238:121,239:122,243:123,247:124,251:125,255:154,257:155,259:126,263:me,264:130,265:ye,266:137,267:139,268:re,269:xe,270:Re,271:Ie,273:he,274:be,275:146,276:V,277:P,278:149,279:N,280:A,283:I,285:q,291:150,294:H,295:U,296:X,297:Q,298:k,299:oe,300:se,301:Se,302:Me,303:Oe,304:ue,305:L,306:x,307:43,308:p,312:j,346:z,347:W,348:le,349:ae,350:De,351:Ve},{29:$e,57:403},n(Qt,[2,193]),{13:l,16:f,55:404,307:43,308:p},{13:l,16:f,44:39,55:40,87:h,139:342,195:405,197:Wr,307:43,308:p},n(ea,[2,233]),n(ea,[2,234]),n(ea,[2,235]),n(SX,[2,459],{281:406,325:[1,407]}),n(lr,[2,463],{284:408,325:[1,409]}),n(lr,[2,465],{286:410,325:[1,411]}),{13:l,16:f,31:[1,412],55:414,82:G,171:413,172:415,173:416,174:_w,255:154,257:155,291:150,294:H,295:U,296:X,297:Q,298:k,299:oe,300:se,301:Se,302:Me,303:Oe,304:ue,305:L,306:x,307:43,308:p,312:gw},{31:[1,419],89:[1,420]},{29:[1,421]},n(Ar,[2,302]),n(Kt,[2,367],{167:422}),n(mn,[2,369],{168:423}),{48:[1,424],87:[1,425]},n(Ar,[2,371]),n(Un,[2,122]),n(Un,[2,417]),n(Un,[2,413]),n(Un,[2,414]),n(Un,[2,415]),n(Er,[2,125]),n(Er,[2,127]),n(Er,[2,128]),n(OX,[2,420],{227:426}),n(Er,[2,130]),{13:l,16:f,55:194,197:Ze,223:427,307:43,308:p},{48:[1,428]},n(ta,[2,289],{61:429,80:430,81:[1,431],83:[1,432]}),n(Nf,[2,288]),{64:[1,433]},n(J,[2,29],{307:43,267:139,275:146,278:149,77:320,67:321,68:322,55:323,79:434,13:l,16:f,45:ce,268:re,269:xe,270:Re,271:Ie,273:he,274:be,276:V,277:P,279:N,280:A,283:I,285:q,308:p,346:z,347:W,348:le,349:ae,350:De,351:Ve}),n(AX,[2,293]),n(tx,[2,92]),n(tx,[2,93]),n(tx,[2,94]),{45:ve,89:We,176:269},{31:[1,435]},{31:[1,436]},{19:437,28:g,29:T,56:85},{19:438,28:g,29:T,56:85},n(Nl,[2,355],{149:439}),n(Nl,[2,354]),{13:l,16:f,44:215,45:mw,55:220,82:G,87:h,89:ft,156:440,172:221,185:441,203:442,231:vw,236:216,237:222,255:154,257:155,291:150,294:H,295:U,296:X,297:Q,298:k,299:oe,300:se,301:Se,302:Me,303:Oe,304:ue,305:L,306:x,307:43,308:p,309:ne,310:Ne,311:217,312:Ce},n(F,[2,19]),n(ta,[2,21]),{13:l,16:f,44:450,45:EX,55:323,65:445,66:446,67:447,68:448,87:h,267:139,268:re,269:xe,270:Re,271:Ie,273:he,274:be,275:146,276:V,277:P,278:149,279:N,280:A,283:I,285:q,307:43,308:p,346:z,347:W,348:le,349:ae,350:De,351:Ve},n(Mr,[2,8]),{31:[1,451]},{31:[2,258]},{31:[2,101]},n(S,[2,386],{31:[2,388]}),n(_T,[2,102]),n(jl,[2,391],{191:452}),n(S,[2,395],{196:453,198:454}),n(S,[2,108]),n(S,[2,109]),n(_T,[2,103]),n(_T,[2,104]),n(_T,[2,390]),{13:l,16:f,44:215,45:ke,48:[1,455],55:220,82:G,87:h,89:ft,172:221,185:351,187:350,200:456,231:te,234:349,236:216,237:222,255:154,257:155,291:150,294:H,295:U,296:X,297:Q,298:k,299:oe,300:se,301:Se,302:Me,303:Oe,304:ue,305:L,306:x,307:43,308:p,309:ne,310:Ne,311:217,312:Ce},n(Tw,[2,424]),n(xX,[2,136]),n(xX,[2,137]),n(rx,[2,140]),{232:[1,457]},{13:l,16:f,44:39,55:40,87:h,139:342,195:458,197:Wr,307:43,308:p},n(ea,[2,219]),n(ea,[2,220]),n(ea,[2,221]),n(ea,[2,222]),n(ea,[2,223]),n(Mr,[2,10]),n(Je,[2,46]),n(Je,[2,314]),{112:Tt,122:459},n(Je,[2,62]),n(E,Ue,{133:242,108:460,112:ht,132:He}),n(wX,[2,61]),n(Je,[2,49]),n([6,28,126,128,193],[2,65]),{31:[2,66],112:[1,462],138:461},n(Dl,[2,351],{146:463,335:[1,464]}),{29:$e,57:465},n(at,[2,329]),n(E,[2,332],{129:466,327:[1,467]}),n(at,[2,55]),n(at,[2,331]),{48:[1,468]},n(Lr,[2,429]),{13:l,16:f,44:136,45:ce,55:133,67:132,68:134,77:131,82:G,87:h,172:135,224:fe,239:469,243:123,247:124,251:125,255:154,257:155,259:126,263:me,264:130,265:ye,266:137,267:139,268:re,269:xe,270:Re,271:Ie,273:he,274:be,275:146,276:V,277:P,278:149,279:N,280:A,283:I,285:q,291:150,294:H,295:U,296:X,297:Q,298:k,299:oe,300:se,301:Se,302:Me,303:Oe,304:ue,305:L,306:x,307:43,308:p,312:j,346:z,347:W,348:le,349:ae,350:De,351:Ve},n(Ge,[2,431]),{13:l,16:f,44:136,45:ce,55:133,67:132,68:134,77:131,82:G,87:h,172:135,224:fe,243:470,247:124,251:125,255:154,257:155,259:126,263:me,264:130,265:ye,266:137,267:139,268:re,269:xe,270:Re,271:Ie,273:he,274:be,275:146,276:V,277:P,278:149,279:N,280:A,283:I,285:q,291:150,294:H,295:U,296:X,297:Q,298:k,299:oe,300:se,301:Se,302:Me,303:Oe,304:ue,305:L,306:x,307:43,308:p,312:j,346:z,347:W,348:le,349:ae,350:De,351:Ve},n(Ge,[2,156]),{45:mt,89:nr,179:471},n(ie,[2,441]),{13:l,16:f,44:136,45:ce,55:133,67:132,68:134,77:131,82:G,87:h,172:135,224:fe,251:472,255:154,257:155,259:126,263:me,264:130,265:ye,266:137,267:139,268:re,269:xe,270:Re,271:Ie,273:he,274:be,275:146,276:V,277:P,278:149,279:N,280:A,283:I,285:q,291:150,294:H,295:U,296:X,297:Q,298:k,299:oe,300:se,301:Se,302:Me,303:Oe,304:ue,305:L,306:x,307:43,308:p,312:j,346:z,347:W,348:le,349:ae,350:De,351:Ve},n(_e,[2,444],{256:473}),n(_e,[2,446],{258:474}),n(lr,[2,442]),n(lr,[2,443]),n(_e,[2,449]),{13:l,16:f,44:136,45:ce,55:133,67:132,68:134,77:131,82:G,87:h,172:135,224:fe,255:154,257:155,259:475,263:me,264:130,265:ye,266:137,267:139,268:re,269:xe,270:Re,271:Ie,273:he,274:be,275:146,276:V,277:P,278:149,279:N,280:A,283:I,285:q,291:150,294:H,295:U,296:X,297:Q,298:k,299:oe,300:se,301:Se,302:Me,303:Oe,304:ue,305:L,306:x,307:43,308:p,312:j,346:z,347:W,348:le,349:ae,350:De,351:Ve},n(lr,[2,450]),n(lr,[2,451]),n(lr,[2,379],{178:476}),n(lr,[2,378]),n([6,13,16,29,31,39,45,47,48,73,76,78,81,82,83,85,87,89,112,159,160,161,163,164,193,231,242,246,250,263,265,268,269,270,271,272,273,274,276,277,279,280,283,285,290,294,295,296,297,298,299,300,301,302,303,304,305,306,308,309,310,312,335,338,341,342,343,344,345,346,347,348,349,350,351],[2,175]),{48:[1,477]},{48:[1,478]},{272:[1,479]},{272:[1,480]},{272:[1,481]},{13:l,16:f,44:136,45:ce,46:482,55:133,67:132,68:134,77:131,82:G,87:h,172:135,224:fe,238:121,239:122,243:123,247:124,251:125,255:154,257:155,259:126,263:me,264:130,265:ye,266:137,267:139,268:re,269:xe,270:Re,271:Ie,273:he,274:be,275:146,276:V,277:P,278:149,279:N,280:A,283:I,285:q,291:150,294:H,295:U,296:X,297:Q,298:k,299:oe,300:se,301:Se,302:Me,303:Oe,304:ue,305:L,306:x,307:43,308:p,312:j,346:z,347:W,348:le,349:ae,350:De,351:Ve},{48:[1,483]},{48:[1,484]},n(Ye,[2,187]),n(Qt,[2,194]),{13:l,16:f,44:39,55:40,82:G,87:h,139:289,172:291,255:154,257:155,266:290,291:150,294:H,295:U,296:X,297:Q,298:k,299:oe,300:se,301:Se,302:Me,303:Oe,304:ue,305:L,306:x,307:43,308:p,312:j,320:485},{13:l,16:f,39:[1,487],44:136,45:ce,46:488,55:133,67:132,68:134,77:131,82:G,87:h,172:135,224:fe,238:121,239:122,243:123,247:124,251:125,255:154,257:155,259:126,263:me,264:130,265:ye,266:137,267:139,268:re,269:xe,270:Re,271:Ie,273:he,274:be,275:146,276:V,277:P,278:149,279:N,280:A,282:486,283:I,285:q,291:150,294:H,295:U,296:X,297:Q,298:k,299:oe,300:se,301:Se,302:Me,303:Oe,304:ue,305:L,306:x,307:43,308:p,312:j,346:z,347:W,348:le,349:ae,350:De,351:Ve},n(SX,[2,460]),{13:l,16:f,44:136,45:ce,46:489,55:133,67:132,68:134,77:131,82:G,87:h,172:135,224:fe,238:121,239:122,243:123,247:124,251:125,255:154,257:155,259:126,263:me,264:130,265:ye,266:137,267:139,268:re,269:xe,270:Re,271:Ie,273:he,274:be,275:146,276:V,277:P,278:149,279:N,280:A,283:I,285:q,291:150,294:H,295:U,296:X,297:Q,298:k,299:oe,300:se,301:Se,302:Me,303:Oe,304:ue,305:L,306:x,307:43,308:p,312:j,346:z,347:W,348:le,349:ae,350:De,351:Ve},n(lr,[2,464]),{13:l,16:f,44:136,45:ce,46:490,55:133,67:132,68:134,77:131,82:G,87:h,172:135,224:fe,238:121,239:122,243:123,247:124,251:125,255:154,257:155,259:126,263:me,264:130,265:ye,266:137,267:139,268:re,269:xe,270:Re,271:Ie,273:he,274:be,275:146,276:V,277:P,278:149,279:N,280:A,283:I,285:q,291:150,294:H,295:U,296:X,297:Q,298:k,299:oe,300:se,301:Se,302:Me,303:Oe,304:ue,305:L,306:x,307:43,308:p,312:j,346:z,347:W,348:le,349:ae,350:De,351:Ve},n(lr,[2,466]),n(Be,[2,40]),n(Kt,[2,298]),n(gT,[2,87]),n(gT,[2,88]),n(gT,[2,89]),n(gT,[2,90]),{13:l,16:f,55:492,82:G,172:493,255:154,257:155,291:150,294:H,295:U,296:X,297:Q,298:k,299:oe,300:se,301:Se,302:Me,303:Oe,304:ue,305:L,306:x,307:43,308:p,311:494,312:Ce,315:491},n(Be,[2,41]),n(mn,[2,300]),n(mT,[2,303],{92:495}),{13:l,16:f,31:[1,496],55:414,82:G,171:497,172:415,173:416,174:_w,255:154,257:155,291:150,294:H,295:U,296:X,297:Q,298:k,299:oe,300:se,301:Se,302:Me,303:Oe,304:ue,305:L,306:x,307:43,308:p,312:gw},{31:[1,498],89:[1,499]},{29:[1,500]},n(Ar,[2,372]),{13:l,16:f,48:[2,422],55:194,197:Ze,223:312,226:502,228:501,229:Il,307:43,308:p},n(Er,[2,131]),n(Er,[2,126]),n(ta,[2,22]),n(ta,[2,290]),{82:[1,503]},{82:[1,504]},{13:l,16:f,44:510,45:ce,55:323,67:321,68:322,74:505,75:506,76:RX,77:320,78:FX,79:509,87:h,267:139,268:re,269:xe,270:Re,271:Ie,273:he,274:be,275:146,276:V,277:P,278:149,279:N,280:A,283:I,285:q,307:43,308:p,346:z,347:W,348:le,349:ae,350:De,351:Ve},n(AX,[2,294]),n(IX,[2,69]),n(IX,[2,70]),n(J,we,{59:197,69:198,20:511,70:Ee}),n(Pe,et,{58:205,62:206,23:512,63:rt}),{29:[2,375],31:[2,71],84:522,85:a,112:[1,518],150:513,151:514,158:515,159:[1,516],160:[1,517],161:[1,519],163:[1,520],164:[1,521],175:523},n(Nl,[2,363],{157:524,335:[1,525]}),n(c,e,{215:10,202:526,205:527,208:528,214:529,44:530,87:h}),n(ww,[2,399],{215:10,205:527,208:528,214:529,44:530,204:531,202:532,13:e,16:e,45:e,197:e,224:e,229:e,308:e,87:h}),{13:l,16:f,44:215,45:mw,55:220,82:G,87:h,89:ft,172:221,185:351,203:536,212:534,231:vw,233:533,234:535,236:216,237:222,255:154,257:155,291:150,294:H,295:U,296:X,297:Q,298:k,299:oe,300:se,301:Se,302:Me,303:Oe,304:ue,305:L,306:x,307:43,308:p,309:ne,310:Ne,311:217,312:Ce},n(c,e,{215:10,205:527,208:528,214:529,44:530,202:537,87:h}),n(Pe,[2,23],{307:43,267:139,275:146,278:149,55:323,67:447,68:448,44:450,66:538,13:l,16:f,45:EX,87:h,268:re,269:xe,270:Re,271:Ie,273:he,274:be,276:V,277:P,279:N,280:A,283:I,285:q,308:p,346:z,347:W,348:le,349:ae,350:De,351:Ve}),n(Ll,[2,291]),n(Ll,[2,24]),n(Ll,[2,25]),{13:l,16:f,44:136,45:ce,46:539,55:133,67:132,68:134,77:131,82:G,87:h,172:135,224:fe,238:121,239:122,243:123,247:124,251:125,255:154,257:155,259:126,263:me,264:130,265:ye,266:137,267:139,268:re,269:xe,270:Re,271:Ie,273:he,274:be,275:146,276:V,277:P,278:149,279:N,280:A,283:I,285:q,291:150,294:H,295:U,296:X,297:Q,298:k,299:oe,300:se,301:Se,302:Me,303:Oe,304:ue,305:L,306:x,307:43,308:p,312:j,346:z,347:W,348:le,349:ae,350:De,351:Ve},n(Ll,[2,28]),n(Pe,et,{58:205,62:206,23:540,63:rt}),n([31,112,232,318,335],[2,105],{192:541,193:[1,542]}),n(jl,[2,107]),{13:l,16:f,44:215,45:ke,55:220,82:G,87:h,89:ft,172:221,185:351,187:350,199:543,200:544,231:te,234:349,236:216,237:222,255:154,257:155,291:150,294:H,295:U,296:X,297:Q,298:k,299:oe,300:se,301:Se,302:Me,303:Oe,304:ue,305:L,306:x,307:43,308:p,309:ne,310:Ne,311:217,312:Ce},n(PX,[2,132]),n(Tw,[2,425]),n(PX,[2,133]),{13:l,16:f,44:354,55:355,82:G,87:h,172:357,237:356,255:154,257:155,291:150,294:H,295:U,296:X,297:Q,298:k,299:oe,300:se,301:Se,302:Me,303:Oe,304:ue,305:L,306:x,307:43,308:p,309:ne,310:Ne,311:358,312:Ce,313:545},n(Je,[2,54]),n(Je,[2,48]),n(Dl,[2,342]),{13:l,16:f,44:39,55:40,87:h,139:546,307:43,308:p},n(Dl,[2,68]),n(S,[2,350],{31:DX,112:DX}),n(Je,[2,53]),{13:l,16:f,55:547,307:43,308:p},n(E,[2,333]),n(ee,[2,16]),n(Lr,[2,152]),n(Ge,[2,154]),n(Ge,[2,157]),n(ie,[2,159]),n(ie,[2,160],{262:389,261:548,39:ZE,338:ex}),n(ie,[2,161],{262:389,261:549,39:ZE,338:ex}),n(_e,[2,163]),{13:l,16:f,44:136,45:ce,46:550,55:133,67:132,68:134,77:131,82:G,87:h,172:135,224:fe,238:121,239:122,243:123,247:124,251:125,255:154,257:155,259:126,263:me,264:130,265:ye,266:137,267:139,268:re,269:xe,270:Re,271:Ie,273:he,274:be,275:146,276:V,277:P,278:149,279:N,280:A,283:I,285:q,291:150,294:H,295:U,296:X,297:Q,298:k,299:oe,300:se,301:Se,302:Me,303:Oe,304:ue,305:L,306:x,307:43,308:p,312:j,346:z,347:W,348:le,349:ae,350:De,351:Ve},n(Ye,[2,178]),n(Ye,[2,179]),{13:l,16:f,44:136,45:ce,46:551,55:133,67:132,68:134,77:131,82:G,87:h,172:135,224:fe,238:121,239:122,243:123,247:124,251:125,255:154,257:155,259:126,263:me,264:130,265:ye,266:137,267:139,268:re,269:xe,270:Re,271:Ie,273:he,274:be,275:146,276:V,277:P,278:149,279:N,280:A,283:I,285:q,291:150,294:H,295:U,296:X,297:Q,298:k,299:oe,300:se,301:Se,302:Me,303:Oe,304:ue,305:L,306:x,307:43,308:p,312:j,346:z,347:W,348:le,349:ae,350:De,351:Ve},{13:l,16:f,44:136,45:ce,46:552,55:133,67:132,68:134,77:131,82:G,87:h,172:135,224:fe,238:121,239:122,243:123,247:124,251:125,255:154,257:155,259:126,263:me,264:130,265:ye,266:137,267:139,268:re,269:xe,270:Re,271:Ie,273:he,274:be,275:146,276:V,277:P,278:149,279:N,280:A,283:I,285:q,291:150,294:H,295:U,296:X,297:Q,298:k,299:oe,300:se,301:Se,302:Me,303:Oe,304:ue,305:L,306:x,307:43,308:p,312:j,346:z,347:W,348:le,349:ae,350:De,351:Ve},{13:l,16:f,44:136,45:ce,46:553,55:133,67:132,68:134,77:131,82:G,87:h,172:135,224:fe,238:121,239:122,243:123,247:124,251:125,255:154,257:155,259:126,263:me,264:130,265:ye,266:137,267:139,268:re,269:xe,270:Re,271:Ie,273:he,274:be,275:146,276:V,277:P,278:149,279:N,280:A,283:I,285:q,291:150,294:H,295:U,296:X,297:Q,298:k,299:oe,300:se,301:Se,302:Me,303:Oe,304:ue,305:L,306:x,307:43,308:p,312:j,346:z,347:W,348:le,349:ae,350:De,351:Ve},{48:[1,554],272:[1,555]},n(Ye,[2,184]),n(Ye,[2,186]),{314:[1,556]},{48:[1,557]},{48:[2,461]},{48:[2,462]},{48:[1,558]},{48:[2,467],193:[1,561],287:559,288:560},{13:l,16:f,55:194,197:Ze,223:562,307:43,308:p},n(nx,[2,224]),n(nx,[2,225]),n(nx,[2,226]),{31:[1,563],45:NX,94:564},n(Be,[2,84]),n(Kt,[2,368]),n(Be,[2,85]),n(mn,[2,370]),n(mT,[2,373],{170:566}),{48:[1,567]},{48:[2,423],337:[1,568]},n(ta,[2,35],{83:[1,569]}),n(ta,[2,36],{81:[1,570]}),n(Nf,[2,30],{307:43,267:139,275:146,278:149,77:320,67:321,68:322,55:323,79:509,44:510,75:571,13:l,16:f,45:ce,76:RX,78:FX,87:h,268:re,269:xe,270:Re,271:Ie,273:he,274:be,276:V,277:P,279:N,280:A,283:I,285:q,308:p,346:z,347:W,348:le,349:ae,350:De,351:Ve}),n(jf,[2,295]),{45:ce,77:572},{45:ce,77:573},n(jf,[2,33]),n(jf,[2,34]),{31:[2,275],50:574,84:575,85:a},{31:[2,277],51:576,84:577,85:a},n(Nl,[2,356]),n(jX,[2,357],{152:578,335:[1,579]}),n(Oi,[2,74]),{29:$e,57:580},{29:$e,57:581},{13:l,16:f,44:39,55:40,87:h,139:582,307:43,308:p},n(LX,[2,365],{162:583,328:[1,584]}),{13:l,16:f,45:ce,55:323,67:321,68:322,77:320,79:585,267:139,268:re,269:xe,270:Re,271:Ie,273:he,274:be,275:146,276:V,277:P,278:149,279:N,280:A,283:I,285:q,307:43,308:p,346:z,347:W,348:le,349:ae,350:De,351:Ve},{45:[1,586]},n(Oi,[2,81]),{29:$e,57:587},n(Nl,[2,73]),n(S,[2,362],{29:Ai,31:Ai,85:Ai,112:Ai,159:Ai,160:Ai,161:Ai,163:Ai,164:Ai}),n(ww,[2,112]),n(Lf,[2,401],{206:588}),n(S,[2,405],{209:589,210:590}),n(S,[2,403]),n(S,[2,404]),n(ww,[2,113]),n(ww,[2,400]),{13:l,16:f,44:215,45:mw,48:[1,591],55:220,82:G,87:h,89:ft,172:221,185:351,203:536,212:592,231:vw,234:535,236:216,237:222,255:154,257:155,291:150,294:H,295:U,296:X,297:Q,298:k,299:oe,300:se,301:Se,302:Me,303:Oe,304:ue,305:L,306:x,307:43,308:p,309:ne,310:Ne,311:217,312:Ce},n(Tw,[2,426]),n(rx,[2,138]),n(rx,[2,139]),{232:[1,593]},n(Ll,[2,292]),{47:[1,595],48:[1,594]},n(Mr,[2,9]),n(jl,[2,392]),n(jl,[2,393],{44:39,55:40,307:43,195:341,139:342,194:596,190:597,13:l,16:f,87:h,197:Wr,308:p}),n(jl,[2,110],{272:[1,598]}),n(Sw,[2,397],{201:599,316:600,317:[1,601]}),{314:[1,602]},{29:[1,603]},n(at,[2,58]),n(_e,[2,445]),n(_e,[2,447]),{48:[1,604],272:[1,605]},{48:[1,606]},{272:[1,607]},{272:[1,608]},n(Ye,[2,99]),n(lr,[2,382]),n([13,16,39,47,48,87,193,197,242,246,250,263,265,272,290,297,298,299,300,301,302,308,314,338,341,342,343,344,345,346],[2,232]),n(Ye,[2,188]),n(Ye,[2,189]),{48:[1,609]},{48:[2,468]},{289:[1,610]},{13:l,16:f,55:492,82:G,172:493,255:154,257:155,291:150,294:H,295:U,296:X,297:Q,298:k,299:oe,300:se,301:Se,302:Me,303:Oe,304:ue,305:L,306:x,307:43,308:p,311:494,312:Ce,315:611},n(Be,[2,42]),n(mT,[2,304]),{13:l,16:f,55:414,82:G,95:612,171:613,172:415,173:416,174:_w,255:154,257:155,291:150,294:H,295:U,296:X,297:Q,298:k,299:oe,300:se,301:Se,302:Me,303:Oe,304:ue,305:L,306:x,307:43,308:p,312:gw},{31:[1,614],45:NX,94:615},n(Er,[2,129]),n(OX,[2,421]),{82:[1,616]},{82:[1,617]},n(jf,[2,296]),n(jf,[2,31]),n(jf,[2,32]),{31:[2,17]},{31:[2,276]},{31:[2,18]},{31:[2,278]},n(S,Pl,{155:330,153:618,154:619,29:Ei,31:Ei,85:Ei,112:Ei,159:Ei,160:Ei,161:Ei,163:Ei,164:Ei}),n(jX,[2,358]),n(Oi,[2,75]),n(Oi,[2,76]),{29:$e,57:620},{13:l,16:f,44:39,55:40,87:h,139:621,307:43,308:p},n(LX,[2,366]),n(Oi,[2,79]),{13:l,16:f,44:136,45:ce,46:622,55:133,67:132,68:134,77:131,82:G,87:h,172:135,224:fe,238:121,239:122,243:123,247:124,251:125,255:154,257:155,259:126,263:me,264:130,265:ye,266:137,267:139,268:re,269:xe,270:Re,271:Ie,273:he,274:be,275:146,276:V,277:P,278:149,279:N,280:A,283:I,285:q,291:150,294:H,295:U,296:X,297:Q,298:k,299:oe,300:se,301:Se,302:Me,303:Oe,304:ue,305:L,306:x,307:43,308:p,312:j,346:z,347:W,348:le,349:ae,350:De,351:Ve},n(Oi,[2,91],{336:[1,623]}),n([29,31,85,112,159,160,161,163,164,232,318,335],[2,114],{207:624,193:[1,625]}),n(Lf,[2,117]),{13:l,16:f,44:215,45:mw,55:220,82:G,87:h,89:ft,172:221,185:351,203:536,211:626,212:627,231:vw,234:535,236:216,237:222,255:154,257:155,291:150,294:H,295:U,296:X,297:Q,298:k,299:oe,300:se,301:Se,302:Me,303:Oe,304:ue,305:L,306:x,307:43,308:p,309:ne,310:Ne,311:217,312:Ce},n(Si,[2,134]),n(Tw,[2,427]),n(Si,[2,135]),n(Ll,[2,26]),{44:628,87:h},n(jl,[2,106]),n(jl,[2,394]),n(S,[2,396]),n(Sw,[2,111]),n(Sw,[2,398]),{13:l,16:f,44:39,55:40,87:h,139:342,186:629,190:340,195:341,197:Wr,307:43,308:p},n(YE,[2,217]),n(S,tt,{144:248,140:630,143:631,31:[2,343]}),n(Ye,[2,97]),n(lr,[2,380]),n(Ye,[2,180]),{13:l,16:f,44:136,45:ce,46:632,55:133,67:132,68:134,77:131,82:G,87:h,172:135,224:fe,238:121,239:122,243:123,247:124,251:125,255:154,257:155,259:126,263:me,264:130,265:ye,266:137,267:139,268:re,269:xe,270:Re,271:Ie,273:he,274:be,275:146,276:V,277:P,278:149,279:N,280:A,283:I,285:q,291:150,294:H,295:U,296:X,297:Q,298:k,299:oe,300:se,301:Se,302:Me,303:Oe,304:ue,305:L,306:x,307:43,308:p,312:j,346:z,347:W,348:le,349:ae,350:De,351:Ve},{13:l,16:f,44:136,45:ce,46:633,55:133,67:132,68:134,77:131,82:G,87:h,172:135,224:fe,238:121,239:122,243:123,247:124,251:125,255:154,257:155,259:126,263:me,264:130,265:ye,266:137,267:139,268:re,269:xe,270:Re,271:Ie,273:he,274:be,275:146,276:V,277:P,278:149,279:N,280:A,283:I,285:q,291:150,294:H,295:U,296:X,297:Q,298:k,299:oe,300:se,301:Se,302:Me,303:Oe,304:ue,305:L,306:x,307:43,308:p,312:j,346:z,347:W,348:le,349:ae,350:De,351:Ve},n(Ye,[2,190]),{290:[1,634]},{314:[1,635]},{13:l,16:f,48:[1,636],55:414,82:G,171:637,172:415,173:416,174:_w,255:154,257:155,291:150,294:H,295:U,296:X,297:Q,298:k,299:oe,300:se,301:Se,302:Me,303:Oe,304:ue,305:L,306:x,307:43,308:p,312:gw},n(MX,[2,305]),n(Be,[2,86]),n(mT,[2,374]),n(ta,[2,37]),n(ta,[2,38]),n(Nl,[2,72]),n(Nl,[2,360]),n(Oi,[2,77]),{29:$e,57:638},{47:[1,639]},{29:[2,376]},n(Lf,[2,402]),n(Lf,[2,115],{215:10,208:528,214:529,44:530,205:640,13:e,16:e,45:e,197:e,224:e,229:e,308:e,87:h}),n(Lf,[2,118],{272:[1,641]}),n(Ow,[2,407],{213:642,319:643,317:[1,644]}),{48:[1,645]},{318:[1,646]},{31:[1,647]},{31:[2,344]},{48:[1,648]},{48:[1,649]},{291:650,303:Oe,304:ue,305:L,306:x},n(gT,[2,218]),n(mT,[2,44]),n(MX,[2,306]),n(Oi,[2,78]),{44:651,87:h},n(Lf,[2,116]),n(S,[2,406]),n(Ow,[2,119]),n(Ow,[2,408]),n(c,e,{215:10,205:527,208:528,214:529,44:530,202:652,87:h}),n(Ll,[2,27]),n(Sw,[2,230]),n(qX,[2,345],{141:653,335:[1,654]}),n(Ye,[2,181]),n(Ye,[2,182]),{48:[2,191]},{48:[1,655]},{318:[1,656]},n(S,tt,{144:248,142:657,143:658,31:CX,112:CX}),n(qX,[2,346]),n(Oi,[2,80]),n(Ow,[2,231]),n(Dl,[2,67]),n(Dl,[2,348])],defaultActions:{5:[2,240],6:[2,241],7:[2,242],9:[2,239],24:[2,1],25:[2,2],26:[2,244],87:[2,282],94:[2,384],100:[2,45],109:[2,325],166:[2,458],263:[2,439],336:[2,258],337:[2,101],487:[2,461],488:[2,462],560:[2,468],574:[2,17],575:[2,276],576:[2,18],577:[2,278],623:[2,376],631:[2,344],650:[2,191]},parseError:function(Ae,Le){if(Le.recoverable)this.trace(Ae);else{var ze=new Error(Ae);throw ze.hash=Le,ze}},parse:function(Ae){var Le=this,ze=[0],ut=[null],ct=[],K=this.table,dn="",Y=0,ra=0,Rw=2,Fw=1,Iw=ct.slice.call(arguments,1),sr=Object.create(this.lexer),ai={yy:{}};for(var Bl in this.yy)Object.prototype.hasOwnProperty.call(this.yy,Bl)&&(ai.yy[Bl]=this.yy[Bl]);sr.setInput(Ae,ai.yy),ai.yy.lexer=sr,ai.yy.parser=this,typeof sr.yylloc>"u"&&(sr.yylloc={});var Uf=sr.yylloc;ct.push(Uf);var bx=sr.options&&sr.options.ranges;typeof ai.yy.parseError=="function"?this.parseError=ai.yy.parseError:this.parseError=Object.getPrototypeOf(this).parseError;for(var Pw=function(){var Vf;return Vf=sr.lex()||Fw,typeof Vf!="number"&&(Vf=Le.symbols_[Vf]||Vf),Vf},vt,jt,yt,Rr,Fr={},Dw,Ri,kX,Nw;;){if(jt=ze[ze.length-1],this.defaultActions[jt]?yt=this.defaultActions[jt]:((vt===null||typeof vt>"u")&&(vt=Pw()),yt=K[jt]&&K[jt][vt]),typeof yt>"u"||!yt.length||!yt[0]){var _x="";Nw=[];for(Dw in K[jt])this.terminals_[Dw]&&Dw>Rw&&Nw.push("'"+this.terminals_[Dw]+"'");sr.showPosition?_x="Parse error on line "+(Y+1)+`:
`+sr.showPosition()+`
Expecting `+Nw.join(", ")+", got '"+(this.terminals_[vt]||vt)+"'":_x="Parse error on line "+(Y+1)+": Unexpected "+(vt==Fw?"end of input":"'"+(this.terminals_[vt]||vt)+"'"),this.parseError(_x,{text:sr.match,token:this.terminals_[vt]||vt,line:sr.yylineno,loc:Uf,expected:Nw})}if(yt[0]instanceof Array&&yt.length>1)throw new Error("Parse Error: multiple actions possible at state: "+jt+", token: "+vt);switch(yt[0]){case 1:ze.push(vt),ut.push(sr.yytext),ct.push(sr.yylloc),ze.push(yt[1]),vt=null,ra=sr.yyleng,dn=sr.yytext,Y=sr.yylineno,Uf=sr.yylloc;break;case 2:if(Ri=this.productions_[yt[1]][1],Fr.$=ut[ut.length-Ri],Fr._$={first_line:ct[ct.length-(Ri||1)].first_line,last_line:ct[ct.length-1].last_line,first_column:ct[ct.length-(Ri||1)].first_column,last_column:ct[ct.length-1].last_column},bx&&(Fr._$.range=[ct[ct.length-(Ri||1)].range[0],ct[ct.length-1].range[1]]),Rr=this.performAction.apply(Fr,[dn,ra,Y,ai.yy,yt[1],ut,ct].concat(Iw)),typeof Rr<"u")return Rr;Ri&&(ze=ze.slice(0,-1*Ri*2),ut=ut.slice(0,-1*Ri),ct=ct.slice(0,-1*Ri)),ze.push(this.productions_[yt[1]][0]),ut.push(Fr.$),ct.push(Fr._$),kX=K[ze[ze.length-2]][ze[ze.length-1]],ze.push(kX);break;case 3:return!0}}return!0}},Aw=h6().Wildcard,Ew="http://www.w3.org/1999/02/22-rdf-syntax-ns#",Mfe=Ew+"type",qfe=Ew+"first",Cfe=Ew+"rest",BX=Ew+"nil",xw="http://www.w3.org/2001/XMLSchema#",$X=xw+"integer",UX=xw+"decimal",VX=xw+"double",Bfe=xw+"boolean",Ml="",QX="",HX="";function Xr(Fe){return Fe.toLowerCase()}function ql(Fe,Ae){return Fe.push(Ae),Fe}function Mf(Fe,Ae){return Fe.push.apply(Fe,Ae),Fe}function or(Fe){Fe||(Fe={});for(var Ae=1,Le=arguments.length,ze;Ae<Le&&(ze=arguments[Ae]||{});Ae++)for(var ut in ze)Fe[ut]=ze[ut];return Fe}function ni(){for(var Fe=[],Ae=0,Le=arguments.length;Ae<Le;Ae++)Fe=Fe.concat.apply(Fe,arguments[Ae]);return Fe}function vT(Fe){if(Fe[0]==="<"&&(Fe=Fe.substring(1,Fe.length-1)),/^[a-z][a-z0-9.+-]*:/i.test(Fe))return Fe;if(!St.base)throw new Error("Cannot resolve relative IRI "+Fe+" because no base IRI was set.");switch(Ml!==St.base&&(Ml=St.base,QX=Ml.replace(/[^\/:]*$/,""),HX=Ml.match(/^(?:[a-z]+:\/*)?[^\/]*/)[0]),Fe[0]){case void 0:return Ml;case"#":return Ml+Fe;case"?":return Ml.replace(/(?:\?.*)?$/,Fe);case"/":return HX+Fe;default:return QX+Fe}}function ax(Fe){if(Fe){var Ae=Fe[0];if(Ae==="?"||Ae==="$")return St.factory.variable(Fe.substr(1))}return Fe}function xr(Fe,Ae){return{type:"operation",operator:Fe,args:Ae||[]}}function qf(Fe,Ae){var Le={expression:Fe==="*"?new Aw:Fe};if(Ae)for(var ze in Ae)Le[ze]=Ae[ze];return Le}function Cf(Fe,Ae){return{type:"path",pathType:Fe,items:Ae}}function ux(Fe,Ae){for(var Le=0,ze=Ae.length,ut;Le<ze&&(ut=Ae[Le]);Le++)Fe=xr(ut[0],[Fe,ut[1]]);return Fe}function Cl(Fe,Ae){var Le=[],ze=[],ut=Fe.length,ct,K={};if(!ut)return null;for(var dn=0;dn<ut&&(ct=Fe[dn]);dn++)(ct.named?ze:Le).push(ct.iri);return K[Ae||"from"]={default:Le,named:ze},K}function Bf(Fe){return parseInt(Fe,10)}function ox(Fe){return Fe.type==="group"&&Fe.patterns.length===1?Fe.patterns[0]:Fe}function ii(Fe,Ae){return Ae&&Ae.termType!=="NamedNode"&&(Ae=St.factory.namedNode(Ae)),St.factory.literal(Fe,Ae)}function $fe(Fe,Ae){return St.factory.literal(Fe,Ae)}function sx(Fe,Ae,Le){if(!("termType"in Ae))throw new Error("Nested triples cannot contain paths");return St.factory.quad(Fe,Ae,Le)}function xi(Fe,Ae,Le,ze){var ut={};return Fe!=null&&(ut.subject=Fe),Ae!=null&&(ut.predicate=Ae),Le!=null&&(ut.object=Le),ze!=null&&(ut.annotations=ze),ut}function TT(Fe){return typeof Fe=="string"?Fe.startsWith("e_")?St.factory.blankNode(Fe):St.factory.blankNode("e_"+Fe):St.factory.blankNode("g_"+GX++)}var GX=0;St._resetBlanks=function(){GX=0};var Ufe=/\\u([a-fA-F0-9]{4})|\\U([a-fA-F0-9]{8})|\\(.)/g,Vfe={"\\":"\\","'":"'",'"':'"',t:"	",b:"\b",n:`
`,r:"\r",f:"\f"},Qfe=/[\uD800-\uDBFF]([^\uDC00-\uDFFF]|$)/,cx=String.fromCharCode;function zX(Fe,Ae){Fe=Fe.substring(Ae,Fe.length-Ae);try{Fe=Fe.replace(Ufe,function(Le,ze,ut,ct){var K;if(ze){if(K=parseInt(ze,16),isNaN(K))throw new Error;return cx(K)}else if(ut){if(K=parseInt(ut,16),isNaN(K))throw new Error;return K<65535?cx(K):cx(55296+((K-=65536)>>10),56320+(K&1023))}else{var dn=Vfe[ct];if(!dn)throw new Error;return dn}})}catch{return""}if(Qfe.exec(Fe))throw new Error("Invalid unicode codepoint of surrogate pair without corresponding codepoint in "+Fe);return Fe}function Hfe(Fe){var Ae=TT(),Le=Ae,ze=[],ut,ct=[];Fe.forEach(function(ra){ze.push(ra.entity),Mf(ct,ra.triples)});for(var K=0,dn=0,Y=ze.length,ut=Array(Y*2);K<Y;)ut[dn++]=xi(Le,St.factory.namedNode(qfe),ze[K]),ut[dn++]=xi(Le,St.factory.namedNode(Cfe),Le=++K<Y?TT():St.factory.namedNode(BX));return{entity:Ae,triples:Mf(ut,ct)}}function Gfe(Fe){var Ae=TT();return{entity:Ae,triples:Fe.map(function(Le){return or(xi(Ae),Le)})}}function dx(Fe,Ae,Le){var ze=[],ut=[];return Ae.forEach(function(ct){let K=null;ct.annotation&&(K=ct.annotation,ct=ct.object),ze.push(xi(null,Fe,ct.entity,K)),Mf(ut,ct.triples)}),ni(ze,Le||[],ut)}function $f(Fe){return Fe.variable?Fe.variable.value:Fe.value||Fe.expression.value}function lx(Fe){if(!Fe)return[];if(Fe.type==="aggregate")return[Fe];if(Fe.type==="operation"){const Ae=[];for(const Le of Fe.args)Ae.push(...lx(Le));return Ae}return[]}function zfe(Fe){const Ae=new Set,Le=function(ze){ze&&(ze.termType==="Variable"?Ae.add(ze):ze.type==="operation"&&ze.args.forEach(Le))};return Le(Fe),Ae}function fx(Fe,Ae=1,Le=[]){for(const ze of Fe)Ae>0&&ze instanceof Array?fx(ze,Ae-1,Le):Le.push(ze);return Le}function hx(Fe){return Fe.termType==="Variable"}function XX(Fe){if(Fe.triples){const Ae=[];for(const Le of Fe.triples)hx(Le.subject)&&Ae.push(Le.subject.value),hx(Le.predicate)&&Ae.push(Le.predicate.value),hx(Le.object)&&Ae.push(Le.object.value);return Ae}else if(Fe.patterns){const Ae=[];for(const Le of Fe.patterns)Ae.push(...XX(Le));return Ae}return[]}function Xfe(Fe){const Ae=Fe.slice().sort(),Le=[];for(let ze=0;ze<Ae.length-1;ze++)Ae[ze+1]==Ae[ze]&&Le.push(Ae[ze]);return Le}function wT(Fe){if(!St.sparqlStar)throw new Error("SPARQL-star support is not enabled");return Fe}function JX(Fe,Ae,Le){for(const ze of Ae){const ut=xi("subject"in ze?ze.subject:Fe,ze.predicate,ze.object);Le.push(ut),ze.annotations&&JX(sx(Fe,ze.predicate,ze.object),ze.annotations,Le)}}function px(Fe){if(St.sparqlStar){const Ae=[];return Fe.forEach(Le=>{const ze=xi(Le.subject,Le.predicate,Le.object);Ae.push(ze),Le.annotations&&JX(sx(Le.subject,Le.predicate,Le.object),Le.annotations,Ae)}),Ae}return Fe}function KX(Fe){for(const Ae of Fe){if(Ae.type==="graph"&&Ae.name.termType==="Variable")throw new Error("Detected illegal variable in GRAPH");if(Ae.type==="bgp"||Ae.type==="graph"){for(const Le of Ae.triples)if(Le.subject.termType==="Variable"||Le.predicate.termType==="Variable"||Le.object.termType==="Variable")throw new Error("Detected illegal variable in BGP")}}return Fe}function yx(Fe){for(const Ae of Fe)if(Ae.type==="bgp"){for(const Le of Ae.triples)if(Le.subject.termType==="BlankNode"||Le.predicate.termType==="BlankNode"||Le.object.termType==="BlankNode")throw new Error("Detected illegal blank node in BGP")}return Fe}var Jfe=(function(){var Fe={EOF:1,parseError:function(Le,ze){if(this.yy.parser)this.yy.parser.parseError(Le,ze);else throw new Error(Le)},setInput:function(Ae,Le){return this.yy=Le||this.yy||{},this._input=Ae,this._more=this._backtrack=this.done=!1,this.yylineno=this.yyleng=0,this.yytext=this.matched=this.match="",this.conditionStack=["INITIAL"],this.yylloc={first_line:1,first_column:0,last_line:1,last_column:0},this.options.ranges&&(this.yylloc.range=[0,0]),this.offset=0,this},input:function(){var Ae=this._input[0];this.yytext+=Ae,this.yyleng++,this.offset++,this.match+=Ae,this.matched+=Ae;var Le=Ae.match(/(?:\r\n?|\n).*/g);return Le?(this.yylineno++,this.yylloc.last_line++):this.yylloc.last_column++,this.options.ranges&&this.yylloc.range[1]++,this._input=this._input.slice(1),Ae},unput:function(Ae){var Le=Ae.length,ze=Ae.split(/(?:\r\n?|\n)/g);this._input=Ae+this._input,this.yytext=this.yytext.substr(0,this.yytext.length-Le),this.offset-=Le;var ut=this.match.split(/(?:\r\n?|\n)/g);this.match=this.match.substr(0,this.match.length-1),this.matched=this.matched.substr(0,this.matched.length-1),ze.length-1&&(this.yylineno-=ze.length-1);var ct=this.yylloc.range;return this.yylloc={first_line:this.yylloc.first_line,last_line:this.yylineno+1,first_column:this.yylloc.first_column,last_column:ze?(ze.length===ut.length?this.yylloc.first_column:0)+ut[ut.length-ze.length].length-ze[0].length:this.yylloc.first_column-Le},this.options.ranges&&(this.yylloc.range=[ct[0],ct[0]+this.yyleng-Le]),this.yyleng=this.yytext.length,this},more:function(){return this._more=!0,this},reject:function(){if(this.options.backtrack_lexer)this._backtrack=!0;else return this.parseError("Lexical error on line "+(this.yylineno+1)+`. You can only invoke reject() in the lexer when the lexer is of the backtracking persuasion (options.backtrack_lexer = true).
`+this.showPosition(),{text:"",token:null,line:this.yylineno});return this},less:function(Ae){this.unput(this.match.slice(Ae))},pastInput:function(){var Ae=this.matched.substr(0,this.matched.length-this.match.length);return(Ae.length>20?"...":"")+Ae.substr(-20).replace(/\n/g,"")},upcomingInput:function(){var Ae=this.match;return Ae.length<20&&(Ae+=this._input.substr(0,20-Ae.length)),(Ae.substr(0,20)+(Ae.length>20?"...":"")).replace(/\n/g,"")},showPosition:function(){var Ae=this.pastInput(),Le=new Array(Ae.length+1).join("-");return Ae+this.upcomingInput()+`
`+Le+"^"},test_match:function(Ae,Le){var ze,ut,ct;if(this.options.backtrack_lexer&&(ct={yylineno:this.yylineno,yylloc:{first_line:this.yylloc.first_line,last_line:this.last_line,first_column:this.yylloc.first_column,last_column:this.yylloc.last_column},yytext:this.yytext,match:this.match,matches:this.matches,matched:this.matched,yyleng:this.yyleng,offset:this.offset,_more:this._more,_input:this._input,yy:this.yy,conditionStack:this.conditionStack.slice(0),done:this.done},this.options.ranges&&(ct.yylloc.range=this.yylloc.range.slice(0))),ut=Ae[0].match(/(?:\r\n?|\n).*/g),ut&&(this.yylineno+=ut.length),this.yylloc={first_line:this.yylloc.last_line,last_line:this.yylineno+1,first_column:this.yylloc.last_column,last_column:ut?ut[ut.length-1].length-ut[ut.length-1].match(/\r?\n?/)[0].length:this.yylloc.last_column+Ae[0].length},this.yytext+=Ae[0],this.match+=Ae[0],this.matches=Ae,this.yyleng=this.yytext.length,this.options.ranges&&(this.yylloc.range=[this.offset,this.offset+=this.yyleng]),this._more=!1,this._backtrack=!1,this._input=this._input.slice(Ae[0].length),this.matched+=Ae[0],ze=this.performAction.call(this,this.yy,this,Le,this.conditionStack[this.conditionStack.length-1]),this.done&&this._input&&(this.done=!1),ze)return ze;if(this._backtrack){for(var K in ct)this[K]=ct[K];return!1}return!1},next:function(){if(this.done)return this.EOF;this._input||(this.done=!0);var Ae,Le,ze,ut;this._more||(this.yytext="",this.match="");for(var ct=this._currentRules(),K=0;K<ct.length;K++)if(ze=this._input.match(this.rules[ct[K]]),ze&&(!Le||ze[0].length>Le[0].length)){if(Le=ze,ut=K,this.options.backtrack_lexer){if(Ae=this.test_match(ze,ct[K]),Ae!==!1)return Ae;if(this._backtrack){Le=!1;continue}else return!1}else if(!this.options.flex)break}return Le?(Ae=this.test_match(Le,ct[ut]),Ae!==!1?Ae:!1):this._input===""?this.EOF:this.parseError("Lexical error on line "+(this.yylineno+1)+`. Unrecognized text.
`+this.showPosition(),{text:"",token:null,line:this.yylineno})},lex:function(){var Le=this.next();return Le||this.lex()},begin:function(Le){this.conditionStack.push(Le)},popState:function(){var Le=this.conditionStack.length-1;return Le>0?this.conditionStack.pop():this.conditionStack[0]},_currentRules:function(){return this.conditionStack.length&&this.conditionStack[this.conditionStack.length-1]?this.conditions[this.conditionStack[this.conditionStack.length-1]].rules:this.conditions.INITIAL.rules},topState:function(Le){return Le=this.conditionStack.length-1-Math.abs(Le||0),Le>=0?this.conditionStack[Le]:"INITIAL"},pushState:function(Le){this.begin(Le)},stateStackSize:function(){return this.conditionStack.length},options:{flex:!0,"case-insensitive":!0},performAction:function(Le,ze,ut,ct){switch(ut){case 0:break;case 1:return 12;case 2:return 15;case 3:return 41;case 4:return 325;case 5:return 326;case 6:return 45;case 7:return 47;case 8:return 48;case 9:return 39;case 10:return 24;case 11:return 28;case 12:return 29;case 13:return 31;case 14:return 32;case 15:return 36;case 16:return 53;case 17:return 327;case 18:return 63;case 19:return 64;case 20:return 70;case 21:return 73;case 22:return 76;case 23:return 78;case 24:return 81;case 25:return 83;case 26:return 85;case 27:return 193;case 28:return 100;case 29:return 328;case 30:return 121;case 31:return 329;case 32:return 330;case 33:return 110;case 34:return 331;case 35:return 109;case 36:return 332;case 37:return 333;case 38:return 113;case 39:return 115;case 40:return 116;case 41:return 131;case 42:return 123;case 43:return 126;case 44:return 128;case 45:return 132;case 46:return 112;case 47:return 334;case 48:return 335;case 49:return 159;case 50:return 161;case 51:return 164;case 52:return 174;case 53:return 160;case 54:return 336;case 55:return 163;case 56:return 312;case 57:return 314;case 58:return 317;case 59:return 318;case 60:return 272;case 61:return 197;case 62:return 337;case 63:return 338;case 64:return 229;case 65:return 340;case 66:return 263;case 67:return 224;case 68:return 231;case 69:return 232;case 70:return 242;case 71:return 246;case 72:return 290;case 73:return 341;case 74:return 342;case 75:return 343;case 76:return 344;case 77:return 345;case 78:return 250;case 79:return 346;case 80:return 265;case 81:return 276;case 82:return 277;case 83:return 268;case 84:return 269;case 85:return 270;case 86:return 271;case 87:return 347;case 88:return 348;case 89:return 273;case 90:return 274;case 91:return 350;case 92:return 349;case 93:return 351;case 94:return 279;case 95:return 280;case 96:return 283;case 97:return 285;case 98:return 289;case 99:return 293;case 100:return 296;case 101:return 13;case 102:return 16;case 103:return 308;case 104:return 309;case 105:return 87;case 106:return 292;case 107:return 82;case 108:return 294;case 109:return 295;case 110:return 297;case 111:return 298;case 112:return 299;case 113:return 300;case 114:return 301;case 115:return 302;case 116:return"EXPONENT";case 117:return 303;case 118:return 304;case 119:return 305;case 120:return 306;case 121:return 89;case 122:return 310;case 123:return 6;case 124:return"INVALID";case 125:console.log(ze.yytext);break}},rules:[/^(?:\s+|(#[^\n\r]*))/i,/^(?:BASE)/i,/^(?:PREFIX)/i,/^(?:SELECT)/i,/^(?:DISTINCT)/i,/^(?:REDUCED)/i,/^(?:\()/i,/^(?:AS)/i,/^(?:\))/i,/^(?:\*)/i,/^(?:CONSTRUCT)/i,/^(?:WHERE)/i,/^(?:\{)/i,/^(?:\})/i,/^(?:DESCRIBE)/i,/^(?:ASK)/i,/^(?:FROM)/i,/^(?:NAMED)/i,/^(?:GROUP)/i,/^(?:BY)/i,/^(?:HAVING)/i,/^(?:ORDER)/i,/^(?:ASC)/i,/^(?:DESC)/i,/^(?:LIMIT)/i,/^(?:OFFSET)/i,/^(?:VALUES)/i,/^(?:;)/i,/^(?:LOAD)/i,/^(?:SILENT)/i,/^(?:INTO)/i,/^(?:CLEAR)/i,/^(?:DROP)/i,/^(?:CREATE)/i,/^(?:ADD)/i,/^(?:TO)/i,/^(?:MOVE)/i,/^(?:COPY)/i,/^(?:INSERT((\s+|(#[^\n\r]*)\n\r?)+)DATA)/i,/^(?:DELETE((\s+|(#[^\n\r]*)\n\r?)+)DATA)/i,/^(?:DELETE((\s+|(#[^\n\r]*)\n\r?)+)WHERE)/i,/^(?:WITH)/i,/^(?:DELETE)/i,/^(?:INSERT)/i,/^(?:USING)/i,/^(?:DEFAULT)/i,/^(?:GRAPH)/i,/^(?:ALL)/i,/^(?:\.)/i,/^(?:OPTIONAL)/i,/^(?:SERVICE)/i,/^(?:BIND)/i,/^(?:UNDEF)/i,/^(?:MINUS)/i,/^(?:UNION)/i,/^(?:FILTER)/i,/^(?:<<)/i,/^(?:>>)/i,/^(?:\{\|)/i,/^(?:\|\})/i,/^(?:,)/i,/^(?:a)/i,/^(?:\|)/i,/^(?:\/)/i,/^(?:\^)/i,/^(?:\?)/i,/^(?:\+)/i,/^(?:!)/i,/^(?:\[)/i,/^(?:\])/i,/^(?:\|\|)/i,/^(?:&&)/i,/^(?:=)/i,/^(?:!=)/i,/^(?:<)/i,/^(?:>)/i,/^(?:<=)/i,/^(?:>=)/i,/^(?:IN)/i,/^(?:NOT)/i,/^(?:-)/i,/^(?:BOUND)/i,/^(?:BNODE)/i,/^(?:(RAND|NOW|UUID|STRUUID))/i,/^(?:(LANG|DATATYPE|IRI|URI|ABS|CEIL|FLOOR|ROUND|STRLEN|STR|UCASE|LCASE|ENCODE_FOR_URI|YEAR|MONTH|DAY|HOURS|MINUTES|SECONDS|TIMEZONE|TZ|MD5|SHA1|SHA256|SHA384|SHA512|isIRI|isURI|isBLANK|isLITERAL|isNUMERIC))/i,/^(?:(SUBJECT|PREDICATE|OBJECT|isTRIPLE))/i,/^(?:(LANGMATCHES|CONTAINS|STRSTARTS|STRENDS|STRBEFORE|STRAFTER|STRLANG|STRDT|sameTerm))/i,/^(?:CONCAT)/i,/^(?:COALESCE)/i,/^(?:IF)/i,/^(?:TRIPLE)/i,/^(?:REGEX)/i,/^(?:SUBSTR)/i,/^(?:REPLACE)/i,/^(?:EXISTS)/i,/^(?:COUNT)/i,/^(?:SUM|MIN|MAX|AVG|SAMPLE)/i,/^(?:GROUP_CONCAT)/i,/^(?:SEPARATOR)/i,/^(?:\^\^)/i,/^(?:true|false)/i,/^(?:(<(?:[^<>\"\{\}\|\^`\\\u0000-\u0020])*>))/i,/^(?:((([A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]|[\uD800-\uDB7F][\uDC00-\uDFFF])(?:(?:(((?:([A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]|[\uD800-\uDB7F][\uDC00-\uDFFF])|_))|-|[0-9]|\u00B7|[\u0300-\u036F\u203F-\u2040])|\.)*(((?:([A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]|[\uD800-\uDB7F][\uDC00-\uDFFF])|_))|-|[0-9]|\u00B7|[\u0300-\u036F\u203F-\u2040]))?)?:))/i,/^(?:(((([A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]|[\uD800-\uDB7F][\uDC00-\uDFFF])(?:(?:(((?:([A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]|[\uD800-\uDB7F][\uDC00-\uDFFF])|_))|-|[0-9]|\u00B7|[\u0300-\u036F\u203F-\u2040])|\.)*(((?:([A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]|[\uD800-\uDB7F][\uDC00-\uDFFF])|_))|-|[0-9]|\u00B7|[\u0300-\u036F\u203F-\u2040]))?)?:)((?:((?:([A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]|[\uD800-\uDB7F][\uDC00-\uDFFF])|_))|:|[0-9]|((%([0-9A-Fa-f])([0-9A-Fa-f]))|(\\(_|~|\.|-|!|\$|&|'|\(|\)|\*|\+|,|;|=|\/|\?|#|@|%))))(?:(?:(((?:([A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]|[\uD800-\uDB7F][\uDC00-\uDFFF])|_))|-|[0-9]|\u00B7|[\u0300-\u036F\u203F-\u2040])|\.|:|((%([0-9A-Fa-f])([0-9A-Fa-f]))|(\\(_|~|\.|-|!|\$|&|'|\(|\)|\*|\+|,|;|=|\/|\?|#|@|%))))*(?:(((?:([A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]|[\uD800-\uDB7F][\uDC00-\uDFFF])|_))|-|[0-9]|\u00B7|[\u0300-\u036F\u203F-\u2040])|:|((%([0-9A-Fa-f])([0-9A-Fa-f]))|(\\(_|~|\.|-|!|\$|&|'|\(|\)|\*|\+|,|;|=|\/|\?|#|@|%)))))?)))/i,/^(?:(_:(?:((?:([A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]|[\uD800-\uDB7F][\uDC00-\uDFFF])|_))|[0-9])(?:(?:(((?:([A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]|[\uD800-\uDB7F][\uDC00-\uDFFF])|_))|-|[0-9]|\u00B7|[\u0300-\u036F\u203F-\u2040])|\.)*(((?:([A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]|[\uD800-\uDB7F][\uDC00-\uDFFF])|_))|-|[0-9]|\u00B7|[\u0300-\u036F\u203F-\u2040]))?))/i,/^(?:([\?\$]((?:((?:([A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]|[\uD800-\uDB7F][\uDC00-\uDFFF])|_))|[0-9])(?:((?:([A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]|[\uD800-\uDB7F][\uDC00-\uDFFF])|_))|[0-9]|\u00B7|[\u0300-\u036F\u203F-\u2040])*)))/i,/^(?:(@[a-zA-Z]+(?:-[a-zA-Z0-9]+)*))/i,/^(?:([0-9]+))/i,/^(?:([0-9]*\.[0-9]+))/i,/^(?:([0-9]+\.[0-9]*([eE][+-]?[0-9]+)|\.([0-9])+([eE][+-]?[0-9]+)|([0-9])+([eE][+-]?[0-9]+)))/i,/^(?:(\+([0-9]+)))/i,/^(?:(\+([0-9]*\.[0-9]+)))/i,/^(?:(\+([0-9]+\.[0-9]*([eE][+-]?[0-9]+)|\.([0-9])+([eE][+-]?[0-9]+)|([0-9])+([eE][+-]?[0-9]+))))/i,/^(?:(-([0-9]+)))/i,/^(?:(-([0-9]*\.[0-9]+)))/i,/^(?:(-([0-9]+\.[0-9]*([eE][+-]?[0-9]+)|\.([0-9])+([eE][+-]?[0-9]+)|([0-9])+([eE][+-]?[0-9]+))))/i,/^(?:([eE][+-]?[0-9]+))/i,/^(?:('(?:(?:[^\u0027\u005C\u000A\u000D])|(\\[tbnrf\\\"']|\\u([0-9A-Fa-f])([0-9A-Fa-f])([0-9A-Fa-f])([0-9A-Fa-f])|\\U([0-9A-Fa-f])([0-9A-Fa-f])([0-9A-Fa-f])([0-9A-Fa-f])([0-9A-Fa-f])([0-9A-Fa-f])([0-9A-Fa-f])([0-9A-Fa-f])))*'))/i,/^(?:("(?:(?:[^\u0022\u005C\u000A\u000D])|(\\[tbnrf\\\"']|\\u([0-9A-Fa-f])([0-9A-Fa-f])([0-9A-Fa-f])([0-9A-Fa-f])|\\U([0-9A-Fa-f])([0-9A-Fa-f])([0-9A-Fa-f])([0-9A-Fa-f])([0-9A-Fa-f])([0-9A-Fa-f])([0-9A-Fa-f])([0-9A-Fa-f])))*"))/i,/^(?:('''(?:(?:'|'')?(?:[^'\\]|(\\[tbnrf\\\"']|\\u([0-9A-Fa-f])([0-9A-Fa-f])([0-9A-Fa-f])([0-9A-Fa-f])|\\U([0-9A-Fa-f])([0-9A-Fa-f])([0-9A-Fa-f])([0-9A-Fa-f])([0-9A-Fa-f])([0-9A-Fa-f])([0-9A-Fa-f])([0-9A-Fa-f]))))*'''))/i,/^(?:("""(?:(?:"|"")?(?:[^\"\\]|(\\[tbnrf\\\"']|\\u([0-9A-Fa-f])([0-9A-Fa-f])([0-9A-Fa-f])([0-9A-Fa-f])|\\U([0-9A-Fa-f])([0-9A-Fa-f])([0-9A-Fa-f])([0-9A-Fa-f])([0-9A-Fa-f])([0-9A-Fa-f])([0-9A-Fa-f])([0-9A-Fa-f]))))*"""))/i,/^(?:(\((\u0020|\u0009|\u000D|\u000A)*\)))/i,/^(?:(\[(\u0020|\u0009|\u000D|\u000A)*\]))/i,/^(?:$)/i,/^(?:.)/i,/^(?:.)/i],conditions:{INITIAL:{rules:[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,77,78,79,80,81,82,83,84,85,86,87,88,89,90,91,92,93,94,95,96,97,98,99,100,101,102,103,104,105,106,107,108,109,110,111,112,113,114,115,116,117,118,119,120,121,122,123,124,125],inclusive:!0}}};return Fe})();ix.lexer=Jfe;function St(){this.yy={}}return St.prototype=ix,ix.Parser=St,new St})();return sO=u,sO}var cO,y6;function kK(){if(y6)return cO;y6=1;var u="http://www.w3.org/2001/XMLSchema#integer",n="http://www.w3.org/2001/XMLSchema#string";function o(f){this._options=f=f||{};var h=f.prefixes||{};this._prefixByIri={};var p=[];for(var y in h){var _=h[y];a(_)&&(this._prefixByIri[_]=y,p.push(_))}var b=p.join("|").replace(/[\]\/\(\)\*\+\?\.\\\$]/g,"\\$&");this._prefixRegex=new RegExp("^("+b+")([a-zA-Z][\\-_a-zA-Z0-9]*)$"),this._usedPrefixes={},this._sparqlStar=f.sparqlStar,this._indent=a(f.indent)?f.indent:"  ",this._newline=a(f.newline)?f.newline:`
`,this._explicitDatatype=!!f.explicitDatatype}o.prototype.toQuery=function(f){var h="";return f.queryType&&(h+=f.queryType.toUpperCase()+" "),f.reduced&&(h+="REDUCED "),f.distinct&&(h+="DISTINCT "),f.variables?h+=d(f.variables,void 0,function(p){return/^[?$]/.test(p)?p:c(p)?this.toEntity(p):"("+this.toExpression(p.expression)+" AS "+r(p.variable)+")"},this)+" ":f.template&&(h+=this.group(f.template,!0)+this._newline),f.from&&(h+=this.graphs("FROM ",f.from.default)+this.graphs("FROM NAMED ",f.from.named)),f.where&&(h+="WHERE "+this.group(f.where,!0)+this._newline),f.updates&&(h+=d(f.updates,";"+this._newline,this.toUpdate,this)),f.group&&(h+="GROUP BY "+d(f.group,void 0,function(p){var y=c(p.expression)?this.toEntity(p.expression):"("+this.toExpression(p.expression)+")";return p.variable?"("+y+" AS "+r(p.variable)+")":y},this)+this._newline),f.having&&(h+="HAVING ("+d(f.having,void 0,this.toExpression,this)+")"+this._newline),f.order&&(h+="ORDER BY "+d(f.order,void 0,function(p){var y="("+this.toExpression(p.expression)+")";return p.descending?"DESC "+y:y},this)+this._newline),f.offset&&(h+="OFFSET "+f.offset+this._newline),f.limit&&(h+="LIMIT "+f.limit+this._newline),f.values&&(h+=this.values(f)),h=this.baseAndPrefixes(f)+h,h.trim()},o.prototype.baseAndPrefixes=function(f){var h=f.base?"BASE <"+f.base+">"+this._newline:"",p="";for(var y in f.prefixes)(this._options.allPrefixes||this._usedPrefixes[y])&&(p+="PREFIX "+y+": <"+f.prefixes[y]+">"+this._newline);return h+p},o.prototype.toPattern=function(f){var h=f.type||f instanceof Array&&"array"||(f.subject&&f.predicate&&f.object?"triple":"");if(!(h in this))throw new Error("Unknown entry type: "+h);return this[h](f)},o.prototype.triple=function(f){return this.toEntity(f.subject)+" "+this.toEntity(f.predicate)+" "+this.toEntity(f.object)+"."},o.prototype.array=function(f){return d(f,this._newline,this.toPattern,this)},o.prototype.bgp=function(f){return this.encodeTriples(f.triples)},o.prototype.encodeTriples=function(f){if(!f.length)return"";for(var h=[],p=void 0,y=void 0,_=0;_<f.length;_++){var b=f[_];s(b.subject,p)?s(b.predicate,y)?h.push(","):(y=b.predicate,h.push(";"+this._newline,this._indent,this.toEntity(y))):(p&&h.push("."+this._newline),p=b.subject,y=b.predicate,h.push(this.toEntity(p)," ",this.toEntity(y))),h.push(" ",this.toEntity(b.object))}return h.push("."),h.join("")},o.prototype.graph=function(f){return"GRAPH "+this.toEntity(f.name)+" "+this.group(f)},o.prototype.graphs=function(f,h){return!h||h.length===0?"":d(h,"",function(p){return f+this.toEntity(p)+this._newline},this)},o.prototype.group=function(f,h){return f=h!==!0?this.array(f.patterns||f.triples):this.toPattern(f.type!=="group"?f:f.patterns),f.indexOf(this._newline)===-1?"{ "+f+" }":"{"+this._newline+this.indent(f)+this._newline+"}"},o.prototype.query=function(f){return this.toQuery(f)},o.prototype.filter=function(f){return"FILTER("+this.toExpression(f.expression)+")"},o.prototype.bind=function(f){return"BIND("+this.toExpression(f.expression)+" AS "+r(f.variable)+")"},o.prototype.optional=function(f){return"OPTIONAL "+this.group(f)},o.prototype.union=function(f){return d(f.patterns,this._newline+"UNION"+this._newline,function(h){return this.group(h,!0)},this)},o.prototype.minus=function(f){return"MINUS "+this.group(f)},o.prototype.values=function(f){var h=Object.keys(f.values.reduce(function(_,b){for(var m in b)_[m]=!0;return _},{})),p,y;return h.length===1?p=y="":(p="(",y=")"),"VALUES "+p+h.join(" ")+y+" {"+this._newline+d(f.values,this._newline,function(_){return"  "+p+d(h,void 0,function(b){return _[b]?this.toEntity(_[b]):"UNDEF"},this)+y},this)+this._newline+"}"},o.prototype.service=function(f){return"SERVICE "+(f.silent?"SILENT ":"")+this.toEntity(f.name)+" "+this.group(f)},o.prototype.toExpression=function(f){if(c(f))return this.toEntity(f);switch(f.type.toLowerCase()){case"aggregate":return f.aggregation.toUpperCase()+"("+(f.distinct?"DISTINCT ":"")+this.toExpression(f.expression)+(typeof f.separator=="string"?'; SEPARATOR = "'+f.separator.replace(i,t)+'"':"")+")";case"functioncall":return this.toEntity(f.function)+"("+d(f.args,", ",this.toExpression,this)+")";case"operation":var h=f.operator.toUpperCase(),p=f.args||[];switch(f.operator.toLowerCase()){case"<":case">":case">=":case"<=":case"&&":case"||":case"=":case"!=":case"+":case"-":case"*":case"/":return(c(p[0])?this.toEntity(p[0]):"("+this.toExpression(p[0])+")")+" "+h+" "+(c(p[1])?this.toEntity(p[1]):"("+this.toExpression(p[1])+")");case"!":return"!("+this.toExpression(p[0])+")";case"uplus":return"+("+this.toExpression(p[0])+")";case"uminus":return"-("+this.toExpression(p[0])+")";case"notin":h="NOT IN";case"in":return this.toExpression(p[0])+" "+h+"("+(a(p[1])?p[1]:d(p[1],", ",this.toExpression,this))+")";case"notexists":h="NOT EXISTS";case"exists":return h+" "+this.group(p[0],!0);default:return h+"("+d(p,", ",this.toExpression,this)+")"}default:throw new Error("Unknown expression type: "+f.type)}},o.prototype.toEntity=function(f){if(c(f))switch(f.termType){case"Wildcard":return"*";case"Variable":return r(f);case"BlankNode":return"_:"+f.value;case"Literal":var h=f.value||"",p=f.language||"",y=f.datatype;if(f='"'+h.replace(i,t)+'"',p)f+="@"+p;else if(y){if(!this._explicitDatatype)switch(y.value){case n:return f;case u:if(/^\d+$/.test(h))return h+" "}f+="^^"+this.encodeIRI(y.value)}return f;case"Quad":if(!this._sparqlStar)throw new Error("SPARQL* support is not enabled");return f.graph&&f.graph.termType!=="DefaultGraph"?"<< GRAPH "+this.toEntity(f.graph)+" { "+this.toEntity(f.subject)+" "+this.toEntity(f.predicate)+" "+this.toEntity(f.object)+" }  >>":"<< "+this.toEntity(f.subject)+" "+this.toEntity(f.predicate)+" "+this.toEntity(f.object)+" >>";default:return this.encodeIRI(f.value)}else{var _=f.items.map(this.toEntity,this),b=f.pathType;switch(b){case"^":case"!":return b+_[0];case"*":case"+":case"?":return"("+_[0]+b+")";default:return"("+_.join(b)+")"}}};var i=/["\\\t\n\r\b\f]/g,t=function(f){return e[f]},e={"\\":"\\\\",'"':'\\"',"	":"\\t","\n":"\\n","\r":"\\r","\b":"\\b","\f":"\\f"};o.prototype.encodeIRI=function(f){var h=this._prefixRegex.exec(f);if(h){var p=this._prefixByIri[h[1]];return this._usedPrefixes[p]=!0,p+":"+h[2]}return"<"+f+">"},o.prototype.toUpdate=function(f){switch(f.type||f.updateType){case"load":return"LOAD"+(f.source?" "+this.toEntity(f.source):"")+(f.destination?" INTO GRAPH "+this.toEntity(f.destination):"");case"insert":return"INSERT DATA "+this.group(f.insert,!0);case"delete":return"DELETE DATA "+this.group(f.delete,!0);case"deletewhere":return"DELETE WHERE "+this.group(f.delete,!0);case"insertdelete":return(f.graph?"WITH "+this.toEntity(f.graph)+this._newline:"")+(f.delete.length?"DELETE "+this.group(f.delete,!0)+this._newline:"")+(f.insert.length?"INSERT "+this.group(f.insert,!0)+this._newline:"")+(f.using?this.graphs("USING ",f.using.default):"")+(f.using?this.graphs("USING NAMED ",f.using.named):"")+"WHERE "+this.group(f.where,!0);case"add":case"copy":case"move":return f.type.toUpperCase()+" "+(f.silent?"SILENT ":"")+(f.source.default?"DEFAULT":this.toEntity(f.source.name))+" TO "+this.toEntity(f.destination.name);case"create":case"clear":case"drop":return f.type.toUpperCase()+(f.silent?" SILENT ":" ")+(f.graph.default?"DEFAULT":f.graph.named?"NAMED":f.graph.all?"ALL":"GRAPH "+this.toEntity(f.graph.name));default:throw new Error("Unknown update query type: "+f.type)}},o.prototype.indent=function(f){return f.replace(/^/gm,this._indent)};function r(f){return"?"+f.value}function a(f){return typeof f=="string"}function c(f){return typeof f.termType=="string"}function s(f,h){if(!f||!c(f)||!h||!c(h)||f.termType!==h.termType)return!1;switch(f.termType){case"Literal":return f.value===h.value&&f.language===h.language&&s(f.datatype,h.datatype);case"Quad":return s(f.subject,h.subject)&&s(f.predicate,h.predicate)&&s(f.object,h.object)&&s(f.graph,h.graph);default:return f.value===h.value}}function d(f,h,p,y){return f.map(p,y).join(a(h)?h:" ")}function l(f={}){return{stringify:function(h){var p=Object.create(f);return p.prefixes=h.prefixes,new o(p).toQuery(h)},createGenerator:function(){return new o(f)}}}return cO={Generator:l},cO}var dO,b6;function Vh(){if(b6)return dO;b6=1;const{Parser:u}=KK(),{Generator:n}=kK(),{Wildcard:o}=h6(),{DataFactory:i}=hr();function t({prefixes:e,baseIRI:r,factory:a,pathOnly:c,sparqlStar:s,skipValidation:d,skipUngroupedVariableCheck:l}={}){const f={};for(const p in e??{})f[p]=e[p];const h=new u;return h.parse=function(){return u.base=r||"",u.prefixes=Object.create(f),u.factory=a||new i,u.sparqlStar=!!s,u.pathOnly=!!c,u.skipValidation=!!d||!!l,u.prototype.parse.apply(h,arguments)},h._resetBlanks=u._resetBlanks,h}return dO={Parser:t,Generator:n,Wildcard:o},dO}var _6;function ZT(){if(_6)return Gn;_6=1;var u=Gn&&Gn.__createBinding||(Object.create?(function(c,s,d,l){l===void 0&&(l=d);var f=Object.getOwnPropertyDescriptor(s,d);(!f||("get"in f?!s.__esModule:f.writable||f.configurable))&&(f={enumerable:!0,get:function(){return s[d]}}),Object.defineProperty(c,l,f)}):(function(c,s,d,l){l===void 0&&(l=d),c[l]=s[d]})),n=Gn&&Gn.__setModuleDefault||(Object.create?(function(c,s){Object.defineProperty(c,"default",{enumerable:!0,value:s})}):function(c,s){c.default=s}),o=Gn&&Gn.__importStar||function(c){if(c&&c.__esModule)return c;var s={};if(c!=null)for(var d in c)d!=="default"&&Object.prototype.hasOwnProperty.call(c,d)&&u(s,c,d);return n(s,c),s};Object.defineProperty(Gn,"__esModule",{value:!0});const i=o(Uh()),t=hr(),e=Yt(),r=Vh();class a{constructor(s){this.dataFactory=s||new t.DataFactory,this.stringType=this.createTerm("http://www.w3.org/2001/XMLSchema#string")}createAlt(s,d=!0){return this.flattenMulti({type:i.types.ALT,input:s},d)}createAsk(s){return{type:i.types.ASK,input:s}}createBoundAggregate(s,d,l,f,h){const p=this.createAggregateExpression(d,l,f,h);return p.variable=s,p}createBgp(s){return{type:i.types.BGP,patterns:s}}createConstruct(s,d){return{type:i.types.CONSTRUCT,input:s,template:d}}createDescribe(s,d){return{type:i.types.DESCRIBE,input:s,terms:d}}createDistinct(s){return{type:i.types.DISTINCT,input:s}}createExtend(s,d,l){return{type:i.types.EXTEND,input:s,variable:d,expression:l}}createFrom(s,d,l){return{type:i.types.FROM,input:s,default:d,named:l}}createFilter(s,d){return{type:i.types.FILTER,input:s,expression:d}}createGraph(s,d){return{type:i.types.GRAPH,input:s,name:d}}createGroup(s,d,l){return{type:i.types.GROUP,input:s,variables:d,aggregates:l}}createInv(s){return{type:i.types.INV,path:s}}createJoin(s,d=!0){return this.flattenMulti({type:i.types.JOIN,input:s},d)}createLeftJoin(s,d,l){return l?{type:i.types.LEFT_JOIN,input:[s,d],expression:l}:{type:i.types.LEFT_JOIN,input:[s,d]}}createLink(s){return{type:i.types.LINK,iri:s}}createMinus(s,d){return{type:i.types.MINUS,input:[s,d]}}createNop(){return{type:i.types.NOP}}createNps(s){return{type:i.types.NPS,iris:s}}createOneOrMorePath(s){return{type:i.types.ONE_OR_MORE_PATH,path:s}}createOrderBy(s,d){return{type:i.types.ORDER_BY,input:s,expressions:d}}createPath(s,d,l,f){return f?{type:i.types.PATH,subject:s,predicate:d,object:l,graph:f}:{type:i.types.PATH,subject:s,predicate:d,object:l,graph:this.dataFactory.defaultGraph()}}createPattern(s,d,l,f){const h=this.dataFactory.quad(s,d,l,f);return h.type=i.types.PATTERN,h}createProject(s,d){return{type:i.types.PROJECT,input:s,variables:d}}createReduced(s){return{type:i.types.REDUCED,input:s}}createSeq(s,d=!0){return this.flattenMulti({type:i.types.SEQ,input:s},d)}createService(s,d,l){return{type:i.types.SERVICE,input:s,name:d,silent:!!l}}createSlice(s,d,l){return d=d||0,l!==void 0?{type:i.types.SLICE,input:s,start:d,length:l}:{type:i.types.SLICE,input:s,start:d}}createUnion(s,d=!0){return this.flattenMulti({type:i.types.UNION,input:s},d)}createValues(s,d){return{type:i.types.VALUES,variables:s,bindings:d}}createZeroOrMorePath(s){return{type:i.types.ZERO_OR_MORE_PATH,path:s}}createZeroOrOnePath(s){return{type:i.types.ZERO_OR_ONE_PATH,path:s}}createAggregateExpression(s,d,l,f){return f?{type:i.types.EXPRESSION,expressionType:i.expressionTypes.AGGREGATE,aggregator:s,expression:d,separator:f,distinct:l}:{type:i.types.EXPRESSION,expressionType:i.expressionTypes.AGGREGATE,aggregator:s,expression:d,distinct:l}}createExistenceExpression(s,d){return{type:i.types.EXPRESSION,expressionType:i.expressionTypes.EXISTENCE,not:s,input:d}}createNamedExpression(s,d){return{type:i.types.EXPRESSION,expressionType:i.expressionTypes.NAMED,name:s,args:d}}createOperatorExpression(s,d){return{type:i.types.EXPRESSION,expressionType:i.expressionTypes.OPERATOR,operator:s,args:d}}createTermExpression(s){return{type:i.types.EXPRESSION,expressionType:i.expressionTypes.TERM,term:s}}createWildcardExpression(){return{type:i.types.EXPRESSION,expressionType:i.expressionTypes.WILDCARD,wildcard:new r.Wildcard}}createTerm(s){return s[0]==="$"&&(s=s.replace("$","?")),(0,e.stringToTerm)(s,this.dataFactory)}createCompositeUpdate(s){return{type:i.types.COMPOSITE_UPDATE,updates:s}}createDeleteInsert(s,d,l){const f={type:i.types.DELETE_INSERT};return s&&(f.delete=s),d&&(f.insert=d),l&&(f.where=l),f}createLoad(s,d,l){const f={type:i.types.LOAD,source:s};return d&&(f.destination=d),this.addSilent(f,!!l)}createClear(s,d){return this.addSilent({type:i.types.CLEAR,source:s},!!d)}createCreate(s,d){return this.addSilent({type:i.types.CREATE,source:s},!!d)}createDrop(s,d){return this.addSilent({type:i.types.DROP,source:s},!!d)}createAdd(s,d,l){return this.addSilent({type:i.types.ADD,source:s,destination:d},!!l)}createMove(s,d,l){return this.addSilent({type:i.types.MOVE,source:s,destination:d},!!l)}createCopy(s,d,l){return this.addSilent({type:i.types.COPY,source:s,destination:d},!!l)}addSilent(s,d){return d&&(s.silent=d),s}flattenMulti(s,d){if(!d)return s;const l=s.type,f=s.input;let h=[];for(const p of f)p.type===l?h.push(...p.input):h.push(p);return s.input=h,s}}return Gn.default=a,Gn}var cf={},Aa={},ot={},g6;function m6(){if(g6)return ot;g6=1,Object.defineProperty(ot,"__esModule",{value:!0}),ot.matchPatternMappings=ot.matchPatternComplete=ot.matchPattern=ot.matchTerm=ot.getValueNestedPath=ot.someTermsNested=ot.someTerms=ot.everyTermsNested=ot.everyTerms=ot.reduceTermsNested=ot.reduceTerms=ot.mapTermsNested=ot.mapTerms=ot.filterQuadTermNamesNested=ot.filterQuadTermNames=ot.filterTermsNested=ot.filterTerms=ot.forEachTermsNested=ot.forEachTerms=ot.collectNamedTerms=ot.getNamedTerms=ot.getTermsNested=ot.getTerms=ot.TRIPLE_TERM_NAMES=ot.QUAD_TERM_NAMES=void 0;const u=hr(),n=new u.DataFactory;ot.QUAD_TERM_NAMES=["subject","predicate","object","graph"],ot.TRIPLE_TERM_NAMES=["subject","predicate","object"];function o(O,w){return w&&O.graph.termType==="DefaultGraph"?[O.subject,O.predicate,O.object]:[O.subject,O.predicate,O.object,O.graph]}ot.getTerms=o;function i(O,w){const E=[];for(const R of o(O,w))R.termType==="Quad"?i(R,w).forEach(D=>E.push(D)):E.push(R);return E}ot.getTermsNested=i;function t(O){return[{key:"subject",value:O.subject},{key:"predicate",value:O.predicate},{key:"object",value:O.object},{key:"graph",value:O.graph}]}ot.getNamedTerms=t;function e(O,w,E){const R={};return O.forEach(D=>R[D.key]=D.value),w&&(R.subject=R.subject||w("subject"),R.predicate=R.predicate||w("predicate"),R.object=R.object||w("object"),R.graph=R.graph||w("graph")),(E||n).quad(R.subject,R.predicate,R.object,R.graph)}ot.collectNamedTerms=e;function r(O,w){w(O.subject,"subject"),w(O.predicate,"predicate"),w(O.object,"object"),w(O.graph,"graph")}ot.forEachTerms=r;function a(O,w,E=[]){O.subject.termType==="Quad"?a(O.subject,w,[...E,"subject"]):w(O.subject,[...E,"subject"]),O.predicate.termType==="Quad"?a(O.predicate,w,[...E,"predicate"]):w(O.predicate,[...E,"predicate"]),O.object.termType==="Quad"?a(O.object,w,[...E,"object"]):w(O.object,[...E,"object"]),O.graph.termType==="Quad"?a(O.graph,w,[...E,"graph"]):w(O.graph,[...E,"graph"])}ot.forEachTermsNested=a;function c(O,w){const E=[];return w(O.subject,"subject")&&E.push(O.subject),w(O.predicate,"predicate")&&E.push(O.predicate),w(O.object,"object")&&E.push(O.object),w(O.graph,"graph")&&E.push(O.graph),E}ot.filterTerms=c;function s(O,w,E=[]){let R=[];return O.subject.termType==="Quad"?R=[...R,...s(O.subject,w,[...E,"subject"])]:w(O.subject,[...E,"subject"])&&R.push(O.subject),O.predicate.termType==="Quad"?R=[...R,...s(O.predicate,w,[...E,"predicate"])]:w(O.predicate,[...E,"predicate"])&&R.push(O.predicate),O.object.termType==="Quad"?R=[...R,...s(O.object,w,[...E,"object"])]:w(O.object,[...E,"object"])&&R.push(O.object),O.graph.termType==="Quad"?R=[...R,...s(O.graph,w,[...E,"graph"])]:w(O.graph,[...E,"graph"])&&R.push(O.graph),R}ot.filterTermsNested=s;function d(O,w){const E=[];return w(O.subject,"subject")&&E.push("subject"),w(O.predicate,"predicate")&&E.push("predicate"),w(O.object,"object")&&E.push("object"),w(O.graph,"graph")&&E.push("graph"),E}ot.filterQuadTermNames=d;function l(O,w,E=[]){let R=[];const D=[...E,"subject"];O.subject.termType==="Quad"?R=[...R,...l(O.subject,w,D)]:w(O.subject,D)&&R.push(D);const B=[...E,"predicate"];O.predicate.termType==="Quad"?R=[...R,...l(O.predicate,w,B)]:w(O.predicate,B)&&R.push(B);const C=[...E,"object"];O.object.termType==="Quad"?R=[...R,...l(O.object,w,C)]:w(O.object,C)&&R.push(C);const $=[...E,"graph"];return O.graph.termType==="Quad"?R=[...R,...l(O.graph,w,$)]:w(O.graph,$)&&R.push($),R}ot.filterQuadTermNamesNested=l;function f(O,w,E){return(E||n).quad(w(O.subject,"subject"),w(O.predicate,"predicate"),w(O.object,"object"),w(O.graph,"graph"))}ot.mapTerms=f;function h(O,w,E,R=[]){return(E||n).quad(O.subject.termType==="Quad"?h(O.subject,w,E,[...R,"subject"]):w(O.subject,[...R,"subject"]),O.predicate.termType==="Quad"?h(O.predicate,w,E,[...R,"predicate"]):w(O.predicate,[...R,"predicate"]),O.object.termType==="Quad"?h(O.object,w,E,[...R,"object"]):w(O.object,[...R,"object"]),O.graph.termType==="Quad"?h(O.graph,w,E,[...R,"graph"]):w(O.graph,[...R,"graph"]))}ot.mapTermsNested=h;function p(O,w,E){let R=E;return R=w(R,O.subject,"subject"),R=w(R,O.predicate,"predicate"),R=w(R,O.object,"object"),w(R,O.graph,"graph")}ot.reduceTerms=p;function y(O,w,E,R=[]){let D=E;return O.subject.termType==="Quad"?D=y(O.subject,w,D,[...R,"subject"]):D=w(D,O.subject,[...R,"subject"]),O.predicate.termType==="Quad"?D=y(O.predicate,w,D,[...R,"predicate"]):D=w(D,O.predicate,[...R,"predicate"]),O.object.termType==="Quad"?D=y(O.object,w,D,[...R,"object"]):D=w(D,O.object,[...R,"object"]),O.graph.termType==="Quad"?D=y(O.graph,w,D,[...R,"graph"]):D=w(D,O.graph,[...R,"graph"]),D}ot.reduceTermsNested=y;function _(O,w){return w(O.subject,"subject")&&w(O.predicate,"predicate")&&w(O.object,"object")&&w(O.graph,"graph")}ot.everyTerms=_;function b(O,w,E=[]){return(O.subject.termType==="Quad"?b(O.subject,w,[...E,"subject"]):w(O.subject,[...E,"subject"]))&&(O.predicate.termType==="Quad"?b(O.predicate,w,[...E,"predicate"]):w(O.predicate,[...E,"predicate"]))&&(O.object.termType==="Quad"?b(O.object,w,[...E,"object"]):w(O.object,[...E,"object"]))&&(O.graph.termType==="Quad"?b(O.graph,w,[...E,"graph"]):w(O.graph,[...E,"graph"]))}ot.everyTermsNested=b;function m(O,w){return w(O.subject,"subject")||w(O.predicate,"predicate")||w(O.object,"object")||w(O.graph,"graph")}ot.someTerms=m;function g(O,w,E=[]){return(O.subject.termType==="Quad"?g(O.subject,w,[...E,"subject"]):w(O.subject,[...E,"subject"]))||(O.predicate.termType==="Quad"?g(O.predicate,w,[...E,"predicate"]):w(O.predicate,[...E,"predicate"]))||(O.object.termType==="Quad"?g(O.object,w,[...E,"object"]):w(O.object,[...E,"object"]))||(O.graph.termType==="Quad"?g(O.graph,w,[...E,"graph"]):w(O.graph,[...E,"graph"]))}ot.someTermsNested=g;function T(O,w){if(w.length===0)return O;if(O.termType==="Quad")return T(O[w[0]],w.slice(1));throw new Error(`Tried to get ${w[0]} from term of type ${O.termType}`)}ot.getValueNestedPath=T;function v(O,w){return!w||w.termType==="Variable"||w.termType==="Quad"&&O.termType==="Quad"&&F(O,w)||w.equals(O)}ot.matchTerm=v;function S(O,w,E,R,D){return v(O.subject,w)&&v(O.predicate,E)&&v(O.object,R)&&v(O.graph,D)}ot.matchPattern=S;function F(O,w){return S(O,w.subject,w.predicate,w.object,w.graph)}ot.matchPatternComplete=F;function M(O,w,E={}){const R={};function D(B,C){return _(B,($,Z)=>{var ee,ce;const G=C[Z];switch($.termType){case"Variable":return E.skipVarMapping&&G.termType==="Variable"||((ce=(ee=R[$.value])===null||ee===void 0?void 0:ee.equals(G))!==null&&ce!==void 0?ce:(R[$.value]=G,!0));case"Quad":return G.termType==="Quad"&&D($,G);default:return $.equals(G)}})}return D(w,O)&&(E.returnMappings?R:!0)}return ot.matchPatternMappings=M,ot}var ar={},v6;function WK(){if(v6)return ar;v6=1,Object.defineProperty(ar,"__esModule",{value:!0}),ar.getQuads=ar.getDefaultGraphs=ar.getVariables=ar.getLiterals=ar.getBlankNodes=ar.getNamedNodes=ar.getTermsOfType=ar.uniqTerms=ar.TERM_TYPES=void 0;const u=Yt();ar.TERM_TYPES=["NamedNode","BlankNode","Literal","Variable","DefaultGraph","Quad"];function n(s){const d={};return s.filter(l=>{const f=(0,u.termToString)(l);return!(f in d)&&(d[f]=!0)})}ar.uniqTerms=n;function o(s,d){return s.filter(l=>l.termType===d)}ar.getTermsOfType=o;function i(s){return o(s,"NamedNode")}ar.getNamedNodes=i;function t(s){return o(s,"BlankNode")}ar.getBlankNodes=t;function e(s){return o(s,"Literal")}ar.getLiterals=e;function r(s){return o(s,"Variable")}ar.getVariables=r;function a(s){return o(s,"DefaultGraph")}ar.getDefaultGraphs=a;function c(s){return o(s,"Quad")}return ar.getQuads=c,ar}var T6;function _n(){return T6||(T6=1,(function(u){var n=Aa&&Aa.__createBinding||(Object.create?(function(i,t,e,r){r===void 0&&(r=e);var a=Object.getOwnPropertyDescriptor(t,e);(!a||("get"in a?!t.__esModule:a.writable||a.configurable))&&(a={enumerable:!0,get:function(){return t[e]}}),Object.defineProperty(i,r,a)}):(function(i,t,e,r){r===void 0&&(r=e),i[r]=t[e]})),o=Aa&&Aa.__exportStar||function(i,t){for(var e in i)e!=="default"&&!Object.prototype.hasOwnProperty.call(t,e)&&n(t,i,e)};Object.defineProperty(u,"__esModule",{value:!0}),o(m6(),u),o(WK(),u)})(Aa)),Aa}var w6;function lO(){if(w6)return cf;w6=1;var u=cf&&cf.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(cf,"__esModule",{value:!0});const n=Uh(),o=u(ZT()),i=_n();class t{static flatten(r){return Array.prototype.concat(...r).filter(a=>a)}static objectify(r){if(r.termType){if(r.termType==="Quad")return{type:"pattern",termType:"Quad",subject:t.objectify(r.subject),predicate:t.objectify(r.predicate),object:t.objectify(r.object),graph:t.objectify(r.graph)};{let a={termType:r.termType,value:r.value};return r.language&&(a.language=r.language),r.datatype&&(a.datatype=t.objectify(r.datatype)),a}}if(Array.isArray(r))return r.map(a=>t.objectify(a));if(r===Object(r)){let a={};for(let c of Object.keys(r))a[c]=t.objectify(r[c]);return a}return r}static inScopeVariables(r){const a=[];function c(d){a.find(l=>d.value===l.value)||a.push(d)}function s(d){d.subject.termType==="Variable"&&c(d.subject),d.predicate.termType==="Variable"&&c(d.predicate),d.object.termType==="Variable"&&c(d.object),d.graph.termType==="Variable"&&c(d.graph),d.subject.termType==="Quad"&&s(d.subject),d.predicate.termType==="Quad"&&s(d.predicate),d.object.termType==="Quad"&&s(d.object),d.graph.termType==="Quad"&&s(d.graph)}return t.recurseOperation(r,{[n.types.EXPRESSION]:d=>(d.expressionType===n.expressionTypes.AGGREGATE&&d.variable&&c(d.variable),!0),[n.types.EXTEND]:d=>(c(d.variable),!0),[n.types.GRAPH]:d=>(d.name.termType==="Variable"&&c(d.name),!0),[n.types.GROUP]:d=>(d.variables.forEach(c),!0),[n.types.PATH]:d=>(d.subject.termType==="Variable"&&c(d.subject),d.object.termType==="Variable"&&c(d.object),d.graph.termType==="Variable"&&c(d.graph),d.subject.termType==="Quad"&&s(d.subject),d.object.termType==="Quad"&&s(d.object),d.graph.termType==="Quad"&&s(d.graph),!0),[n.types.PATTERN]:d=>(s(d),!0),[n.types.PROJECT]:d=>(d.variables.forEach(c),!1),[n.types.SERVICE]:d=>(d.name.termType==="Variable"&&c(d.name),!0),[n.types.VALUES]:d=>(d.variables.forEach(c),!0)}),a}static recurseOperation(r,a){let c=r,s=!0;const d=a[r.type];if(d&&(s=d(r)),!s)return;let l=f=>t.recurseOperation(f,a);switch(c.type){case n.types.ALT:c.input.map(l);break;case n.types.ASK:l(c.input);break;case n.types.BGP:c.patterns.forEach(l);break;case n.types.CONSTRUCT:l(c.input),c.template.map(l);break;case n.types.DESCRIBE:l(c.input);break;case n.types.DISTINCT:l(c.input);break;case n.types.EXPRESSION:c.expressionType===n.expressionTypes.EXISTENCE&&l(c.input);break;case n.types.EXTEND:l(c.input),l(c.expression);break;case n.types.FILTER:l(c.input),l(c.expression);break;case n.types.FROM:l(c.input);break;case n.types.GRAPH:l(c.input);break;case n.types.GROUP:l(c.input),c.aggregates.forEach(l);break;case n.types.INV:l(c.path);break;case n.types.JOIN:c.input.map(l);break;case n.types.LEFT_JOIN:c.input.map(l),c.expression&&l(c.expression);break;case n.types.LINK:break;case n.types.MINUS:c.input.map(l);break;case n.types.NOP:break;case n.types.NPS:break;case n.types.ONE_OR_MORE_PATH:l(c.path);break;case n.types.ORDER_BY:l(c.input),c.expressions.forEach(l);break;case n.types.PATH:l(c.predicate);break;case n.types.PATTERN:break;case n.types.PROJECT:l(c.input);break;case n.types.REDUCED:l(c.input);break;case n.types.SEQ:c.input.map(l);break;case n.types.SERVICE:l(c.input);break;case n.types.SLICE:l(c.input);break;case n.types.UNION:c.input.map(l);break;case n.types.VALUES:break;case n.types.ZERO_OR_MORE_PATH:l(c.path);break;case n.types.ZERO_OR_ONE_PATH:l(c.path);break;case n.types.COMPOSITE_UPDATE:c.updates.forEach(f=>l(f));break;case n.types.DELETE_INSERT:c.delete&&c.delete.forEach(f=>l(f)),c.insert&&c.insert.forEach(f=>l(f)),c.where&&l(c.where);break;case n.types.LOAD:break;case n.types.CLEAR:break;case n.types.CREATE:break;case n.types.DROP:break;case n.types.ADD:break;case n.types.MOVE:break;case n.types.COPY:break;default:throw new Error(`Unknown Operation type ${c.type}`)}}static mapOperation(r,a,c){let s=r,d=!0,l=!0;c=c||new o.default;const f=a[r.type];if(f){const y=f(r,c);s=y.result,d=y.recurse,l=y.copyMetadata!==!1}let h;if(l&&(s.metadata||r.metadata)&&(h={...s.metadata,...r.metadata}),!d)return h&&(s.metadata=h),s;let p=y=>t.mapOperation(y,a,c);switch(s.type){case n.types.ALT:s=c.createAlt(s.input.map(p));break;case n.types.ASK:s=c.createAsk(p(s.input));break;case n.types.BGP:s=c.createBgp(s.patterns.map(p));break;case n.types.CONSTRUCT:s=c.createConstruct(p(s.input),s.template.map(p));break;case n.types.DESCRIBE:s=c.createDescribe(p(s.input),s.terms);break;case n.types.DISTINCT:s=c.createDistinct(p(s.input));break;case n.types.EXPRESSION:s=t.mapExpression(s,a,c);break;case n.types.EXTEND:s=c.createExtend(p(s.input),s.variable,p(s.expression));break;case n.types.FILTER:s=c.createFilter(p(s.input),p(s.expression));break;case n.types.FROM:s=c.createFrom(p(s.input),[...s.default],[...s.named]);break;case n.types.GRAPH:s=c.createGraph(p(s.input),s.name);break;case n.types.GROUP:s=c.createGroup(p(s.input),[].concat(s.variables),s.aggregates.map(p));break;case n.types.INV:s=c.createInv(p(s.path));break;case n.types.JOIN:s=c.createJoin(s.input.map(p));break;case n.types.LEFT_JOIN:s=c.createLeftJoin(p(s.input[0]),p(s.input[1]),s.expression?p(s.expression):void 0);break;case n.types.LINK:s=c.createLink(s.iri);break;case n.types.MINUS:s=c.createMinus(p(s.input[0]),p(s.input[1]));break;case n.types.NOP:s=c.createNop();break;case n.types.NPS:s=c.createNps([].concat(s.iris));break;case n.types.ONE_OR_MORE_PATH:s=c.createOneOrMorePath(p(s.path));break;case n.types.ORDER_BY:s=c.createOrderBy(p(s.input),s.expressions.map(p));break;case n.types.PATH:s=c.createPath(s.subject,p(s.predicate),s.object,s.graph);break;case n.types.PATTERN:s=c.createPattern(s.subject,s.predicate,s.object,s.graph);break;case n.types.PROJECT:s=c.createProject(p(s.input),[...s.variables]);break;case n.types.REDUCED:s=c.createReduced(p(s.input));break;case n.types.SEQ:s=c.createSeq(s.input.map(p));break;case n.types.SERVICE:s=c.createService(p(s.input),s.name,s.silent);break;case n.types.SLICE:s=c.createSlice(p(s.input),s.start,s.length);break;case n.types.UNION:s=c.createUnion(s.input.map(p));break;case n.types.VALUES:s=c.createValues([].concat(s.variables),s.bindings.map(y=>Object.assign({},y)));break;case n.types.ZERO_OR_MORE_PATH:s=c.createZeroOrMorePath(p(s.path));break;case n.types.ZERO_OR_ONE_PATH:s=c.createZeroOrOnePath(p(s.path));break;case n.types.COMPOSITE_UPDATE:s=c.createCompositeUpdate(s.updates.map(p));break;case n.types.DELETE_INSERT:s=c.createDeleteInsert(s.delete?s.delete.map(p):void 0,s.insert?s.insert.map(p):void 0,s.where?p(s.where):void 0);break;case n.types.LOAD:s=c.createLoad(s.source,s.destination,s.silent);break;case n.types.CLEAR:s=c.createClear(s.source,s.silent);break;case n.types.CREATE:s=c.createCreate(s.source,s.silent);break;case n.types.DROP:s=c.createDrop(s.source,s.silent);break;case n.types.ADD:s=c.createAdd(s.source,s.destination);break;case n.types.MOVE:s=c.createMove(s.source,s.destination);break;case n.types.COPY:s=c.createCopy(s.source,s.destination);break;default:throw new Error(`Unknown Operation type ${s.type}`)}return h&&(s.metadata=h),s}static mapExpression(r,a,c){let s=r,d=!0;c=c||new o.default;const l=a[r.expressionType];if(l&&({result:s,recurse:d}=l(r,c)),!d)return s;let f=h=>t.mapOperation(h,a,c);switch(r.expressionType){case n.expressionTypes.AGGREGATE:return r.variable?c.createBoundAggregate(r.variable,r.aggregator,f(r.expression),r.distinct,r.separator):c.createAggregateExpression(r.aggregator,f(r.expression),r.distinct,r.separator);case n.expressionTypes.EXISTENCE:return c.createExistenceExpression(r.not,f(r.input));case n.expressionTypes.NAMED:return c.createNamedExpression(r.name,r.args.map(f));case n.expressionTypes.OPERATOR:return c.createOperatorExpression(r.operator,r.args.map(f));case n.expressionTypes.TERM:return c.createTermExpression(r.term);case n.expressionTypes.WILDCARD:return c.createWildcardExpression();default:throw new Error(`Unknown Expression type ${r.expressionType}`)}}static cloneOperation(r){return t.mapOperation(r,{})}static cloneExpression(r){return t.mapExpression(r,{})}static createUniqueVariable(r,a,c){let s=0,d=r;for(;a[d];)d=`${r}${s++}`;return c.variable(d)}static isSimpleTerm(r){return r.termType!==void 0&&r.termType!=="Quad"&&r.termType!=="Wildcard"}static isQuad(r){return r.termType==="Quad"}static hasQuadVariables(r){return(0,i.someTermsNested)(r,a=>a.termType==="Variable")}static isWildcard(r){return r.termType==="Wildcard"}}return cf.default=t,cf}var S6;function YK(){if(S6)return bn;S6=1;var u=bn&&bn.__createBinding||(Object.create?(function(P,N,A,I){I===void 0&&(I=A);var q=Object.getOwnPropertyDescriptor(N,A);(!q||("get"in q?!N.__esModule:q.writable||q.configurable))&&(q={enumerable:!0,get:function(){return N[A]}}),Object.defineProperty(P,I,q)}):(function(P,N,A,I){I===void 0&&(I=A),P[I]=N[A]})),n=bn&&bn.__setModuleDefault||(Object.create?(function(P,N){Object.defineProperty(P,"default",{enumerable:!0,value:N})}):function(P,N){P.default=N}),o=bn&&bn.__importStar||function(P){if(P&&P.__esModule)return P;var N={};if(P!=null)for(var A in P)A!=="default"&&Object.prototype.hasOwnProperty.call(P,A)&&u(N,P,A);return n(N,P),N},i=bn&&bn.__importDefault||function(P){return P&&P.__esModule?P:{default:P}};Object.defineProperty(bn,"__esModule",{value:!0});const t=JK(),e=Yt(),r=o(Uh()),a=i(ZT()),c=i(lO()),s=Vh().Parser,d=r.types;let l=new Set,f=0,h=!1,p;function y(P,N){N=N||{},p=new a.default(N.dataFactory);let A;if(b(P)){let I=new s(N);I._resetBlanks(),A=I.parse(P)}else A=P;return _(A,N.quads,N.blankToVariable)}bn.default=y;function _(P,N,A){if(l=new Set,f=0,h=!!N,!P.type)return p.createNop();if(P.type!=="query"&&P.type!=="update")throw new Error("Translate only works on complete query or update objects.");let I;if(v(P),P.type==="query"){const q={type:"group",patterns:P.where||[]};I=F(q),I=G(P,I)}else P.type==="update"&&(I=ye(P));return A&&(I=V(I)),I}function b(P){return typeof P=="string"}function m(P){return!!(P!=null&&P.termType)}function g(P){return P.subject&&P.predicate&&P.object}function T(P){return(P==null?void 0:P.termType)==="Variable"}function v(P){if(m(P))T(P)&&l.add(`?${P.value}`);else if(Array.isArray(P))for(const N of P)v(N);else if(P&&typeof P=="object")for(let N of Object.keys(P))N.startsWith("?")?l.add(N):N.startsWith("$")&&l.add(`?${N.slice(1)}`),v(P[N])}function S(P){let N={};if(g(P)){const A=[S(P.subject),S(P.predicate),S(P.object),P.graph?S(P.graph):{}];Object.assign(N,...A)}else if(m(P))T(P)&&(N[P.value]=P);else if(P.type==="bgp"){const A=P.triples;Object.assign(N,...A.map(S))}else if(P.type==="path")Object.assign(N,...P.items.map(S));else if(P.type==="group"||P.type==="union"||P.type==="optional")Object.assign(N,...P.patterns.map(S));else if(P.type==="service"||P.type==="graph")Object.assign(N,S(P.name)),Object.assign(N,...P.patterns.map(S));else if(P.type==="bind")Object.assign(N,S(P.variable));else if(P.type==="values"){if(P.values.length>0){const A=Object.keys(P.values[0]).map(I=>p.createTerm(I));Object.assign(N,...A.map(S))}}else if(P.type==="query"&&(P.queryType==="SELECT"||P.queryType==="DESCRIBE")){P.where&&P.variables.some(c.default.isWildcard)&&Object.assign(N,...P.where.map(S));for(const A of P.variables)T(A)?Object.assign(N,S(A)):A.variable&&Object.assign(N,S(A.variable));if(P.queryType==="SELECT"){if(P.group)for(const A of P.group)A.variable&&Object.assign(N,S(A.variable));if(P.values){const A={type:"values",values:P.values};Object.assign(N,S(A))}}}return N}function F(P){if(P.type==="bgp")return O(P);if(P.type==="union")return p.createUnion(P.patterns.map(N=>(N.type!=="group"&&(N={type:"group",patterns:[N]}),F(N))));if(P.type==="graph"){const N={type:"group",patterns:P.patterns};let A=F(N);return h?A=$(A,P.name):A=p.createGraph(A,P.name),A}if(P.type==="values")return ce(P);if(P.type==="query")return _(P,h,!1);if(P.type==="group"){let N=[],A=[];for(let H of P.patterns)(H.type==="filter"?N:A).push(H);let I=A.reduce(Z,p.createBgp([])),q=N.map(H=>M(H.expression));return q.length>0&&(I=p.createFilter(I,q.reduce((H,U)=>p.createOperatorExpression("&&",[H,U])))),I}throw new Error(`Unexpected type: ${P.type}`)}function M(P){if(c.default.isSimpleTerm(P))return p.createTermExpression(P);if(c.default.isQuad(P))return c.default.hasQuadVariables(P)?p.createOperatorExpression("triple",[M(P.subject),M(P.predicate),M(P.object)]):p.createTermExpression(P);if(c.default.isWildcard(P))return p.createWildcardExpression();if("aggregation"in P)return p.createAggregateExpression(P.aggregation,M(P.expression),!!P.distinct,P.separator);if("function"in P)return p.createNamedExpression(P.function,P.args.map(M));if("operator"in P)return P.operator==="exists"||P.operator==="notexists"?p.createExistenceExpression(P.operator==="notexists",F(P.args[0])):((P.operator==="in"||P.operator==="notin")&&(P.args=[P.args[0]].concat(P.args[1])),p.createOperatorExpression(P.operator,P.args.map(M)));throw new Error(`Unknown expression: ${JSON.stringify(P)}`)}function O(P){let N=[],A=[];for(let I of P.triples)if("pathType"in I.predicate){let q=w(I);for(let H of q)H.type===d.PATH?(N.length>0&&A.push(p.createBgp(N)),N=[],A.push(H)):N.push(H)}else N.push(B(I));return N.length>0&&A.push(p.createBgp(N)),A.length===1?A[0]:p.createJoin(A)}function w(P){let N=P.subject,A=E(P.predicate),I=P.object;return R(N,A,I)}function E(P){if(c.default.isSimpleTerm(P)){if(P.termType==="NamedNode")return p.createLink(P);throw new Error(`Path predicate should be a NamedNode, got ${JSON.stringify(P)}`)}if(P.pathType==="^")return p.createInv(E(P.items[0]));if(P.pathType==="!"){let N=[],A=[],I;"pathType"in P.items[0]&&P.items[0].pathType==="|"?I=P.items[0].items:I=P.items;for(let U of I)if(c.default.isSimpleTerm(U))N.push(U);else if(U.pathType==="^")A.push(U.items[0]);else throw new Error(`Unexpected item: ${JSON.stringify(U)}`);let q=p.createNps(N),H=p.createInv(p.createNps(A));return A.length===0?q:N.length===0?H:p.createAlt([q,H])}if(P.pathType==="/")return p.createSeq(P.items.map(E));if(P.pathType==="|")return p.createAlt(P.items.map(E));if(P.pathType==="*")return p.createZeroOrMorePath(E(P.items[0]));if(P.pathType==="+")return p.createOneOrMorePath(E(P.items[0]));if(P.pathType==="?")return p.createZeroOrOnePath(E(P.items[0]));throw new Error(`Unable to translate path expression ${JSON.stringify(P)}`)}function R(P,N,A){if(N.type===d.LINK)return[p.createPattern(P,N.iri,A)];if(N.type===d.INV)return R(A,N.path,P);if(N.type===d.SEQ){let I=P;return c.default.flatten(N.input.map((q,H)=>{const U=H===N.input.length-1?A:D(),X=R(I,q,U);return U.termType==="Variable"&&(I=U),X}))}return[p.createPath(P,N,A)]}function D(){let P=`?var${f++}`;return l.has(P)?D():(l.add(P),p.createTerm(P))}function B(P){if("pathType"in P.predicate)throw new Error("Trying to translate property path to quad.");return p.createPattern(P.subject,P.predicate,P.object,P.graph)}let C=Object.values(d);function $(P,N,A){if(P.type===d.GRAPH){if(A)throw new Error("Recursing through nested GRAPH statements with a replacement is impossible.");P=$(P.input,P.name)}else if(P.type!==d.SERVICE)if(P.type===d.BGP)P.patterns=P.patterns.map(I=>(A&&(I.subject.equals(N)&&(I.subject=A),I.predicate.equals(N)&&(I.predicate=A),I.object.equals(N)&&(I.object=A)),I.graph.termType==="DefaultGraph"&&(I.graph=N),I));else if(P.type===d.PATH)A&&(P.subject.equals(N)&&(P.subject=A),P.object.equals(N)&&(P.object=A)),P.graph.termType==="DefaultGraph"&&(P.graph=N);else if(P.type===d.PROJECT&&!A)P.variables.some(I=>I.equals(N))||(A=D()),P.input=$(P.input,N,A);else if(P.type===d.EXTEND&&!A)P.variable.equals(N)&&(A=D()),P.input=$(P.input,N,A);else for(let I of Object.keys(P))Array.isArray(P[I])?P[I]=P[I].map(q=>$(q,N,A)):C.indexOf(P[I].type)>=0?P[I]=$(P[I],N,A):A&&T(P[I])&&P[I].equals(N)&&(P[I]=A);return P}function Z(P,N){if(N.type==="optional"){const A=F({type:"group",patterns:N.patterns});A.type===d.FILTER?P=p.createLeftJoin(P,A.input,A.expression):P=p.createLeftJoin(P,A)}else if(N.type==="minus"){const A=F({type:"group",patterns:N.patterns});P=p.createMinus(P,A)}else if(N.type==="bind")P=p.createExtend(P,N.variable,M(N.expression));else if(N.type==="service"){const A={type:"group",patterns:N.patterns},I=p.createService(F(A),N.name,N.silent);P=ee(P,I)}else{const A=F(N);P=ee(P,A)}return P}function ee(P,N){return P.type===d.BGP&&N.type===d.BGP?P=p.createBgp([...P.patterns,...N.patterns]):P.type===d.BGP&&P.patterns.length===0?P=N:N.type===d.BGP&&N.patterns.length===0||(P=p.createJoin([P,N])),P}function ce(P){let N=(P.values.length===0?[]:Object.keys(P.values[0])).map(p.createTerm.bind(p)),A=P.values.map(I=>{let q=Object.keys(I);q=q.filter(U=>I[U]!==void 0);let H={};for(let U of q)H[U]=I[U];return H});return p.createValues(N,A)}function G(P,N){const A=P,I=[],q={};if(A.variables=A.variables&&A.variables.map(U=>fe(U,q)),A.having=A.having&&A.having.map(U=>fe(U,q)),A.order=A.order&&A.order.map(U=>fe(U,q)),A.group||Object.keys(q).length>0){const U=Object.keys(q).map(Q=>me(q[Q],p.createTerm(Q))),X=[];if(A.group)for(const Q of A.group)if(c.default.isSimpleTerm(Q.expression))X.push(Q.expression);else{const k="variable"in Q?Q.variable:D();N=p.createExtend(N,k,M(Q.expression)),X.push(k)}N=p.createGroup(N,X,U)}if(A.having)for(let U of A.having)N=p.createFilter(N,M(U));P.values&&(N=p.createJoin([N,ce(P)]));let H=[];if(P.queryType==="SELECT"||P.queryType==="DESCRIBE")if(P.variables.some(U=>U&&c.default.isWildcard(U)))H=Object.values(S(P)).sort((U,X)=>U.value.localeCompare(X.value));else for(let U of P.variables)T(U)||!("variable"in U)?H.push(U):U.variable&&(H.push(U.variable),I.push(U));for(let U of I)N=p.createExtend(N,U.variable,M(U.expression));return A.order&&(N=p.createOrderBy(N,A.order.map(U=>{let X=M(U.expression);return U.descending&&(X=p.createOperatorExpression("desc",[X])),X}))),P.queryType==="SELECT"&&(N=p.createProject(N,H)),A.distinct&&(N=p.createDistinct(N)),A.reduced&&(N=p.createReduced(N)),P.queryType==="CONSTRUCT"?N=p.createConstruct(N,(P.template||[]).map(B)):P.queryType==="ASK"?N=p.createAsk(N):P.queryType==="DESCRIBE"&&(N=p.createDescribe(N,H)),(A.offset||A.limit)&&(N=p.createSlice(N,A.offset||0,A.limit)),A.from&&(N=p.createFrom(N,A.from.default,A.from.named)),N}function fe(P,N){if("type"in P&&P.type==="aggregate"){let A=!1,I;for(let q of Object.keys(N))if(t(N[q],P)){I=p.createTerm(q),A=!0;break}return A||(I=D(),N[(0,e.termToString)(I)]=P),I}return"expression"in P&&P.expression?{...P,expression:fe(P.expression,N)}:"args"in P&&P.args?{...P,args:P.args.map(A=>fe(A,N))}:P}function me(P,N){if(P.type!=="aggregate"||!P.aggregation)throw new Error(`Unexpected input: ${JSON.stringify(P)}`);const A=M(P);return A.variable=N,A}function ye(P){return P.updates.length===1?re(P.updates[0]):p.createCompositeUpdate(P.updates.map(re))}function re(P){if("type"in P){if(P.type==="load")return he(P);if(P.type==="clear"||P.type==="create"||P.type==="drop")return Ie(P);if(P.type==="add"||P.type==="copy"||P.type==="move")return be(P)}else if(P.updateType==="insertdelete"||P.updateType==="deletewhere"||P.updateType==="delete"||P.updateType==="insert")return xe(P);throw new Error(`Unknown update type ${JSON.stringify(P)}`)}function xe(P){if(!h)throw new Error("INSERT/DELETE operations are only supported with quads option enabled");let N=[],A=[],I;if(P.delete&&(N=c.default.flatten(P.delete.map(q=>Re(q,P.graph)))),P.insert&&(A=c.default.flatten(P.insert.map(q=>Re(q,P.graph)))),P.where&&P.where.length>0){I=F({type:"group",patterns:P.where});const q=P.using;q?I=p.createFrom(I,q.default,q.named):P.graph&&(I=$(I,P.graph))}else P.updateType==="deletewhere"&&N.length>0&&(I=p.createBgp(N));return p.createDeleteInsert(N.length>0?N:void 0,A.length>0?A:void 0,I)}function Re(P,N){let A=N;P.type==="graph"&&(A=P.name);let I=P.triples;return A&&(I=I.map(q=>Object.assign(q,{graph:A}))),I.map(B)}function Ie(P){let N;switch(c.default.isSimpleTerm(P.graph)?N=P.graph:P.graph.all?N="ALL":P.graph.default?N="DEFAULT":P.graph.named?N="NAMED":N=P.graph.name,P.type){case"clear":return p.createClear(N,P.silent);case"create":return p.createCreate(N,P.silent);case"drop":return p.createDrop(N,P.silent)}}function he(P){return p.createLoad(P.source,P.destination,P.silent)}function be(P){const N=P.source.default?"DEFAULT":P.source.name,A=P.destination.default?"DEFAULT":P.destination.name;switch(P.type){case"copy":return p.createCopy(N,A,P.silent);case"move":return p.createMove(N,A,P.silent);case"add":return p.createAdd(N,A,P.silent)}}function V(P){const N={},A=Array.from(l).reduce((q,H)=>(q[H]=!0,q),{});return c.default.mapOperation(P,{[r.types.DELETE_INSERT]:q=>({result:p.createDeleteInsert(q.delete,q.insert,q.where&&V(q.where)),recurse:!1}),[r.types.PATH]:(q,H)=>({result:H.createPath(I(q.subject),q.predicate,I(q.object),I(q.graph)),recurse:!1}),[r.types.PATTERN]:(q,H)=>({result:H.createPattern(I(q.subject),I(q.predicate),I(q.object),I(q.graph)),recurse:!1}),[r.types.CONSTRUCT]:q=>({result:p.createConstruct(V(q.input),q.template),recurse:!1})});function I(q){if(q.termType==="BlankNode"){let H=N[q.value];return H||(H=c.default.createUniqueVariable(q.value,A,p.dataFactory),A[H.value]=!0,N[q.value]=H),H}return q}}return bn}var Vr={},Ea={},Ot={},fO={},Mt={},hO,O6;function Qh(){if(O6)return hO;O6=1,hO=u;function u(n,o){if(!n)throw new Error(o||"Assertion failed")}return u.equal=function(o,i,t){if(o!=i)throw new Error(t||"Assertion failed: "+o+" != "+i)},hO}var e3={exports:{}},A6;function ZK(){return A6||(A6=1,typeof Object.create=="function"?e3.exports=function(n,o){o&&(n.super_=o,n.prototype=Object.create(o.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}}))}:e3.exports=function(n,o){if(o){n.super_=o;var i=function(){};i.prototype=o.prototype,n.prototype=new i,n.prototype.constructor=n}}),e3.exports}var E6;function zn(){if(E6)return Mt;E6=1;var u=Qh(),n=ZK();Mt.inherits=n;function o(R,D){return(R.charCodeAt(D)&64512)!==55296||D<0||D+1>=R.length?!1:(R.charCodeAt(D+1)&64512)===56320}function i(R,D){if(Array.isArray(R))return R.slice();if(!R)return[];var B=[];if(typeof R=="string")if(D){if(D==="hex")for(R=R.replace(/[^a-z0-9]+/ig,""),R.length%2!==0&&(R="0"+R),$=0;$<R.length;$+=2)B.push(parseInt(R[$]+R[$+1],16))}else for(var C=0,$=0;$<R.length;$++){var Z=R.charCodeAt($);Z<128?B[C++]=Z:Z<2048?(B[C++]=Z>>6|192,B[C++]=Z&63|128):o(R,$)?(Z=65536+((Z&1023)<<10)+(R.charCodeAt(++$)&1023),B[C++]=Z>>18|240,B[C++]=Z>>12&63|128,B[C++]=Z>>6&63|128,B[C++]=Z&63|128):(B[C++]=Z>>12|224,B[C++]=Z>>6&63|128,B[C++]=Z&63|128)}else for($=0;$<R.length;$++)B[$]=R[$]|0;return B}Mt.toArray=i;function t(R){for(var D="",B=0;B<R.length;B++)D+=a(R[B].toString(16));return D}Mt.toHex=t;function e(R){var D=R>>>24|R>>>8&65280|R<<8&16711680|(R&255)<<24;return D>>>0}Mt.htonl=e;function r(R,D){for(var B="",C=0;C<R.length;C++){var $=R[C];D==="little"&&($=e($)),B+=c($.toString(16))}return B}Mt.toHex32=r;function a(R){return R.length===1?"0"+R:R}Mt.zero2=a;function c(R){return R.length===7?"0"+R:R.length===6?"00"+R:R.length===5?"000"+R:R.length===4?"0000"+R:R.length===3?"00000"+R:R.length===2?"000000"+R:R.length===1?"0000000"+R:R}Mt.zero8=c;function s(R,D,B,C){var $=B-D;u($%4===0);for(var Z=new Array($/4),ee=0,ce=D;ee<Z.length;ee++,ce+=4){var G;C==="big"?G=R[ce]<<24|R[ce+1]<<16|R[ce+2]<<8|R[ce+3]:G=R[ce+3]<<24|R[ce+2]<<16|R[ce+1]<<8|R[ce],Z[ee]=G>>>0}return Z}Mt.join32=s;function d(R,D){for(var B=new Array(R.length*4),C=0,$=0;C<R.length;C++,$+=4){var Z=R[C];D==="big"?(B[$]=Z>>>24,B[$+1]=Z>>>16&255,B[$+2]=Z>>>8&255,B[$+3]=Z&255):(B[$+3]=Z>>>24,B[$+2]=Z>>>16&255,B[$+1]=Z>>>8&255,B[$]=Z&255)}return B}Mt.split32=d;function l(R,D){return R>>>D|R<<32-D}Mt.rotr32=l;function f(R,D){return R<<D|R>>>32-D}Mt.rotl32=f;function h(R,D){return R+D>>>0}Mt.sum32=h;function p(R,D,B){return R+D+B>>>0}Mt.sum32_3=p;function y(R,D,B,C){return R+D+B+C>>>0}Mt.sum32_4=y;function _(R,D,B,C,$){return R+D+B+C+$>>>0}Mt.sum32_5=_;function b(R,D,B,C){var $=R[D],Z=R[D+1],ee=C+Z>>>0,ce=(ee<C?1:0)+B+$;R[D]=ce>>>0,R[D+1]=ee}Mt.sum64=b;function m(R,D,B,C){var $=D+C>>>0,Z=($<D?1:0)+R+B;return Z>>>0}Mt.sum64_hi=m;function g(R,D,B,C){var $=D+C;return $>>>0}Mt.sum64_lo=g;function T(R,D,B,C,$,Z,ee,ce){var G=0,fe=D;fe=fe+C>>>0,G+=fe<D?1:0,fe=fe+Z>>>0,G+=fe<Z?1:0,fe=fe+ce>>>0,G+=fe<ce?1:0;var me=R+B+$+ee+G;return me>>>0}Mt.sum64_4_hi=T;function v(R,D,B,C,$,Z,ee,ce){var G=D+C+Z+ce;return G>>>0}Mt.sum64_4_lo=v;function S(R,D,B,C,$,Z,ee,ce,G,fe){var me=0,ye=D;ye=ye+C>>>0,me+=ye<D?1:0,ye=ye+Z>>>0,me+=ye<Z?1:0,ye=ye+ce>>>0,me+=ye<ce?1:0,ye=ye+fe>>>0,me+=ye<fe?1:0;var re=R+B+$+ee+G+me;return re>>>0}Mt.sum64_5_hi=S;function F(R,D,B,C,$,Z,ee,ce,G,fe){var me=D+C+Z+ce+fe;return me>>>0}Mt.sum64_5_lo=F;function M(R,D,B){var C=D<<32-B|R>>>B;return C>>>0}Mt.rotr64_hi=M;function O(R,D,B){var C=R<<32-B|D>>>B;return C>>>0}Mt.rotr64_lo=O;function w(R,D,B){return R>>>B}Mt.shr64_hi=w;function E(R,D,B){var C=R<<32-B|D>>>B;return C>>>0}return Mt.shr64_lo=E,Mt}var pO={},x6;function Hh(){if(x6)return pO;x6=1;var u=zn(),n=Qh();function o(){this.pending=null,this.pendingTotal=0,this.blockSize=this.constructor.blockSize,this.outSize=this.constructor.outSize,this.hmacStrength=this.constructor.hmacStrength,this.padLength=this.constructor.padLength/8,this.endian="big",this._delta8=this.blockSize/8,this._delta32=this.blockSize/32}return pO.BlockHash=o,o.prototype.update=function(t,e){if(t=u.toArray(t,e),this.pending?this.pending=this.pending.concat(t):this.pending=t,this.pendingTotal+=t.length,this.pending.length>=this._delta8){t=this.pending;var r=t.length%this._delta8;this.pending=t.slice(t.length-r,t.length),this.pending.length===0&&(this.pending=null),t=u.join32(t,0,t.length-r,this.endian);for(var a=0;a<t.length;a+=this._delta32)this._update(t,a,a+this._delta32)}return this},o.prototype.digest=function(t){return this.update(this._pad()),n(this.pending===null),this._digest(t)},o.prototype._pad=function(){var t=this.pendingTotal,e=this._delta8,r=e-(t+this.padLength)%e,a=new Array(r+this.padLength);a[0]=128;for(var c=1;c<r;c++)a[c]=0;if(t<<=3,this.endian==="big"){for(var s=8;s<this.padLength;s++)a[c++]=0;a[c++]=0,a[c++]=0,a[c++]=0,a[c++]=0,a[c++]=t>>>24&255,a[c++]=t>>>16&255,a[c++]=t>>>8&255,a[c++]=t&255}else for(a[c++]=t&255,a[c++]=t>>>8&255,a[c++]=t>>>16&255,a[c++]=t>>>24&255,a[c++]=0,a[c++]=0,a[c++]=0,a[c++]=0,s=8;s<this.padLength;s++)a[c++]=0;return a},pO}var xa={},Xn={},R6;function F6(){if(R6)return Xn;R6=1;var u=zn(),n=u.rotr32;function o(d,l,f,h){if(d===0)return i(l,f,h);if(d===1||d===3)return e(l,f,h);if(d===2)return t(l,f,h)}Xn.ft_1=o;function i(d,l,f){return d&l^~d&f}Xn.ch32=i;function t(d,l,f){return d&l^d&f^l&f}Xn.maj32=t;function e(d,l,f){return d^l^f}Xn.p32=e;function r(d){return n(d,2)^n(d,13)^n(d,22)}Xn.s0_256=r;function a(d){return n(d,6)^n(d,11)^n(d,25)}Xn.s1_256=a;function c(d){return n(d,7)^n(d,18)^d>>>3}Xn.g0_256=c;function s(d){return n(d,17)^n(d,19)^d>>>10}return Xn.g1_256=s,Xn}var yO,I6;function ek(){if(I6)return yO;I6=1;var u=zn(),n=Hh(),o=F6(),i=u.rotl32,t=u.sum32,e=u.sum32_5,r=o.ft_1,a=n.BlockHash,c=[1518500249,1859775393,2400959708,3395469782];function s(){if(!(this instanceof s))return new s;a.call(this),this.h=[1732584193,4023233417,2562383102,271733878,3285377520],this.W=new Array(80)}return u.inherits(s,a),yO=s,s.blockSize=512,s.outSize=160,s.hmacStrength=80,s.padLength=64,s.prototype._update=function(l,f){for(var h=this.W,p=0;p<16;p++)h[p]=l[f+p];for(;p<h.length;p++)h[p]=i(h[p-3]^h[p-8]^h[p-14]^h[p-16],1);var y=this.h[0],_=this.h[1],b=this.h[2],m=this.h[3],g=this.h[4];for(p=0;p<h.length;p++){var T=~~(p/20),v=e(i(y,5),r(T,_,b,m),g,h[p],c[T]);g=m,m=b,b=i(_,30),_=y,y=v}this.h[0]=t(this.h[0],y),this.h[1]=t(this.h[1],_),this.h[2]=t(this.h[2],b),this.h[3]=t(this.h[3],m),this.h[4]=t(this.h[4],g)},s.prototype._digest=function(l){return l==="hex"?u.toHex32(this.h,"big"):u.split32(this.h,"big")},yO}var bO,P6;function D6(){if(P6)return bO;P6=1;var u=zn(),n=Hh(),o=F6(),i=Qh(),t=u.sum32,e=u.sum32_4,r=u.sum32_5,a=o.ch32,c=o.maj32,s=o.s0_256,d=o.s1_256,l=o.g0_256,f=o.g1_256,h=n.BlockHash,p=[1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298];function y(){if(!(this instanceof y))return new y;h.call(this),this.h=[1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225],this.k=p,this.W=new Array(64)}return u.inherits(y,h),bO=y,y.blockSize=512,y.outSize=256,y.hmacStrength=192,y.padLength=64,y.prototype._update=function(b,m){for(var g=this.W,T=0;T<16;T++)g[T]=b[m+T];for(;T<g.length;T++)g[T]=e(f(g[T-2]),g[T-7],l(g[T-15]),g[T-16]);var v=this.h[0],S=this.h[1],F=this.h[2],M=this.h[3],O=this.h[4],w=this.h[5],E=this.h[6],R=this.h[7];for(i(this.k.length===g.length),T=0;T<g.length;T++){var D=r(R,d(O),a(O,w,E),this.k[T],g[T]),B=t(s(v),c(v,S,F));R=E,E=w,w=O,O=t(M,D),M=F,F=S,S=v,v=t(D,B)}this.h[0]=t(this.h[0],v),this.h[1]=t(this.h[1],S),this.h[2]=t(this.h[2],F),this.h[3]=t(this.h[3],M),this.h[4]=t(this.h[4],O),this.h[5]=t(this.h[5],w),this.h[6]=t(this.h[6],E),this.h[7]=t(this.h[7],R)},y.prototype._digest=function(b){return b==="hex"?u.toHex32(this.h,"big"):u.split32(this.h,"big")},bO}var _O,N6;function tk(){if(N6)return _O;N6=1;var u=zn(),n=D6();function o(){if(!(this instanceof o))return new o;n.call(this),this.h=[3238371032,914150663,812702999,4144912697,4290775857,1750603025,1694076839,3204075428]}return u.inherits(o,n),_O=o,o.blockSize=512,o.outSize=224,o.hmacStrength=192,o.padLength=64,o.prototype._digest=function(t){return t==="hex"?u.toHex32(this.h.slice(0,7),"big"):u.split32(this.h.slice(0,7),"big")},_O}var gO,j6;function L6(){if(j6)return gO;j6=1;var u=zn(),n=Hh(),o=Qh(),i=u.rotr64_hi,t=u.rotr64_lo,e=u.shr64_hi,r=u.shr64_lo,a=u.sum64,c=u.sum64_hi,s=u.sum64_lo,d=u.sum64_4_hi,l=u.sum64_4_lo,f=u.sum64_5_hi,h=u.sum64_5_lo,p=n.BlockHash,y=[1116352408,3609767458,1899447441,602891725,3049323471,3964484399,3921009573,2173295548,961987163,4081628472,1508970993,3053834265,2453635748,2937671579,2870763221,3664609560,3624381080,2734883394,310598401,1164996542,607225278,1323610764,1426881987,3590304994,1925078388,4068182383,2162078206,991336113,2614888103,633803317,3248222580,3479774868,3835390401,2666613458,4022224774,944711139,264347078,2341262773,604807628,2007800933,770255983,1495990901,1249150122,1856431235,1555081692,3175218132,1996064986,2198950837,2554220882,3999719339,2821834349,766784016,2952996808,2566594879,3210313671,3203337956,3336571891,1034457026,3584528711,2466948901,113926993,3758326383,338241895,168717936,666307205,1188179964,773529912,1546045734,1294757372,1522805485,1396182291,2643833823,1695183700,2343527390,1986661051,1014477480,2177026350,1206759142,2456956037,344077627,2730485921,1290863460,2820302411,3158454273,3259730800,3505952657,3345764771,106217008,3516065817,3606008344,3600352804,1432725776,4094571909,1467031594,275423344,851169720,430227734,3100823752,506948616,1363258195,659060556,3750685593,883997877,3785050280,958139571,3318307427,1322822218,3812723403,1537002063,2003034995,1747873779,3602036899,1955562222,1575990012,2024104815,1125592928,2227730452,2716904306,2361852424,442776044,2428436474,593698344,2756734187,3733110249,3204031479,2999351573,3329325298,3815920427,3391569614,3928383900,3515267271,566280711,3940187606,3454069534,4118630271,4000239992,116418474,1914138554,174292421,2731055270,289380356,3203993006,460393269,320620315,685471733,587496836,852142971,1086792851,1017036298,365543100,1126000580,2618297676,1288033470,3409855158,1501505948,4234509866,1607167915,987167468,1816402316,1246189591];function _(){if(!(this instanceof _))return new _;p.call(this),this.h=[1779033703,4089235720,3144134277,2227873595,1013904242,4271175723,2773480762,1595750129,1359893119,2917565137,2600822924,725511199,528734635,4215389547,1541459225,327033209],this.k=y,this.W=new Array(160)}u.inherits(_,p),gO=_,_.blockSize=1024,_.outSize=512,_.hmacStrength=192,_.padLength=128,_.prototype._prepareBlock=function(B,C){for(var $=this.W,Z=0;Z<32;Z++)$[Z]=B[C+Z];for(;Z<$.length;Z+=2){var ee=E($[Z-4],$[Z-3]),ce=R($[Z-4],$[Z-3]),G=$[Z-14],fe=$[Z-13],me=O($[Z-30],$[Z-29]),ye=w($[Z-30],$[Z-29]),re=$[Z-32],xe=$[Z-31];$[Z]=d(ee,ce,G,fe,me,ye,re,xe),$[Z+1]=l(ee,ce,G,fe,me,ye,re,xe)}},_.prototype._update=function(B,C){this._prepareBlock(B,C);var $=this.W,Z=this.h[0],ee=this.h[1],ce=this.h[2],G=this.h[3],fe=this.h[4],me=this.h[5],ye=this.h[6],re=this.h[7],xe=this.h[8],Re=this.h[9],Ie=this.h[10],he=this.h[11],be=this.h[12],V=this.h[13],P=this.h[14],N=this.h[15];o(this.k.length===$.length);for(var A=0;A<$.length;A+=2){var I=P,q=N,H=F(xe,Re),U=M(xe,Re),X=b(xe,Re,Ie,he,be),Q=m(xe,Re,Ie,he,be,V),k=this.k[A],oe=this.k[A+1],se=$[A],Se=$[A+1],Me=f(I,q,H,U,X,Q,k,oe,se,Se),Oe=h(I,q,H,U,X,Q,k,oe,se,Se);I=v(Z,ee),q=S(Z,ee),H=g(Z,ee,ce,G,fe),U=T(Z,ee,ce,G,fe,me);var ue=c(I,q,H,U),L=s(I,q,H,U);P=be,N=V,be=Ie,V=he,Ie=xe,he=Re,xe=c(ye,re,Me,Oe),Re=s(re,re,Me,Oe),ye=fe,re=me,fe=ce,me=G,ce=Z,G=ee,Z=c(Me,Oe,ue,L),ee=s(Me,Oe,ue,L)}a(this.h,0,Z,ee),a(this.h,2,ce,G),a(this.h,4,fe,me),a(this.h,6,ye,re),a(this.h,8,xe,Re),a(this.h,10,Ie,he),a(this.h,12,be,V),a(this.h,14,P,N)},_.prototype._digest=function(B){return B==="hex"?u.toHex32(this.h,"big"):u.split32(this.h,"big")};function b(D,B,C,$,Z){var ee=D&C^~D&Z;return ee<0&&(ee+=4294967296),ee}function m(D,B,C,$,Z,ee){var ce=B&$^~B&ee;return ce<0&&(ce+=4294967296),ce}function g(D,B,C,$,Z){var ee=D&C^D&Z^C&Z;return ee<0&&(ee+=4294967296),ee}function T(D,B,C,$,Z,ee){var ce=B&$^B&ee^$&ee;return ce<0&&(ce+=4294967296),ce}function v(D,B){var C=i(D,B,28),$=i(B,D,2),Z=i(B,D,7),ee=C^$^Z;return ee<0&&(ee+=4294967296),ee}function S(D,B){var C=t(D,B,28),$=t(B,D,2),Z=t(B,D,7),ee=C^$^Z;return ee<0&&(ee+=4294967296),ee}function F(D,B){var C=i(D,B,14),$=i(D,B,18),Z=i(B,D,9),ee=C^$^Z;return ee<0&&(ee+=4294967296),ee}function M(D,B){var C=t(D,B,14),$=t(D,B,18),Z=t(B,D,9),ee=C^$^Z;return ee<0&&(ee+=4294967296),ee}function O(D,B){var C=i(D,B,1),$=i(D,B,8),Z=e(D,B,7),ee=C^$^Z;return ee<0&&(ee+=4294967296),ee}function w(D,B){var C=t(D,B,1),$=t(D,B,8),Z=r(D,B,7),ee=C^$^Z;return ee<0&&(ee+=4294967296),ee}function E(D,B){var C=i(D,B,19),$=i(B,D,29),Z=e(D,B,6),ee=C^$^Z;return ee<0&&(ee+=4294967296),ee}function R(D,B){var C=t(D,B,19),$=t(B,D,29),Z=r(D,B,6),ee=C^$^Z;return ee<0&&(ee+=4294967296),ee}return gO}var mO,M6;function rk(){if(M6)return mO;M6=1;var u=zn(),n=L6();function o(){if(!(this instanceof o))return new o;n.call(this),this.h=[3418070365,3238371032,1654270250,914150663,2438529370,812702999,355462360,4144912697,1731405415,4290775857,2394180231,1750603025,3675008525,1694076839,1203062813,3204075428]}return u.inherits(o,n),mO=o,o.blockSize=1024,o.outSize=384,o.hmacStrength=192,o.padLength=128,o.prototype._digest=function(t){return t==="hex"?u.toHex32(this.h.slice(0,12),"big"):u.split32(this.h.slice(0,12),"big")},mO}var q6;function nk(){return q6||(q6=1,xa.sha1=ek(),xa.sha224=tk(),xa.sha256=D6(),xa.sha384=rk(),xa.sha512=L6()),xa}var vO={},C6;function ik(){if(C6)return vO;C6=1;var u=zn(),n=Hh(),o=u.rotl32,i=u.sum32,t=u.sum32_3,e=u.sum32_4,r=n.BlockHash;function a(){if(!(this instanceof a))return new a;r.call(this),this.h=[1732584193,4023233417,2562383102,271733878,3285377520],this.endian="little"}u.inherits(a,r),vO.ripemd160=a,a.blockSize=512,a.outSize=160,a.hmacStrength=192,a.padLength=64,a.prototype._update=function(_,b){for(var m=this.h[0],g=this.h[1],T=this.h[2],v=this.h[3],S=this.h[4],F=m,M=g,O=T,w=v,E=S,R=0;R<80;R++){var D=i(o(e(m,c(R,g,T,v),_[l[R]+b],s(R)),h[R]),S);m=S,S=v,v=o(T,10),T=g,g=D,D=i(o(e(F,c(79-R,M,O,w),_[f[R]+b],d(R)),p[R]),E),F=E,E=w,w=o(O,10),O=M,M=D}D=t(this.h[1],T,w),this.h[1]=t(this.h[2],v,E),this.h[2]=t(this.h[3],S,F),this.h[3]=t(this.h[4],m,M),this.h[4]=t(this.h[0],g,O),this.h[0]=D},a.prototype._digest=function(_){return _==="hex"?u.toHex32(this.h,"little"):u.split32(this.h,"little")};function c(y,_,b,m){return y<=15?_^b^m:y<=31?_&b|~_&m:y<=47?(_|~b)^m:y<=63?_&m|b&~m:_^(b|~m)}function s(y){return y<=15?0:y<=31?1518500249:y<=47?1859775393:y<=63?2400959708:2840853838}function d(y){return y<=15?1352829926:y<=31?1548603684:y<=47?1836072691:y<=63?2053994217:0}var l=[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,7,4,13,1,10,6,15,3,12,0,9,5,2,14,11,8,3,10,14,4,9,15,8,1,2,7,0,6,13,11,5,12,1,9,11,10,0,8,12,4,13,3,7,15,14,5,6,2,4,0,5,9,7,12,2,10,14,1,3,8,11,6,15,13],f=[5,14,7,0,9,2,11,4,13,6,15,8,1,10,3,12,6,11,3,7,0,13,5,10,14,15,8,12,4,9,1,2,15,5,1,3,7,14,6,9,11,8,12,2,10,0,4,13,8,6,4,1,3,11,15,0,5,12,2,13,9,7,10,14,12,15,10,4,1,5,8,7,6,2,13,14,0,3,9,11],h=[11,14,15,12,5,8,7,9,11,13,14,15,6,7,9,8,7,6,8,13,11,9,7,15,7,12,15,9,11,7,13,12,11,13,6,7,14,9,13,15,14,8,13,6,5,12,7,5,11,12,14,15,14,15,9,8,9,14,5,6,8,6,5,12,9,15,5,11,6,8,13,12,5,12,13,14,11,8,5,6],p=[8,9,9,11,13,15,15,5,7,7,8,11,14,14,12,6,9,13,15,7,12,8,9,11,7,7,12,7,6,15,13,11,9,7,15,11,8,6,6,14,12,13,5,14,13,13,7,5,15,5,8,11,14,14,6,14,6,9,12,9,12,5,15,8,8,5,12,9,12,5,14,6,8,13,6,5,15,13,11,11];return vO}var TO,B6;function ak(){if(B6)return TO;B6=1;var u=zn(),n=Qh();function o(i,t,e){if(!(this instanceof o))return new o(i,t,e);this.Hash=i,this.blockSize=i.blockSize/8,this.outSize=i.outSize/8,this.inner=null,this.outer=null,this._init(u.toArray(t,e))}return TO=o,o.prototype._init=function(t){t.length>this.blockSize&&(t=new this.Hash().update(t).digest()),n(t.length<=this.blockSize);for(var e=t.length;e<this.blockSize;e++)t.push(0);for(e=0;e<t.length;e++)t[e]^=54;for(this.inner=new this.Hash().update(t),e=0;e<t.length;e++)t[e]^=106;this.outer=new this.Hash().update(t)},o.prototype.update=function(t,e){return this.inner.update(t,e),this},o.prototype.digest=function(t){return this.outer.update(this.inner.digest()),this.outer.digest(t)},TO}var $6;function Gh(){return $6||($6=1,(function(u){var n=u;n.utils=zn(),n.common=Hh(),n.sha=nk(),n.ripemd=ik(),n.hmac=ak(),n.sha1=n.sha.sha1,n.sha256=n.sha.sha256,n.sha224=n.sha.sha224,n.sha384=n.sha.sha384,n.sha512=n.sha.sha512,n.ripemd160=n.ripemd.ripemd160})(fO)),fO}var U6;function uk(){if(U6)return Ot;U6=1,Object.defineProperty(Ot,"__esModule",{value:!0}),Ot.isTermGrounded=Ot.termToSignature=Ot.quadToSignature=Ot.sha1hex=Ot.hashTerm=Ot.hashTerms=Ot.getGraphBlankNodes=Ot.uniqGraph=Ot.deindexGraph=Ot.indexGraph=Ot.getQuadsWithoutBlankNodes=Ot.getQuadsWithBlankNodes=Ot.hasValue=Ot.hashValues=Ot.getBijectionInner=Ot.getBijection=Ot.isomorphic=void 0;const u=Gh(),n=Yt(),o=_n();function i(v,S){return!!t(v,S)}Ot.isomorphic=i;function t(v,S){const F=l(d(v)),M=l(d(S));if(Object.keys(F).length!==Object.keys(M).length)return null;for(const D in F)if(F[D]!==M[D])return null;const O=h(s(v)),w=h(s(S)),E=p(v),R=p(S);return e(O,w,E,R)}Ot.getBijection=t;function e(v,S,F,M,O,w){O||(O={}),w||(w={});const[E,R]=y(v,F,O),[D,B]=y(S,M,w);if(Object.keys(E).length!==Object.keys(D).length)return null;for(const $ in E)if(!c(D,E[$]))return null;let C={};for(const $ of F){const Z=n.termToString($),ee=R[Z];for(const ce in B)if(B[ce]===ee){C[Z]=ce,delete B[ce];break}}if(!r(Object.keys(C).sort(),F.map(n.termToString).sort())||!r(a(C).sort(),M.map(n.termToString).sort())){C=null;for(const $ of F){const Z=n.termToString($);if(!E[Z])for(const ee of M){const ce=n.termToString(ee);if(!D[ce]&&R[Z]===B[ce]){const G=b(Z);C=e(v,S,F,M,Object.assign(Object.assign({},E),{[Z]:G}),Object.assign(Object.assign({},D),{[ce]:G}))}}}}return C}Ot.getBijectionInner=e;function r(v,S){if(v.length!==S.length)return!1;for(let F=v.length;F--;)if(v[F]!==S[F])return!1;return!0}function a(v){const S=[];for(const F in v)S.push(v[F]);return S}Ot.hashValues=a;function c(v,S){for(const F in v)if(v[F]===S)return!0;return!1}Ot.hasValue=c;function s(v){return v.filter(S=>o.someTerms(S,F=>F.termType==="BlankNode"||F.termType==="Quad"&&o.getTermsNested(F).some(M=>M.termType==="BlankNode")))}Ot.getQuadsWithBlankNodes=s;function d(v){return v.filter(S=>o.everyTerms(S,F=>F.termType!=="BlankNode"&&!(F.termType==="Quad"&&o.getTermsNested(F).some(M=>M.termType==="BlankNode"))))}Ot.getQuadsWithoutBlankNodes=d;function l(v){const S={};for(const F of v)S[JSON.stringify(n.quadToStringQuad(F))]=!0;return S}Ot.indexGraph=l;function f(v){return Object.keys(v).map(S=>n.stringQuadToQuad(JSON.parse(S)))}Ot.deindexGraph=f;function h(v){return f(l(v))}Ot.uniqGraph=h;function p(v){return o.uniqTerms(v.map(S=>o.getBlankNodes(o.getTermsNested(S))).reduce((S,F)=>S.concat(F),[]))}Ot.getGraphBlankNodes=p;function y(v,S,F){const M=Object.assign({},F),O={};let w=!0;for(;w;){const E=Object.keys(M).length;for(const D of S){const B=n.termToString(D);if(!M[B]){const[C,$]=_(D,v,M);C&&(M[B]=$),O[B]=$}}const R={};for(const D in O){const B=O[D];R[B]===void 0?R[B]=D:R[B]=!1}for(const D in R){const B=R[D];B&&(M[B]=D)}w=E!==Object.keys(M).length}return[M,O]}Ot.hashTerms=y;function _(v,S,F){const M=[];let O=!0;for(const E of S){const R=o.getTermsNested(E);if(R.some(D=>D.equals(v))){M.push(m(E,F,v));for(const D of R)!T(D,F)&&!D.equals(v)&&(O=!1)}}const w=b(M.sort().join(""));return[O,w]}Ot.hashTerm=_;function b(v){return u.sha1().update(v).digest("hex")}Ot.sha1hex=b;function m(v,S,F){return o.getTerms(v).map(M=>g(M,S,F)).join("|")}Ot.quadToSignature=m;function g(v,S,F){return v.equals(F)?"@self":v.termType==="BlankNode"?S[n.termToString(v)]||"@blank":v.termType==="Quad"?`<${m(v,S,F)}>`:n.termToString(v)}Ot.termToSignature=g;function T(v,S){return v.termType!=="BlankNode"&&!(v.termType==="Quad"&&o.getTermsNested(v).some(F=>!T(F,S)))||!!S[n.termToString(v)]}return Ot.isTermGrounded=T,Ot}var V6;function ok(){return V6||(V6=1,(function(u){var n=Ea&&Ea.__createBinding||(Object.create?(function(i,t,e,r){r===void 0&&(r=e),Object.defineProperty(i,r,{enumerable:!0,get:function(){return t[e]}})}):(function(i,t,e,r){r===void 0&&(r=e),i[r]=t[e]})),o=Ea&&Ea.__exportStar||function(i,t){for(var e in i)e!=="default"&&!Object.prototype.hasOwnProperty.call(t,e)&&n(t,i,e)};Object.defineProperty(u,"__esModule",{value:!0}),o(uk(),u)})(Ea)),Ea}var Q6;function sk(){if(Q6)return Vr;Q6=1;var u=Vr&&Vr.__createBinding||(Object.create?(function(J,we,Ee,$e){$e===void 0&&($e=Ee);var Pe=Object.getOwnPropertyDescriptor(we,Ee);(!Pe||("get"in Pe?!we.__esModule:Pe.writable||Pe.configurable))&&(Pe={enumerable:!0,get:function(){return we[Ee]}}),Object.defineProperty(J,$e,Pe)}):(function(J,we,Ee,$e){$e===void 0&&($e=Ee),J[$e]=we[Ee]})),n=Vr&&Vr.__setModuleDefault||(Object.create?(function(J,we){Object.defineProperty(J,"default",{enumerable:!0,value:we})}):function(J,we){J.default=we}),o=Vr&&Vr.__importStar||function(J){if(J&&J.__esModule)return J;var we={};if(J!=null)for(var Ee in J)Ee!=="default"&&Object.prototype.hasOwnProperty.call(J,Ee)&&u(we,J,Ee);return n(we,J),we},i=Vr&&Vr.__importDefault||function(J){return J&&J.__esModule?J:{default:J}};Object.defineProperty(Vr,"__esModule",{value:!0}),Vr.toSparqlJs=Vr.toSparql=void 0;const t=ok(),e=Yt(),r=Vh(),a=o(Uh()),c=i(ZT()),s=i(lO()),d=a.types,l=a.expressionTypes;let f;const h=new c.default;function p(J,we={}){return new r.Generator(we).stringify(y(J))}Vr.toSparql=p;function y(J){_(),J=Ve(J);let we=b(J);return we.type==="group"?we.patterns[0]:we}Vr.toSparqlJs=y;function _(){f={project:!1,extend:[],group:[],aggregates:[],order:[]}}function b(J){switch(J.type!==d.EXTEND&&J.type!==d.ORDER_BY&&J.type!==d.GRAPH&&(f.project=!1),J.type){case d.EXPRESSION:return m(J);case d.ASK:return he(J,d.ASK);case d.BGP:return D(J);case d.CONSTRUCT:return B(J);case d.DESCRIBE:return he(J,d.DESCRIBE);case d.DISTINCT:return C(J);case d.EXTEND:return $(J);case d.FROM:return Z(J);case d.FILTER:return ee(J);case d.GRAPH:return ce(J);case d.GROUP:return G(J);case d.JOIN:return fe(J);case d.LEFT_JOIN:return me(J);case d.MINUS:return ye(J);case d.NOP:return{};case d.ORDER_BY:return re(J);case d.PATH:return xe(J);case d.PATTERN:return Re(J);case d.PROJECT:return he(J,d.PROJECT);case d.REDUCED:return V(J);case d.SERVICE:return P(J);case d.SLICE:return N(J);case d.UNION:return A(J);case d.VALUES:return I(J);case d.COMPOSITE_UPDATE:return Se(J);case d.DELETE_INSERT:return Me(J);case d.LOAD:return Oe(J);case d.CLEAR:return ue(J);case d.CREATE:return L(J);case d.DROP:return x(J);case d.ADD:return z(J);case d.MOVE:return W(J);case d.COPY:return le(J)}throw new Error(`Unknown Operation type ${J.type}`)}function m(J){switch(J.expressionType){case l.AGGREGATE:return v(J);case l.EXISTENCE:return S(J);case l.NAMED:return F(J);case l.OPERATOR:return M(J);case l.TERM:return O(J);case l.WILDCARD:return w(J)}throw new Error(`Unknown Expression Operation type ${J.expressionType}`)}function g(J){switch(J.type){case d.ALT:return q(J);case d.INV:return H(J);case d.LINK:return U(J);case d.NPS:return X(J);case d.ONE_OR_MORE_PATH:return Q(J);case d.SEQ:return k(J);case d.ZERO_OR_MORE_PATH:return oe(J);case d.ZERO_OR_ONE_PATH:return se(J)}throw new Error(`Unknown Path type ${J.type}`)}function T(J){return(0,e.termToString)(J)}function v(J){const we={expression:m(J.expression),type:"aggregate",aggregation:J.aggregator,distinct:J.distinct};return J.separator&&(we.separator=J.separator),we}function S(J){return{type:"operation",operator:J.not?"notexists":"exists",args:[{type:"group",patterns:s.default.flatten([b(J.input)])}]}}function F(J){return{type:"functionCall",function:J.name,args:J.args.map(m)}}function M(J){if(J.operator==="desc"){const Ee={expression:m(J.args[0])};return Ee.descending=!0,Ee}const we={type:"operation",operator:J.operator,args:J.args.map(m)};return(we.operator==="in"||we.operator==="notin")&&(we.args=[we.args[0]].concat([we.args.slice(1)])),we}function O(J){return J.term}function w(J){return J.wildcard}function E(J){return Array.isArray(J)?J.length===1?J[0]:{type:"group",patterns:J}:J}function R(J){return J}function D(J){let we=J.patterns.map(Re);return we.length===0?null:{type:"bgp",triples:we}}function B(J){return{type:"query",prefixes:{},queryType:"CONSTRUCT",template:J.template.map(Re),where:s.default.flatten([b(J.input)])}}function C(J){let we=b(J.input);return we.patterns[0].distinct=!0,we}function $(J){return f.project?(f.extend.push(J),b(J.input)):s.default.flatten([b(J.input),{type:"bind",variable:J.variable,expression:m(J.expression)}])}function Z(J){const we=b(J.input);let Ee=we;return we.type==="group"&&(Ee=we.patterns[0]),Ee.from={default:J.default,named:J.named},we}function ee(J){return{type:"group",patterns:s.default.flatten([b(J.input),{type:"filter",expression:m(J.expression)}])}}function ce(J){return{type:"graph",patterns:s.default.flatten([b(J.input)]),name:J.name}}function G(J){const we=b(J.input),Ee=J.aggregates.map(R);return f.aggregates.push(...Ee),f.group.push(...J.variables),we}function fe(J){return s.default.flatten(J.input.map(b)).reduce((Ee,$e)=>($e.type!=="bgp"||Ee.length==0||Ee[Ee.length-1].type!=="bgp"?Ee.push($e):Ee[Ee.length-1].triples.push(...$e.triples),Ee),[])}function me(J){const we={type:"optional",patterns:[b(J.input[1])]};return J.expression&&we.patterns.push({type:"filter",expression:m(J.expression)}),we.patterns=s.default.flatten(we.patterns),s.default.flatten([b(J.input[0]),we])}function ye(J){let we=b(J.input[1]);return we.type==="group"&&(we=we.patterns),Array.isArray(we)||(we=[we]),s.default.flatten([b(J.input[0]),{type:"minus",patterns:we}])}function re(J){return f.order.push(...J.expressions),b(J.input)}function xe(J){return{type:"bgp",triples:[{subject:J.subject,predicate:g(J.predicate),object:J.object}]}}function Re(J){return{subject:J.subject,predicate:J.predicate,object:J.object}}function Ie(J,we){let Ee=s.default.isSimpleTerm(J)?T(J):J;if(typeof Ee=="string"){if(we[Ee])return we[Ee]}else if(Array.isArray(J))J=J.map($e=>Ie($e,we));else for(let $e of Object.keys(J))J[$e]=Ie(J[$e],we);return J}function he(J,we){const Ee={type:"query",prefixes:{}},$e=Ee;let Pe;we===d.PROJECT?(Ee.queryType="SELECT",Pe=J.variables):we===d.ASK?Ee.queryType="ASK":we===d.DESCRIBE&&(Ee.queryType="DESCRIBE",Pe=J.terms);const et=f.extend,rt=f.group,ke=f.aggregates,ft=f.order;_(),f.project=!0;let te=s.default.flatten([b(J.input)]);te.length===1&&te[0].type==="group"&&(te=te[0].patterns),Ee.where=te;let ne={};for(let Qe of f.aggregates)ne[T(Qe.variable)]=m(Qe);let Ne={};for(let Qe=f.extend.length-1;Qe>=0;--Qe){let Tt=f.extend[Qe];Ne[T(Tt.variable)]=Ie(m(Tt.expression),ne)}f.group.length>0&&($e.group=f.group.map(Qe=>{let Tt=T(Qe);if(Ne[Tt]){let Ue=Ne[Tt];return delete Ne[Tt],{variable:Qe,expression:Ue}}return{expression:Qe}})),f.order.length>0&&($e.order=f.order.map(b).map(Qe=>Qe.descending?Qe:{expression:Qe})),Pe&&($e.variables=Pe.map(Qe=>{let Tt=T(Qe);if(Ne[Tt]){let Ue=Ne[Tt];return delete Ne[Tt],{variable:Qe,expression:Ue}}return Qe}),$e.variables.length===0&&($e.variables=[new r.Wildcard]));const Ce=Object.entries(Ne);if(Ce.length>0){$e.where=$e.where||[];for(const[Qe,Tt]of Ce)$e.where.push({type:"bind",variable:(0,e.stringToTerm)(Qe),expression:Tt})}if(Ee.where.length>0&&Ee.where[Ee.where.length-1].type==="filter"){const Qe=Ee.where[Ee.where.length-1];be(Qe,Object.keys(ne))&&($e.having=s.default.flatten([Ie(Qe.expression,ne)]),Ee.where.splice(-1))}return f.extend=et,f.group=rt,f.aggregates=ke,f.order=ft,{type:"group",patterns:[$e]}}function be(J,we){return s.default.isSimpleTerm(J)?we.indexOf(T(J))>=0:Array.isArray(J)?J.some(Ee=>be(Ee,we)):J===Object(J)?Object.keys(J).some(Ee=>be(J[Ee],we)):we.indexOf(J)>=0}function V(J){let we=b(J.input);return we.patterns[0].reduced=!0,we}function P(J){let we=b(J.input);return we.type==="group"&&(we=we.patterns),Array.isArray(we)||(we=[we]),{type:"service",name:J.name,silent:J.silent,patterns:we}}function N(J){let we=b(J.input),Ee=we;return we.type&&we.type==="group"&&(Ee=we.patterns[0]),J.start!==0&&(Ee.offset=J.start),J.length!==void 0&&(Ee.limit=J.length),we}function A(J){return{type:"union",patterns:J.input.map(b).map(E)}}function I(J){return{type:"values",values:J.bindings.map(we=>{let Ee={};for(let $e of J.variables){let Pe=`?${$e.value}`;we[Pe]?Ee[Pe]=we[Pe]:Ee[Pe]=void 0}return Ee})}}function q(J){const we=J.input.map(g);return we.every(Ee=>"pathType"in Ee&&Ee.pathType==="!")?{type:"path",pathType:"!",items:[{type:"path",pathType:"|",items:s.default.flatten(we.map(Ee=>Ee.items))}]}:{type:"path",pathType:"|",items:we}}function H(J){if(J.path.type===d.NPS){const we=J.path.iris.map(Ee=>({type:"path",pathType:"^",items:[Ee]}));return we.length<=1?{type:"path",pathType:"!",items:we}:{type:"path",pathType:"!",items:[{type:"path",pathType:"|",items:we}]}}return{type:"path",pathType:"^",items:[g(J.path)]}}function U(J){return J.iri}function X(J){return J.iris.length<=1?{type:"path",pathType:"!",items:J.iris}:{type:"path",pathType:"!",items:[{type:"path",pathType:"|",items:J.iris}]}}function Q(J){return{type:"path",pathType:"+",items:[g(J.path)]}}function k(J){return{type:"path",pathType:"/",items:J.input.map(g)}}function oe(J){return{type:"path",pathType:"*",items:[g(J.path)]}}function se(J){return{type:"path",pathType:"?",items:[g(J.path)]}}function Se(J){const we=J.updates.map(Ee=>b(Ee).updates[0]);return{prefixes:{},type:"update",updates:we}}function Me(J){var we;let Ee=J.where,$e;if(Ee&&Ee.type===d.FROM){let et=Ee;Ee=et.input,$e={default:et.default,named:et.named}}const Pe=[{updateType:"insertdelete",delete:De(J.delete||[]),insert:De(J.insert||[])}];if($e&&(Pe[0].using=$e),!Ee||Ee.type===d.BGP&&Ee.patterns.length===0)Pe[0].where=[];else{const et=[];let rt=b(Be(Ee,et));if(rt.type==="group"?Pe[0].where=rt.patterns:Pe[0].where=[rt],et.length>0){if(et.length!==1)throw new Error("This is unexpected and might indicate an error in graph handling for updates.");((we=et[0])===null||we===void 0?void 0:we.value)!==""&&(Pe[0].where=[{type:"graph",patterns:Pe[0].where,name:et[0]}])}}return!J.delete&&!J.where?(Pe[0].updateType="insert",delete Pe[0].delete,delete Pe[0].where):!J.insert&&!J.where?(delete Pe[0].insert,delete Pe[0].where,J.delete.some(et=>et.subject.termType==="Variable"||et.predicate.termType==="Variable"||et.object.termType==="Variable")?Pe[0].updateType="deletewhere":Pe[0].updateType="delete"):!J.insert&&J.where&&J.where.type==="bgp"&&(0,t.isomorphic)(J.delete,J.where.patterns)&&(delete Pe[0].where,Pe[0].updateType="deletewhere"),{prefixes:{},type:"update",updates:Pe}}function Oe(J){const we=[{type:"load",silent:!!J.silent,source:J.source}];return J.destination&&(we[0].destination=J.destination),{prefixes:{},type:"update",updates:we}}function ue(J){return j(J,"clear")}function L(J){return j(J,"create")}function x(J){return j(J,"drop")}function j(J,we){const Ee=[{type:we,silent:!!J.silent}];return J.source==="DEFAULT"?Ee[0].graph={default:!0}:J.source==="NAMED"?Ee[0].graph={named:!0}:J.source==="ALL"?Ee[0].graph={all:!0}:Ee[0].graph={type:"graph",name:J.source},{prefixes:{},type:"update",updates:Ee}}function z(J){return ae(J,"add")}function W(J){return ae(J,"move")}function le(J){return ae(J,"copy")}function ae(J,we){const Ee=[{type:we,silent:!!J.silent}];return Ee[0].source=J.source==="DEFAULT"?{type:"graph",default:!0}:{type:"graph",name:J.source},Ee[0].destination=J.destination==="DEFAULT"?{type:"graph",default:!0}:{type:"graph",name:J.destination},{prefixes:{},type:"update",updates:Ee}}function De(J){if(!J)return[];const we={};return J.forEach(Ee=>{const $e=Ee.graph.value;we[$e]||(we[$e]=[]),we[$e].push(Ee)}),Object.keys(we).map(Ee=>Ee===""?{type:"bgp",triples:we[Ee].map(Re)}:{type:"graph",triples:we[Ee].map(Re),name:we[Ee][0].graph})}function Ve(J){return Be(J,[])}function Be(J,we){if(Array.isArray(J))return J.map(rt=>Be(rt,we));if(!J.type||J.type===d.DELETE_INSERT)return J;if((J.type===d.PATTERN||J.type===d.PATH)&&J.graph)return we.push(J.graph),J.graph.name!==""?J.type===d.PATTERN?h.createPattern(J.subject,J.predicate,J.object):h.createPath(J.subject,J.predicate,J.object):J;const Ee={},$e={},Pe={};for(let rt of Object.keys(J)){const ke=[];if(Ee[rt]=Be(J[rt],ke),ke.length>0){$e[rt]=ke;for(const ft of ke)Pe[ft.value]=ft}}const et=Object.keys(Pe);if(et.length>0)if(et.length===1&&![d.PROJECT,d.SERVICE].includes(J.type))we.push(Pe[et[0]]);else{if(J.type===d.BGP)return Ze(J,$e.patterns);for(let rt of Object.keys($e)){const ke=Ee[rt];Array.isArray(ke)?Ee[rt]=ke.map((ft,te)=>$e[rt][0].value===""?ft:h.createGraph(ft,$e[rt][te])):$e[rt][0].value!==""&&(Ee[rt]=h.createGraph(ke,$e[rt][0]))}}return Ee}function Ze(J,we){var Ee;const $e={};for(let rt=0;rt<J.patterns.length;++rt){const ke=J.patterns[rt],ft=we[rt].value;$e[ft]=(Ee=$e[ft])!==null&&Ee!==void 0?Ee:{patterns:[],graph:we[rt]},$e[ft].patterns.push(ke)}let Pe=[];for(const[rt,{patterns:ke,graph:ft}]of Object.entries($e)){const te=h.createBgp(ke);Pe.push(rt===""?te:h.createGraph(te,ft))}let et=Pe[0];for(let rt=1;rt<Pe.length;++rt)et=h.createJoin([et,Pe[rt]]);return et}return Vr}var H6;function st(){return H6||(H6=1,(function(u){var n=An&&An.__createBinding||(Object.create?(function(d,l,f,h){h===void 0&&(h=f);var p=Object.getOwnPropertyDescriptor(l,f);(!p||("get"in p?!l.__esModule:p.writable||p.configurable))&&(p={enumerable:!0,get:function(){return l[f]}}),Object.defineProperty(d,h,p)}):(function(d,l,f,h){h===void 0&&(h=f),d[h]=l[f]})),o=An&&An.__setModuleDefault||(Object.create?(function(d,l){Object.defineProperty(d,"default",{enumerable:!0,value:l})}):function(d,l){d.default=l}),i=An&&An.__importStar||function(d){if(d&&d.__esModule)return d;var l={};if(d!=null)for(var f in d)f!=="default"&&Object.prototype.hasOwnProperty.call(d,f)&&n(l,d,f);return o(l,d),l},t=An&&An.__importDefault||function(d){return d&&d.__esModule?d:{default:d}};Object.defineProperty(u,"__esModule",{value:!0}),u.Util=u.toSparqlJs=u.toSparql=u.Factory=u.Algebra=u.translate=void 0;const e=t(YK());u.translate=e.default;const r=i(Uh());u.Algebra=r;const a=t(ZT());u.Factory=a.default;const c=sk();Object.defineProperty(u,"toSparql",{enumerable:!0,get:function(){return c.toSparql}}),Object.defineProperty(u,"toSparqlJs",{enumerable:!0,get:function(){return c.toSparqlJs}});const s=t(lO());u.Util=s.default})(An)),An}var Ra={},zh={},G6;function ck(){if(G6)return zh;G6=1,Object.defineProperty(zh,"__esModule",{value:!0}),zh.asTermType=void 0;function u(n){if(n==="namedNode"||n==="literal"||n==="blankNode"||n==="quad")return n}return zh.asTermType=u,zh}var Xh={},z6;function dk(){if(z6)return Xh;z6=1,Object.defineProperty(Xh,"__esModule",{value:!0}),Xh.Variable=void 0;const u=Vi();class n{constructor(i){this.expressionType=u.ExpressionType.Variable,this.name=i}}return Xh.Variable=n,Xh}var lt={},En={},X6;function Fa(){if(X6)return En;X6=1,Object.defineProperty(En,"__esModule",{value:!0}),En.SparqlOperator=En.TypeURL=En.typedLiteral=En.TypeAlias=void 0;const u=hr();var n;(function(r){r.SPARQL_NUMERIC="SPARQL_NUMERIC",r.SPARQL_STRINGLY="SPARQL_STRINGLY"})(n||(En.TypeAlias=n={}));const o=new u.DataFactory;function i(r,a){return o.literal(r,o.namedNode(a))}En.typedLiteral=i;var t;(function(r){r.XSD_ANY_URI="http://www.w3.org/2001/XMLSchema#anyURI",r.XSD_STRING="http://www.w3.org/2001/XMLSchema#string",r.RDF_LANG_STRING="http://www.w3.org/1999/02/22-rdf-syntax-ns#langString",r.XSD_BOOLEAN="http://www.w3.org/2001/XMLSchema#boolean",r.XSD_DATE_TIME="http://www.w3.org/2001/XMLSchema#dateTime",r.XSD_DATE_TIME_STAMP="http://www.w3.org/2001/XMLSchema#dateTimeStamp",r.XSD_DATE="http://www.w3.org/2001/XMLSchema#date",r.XSD_G_MONTH="http://www.w3.org/2001/XMLSchema#gMonth",r.XSD_G_MONTHDAY="http://www.w3.org/2001/XMLSchema#gMonthDay",r.XSD_G_YEAR="http://www.w3.org/2001/XMLSchema#gYear",r.XSD_G_YEAR_MONTH="http://www.w3.org/2001/XMLSchema#gYearMonth",r.XSD_TIME="http://www.w3.org/2001/XMLSchema#time",r.XSD_G_DAY="http://www.w3.org/2001/XMLSchema#gDay",r.XSD_DECIMAL="http://www.w3.org/2001/XMLSchema#decimal",r.XSD_FLOAT="http://www.w3.org/2001/XMLSchema#float",r.XSD_DOUBLE="http://www.w3.org/2001/XMLSchema#double",r.XSD_INTEGER="http://www.w3.org/2001/XMLSchema#integer",r.XSD_NON_POSITIVE_INTEGER="http://www.w3.org/2001/XMLSchema#nonPositiveInteger",r.XSD_NEGATIVE_INTEGER="http://www.w3.org/2001/XMLSchema#negativeInteger",r.XSD_LONG="http://www.w3.org/2001/XMLSchema#long",r.XSD_INT="http://www.w3.org/2001/XMLSchema#int",r.XSD_SHORT="http://www.w3.org/2001/XMLSchema#short",r.XSD_BYTE="http://www.w3.org/2001/XMLSchema#byte",r.XSD_NON_NEGATIVE_INTEGER="http://www.w3.org/2001/XMLSchema#nonNegativeInteger",r.XSD_POSITIVE_INTEGER="http://www.w3.org/2001/XMLSchema#positiveInteger",r.XSD_UNSIGNED_LONG="http://www.w3.org/2001/XMLSchema#unsignedLong",r.XSD_UNSIGNED_INT="http://www.w3.org/2001/XMLSchema#unsignedInt",r.XSD_UNSIGNED_SHORT="http://www.w3.org/2001/XMLSchema#unsignedShort",r.XSD_UNSIGNED_BYTE="http://www.w3.org/2001/XMLSchema#unsignedByte",r.XSD_NORMALIZED_STRING="http://www.w3.org/2001/XMLSchema#normalizedString",r.XSD_TOKEN="http://www.w3.org/2001/XMLSchema#token",r.XSD_LANGUAGE="http://www.w3.org/2001/XMLSchema#language",r.XSD_NM_TOKEN="http://www.w3.org/2001/XMLSchema#NMTOKEN",r.XSD_NAME="http://www.w3.org/2001/XMLSchema#name",r.XSD_NC_NAME="http://www.w3.org/2001/XMLSchema#NCName",r.XSD_ENTITY="http://www.w3.org/2001/XMLSchema#ENTITY",r.XSD_ID="http://www.w3.org/2001/XMLSchema#ID",r.XSD_ID_REF="http://www.w3.org/2001/XMLSchema#IDREF",r.XSD_DURATION="http://www.w3.org/2001/XMLSchema#duration",r.XSD_YEAR_MONTH_DURATION="http://www.w3.org/2001/XMLSchema#yearMonthDuration",r.XSD_DAY_TIME_DURATION="http://www.w3.org/2001/XMLSchema#dayTimeDuration"})(t||(En.TypeURL=t={}));var e;return(function(r){r.NOT="!",r.UMINUS="uminus",r.UPLUS="uplus",r.LOGICAL_OR="||",r.LOGICAL_AND="&&",r.EQUAL="=",r.NOT_EQUAL="!=",r.LT="<",r.GT=">",r.LTE="<=",r.GTE=">=",r.SAME_TERM="sameterm",r.IN="in",r.NOT_IN="notin",r.MULTIPLICATION="*",r.DIVISION="/",r.ADDITION="+",r.SUBTRACTION="-",r.IS_IRI="isiri",r.IS_URI="isuri",r.IS_BLANK="isblank",r.IS_LITERAL="isliteral",r.IS_NUMERIC="isnumeric",r.STR="str",r.LANG="lang",r.DATATYPE="datatype",r.IRI="iri",r.URI="uri",r.BNODE="bnode",r.STRDT="strdt",r.STRLANG="strlang",r.UUID="uuid",r.STRUUID="struuid",r.STRLEN="strlen",r.SUBSTR="substr",r.UCASE="ucase",r.LCASE="lcase",r.STRSTARTS="strstarts",r.STRENDS="strends",r.CONTAINS="contains",r.STRBEFORE="strbefore",r.STRAFTER="strafter",r.ENCODE_FOR_URI="encode_for_uri",r.CONCAT="concat",r.LANG_MATCHES="langmatches",r.REGEX="regex",r.REPLACE="replace",r.ABS="abs",r.ROUND="round",r.CEIL="ceil",r.FLOOR="floor",r.RAND="rand",r.NOW="now",r.YEAR="year",r.MONTH="month",r.DAY="day",r.HOURS="hours",r.MINUTES="minutes",r.SECONDS="seconds",r.TIMEZONE="timezone",r.TZ="tz",r.MD5="md5",r.SHA1="sha1",r.SHA256="sha256",r.SHA384="sha384",r.SHA512="sha512",r.TRIPLE="triple",r.SUBJECT="subject",r.PREDICATE="predicate",r.OBJECT="object",r.IS_TRIPLE="istriple",r.BOUND="bound",r.IF="if",r.COALESCE="coalesce"})(e||(En.SparqlOperator=e={})),En}var bt={},J6;function df(){if(J6)return bt;J6=1,Object.defineProperty(bt,"__esModule",{value:!0}),bt.NoAggregator=bt.ExtensionFunctionError=bt.InvalidExpression=bt.InvalidArity=bt.UnexpectedError=bt.ParseError=bt.EmptyAggregateError=bt.IncompatibleLanguageOperation=bt.InvalidTimezoneCall=bt.CastError=bt.InvalidArgumentTypes=bt.InError=bt.CoalesceError=bt.RDFEqualTypeError=bt.EBVCoercionError=bt.UnboundVariableError=bt.InvalidLexicalForm=bt.isExpressionError=bt.ExpressionError=void 0;class u extends Error{}bt.ExpressionError=u;function n(T){return T instanceof u}bt.isExpressionError=n;class o extends u{constructor(v){super(`Invalid lexical form '${g(v)}'`),this.arg=v}}bt.InvalidLexicalForm=o;class i extends u{constructor(v,S){super(`Unbound variable '${g(v)}'`),this.variable=v,this.bindings=S}}bt.UnboundVariableError=i;class t extends u{constructor(v){super(`Cannot coerce term to EBV '${g(v)}'`),this.arg=v}}bt.EBVCoercionError=t;class e extends u{constructor(v){super("Equality test for literals with unsupported datatypes"),this.args=v}}bt.RDFEqualTypeError=e;class r extends u{constructor(v){super("All COALESCE arguments threw errors"),this.errors=v}}bt.CoalesceError=r;class a extends u{constructor(v){super(`Some argument to IN errorred and none where equal. ${v.map(S=>`(${S.toString()}) `).join("and ")}`),this.errors=v}}bt.InError=a;class c extends u{constructor(v,S){super(`Argument types not valid for operator: '${g(S)}' with '${g(v)}`),this.args=v,this.op=S}}bt.InvalidArgumentTypes=c;class s extends u{constructor(v,S){super(`Invalid cast: '${g(v)}' to '${g(S)}'`),this.arg=v}}bt.CastError=s;class d extends u{constructor(v){super(`TIMEZONE call on ${v} which has no timezone`),this.dateString=v}}bt.InvalidTimezoneCall=d;class l extends u{constructor(v,S){super(`Operation on incompatible language literals '${g(v)}' and '${g(S)}'`),this.arg1=v,this.arg2=S}}bt.IncompatibleLanguageOperation=l;class f extends u{constructor(){super("Empty aggregate expression")}}bt.EmptyAggregateError=f;class h extends u{constructor(v,S){super(`Failed to parse "${v}" as ${S}.`)}}bt.ParseError=h;class p extends Error{constructor(v,S){super(`Programmer Error '${v}'`),this.payload=S}}bt.UnexpectedError=p;class y extends Error{constructor(v,S){super(`The number of args does not match the arity of the operator '${g(S)}'.`),this.args=v,this.op=S}}bt.InvalidArity=y;class _ extends Error{constructor(v){super(`Invalid SPARQL Expression '${g(v)}'`)}}bt.InvalidExpression=_;class b extends Error{constructor(v,S){S instanceof Error?super(`Error thrown in ${v}: ${S.message}${S.stack?`
${S.stack}`:""}`):super(`Error thrown in ${v}`)}}bt.ExtensionFunctionError=b;class m extends Error{constructor(v){super(`Aggregate expression ${g(v)} found, but no aggregate hook provided.`)}}bt.NoAggregator=m;function g(T){return JSON.stringify(T)}return bt}var xn={},K6;function lk(){if(K6)return xn;K6=1,Object.defineProperty(xn,"__esModule",{value:!0}),xn.serializeDuration=xn.serializeTime=xn.serializeDate=xn.serializeDateTime=void 0;function u(r,a=2){return r.toLocaleString(void 0,{minimumIntegerDigits:a,useGrouping:!1})}function n(r){return`${i({year:r.year,month:r.month,day:r.day})}T${t(r)}`}xn.serializeDateTime=n;function o(r){return r.zoneHours===void 0||r.zoneMinutes===void 0?"":r.zoneHours===0&&r.zoneMinutes===0?"Z":`${r.zoneHours>=0?`+${u(r.zoneHours)}`:u(r.zoneHours)}:${u(Math.abs(r.zoneMinutes))}`}function i(r){return`${u(r.year,4)}-${u(r.month)}-${u(r.day)}${o(r)}`}xn.serializeDate=i;function t(r){return`${u(r.hours)}:${u(r.minutes)}:${u(r.seconds)}${o(r)}`}xn.serializeTime=t;function e(r,a="PT0S"){if(!Object.values(r).some(_=>(_||0)!==0))return a;const c=Object.values(r).some(_=>(_||0)<0)?"-":"",s=r.year?`${Math.abs(r.year)}Y`:"",d=r.month?`${Math.abs(r.month)}M`:"",l=r.day?`${Math.abs(r.day)}D`:"",f=`${c}P${s}${d}${l}`;if(!(r.hours||r.minutes||r.seconds))return f;const h=r.hours?`${Math.abs(r.hours)}H`:"",p=r.minutes?`${Math.abs(r.minutes)}M`:"",y=r.seconds?`${Math.abs(r.seconds)}S`:"";return`${f}T${h}${p}${y}`}return xn.serializeDuration=e,xn}var wO={},Jt={},Jh={},k6;function W6(){if(k6)return Jh;k6=1,Object.defineProperty(Jh,"__esModule",{value:!0}),Jh.OverloadTree=void 0;const u=lf(),n=t3();let o=class Tx{constructor(t,e){this.identifier=t,this.implementation=void 0,this.generalOverloads=Object.create(null),this.literalOverLoads=[],this.depth=e??0,this.promotionCount=void 0}getSubtree(t){const e=(0,n.asGeneralType)(t);if(e)return this.generalOverloads[e];for(const[r,a]of this.literalOverLoads)if(t===r)return a}getImplementationExact(t){let e=this;for(const r of t)if(e=e.getSubtree(r),!e)return;return e.implementation}search(t,e,r){let a=r[this.identifier],c=0;for(;c<t.length&&(a!=null&&a.cache);){const l=t[c],f=(0,u.isLiteralTermExpression)(l);a=a.cache[f?f.dataType:l.termType],c++}if(c===t.length&&(a!=null&&a.func))return a.func;const s=[],d=0;if(t.length===0)return this.implementation;for(s.push(...this.getSubTreeWithArg(t[d],e).map(l=>({node:l,index:d+1})));s.length>0;){const{index:l,node:f}=s.pop();if(l===t.length&&f.implementation)return this.addToCache(r,t,f.implementation),f.implementation;s.push(...f.getSubTreeWithArg(t[l],e).map(h=>({node:h,index:l+1})))}}addToCache(t,e,r){function a(s,d){return d in s||(s[d]={}),s[d]}let c=a(t,this.identifier);for(const s of e){const d=(0,u.isLiteralTermExpression)(s),l=d?d.dataType:s.termType;c.cache=c.cache??{},c=a(c.cache,l)}c.func=r}addOverload(t,e){this._addOverload([...t],e,0)}_addOverload(t,e,r){const[a,...c]=t;if(!a){(this.promotionCount===void 0||r<=this.promotionCount)&&(this.promotionCount=r,this.implementation=e);return}let s=this.getSubtree(a);if(!s){const d=new Tx(this.identifier,this.depth+1),l=(0,n.asGeneralType)(a);l&&(this.generalOverloads[l]=d);const f=(0,n.asOverrideType)(a);f&&this.literalOverLoads.push([f,d]),s=d}if(s._addOverload(c,e,r),n.typePromotion[a])for(const d of n.typePromotion[a])this.addPromotedOverload(d.typeToPromote,e,d.conversionFunction,c,r)}addPromotedOverload(t,e,r,a,c){let s=this.getSubtree(t);if(!s){const d=new Tx(this.identifier,this.depth+1);this.literalOverLoads.push([t,d]),s=d}s._addOverload(a,d=>l=>e(d)([...l.slice(0,this.depth),r(l[this.depth]),...l.slice(this.depth+1,l.length)]),c+1)}getSubTreeWithArg(t,e){const r=[],a=(0,u.isLiteralTermExpression)(t);if(this.generalOverloads.term&&r.push(this.generalOverloads.term),this.generalOverloads[t.termType]&&r.push(this.generalOverloads[t.termType]),a){const c=(0,n.asKnownLiteralType)(a.dataType);let s;c?s=n.superTypeDictTable[c]:s=(0,n.getSuperTypes)(a.dataType,e);const d=this.literalOverLoads.filter(([l,f])=>l in s).map(([l,f])=>[s[l],f]);d.sort(([l,f],[h,p])=>l-h),r.push(...d.map(([l,f])=>f))}return r}};return Jh.OverloadTree=o,Jh}var Y6;function Z6(){if(Y6)return Jt;Y6=1,Object.defineProperty(Jt,"__esModule",{value:!0}),Jt.expressionToVar=Jt.dateTime=Jt.langString=Jt.string=Jt.double=Jt.float=Jt.decimal=Jt.integer=Jt.bool=Jt.Builder=Jt.declare=void 0;const u=qe(),n=lf(),o=lf(),i=Fa(),t=Fa(),e=df(),r=W6();function a(m){return new c(m)}Jt.declare=a;class c{constructor(g){this.overloadTree=new r.OverloadTree(g),this.collected=!1}collect(){if(this.collected)throw new Error("Builders can only be collected once!");return this.collected=!0,this.overloadTree}static wrapInvalidLexicalProtected(g){return T=>v=>{for(const[S,F]of v.entries())if(F instanceof o.NonLexicalLiteral)throw new e.InvalidLexicalForm(v[S].toRDF(T.context.getSafe(u.KeysInitQuery.dataFactory)));return g(T)(v)}}set(g,T,v=!0){return this.overloadTree.addOverload(g,v?c.wrapInvalidLexicalProtected(T):T),this}copy({from:g,to:T}){const v=this.overloadTree.getImplementationExact(g);if(!v)throw new e.UnexpectedError("Tried to copy implementation, but types not found",{from:g,to:T});return this.set(T,v)}onUnary(g,T,v=!0){return this.set([g],S=>([F])=>T(S)(F),v)}onUnaryTyped(g,T,v=!0){return this.set([g],S=>([F])=>T(S)(F.typedValue),v)}onBinary(g,T,v=!0){return this.set(g,S=>([F,M])=>T(S)(F,M),v)}onBinaryTyped(g,T,v=!0){return this.set(g,S=>([F,M])=>T(S)(F.typedValue,M.typedValue),v)}onTernaryTyped(g,T,v=!0){return this.set(g,S=>([F,M,O])=>T(S)(F.typedValue,M.typedValue,O.typedValue),v)}onTernary(g,T,v=!0){return this.set(g,S=>([F,M,O])=>T(S)(F,M,O),v)}onQuaternaryTyped(g,T,v=!0){return this.set(g,S=>([F,M,O,w])=>T(S)(F.typedValue,M.typedValue,O.typedValue,w.typedValue),v)}onTerm1(g,T=!1){return this.set(["term"],v=>([S])=>g(v)(S),T)}onTerm3(g){return this.set(["term","term","term"],T=>([v,S,F])=>g(T)(v,S,F))}onQuad1(g){return this.set(["quad"],T=>([v])=>g(T)(v))}onLiteral1(g,T=!0){return this.set(["literal"],v=>([S])=>g(v)(S),T)}onBoolean1(g,T=!0){return this.set([i.TypeURL.XSD_BOOLEAN],v=>([S])=>g(v)(S),T)}onBoolean1Typed(g,T=!0){return this.set([i.TypeURL.XSD_BOOLEAN],v=>([S])=>g(v)(S.typedValue),T)}onString1(g,T=!0){return this.set([i.TypeURL.XSD_STRING],v=>([S])=>g(v)(S),T)}onString1Typed(g,T=!0){return this.set([i.TypeURL.XSD_STRING],v=>([S])=>g(v)(S.typedValue),T)}onLangString1(g,T=!0){return this.set([i.TypeURL.RDF_LANG_STRING],v=>([S])=>g(v)(S),T)}onStringly1(g,T=!0){return this.set([i.TypeAlias.SPARQL_STRINGLY],v=>([S])=>g(v)(S),T)}onStringly1Typed(g,T=!0){return this.set([i.TypeAlias.SPARQL_STRINGLY],v=>([S])=>g(v)(S.typedValue),T)}onNumeric1(g,T=!0){return this.set([i.TypeAlias.SPARQL_NUMERIC],v=>([S])=>g(v)(S),T)}onDateTime1(g,T=!0){return this.set([i.TypeURL.XSD_DATE_TIME],v=>([S])=>g(v)(S),T)}numericConverter(g,T=!0){const v=S=>F=>g(S)(F.typedValue);return this.onUnary(t.TypeURL.XSD_INTEGER,S=>F=>d(v(S)(F)),T).onUnary(t.TypeURL.XSD_DECIMAL,S=>F=>l(v(S)(F)),T).onUnary(t.TypeURL.XSD_FLOAT,S=>F=>f(v(S)(F)),T).onUnary(t.TypeURL.XSD_DOUBLE,S=>F=>h(v(S)(F)),T)}arithmetic(g,T=!0){const v=S=>(F,M)=>g(S)(F.typedValue,M.typedValue);return this.onBinary([t.TypeURL.XSD_INTEGER,t.TypeURL.XSD_INTEGER],S=>(F,M)=>d(v(S)(F,M)),T).onBinary([t.TypeURL.XSD_DECIMAL,t.TypeURL.XSD_DECIMAL],S=>(F,M)=>l(v(S)(F,M)),T).onBinary([t.TypeURL.XSD_FLOAT,t.TypeURL.XSD_FLOAT],S=>(F,M)=>f(v(S)(F,M)),T).onBinary([t.TypeURL.XSD_DOUBLE,t.TypeURL.XSD_DOUBLE],S=>(F,M)=>h(v(S)(F,M)),T)}numberTest(g){return this.numeric(T=>([v,S])=>{const F=g(T)(v.typedValue,S.typedValue);return s(F)})}stringTest(g,T=!0){return this.set([i.TypeURL.XSD_STRING,i.TypeURL.XSD_STRING],v=>([S,F])=>{const M=g(v)(S.typedValue,F.typedValue);return s(M)},T)}booleanTest(g,T=!0){return this.set([i.TypeURL.XSD_BOOLEAN,i.TypeURL.XSD_BOOLEAN],v=>([S,F])=>{const M=g(v)(S.typedValue,F.typedValue);return s(M)},T)}dateTimeTest(g,T=!0){return this.set([i.TypeURL.XSD_DATE_TIME,i.TypeURL.XSD_DATE_TIME],v=>([S,F])=>{const M=g(v)(S.typedValue,F.typedValue);return s(M)},T)}numeric(g){return this.set([i.TypeAlias.SPARQL_NUMERIC,i.TypeAlias.SPARQL_NUMERIC],g)}}Jt.Builder=c;function s(m){return new n.BooleanLiteral(m)}Jt.bool=s;function d(m){return new n.IntegerLiteral(m)}Jt.integer=d;function l(m){return new n.DecimalLiteral(m)}Jt.decimal=l;function f(m){return new n.FloatLiteral(m)}Jt.float=f;function h(m){return new n.DoubleLiteral(m)}Jt.double=h;function p(m){return new n.StringLiteral(m)}Jt.string=p;function y(m,g){return new n.LangStringLiteral(m,g)}Jt.langString=y;function _(m,g){return new n.DateTimeLiteral(m,g)}Jt.dateTime=_;function b(m,g){return m.variable(g.name.slice(1))}return Jt.expressionToVar=b,Jt}var eI;function t3(){return eI||(eI=1,(function(u){Object.defineProperty(u,"__esModule",{value:!0}),u.typePromotion=u.isSubTypeOf=u.getSuperTypeDict=u.isInternalSubType=u.asGeneralType=u.asOverrideType=u.asKnownLiteralType=u.asTypeAlias=u.typeAliasCheck=u.extensionTableInit=u.getSuperTypes=u.superTypeDictTable=u.extensionTableInput=void 0;const n=lf(),o=Z6(),i=Fa();u.extensionTableInput={[i.TypeURL.XSD_DATE_TIME_STAMP]:i.TypeURL.XSD_DATE_TIME,[i.TypeURL.XSD_DAY_TIME_DURATION]:i.TypeURL.XSD_DURATION,[i.TypeURL.XSD_YEAR_MONTH_DURATION]:i.TypeURL.XSD_DURATION,[i.TypeURL.RDF_LANG_STRING]:i.TypeAlias.SPARQL_STRINGLY,[i.TypeURL.XSD_STRING]:i.TypeAlias.SPARQL_STRINGLY,[i.TypeURL.XSD_NORMALIZED_STRING]:i.TypeURL.XSD_STRING,[i.TypeURL.XSD_TOKEN]:i.TypeURL.XSD_NORMALIZED_STRING,[i.TypeURL.XSD_LANGUAGE]:i.TypeURL.XSD_TOKEN,[i.TypeURL.XSD_NM_TOKEN]:i.TypeURL.XSD_TOKEN,[i.TypeURL.XSD_NAME]:i.TypeURL.XSD_TOKEN,[i.TypeURL.XSD_NC_NAME]:i.TypeURL.XSD_NAME,[i.TypeURL.XSD_ENTITY]:i.TypeURL.XSD_NC_NAME,[i.TypeURL.XSD_ID]:i.TypeURL.XSD_NC_NAME,[i.TypeURL.XSD_ID_REF]:i.TypeURL.XSD_NC_NAME,[i.TypeURL.XSD_DOUBLE]:i.TypeAlias.SPARQL_NUMERIC,[i.TypeURL.XSD_FLOAT]:i.TypeAlias.SPARQL_NUMERIC,[i.TypeURL.XSD_DECIMAL]:i.TypeAlias.SPARQL_NUMERIC,[i.TypeURL.XSD_INTEGER]:i.TypeURL.XSD_DECIMAL,[i.TypeURL.XSD_NON_POSITIVE_INTEGER]:i.TypeURL.XSD_INTEGER,[i.TypeURL.XSD_NEGATIVE_INTEGER]:i.TypeURL.XSD_NON_POSITIVE_INTEGER,[i.TypeURL.XSD_LONG]:i.TypeURL.XSD_INTEGER,[i.TypeURL.XSD_INT]:i.TypeURL.XSD_LONG,[i.TypeURL.XSD_SHORT]:i.TypeURL.XSD_INT,[i.TypeURL.XSD_BYTE]:i.TypeURL.XSD_SHORT,[i.TypeURL.XSD_NON_NEGATIVE_INTEGER]:i.TypeURL.XSD_INTEGER,[i.TypeURL.XSD_POSITIVE_INTEGER]:i.TypeURL.XSD_NON_NEGATIVE_INTEGER,[i.TypeURL.XSD_UNSIGNED_LONG]:i.TypeURL.XSD_NON_NEGATIVE_INTEGER,[i.TypeURL.XSD_UNSIGNED_INT]:i.TypeURL.XSD_UNSIGNED_LONG,[i.TypeURL.XSD_UNSIGNED_SHORT]:i.TypeURL.XSD_UNSIGNED_INT,[i.TypeURL.XSD_UNSIGNED_BYTE]:i.TypeURL.XSD_UNSIGNED_SHORT,[i.TypeURL.XSD_DATE_TIME]:"term",[i.TypeURL.XSD_BOOLEAN]:"term",[i.TypeURL.XSD_DATE]:"term",[i.TypeURL.XSD_G_MONTH]:"term",[i.TypeURL.XSD_G_MONTHDAY]:"term",[i.TypeURL.XSD_G_YEAR]:"term",[i.TypeURL.XSD_G_YEAR_MONTH]:"term",[i.TypeURL.XSD_TIME]:"term",[i.TypeURL.XSD_G_DAY]:"term",[i.TypeURL.XSD_DURATION]:"term",[i.TypeAlias.SPARQL_NUMERIC]:"term",[i.TypeAlias.SPARQL_STRINGLY]:"term",[i.TypeURL.XSD_ANY_URI]:"term"},u.superTypeDictTable=Object.create(null);function t(y,_){const b=_.cache.get(y);if(b)return b;const m=_.discoverer(y);if(m==="term"){const v=Object.create(null);return v.__depth=0,v[y]=0,_.cache.set(y,v),v}let g;const T=s(m);return T?g={...u.superTypeDictTable[T]}:g={...t(m,_)},g.__depth++,g[y]=g.__depth,_.cache.set(y,g),g}u.getSuperTypes=t;function e(){for(const[y,_]of Object.entries(u.extensionTableInput)){const b=y;u.superTypeDictTable[b]||r(b,_,u.superTypeDictTable)}}u.extensionTableInit=e,e();function r(y,_,b){if(_==="term"||_===void 0){const m=Object.create(null);m.__depth=0,m[y]=0,b[y]=m;return}b[_]||r(_,u.extensionTableInput[_],b),b[y]={...b[_],[y]:b[_].__depth+1,__depth:b[_].__depth+1}}u.typeAliasCheck=Object.create(null);function a(){for(const y of Object.values(i.TypeAlias))u.typeAliasCheck[y]=!0}a();function c(y){if(y in u.typeAliasCheck)return y}u.asTypeAlias=c;function s(y){if(y in u.superTypeDictTable)return y}u.asKnownLiteralType=s;function d(y){if(s(y)??y==="term")return y}u.asOverrideType=d;function l(y){if(y==="term"||(0,n.asTermType)(y))return y}u.asGeneralType=l;function f(y,_){return y!=="term"&&u.superTypeDictTable[y]&&u.superTypeDictTable[y][_]!==void 0}u.isInternalSubType=f;function h(y,_){const b=s(y);return b?u.superTypeDictTable[b]:t(y,_)}u.getSuperTypeDict=h;function p(y,_,b){return y==="term"?!1:h(y,b)[_]!==void 0}u.isSubTypeOf=p,u.typePromotion={[i.TypeURL.XSD_STRING]:[{typeToPromote:i.TypeURL.XSD_ANY_URI,conversionFunction:y=>(0,o.string)(y.str())}],[i.TypeURL.XSD_DOUBLE]:[{typeToPromote:i.TypeURL.XSD_FLOAT,conversionFunction:y=>(0,o.double)(y.typedValue)},{typeToPromote:i.TypeURL.XSD_DECIMAL,conversionFunction:y=>(0,o.double)(y.typedValue)}],[i.TypeURL.XSD_FLOAT]:[{typeToPromote:i.TypeURL.XSD_DECIMAL,conversionFunction:y=>(0,o.float)(y.typedValue)}]}})(wO)),wO}var tI;function fk(){if(tI)return lt;tI=1,Object.defineProperty(lt,"__esModule",{value:!0}),lt.isNonLexicalLiteral=lt.NonLexicalLiteral=lt.YearMonthDurationLiteral=lt.DayTimeDurationLiteral=lt.DurationLiteral=lt.DateLiteral=lt.TimeLiteral=lt.DateTimeLiteral=lt.StringLiteral=lt.LangStringLiteral=lt.BooleanLiteral=lt.DoubleLiteral=lt.FloatLiteral=lt.DecimalLiteral=lt.IntegerLiteral=lt.NumericLiteral=lt.Literal=lt.isLiteralTermExpression=lt.DefaultGraph=lt.Quad=lt.BlankNode=lt.NamedNode=lt.Term=void 0;const u=Vi(),n=Fa(),o=Fa(),i=df(),t=lk(),e=t3();class r{constructor(){this.expressionType=u.ExpressionType.Term}str(){throw new i.InvalidArgumentTypes([this],n.SparqlOperator.STR)}coerceEBV(){throw new i.EBVCoercionError(this)}}lt.Term=r;class a extends r{constructor(B){super(),this.value=B,this.termType="namedNode"}toRDF(B){return B.namedNode(this.value)}str(){return this.value}}lt.NamedNode=a;class c extends r{constructor(B){super(),this.termType="blankNode",this.value=B}toRDF(B){return typeof this.value=="string"?B.blankNode(this.value):this.value}}lt.BlankNode=c;class s extends r{constructor(B,C,$,Z){super(),this.subject=B,this.predicate=C,this.object=$,this.graph=Z,this.termType="quad"}toRDF(B){return B.quad(this.subject.toRDF(B),this.predicate.toRDF(B),this.object.toRDF(B),this.graph.toRDF(B))}str(){return`Quad: [${this.subject.str()}, ${this.predicate.str()}, ${this.object.str()}, ${this.graph.str()}]`}}lt.Quad=s;class d extends r{constructor(){super(),this.termType="defaultGraph"}toRDF(B){return B.defaultGraph()}str(){return"DefaultGraph"}}lt.DefaultGraph=d;function l(D){if(D.termType==="literal")return D}lt.isLiteralTermExpression=l;class f extends r{constructor(B,C,$,Z){super(),this.typedValue=B,this.dataType=C,this.strValue=$,this.language=Z,this.termType="literal"}toRDF(B){return B.literal(this.strValue??this.str(),this.language??B.namedNode(this.dataType))}str(){return this.strValue??this.typedValue.toString()}}lt.Literal=f;class h extends f{constructor(B,C,$,Z){super(B,C,$,Z),this.typedValue=B,this.strValue=$,this.language=Z}coerceEBV(){return!!this.typedValue}toRDF(B){const C=super.toRDF(B);return Number.isFinite(this.typedValue)||(C.value=C.value.replace("Infinity","INF")),C}str(){return this.strValue??this.specificFormatter(this.typedValue)}}lt.NumericLiteral=h;class p extends h{constructor(B,C,$,Z){super(B,C??o.TypeURL.XSD_INTEGER,$,Z),this.typedValue=B,this.strValue=$,this.language=Z}specificFormatter(B){return B.toFixed(0)}}lt.IntegerLiteral=p;class y extends h{constructor(B,C,$,Z){super(B,C??o.TypeURL.XSD_DECIMAL,$,Z),this.typedValue=B,this.strValue=$,this.language=Z}specificFormatter(B){return B.toString()}}lt.DecimalLiteral=y;class _ extends h{constructor(B,C,$,Z){super(B,C??o.TypeURL.XSD_FLOAT,$,Z),this.typedValue=B,this.strValue=$,this.language=Z}specificFormatter(B){return B.toString()}}lt.FloatLiteral=_;class b extends h{constructor(B,C,$,Z){super(B,C??o.TypeURL.XSD_DOUBLE,$,Z),this.typedValue=B,this.strValue=$,this.language=Z}specificFormatter(B){if(!Number.isFinite(B))return B>0?"INF":B<0?"-INF":"NaN";const C=B.toExponential(),[$,Z]=C.split("e"),ee=Z.replace(/\+/u,"");return`${$.includes(".")?$:`${$}.0`}E${ee}`}}lt.DoubleLiteral=b;class m extends f{constructor(B,C,$){super(B,$??o.TypeURL.XSD_BOOLEAN,C),this.typedValue=B,this.strValue=C}coerceEBV(){return this.typedValue}}lt.BooleanLiteral=m;class g extends f{constructor(B,C,$){super(B,$??o.TypeURL.RDF_LANG_STRING,B,C),this.typedValue=B,this.language=C}coerceEBV(){return this.str().length>0}}lt.LangStringLiteral=g;class T extends f{constructor(B,C){super(B,C??o.TypeURL.XSD_STRING,B),this.typedValue=B}coerceEBV(){return this.str().length>0}}lt.StringLiteral=T;class v extends f{constructor(B,C,$){super(B,$??o.TypeURL.XSD_DATE_TIME,C),this.typedValue=B,this.strValue=C}str(){return(0,t.serializeDateTime)(this.typedValue)}}lt.DateTimeLiteral=v;class S extends f{constructor(B,C,$){super(B,$??o.TypeURL.XSD_TIME,C),this.typedValue=B,this.strValue=C}str(){return(0,t.serializeTime)(this.typedValue)}}lt.TimeLiteral=S;class F extends f{constructor(B,C,$){super(B,$??o.TypeURL.XSD_DATE,C),this.typedValue=B,this.strValue=C}str(){return(0,t.serializeDate)(this.typedValue)}}lt.DateLiteral=F;class M extends f{constructor(B,C,$){super(B,$??o.TypeURL.XSD_DURATION,C),this.typedValue=B,this.strValue=C}str(){return(0,t.serializeDuration)(this.typedValue)}}lt.DurationLiteral=M;class O extends M{constructor(B,C,$){super(B,C,$??o.TypeURL.XSD_DAY_TIME_DURATION),this.typedValue=B,this.strValue=C}}lt.DayTimeDurationLiteral=O;class w extends f{constructor(B,C,$){super(B,$??o.TypeURL.XSD_YEAR_MONTH_DURATION,C),this.typedValue=B,this.strValue=C}str(){return(0,t.serializeDuration)(this.typedValue,"P0M")}}lt.YearMonthDurationLiteral=w;class E extends f{constructor(B,C,$,Z,ee){super({toString:()=>"undefined"},C,Z,ee),this.openWorldType=$}coerceEBV(){if((0,e.isSubTypeOf)(this.dataType,o.TypeURL.XSD_BOOLEAN,this.openWorldType)||(0,e.isSubTypeOf)(this.dataType,o.TypeAlias.SPARQL_NUMERIC,this.openWorldType))return!1;throw new i.EBVCoercionError(this)}toRDF(B){return B.literal(this.str(),this.language??B.namedNode(this.dataType))}str(){return this.strValue??""}}lt.NonLexicalLiteral=E;function R(D){if(D instanceof E)return D}return lt.isNonLexicalLiteral=R,lt}var Kh={},rI;function hk(){if(rI)return Kh;rI=1,Object.defineProperty(Kh,"__esModule",{value:!0}),Kh.Operator=void 0;const u=Vi();let n=class{constructor(i,t,e){this.name=i,this.args=t,this.apply=e,this.expressionType=u.ExpressionType.Operator}};return Kh.Operator=n,Kh}var kh={},nI;function pk(){if(nI)return kh;nI=1,Object.defineProperty(kh,"__esModule",{value:!0}),kh.Aggregate=void 0;const u=Vi();let n=class{constructor(i,t){this.name=i,this.expression=t,this.expressionType=u.ExpressionType.Aggregate}};return kh.Aggregate=n,kh}var Wh={},iI;function yk(){if(iI)return Wh;iI=1,Object.defineProperty(Wh,"__esModule",{value:!0}),Wh.Existence=void 0;const u=Vi();let n=class{constructor(i){this.expression=i,this.expressionType=u.ExpressionType.Existence}};return Wh.Existence=n,Wh}var aI;function lf(){return aI||(aI=1,(function(u){var n=Ra&&Ra.__createBinding||(Object.create?(function(i,t,e,r){r===void 0&&(r=e);var a=Object.getOwnPropertyDescriptor(t,e);(!a||("get"in a?!t.__esModule:a.writable||a.configurable))&&(a={enumerable:!0,get:function(){return t[e]}}),Object.defineProperty(i,r,a)}):(function(i,t,e,r){r===void 0&&(r=e),i[r]=t[e]})),o=Ra&&Ra.__exportStar||function(i,t){for(var e in i)e!=="default"&&!Object.prototype.hasOwnProperty.call(t,e)&&n(t,i,e)};Object.defineProperty(u,"__esModule",{value:!0}),o(ck(),u),o(dk(),u),o(fk(),u),o(hk(),u),o(pk(),u),o(yk(),u)})(Ra)),Ra}var pr={},Rt={},uI;function Yh(){if(uI)return Rt;uI=1,Object.defineProperty(Rt,"__esModule",{value:!0}),Rt.extractTimeZone=Rt.extractRawTimeZone=Rt.dayTimeDurationsToSeconds=Rt.yearMonthDurationsToMonths=Rt.trimToDayTimeDuration=Rt.trimToYearMonthDuration=Rt.toUTCDate=Rt.toJSDate=Rt.negateDuration=Rt.toDateTimeRepresentation=Rt.defaultedDateTimeRepresentation=Rt.simplifyDurationRepresentation=Rt.defaultedDurationRepresentation=Rt.defaultedYearMonthDurationRepresentation=Rt.defaultedDayTimeDurationRepresentation=void 0;function u(y){return{day:y.day??0,hours:y.hours??0,minutes:y.minutes??0,seconds:y.seconds??0}}Rt.defaultedDayTimeDurationRepresentation=u;function n(y){return{year:y.year??0,month:y.month??0}}Rt.defaultedYearMonthDurationRepresentation=n;function o(y){return{...u(y),...n(y)}}Rt.defaultedDurationRepresentation=o;function i(y){const _=o(y),b={},m=_.year+Math.trunc(_.month/12);m&&(b.year=m,_.month%=12),_.month&&(b.month=_.month);const g=_.day+Math.trunc(_.hours/24)+Math.trunc(_.minutes/1440)+Math.trunc(_.seconds/(1440*60));g&&(b.day=g,_.hours%=24,_.minutes%=1440,_.seconds%=1440*60);const T=_.hours+Math.trunc(_.minutes/60)+Math.trunc(_.seconds/3600);T&&(b.hours=T,_.minutes%=60,_.seconds%=3600);const v=_.minutes+Math.trunc(_.seconds/60);return v&&(b.minutes=v,_.seconds%=60),_.seconds&&(b.seconds=_.seconds),b}Rt.simplifyDurationRepresentation=i;function t(y){return{...y,day:y.day??1,hours:y.hours??0,month:y.month??1,year:y.year??0,seconds:y.seconds??0,minutes:y.minutes??0}}Rt.defaultedDateTimeRepresentation=t;function e({date:y,timeZone:_}){return{year:y.getFullYear(),month:y.getMonth()+1,day:y.getDate(),hours:y.getHours(),minutes:y.getMinutes(),seconds:y.getSeconds(),zoneHours:_.zoneHours,zoneMinutes:_.zoneMinutes}}Rt.toDateTimeRepresentation=e;function r(y){return{year:y.year===void 0?void 0:-1*y.year,month:y.month===void 0?void 0:-1*y.month,day:y.day===void 0?void 0:-1*y.day,hours:y.hours===void 0?void 0:-1*y.hours,minutes:y.minutes===void 0?void 0:-1*y.minutes,seconds:y.seconds===void 0?void 0:-1*y.seconds}}Rt.negateDuration=r;function a(y){const _=new Date(y.year,y.month-1,y.day,y.hours,y.minutes,Math.trunc(y.seconds),y.seconds%1*1e3);return y.year>=0&&y.year<100&&_.setFullYear(_.getFullYear()-1900),_}Rt.toJSDate=a;function c(y,_){const b=a(t(y)),m=b.getTimezoneOffset(),g=y.zoneHours??_.zoneHours,T=y.zoneMinutes??_.zoneMinutes;return new Date(b.getTime()-(m+g*60+T)*60*1e3)}Rt.toUTCDate=c;function s(y){return{year:y.year,month:y.month}}Rt.trimToYearMonthDuration=s;function d(y){return{day:y.day,hours:y.hours,minutes:y.minutes,seconds:y.seconds}}Rt.trimToDayTimeDuration=d;function l(y){return y.year*12+y.month}Rt.yearMonthDurationsToMonths=l;function f(y){return((y.day*24+y.hours)*60+y.minutes)*60+y.seconds}Rt.dayTimeDurationsToSeconds=f;function h(y){return/(Z|([+-]\d\d:\d\d))?$/u.exec(y)[0]}Rt.extractRawTimeZone=h;function p(y){return{zoneHours:y.getTimezoneOffset()/60,zoneMinutes:y.getTimezoneOffset()%60}}return Rt.extractTimeZone=p,Rt}var si={},oI;function sI(){if(oI)return si;oI=1,Object.defineProperty(si,"__esModule",{value:!0}),si.elapsedDuration=si.addDurationToDateTime=si.maximumDayInMonthFor=void 0;const u=Yh();function n(e,r,a=0){const c=e-a,s=r-a,d=Math.floor(c/s);return{intDiv:d,remainder:e-d*s}}function o(e,r){const{intDiv:a,remainder:c}=n(r,13,1),s=e+a;return[1,3,5,7,8,10,12].includes(c)?31:[4,6,9,11].includes(c)?30:c===2&&(n(s,400).remainder===0||n(s,100).remainder!==0&&n(s,4).remainder===0)?29:28}si.maximumDayInMonthFor=o;function i(e,r){const a={...e};let c=n(e.month+r.month,13,1);for(a.month=c.remainder,a.year=e.year+r.year+c.intDiv,c=n(e.seconds+r.seconds,60),a.seconds=c.remainder,c=n(e.minutes+r.minutes+c.intDiv,60),a.minutes=c.remainder,c=n(e.hours+r.hours+c.intDiv,24),a.hours=c.remainder,a.day=e.day+r.day+c.intDiv;;){let s;if(a.day<1)a.day+=o(a.year,a.month-1),s=-1;else if(a.day>o(a.year,a.month))a.day-=o(a.year,a.month),s=1;else break;c=n(a.month+s,13,1),a.month=c.remainder,a.year+=c.intDiv}return a}si.addDurationToDateTime=i;function t(e,r,a){const c=(0,u.toUTCDate)(e,a),s=(0,u.toUTCDate)(r,a),d=c.getTime()-s.getTime();return{day:Math.floor(d/(1e3*60*60*24)),hours:Math.floor(d%(1e3*60*60*24)/(1e3*60*60)),minutes:Math.floor(d%(1e3*60*60)/(1e3*60)),seconds:d%(1e3*60)}}return si.elapsedDuration=t,si}var cI;function SO(){if(cI)return pr;cI=1,Object.defineProperty(pr,"__esModule",{value:!0}),pr.parseDayTimeDuration=pr.parseYearMonthDuration=pr.parseDuration=pr.parseTime=pr.parseDate=pr.parseDateTime=pr.parseXSDDecimal=pr.parseXSDFloat=void 0;const u=Yh(),n=df(),o=sI();function i(h){const p=Number(h);return Number.isNaN(p)?h==="NaN"?Number.NaN:h==="INF"||h==="+INF"?Number.POSITIVE_INFINITY:h==="-INF"?Number.NEGATIVE_INFINITY:void 0:p}pr.parseXSDFloat=i;function t(h){const p=Number(h);return Number.isNaN(p)?void 0:p}pr.parseXSDDecimal=t;function e(h){const[p,y]=h.split("T");if(y===void 0)throw new n.ParseError(h,"dateTime");return{...a(p),...c(y)}}pr.parseDateTime=e;function r(h){if(h==="")return{zoneHours:void 0,zoneMinutes:void 0};if(h==="Z")return{zoneHours:0,zoneMinutes:0};const y=h.replaceAll(/^([+|-])(\d\d):(\d\d)$/gu,"$11!$2!$3").split("!").map(Number);return{zoneHours:y[0]*y[1],zoneMinutes:y[0]*y[2]}}function a(h){const p=h.replaceAll(/^(-)?([123456789]*\d{4})-(\d\d)-(\d\d)(Z|([+-]\d\d:\d\d))?$/gu,"$11!$2!$3!$4!$5");if(p===h)throw new n.ParseError(h,"date");const y=p.split("!"),_=y.slice(0,-1).map(Number),b={year:_[0]*_[1],month:_[2],day:_[3],...r(y[4])};if(!(b.month>=1&&b.month<=12)||!(b.day>=1&&b.day<=(0,o.maximumDayInMonthFor)(b.year,b.month)))throw new n.ParseError(h,"date");return b}pr.parseDate=a;function c(h){const p=h.replaceAll(/^(\d\d):(\d\d):(\d\d(\.\d+)?)(Z|([+-]\d\d:\d\d))?$/gu,"$1!$2!$3!$5");if(p===h)throw new n.ParseError(h,"time");const y=p.split("!"),_=y.slice(0,-1).map(Number),b={hours:_[0],minutes:_[1],seconds:_[2],...r(y[3])};if(b.seconds>=60||b.minutes>=60||b.hours>24||b.hours===24&&(b.minutes!==0||b.seconds!==0))throw new n.ParseError(h,"time");return b}function s(h){const p=c(h);return p.hours%=24,p}pr.parseTime=s;function d(h){const[p,y]=h.split("T"),_=p.replaceAll(/^(-)?P(\d+Y)?(\d+M)?(\d+D)?$/gu,"$11S!$2!$3!$4");if(_===p)throw new n.ParseError(h,"duration");const b=_.split("!");if(y!==void 0){const T=y.replaceAll(/^(\d+H)?(\d+M)?(\d+(\.\d+)?S)?$/gu,"$1!$2!$3");if(y===""||y===T)throw new n.ParseError(h,"duration");b.push(...T.split("!"))}const m=b.map(T=>T.slice(0,-1));if(!m.slice(1).some(Boolean))throw new n.ParseError(h,"duration");const g=Number(m[0]);return(0,u.simplifyDurationRepresentation)({year:m[1]?g*Number(m[1]):void 0,month:m[2]?g*Number(m[2]):void 0,day:m[3]?g*Number(m[3]):void 0,hours:m[4]?g*Number(m[4]):void 0,minutes:m[5]?g*Number(m[5]):void 0,seconds:m[6]?g*Number(m[6]):void 0})}pr.parseDuration=d;function l(h){const p=d(h);if(["hours","minutes","seconds","day"].some(y=>!!p[y]))throw new n.ParseError(h,"yearMonthDuration");return p}pr.parseYearMonthDuration=l;function f(h){const p=d(h);if(["year","month"].some(y=>!!p[y]))throw new n.ParseError(h,"dayTimeDuration");return p}return pr.parseDayTimeDuration=f,pr}var dI;function bk(){if(dI)return Nh;dI=1,Object.defineProperty(Nh,"__esModule",{value:!0}),Nh.TermTransformer=void 0;const u=Yt(),n=st(),o=lf(),i=Fa(),t=df(),e=df(),r=SO(),a=SO(),c=t3();let s=class{constructor(l){this.superTypeProvider=l}transformRDFTermUnsafe(l){return this.transformTerm({term:l,type:n.Algebra.types.EXPRESSION,expressionType:n.Algebra.expressionTypes.TERM})}transformTerm(l){if(!l.term)throw new t.InvalidExpression(l);switch(l.term.termType){case"Variable":return new o.Variable(u.termToString(l.term));case"Literal":return this.transformLiteral(l.term);case"NamedNode":return new o.NamedNode(l.term.value);case"BlankNode":return new o.BlankNode(l.term.value);case"Quad":return new o.Quad(this.transformRDFTermUnsafe(l.term.subject),this.transformRDFTermUnsafe(l.term.predicate),this.transformRDFTermUnsafe(l.term.object),this.transformRDFTermUnsafe(l.term.graph));case"DefaultGraph":return new o.DefaultGraph}}transformLiteral(l){if(!l.datatype||[null,void 0,""].includes(l.datatype.value))return l.language?new o.LangStringLiteral(l.value,l.language):new o.StringLiteral(l.value);const f=l.datatype.value,h=(0,c.getSuperTypeDict)(f,this.superTypeProvider);try{if(i.TypeURL.XSD_STRING in h)return new o.StringLiteral(l.value,f);if(i.TypeURL.RDF_LANG_STRING in h)return new o.LangStringLiteral(l.value,l.language);if(i.TypeURL.XSD_YEAR_MONTH_DURATION in h)return new o.YearMonthDurationLiteral((0,r.parseYearMonthDuration)(l.value),l.value,f);if(i.TypeURL.XSD_DAY_TIME_DURATION in h)return new o.DayTimeDurationLiteral((0,r.parseDayTimeDuration)(l.value),l.value,f);if(i.TypeURL.XSD_DURATION in h)return new o.DurationLiteral((0,r.parseDuration)(l.value),l.value,f);if(i.TypeURL.XSD_DATE_TIME in h){const _=new Date(l.value);return Number.isNaN(_.getTime())?new o.NonLexicalLiteral(void 0,f,this.superTypeProvider,l.value):new o.DateTimeLiteral((0,r.parseDateTime)(l.value),l.value,f)}if(i.TypeURL.XSD_DATE in h)return new o.DateLiteral((0,r.parseDate)(l.value),l.value,f);if(i.TypeURL.XSD_TIME in h)return new o.TimeLiteral((0,r.parseTime)(l.value),l.value,f);if(i.TypeURL.XSD_BOOLEAN in h)return l.value!=="true"&&l.value!=="false"&&l.value!=="1"&&l.value!=="0"?new o.NonLexicalLiteral(void 0,f,this.superTypeProvider,l.value):new o.BooleanLiteral(l.value==="true"||l.value==="1",l.value);if(i.TypeURL.XSD_DECIMAL in h){const _=a.parseXSDDecimal(l.value);return _===void 0?new o.NonLexicalLiteral(void 0,f,this.superTypeProvider,l.value):i.TypeURL.XSD_INTEGER in h?new o.IntegerLiteral(_,f,l.value):new o.DecimalLiteral(_,f,l.value)}const p=i.TypeURL.XSD_FLOAT in h,y=i.TypeURL.XSD_DOUBLE in h;if(p||y){const _=a.parseXSDFloat(l.value);return _===void 0?new o.NonLexicalLiteral(void 0,f,this.superTypeProvider,l.value):p?new o.FloatLiteral(_,f,l.value):new o.DoubleLiteral(_,f,l.value)}return new o.Literal(l.value,f,l.value)}catch(p){if((0,e.isExpressionError)(p))return new o.NonLexicalLiteral(void 0,f,this.superTypeProvider,l.value);throw p}}};return Nh.TermTransformer=s,Nh}var Zh={},ep={},lI;function ff(){var f,h,y,_,b,m,g,T,v,S,F,M,O,w,E,R,D,B,C,$,Z,ee,ce,G,fe,me,ye,re,wx,Re,Ie,he,be,ZX,P,N,A,na,ia,Sx,Lw,Mw,kt,Ox,OT,aa,Ax;if(lI)return ep;lI=1,Object.defineProperty(ep,"__esModule",{value:!0}),ep.LRUCache=void 0;const u=typeof performance=="object"&&performance&&typeof performance.now=="function"?performance:Date,n=new Set,o=typeof process=="object"&&process?process:{},i=(Oe,ue,L,x)=>{typeof o.emitWarning=="function"?o.emitWarning(Oe,ue,L,x):console.error(`[${L}] ${ue}: ${Oe}`)};let t=globalThis.AbortController,e=globalThis.AbortSignal;if(typeof t>"u"){e=class{constructor(){Wt(this,"onabort");Wt(this,"_onabort",[]);Wt(this,"reason");Wt(this,"aborted",!1)}addEventListener(x,j){this._onabort.push(j)}},t=class{constructor(){Wt(this,"signal",new e);ue()}abort(x){var j,z;if(!this.signal.aborted){this.signal.reason=x,this.signal.aborted=!0;for(const W of this.signal._onabort)W(x);(z=(j=this.signal).onabort)==null||z.call(j,x)}}};let Oe=((f=o.env)==null?void 0:f.LRU_CACHE_IGNORE_AC_WARNING)!=="1";const ue=()=>{Oe&&(Oe=!1,i("AbortController is not defined. If using lru-cache in node 14, load an AbortController polyfill from the `node-abort-controller` package. A minimal polyfill is provided for use by LRUCache.fetch(), but it should not be relied upon in other contexts (eg, passing it to other APIs that use AbortController/AbortSignal might have undesirable effects). You may disable this with LRU_CACHE_IGNORE_AC_WARNING=1 in the env.","NO_ABORT_CONTROLLER","ENOTSUP",ue))}}const r=Oe=>!n.has(Oe),a=Oe=>Oe&&Oe===Math.floor(Oe)&&Oe>0&&isFinite(Oe),c=Oe=>a(Oe)?Oe<=Math.pow(2,8)?Uint8Array:Oe<=Math.pow(2,16)?Uint16Array:Oe<=Math.pow(2,32)?Uint32Array:Oe<=Number.MAX_SAFE_INTEGER?s:null:null;class s extends Array{constructor(ue){super(ue),this.fill(0)}}const p=class p{constructor(ue,L){Wt(this,"heap");Wt(this,"length");if(!de(p,h))throw new TypeError("instantiate Stack using Stack.create(n)");this.heap=new L(ue),this.length=0}static create(ue){const L=c(ue);if(!L)return[];dt(p,h,!0);const x=new p(ue,L);return dt(p,h,!1),x}push(ue){this.heap[this.length++]=ue}pop(){return this.heap[--this.length]}};h=new WeakMap,Ft(p,h,!1);let d=p;const Me=class Me{constructor(ue){Ft(this,re);Ft(this,b);Ft(this,m);Ft(this,g);Ft(this,T);Ft(this,v);Ft(this,S);Wt(this,"ttl");Wt(this,"ttlResolution");Wt(this,"ttlAutopurge");Wt(this,"updateAgeOnGet");Wt(this,"updateAgeOnHas");Wt(this,"allowStale");Wt(this,"noDisposeOnSet");Wt(this,"noUpdateTTL");Wt(this,"maxEntrySize");Wt(this,"sizeCalculation");Wt(this,"noDeleteOnFetchRejection");Wt(this,"noDeleteOnStaleGet");Wt(this,"allowStaleOnFetchAbort");Wt(this,"allowStaleOnFetchRejection");Wt(this,"ignoreFetchAbort");Ft(this,F);Ft(this,M);Ft(this,O);Ft(this,w);Ft(this,E);Ft(this,R);Ft(this,D);Ft(this,B);Ft(this,C);Ft(this,$);Ft(this,Z);Ft(this,ee);Ft(this,ce);Ft(this,G);Ft(this,fe);Ft(this,me);Ft(this,ye);Ft(this,Re,()=>{});Ft(this,Ie,()=>{});Ft(this,he,()=>{});Ft(this,be,()=>!1);Ft(this,P,ue=>{});Ft(this,N,(ue,L,x)=>{});Ft(this,A,(ue,L,x,j)=>{if(x||j)throw new TypeError("cannot set size without setting maxSize or maxEntrySize on cache");return 0});Wt(this,y,"LRUCache");const{max:L=0,ttl:x,ttlResolution:j=1,ttlAutopurge:z,updateAgeOnGet:W,updateAgeOnHas:le,allowStale:ae,dispose:De,disposeAfter:Ve,noDisposeOnSet:Be,noUpdateTTL:Ze,maxSize:J=0,maxEntrySize:we=0,sizeCalculation:Ee,fetchMethod:$e,memoMethod:Pe,noDeleteOnFetchRejection:et,noDeleteOnStaleGet:rt,allowStaleOnFetchRejection:ke,allowStaleOnFetchAbort:ft,ignoreFetchAbort:te}=ue;if(L!==0&&!a(L))throw new TypeError("max option must be a nonnegative integer");const ne=L?c(L):Array;if(!ne)throw new Error("invalid max value: "+L);if(dt(this,b,L),dt(this,m,J),this.maxEntrySize=we||de(this,m),this.sizeCalculation=Ee,this.sizeCalculation){if(!de(this,m)&&!this.maxEntrySize)throw new TypeError("cannot set sizeCalculation without setting maxSize or maxEntrySize");if(typeof this.sizeCalculation!="function")throw new TypeError("sizeCalculation set to non-function")}if(Pe!==void 0&&typeof Pe!="function")throw new TypeError("memoMethod must be a function if defined");if(dt(this,S,Pe),$e!==void 0&&typeof $e!="function")throw new TypeError("fetchMethod must be a function if specified");if(dt(this,v,$e),dt(this,me,!!$e),dt(this,O,new Map),dt(this,w,new Array(L).fill(void 0)),dt(this,E,new Array(L).fill(void 0)),dt(this,R,new ne(L)),dt(this,D,new ne(L)),dt(this,B,0),dt(this,C,0),dt(this,$,d.create(L)),dt(this,F,0),dt(this,M,0),typeof De=="function"&&dt(this,g,De),typeof Ve=="function"?(dt(this,T,Ve),dt(this,Z,[])):(dt(this,T,void 0),dt(this,Z,void 0)),dt(this,fe,!!de(this,g)),dt(this,ye,!!de(this,T)),this.noDisposeOnSet=!!Be,this.noUpdateTTL=!!Ze,this.noDeleteOnFetchRejection=!!et,this.allowStaleOnFetchRejection=!!ke,this.allowStaleOnFetchAbort=!!ft,this.ignoreFetchAbort=!!te,this.maxEntrySize!==0){if(de(this,m)!==0&&!a(de(this,m)))throw new TypeError("maxSize must be a positive integer if specified");if(!a(this.maxEntrySize))throw new TypeError("maxEntrySize must be a positive integer if specified");nt(this,re,ZX).call(this)}if(this.allowStale=!!ae,this.noDeleteOnStaleGet=!!rt,this.updateAgeOnGet=!!W,this.updateAgeOnHas=!!le,this.ttlResolution=a(j)||j===0?j:1,this.ttlAutopurge=!!z,this.ttl=x||0,this.ttl){if(!a(this.ttl))throw new TypeError("ttl must be a positive integer if specified");nt(this,re,wx).call(this)}if(de(this,b)===0&&this.ttl===0&&de(this,m)===0)throw new TypeError("At least one of max, maxSize, or ttl is required");if(!this.ttlAutopurge&&!de(this,b)&&!de(this,m)){const Ne="LRU_CACHE_UNBOUNDED";r(Ne)&&(n.add(Ne),i("TTL caching without ttlAutopurge, max, or maxSize can result in unbounded memory consumption.","UnboundedCacheWarning",Ne,Me))}}static unsafeExposeInternals(ue){return{starts:de(ue,ce),ttls:de(ue,G),sizes:de(ue,ee),keyMap:de(ue,O),keyList:de(ue,w),valList:de(ue,E),next:de(ue,R),prev:de(ue,D),get head(){return de(ue,B)},get tail(){return de(ue,C)},free:de(ue,$),isBackgroundFetch:L=>{var x;return nt(x=ue,re,kt).call(x,L)},backgroundFetch:(L,x,j,z)=>{var W;return nt(W=ue,re,Mw).call(W,L,x,j,z)},moveToTail:L=>{var x;return nt(x=ue,re,OT).call(x,L)},indexes:L=>{var x;return nt(x=ue,re,na).call(x,L)},rindexes:L=>{var x;return nt(x=ue,re,ia).call(x,L)},isStale:L=>{var x;return de(x=ue,be).call(x,L)}}}get max(){return de(this,b)}get maxSize(){return de(this,m)}get calculatedSize(){return de(this,M)}get size(){return de(this,F)}get fetchMethod(){return de(this,v)}get memoMethod(){return de(this,S)}get dispose(){return de(this,g)}get disposeAfter(){return de(this,T)}getRemainingTTL(ue){return de(this,O).has(ue)?1/0:0}*entries(){for(const ue of nt(this,re,na).call(this))de(this,E)[ue]!==void 0&&de(this,w)[ue]!==void 0&&!nt(this,re,kt).call(this,de(this,E)[ue])&&(yield[de(this,w)[ue],de(this,E)[ue]])}*rentries(){for(const ue of nt(this,re,ia).call(this))de(this,E)[ue]!==void 0&&de(this,w)[ue]!==void 0&&!nt(this,re,kt).call(this,de(this,E)[ue])&&(yield[de(this,w)[ue],de(this,E)[ue]])}*keys(){for(const ue of nt(this,re,na).call(this)){const L=de(this,w)[ue];L!==void 0&&!nt(this,re,kt).call(this,de(this,E)[ue])&&(yield L)}}*rkeys(){for(const ue of nt(this,re,ia).call(this)){const L=de(this,w)[ue];L!==void 0&&!nt(this,re,kt).call(this,de(this,E)[ue])&&(yield L)}}*values(){for(const ue of nt(this,re,na).call(this))de(this,E)[ue]!==void 0&&!nt(this,re,kt).call(this,de(this,E)[ue])&&(yield de(this,E)[ue])}*rvalues(){for(const ue of nt(this,re,ia).call(this))de(this,E)[ue]!==void 0&&!nt(this,re,kt).call(this,de(this,E)[ue])&&(yield de(this,E)[ue])}[(_=Symbol.iterator,y=Symbol.toStringTag,_)](){return this.entries()}find(ue,L={}){for(const x of nt(this,re,na).call(this)){const j=de(this,E)[x],z=nt(this,re,kt).call(this,j)?j.__staleWhileFetching:j;if(z!==void 0&&ue(z,de(this,w)[x],this))return this.get(de(this,w)[x],L)}}forEach(ue,L=this){for(const x of nt(this,re,na).call(this)){const j=de(this,E)[x],z=nt(this,re,kt).call(this,j)?j.__staleWhileFetching:j;z!==void 0&&ue.call(L,z,de(this,w)[x],this)}}rforEach(ue,L=this){for(const x of nt(this,re,ia).call(this)){const j=de(this,E)[x],z=nt(this,re,kt).call(this,j)?j.__staleWhileFetching:j;z!==void 0&&ue.call(L,z,de(this,w)[x],this)}}purgeStale(){let ue=!1;for(const L of nt(this,re,ia).call(this,{allowStale:!0}))de(this,be).call(this,L)&&(nt(this,re,aa).call(this,de(this,w)[L],"expire"),ue=!0);return ue}info(ue){const L=de(this,O).get(ue);if(L===void 0)return;const x=de(this,E)[L],j=nt(this,re,kt).call(this,x)?x.__staleWhileFetching:x;if(j===void 0)return;const z={value:j};if(de(this,G)&&de(this,ce)){const W=de(this,G)[L],le=de(this,ce)[L];if(W&&le){const ae=W-(u.now()-le);z.ttl=ae,z.start=Date.now()}}return de(this,ee)&&(z.size=de(this,ee)[L]),z}dump(){const ue=[];for(const L of nt(this,re,na).call(this,{allowStale:!0})){const x=de(this,w)[L],j=de(this,E)[L],z=nt(this,re,kt).call(this,j)?j.__staleWhileFetching:j;if(z===void 0||x===void 0)continue;const W={value:z};if(de(this,G)&&de(this,ce)){W.ttl=de(this,G)[L];const le=u.now()-de(this,ce)[L];W.start=Math.floor(Date.now()-le)}de(this,ee)&&(W.size=de(this,ee)[L]),ue.unshift([x,W])}return ue}load(ue){this.clear();for(const[L,x]of ue){if(x.start){const j=Date.now()-x.start;x.start=u.now()-j}this.set(L,x.value,x)}}set(ue,L,x={}){var Ze,J,we,Ee,$e;if(L===void 0)return this.delete(ue),this;const{ttl:j=this.ttl,start:z,noDisposeOnSet:W=this.noDisposeOnSet,sizeCalculation:le=this.sizeCalculation,status:ae}=x;let{noUpdateTTL:De=this.noUpdateTTL}=x;const Ve=de(this,A).call(this,ue,L,x.size||0,le);if(this.maxEntrySize&&Ve>this.maxEntrySize)return ae&&(ae.set="miss",ae.maxEntrySizeExceeded=!0),nt(this,re,aa).call(this,ue,"set"),this;let Be=de(this,F)===0?void 0:de(this,O).get(ue);if(Be===void 0)Be=de(this,F)===0?de(this,C):de(this,$).length!==0?de(this,$).pop():de(this,F)===de(this,b)?nt(this,re,Lw).call(this,!1):de(this,F),de(this,w)[Be]=ue,de(this,E)[Be]=L,de(this,O).set(ue,Be),de(this,R)[de(this,C)]=Be,de(this,D)[Be]=de(this,C),dt(this,C,Be),jw(this,F)._++,de(this,N).call(this,Be,Ve,ae),ae&&(ae.set="add"),De=!1;else{nt(this,re,OT).call(this,Be);const Pe=de(this,E)[Be];if(L!==Pe){if(de(this,me)&&nt(this,re,kt).call(this,Pe)){Pe.__abortController.abort(new Error("replaced"));const{__staleWhileFetching:et}=Pe;et!==void 0&&!W&&(de(this,fe)&&((Ze=de(this,g))==null||Ze.call(this,et,ue,"set")),de(this,ye)&&((J=de(this,Z))==null||J.push([et,ue,"set"])))}else W||(de(this,fe)&&((we=de(this,g))==null||we.call(this,Pe,ue,"set")),de(this,ye)&&((Ee=de(this,Z))==null||Ee.push([Pe,ue,"set"])));if(de(this,P).call(this,Be),de(this,N).call(this,Be,Ve,ae),de(this,E)[Be]=L,ae){ae.set="replace";const et=Pe&&nt(this,re,kt).call(this,Pe)?Pe.__staleWhileFetching:Pe;et!==void 0&&(ae.oldValue=et)}}else ae&&(ae.set="update")}if(j!==0&&!de(this,G)&&nt(this,re,wx).call(this),de(this,G)&&(De||de(this,he).call(this,Be,j,z),ae&&de(this,Ie).call(this,ae,Be)),!W&&de(this,ye)&&de(this,Z)){const Pe=de(this,Z);let et;for(;et=Pe==null?void 0:Pe.shift();)($e=de(this,T))==null||$e.call(this,...et)}return this}pop(){var ue;try{for(;de(this,F);){const L=de(this,E)[de(this,B)];if(nt(this,re,Lw).call(this,!0),nt(this,re,kt).call(this,L)){if(L.__staleWhileFetching)return L.__staleWhileFetching}else if(L!==void 0)return L}}finally{if(de(this,ye)&&de(this,Z)){const L=de(this,Z);let x;for(;x=L==null?void 0:L.shift();)(ue=de(this,T))==null||ue.call(this,...x)}}}has(ue,L={}){const{updateAgeOnHas:x=this.updateAgeOnHas,status:j}=L,z=de(this,O).get(ue);if(z!==void 0){const W=de(this,E)[z];if(nt(this,re,kt).call(this,W)&&W.__staleWhileFetching===void 0)return!1;if(de(this,be).call(this,z))j&&(j.has="stale",de(this,Ie).call(this,j,z));else return x&&de(this,Re).call(this,z),j&&(j.has="hit",de(this,Ie).call(this,j,z)),!0}else j&&(j.has="miss");return!1}peek(ue,L={}){const{allowStale:x=this.allowStale}=L,j=de(this,O).get(ue);if(j===void 0||!x&&de(this,be).call(this,j))return;const z=de(this,E)[j];return nt(this,re,kt).call(this,z)?z.__staleWhileFetching:z}async fetch(ue,L={}){const{allowStale:x=this.allowStale,updateAgeOnGet:j=this.updateAgeOnGet,noDeleteOnStaleGet:z=this.noDeleteOnStaleGet,ttl:W=this.ttl,noDisposeOnSet:le=this.noDisposeOnSet,size:ae=0,sizeCalculation:De=this.sizeCalculation,noUpdateTTL:Ve=this.noUpdateTTL,noDeleteOnFetchRejection:Be=this.noDeleteOnFetchRejection,allowStaleOnFetchRejection:Ze=this.allowStaleOnFetchRejection,ignoreFetchAbort:J=this.ignoreFetchAbort,allowStaleOnFetchAbort:we=this.allowStaleOnFetchAbort,context:Ee,forceRefresh:$e=!1,status:Pe,signal:et}=L;if(!de(this,me))return Pe&&(Pe.fetch="get"),this.get(ue,{allowStale:x,updateAgeOnGet:j,noDeleteOnStaleGet:z,status:Pe});const rt={allowStale:x,updateAgeOnGet:j,noDeleteOnStaleGet:z,ttl:W,noDisposeOnSet:le,size:ae,sizeCalculation:De,noUpdateTTL:Ve,noDeleteOnFetchRejection:Be,allowStaleOnFetchRejection:Ze,allowStaleOnFetchAbort:we,ignoreFetchAbort:J,status:Pe,signal:et};let ke=de(this,O).get(ue);if(ke===void 0){Pe&&(Pe.fetch="miss");const ft=nt(this,re,Mw).call(this,ue,ke,rt,Ee);return ft.__returned=ft}else{const ft=de(this,E)[ke];if(nt(this,re,kt).call(this,ft)){const Qe=x&&ft.__staleWhileFetching!==void 0;return Pe&&(Pe.fetch="inflight",Qe&&(Pe.returnedStale=!0)),Qe?ft.__staleWhileFetching:ft.__returned=ft}const te=de(this,be).call(this,ke);if(!$e&&!te)return Pe&&(Pe.fetch="hit"),nt(this,re,OT).call(this,ke),j&&de(this,Re).call(this,ke),Pe&&de(this,Ie).call(this,Pe,ke),ft;const ne=nt(this,re,Mw).call(this,ue,ke,rt,Ee),Ce=ne.__staleWhileFetching!==void 0&&x;return Pe&&(Pe.fetch=te?"stale":"refresh",Ce&&te&&(Pe.returnedStale=!0)),Ce?ne.__staleWhileFetching:ne.__returned=ne}}async forceFetch(ue,L={}){const x=await this.fetch(ue,L);if(x===void 0)throw new Error("fetch() returned undefined");return x}memo(ue,L={}){const x=de(this,S);if(!x)throw new Error("no memoMethod provided to constructor");const{context:j,forceRefresh:z,...W}=L,le=this.get(ue,W);if(!z&&le!==void 0)return le;const ae=x(ue,le,{options:W,context:j});return this.set(ue,ae,W),ae}get(ue,L={}){const{allowStale:x=this.allowStale,updateAgeOnGet:j=this.updateAgeOnGet,noDeleteOnStaleGet:z=this.noDeleteOnStaleGet,status:W}=L,le=de(this,O).get(ue);if(le!==void 0){const ae=de(this,E)[le],De=nt(this,re,kt).call(this,ae);return W&&de(this,Ie).call(this,W,le),de(this,be).call(this,le)?(W&&(W.get="stale"),De?(W&&x&&ae.__staleWhileFetching!==void 0&&(W.returnedStale=!0),x?ae.__staleWhileFetching:void 0):(z||nt(this,re,aa).call(this,ue,"expire"),W&&x&&(W.returnedStale=!0),x?ae:void 0)):(W&&(W.get="hit"),De?ae.__staleWhileFetching:(nt(this,re,OT).call(this,le),j&&de(this,Re).call(this,le),ae))}else W&&(W.get="miss")}delete(ue){return nt(this,re,aa).call(this,ue,"delete")}clear(){return nt(this,re,Ax).call(this,"delete")}};b=new WeakMap,m=new WeakMap,g=new WeakMap,T=new WeakMap,v=new WeakMap,S=new WeakMap,F=new WeakMap,M=new WeakMap,O=new WeakMap,w=new WeakMap,E=new WeakMap,R=new WeakMap,D=new WeakMap,B=new WeakMap,C=new WeakMap,$=new WeakMap,Z=new WeakMap,ee=new WeakMap,ce=new WeakMap,G=new WeakMap,fe=new WeakMap,me=new WeakMap,ye=new WeakMap,re=new WeakSet,wx=function(){const ue=new s(de(this,b)),L=new s(de(this,b));dt(this,G,ue),dt(this,ce,L),dt(this,he,(z,W,le=u.now())=>{if(L[z]=W!==0?le:0,ue[z]=W,W!==0&&this.ttlAutopurge){const ae=setTimeout(()=>{de(this,be).call(this,z)&&nt(this,re,aa).call(this,de(this,w)[z],"expire")},W+1);ae.unref&&ae.unref()}}),dt(this,Re,z=>{L[z]=ue[z]!==0?u.now():0}),dt(this,Ie,(z,W)=>{if(ue[W]){const le=ue[W],ae=L[W];if(!le||!ae)return;z.ttl=le,z.start=ae,z.now=x||j();const De=z.now-ae;z.remainingTTL=le-De}});let x=0;const j=()=>{const z=u.now();if(this.ttlResolution>0){x=z;const W=setTimeout(()=>x=0,this.ttlResolution);W.unref&&W.unref()}return z};this.getRemainingTTL=z=>{const W=de(this,O).get(z);if(W===void 0)return 0;const le=ue[W],ae=L[W];if(!le||!ae)return 1/0;const De=(x||j())-ae;return le-De},dt(this,be,z=>{const W=L[z],le=ue[z];return!!le&&!!W&&(x||j())-W>le})},Re=new WeakMap,Ie=new WeakMap,he=new WeakMap,be=new WeakMap,ZX=function(){const ue=new s(de(this,b));dt(this,M,0),dt(this,ee,ue),dt(this,P,L=>{dt(this,M,de(this,M)-ue[L]),ue[L]=0}),dt(this,A,(L,x,j,z)=>{if(nt(this,re,kt).call(this,x))return 0;if(!a(j))if(z){if(typeof z!="function")throw new TypeError("sizeCalculation must be a function");if(j=z(x,L),!a(j))throw new TypeError("sizeCalculation return invalid (expect positive integer)")}else throw new TypeError("invalid size value (must be positive integer). When maxSize or maxEntrySize is used, sizeCalculation or size must be set.");return j}),dt(this,N,(L,x,j)=>{if(ue[L]=x,de(this,m)){const z=de(this,m)-ue[L];for(;de(this,M)>z;)nt(this,re,Lw).call(this,!0)}dt(this,M,de(this,M)+ue[L]),j&&(j.entrySize=x,j.totalCalculatedSize=de(this,M))})},P=new WeakMap,N=new WeakMap,A=new WeakMap,na=function*({allowStale:ue=this.allowStale}={}){if(de(this,F))for(let L=de(this,C);!(!nt(this,re,Sx).call(this,L)||((ue||!de(this,be).call(this,L))&&(yield L),L===de(this,B)));)L=de(this,D)[L]},ia=function*({allowStale:ue=this.allowStale}={}){if(de(this,F))for(let L=de(this,B);!(!nt(this,re,Sx).call(this,L)||((ue||!de(this,be).call(this,L))&&(yield L),L===de(this,C)));)L=de(this,R)[L]},Sx=function(ue){return ue!==void 0&&de(this,O).get(de(this,w)[ue])===ue},Lw=function(ue){var z,W;const L=de(this,B),x=de(this,w)[L],j=de(this,E)[L];return de(this,me)&&nt(this,re,kt).call(this,j)?j.__abortController.abort(new Error("evicted")):(de(this,fe)||de(this,ye))&&(de(this,fe)&&((z=de(this,g))==null||z.call(this,j,x,"evict")),de(this,ye)&&((W=de(this,Z))==null||W.push([j,x,"evict"]))),de(this,P).call(this,L),ue&&(de(this,w)[L]=void 0,de(this,E)[L]=void 0,de(this,$).push(L)),de(this,F)===1?(dt(this,B,dt(this,C,0)),de(this,$).length=0):dt(this,B,de(this,R)[L]),de(this,O).delete(x),jw(this,F)._--,L},Mw=function(ue,L,x,j){const z=L===void 0?void 0:de(this,E)[L];if(nt(this,re,kt).call(this,z))return z;const W=new t,{signal:le}=x;le==null||le.addEventListener("abort",()=>W.abort(le.reason),{signal:W.signal});const ae={signal:W.signal,options:x,context:j},De=(Ee,$e=!1)=>{const{aborted:Pe}=W.signal,et=x.ignoreFetchAbort&&Ee!==void 0;if(x.status&&(Pe&&!$e?(x.status.fetchAborted=!0,x.status.fetchError=W.signal.reason,et&&(x.status.fetchAbortIgnored=!0)):x.status.fetchResolved=!0),Pe&&!et&&!$e)return Be(W.signal.reason);const rt=J;return de(this,E)[L]===J&&(Ee===void 0?rt.__staleWhileFetching?de(this,E)[L]=rt.__staleWhileFetching:nt(this,re,aa).call(this,ue,"fetch"):(x.status&&(x.status.fetchUpdated=!0),this.set(ue,Ee,ae.options))),Ee},Ve=Ee=>(x.status&&(x.status.fetchRejected=!0,x.status.fetchError=Ee),Be(Ee)),Be=Ee=>{const{aborted:$e}=W.signal,Pe=$e&&x.allowStaleOnFetchAbort,et=Pe||x.allowStaleOnFetchRejection,rt=et||x.noDeleteOnFetchRejection,ke=J;if(de(this,E)[L]===J&&(!rt||ke.__staleWhileFetching===void 0?nt(this,re,aa).call(this,ue,"fetch"):Pe||(de(this,E)[L]=ke.__staleWhileFetching)),et)return x.status&&ke.__staleWhileFetching!==void 0&&(x.status.returnedStale=!0),ke.__staleWhileFetching;if(ke.__returned===ke)throw Ee},Ze=(Ee,$e)=>{var et;const Pe=(et=de(this,v))==null?void 0:et.call(this,ue,z,ae);Pe&&Pe instanceof Promise&&Pe.then(rt=>Ee(rt===void 0?void 0:rt),$e),W.signal.addEventListener("abort",()=>{(!x.ignoreFetchAbort||x.allowStaleOnFetchAbort)&&(Ee(void 0),x.allowStaleOnFetchAbort&&(Ee=rt=>De(rt,!0)))})};x.status&&(x.status.fetchDispatched=!0);const J=new Promise(Ze).then(De,Ve),we=Object.assign(J,{__abortController:W,__staleWhileFetching:z,__returned:void 0});return L===void 0?(this.set(ue,we,{...ae.options,status:void 0}),L=de(this,O).get(ue)):de(this,E)[L]=we,we},kt=function(ue){if(!de(this,me))return!1;const L=ue;return!!L&&L instanceof Promise&&L.hasOwnProperty("__staleWhileFetching")&&L.__abortController instanceof t},Ox=function(ue,L){de(this,D)[L]=ue,de(this,R)[ue]=L},OT=function(ue){ue!==de(this,C)&&(ue===de(this,B)?dt(this,B,de(this,R)[ue]):nt(this,re,Ox).call(this,de(this,D)[ue],de(this,R)[ue]),nt(this,re,Ox).call(this,de(this,C),ue),dt(this,C,ue))},aa=function(ue,L){var j,z,W,le;let x=!1;if(de(this,F)!==0){const ae=de(this,O).get(ue);if(ae!==void 0)if(x=!0,de(this,F)===1)nt(this,re,Ax).call(this,L);else{de(this,P).call(this,ae);const De=de(this,E)[ae];if(nt(this,re,kt).call(this,De)?De.__abortController.abort(new Error("deleted")):(de(this,fe)||de(this,ye))&&(de(this,fe)&&((j=de(this,g))==null||j.call(this,De,ue,L)),de(this,ye)&&((z=de(this,Z))==null||z.push([De,ue,L]))),de(this,O).delete(ue),de(this,w)[ae]=void 0,de(this,E)[ae]=void 0,ae===de(this,C))dt(this,C,de(this,D)[ae]);else if(ae===de(this,B))dt(this,B,de(this,R)[ae]);else{const Ve=de(this,D)[ae];de(this,R)[Ve]=de(this,R)[ae];const Be=de(this,R)[ae];de(this,D)[Be]=de(this,D)[ae]}jw(this,F)._--,de(this,$).push(ae)}}if(de(this,ye)&&((W=de(this,Z))!=null&&W.length)){const ae=de(this,Z);let De;for(;De=ae==null?void 0:ae.shift();)(le=de(this,T))==null||le.call(this,...De)}return x},Ax=function(ue){var L,x,j;for(const z of nt(this,re,ia).call(this,{allowStale:!0})){const W=de(this,E)[z];if(nt(this,re,kt).call(this,W))W.__abortController.abort(new Error("deleted"));else{const le=de(this,w)[z];de(this,fe)&&((L=de(this,g))==null||L.call(this,W,le,ue)),de(this,ye)&&((x=de(this,Z))==null||x.push([W,le,ue]))}}if(de(this,O).clear(),de(this,E).fill(void 0),de(this,w).fill(void 0),de(this,G)&&de(this,ce)&&(de(this,G).fill(0),de(this,ce).fill(0)),de(this,ee)&&de(this,ee).fill(0),dt(this,B,0),dt(this,C,0),de(this,$).length=0,dt(this,M,0),dt(this,F,0),de(this,ye)&&de(this,Z)){const z=de(this,Z);let W;for(;W=z==null?void 0:z.shift();)(j=de(this,T))==null||j.call(this,...W)}};let l=Me;return ep.LRUCache=l,ep}var fI;function _k(){if(fI)return Zh;fI=1,Object.defineProperty(Zh,"__esModule",{value:!0}),Zh.prepareEvaluatorActionContext=void 0;const u=qe(),n=ff(),o=Yh();function i(t){let e=t;if(e.has(u.KeysInitQuery.extensionFunctionCreator)&&e.has(u.KeysInitQuery.extensionFunctions))throw new Error("Illegal simultaneous usage of extensionFunctionCreator and extensionFunctions in context");if(e.has(u.KeysInitQuery.extensionFunctionCreator))e=e.set(u.KeysExpressionEvaluator.extensionFunctionCreator,e.get(u.KeysInitQuery.extensionFunctionCreator));else if(e.has(u.KeysInitQuery.extensionFunctions)){const r=e.getSafe(u.KeysInitQuery.extensionFunctions);e=e.set(u.KeysExpressionEvaluator.extensionFunctionCreator,async a=>r[a.value])}else e=e.setDefault(u.KeysExpressionEvaluator.extensionFunctionCreator,async()=>{});return e=e.setDefault(u.KeysExpressionEvaluator.defaultTimeZone,(0,o.extractTimeZone)(e.getSafe(u.KeysInitQuery.queryTimestamp))),e=e.setDefault(u.KeysExpressionEvaluator.superTypeProvider,{cache:new n.LRUCache({max:1e3}),discoverer:()=>"term"}),e}return Zh.prepareEvaluatorActionContext=i,Zh}var hI;function ge(){return hI||(hI=1,(function(u){Object.defineProperty(u,"__esModule",{value:!0}),u.LangStringLiteral=u.TimeLiteral=u.DurationLiteral=u.DateLiteral=u.DayTimeDurationLiteral=u.DateTimeLiteral=u.yearMonthDurationsToMonths=u.toUTCDate=u.toDateTimeRepresentation=u.negateDuration=u.extractRawTimeZone=u.defaultedYearMonthDurationRepresentation=u.defaultedDurationRepresentation=u.defaultedDayTimeDurationRepresentation=u.defaultedDateTimeRepresentation=u.dayTimeDurationsToSeconds=u.isSubTypeOf=u.SparqlOperator=u.TypeAlias=u.TypeURL=u.typedLiteral=u.InvalidArity=u.InvalidLexicalForm=u.ExtensionFunctionError=u.CastError=u.UnboundVariableError=u.NoAggregator=u.InError=u.CoalesceError=u.InvalidArgumentTypes=u.InvalidTimezoneCall=u.IncompatibleLanguageOperation=u.RDFEqualTypeError=u.EmptyAggregateError=u.isExpressionError=u.ExpressionError=u.Builder=u.expressionToVar=u.float=u.decimal=u.langString=u.dateTime=u.integer=u.double=u.string=u.bool=u.declare=u.prepareEvaluatorActionContext=u.OverloadTree=u.TermTransformer=void 0,u.trimToDayTimeDuration=u.trimToYearMonthDuration=u.parseDate=u.parseXSDFloat=u.parseXSDDecimal=u.parseYearMonthDuration=u.parseTime=u.parseDuration=u.parseDayTimeDuration=u.parseDateTime=u.elapsedDuration=u.addDurationToDateTime=u.isNonLexicalLiteral=u.StringLiteral=u.NonLexicalLiteral=u.FloatLiteral=u.IntegerLiteral=u.Literal=u.Existence=u.Aggregate=u.DoubleLiteral=u.DefaultGraph=u.DecimalLiteral=u.BlankNode=u.BooleanLiteral=u.NumericLiteral=u.Variable=u.NamedNode=u.Operator=u.Quad=u.YearMonthDurationLiteral=u.Term=void 0;var n=bk();Object.defineProperty(u,"TermTransformer",{enumerable:!0,get:function(){return n.TermTransformer}});var o=W6();Object.defineProperty(u,"OverloadTree",{enumerable:!0,get:function(){return o.OverloadTree}});var i=_k();Object.defineProperty(u,"prepareEvaluatorActionContext",{enumerable:!0,get:function(){return i.prepareEvaluatorActionContext}});var t=Z6();Object.defineProperty(u,"declare",{enumerable:!0,get:function(){return t.declare}}),Object.defineProperty(u,"bool",{enumerable:!0,get:function(){return t.bool}}),Object.defineProperty(u,"string",{enumerable:!0,get:function(){return t.string}}),Object.defineProperty(u,"double",{enumerable:!0,get:function(){return t.double}}),Object.defineProperty(u,"integer",{enumerable:!0,get:function(){return t.integer}}),Object.defineProperty(u,"dateTime",{enumerable:!0,get:function(){return t.dateTime}}),Object.defineProperty(u,"langString",{enumerable:!0,get:function(){return t.langString}}),Object.defineProperty(u,"decimal",{enumerable:!0,get:function(){return t.decimal}}),Object.defineProperty(u,"float",{enumerable:!0,get:function(){return t.float}}),Object.defineProperty(u,"expressionToVar",{enumerable:!0,get:function(){return t.expressionToVar}}),Object.defineProperty(u,"Builder",{enumerable:!0,get:function(){return t.Builder}});var e=df();Object.defineProperty(u,"ExpressionError",{enumerable:!0,get:function(){return e.ExpressionError}}),Object.defineProperty(u,"isExpressionError",{enumerable:!0,get:function(){return e.isExpressionError}}),Object.defineProperty(u,"EmptyAggregateError",{enumerable:!0,get:function(){return e.EmptyAggregateError}}),Object.defineProperty(u,"RDFEqualTypeError",{enumerable:!0,get:function(){return e.RDFEqualTypeError}}),Object.defineProperty(u,"IncompatibleLanguageOperation",{enumerable:!0,get:function(){return e.IncompatibleLanguageOperation}}),Object.defineProperty(u,"InvalidTimezoneCall",{enumerable:!0,get:function(){return e.InvalidTimezoneCall}}),Object.defineProperty(u,"InvalidArgumentTypes",{enumerable:!0,get:function(){return e.InvalidArgumentTypes}}),Object.defineProperty(u,"CoalesceError",{enumerable:!0,get:function(){return e.CoalesceError}}),Object.defineProperty(u,"InError",{enumerable:!0,get:function(){return e.InError}}),Object.defineProperty(u,"NoAggregator",{enumerable:!0,get:function(){return e.NoAggregator}}),Object.defineProperty(u,"UnboundVariableError",{enumerable:!0,get:function(){return e.UnboundVariableError}}),Object.defineProperty(u,"CastError",{enumerable:!0,get:function(){return e.CastError}}),Object.defineProperty(u,"ExtensionFunctionError",{enumerable:!0,get:function(){return e.ExtensionFunctionError}}),Object.defineProperty(u,"InvalidLexicalForm",{enumerable:!0,get:function(){return e.InvalidLexicalForm}}),Object.defineProperty(u,"InvalidArity",{enumerable:!0,get:function(){return e.InvalidArity}});var r=Fa();Object.defineProperty(u,"typedLiteral",{enumerable:!0,get:function(){return r.typedLiteral}}),Object.defineProperty(u,"TypeURL",{enumerable:!0,get:function(){return r.TypeURL}}),Object.defineProperty(u,"TypeAlias",{enumerable:!0,get:function(){return r.TypeAlias}}),Object.defineProperty(u,"SparqlOperator",{enumerable:!0,get:function(){return r.SparqlOperator}});var a=t3();Object.defineProperty(u,"isSubTypeOf",{enumerable:!0,get:function(){return a.isSubTypeOf}});var c=Yh();Object.defineProperty(u,"dayTimeDurationsToSeconds",{enumerable:!0,get:function(){return c.dayTimeDurationsToSeconds}}),Object.defineProperty(u,"defaultedDateTimeRepresentation",{enumerable:!0,get:function(){return c.defaultedDateTimeRepresentation}}),Object.defineProperty(u,"defaultedDayTimeDurationRepresentation",{enumerable:!0,get:function(){return c.defaultedDayTimeDurationRepresentation}}),Object.defineProperty(u,"defaultedDurationRepresentation",{enumerable:!0,get:function(){return c.defaultedDurationRepresentation}}),Object.defineProperty(u,"defaultedYearMonthDurationRepresentation",{enumerable:!0,get:function(){return c.defaultedYearMonthDurationRepresentation}}),Object.defineProperty(u,"extractRawTimeZone",{enumerable:!0,get:function(){return c.extractRawTimeZone}}),Object.defineProperty(u,"negateDuration",{enumerable:!0,get:function(){return c.negateDuration}}),Object.defineProperty(u,"toDateTimeRepresentation",{enumerable:!0,get:function(){return c.toDateTimeRepresentation}}),Object.defineProperty(u,"toUTCDate",{enumerable:!0,get:function(){return c.toUTCDate}}),Object.defineProperty(u,"yearMonthDurationsToMonths",{enumerable:!0,get:function(){return c.yearMonthDurationsToMonths}});var s=lf();Object.defineProperty(u,"DateTimeLiteral",{enumerable:!0,get:function(){return s.DateTimeLiteral}}),Object.defineProperty(u,"DayTimeDurationLiteral",{enumerable:!0,get:function(){return s.DayTimeDurationLiteral}}),Object.defineProperty(u,"DateLiteral",{enumerable:!0,get:function(){return s.DateLiteral}}),Object.defineProperty(u,"DurationLiteral",{enumerable:!0,get:function(){return s.DurationLiteral}}),Object.defineProperty(u,"TimeLiteral",{enumerable:!0,get:function(){return s.TimeLiteral}}),Object.defineProperty(u,"LangStringLiteral",{enumerable:!0,get:function(){return s.LangStringLiteral}}),Object.defineProperty(u,"Term",{enumerable:!0,get:function(){return s.Term}}),Object.defineProperty(u,"YearMonthDurationLiteral",{enumerable:!0,get:function(){return s.YearMonthDurationLiteral}}),Object.defineProperty(u,"Quad",{enumerable:!0,get:function(){return s.Quad}}),Object.defineProperty(u,"Operator",{enumerable:!0,get:function(){return s.Operator}}),Object.defineProperty(u,"NamedNode",{enumerable:!0,get:function(){return s.NamedNode}}),Object.defineProperty(u,"Variable",{enumerable:!0,get:function(){return s.Variable}}),Object.defineProperty(u,"NumericLiteral",{enumerable:!0,get:function(){return s.NumericLiteral}}),Object.defineProperty(u,"BooleanLiteral",{enumerable:!0,get:function(){return s.BooleanLiteral}}),Object.defineProperty(u,"BlankNode",{enumerable:!0,get:function(){return s.BlankNode}}),Object.defineProperty(u,"DecimalLiteral",{enumerable:!0,get:function(){return s.DecimalLiteral}}),Object.defineProperty(u,"DefaultGraph",{enumerable:!0,get:function(){return s.DefaultGraph}}),Object.defineProperty(u,"DoubleLiteral",{enumerable:!0,get:function(){return s.DoubleLiteral}}),Object.defineProperty(u,"Aggregate",{enumerable:!0,get:function(){return s.Aggregate}}),Object.defineProperty(u,"Existence",{enumerable:!0,get:function(){return s.Existence}}),Object.defineProperty(u,"Literal",{enumerable:!0,get:function(){return s.Literal}}),Object.defineProperty(u,"IntegerLiteral",{enumerable:!0,get:function(){return s.IntegerLiteral}}),Object.defineProperty(u,"FloatLiteral",{enumerable:!0,get:function(){return s.FloatLiteral}}),Object.defineProperty(u,"NonLexicalLiteral",{enumerable:!0,get:function(){return s.NonLexicalLiteral}}),Object.defineProperty(u,"StringLiteral",{enumerable:!0,get:function(){return s.StringLiteral}}),Object.defineProperty(u,"isNonLexicalLiteral",{enumerable:!0,get:function(){return s.isNonLexicalLiteral}});var d=sI();Object.defineProperty(u,"addDurationToDateTime",{enumerable:!0,get:function(){return d.addDurationToDateTime}}),Object.defineProperty(u,"elapsedDuration",{enumerable:!0,get:function(){return d.elapsedDuration}});var l=SO();Object.defineProperty(u,"parseDateTime",{enumerable:!0,get:function(){return l.parseDateTime}}),Object.defineProperty(u,"parseDayTimeDuration",{enumerable:!0,get:function(){return l.parseDayTimeDuration}}),Object.defineProperty(u,"parseDuration",{enumerable:!0,get:function(){return l.parseDuration}}),Object.defineProperty(u,"parseTime",{enumerable:!0,get:function(){return l.parseTime}}),Object.defineProperty(u,"parseYearMonthDuration",{enumerable:!0,get:function(){return l.parseYearMonthDuration}}),Object.defineProperty(u,"parseXSDDecimal",{enumerable:!0,get:function(){return l.parseXSDDecimal}}),Object.defineProperty(u,"parseXSDFloat",{enumerable:!0,get:function(){return l.parseXSDFloat}}),Object.defineProperty(u,"parseDate",{enumerable:!0,get:function(){return l.parseDate}});var f=Yh();Object.defineProperty(u,"trimToYearMonthDuration",{enumerable:!0,get:function(){return f.trimToYearMonthDuration}}),Object.defineProperty(u,"trimToDayTimeDuration",{enumerable:!0,get:function(){return f.trimToDayTimeDuration}})})(rO)),rO}var pI;function yI(){if(pI)return Sa;pI=1,Object.defineProperty(Sa,"__esModule",{value:!0}),Sa.TermFunctionBase=Sa.ExpressionFunctionBase=void 0;const u=qe(),n=ge();class o{constructor({arity:e,operator:r,apply:a}){this.arity=e,this.operator=r,this.apply=a}checkArity(e){return Array.isArray(this.arity)?this.arity.includes(e.length):this.arity===Number.POSITIVE_INFINITY?!0:e.length===this.arity}}Sa.ExpressionFunctionBase=o;class i extends o{constructor({arity:e,operator:r,overloads:a}){super({arity:e,operator:r,apply:async({args:c,exprEval:s,mapping:d})=>this.applyOnTerms(await Promise.all(c.map(l=>s.evaluatorExpressionEvaluation(l,d))),s)}),this.supportsTermExpressions=!0,this.overloads=a}applyOnTerms(e,r){return(this.overloads.search(e,r.context.getSafe(u.KeysExpressionEvaluator.superTypeProvider),r.context.getSafe(u.KeysInitQuery.functionArgumentsCache))??this.handleInvalidTypes(e))(r)(e)}handleInvalidTypes(e){throw new n.InvalidArgumentTypes(e,this.operator)}}return Sa.TermFunctionBase=i,Sa}var bI;function Te(){return bI||(bI=1,(function(u){var n=Ta&&Ta.__createBinding||(Object.create?(function(i,t,e,r){r===void 0&&(r=e);var a=Object.getOwnPropertyDescriptor(t,e);(!a||("get"in a?!t.__esModule:a.writable||a.configurable))&&(a={enumerable:!0,get:function(){return t[e]}}),Object.defineProperty(i,r,a)}):(function(i,t,e,r){r===void 0&&(r=e),i[r]=t[e]})),o=Ta&&Ta.__exportStar||function(i,t){for(var e in i)e!=="default"&&!Object.prototype.hasOwnProperty.call(t,e)&&n(t,i,e)};Object.defineProperty(u,"__esModule",{value:!0}),o(zF(),u),o(HK(),u),o(GK(),u),o(yI(),u)})(Ta)),Ta}var Ia={},tp={},_I;function gI(){if(_I)return tp;_I=1,Object.defineProperty(tp,"__esModule",{value:!0}),tp.ActorQueryOperation=void 0;const u=pe();let n=class extends u.Actor{constructor(i){super(i)}};return tp.ActorQueryOperation=n,tp}var rp={},Pa={},np={},mI;function gk(){if(mI)return np;mI=1,Object.defineProperty(np,"__esModule",{value:!0}),np.MetadataValidationState=void 0;let u=class{constructor(){this.invalidateListeners=[],this.valid=!0}addInvalidateListener(o){this.invalidateListeners.push(o)}invalidate(){if(this.valid){this.valid=!1;for(const o of this.invalidateListeners)o()}}};return np.MetadataValidationState=u,np}var rn={},vI;function mk(){if(vI)return rn;vI=1,Object.defineProperty(rn,"__esModule",{value:!0}),rn.cachifyMetadata=rn.validateMetadataBindings=rn.validateMetadataQuads=rn.getMetadataBindings=rn.getMetadataQuads=void 0;function u(e){return t(()=>new Promise((r,a)=>{e.getProperty("metadata",c=>r(c)),e.on("error",a)}).then(r=>o(r)))}rn.getMetadataQuads=u;function n(e){return t(()=>new Promise((r,a)=>{e.getProperty("metadata",c=>r(c)),e.on("error",a)}).then(r=>i(r)))}rn.getMetadataBindings=n;function o(e){for(const r of["cardinality"])if(!(r in e))throw new Error(`Invalid metadata: missing ${r} in ${JSON.stringify(e)}`);return e}rn.validateMetadataQuads=o;function i(e){for(const r of["cardinality","variables"])if(!(r in e))throw new Error(`Invalid metadata: missing ${r} in ${JSON.stringify(e)}`);return e}rn.validateMetadataBindings=i;function t(e){let r;return()=>(r||(r=e(),r.then(a=>a.state.addInvalidateListener(()=>{r=void 0})).catch(()=>{})),r)}return rn.cachifyMetadata=t,rn}var TI;function br(){return TI||(TI=1,(function(u){var n=Pa&&Pa.__createBinding||(Object.create?(function(i,t,e,r){r===void 0&&(r=e);var a=Object.getOwnPropertyDescriptor(t,e);(!a||("get"in a?!t.__esModule:a.writable||a.configurable))&&(a={enumerable:!0,get:function(){return t[e]}}),Object.defineProperty(i,r,a)}):(function(i,t,e,r){r===void 0&&(r=e),i[r]=t[e]})),o=Pa&&Pa.__exportStar||function(i,t){for(var e in i)e!=="default"&&!Object.prototype.hasOwnProperty.call(t,e)&&n(t,i,e)};Object.defineProperty(u,"__esModule",{value:!0}),o(gk(),u),o(mk(),u)})(Pa)),Pa}var wI;function SI(){if(wI)return rp;wI=1,Object.defineProperty(rp,"__esModule",{value:!0}),rp.ActorQueryOperationTyped=void 0;const u=qe(),n=pe(),o=br(),i=gI();let t=class extends i.ActorQueryOperation{constructor(r,a){if(super({...r,operationName:a}),!this.operationName)throw new Error('A valid "operationName" argument must be provided.')}async test(r){if(!r.operation)return(0,n.failTest)("Missing field 'operation' in a query operation action.");if(r.operation.type!==this.operationName)return(0,n.failTest)(`Actor ${this.name} only supports ${this.operationName} operations, but got ${r.operation.type}`);const a=r.operation;return this.testOperation(a,r.context)}async run(r,a){const c=r.context.get(u.KeysInitQuery.physicalQueryPlanLogger);c&&(c.logOperation(r.operation.type,void 0,r.operation,r.context.get(u.KeysInitQuery.physicalQueryPlanNode),this.name,{}),r.context=r.context.set(u.KeysInitQuery.physicalQueryPlanNode,r.operation));const s=r.operation,d=r.context.set(u.KeysQueryOperation.operation,s),l=await this.runOperation(s,d,a);return"metadata"in l&&(l.metadata=(0,o.cachifyMetadata)(l.metadata)),l}};return rp.ActorQueryOperationTyped=t,rp}var ip={},OI;function vk(){if(OI)return ip;OI=1,Object.defineProperty(ip,"__esModule",{value:!0}),ip.ActorQueryOperationTypedMediated=void 0;const u=SI();let n=class extends u.ActorQueryOperationTyped{constructor(i,t){super(i,t)}};return ip.ActorQueryOperationTypedMediated=n,ip}var ap={},AI;function Tk(){if(AI)return ap;AI=1,Object.defineProperty(ap,"__esModule",{value:!0}),ap.BusQueryOperation=void 0;const u=pe();let n=class extends u.BusIndexed{constructor(i){super({...i,actorIdentifierFields:["operationName"],actionIdentifierFields:["operation","type"]})}};return ap.BusQueryOperation=n,ap}var EI;function qt(){return EI||(EI=1,(function(u){var n=Ia&&Ia.__createBinding||(Object.create?(function(i,t,e,r){r===void 0&&(r=e);var a=Object.getOwnPropertyDescriptor(t,e);(!a||("get"in a?!t.__esModule:a.writable||a.configurable))&&(a={enumerable:!0,get:function(){return t[e]}}),Object.defineProperty(i,r,a)}):(function(i,t,e,r){r===void 0&&(r=e),i[r]=t[e]})),o=Ia&&Ia.__exportStar||function(i,t){for(var e in i)e!=="default"&&!Object.prototype.hasOwnProperty.call(t,e)&&n(t,i,e)};Object.defineProperty(u,"__esModule",{value:!0}),o(gI(),u),o(SI(),u),o(vk(),u),o(Tk(),u)})(Ia)),Ia}var Da={},up={},Na={},op={},xI;function wk(){if(xI)return op;xI=1,Object.defineProperty(op,"__esModule",{value:!0}),op.ActorContextPreprocess=void 0;const u=pe();let n=class extends u.Actor{constructor(i){super(i)}};return op.ActorContextPreprocess=n,op}var RI;function sp(){return RI||(RI=1,(function(u){var n=Na&&Na.__createBinding||(Object.create?(function(i,t,e,r){r===void 0&&(r=e);var a=Object.getOwnPropertyDescriptor(t,e);(!a||("get"in a?!t.__esModule:a.writable||a.configurable))&&(a={enumerable:!0,get:function(){return t[e]}}),Object.defineProperty(i,r,a)}):(function(i,t,e,r){r===void 0&&(r=e),i[r]=t[e]})),o=Na&&Na.__exportStar||function(i,t){for(var e in i)e!=="default"&&!Object.prototype.hasOwnProperty.call(t,e)&&n(t,i,e)};Object.defineProperty(u,"__esModule",{value:!0}),o(wk(),u)})(Na)),Na}var FI;function Sk(){if(FI)return up;FI=1,Object.defineProperty(up,"__esModule",{value:!0}),up.ActorContextPreprocessConvertShortcuts=void 0;const u=sp(),n=pe();let o=class eJ extends u.ActorContextPreprocess{constructor(t){super(t)}async test(t){return(0,n.passTestVoid)()}async run(t){return{context:eJ.expandShortcuts(t.context,this.contextKeyShortcuts)}}static expandShortcuts(t,e){for(const r of t.keys())e[r.name]&&(t=t.set(new n.ActionContextKey(e[r.name]),t.get(r)).delete(r));return t}};return up.ActorContextPreprocessConvertShortcuts=o,up}var II;function Ok(){return II||(II=1,(function(u){var n=Da&&Da.__createBinding||(Object.create?(function(i,t,e,r){r===void 0&&(r=e);var a=Object.getOwnPropertyDescriptor(t,e);(!a||("get"in a?!t.__esModule:a.writable||a.configurable))&&(a={enumerable:!0,get:function(){return t[e]}}),Object.defineProperty(i,r,a)}):(function(i,t,e,r){r===void 0&&(r=e),i[r]=t[e]})),o=Da&&Da.__exportStar||function(i,t){for(var e in i)e!=="default"&&!Object.prototype.hasOwnProperty.call(t,e)&&n(t,i,e)};Object.defineProperty(u,"__esModule",{value:!0}),o(Sk(),u)})(Da)),Da}var ja={},cp={},PI;function Ak(){if(PI)return cp;PI=1,Object.defineProperty(cp,"__esModule",{value:!0}),cp.ActorContextPreprocessSetDefaults=void 0;const u=sp(),n=qe(),o=pe(),i=hr();let t=class extends u.ActorContextPreprocess{constructor(r){super(r),this.defaultFunctionArgumentsCache={}}async test(r){return(0,o.passTestVoid)()}async run(r){let a=r.context;if(r.initialize){a=a.setDefault(n.KeysInitQuery.queryTimestamp,new Date).setDefault(n.KeysInitQuery.queryTimestampHighResolution,performance.now()).setDefault(n.KeysQuerySourceIdentify.sourceIds,new Map).setDefault(n.KeysCore.log,this.logger).setDefault(n.KeysInitQuery.functionArgumentsCache,this.defaultFunctionArgumentsCache).setDefault(n.KeysQuerySourceIdentify.hypermediaSourcesAggregatedStores,new Map).setDefault(n.KeysInitQuery.dataFactory,new i.DataFactory);let c={language:"sparql",version:"1.1"};a.has(n.KeysInitQuery.queryFormat)?(c=a.get(n.KeysInitQuery.queryFormat),c.language==="graphql"&&(a=a.setDefault(n.KeysInitQuery.graphqlSingularizeVariables,{}))):a=a.set(n.KeysInitQuery.queryFormat,c)}return{context:a}}};return cp.ActorContextPreprocessSetDefaults=t,cp}var DI;function Ek(){return DI||(DI=1,(function(u){var n=ja&&ja.__createBinding||(Object.create?(function(i,t,e,r){r===void 0&&(r=e);var a=Object.getOwnPropertyDescriptor(t,e);(!a||("get"in a?!t.__esModule:a.writable||a.configurable))&&(a={enumerable:!0,get:function(){return t[e]}}),Object.defineProperty(i,r,a)}):(function(i,t,e,r){r===void 0&&(r=e),i[r]=t[e]})),o=ja&&ja.__exportStar||function(i,t){for(var e in i)e!=="default"&&!Object.prototype.hasOwnProperty.call(t,e)&&n(t,i,e)};Object.defineProperty(u,"__esModule",{value:!0}),o(Ak(),u)})(ja)),ja}var La={},dp={},NI;function xk(){if(NI)return dp;NI=1,Object.defineProperty(dp,"__esModule",{value:!0}),dp.ActorContextPreprocessSourceToDestination=void 0;const u=sp(),n=qe(),o=pe();let i=class extends u.ActorContextPreprocess{constructor(e){super(e)}async test(e){return(0,o.passTestVoid)()}async run(e){if(e.context.get(n.KeysInitQuery.querySourcesUnidentified)&&!e.context.get(n.KeysRdfUpdateQuads.destination)){const r=e.context.get(n.KeysInitQuery.querySourcesUnidentified);if(r.length===1)return{context:e.context.set(n.KeysRdfUpdateQuads.destination,r[0])}}return e}};return dp.ActorContextPreprocessSourceToDestination=i,dp}var jI;function Rk(){return jI||(jI=1,(function(u){var n=La&&La.__createBinding||(Object.create?(function(i,t,e,r){r===void 0&&(r=e);var a=Object.getOwnPropertyDescriptor(t,e);(!a||("get"in a?!t.__esModule:a.writable||a.configurable))&&(a={enumerable:!0,get:function(){return t[e]}}),Object.defineProperty(i,r,a)}):(function(i,t,e,r){r===void 0&&(r=e),i[r]=t[e]})),o=La&&La.__exportStar||function(i,t){for(var e in i)e!=="default"&&!Object.prototype.hasOwnProperty.call(t,e)&&n(t,i,e)};Object.defineProperty(u,"__esModule",{value:!0}),o(xk(),u)})(La)),La}var Ma={},lp={},fp={},OO={},r3={exports:{}},LI;function hp(){if(LI)return r3.exports;LI=1;var u=typeof Reflect=="object"?Reflect:null,n=u&&typeof u.apply=="function"?u.apply:function(v,S,F){return Function.prototype.apply.call(v,S,F)},o;u&&typeof u.ownKeys=="function"?o=u.ownKeys:Object.getOwnPropertySymbols?o=function(v){return Object.getOwnPropertyNames(v).concat(Object.getOwnPropertySymbols(v))}:o=function(v){return Object.getOwnPropertyNames(v)};function i(T){console&&console.warn&&console.warn(T)}var t=Number.isNaN||function(v){return v!==v};function e(){e.init.call(this)}r3.exports=e,r3.exports.once=b,e.EventEmitter=e,e.prototype._events=void 0,e.prototype._eventsCount=0,e.prototype._maxListeners=void 0;var r=10;function a(T){if(typeof T!="function")throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof T)}Object.defineProperty(e,"defaultMaxListeners",{enumerable:!0,get:function(){return r},set:function(T){if(typeof T!="number"||T<0||t(T))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+T+".");r=T}}),e.init=function(){(this._events===void 0||this._events===Object.getPrototypeOf(this)._events)&&(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},e.prototype.setMaxListeners=function(v){if(typeof v!="number"||v<0||t(v))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+v+".");return this._maxListeners=v,this};function c(T){return T._maxListeners===void 0?e.defaultMaxListeners:T._maxListeners}e.prototype.getMaxListeners=function(){return c(this)},e.prototype.emit=function(v){for(var S=[],F=1;F<arguments.length;F++)S.push(arguments[F]);var M=v==="error",O=this._events;if(O!==void 0)M=M&&O.error===void 0;else if(!M)return!1;if(M){var w;if(S.length>0&&(w=S[0]),w instanceof Error)throw w;var E=new Error("Unhandled error."+(w?" ("+w.message+")":""));throw E.context=w,E}var R=O[v];if(R===void 0)return!1;if(typeof R=="function")n(R,this,S);else for(var D=R.length,B=p(R,D),F=0;F<D;++F)n(B[F],this,S);return!0};function s(T,v,S,F){var M,O,w;if(a(S),O=T._events,O===void 0?(O=T._events=Object.create(null),T._eventsCount=0):(O.newListener!==void 0&&(T.emit("newListener",v,S.listener?S.listener:S),O=T._events),w=O[v]),w===void 0)w=O[v]=S,++T._eventsCount;else if(typeof w=="function"?w=O[v]=F?[S,w]:[w,S]:F?w.unshift(S):w.push(S),M=c(T),M>0&&w.length>M&&!w.warned){w.warned=!0;var E=new Error("Possible EventEmitter memory leak detected. "+w.length+" "+String(v)+" listeners added. Use emitter.setMaxListeners() to increase limit");E.name="MaxListenersExceededWarning",E.emitter=T,E.type=v,E.count=w.length,i(E)}return T}e.prototype.addListener=function(v,S){return s(this,v,S,!1)},e.prototype.on=e.prototype.addListener,e.prototype.prependListener=function(v,S){return s(this,v,S,!0)};function d(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,arguments.length===0?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function l(T,v,S){var F={fired:!1,wrapFn:void 0,target:T,type:v,listener:S},M=d.bind(F);return M.listener=S,F.wrapFn=M,M}e.prototype.once=function(v,S){return a(S),this.on(v,l(this,v,S)),this},e.prototype.prependOnceListener=function(v,S){return a(S),this.prependListener(v,l(this,v,S)),this},e.prototype.removeListener=function(v,S){var F,M,O,w,E;if(a(S),M=this._events,M===void 0)return this;if(F=M[v],F===void 0)return this;if(F===S||F.listener===S)--this._eventsCount===0?this._events=Object.create(null):(delete M[v],M.removeListener&&this.emit("removeListener",v,F.listener||S));else if(typeof F!="function"){for(O=-1,w=F.length-1;w>=0;w--)if(F[w]===S||F[w].listener===S){E=F[w].listener,O=w;break}if(O<0)return this;O===0?F.shift():y(F,O),F.length===1&&(M[v]=F[0]),M.removeListener!==void 0&&this.emit("removeListener",v,E||S)}return this},e.prototype.off=e.prototype.removeListener,e.prototype.removeAllListeners=function(v){var S,F,M;if(F=this._events,F===void 0)return this;if(F.removeListener===void 0)return arguments.length===0?(this._events=Object.create(null),this._eventsCount=0):F[v]!==void 0&&(--this._eventsCount===0?this._events=Object.create(null):delete F[v]),this;if(arguments.length===0){var O=Object.keys(F),w;for(M=0;M<O.length;++M)w=O[M],w!=="removeListener"&&this.removeAllListeners(w);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if(S=F[v],typeof S=="function")this.removeListener(v,S);else if(S!==void 0)for(M=S.length-1;M>=0;M--)this.removeListener(v,S[M]);return this};function f(T,v,S){var F=T._events;if(F===void 0)return[];var M=F[v];return M===void 0?[]:typeof M=="function"?S?[M.listener||M]:[M]:S?_(M):p(M,M.length)}e.prototype.listeners=function(v){return f(this,v,!0)},e.prototype.rawListeners=function(v){return f(this,v,!1)},e.listenerCount=function(T,v){return typeof T.listenerCount=="function"?T.listenerCount(v):h.call(T,v)},e.prototype.listenerCount=h;function h(T){var v=this._events;if(v!==void 0){var S=v[T];if(typeof S=="function")return 1;if(S!==void 0)return S.length}return 0}e.prototype.eventNames=function(){return this._eventsCount>0?o(this._events):[]};function p(T,v){for(var S=new Array(v),F=0;F<v;++F)S[F]=T[F];return S}function y(T,v){for(;v+1<T.length;v++)T[v]=T[v+1];T.pop()}function _(T){for(var v=new Array(T.length),S=0;S<v.length;++S)v[S]=T[S].listener||T[S];return v}function b(T,v){return new Promise(function(S,F){function M(w){T.removeListener(v,O),F(w)}function O(){typeof T.removeListener=="function"&&T.removeListener("error",M),S([].slice.call(arguments))}g(T,v,O,{once:!0}),v!=="error"&&m(T,M,{once:!0})})}function m(T,v,S){typeof T.on=="function"&&g(T,"error",v,S)}function g(T,v,S,F){if(typeof T.on=="function")F.once?T.once(v,S):T.on(v,S);else if(typeof T.addEventListener=="function")T.addEventListener(v,function M(O){F.once&&T.removeEventListener(v,M),S(O)});else throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof T)}return r3.exports}var pp={},MI;function Fk(){if(MI)return pp;MI=1,Object.defineProperty(pp,"__esModule",{value:!0}),pp.LinkedList=void 0;class u{constructor(){this._length=0,this._head=null,this._tail=null}get length(){return this._length}get first(){var o;return(o=this._head)===null||o===void 0?void 0:o.value}get last(){var o;return(o=this._tail)===null||o===void 0?void 0:o.value}get empty(){return this._head===null}push(o){const i={value:o,next:null};this._tail===null?this._head=this._tail=i:this._tail.next=this._tail=i,this._length++}shift(){if(this._head===null)return;const{value:o,next:i}=this._head;return this._head=i,i===null&&(this._tail=null),this._length--,o}clear(){this._length=0,this._head=this._tail=null}}return pp.LinkedList=u,pp}var yp={},qI;function Ik(){if(qI)return yp;qI=1,Object.defineProperty(yp,"__esModule",{value:!0}),yp.createTaskScheduler=void 0;const u=Promise.resolve(void 0);function n(){const o=typeof queueMicrotask=="function"?queueMicrotask:r=>u.then(r),i=typeof setImmediate=="function"?setImmediate:r=>setTimeout(r,0);let t=0,e=null;return r=>{e!==null?e.push(r):++t<100?o(r):(e=[r],i(()=>{for(const a of e)o(a);e=null,t=0}))}}return yp.createTaskScheduler=n,yp}var CI;function pt(){return CI||(CI=1,(function(u){Object.defineProperty(u,"__esModule",{value:!0}),u.isIterator=u.isIterable=u.isSourceExpression=u.isPromise=u.isEventEmitter=u.isFunction=u.range=u.union=u.fromIterable=u.fromIterator=u.fromArray=u.single=u.empty=u.wrap=u.WrappingIterator=u.ClonedIterator=u.UnionIterator=u.MultiTransformIterator=u.SimpleTransformIterator=u.TransformIterator=u.BufferedIterator=u.MappingIterator=u.DESTINATION=u.identity=u.IntegerIterator=u.ArrayIterator=u.SingletonIterator=u.EmptyIterator=u.AsyncIterator=u.DESTROYED=u.ENDED=u.CLOSED=u.CLOSING=u.OPEN=u.INIT=u.setTaskScheduler=u.getTaskScheduler=u.scheduleTask=u.LinkedList=void 0;const n=hp(),o=Fk();Object.defineProperty(u,"LinkedList",{enumerable:!0,get:function(){return o.LinkedList}});let t=Ik().createTaskScheduler();function e(N){t(N)}u.scheduleTask=e;function r(){return t}u.getTaskScheduler=r;function a(N){t=N}u.setTaskScheduler=a,u.INIT=1,u.OPEN=2,u.CLOSING=4,u.CLOSED=8,u.ENDED=16,u.DESTROYED=32;class c extends n.EventEmitter{constructor(A=u.OPEN){super(),this._readable=!1,this._state=A,this.on("newListener",s)}_changeState(A,I=!1){const q=A>this._state&&this._state<u.ENDED;return q&&(this._state=A,A===u.ENDED&&(I?t(()=>this.emit("end")):this.emit("end"))),q}read(){return null}forEach(A,I){this.on("data",xe(A,I))}close(){this._changeState(u.CLOSED)&&this._endAsync()}destroy(A){this.done||this._destroy(A,I=>{A=A||I,A&&this.emit("error",A),this._end(!0)})}_destroy(A,I){I()}_end(A=!1){this._changeState(A?u.DESTROYED:u.ENDED)&&(this._readable=!1,this.removeAllListeners("readable"),this.removeAllListeners("data"),this.removeAllListeners("end"))}_endAsync(){t(()=>this._end())}get readable(){return this._readable}set readable(A){A=!!A&&!this.done,this._readable!==A&&(this._readable=A,A&&t(()=>this.emit("readable")))}get closed(){return this._state>=u.CLOSING}get ended(){return this._state===u.ENDED}get destroyed(){return this._state===u.DESTROYED}get done(){return this._state>=u.ENDED}toString(){const A=this._toStringDetails();return`[${this.constructor.name}${A?` ${A}`:""}]`}_toStringDetails(){return""}toArray(A){const I=[],q=typeof(A==null?void 0:A.limit)=="number"?A.limit:1/0;return this.ended||q<=0?Promise.resolve(I):new Promise((H,U)=>{const X=()=>H(I),Q=k=>{I.push(k),I.length>=q&&(this.removeListener("error",U),this.removeListener("data",Q),this.removeListener("end",X),H(I))};this.on("error",U),this.on("data",Q),this.on("end",X)})}getProperty(A,I){const q=this._properties;if(!I)return q&&q[A];if(q&&A in q)t(()=>I(q[A]));else{let H;(H=this._propertyCallbacks)||(this._propertyCallbacks=H=Object.create(null)),A in H?H[A].push(I):H[A]=[I]}}setProperty(A,I){const q=this._properties||(this._properties=Object.create(null));q[A]=I;const H=this._propertyCallbacks||{},U=H[A];if(U){delete H[A],t(()=>{for(const X of U)X(I)});for(A in H)return;delete this._propertyCallbacks}}getProperties(){const A=this._properties,I={};for(const q in A)I[q]=A[q];return I}setProperties(A){for(const I in A)this.setProperty(I,A[I])}copyProperties(A,I){for(const q of I)A.getProperty(q,H=>this.setProperty(q,H))}transform(A){return new w(this,A)}map(A,I){return new b(this,xe(A,I))}filter(A,I){return this.map(function(q){return A.call(I||this,q)?q:null})}uniq(A=_){const I=new Set;return this.filter(function(q){const H=A.call(this,q);return I.has(H)?!1:(I.add(H),!0)})}prepend(A){return this.transform({prepend:A})}append(A){return this.transform({append:A})}surround(A,I){return this.transform({prepend:A,append:I})}skip(A){return this.map(I=>A-- >0?null:I)}take(A){return this.transform({limit:A})}range(A,I){return this.transform({offset:A,limit:Math.max(I-A+1,0)})}clone(){return new B(this)}[Symbol.asyncIterator](){const A=this;let I=null,q=null,H=null;A.addListener("readable",U),A.addListener("end",U),A.addListener("error",X);function U(){if(I!==null)if(H!==null)X(H);else if(A.done)I({done:!0,value:void 0}),I=q=null,Q();else{const k=A.read();k!==null&&(I({done:!1,value:k}),I=q=null)}}function X(k){q!==null?(q(k),I=q=H=null,Q()):H===null&&(H=k)}function Q(){A.removeListener("readable",U),A.removeListener("end",U),A.removeListener("error",X)}return{next(){return new Promise((k,oe)=>{I=k,q=oe,U()})}}}}u.AsyncIterator=c;function s(N){N==="data"&&(this.removeListener("newListener",s),l(this,"readable",d),this.readable&&t(()=>d.call(this)))}function d(){let N;for(;this.listenerCount("data")!==0&&(N=this.read())!==null;)this.emit("data",N);this.listenerCount("data")===0&&!this.done&&(this.removeListener("readable",d),l(this,"newListener",s))}function l(N,A,I){N.listeners(A).includes(I)||N.on(A,I)}class f extends c{constructor(){super(),this._changeState(u.ENDED,!0)}}u.EmptyIterator=f;class h extends c{constructor(A){super(),this._item=A,A===null?this.close():this.readable=!0}read(){const A=this._item;return this._item=null,this.close(),A}_toStringDetails(){return this._item===null?"":`(${this._item})`}}u.SingletonIterator=h;class p extends c{constructor(A=[],{autoStart:I=!0,preserve:q=!0}={}){super();const H=q||!Array.isArray(A)?[...A]:A;this._index=0,this._sourceStarted=I!==!1,this._truncateThreshold=q?-1:64,this._sourceStarted&&H.length===0?this.close():this._buffer=H,this.readable=!0}read(){this._sourceStarted||(this._sourceStarted=!0);let A=null;return this._buffer&&(this._index<this._buffer.length&&(A=this._buffer[this._index++]),this._index===this._buffer.length?(delete this._buffer,this.close()):this._index===this._truncateThreshold&&(this._buffer.splice(0,this._truncateThreshold),this._index=0)),A}_toStringDetails(){return`(${this._buffer?this._buffer.length-this._index:0})`}_destroy(A,I){delete this._buffer,I()}toArray(A={}){if(!this._buffer)return Promise.resolve([]);const{length:I}=this._buffer,q=this._index,H=typeof A.limit!="number"?I:q+A.limit,U=this._buffer.slice(q,H);return this._index=H,H>=I&&this.close(),Promise.resolve(U)}}u.ArrayIterator=p;class y extends c{constructor({start:A=0,step:I=1,end:q}={}){super(),Number.isFinite(A)&&(A=Math.trunc(A)),this._next=A,Number.isFinite(I)&&(I=Math.trunc(I)),this._step=I;const H=I>=0,U=H?1/0:-1/0;Number.isFinite(q)?q=Math.trunc(q):q!==-U&&(q=U),this._last=q,!Number.isFinite(A)||(H?A>q:A<q)?this.close():this.readable=!0}read(){if(this.closed)return null;const A=this._next,I=this._step,q=this._last,H=this._next+=I;return(I>=0?H>q:H<q)&&this.close(),A}_toStringDetails(){return`(${this._next}...${this._last})`}}u.IntegerIterator=y;function _(N){return N}u.identity=_,u.DESTINATION=Symbol("destination");class b extends c{constructor(A,I=_,q={}){super(),this._map=I,this._source=m(A),this._destroySource=q.destroySource!==!1,A.done?this.close():(this._source[u.DESTINATION]=this,this._source.on("end",F),this._source.on("error",S),this._source.on("readable",v),this.readable=this._source.readable)}read(){if(!this.done){if(this._source.readable){let A,I;for(;(A=this._source.read())!==null;)if((I=this._map(A))!==null)return I}this.readable=!1,this._source.done&&this.close()}return null}_end(A){this._source.removeListener("end",F),this._source.removeListener("error",S),this._source.removeListener("readable",v),delete this._source[u.DESTINATION],this._destroySource&&this._source.destroy(),super._end(A)}}u.MappingIterator=b;function m(N,A=!1){if(!N||!Re(N.read)||!Re(N.on))throw new TypeError(`Invalid source: ${N}`);if(!A&&N[u.DESTINATION])throw new Error("The source already has a destination");return N}class g extends c{constructor({maxBufferSize:A=4,autoStart:I=!0}={}){super(u.INIT),this._buffer=new o.LinkedList,this._maxBufferSize=4,this._reading=!0,this._pushedCount=0,this.maxBufferSize=A,t(()=>this._init(I)),this._sourceStarted=I!==!1}get maxBufferSize(){return this._maxBufferSize}set maxBufferSize(A){A!==1/0&&(A=Number.isFinite(A)?Math.max(Math.trunc(A),1):4),this._maxBufferSize!==A&&(this._maxBufferSize=A,this._state===u.OPEN&&this._fillBuffer())}_init(A){let I=!1;this._reading=!0,this._begin(()=>{if(I)throw new Error("done callback called multiple times");I=!0,this._reading=!1,this._changeState(u.OPEN),A?this._fillBufferAsync():this.readable=!0})}_begin(A){A()}read(){if(this.done)return null;this._sourceStarted||(this._sourceStarted=!0);const A=this._buffer;let I;return A.empty?(I=null,this.readable=!1):I=A.shift(),!this._reading&&A.length<this._maxBufferSize&&(this.closed?A.empty&&this._endAsync():this._fillBufferAsync()),I}_read(A,I){I()}_push(A){this.done||(this._pushedCount++,this._buffer.push(A),this.readable=!0)}_fillBuffer(){let A;this._reading||(this.closed?this._completeClose():(A=Math.min(this._maxBufferSize-this._buffer.length,128))>0&&(this._pushedCount=0,this._reading=!0,this._read(A,()=>{if(!A)throw new Error("done callback called multiple times");A=0,this._reading=!1,this.closed?this._completeClose():this._pushedCount&&(this.readable=!0,this._buffer.length<this._maxBufferSize/2&&this._fillBufferAsync())})))}_fillBufferAsync(){this._reading||(this._reading=!0,t(()=>{this._reading=!1,this._fillBuffer()}))}close(){this._reading?this._changeState(u.CLOSING):this._completeClose()}_completeClose(){this._changeState(u.CLOSED)&&(this._reading=!0,this._flush(()=>{if(!this._reading)throw new Error("done callback called multiple times");this._reading=!1,this._buffer.empty&&this._endAsync()}))}_destroy(A,I){this._buffer.clear(),I()}_flush(A){A()}_toStringDetails(){const A=this._buffer;return`{${A.empty?"":`next: ${A.first}, `}buffer: ${A.length}}`}}u.BufferedIterator=g;class T extends g{constructor(A,I=A||{}){super(I),this._boundPush=q=>this._push(q),be(A)||(A=I.source),Ie(A)?this.source=A:A&&(this._createSource=he(A)?()=>A:A,this._sourceStarted&&this._loadSourceAsync()),this._optional=!!I.optional,this._destroySource=I.destroySource!==!1}get source(){return Re(this._createSource)&&this._loadSourceAsync(),this._source}set source(A){const I=this._source=this._validateSource(A);I[u.DESTINATION]=this,this.done?this._destroySource&&I.destroy():I.done?this.close():(I.on("end",M),I.on("readable",O),I.on("error",S))}_loadSourceAsync(){Re(this._createSource)&&(Promise.resolve(this._createSource()).then(A=>{delete this._createSource,this.source=A,this._fillBuffer()},A=>this.emit("error",A)),this._createSource=null)}_validateSource(A,I=!1){if(this._source||typeof this._createSource<"u")throw new Error("The source cannot be changed after it has been set");return m(A,I)}_read(A,I){const q=()=>{this._pushedCount<A&&!this.closed?t(()=>this._readAndTransform(q,I)):I()};this._readAndTransform(q,I)}_readAndTransform(A,I){let q;const H=this.source;!H||H.done||(q=H.read())===null?I():this._optional?this._optionalTransform(q,A):this._transform(q,A,this._boundPush)}_optionalTransform(A,I){const q=this._pushedCount;this._transform(A,()=>{q===this._pushedCount&&this._push(A),I()},this._boundPush)}_transform(A,I,q){q(A),I()}_closeWhenDone(){this.close()}_end(A){const I=this._source;I&&(I.removeListener("end",M),I.removeListener("error",S),I.removeListener("readable",O),delete I[u.DESTINATION],this._destroySource&&I.destroy()),super._end(A)}}u.TransformIterator=T;function v(){this[u.DESTINATION].readable=!0}function S(N){this[u.DESTINATION].emit("error",N)}function F(){this[u.DESTINATION].close()}function M(){this[u.DESTINATION]._closeWhenDone()}function O(){this[u.DESTINATION]._sourceStarted!==!1&&this[u.DESTINATION]._fillBuffer()}class w extends T{constructor(A,I){if(super(A,I),this._offset=0,this._limit=1/0,this._filter=q=>!0,I=I||(be(A)?null:A),I){const q=Re(I)?I:I.transform,{limit:H,offset:U,filter:X,map:Q,prepend:k,append:oe}=I;U===1/0||H===-1/0?this._limit=0:(Number.isFinite(U)&&(this._offset=Math.max(Math.trunc(U),0)),Number.isFinite(H)&&(this._limit=Math.max(Math.trunc(H),0)),Re(X)&&(this._filter=X),Re(Q)&&(this._map=Q),this._transform=Re(q)?q:null),k&&(this._prepender=Ie(k)?k:G(k)),oe&&(this._appender=Ie(oe)?oe:G(oe))}}_read(A,I){const q=()=>this._readAndTransformSimple(A,H,I);this._readAndTransformSimple(A,H,I);function H(){t(q)}}_readAndTransformSimple(A,I,q){let H;const{source:U}=this;if(!U||U.done){q();return}for(this._limit===0&&this.close();!this.closed&&this._pushedCount<A&&(H=U.read())!==null;){if(!this._filter(H)||this._offset!==0&&this._offset--)continue;const X=typeof this._map>"u"?H:this._map(H);if(X===null)this._optional&&this._push(H);else if(!Re(this._transform))this._push(X);else{this._optional?this._optionalTransform(X,I):this._transform(X,I,this._boundPush);return}--this._limit===0&&this.close()}q()}_begin(A){this._insert(this._prepender,A),delete this._prepender}_flush(A){this._insert(this._appender,A),delete this._appender}_insert(A,I){const q=U=>this._push(U);!A||A.done?I():(A.on("data",q),A.on("end",H));function H(){A.removeListener("data",q),A.removeListener("end",H),I()}}}u.SimpleTransformIterator=w;class E extends T{constructor(A,I){if(super(A,I),this._transformerQueue=[],I){const q=Re(I)?I:I.multiTransform;q&&(this._createTransformer=q)}}_read(A,I){const q=this._transformerQueue,H=this._optional;let U,X;for(;(U=q[0])&&U.transformer.done;){H&&U.item!==null&&(A--,this._push(U.item)),q.shift();const{transformer:k}=U;k.removeListener("end",O),k.removeListener("readable",O),k.removeListener("error",S)}const{source:Q}=this;for(;Q&&!Q.done&&q.length<this.maxBufferSize&&(X=Q.read(),X!==null);){const k=this._createTransformer(X)||new f;k[u.DESTINATION]=this,k.on("end",O),k.on("readable",O),k.on("error",S),q.push({transformer:k,item:X})}if(U=q[0],U){const{transformer:k}=U;for(;A-- >0&&(X=k.read())!==null;)this._push(X),H&&(U.item=null)}else Q&&Q.done&&this.close();I()}_createTransformer(A){return new h(A)}_closeWhenDone(){this._transformerQueue.length||this.close()}_end(A){if(super._end(A),this._destroySource)for(const I of this._transformerQueue)I.transformer.destroy()}}u.MultiTransformIterator=E;class R extends g{constructor(A,I={}){super(I),this._sources=[],this._currentSource=-1;const q=I.autoStart!==!1;if(Ie(A))A.on("error",H=>this.emit("error",H)),this._pending={loading:!1,sources:A},q&&this._loadSources();else if(Array.isArray(A)&&A.length>0)for(const H of A)this._addSource(H);else q&&this.close();this._destroySources=I.destroySources!==!1}_loadSources(){const A=this._pending.sources;this._pending.loading=!0,A.done?(delete this._pending,this.close()):(A.on("data",I=>{this._addSource(I),this._fillBufferAsync()}),A.on("end",()=>{delete this._pending,this._fillBuffer()}))}_addSource(A){he(A)&&(A=Z(A)),A.done||(this._sources.push(A),A[u.DESTINATION]=this,A.on("error",S),A.on("readable",O),A.on("end",D))}_removeEmptySources(){this._sources=this._sources.filter((A,I)=>(A.done&&I<=this._currentSource&&this._currentSource--,!A.done)),this._fillBuffer()}_read(A,I){var q;((q=this._pending)===null||q===void 0?void 0:q.loading)===!1&&this._loadSources();let H=0,U;for(;H!==(H=A);)for(let X=0;X<this._sources.length&&A>0;X++)this._currentSource=(this._currentSource+1)%this._sources.length,(U=this._sources[this._currentSource].read())!==null&&(A--,this._push(U));!this._pending&&this._sources.length===0&&this.close(),I()}_end(A=!1){if(super._end(A),this._destroySources){for(const I of this._sources)I.destroy();this._pending&&(this._pending.sources.destroy(),delete this._pending)}}}u.UnionIterator=R;function D(){this[u.DESTINATION]._removeEmptySources()}class B extends T{constructor(A){super(A,{autoStart:!1}),this._readPosition=0,this._reading=!1,A&&(this.readable=!0)}_init(){}close(){c.prototype.close.call(this)}get source(){return super.source}set source(A){const I=this._source=this._validateSource(A),q=I&&I[u.DESTINATION]||(I[u.DESTINATION]=new C(I));this.done?this._destroySource&&I.destroy():q.endsAt(0)?this.close():(q.register(this),(I._sourceStarted===!1||q.readAt(0)!==null)&&(this.readable=!0));const H=this._propertyCallbacks;for(const U in H){const X=H[U];for(const Q of X)this._getSourceProperty(U,Q)}}_validateSource(A,I=!1){const q=A&&A[u.DESTINATION];return super._validateSource(A,!q||q instanceof C)}getProperty(A,I){const{source:q}=this,H=this._properties,U=H&&A in H;if(!I)return U?H&&H[A]:q&&q.getProperty(A);super.getProperty(A,I),q&&!U&&this._getSourceProperty(A,I)}_getSourceProperty(A,I){this.source.getProperty(A,q=>{(!this._properties||!(A in this._properties))&&I(q)})}getProperties(){const A=this.source?this.source.getProperties():{},I=this._properties;for(const q in I)A[q]=I[q];return A}_toStringDetails(){return`{source: ${this.source?this.source.toString():"none"}}`}read(){this._sourceStarted||(this._sourceStarted=!0);const A=this.source;let I=null;if(!this.done&&A){const q=A[u.DESTINATION];(I=q.readAt(this._readPosition))!==null?this._readPosition++:this.readable=!1,q.endsAt(this._readPosition)&&this.close()}return I}_end(A){const I=this.source,q=I==null?void 0:I[u.DESTINATION];q&&q.unregister(this),g.prototype._end.call(this,A)}}u.ClonedIterator=B;class C{constructor(A){if(this._history=[],this._trackers=new Set,this._source=A,!A.done){const I=()=>{for(const U of this._trackers)U.readable=!0},q=U=>{for(const X of this._trackers)X.emit("error",U)},H=()=>{for(const U of this._trackers)U._sourceStarted!==!1&&U._readPosition===this._history.length&&U.close();this._trackers.clear(),A.removeListener("end",H),A.removeListener("error",q),A.removeListener("readable",I)};A.on("end",H),A.on("error",q),A.on("readable",I)}}register(A){this._source.done||this._trackers.add(A)}unregister(A){this._trackers.delete(A)}readAt(A){let I=null;return A<this._history.length?I=this._history[A]:!this._source.done&&(I=this._source.read())!==null&&(this._history[A]=I),I}endsAt(A){return this._source.done&&this._history.length===A}}class $ extends c{constructor(A,I){super(),this._source=null,this._destroySource=(I==null?void 0:I.destroySource)!==!1,he(A)?(this._source=new c,A.then(q=>{this._source=null,this.source=q}).catch(q=>this.emit("error",q))):A&&(this.source=A)}set source(A){let I=A;if(this._source!==null)throw new Error("The source cannot be changed after it has been set");if(V(I)&&(I=I[Symbol.iterator]()),P(I)){let q=I;I=new n.EventEmitter,I.read=()=>{if(q!==null){let H;for(;!(H=q.next()).done;)if(H.value!==null)return H.value;q=null,this.close()}return null}}else I=m(I);if(this.done){this._destroySource&&Re(I.destroy)&&I.destroy();return}I[u.DESTINATION]=this,I.on("end",F),I.on("error",S),I.on("readable",v),this._source=I,this.readable=I.readable!==!1}read(){if(this._source!==null&&this._source.readable!==!1){const A=this._source.read();if(A!==null)return A;this.readable=!1}return null}_end(A=!1){this._source!==null&&(this._source.removeListener("end",F),this._source.removeListener("error",S),this._source.removeListener("readable",v),delete this._source[u.DESTINATION],this._destroySource&&Re(this._source.destroy)&&this._source.destroy(),this._source=null),super._end(A)}}u.WrappingIterator=$;function Z(N,A){if(A&&("autoStart"in A||"optional"in A||"source"in A||"maxBufferSize"in A))return N&&!Ie(N)&&(N=new $(N)),new T(N,A);if(!N)return ee();if(he(N))return new $(N,A);if(N instanceof c)return N;if(Array.isArray(N))return G(N);if(V(N)||P(N)||Ie(N))return new $(N,A);throw new TypeError(`Invalid source: ${N}`)}u.wrap=Z;function ee(){return new f}u.empty=ee;function ce(N){return new h(N)}u.single=ce;function G(N){return new p(N)}u.fromArray=G;function fe(N){return new $(N)}u.fromIterator=fe;function me(N){return new $(N)}u.fromIterable=me;function ye(N){return new R(N)}u.union=ye;function re(N,A,I){return new y({start:N,end:A,step:I})}u.range=re;function xe(N,A){return A?N.bind(A):N}function Re(N){return typeof N=="function"}u.isFunction=Re;function Ie(N){return Re(N==null?void 0:N.on)}u.isEventEmitter=Ie;function he(N){return Re(N==null?void 0:N.then)}u.isPromise=he;function be(N){return N&&(Ie(N)||he(N)||Re(N))}u.isSourceExpression=be;function V(N){return N&&Symbol.iterator in N}u.isIterable=V;function P(N){return Re(N==null?void 0:N.next)}u.isIterator=P})(OO)),OO}var AO={},qa={},bp={},BI;function Pk(){if(BI)return bp;BI=1,Object.defineProperty(bp,"__esModule",{value:!0}),bp.BlankNodeScoped=void 0;let u=class{constructor(o,i){this.termType="BlankNode",this.value=o,this.skolemized=i}equals(o){return!!o&&o.termType==="BlankNode"&&o.value===this.value}};return bp.BlankNodeScoped=u,bp}var _p={},$I;function Dk(){if($I)return _p;$I=1,Object.defineProperty(_p,"__esModule",{value:!0}),_p.BlankNodeBindingsScoped=void 0;let u=class{constructor(o){this.termType="BlankNode",this.singleBindingsScope=!0,this.value=o}equals(o){return!!o&&o.termType==="BlankNode"&&o.value===this.value}};return _p.BlankNodeBindingsScoped=u,_p}var UI;function EO(){return UI||(UI=1,(function(u){var n=qa&&qa.__createBinding||(Object.create?(function(i,t,e,r){r===void 0&&(r=e);var a=Object.getOwnPropertyDescriptor(t,e);(!a||("get"in a?!t.__esModule:a.writable||a.configurable))&&(a={enumerable:!0,get:function(){return t[e]}}),Object.defineProperty(i,r,a)}):(function(i,t,e,r){r===void 0&&(r=e),i[r]=t[e]})),o=qa&&qa.__exportStar||function(i,t){for(var e in i)e!=="default"&&!Object.prototype.hasOwnProperty.call(t,e)&&n(t,i,e)};Object.defineProperty(u,"__esModule",{value:!0}),o(Pk(),u),o(Dk(),u)})(qa)),qa}var VI;function xO(){return VI||(VI=1,(function(u){Object.defineProperty(u,"__esModule",{value:!0}),u.deskolemizeOperation=u.deskolemizeQuad=u.deskolemizeTermNestedThrowing=u.deskolemizeTerm=u.skolemizeBindingsStream=u.skolemizeQuadStream=u.skolemizeBindings=u.skolemizeQuad=u.skolemizeTerm=u.getSourceId=u.SKOLEM_PREFIX=void 0;const n=EO(),o=_n(),i=st();u.SKOLEM_PREFIX="urn:comunica_skolem:source_";function t(p,y){let _=p.get(y.referenceValue);return _===void 0&&(_=`${p.size}`,p.set(y.referenceValue,_)),_}u.getSourceId=t;function e(p,y,_){return y.termType==="BlankNode"?new n.BlankNodeScoped(`bc_${_}_${y.value}`,p.namedNode(`${u.SKOLEM_PREFIX}${_}:${y.value}`)):y}u.skolemizeTerm=e;function r(p,y,_){return(0,o.mapTermsNested)(y,b=>e(p,b,_))}u.skolemizeQuad=r;function a(p,y,_){return y.map(b=>b.termType==="Quad"?r(p,b,_):e(p,b,_))}u.skolemizeBindings=a;function c(p,y,_){const b=y.map(g=>r(p,g,_));function m(){y.getProperty("metadata",g=>{b.setProperty("metadata",g),g.state.addInvalidateListener(m)})}return m(),b}u.skolemizeQuadStream=c;function s(p,y,_){const b=y.map(g=>a(p,g,_));function m(){y.getProperty("metadata",g=>{b.setProperty("metadata",g),g.state.addInvalidateListener(m)})}return m(),b}u.skolemizeBindingsStream=s;function d(p,y,_){if(y.termType==="BlankNode"&&"skolemized"in y&&(y=y.skolemized),y.termType==="NamedNode"&&y.value.startsWith(u.SKOLEM_PREFIX)){const b=y.value.indexOf(":",u.SKOLEM_PREFIX.length);if(y.value.slice(u.SKOLEM_PREFIX.length,b)===_){const g=y.value.slice(b+1,y.value.length);return p.blankNode(g)}return null}return y}u.deskolemizeTerm=d;function l(p,y,_){if(y.termType==="Quad")return(0,o.mapTermsNested)(y,m=>{const g=d(p,m,_);if(!g)throw new Error("Skolemized term is not in scope for this source");return g});const b=d(p,y,_);if(b===null)throw new Error("Skolemized term is not in scope for this source");return b}u.deskolemizeTermNestedThrowing=l;function f(p,y,_){return(0,o.mapTermsNested)(y,b=>d(p,b,_)??b)}u.deskolemizeQuad=f;function h(p,y,_){const b=new i.Factory;try{return i.Util.mapOperation(y,{[i.Algebra.types.PATTERN](m,g){return{result:Object.assign(g.createPattern(l(p,m.subject,_),l(p,m.predicate,_),l(p,m.object,_),l(p,m.graph,_)),{metadata:m.metadata}),recurse:!1}},[i.Algebra.types.PATH](m,g){return{result:Object.assign(g.createPath(l(p,m.subject,_),m.predicate,l(p,m.object,_),l(p,m.graph,_)),{metadata:m.metadata}),recurse:!1}}},b)}catch{}}u.deskolemizeOperation=h})(AO)),AO}var QI;function HI(){if(QI)return fp;QI=1,Object.defineProperty(fp,"__esModule",{value:!0}),fp.QuerySourceSkolemized=void 0;const u=qe(),n=br(),o=pt(),i=xO();let t=class{constructor(r,a){this.innerSource=r,this.sourceId=a}async getSelectorShape(r){return this.innerSource.getSelectorShape(r)}queryBindings(r,a,c){const s=a.getSafe(u.KeysInitQuery.dataFactory),d=(0,i.deskolemizeOperation)(s,r,this.sourceId);if(!d){const l=new o.ArrayIterator([],{autoStart:!1});return l.setProperty("metadata",{state:new n.MetadataValidationState,cardinality:{type:"exact",value:0},variables:[]}),l}return(0,i.skolemizeBindingsStream)(s,this.innerSource.queryBindings(d,a,c),this.sourceId)}queryBoolean(r,a){return this.innerSource.queryBoolean(r,a)}queryQuads(r,a){const c=a.getSafe(u.KeysInitQuery.dataFactory),s=(0,i.deskolemizeOperation)(c,r,this.sourceId);if(!s){const d=new o.ArrayIterator([],{autoStart:!1});return d.setProperty("metadata",{state:new n.MetadataValidationState,cardinality:{type:"exact",value:0}}),d}return(0,i.skolemizeQuadStream)(c,this.innerSource.queryQuads(s,a),this.sourceId)}queryVoid(r,a){return this.innerSource.queryVoid(r,a)}get referenceValue(){return this.innerSource.referenceValue}toString(){return`${this.innerSource.toString()}(SkolemID:${this.sourceId})`}};return fp.QuerySourceSkolemized=t,fp}var GI;function Nk(){if(GI)return lp;GI=1,Object.defineProperty(lp,"__esModule",{value:!0}),lp.ActorContextPreprocessQuerySourceSkolemize=void 0;const u=sp(),n=qe(),o=pe(),i=HI(),t=xO();let e=class extends u.ActorContextPreprocess{constructor(a){super(a)}async test(a){return(0,o.passTestVoid)()}async run(a){let c=a.context;if(c.has(n.KeysQueryOperation.querySources)){c.has(n.KeysQuerySourceIdentify.sourceIds)||(c=c.set(n.KeysQuerySourceIdentify.sourceIds,new Map));const s=c.getSafe(n.KeysQuerySourceIdentify.sourceIds);let d=c.getSafe(n.KeysQueryOperation.querySources);d=d.map(l=>({source:new i.QuerySourceSkolemized(l.source,(0,t.getSourceId)(s,l.source)),context:l.context})),c=c.set(n.KeysQueryOperation.querySources,d)}return{context:c}}};return lp.ActorContextPreprocessQuerySourceSkolemize=e,lp}var zI;function XI(){return zI||(zI=1,(function(u){var n=Ma&&Ma.__createBinding||(Object.create?(function(i,t,e,r){r===void 0&&(r=e);var a=Object.getOwnPropertyDescriptor(t,e);(!a||("get"in a?!t.__esModule:a.writable||a.configurable))&&(a={enumerable:!0,get:function(){return t[e]}}),Object.defineProperty(i,r,a)}):(function(i,t,e,r){r===void 0&&(r=e),i[r]=t[e]})),o=Ma&&Ma.__exportStar||function(i,t){for(var e in i)e!=="default"&&!Object.prototype.hasOwnProperty.call(t,e)&&n(t,i,e)};Object.defineProperty(u,"__esModule",{value:!0}),o(Nk(),u),o(HI(),u),o(xO(),u)})(Ma)),Ma}var Ca={},gp={},JI;function jk(){if(JI)return gp;JI=1,Object.defineProperty(gp,"__esModule",{value:!0}),gp.MediatorCombinePipeline=void 0;const u=pe();let n=class extends u.Mediator{constructor(i){super(i)}async mediate(i){let t;try{t=this.publish(i)}catch{return i}if(this.filterFailures){const c=[];for(const s of t)(await s.reply).isPassed()&&c.push(s);t=c}const e=[];if(t=await Promise.all(t.map(async({actor:c,reply:s},d)=>{try{const l=await s,f=l.getOrThrow();return e[d]=l.getSideData(),{actor:c,reply:f}}catch(l){throw new Error(this.constructFailureMessage(i,[l.message]))}})),this.order){const c=s=>{const d=this.field?s[this.field]:s;if(typeof d!="number")throw new TypeError("Cannot order elements that are not numbers.");return d};t=t.sort((s,d)=>(this.order==="increasing"?1:-1)*(c(s.reply)-c(d.reply)))}let r=i,a=0;for(const{actor:c}of t)r={...r,...await c.runObservable(r,e[a++])};return r}mediateWith(){throw new Error("Method not supported.")}};return gp.MediatorCombinePipeline=n,gp}var KI;function kI(){return KI||(KI=1,(function(u){var n=Ca&&Ca.__createBinding||(Object.create?(function(i,t,e,r){r===void 0&&(r=e);var a=Object.getOwnPropertyDescriptor(t,e);(!a||("get"in a?!t.__esModule:a.writable||a.configurable))&&(a={enumerable:!0,get:function(){return t[e]}}),Object.defineProperty(i,r,a)}):(function(i,t,e,r){r===void 0&&(r=e),i[r]=t[e]})),o=Ca&&Ca.__exportStar||function(i,t){for(var e in i)e!=="default"&&!Object.prototype.hasOwnProperty.call(t,e)&&n(t,i,e)};Object.defineProperty(u,"__esModule",{value:!0}),o(jk(),u)})(Ca)),Ca}var Ba={},mp={},$a={},vp={},WI;function Lk(){if(WI)return vp;WI=1,Object.defineProperty(vp,"__esModule",{value:!0}),vp.ActorHashBindings=void 0;const u=pe();let n=class extends u.Actor{constructor(i){super(i)}};return vp.ActorHashBindings=n,vp}var YI;function Mk(){return YI||(YI=1,(function(u){var n=$a&&$a.__createBinding||(Object.create?(function(i,t,e,r){r===void 0&&(r=e);var a=Object.getOwnPropertyDescriptor(t,e);(!a||("get"in a?!t.__esModule:a.writable||a.configurable))&&(a={enumerable:!0,get:function(){return t[e]}}),Object.defineProperty(i,r,a)}):(function(i,t,e,r){r===void 0&&(r=e),i[r]=t[e]})),o=$a&&$a.__exportStar||function(i,t){for(var e in i)e!=="default"&&!Object.prototype.hasOwnProperty.call(t,e)&&n(t,i,e)};Object.defineProperty(u,"__esModule",{value:!0}),o(Lk(),u)})($a)),$a}var RO={exports:{}};/**
 * @preserve
 * JS Implementation of incremental MurmurHash3 (r150) (as of May 10, 2013)
 *
 * @author <a href="mailto:jensyt@gmail.com">Jens Taylor</a>
 * @see http://github.com/homebrewing/brauhaus-diff
 * @author <a href="mailto:gary.court@gmail.com">Gary Court</a>
 * @see http://github.com/garycourt/murmurhash-js
 * @author <a href="mailto:aappleby@gmail.com">Austin Appleby</a>
 * @see http://sites.google.com/site/murmurhash/
 */var ZI;function e4(){return ZI||(ZI=1,(function(u){(function(){var n;function o(i,t){var e=this instanceof o?this:n;if(e.reset(t),typeof i=="string"&&i.length>0&&e.hash(i),e!==this)return e}o.prototype.hash=function(i){var t,e,r,a,c;switch(c=i.length,this.len+=c,e=this.k1,r=0,this.rem){case 0:e^=c>r?i.charCodeAt(r++)&65535:0;case 1:e^=c>r?(i.charCodeAt(r++)&65535)<<8:0;case 2:e^=c>r?(i.charCodeAt(r++)&65535)<<16:0;case 3:e^=c>r?(i.charCodeAt(r)&255)<<24:0,e^=c>r?(i.charCodeAt(r++)&65280)>>8:0}if(this.rem=c+this.rem&3,c-=this.rem,c>0){for(t=this.h1;e=e*11601+(e&65535)*3432906752&4294967295,e=e<<15|e>>>17,e=e*13715+(e&65535)*461832192&4294967295,t^=e,t=t<<13|t>>>19,t=t*5+3864292196&4294967295,!(r>=c);)e=i.charCodeAt(r++)&65535^(i.charCodeAt(r++)&65535)<<8^(i.charCodeAt(r++)&65535)<<16,a=i.charCodeAt(r++),e^=(a&255)<<24^(a&65280)>>8;switch(e=0,this.rem){case 3:e^=(i.charCodeAt(r+2)&65535)<<16;case 2:e^=(i.charCodeAt(r+1)&65535)<<8;case 1:e^=i.charCodeAt(r)&65535}this.h1=t}return this.k1=e,this},o.prototype.result=function(){var i,t;return i=this.k1,t=this.h1,i>0&&(i=i*11601+(i&65535)*3432906752&4294967295,i=i<<15|i>>>17,i=i*13715+(i&65535)*461832192&4294967295,t^=i),t^=this.len,t^=t>>>16,t=t*51819+(t&65535)*2246770688&4294967295,t^=t>>>13,t=t*44597+(t&65535)*3266445312&4294967295,t^=t>>>16,t>>>0},o.prototype.reset=function(i){return this.h1=typeof i=="number"?i:0,this.rem=this.k1=this.len=0,this},n=new o,u.exports=o})()})(RO)),RO.exports}var t4;function qk(){if(t4)return mp;t4=1,Object.defineProperty(mp,"__esModule",{value:!0}),mp.ActorHashBindingsMurmur=void 0;const u=Mk(),n=pe(),o=e4();let i=class extends u.ActorHashBindings{async test(e){return(0,n.passTestVoid)()}async run(e){return{hashFunction:(r,a)=>{var s;let c=o();for(const d of a)c=c.hash(((s=r.get(d))==null?void 0:s.value)??"UNDEF");return c.result()}}}};return mp.ActorHashBindingsMurmur=i,mp}var r4;function Ck(){return r4||(r4=1,(function(u){var n=Ba&&Ba.__createBinding||(Object.create?(function(i,t,e,r){r===void 0&&(r=e);var a=Object.getOwnPropertyDescriptor(t,e);(!a||("get"in a?!t.__esModule:a.writable||a.configurable))&&(a={enumerable:!0,get:function(){return t[e]}}),Object.defineProperty(i,r,a)}):(function(i,t,e,r){r===void 0&&(r=e),i[r]=t[e]})),o=Ba&&Ba.__exportStar||function(i,t){for(var e in i)e!=="default"&&!Object.prototype.hasOwnProperty.call(t,e)&&n(t,i,e)};Object.defineProperty(u,"__esModule",{value:!0}),o(qk(),u)})(Ba)),Ba}var Ua={},Tp={},n4;function Bk(){if(n4)return Tp;n4=1,Object.defineProperty(Tp,"__esModule",{value:!0}),Tp.MediatorRace=void 0;const u=pe();let n=class extends u.Mediator{constructor(i){super(i)}mediateWith(i,t){return new Promise((e,r)=>{const a=[];for(const c of t)c.reply.then(s=>{s.isPassed()?e((0,u.passTestWithSideData)(c.actor,s.getSideData())):(a.push(s.getFailMessage()),a.length===t.length&&e((0,u.failTest)(this.constructFailureMessage(i,a))))}).catch(s=>{r(s)})})}};return Tp.MediatorRace=n,Tp}var i4;function _r(){return i4||(i4=1,(function(u){var n=Ua&&Ua.__createBinding||(Object.create?(function(i,t,e,r){r===void 0&&(r=e);var a=Object.getOwnPropertyDescriptor(t,e);(!a||("get"in a?!t.__esModule:a.writable||a.configurable))&&(a={enumerable:!0,get:function(){return t[e]}}),Object.defineProperty(i,r,a)}):(function(i,t,e,r){r===void 0&&(r=e),i[r]=t[e]})),o=Ua&&Ua.__exportStar||function(i,t){for(var e in i)e!=="default"&&!Object.prototype.hasOwnProperty.call(t,e)&&n(t,i,e)};Object.defineProperty(u,"__esModule",{value:!0}),o(Bk(),u)})(Ua)),Ua}var Va={},wp={},Qa={},Sp={},a4;function $k(){if(a4)return Sp;a4=1,Object.defineProperty(Sp,"__esModule",{value:!0}),Sp.ActorHashQuads=void 0;const u=pe();let n=class extends u.Actor{constructor(i){super(i)}};return Sp.ActorHashQuads=n,Sp}var u4;function Uk(){return u4||(u4=1,(function(u){var n=Qa&&Qa.__createBinding||(Object.create?(function(i,t,e,r){r===void 0&&(r=e);var a=Object.getOwnPropertyDescriptor(t,e);(!a||("get"in a?!t.__esModule:a.writable||a.configurable))&&(a={enumerable:!0,get:function(){return t[e]}}),Object.defineProperty(i,r,a)}):(function(i,t,e,r){r===void 0&&(r=e),i[r]=t[e]})),o=Qa&&Qa.__exportStar||function(i,t){for(var e in i)e!=="default"&&!Object.prototype.hasOwnProperty.call(t,e)&&n(t,i,e)};Object.defineProperty(u,"__esModule",{value:!0}),o($k(),u)})(Qa)),Qa}var o4;function Vk(){if(o4)return wp;o4=1,Object.defineProperty(wp,"__esModule",{value:!0}),wp.ActorHashQuadsMurmur=void 0;const u=Uk(),n=pe(),o=e4();let i=class extends u.ActorHashQuads{async test(e){return(0,n.passTestVoid)()}async run(e){return{hashFunction:r=>{const a=o(r.subject.value);return a.hash(r.predicate.value),a.hash(r.object.value),a.hash(r.graph.value),a.result()}}}};return wp.ActorHashQuadsMurmur=i,wp}var s4;function Qk(){return s4||(s4=1,(function(u){var n=Va&&Va.__createBinding||(Object.create?(function(i,t,e,r){r===void 0&&(r=e);var a=Object.getOwnPropertyDescriptor(t,e);(!a||("get"in a?!t.__esModule:a.writable||a.configurable))&&(a={enumerable:!0,get:function(){return t[e]}}),Object.defineProperty(i,r,a)}):(function(i,t,e,r){r===void 0&&(r=e),i[r]=t[e]})),o=Va&&Va.__exportStar||function(i,t){for(var e in i)e!=="default"&&!Object.prototype.hasOwnProperty.call(t,e)&&n(t,i,e)};Object.defineProperty(u,"__esModule",{value:!0}),o(Vk(),u)})(Va)),Va}var Ha={},Op={},Ga={},Ap={},c4;function Hk(){if(c4)return Ap;c4=1,Object.defineProperty(Ap,"__esModule",{value:!0}),Ap.ActorOptimizeQueryOperation=void 0;const u=pe();let n=class extends u.Actor{constructor(i){super(i)}};return Ap.ActorOptimizeQueryOperation=n,Ap}var d4;function gn(){return d4||(d4=1,(function(u){var n=Ga&&Ga.__createBinding||(Object.create?(function(i,t,e,r){r===void 0&&(r=e);var a=Object.getOwnPropertyDescriptor(t,e);(!a||("get"in a?!t.__esModule:a.writable||a.configurable))&&(a={enumerable:!0,get:function(){return t[e]}}),Object.defineProperty(i,r,a)}):(function(i,t,e,r){r===void 0&&(r=e),i[r]=t[e]})),o=Ga&&Ga.__exportStar||function(i,t){for(var e in i)e!=="default"&&!Object.prototype.hasOwnProperty.call(t,e)&&n(t,i,e)};Object.defineProperty(u,"__esModule",{value:!0}),o(Hk(),u)})(Ga)),Ga}var l4;function Gk(){if(l4)return Op;l4=1,Object.defineProperty(Op,"__esModule",{value:!0}),Op.ActorOptimizeQueryOperationRewriteCopy=void 0;const u=gn(),n=qe(),o=pe(),i=st();let t=class extends u.ActorOptimizeQueryOperation{constructor(r){super(r)}async test(r){return(0,o.passTestVoid)()}async run(r){const a=r.context.getSafe(n.KeysInitQuery.dataFactory),c=new i.Factory(a);return{operation:i.Util.mapOperation(r.operation,{[i.Algebra.types.COPY](d,l){let f;return typeof d.destination=="string"&&typeof d.source=="string"&&d.destination===d.source||typeof d.destination!="string"&&typeof d.source!="string"&&d.destination.equals(d.source)?f=l.createCompositeUpdate([]):f=l.createCompositeUpdate([l.createDrop(d.destination,!0),l.createAdd(d.source,d.destination,d.silent)]),{result:f,recurse:!1}}},c),context:r.context}}};return Op.ActorOptimizeQueryOperationRewriteCopy=t,Op}var f4;function zk(){return f4||(f4=1,(function(u){var n=Ha&&Ha.__createBinding||(Object.create?(function(i,t,e,r){r===void 0&&(r=e);var a=Object.getOwnPropertyDescriptor(t,e);(!a||("get"in a?!t.__esModule:a.writable||a.configurable))&&(a={enumerable:!0,get:function(){return t[e]}}),Object.defineProperty(i,r,a)}):(function(i,t,e,r){r===void 0&&(r=e),i[r]=t[e]})),o=Ha&&Ha.__exportStar||function(i,t){for(var e in i)e!=="default"&&!Object.prototype.hasOwnProperty.call(t,e)&&n(t,i,e)};Object.defineProperty(u,"__esModule",{value:!0}),o(Gk(),u)})(Ha)),Ha}var za={},Ep={},h4;function Xk(){if(h4)return Ep;h4=1,Object.defineProperty(Ep,"__esModule",{value:!0}),Ep.ActorOptimizeQueryOperationRewriteMove=void 0;const u=gn(),n=qe(),o=pe(),i=st();let t=class extends u.ActorOptimizeQueryOperation{constructor(r){super(r)}async test(r){return(0,o.passTestVoid)()}async run(r){const a=r.context.getSafe(n.KeysInitQuery.dataFactory),c=new i.Factory(a);return{operation:i.Util.mapOperation(r.operation,{[i.Algebra.types.MOVE](d,l){let f;if(typeof d.destination=="string"&&typeof d.source=="string"&&d.destination===d.source||typeof d.destination!="string"&&typeof d.source!="string"&&d.destination.equals(d.source))f=l.createCompositeUpdate([]);else{const h=[l.createDrop(d.destination,!0),l.createAdd(d.source,d.destination,d.silent),l.createDrop(d.source)];f=l.createCompositeUpdate(h)}return{result:f,recurse:!1}}},c),context:r.context}}};return Ep.ActorOptimizeQueryOperationRewriteMove=t,Ep}var p4;function Jk(){return p4||(p4=1,(function(u){var n=za&&za.__createBinding||(Object.create?(function(i,t,e,r){r===void 0&&(r=e);var a=Object.getOwnPropertyDescriptor(t,e);(!a||("get"in a?!t.__esModule:a.writable||a.configurable))&&(a={enumerable:!0,get:function(){return t[e]}}),Object.defineProperty(i,r,a)}):(function(i,t,e,r){r===void 0&&(r=e),i[r]=t[e]})),o=za&&za.__exportStar||function(i,t){for(var e in i)e!=="default"&&!Object.prototype.hasOwnProperty.call(t,e)&&n(t,i,e)};Object.defineProperty(u,"__esModule",{value:!0}),o(Xk(),u)})(za)),za}var Xa={},xp={},y4;function Kk(){if(y4)return xp;y4=1,Object.defineProperty(xp,"__esModule",{value:!0}),xp.ActorOptimizeQueryOperationRewriteAdd=void 0;const u=gn(),n=qe(),o=pe(),i=hr(),t=st(),e=new i.DataFactory;let r=class extends u.ActorOptimizeQueryOperation{constructor(c){super(c)}async test(c){return(0,o.passTestVoid)()}async run(c){const s=c.context.getSafe(n.KeysInitQuery.dataFactory),d=new t.Factory(s);return{operation:t.Util.mapOperation(c.operation,{[t.Algebra.types.ADD](f,h){const p=f.destination==="DEFAULT"?e.defaultGraph():f.destination,y=f.source==="DEFAULT"?e.defaultGraph():f.source;return{result:h.createDeleteInsert(void 0,[h.createPattern(e.variable("s"),e.variable("p"),e.variable("o"),p)],h.createPattern(e.variable("s"),e.variable("p"),e.variable("o"),y)),recurse:!1}}},d),context:c.context}}};return xp.ActorOptimizeQueryOperationRewriteAdd=r,xp}var b4;function kk(){return b4||(b4=1,(function(u){var n=Xa&&Xa.__createBinding||(Object.create?(function(i,t,e,r){r===void 0&&(r=e);var a=Object.getOwnPropertyDescriptor(t,e);(!a||("get"in a?!t.__esModule:a.writable||a.configurable))&&(a={enumerable:!0,get:function(){return t[e]}}),Object.defineProperty(i,r,a)}):(function(i,t,e,r){r===void 0&&(r=e),i[r]=t[e]})),o=Xa&&Xa.__exportStar||function(i,t){for(var e in i)e!=="default"&&!Object.prototype.hasOwnProperty.call(t,e)&&n(t,i,e)};Object.defineProperty(u,"__esModule",{value:!0}),o(Kk(),u)})(Xa)),Xa}var Ja={},Rp={},Ka={},Qr={},_4;function Wk(){if(_4)return Qr;_4=1,Object.defineProperty(Qr,"__esModule",{value:!0}),Qr.estimateNpsCardinality=Qr.estimateJoinCardinality=Qr.estimateUnionCardinality=Qr.estimateSliceCardinality=Qr.estimateMinusCardinality=Qr.estimateCardinality=void 0;const u=hr(),n=st(),o=new u.DataFactory,i=new n.Factory(o);function t(d,l){const f=l.getCardinality(d);if(f)return f;switch(d.type){case n.Algebra.types.ASK:return{type:"exact",value:1,dataset:l.uri};case n.Algebra.types.LOAD:case n.Algebra.types.DELETE_INSERT:case n.Algebra.types.ADD:case n.Algebra.types.COMPOSITE_UPDATE:case n.Algebra.types.CLEAR:case n.Algebra.types.NOP:case n.Algebra.types.DROP:case n.Algebra.types.CREATE:case n.Algebra.types.MOVE:case n.Algebra.types.COPY:return{type:"exact",value:0,dataset:l.uri};case n.Algebra.types.PROJECT:case n.Algebra.types.FILTER:case n.Algebra.types.ORDER_BY:case n.Algebra.types.GROUP:case n.Algebra.types.CONSTRUCT:case n.Algebra.types.DISTINCT:case n.Algebra.types.REDUCED:case n.Algebra.types.EXTEND:case n.Algebra.types.FROM:case n.Algebra.types.GRAPH:return t(d.input,l);case n.Algebra.types.ZERO_OR_ONE_PATH:case n.Algebra.types.ZERO_OR_MORE_PATH:case n.Algebra.types.ONE_OR_MORE_PATH:case n.Algebra.types.INV:return t(d.path,l);case n.Algebra.types.PATH:return t(d.predicate,l);case n.Algebra.types.NPS:return s(d,l);case n.Algebra.types.LINK:return t(i.createPattern(o.variable("s"),d.iri,o.variable("o")),l);case n.Algebra.types.UNION:case n.Algebra.types.SEQ:case n.Algebra.types.ALT:return a(d.input,l);case n.Algebra.types.BGP:return c(d.patterns,l);case n.Algebra.types.JOIN:case n.Algebra.types.LEFT_JOIN:return c(d.input,l);case n.Algebra.types.SLICE:return r(d,l);case n.Algebra.types.MINUS:return e(d,l);case n.Algebra.types.VALUES:return{type:"exact",value:d.bindings.length,dataset:l.uri};case n.Algebra.types.SERVICE:case n.Algebra.types.DESCRIBE:case n.Algebra.types.EXPRESSION:case n.Algebra.types.PATTERN:return{type:"estimate",value:Number.POSITIVE_INFINITY,dataset:l.uri}}}Qr.estimateCardinality=t;function e(d,l){const f=t(d.input[0],l),h=t(d.input[1],l);return{type:"estimate",value:Math.max(f.value-h.value,0),dataset:l.uri}}Qr.estimateMinusCardinality=e;function r(d,l){const f=t(d.input,l);return f.value>0&&(f.value=Math.max(f.value-d.start,0),d.length!==void 0&&(f.value=Math.min(f.value,d.length))),f}Qr.estimateSliceCardinality=r;function a(d,l){const f={type:"exact",value:0,dataset:l.uri};for(const h of d){const p=t(h,l);p.type==="estimate"&&f.type==="exact"&&(f.type=p.type),p.value>0&&(f.value+=p.value)}return f}Qr.estimateUnionCardinality=a;function c(d,l){const f=[];for(const p of d){const y=n.Util.inScopeVariables(p).map(b=>b.value),_=f.find(b=>y.some(m=>b.vars.has(m)));if(_){_.ops.push(p);for(const b of y)_.vars.add(b)}else f.push({ops:[p],vars:new Set(y)})}return{type:"estimate",value:f.map(p=>Math.min(...p.ops.map(y=>t(y,l).value))).reduce((p,y)=>p*y,1),dataset:l.uri}}Qr.estimateJoinCardinality=c;function s(d,l){const f=i.createSeq([...d.iris].reverse().map(_=>i.createLink(_))),h=t(f,l),p=i.createPattern(o.variable("s"),o.variable("p"),o.variable("o")),y=t(p,l);return{type:"estimate",value:Math.max(0,y.value-h.value),dataset:l.uri}}return Qr.estimateNpsCardinality=s,Qr}var Fp={},g4;function Yk(){if(g4)return Fp;g4=1,Object.defineProperty(Fp,"__esModule",{value:!0}),Fp.doesShapeAcceptOperation=void 0;function u(i,t,e){return n(i,i,t,e)}Fp.doesShapeAcceptOperation=u;function n(i,t,e,r){if(t.type==="conjunction")return t.children.every(c=>n(i,c,e,r));if(t.type==="disjunction")return t.children.some(c=>n(i,c,e,r));if(t.type==="arity")return n(i,t.child,e,r);if(((r==null?void 0:r.joinBindings)&&!t.joinBindings)??((r==null?void 0:r.filterBindings)&&!t.filterBindings))return!1;const a=t.operation;switch(a.operationType){case"type":return o(i,t,e,r)?a.type===e.type:!1;case"pattern":return o(i,t,e,r)?a.pattern.type===e.type:!1;case"wildcard":return!0}}function o(i,t,e,r){return!(e.input&&!(Array.isArray(e.input)?e.input:[e.input]).every(c=>n(i,i,c,r))||e.patterns&&!e.patterns.every(a=>n(i,i,a,r)))}return Fp}var ur={},m4;function Zk(){if(m4)return ur;m4=1,Object.defineProperty(ur,"__esModule",{value:!0}),ur.removeOperationSource=ur.assignOperationSource=ur.getOperationSource=ur.testReadOnly=ur.validateQueryOutput=ur.getSafeVoid=ur.getSafeBoolean=ur.getSafeQuads=ur.getSafeBindings=void 0;const u=qe(),n=pe();function o(l){return r(l,"bindings"),l}ur.getSafeBindings=o;function i(l){return r(l,"quads"),l}ur.getSafeQuads=i;function t(l){return r(l,"boolean"),l}ur.getSafeBoolean=t;function e(l){return r(l,"void"),l}ur.getSafeVoid=e;function r(l,f){if(l.type!==f)throw new Error(`Invalid query output type: Expected '${f}' but got '${l.type}'`)}ur.validateQueryOutput=r;function a(l){return l.get(u.KeysQueryOperation.readOnly)?(0,n.failTest)("Attempted a write operation in read-only mode"):(0,n.passTestVoid)()}ur.testReadOnly=a;function c(l){var f;return(f=l.metadata)==null?void 0:f.scopedSource}ur.getOperationSource=c;function s(l,f){return l={...l},l.metadata=l.metadata?{...l.metadata}:{},l.metadata.scopedSource=f,l}ur.assignOperationSource=s;function d(l){var f;(f=l.metadata)==null||delete f.scopedSource,l.metadata&&Object.keys(l.metadata).length===0&&delete l.metadata}return ur.removeOperationSource=d,ur}var ka={},v4;function eW(){if(v4)return ka;v4=1,Object.defineProperty(ka,"__esModule",{value:!0}),ka.materializeOperation=ka.materializeTerm=void 0;const u=Yt(),n=_n(),o=st();function i(r,a){if(r.termType==="Variable"){const c=a.get(r);if(c)return c}return r.termType==="Quad"&&(0,n.someTermsNested)(r,c=>c.termType==="Variable")?(0,n.mapTermsNested)(r,c=>i(c,a)):r}ka.materializeTerm=i;function t(r,a,c,s,d={}){return d={strictTargetVariables:"strictTargetVariables"in d?d.strictTargetVariables:!1,bindFilter:"bindFilter"in d?d.bindFilter:!0,originalBindings:"originalBindings"in d?d.originalBindings:a},o.Util.mapOperation(r,{path(l,f){return{recurse:!1,result:Object.assign(f.createPath(i(l.subject,a),l.predicate,i(l.object,a),i(l.graph,a)),{metadata:l.metadata})}},pattern(l,f){return{recurse:!1,result:Object.assign(f.createPattern(i(l.subject,a),i(l.predicate,a),i(l.object,a),i(l.graph,a)),{metadata:l.metadata})}},join(l,f){return{recurse:!1,result:f.createJoin(l.input.map(h=>t(h,a,c,s,d)),l.input.every(h=>!h.metadata))}},extend(l){if(a.has(l.variable)){if(d.strictTargetVariables)throw new Error(`Tried to bind variable ${(0,u.termToString)(l.variable)} in a BIND operator.`);return{recurse:!0,result:t(l.input,a,c,s,d)}}return{recurse:!0,result:l}},group(l,f){if(d.strictTargetVariables){for(const p of l.variables)if(a.has(p))throw new Error(`Tried to bind variable ${(0,u.termToString)(p)} in a GROUP BY operator.`);return{recurse:!0,result:l}}const h=l.variables.filter(p=>!a.has(p));return{recurse:!0,result:f.createGroup(l.input,h,l.aggregates)}},filter(l,f){const h=d.originalBindings;if(l.expression.expressionType!=="operator"||h.size===0)return{recurse:!1,result:l};const p=e(f,h),y=t(l.expression,a,c,s,d);let _=t(l.input,a,c,s,d);return p.length>0&&(_=f.createJoin([...p,_])),{recurse:!1,result:f.createFilter(_,y)}},project(l,f){const h=e(f,d.originalBindings,l.variables);let p=t(l.input,a,c,s,d);return h.length>0&&(p=f.createJoin([...h,p])),{recurse:!1,result:f.createProject(p,l.variables)}},values(l,f){if(d.strictTargetVariables){for(const h of l.variables)if(a.has(h))throw new Error(`Tried to bind variable ${(0,u.termToString)(h)} in a VALUES operator.`)}else{const h=l.variables.filter(y=>!a.has(y)),p=l.bindings.map(y=>{const _={...y};let b=!0;return a.forEach((m,g)=>{const T=(0,u.termToString)(g);T in _&&(m.equals(_[T])||(b=!1),delete _[T])}),b?_:void 0}).filter(Boolean);return{recurse:!0,result:f.createValues(h,p)}}return{recurse:!1,result:l}},expression(l,f){if(!d.bindFilter)return{recurse:!1,result:l};if(l.expressionType==="term")return{recurse:!1,result:f.createTermExpression(i(l.term,a))};if(l.expressionType==="operator")return l.operator==="bound"&&l.args.length===1&&l.args[0].expressionType==="term"&&[...a.keys()].some(h=>l.args[0].term.equals(h))?{recurse:!1,result:f.createTermExpression(f.dataFactory.literal("true",f.dataFactory.namedNode("http://www.w3.org/2001/XMLSchema#boolean")))}:{recurse:!0,result:l};if(l.expressionType==="aggregate"&&"variable"in l&&a.has(l.variable)){if(d.strictTargetVariables)throw new Error(`Tried to bind ${(0,u.termToString)(l.variable)} in a ${l.aggregator} aggregate.`);return{recurse:!0,result:l}}return{recurse:!0,result:l}}},c)}ka.materializeOperation=t;function e(r,a,c){const s=[];for(const[d,l]of a)if(!c||c.some(f=>f.equals(d))){const f={[(0,u.termToString)(d)]:l};s.push(r.createValues([d],[f]))}return s}return ka}var T4;function _t(){return T4||(T4=1,(function(u){var n=Ka&&Ka.__createBinding||(Object.create?(function(i,t,e,r){r===void 0&&(r=e);var a=Object.getOwnPropertyDescriptor(t,e);(!a||("get"in a?!t.__esModule:a.writable||a.configurable))&&(a={enumerable:!0,get:function(){return t[e]}}),Object.defineProperty(i,r,a)}):(function(i,t,e,r){r===void 0&&(r=e),i[r]=t[e]})),o=Ka&&Ka.__exportStar||function(i,t){for(var e in i)e!=="default"&&!Object.prototype.hasOwnProperty.call(t,e)&&n(t,i,e)};Object.defineProperty(u,"__esModule",{value:!0}),o(Wk(),u),o(Yk(),u),o(Zk(),u),o(eW(),u)})(Ka)),Ka}var w4;function tW(){if(w4)return Rp;w4=1,Object.defineProperty(Rp,"__esModule",{value:!0}),Rp.ActorOptimizeQueryOperationGroupSources=void 0;const u=gn(),n=qe(),o=pe(),i=_t(),t=st();let e=class extends u.ActorOptimizeQueryOperation{constructor(a){super(a)}async test(a){return(0,i.getOperationSource)(a.operation)?(0,o.failTest)(`Actor ${this.name} does not work with top-level operation sources.`):(0,o.passTestVoid)()}async run(a){return{operation:await this.groupOperation(a.operation,a.context),context:a.context}}async groupOperation(a,c){var p;const s=c.getSafe(n.KeysInitQuery.dataFactory),d=new t.Factory(s);if((0,i.getOperationSource)(a)??!("input"in a))return a;if(!Array.isArray(a.input)){const y=await this.groupOperation(a.input,c);if((p=y.metadata)!=null&&p.scopedSource){const _=(0,i.getOperationSource)(y);(0,i.doesShapeAcceptOperation)(await _.source.getSelectorShape(c),a)&&(this.logDebug(c,`Hoist 1 source-specific operation into a single ${a.type} operation for ${_.source.toString()}`),(0,i.removeOperationSource)(y),a=(0,i.assignOperationSource)(a,_))}return{...a,input:y}}const l=await Promise.all(a.input.map(y=>this.groupOperation(y,c))),f=this.clusterOperationsWithEqualSources(l);if(f.length===1){const y=f[0],_=(0,i.getOperationSource)(f[0][0]);return{...await this.moveSourceAnnotationUpwardsIfPossible(a,y,_,c),input:y}}if(f.length===l.length)return{...a,input:l};let h;switch(a.type){case t.Algebra.types.JOIN:h=d.createJoin.bind(d);break;case t.Algebra.types.UNION:h=d.createUnion.bind(d);break;case t.Algebra.types.ALT:h=d.createAlt.bind(d);break;case t.Algebra.types.SEQ:h=d.createSeq.bind(d);break;default:throw new Error(`Unsupported operation '${a.type}' detected while grouping sources`)}return await this.groupOperationMulti(f,h,c)}async groupOperationMulti(a,c,s){let d=!0;const l=await Promise.all(a.map(async f=>{const h=(0,i.getOperationSource)(f[0]),p=await this.moveSourceAnnotationUpwardsIfPossible(c(f,!0),f,h,s);return(0,i.getOperationSource)(p)&&(d=!1),p}));return c(l,d)}clusterOperationsWithEqualSources(a){const c=new Map,s=[];for(const l of a){const f=(0,i.getOperationSource)(l);f?(c.has(f)||c.set(f,[]),c.get(f).push(l)):s.push(l)}const d=[];s.length>0&&d.push(s);for(const[l,f]of c.entries())d.push(f.map(h=>(0,i.assignOperationSource)(h,l)));return d}async moveSourceAnnotationUpwardsIfPossible(a,c,s,d){if(s&&(0,i.doesShapeAcceptOperation)(await s.source.getSelectorShape(d),a)){this.logDebug(d,`Hoist ${c.length} source-specific operations into a single ${a.type} operation for ${s.source.toString()}`),a=(0,i.assignOperationSource)(a,s);for(const l of c)(0,i.removeOperationSource)(l)}return a}};return Rp.ActorOptimizeQueryOperationGroupSources=e,Rp}var S4;function rW(){return S4||(S4=1,(function(u){var n=Ja&&Ja.__createBinding||(Object.create?(function(i,t,e,r){r===void 0&&(r=e);var a=Object.getOwnPropertyDescriptor(t,e);(!a||("get"in a?!t.__esModule:a.writable||a.configurable))&&(a={enumerable:!0,get:function(){return t[e]}}),Object.defineProperty(i,r,a)}):(function(i,t,e,r){r===void 0&&(r=e),i[r]=t[e]})),o=Ja&&Ja.__exportStar||function(i,t){for(var e in i)e!=="default"&&!Object.prototype.hasOwnProperty.call(t,e)&&n(t,i,e)};Object.defineProperty(u,"__esModule",{value:!0}),o(tW(),u)})(Ja)),Ja}var Wa={},Ip={},O4;function nW(){if(O4)return Ip;O4=1,Object.defineProperty(Ip,"__esModule",{value:!0}),Ip.ActorOptimizeQueryOperationConstructDistinct=void 0;const u=gn(),n=bF(),o=pe(),i=st();let t=class extends u.ActorOptimizeQueryOperation{constructor(r){super(r)}async test(r){return r.context.has(n.KeysInitQuery.distinctConstruct)?(0,o.passTestVoid)():(0,o.failTest)(`${this.name} was not enabled by the query.`)}async run(r){return{operation:i.Util.mapOperation(r.operation,{construct(c,s){return{recurse:!1,result:s.createDistinct(s.createConstruct(c.input,c.template))}}}),context:r.context.delete(n.KeysInitQuery.distinctConstruct)}}};return Ip.ActorOptimizeQueryOperationConstructDistinct=t,Ip}var A4;function iW(){return A4||(A4=1,(function(u){var n=Wa&&Wa.__createBinding||(Object.create?(function(i,t,e,r){r===void 0&&(r=e);var a=Object.getOwnPropertyDescriptor(t,e);(!a||("get"in a?!t.__esModule:a.writable||a.configurable))&&(a={enumerable:!0,get:function(){return t[e]}}),Object.defineProperty(i,r,a)}):(function(i,t,e,r){r===void 0&&(r=e),i[r]=t[e]})),o=Wa&&Wa.__exportStar||function(i,t){for(var e in i)e!=="default"&&!Object.prototype.hasOwnProperty.call(t,e)&&n(t,i,e)};Object.defineProperty(u,"__esModule",{value:!0}),o(nW(),u)})(Wa)),Wa}var Ya={},Pp={},Za={},Dp={},E4;function aW(){if(E4)return Dp;E4=1,Object.defineProperty(Dp,"__esModule",{value:!0}),Dp.ActorQueryParse=void 0;const u=pe();let n=class extends u.Actor{constructor(i){super(i)}};return Dp.ActorQueryParse=n,Dp}var x4;function R4(){return x4||(x4=1,(function(u){var n=Za&&Za.__createBinding||(Object.create?(function(i,t,e,r){r===void 0&&(r=e);var a=Object.getOwnPropertyDescriptor(t,e);(!a||("get"in a?!t.__esModule:a.writable||a.configurable))&&(a={enumerable:!0,get:function(){return t[e]}}),Object.defineProperty(i,r,a)}):(function(i,t,e,r){r===void 0&&(r=e),i[r]=t[e]})),o=Za&&Za.__exportStar||function(i,t){for(var e in i)e!=="default"&&!Object.prototype.hasOwnProperty.call(t,e)&&n(t,i,e)};Object.defineProperty(u,"__esModule",{value:!0}),o(aW(),u)})(Za)),Za}var F4;function uW(){if(F4)return Pp;F4=1,Object.defineProperty(Pp,"__esModule",{value:!0}),Pp.ActorQueryParseSparql=void 0;const u=R4(),n=qe(),o=pe(),i=st(),t=Vh();let e=class extends u.ActorQueryParse{constructor(a){super(a),this.prefixes=Object.freeze(this.prefixes)}async test(a){return a.queryFormat&&a.queryFormat.language!=="sparql"?(0,o.failTest)("This actor can only parse SPARQL queries"):(0,o.passTestVoid)()}async run(a){const c=a.context.getSafe(n.KeysInitQuery.dataFactory),d=new t.Parser({prefixes:this.prefixes,baseIRI:a.baseIRI,sparqlStar:!0,factory:c}).parse(a.query);return{baseIRI:d.type==="query"?d.base:void 0,operation:(0,i.translate)(d,{quads:!0,prefixes:this.prefixes,blankToVariable:!0,baseIRI:a.baseIRI,dataFactory:c})}}};return Pp.ActorQueryParseSparql=e,Pp}var I4;function oW(){return I4||(I4=1,(function(u){var n=Ya&&Ya.__createBinding||(Object.create?(function(i,t,e,r){r===void 0&&(r=e);var a=Object.getOwnPropertyDescriptor(t,e);(!a||("get"in a?!t.__esModule:a.writable||a.configurable))&&(a={enumerable:!0,get:function(){return t[e]}}),Object.defineProperty(i,r,a)}):(function(i,t,e,r){r===void 0&&(r=e),i[r]=t[e]})),o=Ya&&Ya.__exportStar||function(i,t){for(var e in i)e!=="default"&&!Object.prototype.hasOwnProperty.call(t,e)&&n(t,i,e)};Object.defineProperty(u,"__esModule",{value:!0}),o(uW(),u)})(Ya)),Ya}var eu={},Np={},tu={},ru={},nu={},jp={},P4;function hf(){if(P4)return jp;P4=1,Object.defineProperty(jp,"__esModule",{value:!0}),jp.DirectiveNodeHandlerAdapter=void 0;let u=class{constructor(o,i,t){this.targetKind=o,this.util=i,this.settings=t}getDirectiveConditionalValue(o,i){const t=this.util.getArgument(o.arguments,"if");if(!t)throw new Error(`The directive ${o.name.value} is missing an if-argument.`);const e=this.util.handleNodeValue(t.value,t.name.value,i);if(e.terms.length!==1)throw new Error(`Can not apply the directive ${o.name.value} with a list.`);return e.terms[0]}isDirectiveScopeAll(o){const i=this.util.getArgument(o.arguments,"scope");return i&&i.value.kind==="EnumValue"&&i.value.value==="all"}};return jp.DirectiveNodeHandlerAdapter=u,jp}var Lp={},D4;function sW(){if(D4)return Lp;D4=1,Object.defineProperty(Lp,"__esModule",{value:!0}),Lp.DirectiveNodeHandlerInclude=void 0;const u=hf();let n=class extends u.DirectiveNodeHandlerAdapter{constructor(i,t){super("include",i,t)}handle(i,t){const e=this.getDirectiveConditionalValue(i.directive,t);return e.termType==="Literal"&&e.value==="false"?{ignore:!0}:{}}};return Lp.DirectiveNodeHandlerInclude=n,Lp}var Mp={},N4;function cW(){if(N4)return Mp;N4=1,Object.defineProperty(Mp,"__esModule",{value:!0}),Mp.DirectiveNodeHandlerOptional=void 0;const u=hf();let n=class extends u.DirectiveNodeHandlerAdapter{constructor(i,t){super("optional",i,t)}handle(i,t){return{operationOverrider:e=>this.util.operationFactory.createLeftJoin(this.util.operationFactory.createBgp([]),e)}}};return Mp.DirectiveNodeHandlerOptional=n,Mp}var qp={},FO={},j4;function Cp(){return j4||(j4=1,(function(u){Object.defineProperty(u,"__esModule",{value:!0}),u.SingularizeState=void 0,(function(n){n[n.SINGLE=0]="SINGLE",n[n.PLURAL=1]="PLURAL"})(u.SingularizeState||(u.SingularizeState={}))})(FO)),FO}var L4;function dW(){if(L4)return qp;L4=1,Object.defineProperty(qp,"__esModule",{value:!0}),qp.DirectiveNodeHandlerPlural=void 0;const u=Cp(),n=hf();let o=class extends n.DirectiveNodeHandlerAdapter{constructor(t,e){super("plural",t,e)}handle(t,e){return this.isDirectiveScopeAll(t.directive)&&(e.singularizeState=u.SingularizeState.PLURAL),delete e.singularizeVariables[this.util.nameToVariable(t.fieldLabel,e).value],{}}};return qp.DirectiveNodeHandlerPlural=o,qp}var Bp={},M4;function lW(){if(M4)return Bp;M4=1,Object.defineProperty(Bp,"__esModule",{value:!0}),Bp.DirectiveNodeHandlerSingle=void 0;const u=Cp(),n=hf();let o=class extends n.DirectiveNodeHandlerAdapter{constructor(t,e){super("single",t,e)}handle(t,e){return this.isDirectiveScopeAll(t.directive)&&(e.singularizeState=u.SingularizeState.SINGLE),e.singularizeVariables[this.util.nameToVariable(t.fieldLabel,e).value]=!0,{}}};return Bp.DirectiveNodeHandlerSingle=o,Bp}var $p={},q4;function fW(){if(q4)return $p;q4=1,Object.defineProperty($p,"__esModule",{value:!0}),$p.DirectiveNodeHandlerSkip=void 0;const u=hf();let n=class extends u.DirectiveNodeHandlerAdapter{constructor(i,t){super("skip",i,t)}handle(i,t){const e=this.getDirectiveConditionalValue(i.directive,t);return e.termType==="Literal"&&e.value==="true"?{ignore:!0}:{}}};return $p.DirectiveNodeHandlerSkip=n,$p}var C4;function B4(){return C4||(C4=1,(function(u){var n=nu&&nu.__createBinding||(Object.create?(function(i,t,e,r){r===void 0&&(r=e);var a=Object.getOwnPropertyDescriptor(t,e);(!a||("get"in a?!t.__esModule:a.writable||a.configurable))&&(a={enumerable:!0,get:function(){return t[e]}}),Object.defineProperty(i,r,a)}):(function(i,t,e,r){r===void 0&&(r=e),i[r]=t[e]})),o=nu&&nu.__exportStar||function(i,t){for(var e in i)e!=="default"&&!Object.prototype.hasOwnProperty.call(t,e)&&n(t,i,e)};Object.defineProperty(u,"__esModule",{value:!0}),o(hf(),u),o(sW(),u),o(cW(),u),o(dW(),u),o(lW(),u),o(fW(),u)})(nu)),nu}var iu={},Up={},$4;function Jn(){if($4)return Up;$4=1,Object.defineProperty(Up,"__esModule",{value:!0}),Up.NodeValueHandlerAdapter=void 0;let u=class{constructor(o,i,t){this.targetKind=o,this.util=i,this.settings=t}};return Up.NodeValueHandlerAdapter=u,Up}var Vp={},U4;function hW(){if(U4)return Vp;U4=1,Object.defineProperty(Vp,"__esModule",{value:!0}),Vp.NodeValueHandlerBoolean=void 0;const u=Jn();let n=class extends u.NodeValueHandlerAdapter{constructor(i,t){super("BooleanValue",i,t),this.datatype=this.util.dataFactory.namedNode("http://www.w3.org/2001/XMLSchema#boolean")}handle(i,t,e){return{terms:[this.util.dataFactory.literal(i.value?"true":"false",this.datatype)]}}};return Vp.NodeValueHandlerBoolean=n,Vp}var Qp={},V4;function pW(){if(V4)return Qp;V4=1,Object.defineProperty(Qp,"__esModule",{value:!0}),Qp.NodeValueHandlerEnum=void 0;const u=Jn();let n=class extends u.NodeValueHandlerAdapter{constructor(i,t){super("EnumValue",i,t)}handle(i,t,e){return{terms:[this.util.valueToNamedNode(i.value,e.context)]}}};return Qp.NodeValueHandlerEnum=n,Qp}var Hp={},Q4;function yW(){if(Q4)return Hp;Q4=1,Object.defineProperty(Hp,"__esModule",{value:!0}),Hp.NodeValueHandlerFloat=void 0;const u=Jn();let n=class extends u.NodeValueHandlerAdapter{constructor(i,t){super("FloatValue",i,t),this.datatype=this.util.dataFactory.namedNode("http://www.w3.org/2001/XMLSchema#float")}handle(i,t,e){return{terms:[this.util.dataFactory.literal(i.value,this.datatype)]}}};return Hp.NodeValueHandlerFloat=n,Hp}var Gp={},H4;function bW(){if(H4)return Gp;H4=1,Object.defineProperty(Gp,"__esModule",{value:!0}),Gp.NodeValueHandlerInt=void 0;const u=Jn();let n=class extends u.NodeValueHandlerAdapter{constructor(i,t){super("IntValue",i,t),this.datatype=this.util.dataFactory.namedNode("http://www.w3.org/2001/XMLSchema#integer")}handle(i,t,e){return{terms:[this.util.dataFactory.literal(i.value,this.datatype)]}}};return Gp.NodeValueHandlerInt=n,Gp}var zp={},G4;function _W(){if(G4)return zp;G4=1,Object.defineProperty(zp,"__esModule",{value:!0}),zp.NodeValueHandlerList=void 0;const u=Jn();let n=class extends u.NodeValueHandlerAdapter{constructor(i,t){super("ListValue",i,t),this.nodeFirst=this.util.dataFactory.namedNode("http://www.w3.org/1999/02/22-rdf-syntax-ns#first"),this.nodeRest=this.util.dataFactory.namedNode("http://www.w3.org/1999/02/22-rdf-syntax-ns#rest"),this.nodeNil=this.util.dataFactory.namedNode("http://www.w3.org/1999/02/22-rdf-syntax-ns#nil")}handle(i,t,e){const r=[];let a=[];for(const c of i.values){const s=this.util.handleNodeValue(c,t,e);for(const d of s.terms)r.push(d);s.auxiliaryPatterns&&(a=a.concat(s.auxiliaryPatterns))}if(this.settings.arraysToRdfLists){const c=this.util.dataFactory.blankNode();let s=c,d=r.length;for(const l of r){a.push(this.util.operationFactory.createPattern(s,this.nodeFirst,l,e.graph));const f=--d===0?this.nodeNil:this.util.dataFactory.blankNode();a.push(this.util.operationFactory.createPattern(s,this.nodeRest,f,e.graph)),s=f}return{terms:[c],auxiliaryPatterns:a}}else return{terms:r,auxiliaryPatterns:a}}};return zp.NodeValueHandlerList=n,zp}var Xp={},z4;function gW(){if(z4)return Xp;z4=1,Object.defineProperty(Xp,"__esModule",{value:!0}),Xp.NodeValueHandlerNull=void 0;const u=Jn();let n=class extends u.NodeValueHandlerAdapter{constructor(i,t){super("NullValue",i,t),this.nil=this.util.dataFactory.namedNode("http://www.w3.org/1999/02/22-rdf-syntax-ns#nil")}handle(i,t,e){return{terms:[this.nil]}}};return Xp.NodeValueHandlerNull=n,Xp}var Jp={},X4;function mW(){if(X4)return Jp;X4=1,Object.defineProperty(Jp,"__esModule",{value:!0}),Jp.NodeValueHandlerObject=void 0;const u=Jn();let n=class extends u.NodeValueHandlerAdapter{constructor(i,t){super("ObjectValue",i,t)}handle(i,t,e){const r=this.util.dataFactory.blankNode();let a=[];for(const c of i.fields){const s=this.util.handleNodeValue(c.value,t,e);for(const d of s.terms)a.push(this.util.createQuadPattern(r,c.name,d,e.graph,e.context));s.auxiliaryPatterns&&(a=a.concat(s.auxiliaryPatterns))}return{terms:[r],auxiliaryPatterns:a}}};return Jp.NodeValueHandlerObject=n,Jp}var Kp={},J4;function vW(){if(J4)return Kp;J4=1,Object.defineProperty(Kp,"__esModule",{value:!0}),Kp.NodeValueHandlerString=void 0;const u=Jn();let n=class extends u.NodeValueHandlerAdapter{constructor(i,t){super("StringValue",i,t)}handle(i,t,e){const r=e.context.getContextRaw()[t];let a,c;return r&&typeof r!="string"&&(r["@language"]?a=r["@language"]:r["@type"]&&(c=this.util.dataFactory.namedNode(r["@type"]))),{terms:[this.util.dataFactory.literal(i.value,a||c)]}}};return Kp.NodeValueHandlerString=n,Kp}var kp={},K4;function TW(){if(K4)return kp;K4=1,Object.defineProperty(kp,"__esModule",{value:!0}),kp.NodeValueHandlerVariable=void 0;const u=Jn();let n=class extends u.NodeValueHandlerAdapter{constructor(i,t){super("Variable",i,t)}handle(i,t,e){const r=i.name.value,a=e.variablesDict[r],c=e.variablesMetaDict[r];if(!a){if(!e.ignoreUnknownVariables&&(!c||c.mandatory))throw new Error(`Undefined variable: ${r}`);{const s=this.util.dataFactory.variable(r);return e.terminalVariables.map(d=>d.value).indexOf(r)<0&&e.terminalVariables.push(s),{terms:[s]}}}if(a.kind==="Variable")throw new Error(`Variable refers to another variable: ${r}`);if(c)if(c.list){if(a.kind!=="ListValue")throw new Error(`Expected a list, but got ${a.kind} for ${r}`);if(c.type){const s=a;for(const d of s.values)if(d.kind!==c.type)throw new Error(`Expected ${c.type}, but got ${d.kind} for ${r}`)}}else c.type;return this.util.handleNodeValue(a,t,e)}};return kp.NodeValueHandlerVariable=n,kp}var k4;function wW(){return k4||(k4=1,(function(u){var n=iu&&iu.__createBinding||(Object.create?(function(i,t,e,r){r===void 0&&(r=e);var a=Object.getOwnPropertyDescriptor(t,e);(!a||("get"in a?!t.__esModule:a.writable||a.configurable))&&(a={enumerable:!0,get:function(){return t[e]}}),Object.defineProperty(i,r,a)}):(function(i,t,e,r){r===void 0&&(r=e),i[r]=t[e]})),o=iu&&iu.__exportStar||function(i,t){for(var e in i)e!=="default"&&!Object.prototype.hasOwnProperty.call(t,e)&&n(t,i,e)};Object.defineProperty(u,"__esModule",{value:!0}),o(Jn(),u),o(hW(),u),o(pW(),u),o(yW(),u),o(bW(),u),o(_W(),u),o(gW(),u),o(mW(),u),o(vW(),u),o(TW(),u)})(iu)),iu}var Wp={},W4;function n3(){if(W4)return Wp;W4=1,Object.defineProperty(Wp,"__esModule",{value:!0}),Wp.NodeHandlerAdapter=void 0;let u=class{constructor(o,i,t){this.targetKind=o,this.util=i,this.settings=t}getNodeQuadContextSelectionSet(o,i,t){const e={};if(o){for(const r of o.selections)if(r.kind==="Field"){const a=r;this.handleNodeQuadContextField(a,t,e,"id","subject"),this.handleNodeQuadContextField(a,t,e,"graph","graph")}}return e}handleNodeQuadContextField(o,i,t,e,r){if(!t[r]&&o.name.value===e){if(!t[r]){const a=this.util.getArgument(o.arguments,"_");if(a){const c=this.util.handleNodeValue(a.value,o.name.value,i);if(c.terms.length!==1)throw new Error(`Only single values can be set as ${e}, but got ${c.terms.length} at ${o.name.value}`);t[r]=c.terms[0],c.auxiliaryPatterns&&(t.auxiliaryPatterns||(t.auxiliaryPatterns=[]),t.auxiliaryPatterns.concat(c.auxiliaryPatterns))}}if(!t[r]){const a=this.util.nameToVariable(this.util.getFieldLabel(o),i);i.terminalVariables.push(a),t[r]=a}}}getDirectiveOutputs(o,i,t){const e=[];if(o)for(const r of o){const a=this.util.handleDirectiveNode({directive:r,fieldLabel:i},t);if(a){if(a.ignore)return null;e.push(a)}}return e}handleDirectiveOutputs(o,i){for(const t of o){if(t.ignore)return this.util.operationFactory.createBgp([]);t.operationOverrider&&(i=t.operationOverrider(i))}return i}};return Wp.NodeHandlerAdapter=u,Wp}var Yp={},Y4;function IO(){if(Y4)return Yp;Y4=1,Object.defineProperty(Yp,"__esModule",{value:!0}),Yp.NodeHandlerDefinitionAdapter=void 0;const u=n3();let n=class extends u.NodeHandlerAdapter{constructor(i,t,e){super(i,t,e)}};return Yp.NodeHandlerDefinitionAdapter=n,Yp}var Zp={},Z4;function SW(){if(Z4)return Zp;Z4=1,Object.defineProperty(Zp,"__esModule",{value:!0}),Zp.NodeHandlerDefinitionFragment=void 0;const u=IO();let n=class extends u.NodeHandlerDefinitionAdapter{constructor(i,t){super("FragmentDefinition",i,t)}handle(i,t){throw new Error("Illegal state: fragment definitions must be indexed and removed before processing")}};return Zp.NodeHandlerDefinitionFragment=n,Zp}var e0={},eP;function OW(){if(eP)return e0;eP=1,Object.defineProperty(e0,"__esModule",{value:!0}),e0.NodeHandlerDefinitionOperation=void 0;const u=IO();let n=class extends u.NodeHandlerDefinitionAdapter{constructor(i,t){super("OperationDefinition",i,t)}handle(i,t){if(i.operation!=="query")throw new Error("Unsupported definition operation: "+i.operation);if(i.variableDefinitions)for(const a of i.variableDefinitions){const c=a.variable.name.value;a.defaultValue&&(t.variablesDict[c]||(t.variablesDict[c]=a.defaultValue));let s=a.type;const d=s.kind==="NonNullType";d&&(s=s.type);const l=s.kind==="ListType";l&&(s=s.type);const f=s.name.value;t.variablesMetaDict[c]={mandatory:d,list:l,type:f}}const e=this.getDirectiveOutputs(i.directives,i.name?i.name.value:"",t);if(!e)return this.util.operationFactory.createBgp([]);const r=this.util.joinOperations(i.selectionSet.selections.map(a=>this.util.handleNode(a,t)));return this.handleDirectiveOutputs(e,r)}};return e0.NodeHandlerDefinitionOperation=n,e0}var t0={},tP;function AW(){if(tP)return t0;tP=1,Object.defineProperty(t0,"__esModule",{value:!0}),t0.NodeHandlerDocument=void 0;const u=st(),n=n3();let o=class extends n.NodeHandlerAdapter{constructor(t,e){super("Document",t,e)}handle(t,e){const r=t.definitions.map(c=>{const s=this.getNodeQuadContextDefinitionNode(c,Object.assign(Object.assign({},e),{ignoreUnknownVariables:!0})),d=Object.assign(Object.assign({},e),{graph:s.graph||e.graph,subject:s.subject||this.util.dataFactory.blankNode()});let l=this.util.handleNode(c,d);return s&&s.auxiliaryPatterns&&(l=this.util.joinOperations([l,this.util.operationFactory.createBgp(s.auxiliaryPatterns)])),l}),a=this.util.operationFactory.createProject(r.length===1?r[0]:this.util.operationFactory.createUnion(r),e.terminalVariables);return this.translateBlankNodesToVariables(a)}getNodeQuadContextDefinitionNode(t,e){if(t.kind==="OperationDefinition")return this.getNodeQuadContextSelectionSet(t.selectionSet,t.name?t.name.value:"",e);throw new Error(`Unsupported definition: ${t.kind}`)}translateBlankNodesToVariables(t){const e=this,r={},a=Array.from(t.variables).reduce((s,d)=>(s[d.value]=!0,s),{});return u.Util.mapOperation(t,{path:(s,d)=>({recurse:!1,result:d.createPath(c(s.subject),s.predicate,c(s.object),c(s.graph))}),pattern:(s,d)=>({recurse:!1,result:d.createPattern(c(s.subject),c(s.predicate),c(s.object),c(s.graph))})});function c(s){if(s.termType==="BlankNode"){let d=r[s.value];return d||(d=u.Util.createUniqueVariable(s.value,a,e.util.dataFactory),a[d.value]=!0,r[s.value]=d),d}return s}}};return t0.NodeHandlerDocument=o,t0}var r0={},rP;function i3(){if(rP)return r0;rP=1,Object.defineProperty(r0,"__esModule",{value:!0}),r0.NodeHandlerSelectionAdapter=void 0;const u=st(),n=Cp(),o=n3();let i=class extends o.NodeHandlerAdapter{constructor(e,r,a){super(e,r,a)}getNodeQuadContextFieldNode(e,r,a){return this.getNodeQuadContextSelectionSet(e.selectionSet,r,Object.assign(Object.assign({},a),{path:this.util.appendFieldToPath(a.path,r)}))}fieldToOperation(e,r,a,c){const s=a;let d=0,l;if((r.name.value==="id"||r.name.value==="graph")&&(a=!1,r.arguments))for(const v of r.arguments)v.name.value==="_"&&this.util.handleNodeValue(v.value,r.name.value,e);const f=this.util.getFieldLabel(r);if(e.singularizeState===n.SingularizeState.SINGLE&&(e.singularizeVariables[this.util.nameToVariable(f,e).value]=!0),a){const v=this.handleMetaField(e,f,c);if(v)return v}const h=c?[this.util.operationFactory.createBgp(c)]:[],p=this.getNodeQuadContextFieldNode(r,f,e);let y=p.subject||this.util.nameToVariable(f,e),_=p.graph||e.graph;p.auxiliaryPatterns&&h.push(this.util.operationFactory.createBgp(p.auxiliaryPatterns));let b=!0,m=null;if(a&&r.arguments&&r.arguments.length){for(const v of r.arguments)if(v.name.value==="_"){const S=this.util.handleNodeValue(v.value,r.name.value,e);m=S.terms,h.push(this.util.operationFactory.createBgp(S.terms.map(F=>this.util.createQuadPattern(e.subject,r.name,F,e.graph,e.context)))),S.auxiliaryPatterns&&h.push(this.util.operationFactory.createBgp(S.auxiliaryPatterns)),a=!1;break}else if(v.name.value==="graph"){const S=this.util.handleNodeValue(v.value,r.name.value,e);if(S.terms.length!==1)throw new Error(`Only single values can be set as graph, but got ${S.terms.length} at ${r.name.value}`);_=S.terms[0],e=Object.assign(Object.assign({},e),{graph:_}),S.auxiliaryPatterns&&h.push(this.util.operationFactory.createBgp(S.auxiliaryPatterns));break}else if(v.name.value==="alt"){let S=v.value;S.kind!=="ListValue"&&(S={kind:"ListValue",values:[S]}),h.push(this.util.createQuadPath(e.subject,r.name,S,y,e.graph,e.context)),b=!1;break}}if(a&&b&&h.push(this.util.operationFactory.createBgp([this.util.createQuadPattern(e.subject,r.name,y,e.graph,e.context)])),r.arguments&&r.arguments.length){for(const v of r.arguments)if(!(v.name.value==="_"||v.name.value==="graph"||v.name.value==="alt"))if(v.name.value==="first"){if(v.value.kind!=="IntValue")throw new Error("Invalid value type for 'first' argument: "+v.value.kind);l=parseInt(v.value.value,10)}else if(v.name.value==="offset"){if(v.value.kind!=="IntValue")throw new Error("Invalid value type for 'offset' argument: "+v.value.kind);d=parseInt(v.value.value,10)}else{const S=this.util.handleNodeValue(v.value,v.name.value,e);h.push(this.util.operationFactory.createBgp(S.terms.map(F=>this.util.createQuadPattern(y,v.name,F,e.graph,e.context)))),S.auxiliaryPatterns&&h.push(this.util.operationFactory.createBgp(S.auxiliaryPatterns))}}const g=this.getDirectiveOutputs(r.directives,f,e);if(!g)return this.util.operationFactory.createBgp([]);let T=this.util.joinOperations(h);if(r.selectionSet&&r.selectionSet.selections.length){if(m){if(m.length!==1)throw new Error(`Only single values can be set as id, but got ${m.length} at ${r.name.value}`);y=m[0]}const v=Object.assign(Object.assign(Object.assign({},e),s?{path:this.util.appendFieldToPath(e.path,f)}:{}),{graph:_,subject:s?y:e.subject});let S=!1;const F=r.selectionSet.selections.filter(O=>O.kind==="Field"&&O.name.value==="totalCount"?(S=!0,!1):!0);let M=this.util.joinOperations(h.concat(F.map(O=>this.util.handleNode(O,v))));if(S){const O=this.util.dataFactory.variable("var"+this.settings.expressionVariableCounter++),w=this.util.dataFactory.variable(y.value+this.settings.variableDelimiter+"totalCount"),E=this.util.operationFactory.createBoundAggregate(O,"count",this.util.operationFactory.createTermExpression(y),!1),R=this.util.operationFactory.createProject(this.util.operationFactory.createExtend(this.util.operationFactory.createGroup(T,[],[E]),w,this.util.operationFactory.createTermExpression(O)),[w]);e.terminalVariables.push(w),F.length?M=this.util.operationFactory.createJoin([this.util.operationFactory.createProject(M,[]),R]):M=R}T=M}else a&&y.termType==="Variable"&&e.terminalVariables.push(y);return(d||l)&&(T=this.util.operationFactory.createSlice(this.util.operationFactory.createProject(T,u.Util.inScopeVariables(T)),d,l)),this.handleDirectiveOutputs(g,T)}handleMetaField(e,r,a){if(r==="__typename"){const c=this.util.nameToVariable(r,e);return e.terminalVariables.push(c),this.util.operationFactory.createBgp([this.util.operationFactory.createPattern(e.subject,this.util.dataFactory.namedNode("http://www.w3.org/1999/02/22-rdf-syntax-ns#type"),this.util.nameToVariable(r,e),e.graph)].concat(a||[]))}}};return r0.NodeHandlerSelectionAdapter=i,r0}var n0={},nP;function EW(){if(nP)return n0;nP=1,Object.defineProperty(n0,"__esModule",{value:!0}),n0.NodeHandlerSelectionField=void 0;const u=i3();let n=class extends u.NodeHandlerSelectionAdapter{constructor(i,t){super("Field",i,t)}handle(i,t){return this.fieldToOperation(t,i,!0)}};return n0.NodeHandlerSelectionField=n,n0}var i0={},iP;function xW(){if(iP)return i0;iP=1,Object.defineProperty(i0,"__esModule",{value:!0}),i0.NodeHandlerSelectionFragmentSpread=void 0;const u=i3();let n=class extends u.NodeHandlerSelectionAdapter{constructor(i,t){super("FragmentSpread",i,t)}handle(i,t){const e=t.fragmentDefinitions[i.name.value];if(!e)throw new Error("Undefined fragment definition: "+i.name.value);const r={alias:void 0,arguments:void 0,directives:e.directives,kind:"Field",name:i.name,selectionSet:e.selectionSet},a=[this.util.newTypePattern(t.subject,e.typeCondition,t)];return this.util.operationFactory.createLeftJoin(this.util.operationFactory.createBgp([]),this.fieldToOperation(t,r,!1,a))}};return i0.NodeHandlerSelectionFragmentSpread=n,i0}var a0={},aP;function RW(){if(aP)return a0;aP=1,Object.defineProperty(a0,"__esModule",{value:!0}),a0.NodeHandlerSelectionInlineFragment=void 0;const u=i3();let n=class extends u.NodeHandlerSelectionAdapter{constructor(i,t){super("InlineFragment",i,t)}handle(i,t){const e={alias:void 0,arguments:void 0,directives:i.directives,kind:"Field",name:{kind:"Name",value:t.subject.value},selectionSet:i.selectionSet},r=i.typeCondition?[this.util.newTypePattern(t.subject,i.typeCondition,t)]:[];return this.util.operationFactory.createLeftJoin(this.util.operationFactory.createBgp([]),this.fieldToOperation(t,e,!1,r))}};return a0.NodeHandlerSelectionInlineFragment=n,a0}var uP;function oP(){return uP||(uP=1,(function(u){var n=ru&&ru.__createBinding||(Object.create?(function(i,t,e,r){r===void 0&&(r=e);var a=Object.getOwnPropertyDescriptor(t,e);(!a||("get"in a?!t.__esModule:a.writable||a.configurable))&&(a={enumerable:!0,get:function(){return t[e]}}),Object.defineProperty(i,r,a)}):(function(i,t,e,r){r===void 0&&(r=e),i[r]=t[e]})),o=ru&&ru.__exportStar||function(i,t){for(var e in i)e!=="default"&&!Object.prototype.hasOwnProperty.call(t,e)&&n(t,i,e)};Object.defineProperty(u,"__esModule",{value:!0}),o(B4(),u),o(wW(),u),o(n3(),u),o(IO(),u),o(SW(),u),o(OW(),u),o(AW(),u),o(i3(),u),o(EW(),u),o(xW(),u),o(RW(),u)})(ru)),ru}var au={},sP=typeof Symbol=="function"&&Symbol.toStringTag!=null?Symbol.toStringTag:"@@toStringTag",PO=typeof Symbol=="function"&&typeof Symbol.for=="function"?Symbol.for("nodejs.util.inspect.custom"):void 0;function a3(u){"@babel/helpers - typeof";return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?a3=function(o){return typeof o}:a3=function(o){return o&&typeof Symbol=="function"&&o.constructor===Symbol&&o!==Symbol.prototype?"symbol":typeof o},a3(u)}var FW=10,cP=2;function dP(u){return u3(u,[])}function u3(u,n){switch(a3(u)){case"string":return JSON.stringify(u);case"function":return u.name?"[function ".concat(u.name,"]"):"[function]";case"object":return u===null?"null":IW(u,n);default:return String(u)}}function IW(u,n){if(n.indexOf(u)!==-1)return"[Circular]";var o=[].concat(n,[u]),i=NW(u);if(i!==void 0){var t=i.call(u);if(t!==u)return typeof t=="string"?t:u3(t,o)}else if(Array.isArray(u))return DW(u,o);return PW(u,o)}function PW(u,n){var o=Object.keys(u);if(o.length===0)return"{}";if(n.length>cP)return"["+jW(u)+"]";var i=o.map(function(t){var e=u3(u[t],n);return t+": "+e});return"{ "+i.join(", ")+" }"}function DW(u,n){if(u.length===0)return"[]";if(n.length>cP)return"[Array]";for(var o=Math.min(FW,u.length),i=u.length-o,t=[],e=0;e<o;++e)t.push(u3(u[e],n));return i===1?t.push("... 1 more item"):i>1&&t.push("... ".concat(i," more items")),"["+t.join(", ")+"]"}function NW(u){var n=u[String(PO)];if(typeof n=="function")return n;if(typeof u.inspect=="function")return u.inspect}function jW(u){var n=Object.prototype.toString.call(u).replace(/^\[object /,"").replace(/]$/,"");if(n==="Object"&&typeof u.constructor=="function"){var o=u.constructor.name;if(typeof o=="string"&&o!=="")return o}return n}function o3(u,n){var o=!!u;if(!o)throw new Error(n)}var LW=(function(n,o){return n instanceof o});function MW(u,n){for(var o=0;o<n.length;o++){var i=n[o];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(u,i.key,i)}}function qW(u,n,o){return n&&MW(u.prototype,n),u}var DO=(function(){function u(n){var o=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"GraphQL request",i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{line:1,column:1};typeof n=="string"||o3(0,"Body must be a string. Received: ".concat(dP(n),".")),this.body=n,this.name=o,this.locationOffset=i,this.locationOffset.line>0||o3(0,"line in locationOffset is 1-indexed and must be positive."),this.locationOffset.column>0||o3(0,"column in locationOffset is 1-indexed and must be positive.")}return qW(u,[{key:sP,get:function(){return"Source"}}]),u})();function CW(u){return LW(u,DO)}function s3(u,n){for(var o=/\r\n|[\n\r]/g,i=1,t=n+1,e;(e=o.exec(u.body))&&e.index<n;)i+=1,t=n+1-(e.index+e[0].length);return{line:i,column:t}}function lP(u){return NO(u.source,s3(u.source,u.start))}function NO(u,n){var o=u.locationOffset.column-1,i=c3(o)+u.body,t=n.line-1,e=u.locationOffset.line-1,r=n.line+e,a=n.line===1?o:0,c=n.column+a,s="".concat(u.name,":").concat(r,":").concat(c,`
`),d=i.split(/\r\n|[\n\r]/g),l=d[t];if(l.length>120){for(var f=Math.floor(c/80),h=c%80,p=[],y=0;y<l.length;y+=80)p.push(l.slice(y,y+80));return s+fP([["".concat(r),p[0]]].concat(p.slice(1,f+1).map(function(_){return["",_]}),[[" ",c3(h-1)+"^"],["",p[f+1]]]))}return s+fP([["".concat(r-1),d[t-1]],["".concat(r),l],["",c3(c-1)+"^"],["".concat(r+1),d[t+1]]])}function fP(u){var n=u.filter(function(i){i[0];var t=i[1];return t!==void 0}),o=Math.max.apply(Math,n.map(function(i){var t=i[0];return t.length}));return n.map(function(i){var t=i[0],e=i[1];return BW(o,t)+(e?" | "+e:" |")}).join(`
`)}function c3(u){return Array(u+1).join(" ")}function BW(u,n){return c3(u-n.length)+n}var Ke=Object.freeze({NAME:"Name",DOCUMENT:"Document",OPERATION_DEFINITION:"OperationDefinition",VARIABLE_DEFINITION:"VariableDefinition",SELECTION_SET:"SelectionSet",FIELD:"Field",ARGUMENT:"Argument",FRAGMENT_SPREAD:"FragmentSpread",INLINE_FRAGMENT:"InlineFragment",FRAGMENT_DEFINITION:"FragmentDefinition",VARIABLE:"Variable",INT:"IntValue",FLOAT:"FloatValue",STRING:"StringValue",BOOLEAN:"BooleanValue",NULL:"NullValue",ENUM:"EnumValue",LIST:"ListValue",OBJECT:"ObjectValue",OBJECT_FIELD:"ObjectField",DIRECTIVE:"Directive",NAMED_TYPE:"NamedType",LIST_TYPE:"ListType",NON_NULL_TYPE:"NonNullType",SCHEMA_DEFINITION:"SchemaDefinition",OPERATION_TYPE_DEFINITION:"OperationTypeDefinition",SCALAR_TYPE_DEFINITION:"ScalarTypeDefinition",OBJECT_TYPE_DEFINITION:"ObjectTypeDefinition",FIELD_DEFINITION:"FieldDefinition",INPUT_VALUE_DEFINITION:"InputValueDefinition",INTERFACE_TYPE_DEFINITION:"InterfaceTypeDefinition",UNION_TYPE_DEFINITION:"UnionTypeDefinition",ENUM_TYPE_DEFINITION:"EnumTypeDefinition",ENUM_VALUE_DEFINITION:"EnumValueDefinition",INPUT_OBJECT_TYPE_DEFINITION:"InputObjectTypeDefinition",DIRECTIVE_DEFINITION:"DirectiveDefinition",SCHEMA_EXTENSION:"SchemaExtension",SCALAR_TYPE_EXTENSION:"ScalarTypeExtension",OBJECT_TYPE_EXTENSION:"ObjectTypeExtension",INTERFACE_TYPE_EXTENSION:"InterfaceTypeExtension",UNION_TYPE_EXTENSION:"UnionTypeExtension",ENUM_TYPE_EXTENSION:"EnumTypeExtension",INPUT_OBJECT_TYPE_EXTENSION:"InputObjectTypeExtension"}),je=Object.freeze({SOF:"<SOF>",EOF:"<EOF>",BANG:"!",DOLLAR:"$",AMP:"&",PAREN_L:"(",PAREN_R:")",SPREAD:"...",COLON:":",EQUALS:"=",AT:"@",BRACKET_L:"[",BRACKET_R:"]",BRACE_L:"{",PIPE:"|",BRACE_R:"}",NAME:"Name",INT:"Int",FLOAT:"Float",STRING:"String",BLOCK_STRING:"BlockString",COMMENT:"Comment"});function d3(u){"@babel/helpers - typeof";return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?d3=function(o){return typeof o}:d3=function(o){return o&&typeof Symbol=="function"&&o.constructor===Symbol&&o!==Symbol.prototype?"symbol":typeof o},d3(u)}function $W(u){return d3(u)=="object"&&u!==null}function l3(u){"@babel/helpers - typeof";return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?l3=function(o){return typeof o}:l3=function(o){return o&&typeof Symbol=="function"&&o.constructor===Symbol&&o!==Symbol.prototype?"symbol":typeof o},l3(u)}function hP(u,n){var o=Object.keys(u);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(u);n&&(i=i.filter(function(t){return Object.getOwnPropertyDescriptor(u,t).enumerable})),o.push.apply(o,i)}return o}function UW(u){for(var n=1;n<arguments.length;n++){var o=arguments[n]!=null?arguments[n]:{};n%2?hP(Object(o),!0).forEach(function(i){VW(u,i,o[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(u,Object.getOwnPropertyDescriptors(o)):hP(Object(o)).forEach(function(i){Object.defineProperty(u,i,Object.getOwnPropertyDescriptor(o,i))})}return u}function VW(u,n,o){return n in u?Object.defineProperty(u,n,{value:o,enumerable:!0,configurable:!0,writable:!0}):u[n]=o,u}function QW(u,n){if(!(u instanceof n))throw new TypeError("Cannot call a class as a function")}function HW(u,n){for(var o=0;o<n.length;o++){var i=n[o];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(u,i.key,i)}}function GW(u,n,o){return n&&HW(u.prototype,n),u}function zW(u,n){if(typeof n!="function"&&n!==null)throw new TypeError("Super expression must either be null or a function");u.prototype=Object.create(n&&n.prototype,{constructor:{value:u,writable:!0,configurable:!0}}),n&&o0(u,n)}function XW(u){var n=yP();return function(){var i=s0(u),t;if(n){var e=s0(this).constructor;t=Reflect.construct(i,arguments,e)}else t=i.apply(this,arguments);return pP(this,t)}}function pP(u,n){return n&&(l3(n)==="object"||typeof n=="function")?n:u0(u)}function u0(u){if(u===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return u}function jO(u){var n=typeof Map=="function"?new Map:void 0;return jO=function(i){if(i===null||!JW(i))return i;if(typeof i!="function")throw new TypeError("Super expression must either be null or a function");if(typeof n<"u"){if(n.has(i))return n.get(i);n.set(i,t)}function t(){return f3(i,arguments,s0(this).constructor)}return t.prototype=Object.create(i.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),o0(t,i)},jO(u)}function f3(u,n,o){return yP()?f3=Reflect.construct:f3=function(t,e,r){var a=[null];a.push.apply(a,e);var c=Function.bind.apply(t,a),s=new c;return r&&o0(s,r.prototype),s},f3.apply(null,arguments)}function yP(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch{return!1}}function JW(u){return Function.toString.call(u).indexOf("[native code]")!==-1}function o0(u,n){return o0=Object.setPrototypeOf||function(i,t){return i.__proto__=t,i},o0(u,n)}function s0(u){return s0=Object.setPrototypeOf?Object.getPrototypeOf:function(o){return o.__proto__||Object.getPrototypeOf(o)},s0(u)}var KW=(function(u){zW(o,u);var n=XW(o);function o(i,t,e,r,a,c,s){var d,l,f,h;QW(this,o),h=n.call(this,i),h.name="GraphQLError",h.originalError=c??void 0,h.nodes=bP(Array.isArray(t)?t:t?[t]:void 0);for(var p=[],y=0,_=(b=h.nodes)!==null&&b!==void 0?b:[];y<_.length;y++){var b,m=_[y],g=m.loc;g!=null&&p.push(g)}p=bP(p),h.source=e??((d=p)===null||d===void 0?void 0:d[0].source),h.positions=r??((l=p)===null||l===void 0?void 0:l.map(function(v){return v.start})),h.locations=r&&e?r.map(function(v){return s3(e,v)}):(f=p)===null||f===void 0?void 0:f.map(function(v){return s3(v.source,v.start)}),h.path=a??void 0;var T=c==null?void 0:c.extensions;return s==null&&$W(T)?h.extensions=UW({},T):h.extensions=s??{},Object.defineProperties(u0(h),{message:{enumerable:!0},locations:{enumerable:h.locations!=null},path:{enumerable:h.path!=null},extensions:{enumerable:h.extensions!=null&&Object.keys(h.extensions).length>0},name:{enumerable:!1},nodes:{enumerable:!1},source:{enumerable:!1},positions:{enumerable:!1},originalError:{enumerable:!1}}),c!=null&&c.stack?(Object.defineProperty(u0(h),"stack",{value:c.stack,writable:!0,configurable:!0}),pP(h)):(Error.captureStackTrace?Error.captureStackTrace(u0(h),o):Object.defineProperty(u0(h),"stack",{value:Error().stack,writable:!0,configurable:!0}),h)}return GW(o,[{key:"toString",value:function(){return kW(this)}},{key:"toJSON",value:function(){return WW(this)}},{key:sP,get:function(){return"Object"}}]),o})(jO(Error));function bP(u){return u===void 0||u.length===0?void 0:u}function kW(u){var n=u.message;if(u.nodes)for(var o=0,i=u.nodes;o<i.length;o++){var t=i[o];t.loc&&(n+=`

`+lP(t.loc))}else if(u.source&&u.locations)for(var e=0,r=u.locations;e<r.length;e++){var a=r[e];n+=`

`+NO(u.source,a)}return n}function WW(u){var n;u||o3(0,"Received null or undefined error.");var o=(n=u.message)!==null&&n!==void 0?n:"An unknown error occurred.",i=u.locations,t=u.path,e=u.extensions;return e&&Object.keys(e).length>0?{message:o,locations:i,path:t,extensions:e}:{message:o,locations:i,path:t}}function nn(u,n,o){return new KW("Syntax Error: ".concat(o),void 0,u,[n])}function YW(u,n){var o=!!u;if(!o)throw new Error("Unexpected invariant triggered.")}function _P(u){var n=u.prototype.toJSON;typeof n=="function"||YW(0),u.prototype.inspect=n,PO&&(u.prototype[PO]=n)}var LO=(function(){function u(o,i,t){this.start=o.start,this.end=i.end,this.startToken=o,this.endToken=i,this.source=t}var n=u.prototype;return n.toJSON=function(){return{start:this.start,end:this.end}},u})();_P(LO);var Zt=(function(){function u(o,i,t,e,r,a,c){this.kind=o,this.start=i,this.end=t,this.line=e,this.column=r,this.value=c,this.prev=a,this.next=null}var n=u.prototype;return n.toJSON=function(){return{kind:this.kind,value:this.value,line:this.line,column:this.column}},u})();_P(Zt);function gP(u){return u!=null&&typeof u.kind=="string"}function ZW(u){var n=u.split(/\r\n|[\n\r]/g),o=eY(u);if(o!==0)for(var i=1;i<n.length;i++)n[i]=n[i].slice(o);for(var t=0;t<n.length&&mP(n[t]);)++t;for(var e=n.length;e>t&&mP(n[e-1]);)--e;return n.slice(t,e).join(`
`)}function mP(u){for(var n=0;n<u.length;++n)if(u[n]!==" "&&u[n]!=="	")return!1;return!0}function eY(u){for(var n,o=!0,i=!0,t=0,e=null,r=0;r<u.length;++r)switch(u.charCodeAt(r)){case 13:u.charCodeAt(r+1)===10&&++r;case 10:o=!1,i=!0,t=0;break;case 9:case 32:++t;break;default:i&&!o&&(e===null||t<e)&&(e=t),i=!1}return(n=e)!==null&&n!==void 0?n:0}function tY(u){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"",o=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1,i=u.indexOf(`
`)===-1,t=u[0]===" "||u[0]==="	",e=u[u.length-1]==='"',r=u[u.length-1]==="\\",a=!i||e||r||o,c="";return a&&!(i&&t)&&(c+=`
`+n),c+=n?u.replace(/\n/g,`
`+n):u,a&&(c+=`
`),'"""'+c.replace(/"""/g,'\\"""')+'"""'}var vP=(function(){function u(o){var i=new Zt(je.SOF,0,0,0,0,null);this.source=o,this.lastToken=i,this.token=i,this.line=1,this.lineStart=0}var n=u.prototype;return n.advance=function(){this.lastToken=this.token;var i=this.token=this.lookahead();return i},n.lookahead=function(){var i=this.token;if(i.kind!==je.EOF)do{var t;i=(t=i.next)!==null&&t!==void 0?t:i.next=nY(this,i)}while(i.kind===je.COMMENT);return i},u})();function rY(u){return u===je.BANG||u===je.DOLLAR||u===je.AMP||u===je.PAREN_L||u===je.PAREN_R||u===je.SPREAD||u===je.COLON||u===je.EQUALS||u===je.AT||u===je.BRACKET_L||u===je.BRACKET_R||u===je.BRACE_L||u===je.PIPE||u===je.BRACE_R}function uu(u){return isNaN(u)?je.EOF:u<127?JSON.stringify(String.fromCharCode(u)):'"\\u'.concat(("00"+u.toString(16).toUpperCase()).slice(-4),'"')}function nY(u,n){for(var o=u.source,i=o.body,t=i.length,e=n.end;e<t;){var r=i.charCodeAt(e),a=u.line,c=1+e-u.lineStart;switch(r){case 65279:case 9:case 32:case 44:++e;continue;case 10:++e,++u.line,u.lineStart=e;continue;case 13:i.charCodeAt(e+1)===10?e+=2:++e,++u.line,u.lineStart=e;continue;case 33:return new Zt(je.BANG,e,e+1,a,c,n);case 35:return aY(o,e,a,c,n);case 36:return new Zt(je.DOLLAR,e,e+1,a,c,n);case 38:return new Zt(je.AMP,e,e+1,a,c,n);case 40:return new Zt(je.PAREN_L,e,e+1,a,c,n);case 41:return new Zt(je.PAREN_R,e,e+1,a,c,n);case 46:if(i.charCodeAt(e+1)===46&&i.charCodeAt(e+2)===46)return new Zt(je.SPREAD,e,e+3,a,c,n);break;case 58:return new Zt(je.COLON,e,e+1,a,c,n);case 61:return new Zt(je.EQUALS,e,e+1,a,c,n);case 64:return new Zt(je.AT,e,e+1,a,c,n);case 91:return new Zt(je.BRACKET_L,e,e+1,a,c,n);case 93:return new Zt(je.BRACKET_R,e,e+1,a,c,n);case 123:return new Zt(je.BRACE_L,e,e+1,a,c,n);case 124:return new Zt(je.PIPE,e,e+1,a,c,n);case 125:return new Zt(je.BRACE_R,e,e+1,a,c,n);case 34:return i.charCodeAt(e+1)===34&&i.charCodeAt(e+2)===34?sY(o,e,a,c,n,u):oY(o,e,a,c,n);case 45:case 48:case 49:case 50:case 51:case 52:case 53:case 54:case 55:case 56:case 57:return uY(o,e,r,a,c,n);case 65:case 66:case 67:case 68:case 69:case 70:case 71:case 72:case 73:case 74:case 75:case 76:case 77:case 78:case 79:case 80:case 81:case 82:case 83:case 84:case 85:case 86:case 87:case 88:case 89:case 90:case 95:case 97:case 98:case 99:case 100:case 101:case 102:case 103:case 104:case 105:case 106:case 107:case 108:case 109:case 110:case 111:case 112:case 113:case 114:case 115:case 116:case 117:case 118:case 119:case 120:case 121:case 122:return dY(o,e,a,c,n)}throw nn(o,e,iY(r))}var s=u.line,d=1+e-u.lineStart;return new Zt(je.EOF,t,t,s,d,n)}function iY(u){return u<32&&u!==9&&u!==10&&u!==13?"Cannot contain the invalid character ".concat(uu(u),"."):u===39?`Unexpected single quote character ('), did you mean to use a double quote (")?`:"Cannot parse the unexpected character ".concat(uu(u),".")}function aY(u,n,o,i,t){var e=u.body,r,a=n;do r=e.charCodeAt(++a);while(!isNaN(r)&&(r>31||r===9));return new Zt(je.COMMENT,n,a,o,i,t,e.slice(n+1,a))}function uY(u,n,o,i,t,e){var r=u.body,a=o,c=n,s=!1;if(a===45&&(a=r.charCodeAt(++c)),a===48){if(a=r.charCodeAt(++c),a>=48&&a<=57)throw nn(u,c,"Invalid number, unexpected digit after 0: ".concat(uu(a),"."))}else c=MO(u,c,a),a=r.charCodeAt(c);if(a===46&&(s=!0,a=r.charCodeAt(++c),c=MO(u,c,a),a=r.charCodeAt(c)),(a===69||a===101)&&(s=!0,a=r.charCodeAt(++c),(a===43||a===45)&&(a=r.charCodeAt(++c)),c=MO(u,c,a),a=r.charCodeAt(c)),a===46||lY(a))throw nn(u,c,"Invalid number, expected digit but got: ".concat(uu(a),"."));return new Zt(s?je.FLOAT:je.INT,n,c,i,t,e,r.slice(n,c))}function MO(u,n,o){var i=u.body,t=n,e=o;if(e>=48&&e<=57){do e=i.charCodeAt(++t);while(e>=48&&e<=57);return t}throw nn(u,t,"Invalid number, expected digit but got: ".concat(uu(e),"."))}function oY(u,n,o,i,t){for(var e=u.body,r=n+1,a=r,c=0,s="";r<e.length&&!isNaN(c=e.charCodeAt(r))&&c!==10&&c!==13;){if(c===34)return s+=e.slice(a,r),new Zt(je.STRING,n,r+1,o,i,t,s);if(c<32&&c!==9)throw nn(u,r,"Invalid character within String: ".concat(uu(c),"."));if(++r,c===92){switch(s+=e.slice(a,r-1),c=e.charCodeAt(r),c){case 34:s+='"';break;case 47:s+="/";break;case 92:s+="\\";break;case 98:s+="\b";break;case 102:s+="\f";break;case 110:s+=`
`;break;case 114:s+="\r";break;case 116:s+="	";break;case 117:{var d=cY(e.charCodeAt(r+1),e.charCodeAt(r+2),e.charCodeAt(r+3),e.charCodeAt(r+4));if(d<0){var l=e.slice(r+1,r+5);throw nn(u,r,"Invalid character escape sequence: \\u".concat(l,"."))}s+=String.fromCharCode(d),r+=4;break}default:throw nn(u,r,"Invalid character escape sequence: \\".concat(String.fromCharCode(c),"."))}++r,a=r}}throw nn(u,r,"Unterminated string.")}function sY(u,n,o,i,t,e){for(var r=u.body,a=n+3,c=a,s=0,d="";a<r.length&&!isNaN(s=r.charCodeAt(a));){if(s===34&&r.charCodeAt(a+1)===34&&r.charCodeAt(a+2)===34)return d+=r.slice(c,a),new Zt(je.BLOCK_STRING,n,a+3,o,i,t,ZW(d));if(s<32&&s!==9&&s!==10&&s!==13)throw nn(u,a,"Invalid character within String: ".concat(uu(s),"."));s===10?(++a,++e.line,e.lineStart=a):s===13?(r.charCodeAt(a+1)===10?a+=2:++a,++e.line,e.lineStart=a):s===92&&r.charCodeAt(a+1)===34&&r.charCodeAt(a+2)===34&&r.charCodeAt(a+3)===34?(d+=r.slice(c,a)+'"""',a+=4,c=a):++a}throw nn(u,a,"Unterminated string.")}function cY(u,n,o,i){return h3(u)<<12|h3(n)<<8|h3(o)<<4|h3(i)}function h3(u){return u>=48&&u<=57?u-48:u>=65&&u<=70?u-55:u>=97&&u<=102?u-87:-1}function dY(u,n,o,i,t){for(var e=u.body,r=e.length,a=n+1,c=0;a!==r&&!isNaN(c=e.charCodeAt(a))&&(c===95||c>=48&&c<=57||c>=65&&c<=90||c>=97&&c<=122);)++a;return new Zt(je.NAME,n,a,o,i,t,e.slice(n,a))}function lY(u){return u===95||u>=65&&u<=90||u>=97&&u<=122}var TP=Object.freeze({QUERY:"QUERY",MUTATION:"MUTATION",SUBSCRIPTION:"SUBSCRIPTION",FIELD:"FIELD",FRAGMENT_DEFINITION:"FRAGMENT_DEFINITION",FRAGMENT_SPREAD:"FRAGMENT_SPREAD",INLINE_FRAGMENT:"INLINE_FRAGMENT",VARIABLE_DEFINITION:"VARIABLE_DEFINITION",SCHEMA:"SCHEMA",SCALAR:"SCALAR",OBJECT:"OBJECT",FIELD_DEFINITION:"FIELD_DEFINITION",ARGUMENT_DEFINITION:"ARGUMENT_DEFINITION",INTERFACE:"INTERFACE",UNION:"UNION",ENUM:"ENUM",ENUM_VALUE:"ENUM_VALUE",INPUT_OBJECT:"INPUT_OBJECT",INPUT_FIELD_DEFINITION:"INPUT_FIELD_DEFINITION"});function fY(u,n){var o=new qO(u,n);return o.parseDocument()}function hY(u,n){var o=new qO(u,n);o.expectToken(je.SOF);var i=o.parseValueLiteral(!1);return o.expectToken(je.EOF),i}function pY(u,n){var o=new qO(u,n);o.expectToken(je.SOF);var i=o.parseTypeReference();return o.expectToken(je.EOF),i}var qO=(function(){function u(o,i){var t=CW(o)?o:new DO(o);this._lexer=new vP(t),this._options=i}var n=u.prototype;return n.parseName=function(){var i=this.expectToken(je.NAME);return{kind:Ke.NAME,value:i.value,loc:this.loc(i)}},n.parseDocument=function(){var i=this._lexer.token;return{kind:Ke.DOCUMENT,definitions:this.many(je.SOF,this.parseDefinition,je.EOF),loc:this.loc(i)}},n.parseDefinition=function(){if(this.peek(je.NAME))switch(this._lexer.token.value){case"query":case"mutation":case"subscription":return this.parseOperationDefinition();case"fragment":return this.parseFragmentDefinition();case"schema":case"scalar":case"type":case"interface":case"union":case"enum":case"input":case"directive":return this.parseTypeSystemDefinition();case"extend":return this.parseTypeSystemExtension()}else{if(this.peek(je.BRACE_L))return this.parseOperationDefinition();if(this.peekDescription())return this.parseTypeSystemDefinition()}throw this.unexpected()},n.parseOperationDefinition=function(){var i=this._lexer.token;if(this.peek(je.BRACE_L))return{kind:Ke.OPERATION_DEFINITION,operation:"query",name:void 0,variableDefinitions:[],directives:[],selectionSet:this.parseSelectionSet(),loc:this.loc(i)};var t=this.parseOperationType(),e;return this.peek(je.NAME)&&(e=this.parseName()),{kind:Ke.OPERATION_DEFINITION,operation:t,name:e,variableDefinitions:this.parseVariableDefinitions(),directives:this.parseDirectives(!1),selectionSet:this.parseSelectionSet(),loc:this.loc(i)}},n.parseOperationType=function(){var i=this.expectToken(je.NAME);switch(i.value){case"query":return"query";case"mutation":return"mutation";case"subscription":return"subscription"}throw this.unexpected(i)},n.parseVariableDefinitions=function(){return this.optionalMany(je.PAREN_L,this.parseVariableDefinition,je.PAREN_R)},n.parseVariableDefinition=function(){var i=this._lexer.token;return{kind:Ke.VARIABLE_DEFINITION,variable:this.parseVariable(),type:(this.expectToken(je.COLON),this.parseTypeReference()),defaultValue:this.expectOptionalToken(je.EQUALS)?this.parseValueLiteral(!0):void 0,directives:this.parseDirectives(!0),loc:this.loc(i)}},n.parseVariable=function(){var i=this._lexer.token;return this.expectToken(je.DOLLAR),{kind:Ke.VARIABLE,name:this.parseName(),loc:this.loc(i)}},n.parseSelectionSet=function(){var i=this._lexer.token;return{kind:Ke.SELECTION_SET,selections:this.many(je.BRACE_L,this.parseSelection,je.BRACE_R),loc:this.loc(i)}},n.parseSelection=function(){return this.peek(je.SPREAD)?this.parseFragment():this.parseField()},n.parseField=function(){var i=this._lexer.token,t=this.parseName(),e,r;return this.expectOptionalToken(je.COLON)?(e=t,r=this.parseName()):r=t,{kind:Ke.FIELD,alias:e,name:r,arguments:this.parseArguments(!1),directives:this.parseDirectives(!1),selectionSet:this.peek(je.BRACE_L)?this.parseSelectionSet():void 0,loc:this.loc(i)}},n.parseArguments=function(i){var t=i?this.parseConstArgument:this.parseArgument;return this.optionalMany(je.PAREN_L,t,je.PAREN_R)},n.parseArgument=function(){var i=this._lexer.token,t=this.parseName();return this.expectToken(je.COLON),{kind:Ke.ARGUMENT,name:t,value:this.parseValueLiteral(!1),loc:this.loc(i)}},n.parseConstArgument=function(){var i=this._lexer.token;return{kind:Ke.ARGUMENT,name:this.parseName(),value:(this.expectToken(je.COLON),this.parseValueLiteral(!0)),loc:this.loc(i)}},n.parseFragment=function(){var i=this._lexer.token;this.expectToken(je.SPREAD);var t=this.expectOptionalKeyword("on");return!t&&this.peek(je.NAME)?{kind:Ke.FRAGMENT_SPREAD,name:this.parseFragmentName(),directives:this.parseDirectives(!1),loc:this.loc(i)}:{kind:Ke.INLINE_FRAGMENT,typeCondition:t?this.parseNamedType():void 0,directives:this.parseDirectives(!1),selectionSet:this.parseSelectionSet(),loc:this.loc(i)}},n.parseFragmentDefinition=function(){var i,t=this._lexer.token;return this.expectKeyword("fragment"),((i=this._options)===null||i===void 0?void 0:i.experimentalFragmentVariables)===!0?{kind:Ke.FRAGMENT_DEFINITION,name:this.parseFragmentName(),variableDefinitions:this.parseVariableDefinitions(),typeCondition:(this.expectKeyword("on"),this.parseNamedType()),directives:this.parseDirectives(!1),selectionSet:this.parseSelectionSet(),loc:this.loc(t)}:{kind:Ke.FRAGMENT_DEFINITION,name:this.parseFragmentName(),typeCondition:(this.expectKeyword("on"),this.parseNamedType()),directives:this.parseDirectives(!1),selectionSet:this.parseSelectionSet(),loc:this.loc(t)}},n.parseFragmentName=function(){if(this._lexer.token.value==="on")throw this.unexpected();return this.parseName()},n.parseValueLiteral=function(i){var t=this._lexer.token;switch(t.kind){case je.BRACKET_L:return this.parseList(i);case je.BRACE_L:return this.parseObject(i);case je.INT:return this._lexer.advance(),{kind:Ke.INT,value:t.value,loc:this.loc(t)};case je.FLOAT:return this._lexer.advance(),{kind:Ke.FLOAT,value:t.value,loc:this.loc(t)};case je.STRING:case je.BLOCK_STRING:return this.parseStringLiteral();case je.NAME:switch(this._lexer.advance(),t.value){case"true":return{kind:Ke.BOOLEAN,value:!0,loc:this.loc(t)};case"false":return{kind:Ke.BOOLEAN,value:!1,loc:this.loc(t)};case"null":return{kind:Ke.NULL,loc:this.loc(t)};default:return{kind:Ke.ENUM,value:t.value,loc:this.loc(t)}}case je.DOLLAR:if(!i)return this.parseVariable();break}throw this.unexpected()},n.parseStringLiteral=function(){var i=this._lexer.token;return this._lexer.advance(),{kind:Ke.STRING,value:i.value,block:i.kind===je.BLOCK_STRING,loc:this.loc(i)}},n.parseList=function(i){var t=this,e=this._lexer.token,r=function(){return t.parseValueLiteral(i)};return{kind:Ke.LIST,values:this.any(je.BRACKET_L,r,je.BRACKET_R),loc:this.loc(e)}},n.parseObject=function(i){var t=this,e=this._lexer.token,r=function(){return t.parseObjectField(i)};return{kind:Ke.OBJECT,fields:this.any(je.BRACE_L,r,je.BRACE_R),loc:this.loc(e)}},n.parseObjectField=function(i){var t=this._lexer.token,e=this.parseName();return this.expectToken(je.COLON),{kind:Ke.OBJECT_FIELD,name:e,value:this.parseValueLiteral(i),loc:this.loc(t)}},n.parseDirectives=function(i){for(var t=[];this.peek(je.AT);)t.push(this.parseDirective(i));return t},n.parseDirective=function(i){var t=this._lexer.token;return this.expectToken(je.AT),{kind:Ke.DIRECTIVE,name:this.parseName(),arguments:this.parseArguments(i),loc:this.loc(t)}},n.parseTypeReference=function(){var i=this._lexer.token,t;return this.expectOptionalToken(je.BRACKET_L)?(t=this.parseTypeReference(),this.expectToken(je.BRACKET_R),t={kind:Ke.LIST_TYPE,type:t,loc:this.loc(i)}):t=this.parseNamedType(),this.expectOptionalToken(je.BANG)?{kind:Ke.NON_NULL_TYPE,type:t,loc:this.loc(i)}:t},n.parseNamedType=function(){var i=this._lexer.token;return{kind:Ke.NAMED_TYPE,name:this.parseName(),loc:this.loc(i)}},n.parseTypeSystemDefinition=function(){var i=this.peekDescription()?this._lexer.lookahead():this._lexer.token;if(i.kind===je.NAME)switch(i.value){case"schema":return this.parseSchemaDefinition();case"scalar":return this.parseScalarTypeDefinition();case"type":return this.parseObjectTypeDefinition();case"interface":return this.parseInterfaceTypeDefinition();case"union":return this.parseUnionTypeDefinition();case"enum":return this.parseEnumTypeDefinition();case"input":return this.parseInputObjectTypeDefinition();case"directive":return this.parseDirectiveDefinition()}throw this.unexpected(i)},n.peekDescription=function(){return this.peek(je.STRING)||this.peek(je.BLOCK_STRING)},n.parseDescription=function(){if(this.peekDescription())return this.parseStringLiteral()},n.parseSchemaDefinition=function(){var i=this._lexer.token,t=this.parseDescription();this.expectKeyword("schema");var e=this.parseDirectives(!0),r=this.many(je.BRACE_L,this.parseOperationTypeDefinition,je.BRACE_R);return{kind:Ke.SCHEMA_DEFINITION,description:t,directives:e,operationTypes:r,loc:this.loc(i)}},n.parseOperationTypeDefinition=function(){var i=this._lexer.token,t=this.parseOperationType();this.expectToken(je.COLON);var e=this.parseNamedType();return{kind:Ke.OPERATION_TYPE_DEFINITION,operation:t,type:e,loc:this.loc(i)}},n.parseScalarTypeDefinition=function(){var i=this._lexer.token,t=this.parseDescription();this.expectKeyword("scalar");var e=this.parseName(),r=this.parseDirectives(!0);return{kind:Ke.SCALAR_TYPE_DEFINITION,description:t,name:e,directives:r,loc:this.loc(i)}},n.parseObjectTypeDefinition=function(){var i=this._lexer.token,t=this.parseDescription();this.expectKeyword("type");var e=this.parseName(),r=this.parseImplementsInterfaces(),a=this.parseDirectives(!0),c=this.parseFieldsDefinition();return{kind:Ke.OBJECT_TYPE_DEFINITION,description:t,name:e,interfaces:r,directives:a,fields:c,loc:this.loc(i)}},n.parseImplementsInterfaces=function(){var i;if(!this.expectOptionalKeyword("implements"))return[];if(((i=this._options)===null||i===void 0?void 0:i.allowLegacySDLImplementsInterfaces)===!0){var t=[];this.expectOptionalToken(je.AMP);do t.push(this.parseNamedType());while(this.expectOptionalToken(je.AMP)||this.peek(je.NAME));return t}return this.delimitedMany(je.AMP,this.parseNamedType)},n.parseFieldsDefinition=function(){var i;return((i=this._options)===null||i===void 0?void 0:i.allowLegacySDLEmptyFields)===!0&&this.peek(je.BRACE_L)&&this._lexer.lookahead().kind===je.BRACE_R?(this._lexer.advance(),this._lexer.advance(),[]):this.optionalMany(je.BRACE_L,this.parseFieldDefinition,je.BRACE_R)},n.parseFieldDefinition=function(){var i=this._lexer.token,t=this.parseDescription(),e=this.parseName(),r=this.parseArgumentDefs();this.expectToken(je.COLON);var a=this.parseTypeReference(),c=this.parseDirectives(!0);return{kind:Ke.FIELD_DEFINITION,description:t,name:e,arguments:r,type:a,directives:c,loc:this.loc(i)}},n.parseArgumentDefs=function(){return this.optionalMany(je.PAREN_L,this.parseInputValueDef,je.PAREN_R)},n.parseInputValueDef=function(){var i=this._lexer.token,t=this.parseDescription(),e=this.parseName();this.expectToken(je.COLON);var r=this.parseTypeReference(),a;this.expectOptionalToken(je.EQUALS)&&(a=this.parseValueLiteral(!0));var c=this.parseDirectives(!0);return{kind:Ke.INPUT_VALUE_DEFINITION,description:t,name:e,type:r,defaultValue:a,directives:c,loc:this.loc(i)}},n.parseInterfaceTypeDefinition=function(){var i=this._lexer.token,t=this.parseDescription();this.expectKeyword("interface");var e=this.parseName(),r=this.parseImplementsInterfaces(),a=this.parseDirectives(!0),c=this.parseFieldsDefinition();return{kind:Ke.INTERFACE_TYPE_DEFINITION,description:t,name:e,interfaces:r,directives:a,fields:c,loc:this.loc(i)}},n.parseUnionTypeDefinition=function(){var i=this._lexer.token,t=this.parseDescription();this.expectKeyword("union");var e=this.parseName(),r=this.parseDirectives(!0),a=this.parseUnionMemberTypes();return{kind:Ke.UNION_TYPE_DEFINITION,description:t,name:e,directives:r,types:a,loc:this.loc(i)}},n.parseUnionMemberTypes=function(){return this.expectOptionalToken(je.EQUALS)?this.delimitedMany(je.PIPE,this.parseNamedType):[]},n.parseEnumTypeDefinition=function(){var i=this._lexer.token,t=this.parseDescription();this.expectKeyword("enum");var e=this.parseName(),r=this.parseDirectives(!0),a=this.parseEnumValuesDefinition();return{kind:Ke.ENUM_TYPE_DEFINITION,description:t,name:e,directives:r,values:a,loc:this.loc(i)}},n.parseEnumValuesDefinition=function(){return this.optionalMany(je.BRACE_L,this.parseEnumValueDefinition,je.BRACE_R)},n.parseEnumValueDefinition=function(){var i=this._lexer.token,t=this.parseDescription(),e=this.parseName(),r=this.parseDirectives(!0);return{kind:Ke.ENUM_VALUE_DEFINITION,description:t,name:e,directives:r,loc:this.loc(i)}},n.parseInputObjectTypeDefinition=function(){var i=this._lexer.token,t=this.parseDescription();this.expectKeyword("input");var e=this.parseName(),r=this.parseDirectives(!0),a=this.parseInputFieldsDefinition();return{kind:Ke.INPUT_OBJECT_TYPE_DEFINITION,description:t,name:e,directives:r,fields:a,loc:this.loc(i)}},n.parseInputFieldsDefinition=function(){return this.optionalMany(je.BRACE_L,this.parseInputValueDef,je.BRACE_R)},n.parseTypeSystemExtension=function(){var i=this._lexer.lookahead();if(i.kind===je.NAME)switch(i.value){case"schema":return this.parseSchemaExtension();case"scalar":return this.parseScalarTypeExtension();case"type":return this.parseObjectTypeExtension();case"interface":return this.parseInterfaceTypeExtension();case"union":return this.parseUnionTypeExtension();case"enum":return this.parseEnumTypeExtension();case"input":return this.parseInputObjectTypeExtension()}throw this.unexpected(i)},n.parseSchemaExtension=function(){var i=this._lexer.token;this.expectKeyword("extend"),this.expectKeyword("schema");var t=this.parseDirectives(!0),e=this.optionalMany(je.BRACE_L,this.parseOperationTypeDefinition,je.BRACE_R);if(t.length===0&&e.length===0)throw this.unexpected();return{kind:Ke.SCHEMA_EXTENSION,directives:t,operationTypes:e,loc:this.loc(i)}},n.parseScalarTypeExtension=function(){var i=this._lexer.token;this.expectKeyword("extend"),this.expectKeyword("scalar");var t=this.parseName(),e=this.parseDirectives(!0);if(e.length===0)throw this.unexpected();return{kind:Ke.SCALAR_TYPE_EXTENSION,name:t,directives:e,loc:this.loc(i)}},n.parseObjectTypeExtension=function(){var i=this._lexer.token;this.expectKeyword("extend"),this.expectKeyword("type");var t=this.parseName(),e=this.parseImplementsInterfaces(),r=this.parseDirectives(!0),a=this.parseFieldsDefinition();if(e.length===0&&r.length===0&&a.length===0)throw this.unexpected();return{kind:Ke.OBJECT_TYPE_EXTENSION,name:t,interfaces:e,directives:r,fields:a,loc:this.loc(i)}},n.parseInterfaceTypeExtension=function(){var i=this._lexer.token;this.expectKeyword("extend"),this.expectKeyword("interface");var t=this.parseName(),e=this.parseImplementsInterfaces(),r=this.parseDirectives(!0),a=this.parseFieldsDefinition();if(e.length===0&&r.length===0&&a.length===0)throw this.unexpected();return{kind:Ke.INTERFACE_TYPE_EXTENSION,name:t,interfaces:e,directives:r,fields:a,loc:this.loc(i)}},n.parseUnionTypeExtension=function(){var i=this._lexer.token;this.expectKeyword("extend"),this.expectKeyword("union");var t=this.parseName(),e=this.parseDirectives(!0),r=this.parseUnionMemberTypes();if(e.length===0&&r.length===0)throw this.unexpected();return{kind:Ke.UNION_TYPE_EXTENSION,name:t,directives:e,types:r,loc:this.loc(i)}},n.parseEnumTypeExtension=function(){var i=this._lexer.token;this.expectKeyword("extend"),this.expectKeyword("enum");var t=this.parseName(),e=this.parseDirectives(!0),r=this.parseEnumValuesDefinition();if(e.length===0&&r.length===0)throw this.unexpected();return{kind:Ke.ENUM_TYPE_EXTENSION,name:t,directives:e,values:r,loc:this.loc(i)}},n.parseInputObjectTypeExtension=function(){var i=this._lexer.token;this.expectKeyword("extend"),this.expectKeyword("input");var t=this.parseName(),e=this.parseDirectives(!0),r=this.parseInputFieldsDefinition();if(e.length===0&&r.length===0)throw this.unexpected();return{kind:Ke.INPUT_OBJECT_TYPE_EXTENSION,name:t,directives:e,fields:r,loc:this.loc(i)}},n.parseDirectiveDefinition=function(){var i=this._lexer.token,t=this.parseDescription();this.expectKeyword("directive"),this.expectToken(je.AT);var e=this.parseName(),r=this.parseArgumentDefs(),a=this.expectOptionalKeyword("repeatable");this.expectKeyword("on");var c=this.parseDirectiveLocations();return{kind:Ke.DIRECTIVE_DEFINITION,description:t,name:e,arguments:r,repeatable:a,locations:c,loc:this.loc(i)}},n.parseDirectiveLocations=function(){return this.delimitedMany(je.PIPE,this.parseDirectiveLocation)},n.parseDirectiveLocation=function(){var i=this._lexer.token,t=this.parseName();if(TP[t.value]!==void 0)return t;throw this.unexpected(i)},n.loc=function(i){var t;if(((t=this._options)===null||t===void 0?void 0:t.noLocation)!==!0)return new LO(i,this._lexer.lastToken,this._lexer.source)},n.peek=function(i){return this._lexer.token.kind===i},n.expectToken=function(i){var t=this._lexer.token;if(t.kind===i)return this._lexer.advance(),t;throw nn(this._lexer.source,t.start,"Expected ".concat(wP(i),", found ").concat(CO(t),"."))},n.expectOptionalToken=function(i){var t=this._lexer.token;if(t.kind===i)return this._lexer.advance(),t},n.expectKeyword=function(i){var t=this._lexer.token;if(t.kind===je.NAME&&t.value===i)this._lexer.advance();else throw nn(this._lexer.source,t.start,'Expected "'.concat(i,'", found ').concat(CO(t),"."))},n.expectOptionalKeyword=function(i){var t=this._lexer.token;return t.kind===je.NAME&&t.value===i?(this._lexer.advance(),!0):!1},n.unexpected=function(i){var t=i??this._lexer.token;return nn(this._lexer.source,t.start,"Unexpected ".concat(CO(t),"."))},n.any=function(i,t,e){this.expectToken(i);for(var r=[];!this.expectOptionalToken(e);)r.push(t.call(this));return r},n.optionalMany=function(i,t,e){if(this.expectOptionalToken(i)){var r=[];do r.push(t.call(this));while(!this.expectOptionalToken(e));return r}return[]},n.many=function(i,t,e){this.expectToken(i);var r=[];do r.push(t.call(this));while(!this.expectOptionalToken(e));return r},n.delimitedMany=function(i,t){this.expectOptionalToken(i);var e=[];do e.push(t.call(this));while(this.expectOptionalToken(i));return e},u})();function CO(u){var n=u.value;return wP(u.kind)+(n!=null?' "'.concat(n,'"'):"")}function wP(u){return rY(u)?'"'.concat(u,'"'):u}var yY={Name:[],Document:["definitions"],OperationDefinition:["name","variableDefinitions","directives","selectionSet"],VariableDefinition:["variable","type","defaultValue","directives"],Variable:["name"],SelectionSet:["selections"],Field:["alias","name","arguments","directives","selectionSet"],Argument:["name","value"],FragmentSpread:["name","directives"],InlineFragment:["typeCondition","directives","selectionSet"],FragmentDefinition:["name","variableDefinitions","typeCondition","directives","selectionSet"],IntValue:[],FloatValue:[],StringValue:[],BooleanValue:[],NullValue:[],EnumValue:[],ListValue:["values"],ObjectValue:["fields"],ObjectField:["name","value"],Directive:["name","arguments"],NamedType:["name"],ListType:["type"],NonNullType:["type"],SchemaDefinition:["description","directives","operationTypes"],OperationTypeDefinition:["type"],ScalarTypeDefinition:["description","name","directives"],ObjectTypeDefinition:["description","name","interfaces","directives","fields"],FieldDefinition:["description","name","arguments","type","directives"],InputValueDefinition:["description","name","type","defaultValue","directives"],InterfaceTypeDefinition:["description","name","interfaces","directives","fields"],UnionTypeDefinition:["description","name","directives","types"],EnumTypeDefinition:["description","name","directives","values"],EnumValueDefinition:["description","name","directives"],InputObjectTypeDefinition:["description","name","directives","fields"],DirectiveDefinition:["description","name","arguments","locations"],SchemaExtension:["directives","operationTypes"],ScalarTypeExtension:["name","directives"],ObjectTypeExtension:["name","interfaces","directives","fields"],InterfaceTypeExtension:["name","interfaces","directives","fields"],UnionTypeExtension:["name","directives","types"],EnumTypeExtension:["name","directives","values"],InputObjectTypeExtension:["name","directives","fields"]},pf=Object.freeze({});function SP(u,n){var o=arguments.length>2&&arguments[2]!==void 0?arguments[2]:yY,i=void 0,t=Array.isArray(u),e=[u],r=-1,a=[],c=void 0,s=void 0,d=void 0,l=[],f=[],h=u;do{r++;var p=r===e.length,y=p&&a.length!==0;if(p){if(s=f.length===0?void 0:l[l.length-1],c=d,d=f.pop(),y){if(t)c=c.slice();else{for(var _={},b=0,m=Object.keys(c);b<m.length;b++){var g=m[b];_[g]=c[g]}c=_}for(var T=0,v=0;v<a.length;v++){var S=a[v][0],F=a[v][1];t&&(S-=T),t&&F===null?(c.splice(S,1),T++):c[S]=F}}r=i.index,e=i.keys,a=i.edits,t=i.inArray,i=i.prev}else{if(s=d?t?r:e[r]:void 0,c=d?d[s]:h,c==null)continue;d&&l.push(s)}var M=void 0;if(!Array.isArray(c)){if(!gP(c))throw new Error("Invalid AST Node: ".concat(dP(c),"."));var O=p3(n,c.kind,p);if(O){if(M=O.call(n,c,s,d,l,f),M===pf)break;if(M===!1){if(!p){l.pop();continue}}else if(M!==void 0&&(a.push([s,M]),!p))if(gP(M))c=M;else{l.pop();continue}}}if(M===void 0&&y&&a.push([s,c]),p)l.pop();else{var w;i={inArray:t,index:r,keys:e,edits:a,prev:i},t=Array.isArray(c),e=t?c:(w=o[c.kind])!==null&&w!==void 0?w:[],r=-1,a=[],d&&f.push(d),d=c}}while(i!==void 0);return a.length!==0&&(h=a[a.length-1][1]),h}function bY(u){var n=new Array(u.length);return{enter:function(i){for(var t=0;t<u.length;t++)if(n[t]==null){var e=p3(u[t],i.kind,!1);if(e){var r=e.apply(u[t],arguments);if(r===!1)n[t]=i;else if(r===pf)n[t]=pf;else if(r!==void 0)return r}}},leave:function(i){for(var t=0;t<u.length;t++)if(n[t]==null){var e=p3(u[t],i.kind,!0);if(e){var r=e.apply(u[t],arguments);if(r===pf)n[t]=pf;else if(r!==void 0&&r!==!1)return r}}else n[t]===i&&(n[t]=null)}}}function p3(u,n,o){var i=u[n];if(i){if(!o&&typeof i=="function")return i;var t=o?i.leave:i.enter;if(typeof t=="function")return t}else{var e=o?u.leave:u.enter;if(e){if(typeof e=="function")return e;var r=e[n];if(typeof r=="function")return r}}}function _Y(u){return SP(u,{leave:mY})}var gY=80,mY={Name:function(n){return n.value},Variable:function(n){return"$"+n.name},Document:function(n){return it(n.definitions,`

`)+`
`},OperationDefinition:function(n){var o=n.operation,i=n.name,t=er("(",it(n.variableDefinitions,", "),")"),e=it(n.directives," "),r=n.selectionSet;return!i&&!e&&!t&&o==="query"?r:it([o,it([i,t]),e,r]," ")},VariableDefinition:function(n){var o=n.variable,i=n.type,t=n.defaultValue,e=n.directives;return o+": "+i+er(" = ",t)+er(" ",it(e," "))},SelectionSet:function(n){var o=n.selections;return Fn(o)},Field:function(n){var o=n.alias,i=n.name,t=n.arguments,e=n.directives,r=n.selectionSet,a=er("",o,": ")+i,c=a+er("(",it(t,", "),")");return c.length>gY&&(c=a+er(`(
`,y3(it(t,`
`)),`
)`)),it([c,it(e," "),r]," ")},Argument:function(n){var o=n.name,i=n.value;return o+": "+i},FragmentSpread:function(n){var o=n.name,i=n.directives;return"..."+o+er(" ",it(i," "))},InlineFragment:function(n){var o=n.typeCondition,i=n.directives,t=n.selectionSet;return it(["...",er("on ",o),it(i," "),t]," ")},FragmentDefinition:function(n){var o=n.name,i=n.typeCondition,t=n.variableDefinitions,e=n.directives,r=n.selectionSet;return"fragment ".concat(o).concat(er("(",it(t,", "),")")," ")+"on ".concat(i," ").concat(er("",it(e," ")," "))+r},IntValue:function(n){var o=n.value;return o},FloatValue:function(n){var o=n.value;return o},StringValue:function(n,o){var i=n.value,t=n.block;return t?tY(i,o==="description"?"":"  "):JSON.stringify(i)},BooleanValue:function(n){var o=n.value;return o?"true":"false"},NullValue:function(){return"null"},EnumValue:function(n){var o=n.value;return o},ListValue:function(n){var o=n.values;return"["+it(o,", ")+"]"},ObjectValue:function(n){var o=n.fields;return"{"+it(o,", ")+"}"},ObjectField:function(n){var o=n.name,i=n.value;return o+": "+i},Directive:function(n){var o=n.name,i=n.arguments;return"@"+o+er("(",it(i,", "),")")},NamedType:function(n){var o=n.name;return o},ListType:function(n){var o=n.type;return"["+o+"]"},NonNullType:function(n){var o=n.type;return o+"!"},SchemaDefinition:Rn(function(u){var n=u.directives,o=u.operationTypes;return it(["schema",it(n," "),Fn(o)]," ")}),OperationTypeDefinition:function(n){var o=n.operation,i=n.type;return o+": "+i},ScalarTypeDefinition:Rn(function(u){var n=u.name,o=u.directives;return it(["scalar",n,it(o," ")]," ")}),ObjectTypeDefinition:Rn(function(u){var n=u.name,o=u.interfaces,i=u.directives,t=u.fields;return it(["type",n,er("implements ",it(o," & ")),it(i," "),Fn(t)]," ")}),FieldDefinition:Rn(function(u){var n=u.name,o=u.arguments,i=u.type,t=u.directives;return n+(OP(o)?er(`(
`,y3(it(o,`
`)),`
)`):er("(",it(o,", "),")"))+": "+i+er(" ",it(t," "))}),InputValueDefinition:Rn(function(u){var n=u.name,o=u.type,i=u.defaultValue,t=u.directives;return it([n+": "+o,er("= ",i),it(t," ")]," ")}),InterfaceTypeDefinition:Rn(function(u){var n=u.name,o=u.interfaces,i=u.directives,t=u.fields;return it(["interface",n,er("implements ",it(o," & ")),it(i," "),Fn(t)]," ")}),UnionTypeDefinition:Rn(function(u){var n=u.name,o=u.directives,i=u.types;return it(["union",n,it(o," "),i&&i.length!==0?"= "+it(i," | "):""]," ")}),EnumTypeDefinition:Rn(function(u){var n=u.name,o=u.directives,i=u.values;return it(["enum",n,it(o," "),Fn(i)]," ")}),EnumValueDefinition:Rn(function(u){var n=u.name,o=u.directives;return it([n,it(o," ")]," ")}),InputObjectTypeDefinition:Rn(function(u){var n=u.name,o=u.directives,i=u.fields;return it(["input",n,it(o," "),Fn(i)]," ")}),DirectiveDefinition:Rn(function(u){var n=u.name,o=u.arguments,i=u.repeatable,t=u.locations;return"directive @"+n+(OP(o)?er(`(
`,y3(it(o,`
`)),`
)`):er("(",it(o,", "),")"))+(i?" repeatable":"")+" on "+it(t," | ")}),SchemaExtension:function(n){var o=n.directives,i=n.operationTypes;return it(["extend schema",it(o," "),Fn(i)]," ")},ScalarTypeExtension:function(n){var o=n.name,i=n.directives;return it(["extend scalar",o,it(i," ")]," ")},ObjectTypeExtension:function(n){var o=n.name,i=n.interfaces,t=n.directives,e=n.fields;return it(["extend type",o,er("implements ",it(i," & ")),it(t," "),Fn(e)]," ")},InterfaceTypeExtension:function(n){var o=n.name,i=n.interfaces,t=n.directives,e=n.fields;return it(["extend interface",o,er("implements ",it(i," & ")),it(t," "),Fn(e)]," ")},UnionTypeExtension:function(n){var o=n.name,i=n.directives,t=n.types;return it(["extend union",o,it(i," "),t&&t.length!==0?"= "+it(t," | "):""]," ")},EnumTypeExtension:function(n){var o=n.name,i=n.directives,t=n.values;return it(["extend enum",o,it(i," "),Fn(t)]," ")},InputObjectTypeExtension:function(n){var o=n.name,i=n.directives,t=n.fields;return it(["extend input",o,it(i," "),Fn(t)]," ")}};function Rn(u){return function(n){return it([n.description,u(n)],`
`)}}function it(u){var n,o=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"";return(n=u==null?void 0:u.filter(function(i){return i}).join(o))!==null&&n!==void 0?n:""}function Fn(u){return er(`{
`,y3(it(u,`
`)),`
}`)}function er(u,n){var o=arguments.length>2&&arguments[2]!==void 0?arguments[2]:"";return n!=null&&n!==""?u+n+o:""}function y3(u){return er("  ",u.replace(/\n/g,`
  `))}function vY(u){return u.indexOf(`
`)!==-1}function OP(u){return u!=null&&u.some(vY)}function TY(u){return AP(u)||EP(u)||RP(u)}function AP(u){return u.kind===Ke.OPERATION_DEFINITION||u.kind===Ke.FRAGMENT_DEFINITION}function wY(u){return u.kind===Ke.FIELD||u.kind===Ke.FRAGMENT_SPREAD||u.kind===Ke.INLINE_FRAGMENT}function SY(u){return u.kind===Ke.VARIABLE||u.kind===Ke.INT||u.kind===Ke.FLOAT||u.kind===Ke.STRING||u.kind===Ke.BOOLEAN||u.kind===Ke.NULL||u.kind===Ke.ENUM||u.kind===Ke.LIST||u.kind===Ke.OBJECT}function OY(u){return u.kind===Ke.NAMED_TYPE||u.kind===Ke.LIST_TYPE||u.kind===Ke.NON_NULL_TYPE}function EP(u){return u.kind===Ke.SCHEMA_DEFINITION||xP(u)||u.kind===Ke.DIRECTIVE_DEFINITION}function xP(u){return u.kind===Ke.SCALAR_TYPE_DEFINITION||u.kind===Ke.OBJECT_TYPE_DEFINITION||u.kind===Ke.INTERFACE_TYPE_DEFINITION||u.kind===Ke.UNION_TYPE_DEFINITION||u.kind===Ke.ENUM_TYPE_DEFINITION||u.kind===Ke.INPUT_OBJECT_TYPE_DEFINITION}function RP(u){return u.kind===Ke.SCHEMA_EXTENSION||FP(u)}function FP(u){return u.kind===Ke.SCALAR_TYPE_EXTENSION||u.kind===Ke.OBJECT_TYPE_EXTENSION||u.kind===Ke.INTERFACE_TYPE_EXTENSION||u.kind===Ke.UNION_TYPE_EXTENSION||u.kind===Ke.ENUM_TYPE_EXTENSION||u.kind===Ke.INPUT_OBJECT_TYPE_EXTENSION}var AY=Object.freeze({__proto__:null,BREAK:pf,DirectiveLocation:TP,Kind:Ke,Lexer:vP,Location:LO,Source:DO,Token:Zt,TokenKind:je,getLocation:s3,getVisitFn:p3,isDefinitionNode:TY,isExecutableDefinitionNode:AP,isSelectionNode:wY,isTypeDefinitionNode:xP,isTypeExtensionNode:FP,isTypeNode:OY,isTypeSystemDefinitionNode:EP,isTypeSystemExtensionNode:RP,isValueNode:SY,parse:fY,parseType:pY,parseValue:hY,print:_Y,printLocation:lP,printSourceLocation:NO,visit:SP,visitInParallel:bY}),EY=Lt(AY),c0={},ou={},d0={},su={},ci={},IP;function xY(){if(IP)return ci;IP=1,Object.defineProperty(ci,"__esModule",{value:!0}),ci.removeDotSegmentsOfPath=ci.removeDotSegments=ci.resolve=void 0;function u(t,e){e=e||"";const r=e.indexOf("#");if(r>0&&(e=e.substr(0,r)),!t.length){if(e.indexOf(":")<0)throw new Error(`Found invalid baseIRI '${e}' for value '${t}'`);return e}if(t.startsWith("?")){const h=e.indexOf("?");return h>0&&(e=e.substr(0,h)),e+t}if(t.startsWith("#"))return e+t;if(!e.length){const h=t.indexOf(":");if(h<0)throw new Error(`Found invalid relative IRI '${t}' for a missing baseIRI`);return o(t,h)}const a=t.indexOf(":");if(a>=0)return o(t,a);const c=e.indexOf(":");if(c<0)throw new Error(`Found invalid baseIRI '${e}' for value '${t}'`);const s=e.substr(0,c+1);if(t.indexOf("//")===0)return s+o(t,a);let d;if(e.indexOf("//",c)===c+1){if(d=e.indexOf("/",c+3),d<0)return e.length>c+3?e+"/"+o(t,a):s+o(t,a)}else if(d=e.indexOf("/",c+1),d<0)return s+o(t,a);if(t.indexOf("/")===0)return e.substr(0,d)+n(t);let l=e.substr(d);const f=l.lastIndexOf("/");return f>=0&&f<l.length-1&&(l=l.substr(0,f+1),t[0]==="."&&t[1]!=="."&&t[1]!=="/"&&t[2]&&(t=t.substr(1))),t=l+t,t=n(t),e.substr(0,d)+t}ci.resolve=u;function n(t){const e=[];let r=0;for(;r<t.length;)switch(t[r]){case"/":if(t[r+1]===".")if(t[r+2]==="."){if(!i(t[r+3])){e.push([]),r++;break}e.pop(),t[r+3]||e.push([]),r+=3}else{if(!i(t[r+2])){e.push([]),r++;break}t[r+2]||e.push([]),r+=2}else e.push([]),r++;break;case"#":case"?":e.length||e.push([]),e[e.length-1].push(t.substr(r)),r=t.length;break;default:e.length||e.push([]),e[e.length-1].push(t[r]),r++;break}return"/"+e.map(a=>a.join("")).join("/")}ci.removeDotSegments=n;function o(t,e){let r=e+1;e>=0?t[e+1]==="/"&&t[e+2]==="/"&&(r=e+3):t[0]==="/"&&t[1]==="/"&&(r=2);const a=t.indexOf("/",r);if(a<0)return t;const c=t.substr(0,a),s=t.substr(a);return c+n(s)}ci.removeDotSegmentsOfPath=o;function i(t){return!t||t==="#"||t==="?"||t==="/"}return ci}var PP;function Jr(){return PP||(PP=1,(function(u){var n=su&&su.__createBinding||(Object.create?(function(i,t,e,r){r===void 0&&(r=e),Object.defineProperty(i,r,{enumerable:!0,get:function(){return t[e]}})}):(function(i,t,e,r){r===void 0&&(r=e),i[r]=t[e]})),o=su&&su.__exportStar||function(i,t){for(var e in i)e!=="default"&&!Object.prototype.hasOwnProperty.call(t,e)&&n(t,i,e)};Object.defineProperty(u,"__esModule",{value:!0}),o(xY(),u)})(su)),su}var BO={},DP;function l0(){return DP||(DP=1,(function(u){Object.defineProperty(u,"__esModule",{value:!0}),u.ERROR_CODES=u.ErrorCoded=void 0;class n extends Error{constructor(i,t){super(i),this.code=t}}u.ErrorCoded=n,(function(o){o.COLLIDING_KEYWORDS="colliding keywords",o.CONFLICTING_INDEXES="conflicting indexes",o.CYCLIC_IRI_MAPPING="cyclic IRI mapping",o.INVALID_ID_VALUE="invalid @id value",o.INVALID_INDEX_VALUE="invalid @index value",o.INVALID_NEST_VALUE="invalid @nest value",o.INVALID_PREFIX_VALUE="invalid @prefix value",o.INVALID_PROPAGATE_VALUE="invalid @propagate value",o.INVALID_REVERSE_VALUE="invalid @reverse value",o.INVALID_IMPORT_VALUE="invalid @import value",o.INVALID_VERSION_VALUE="invalid @version value",o.INVALID_BASE_IRI="invalid base IRI",o.INVALID_CONTAINER_MAPPING="invalid container mapping",o.INVALID_CONTEXT_ENTRY="invalid context entry",o.INVALID_CONTEXT_NULLIFICATION="invalid context nullification",o.INVALID_DEFAULT_LANGUAGE="invalid default language",o.INVALID_INCLUDED_VALUE="invalid @included value",o.INVALID_IRI_MAPPING="invalid IRI mapping",o.INVALID_JSON_LITERAL="invalid JSON literal",o.INVALID_KEYWORD_ALIAS="invalid keyword alias",o.INVALID_LANGUAGE_MAP_VALUE="invalid language map value",o.INVALID_LANGUAGE_MAPPING="invalid language mapping",o.INVALID_LANGUAGE_TAGGED_STRING="invalid language-tagged string",o.INVALID_LANGUAGE_TAGGED_VALUE="invalid language-tagged value",o.INVALID_LOCAL_CONTEXT="invalid local context",o.INVALID_REMOTE_CONTEXT="invalid remote context",o.INVALID_REVERSE_PROPERTY="invalid reverse property",o.INVALID_REVERSE_PROPERTY_MAP="invalid reverse property map",o.INVALID_REVERSE_PROPERTY_VALUE="invalid reverse property value",o.INVALID_SCOPED_CONTEXT="invalid scoped context",o.INVALID_SCRIPT_ELEMENT="invalid script element",o.INVALID_SET_OR_LIST_OBJECT="invalid set or list object",o.INVALID_TERM_DEFINITION="invalid term definition",o.INVALID_TYPE_MAPPING="invalid type mapping",o.INVALID_TYPE_VALUE="invalid type value",o.INVALID_TYPED_VALUE="invalid typed value",o.INVALID_VALUE_OBJECT="invalid value object",o.INVALID_VALUE_OBJECT_VALUE="invalid value object value",o.INVALID_VOCAB_MAPPING="invalid vocab mapping",o.IRI_CONFUSED_WITH_PREFIX="IRI confused with prefix",o.KEYWORD_REDEFINITION="keyword redefinition",o.LOADING_DOCUMENT_FAILED="loading document failed",o.LOADING_REMOTE_CONTEXT_FAILED="loading remote context failed",o.MULTIPLE_CONTEXT_LINK_HEADERS="multiple context link headers",o.PROCESSING_MODE_CONFLICT="processing mode conflict",o.PROTECTED_TERM_REDEFINITION="protected term redefinition",o.CONTEXT_OVERFLOW="context overflow",o.INVALID_BASE_DIRECTION="invalid base direction",o.RECURSIVE_CONTEXT_INCLUSION="recursive context inclusion",o.INVALID_STREAMING_KEY_ORDER="invalid streaming key order",o.INVALID_EMBEDDED_NODE="invalid embedded node",o.INVALID_ANNOTATION="invalid annotation"})(u.ERROR_CODES||(u.ERROR_CODES={}))})(BO)),BO}var f0={},$O,NP;function UO(){if(NP)return $O;NP=1;var u=/^utf-?8|ascii|utf-?16-?le|ucs-?2|base-?64|latin-?1$/i,n=/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,o=/\s|\uFEFF|\xA0/,i=/\r?\n[\x20\x09]+/g,t=/[;,"]/,e=/[;,"]|\s/,r=/^[!#$%&'*+\-\.^_`|~\da-zA-Z]+$/,a={IDLE:1,URI:2,ATTR:4};function c(p){return p.replace(n,"")}function s(p){return o.test(p)}function d(p,y){for(;s(p[y]);)y++;return y}function l(p){return e.test(p)||!r.test(p)}function f(p,y){return Object.keys(p).length===Object.keys(y).length&&Object.keys(p).every(_=>_ in y&&p[_]===y[_])}class h{constructor(y){this.refs=[],y&&this.parse(y)}rel(y){for(var _=[],b=y.toLowerCase(),m=0;m<this.refs.length;m++)typeof this.refs[m].rel=="string"&&this.refs[m].rel.toLowerCase()===b&&_.push(this.refs[m]);return _}get(y,_){y=y.toLowerCase(),_=_.toLowerCase();for(var b=[],m=0;m<this.refs.length;m++)typeof this.refs[m][y]=="string"&&this.refs[m][y].toLowerCase()===_&&b.push(this.refs[m]);return b}set(y){return this.refs.push(y),this}setUnique(y){return this.refs.some(_=>f(_,y))||this.refs.push(y),this}has(y,_){y=y.toLowerCase(),_=_.toLowerCase();for(var b=0;b<this.refs.length;b++)if(typeof this.refs[b][y]=="string"&&this.refs[b][y].toLowerCase()===_)return!0;return!1}parse(y,g){g=g||0,y=g?y.slice(g):y,y=c(y).replace(i,"");for(var b=a.IDLE,m=y.length,g=0,T=null;g<m;)if(b===a.IDLE){if(s(y[g])){g++;continue}else if(y[g]==="<"){T!=null&&(T.rel!=null?this.refs.push(...h.expandRelations(T)):this.refs.push(T));var v=y.indexOf(">",g);if(v===-1)throw new Error("Expected end of URI delimiter at offset "+g);T={uri:y.slice(g+1,v)},g=v,b=a.URI}else throw new Error('Unexpected character "'+y[g]+'" at offset '+g);g++}else if(b===a.URI)if(s(y[g])){g++;continue}else if(y[g]===";")b=a.ATTR,g++;else if(y[g]===",")b=a.IDLE,g++;else throw new Error('Unexpected character "'+y[g]+'" at offset '+g);else if(b===a.ATTR){if(y[g]===";"||s(y[g])){g++;continue}var v=y.indexOf("=",g);v===-1&&(v=y.indexOf(";",g)),v===-1&&(v=y.length);var S=c(y.slice(g,v)).toLowerCase(),F="";if(g=v+1,g=d(y,g),y[g]==='"')for(g++;g<m;){if(y[g]==='"'){g++;break}y[g]==="\\"&&g++,F+=y[g],g++}else{for(var v=g+1;!t.test(y[v])&&v<m;)v++;F=y.slice(g,v),g=v}switch(T[S]&&h.isSingleOccurenceAttr(S)||(S[S.length-1]==="*"?T[S]=h.parseExtendedValue(F):(F=S==="type"?F.toLowerCase():F,T[S]!=null?Array.isArray(T[S])?T[S].push(F):T[S]=[T[S],F]:T[S]=F)),y[g]){case",":b=a.IDLE;break;case";":b=a.ATTR;break}g++}else throw new Error('Unknown parser state "'+b+'"');return T!=null&&(T.rel!=null?this.refs.push(...h.expandRelations(T)):this.refs.push(T)),T=null,this}toString(){for(var y=[],_="",b=null,m=0;m<this.refs.length;m++)b=this.refs[m],_=Object.keys(this.refs[m]).reduce(function(g,T){return T==="uri"?g:g+"; "+h.formatAttribute(T,b[T])},"<"+b.uri+">"),y.push(_);return y.join(", ")}}return h.isCompatibleEncoding=function(p){return u.test(p)},h.parse=function(p,y){return new h().parse(p,y)},h.isSingleOccurenceAttr=function(p){return p==="rel"||p==="type"||p==="media"||p==="title"||p==="title*"},h.isTokenAttr=function(p){return p==="rel"||p==="type"||p==="anchor"},h.escapeQuotes=function(p){return p.replace(/"/g,'\\"')},h.expandRelations=function(p){var y=p.rel.split(" ");return y.map(function(_){var b=Object.assign({},p);return b.rel=_,b})},h.parseExtendedValue=function(p){var y=/([^']+)?(?:'([^']*)')?(.+)/.exec(p);return{language:y[2].toLowerCase(),encoding:h.isCompatibleEncoding(y[1])?null:y[1].toLowerCase(),value:h.isCompatibleEncoding(y[1])?decodeURIComponent(y[3]):y[3]}},h.formatExtendedAttribute=function(p,y){var _=(y.encoding||"utf-8").toUpperCase(),b=y.language||"en",m="";return Buffer.isBuffer(y.value)&&h.isCompatibleEncoding(_)?m=y.value.toString(_):Buffer.isBuffer(y.value)?m=y.value.toString("hex").replace(/[0-9a-f]{2}/gi,"%$1"):m=encodeURIComponent(y.value),p+"="+_+"'"+b+"'"+m},h.formatAttribute=function(p,y){return Array.isArray(y)?y.map(_=>h.formatAttribute(p,_)).join("; "):p[p.length-1]==="*"||typeof y!="string"?h.formatExtendedAttribute(p,y):(h.isTokenAttr(p)?y=l(y)?'"'+h.escapeQuotes(y)+'"':h.escapeQuotes(y):l(y)&&(y=encodeURIComponent(y),y=y.replace(/%20/g," ").replace(/%2C/g,",").replace(/%3B/g,";"),y='"'+y+'"'),p+"="+y)},$O=h,$O}var jP;function LP(){if(jP)return f0;jP=1,Object.defineProperty(f0,"__esModule",{value:!0}),f0.FetchDocumentLoader=void 0;const u=l0(),n=UO(),o=Jr();class i{constructor(e){this.fetcher=e}async load(e){const r=await(this.fetcher||fetch)(e,{headers:new Headers({accept:"application/ld+json"})});if(r.ok&&r.headers){let a=r.headers.get("Content-Type");if(a){const c=a.indexOf(";");c>0&&(a=a.substr(0,c))}if(a==="application/ld+json")return await r.json();if(r.headers.has("Link")){let c;if(r.headers.forEach((s,d)=>{if(d==="link"){const l=(0,n.parse)(s);for(const f of l.get("type","application/ld+json"))if(f.rel==="alternate"){if(c)throw new Error("Multiple JSON-LD alternate links were found on "+e);c=(0,o.resolve)(f.uri,e)}}}),c)return this.load(c)}throw new u.ErrorCoded(`Unsupported JSON-LD media type ${a}`,u.ERROR_CODES.LOADING_DOCUMENT_FAILED)}else throw new Error(r.statusText||`Status code: ${r.status}`)}}return f0.FetchDocumentLoader=i,f0}var VO={},h0={},MP;function QO(){if(MP)return h0;MP=1,Object.defineProperty(h0,"__esModule",{value:!0}),h0.Util=void 0;class u{static isCompactIri(o){return o.indexOf(":")>0&&!(o&&o[0]==="#")}static getPrefix(o,i){if(o&&o[0]==="#")return null;const t=o.indexOf(":");if(t>=0){if(o.length>t+1&&o.charAt(t+1)==="/"&&o.charAt(t+2)==="/")return null;const e=o.substr(0,t);if(e==="_")return null;if(i[e])return e}return null}static getContextValueId(o){if(o===null||typeof o=="string")return o;const i=o["@id"];return i||null}static isSimpleTermDefinitionPrefix(o,i){return!u.isPotentialKeyword(o)&&(i.allowPrefixNonGenDelims||typeof o=="string"&&(o[0]==="_"||u.isPrefixIriEndingWithGenDelim(o)))}static isPotentialKeyword(o){return typeof o=="string"&&u.KEYWORD_REGEX.test(o)}static isPrefixIriEndingWithGenDelim(o){return u.ENDS_WITH_GEN_DELIM.test(o)}static isPrefixValue(o){return o&&(typeof o=="string"||o&&typeof o=="object")}static isValidIri(o){return!!(o&&u.IRI_REGEX.test(o))}static isValidIriWeak(o){return!!o&&o[0]!==":"&&u.IRI_REGEX_WEAK.test(o)}static isValidKeyword(o){return u.VALID_KEYWORDS[o]}static isTermProtected(o,i){const t=o[i];return typeof t!="string"&&t&&t["@protected"]}static hasProtectedTerms(o){for(const i of Object.keys(o))if(u.isTermProtected(o,i))return!0;return!1}static isReservedInternalKeyword(o){return o.startsWith("@__")}static deepEqual(o,i){const t=Object.keys(o),e=Object.keys(i);return t.length!==e.length?!1:t.every(r=>{const a=o[r],c=i[r];return a===c||a!==null&&c!==null&&typeof a=="object"&&typeof c=="object"&&this.deepEqual(a,c)})}}return u.IRI_REGEX=/^([A-Za-z][A-Za-z0-9+-.]*|_):[^ "<>{}|\\\[\]`#]*(#[^#]*)?$/,u.IRI_REGEX_WEAK=/(?::[^:])|\//,u.KEYWORD_REGEX=/^@[a-z]+$/i,u.ENDS_WITH_GEN_DELIM=/[:/?#\[\]@]$/,u.REGEX_LANGUAGE_TAG=/^[a-zA-Z]+(-[a-zA-Z0-9]+)*$/,u.REGEX_DIRECTION_TAG=/^(ltr)|(rtl)$/,u.VALID_KEYWORDS={"@annotation":!0,"@base":!0,"@container":!0,"@context":!0,"@direction":!0,"@graph":!0,"@id":!0,"@import":!0,"@included":!0,"@index":!0,"@json":!0,"@language":!0,"@list":!0,"@nest":!0,"@none":!0,"@prefix":!0,"@propagate":!0,"@protected":!0,"@reverse":!0,"@set":!0,"@type":!0,"@value":!0,"@version":!0,"@vocab":!0},u.EXPAND_KEYS_BLACKLIST=["@base","@vocab","@language","@version","@direction"],u.ALIAS_DOMAIN_BLACKLIST=["@container","@graph","@id","@index","@list","@nest","@none","@prefix","@reverse","@set","@type","@value","@version"],u.ALIAS_RANGE_BLACKLIST=["@context","@preserve"],u.CONTAINERS=["@list","@set","@index","@language","@graph","@id","@type"],u.CONTAINERS_1_0=["@list","@set","@index"],h0.Util=u,h0}var qP;function CP(){return qP||(qP=1,(function(u){Object.defineProperty(u,"__esModule",{value:!0}),u.defaultExpandOptions=u.JsonLdContextNormalized=void 0;const n=Jr(),o=l0(),i=QO();class t{constructor(r){this.contextRaw=r}getContextRaw(){return this.contextRaw}expandTerm(r,a,c=u.defaultExpandOptions){const s=this.contextRaw[r];if(s===null||s&&s["@id"]===null)return null;let d=!0;if(s&&a){const _=i.Util.getContextValueId(s);if(_&&_!==r)if(typeof _!="string"||!i.Util.isValidIri(_)&&!i.Util.isValidKeyword(_))i.Util.isPotentialKeyword(_)||(d=!1);else return _}const l=i.Util.getPrefix(r,this.contextRaw),f=this.contextRaw["@vocab"],h=(!!f||f==="")&&f.indexOf(":")<0,p=this.contextRaw["@base"],y=i.Util.isPotentialKeyword(r);if(l){const _=this.contextRaw[l],b=i.Util.getContextValueId(_);if(b){if(typeof _=="string"||!c.allowPrefixForcing){if(!i.Util.isSimpleTermDefinitionPrefix(b,c))return r}else if(b[0]!=="_"&&!y&&!_["@prefix"]&&!(r in this.contextRaw))return r;return b+r.substr(l.length+1)}}else if(a&&(f||f===""||c.allowVocabRelativeToBase&&p&&h)&&!y&&!i.Util.isCompactIri(r))if(h){if(c.allowVocabRelativeToBase)return(f||p?(0,n.resolve)(f,p):"")+r;throw new o.ErrorCoded(`Relative vocab expansion for term '${r}' with vocab '${f}' is not allowed.`,o.ERROR_CODES.INVALID_VOCAB_MAPPING)}else return f+r;else if(!a&&p&&!y&&!i.Util.isCompactIri(r))return(0,n.resolve)(r,p);if(d)return r;throw new o.ErrorCoded(`Invalid IRI mapping found for context entry '${r}': '${JSON.stringify(s)}'`,o.ERROR_CODES.INVALID_IRI_MAPPING)}compactIri(r,a){if(a&&this.contextRaw["@vocab"]&&r.startsWith(this.contextRaw["@vocab"]))return r.substr(this.contextRaw["@vocab"].length);if(!a&&this.contextRaw["@base"]&&r.startsWith(this.contextRaw["@base"]))return r.substr(this.contextRaw["@base"].length);const c={prefix:"",suffix:r};for(const s in this.contextRaw){const d=this.contextRaw[s];if(d&&!i.Util.isPotentialKeyword(s)){const l=i.Util.getContextValueId(d);if(r.startsWith(l)){const f=r.substr(l.length);if(f)f.length<c.suffix.length&&(c.prefix=s,c.suffix=f);else if(a)return s}}}return c.prefix?c.prefix+":"+c.suffix:r}}u.JsonLdContextNormalized=t,u.defaultExpandOptions={allowPrefixForcing:!0,allowPrefixNonGenDelims:!1,allowVocabRelativeToBase:!0}})(VO)),VO}var BP;function RY(){if(BP)return d0;BP=1,Object.defineProperty(d0,"__esModule",{value:!0}),d0.ContextParser=void 0;const u=Jr(),n=l0(),o=LP(),i=CP(),t=QO();class e{constructor(a){a=a||{},this.documentLoader=a.documentLoader||new o.FetchDocumentLoader,this.documentCache={},this.validateContext=!a.skipValidation,this.expandContentTypeToBase=!!a.expandContentTypeToBase,this.remoteContextsDepthLimit=a.remoteContextsDepthLimit||32,this.redirectSchemaOrgHttps="redirectSchemaOrgHttps"in a?!!a.redirectSchemaOrgHttps:!0}static validateLanguage(a,c,s){if(typeof a!="string")throw new n.ErrorCoded(`The value of an '@language' must be a string, got '${JSON.stringify(a)}'`,s);if(!t.Util.REGEX_LANGUAGE_TAG.test(a)){if(c)throw new n.ErrorCoded(`The value of an '@language' must be a valid language tag, got '${JSON.stringify(a)}'`,s);return!1}return!0}static validateDirection(a,c){if(typeof a!="string")throw new n.ErrorCoded(`The value of an '@direction' must be a string, got '${JSON.stringify(a)}'`,n.ERROR_CODES.INVALID_BASE_DIRECTION);if(!t.Util.REGEX_DIRECTION_TAG.test(a)){if(c)throw new n.ErrorCoded(`The value of an '@direction' must be 'ltr' or 'rtl', got '${JSON.stringify(a)}'`,n.ERROR_CODES.INVALID_BASE_DIRECTION);return!1}return!0}idifyReverseTerms(a){for(const c of Object.keys(a)){let s=a[c];if(s&&typeof s=="object"&&s["@reverse"]&&!s["@id"]){if(typeof s["@reverse"]!="string"||t.Util.isValidKeyword(s["@reverse"]))throw new n.ErrorCoded(`Invalid @reverse value, must be absolute IRI or blank node: '${s["@reverse"]}'`,n.ERROR_CODES.INVALID_IRI_MAPPING);s=a[c]=Object.assign(Object.assign({},s),{"@id":s["@reverse"]}),s["@id"]=s["@reverse"],t.Util.isPotentialKeyword(s["@reverse"])?delete s["@reverse"]:s["@reverse"]=!0}}return a}expandPrefixedTerms(a,c,s){const d=a.getContextRaw();for(const l of s||Object.keys(d))if(t.Util.EXPAND_KEYS_BLACKLIST.indexOf(l)<0&&!t.Util.isReservedInternalKeyword(l)){const f=d[l];if(t.Util.isPotentialKeyword(l)&&t.Util.ALIAS_DOMAIN_BLACKLIST.indexOf(l)>=0&&(l!=="@type"||typeof d[l]=="object"&&!(d[l]["@protected"]||d[l]["@container"]==="@set")))throw new n.ErrorCoded(`Keywords can not be aliased to something else.
Tried mapping ${l} to ${JSON.stringify(f)}`,n.ERROR_CODES.KEYWORD_REDEFINITION);if(t.Util.ALIAS_RANGE_BLACKLIST.indexOf(t.Util.getContextValueId(f))>=0)throw new n.ErrorCoded(`Aliasing to certain keywords is not allowed.
Tried mapping ${l} to ${JSON.stringify(f)}`,n.ERROR_CODES.INVALID_KEYWORD_ALIAS);if(f&&t.Util.isPotentialKeyword(t.Util.getContextValueId(f))&&f["@prefix"]===!0)throw new n.ErrorCoded(`Tried to use keyword aliases as prefix: '${l}': '${JSON.stringify(f)}'`,n.ERROR_CODES.INVALID_TERM_DEFINITION);for(;t.Util.isPrefixValue(d[l]);){const h=d[l];let p=!1;if(typeof h=="string")d[l]=a.expandTerm(h,!0),p=p||h!==d[l];else{const y=h["@id"],_=h["@type"],b=!("@prefix"in h)||t.Util.isValidIri(l);if("@id"in h)y!=null&&typeof y=="string"&&(d[l]=Object.assign(Object.assign({},d[l]),{"@id":a.expandTerm(y,!0)}),p=p||y!==d[l]["@id"]);else if(!t.Util.isPotentialKeyword(l)&&b){const m=a.expandTerm(l,!0);m!==l&&(d[l]=Object.assign(Object.assign({},d[l]),{"@id":m}),p=!0)}if(_&&typeof _=="string"&&_!=="@vocab"&&(!h["@container"]||!h["@container"]["@type"])&&b){let m=a.expandTerm(_,!0);c&&_===m&&(m=a.expandTerm(_,!1)),m!==_&&(p=!0,d[l]=Object.assign(Object.assign({},d[l]),{"@type":m}))}}if(!p)break}}}normalize(a,{processingMode:c,normalizeLanguageTags:s}){if(s||c===1)for(const d of Object.keys(a))if(d==="@language"&&typeof a[d]=="string")a[d]=a[d].toLowerCase();else{const l=a[d];if(l&&typeof l=="object"&&typeof l["@language"]=="string"){const f=l["@language"].toLowerCase();f!==l["@language"]&&(a[d]=Object.assign(Object.assign({},l),{"@language":f}))}}}containersToHash(a){for(const c of Object.keys(a)){const s=a[c];if(s&&typeof s=="object"){if(typeof s["@container"]=="string")a[c]=Object.assign(Object.assign({},s),{"@container":{[s["@container"]]:!0}});else if(Array.isArray(s["@container"])){const d={};for(const l of s["@container"])d[l]=!0;a[c]=Object.assign(Object.assign({},s),{"@container":d})}}}}applyScopedProtected(a,{processingMode:c},s){if(c&&c>=1.1&&a["@protected"]){for(const d of Object.keys(a))if(!t.Util.isReservedInternalKeyword(d)&&!t.Util.isPotentialKeyword(d)&&!t.Util.isTermProtected(a,d)){const l=a[d];l&&typeof l=="object"?"@protected"in a[d]||(a[d]=Object.assign(Object.assign({},a[d]),{"@protected":!0})):(a[d]={"@id":l,"@protected":!0},t.Util.isSimpleTermDefinitionPrefix(l,s)&&(a[d]=Object.assign(Object.assign({},a[d]),{"@prefix":!0})))}delete a["@protected"]}}validateKeywordRedefinitions(a,c,s,d){for(const l of d??Object.keys(c))if(t.Util.isTermProtected(a,l)&&(typeof c[l]=="string"?c[l]={"@id":c[l],"@protected":!0}:c[l]=Object.assign(Object.assign({},c[l]),{"@protected":!0}),!t.Util.deepEqual(a[l],c[l])))throw new n.ErrorCoded(`Attempted to override the protected keyword ${l} from ${JSON.stringify(t.Util.getContextValueId(a[l]))} to ${JSON.stringify(t.Util.getContextValueId(c[l]))}`,n.ERROR_CODES.PROTECTED_TERM_REDEFINITION)}validate(a,{processingMode:c}){for(const s of Object.keys(a)){if(t.Util.isReservedInternalKeyword(s))continue;if(s==="")throw new n.ErrorCoded(`The empty term is not allowed, got: '${s}': '${JSON.stringify(a[s])}'`,n.ERROR_CODES.INVALID_TERM_DEFINITION);const d=a[s],l=typeof d;if(t.Util.isPotentialKeyword(s)){switch(s.substr(1)){case"vocab":if(d!==null&&l!=="string")throw new n.ErrorCoded(`Found an invalid @vocab IRI: ${d}`,n.ERROR_CODES.INVALID_VOCAB_MAPPING);break;case"base":if(d!==null&&l!=="string")throw new n.ErrorCoded(`Found an invalid @base IRI: ${a[s]}`,n.ERROR_CODES.INVALID_BASE_IRI);break;case"language":d!==null&&e.validateLanguage(d,!0,n.ERROR_CODES.INVALID_DEFAULT_LANGUAGE);break;case"version":if(d!==null&&l!=="number")throw new n.ErrorCoded(`Found an invalid @version number: ${d}`,n.ERROR_CODES.INVALID_VERSION_VALUE);break;case"direction":d!==null&&e.validateDirection(d,!0);break;case"propagate":if(c===1)throw new n.ErrorCoded(`Found an illegal @propagate keyword: ${d}`,n.ERROR_CODES.INVALID_CONTEXT_ENTRY);if(d!==null&&l!=="boolean")throw new n.ErrorCoded(`Found an invalid @propagate value: ${d}`,n.ERROR_CODES.INVALID_PROPAGATE_VALUE);break}if(t.Util.isValidKeyword(s)&&t.Util.isValidKeyword(t.Util.getContextValueId(d)))throw new n.ErrorCoded(`Illegal keyword alias in term value, found: '${s}': '${t.Util.getContextValueId(d)}'`,n.ERROR_CODES.KEYWORD_REDEFINITION);continue}if(d!==null)switch(l){case"string":if(t.Util.getPrefix(d,a)===s)throw new n.ErrorCoded(`Detected cyclical IRI mapping in context entry: '${s}': '${JSON.stringify(d)}'`,n.ERROR_CODES.CYCLIC_IRI_MAPPING);if(t.Util.isValidIriWeak(s)){if(d==="@type")throw new n.ErrorCoded(`IRIs can not be mapped to @type, found: '${s}': '${d}'`,n.ERROR_CODES.INVALID_IRI_MAPPING);if(t.Util.isValidIri(d)&&d!==new i.JsonLdContextNormalized(a).expandTerm(s))throw new n.ErrorCoded(`IRIs can not be mapped to other IRIs, found: '${s}': '${d}'`,n.ERROR_CODES.INVALID_IRI_MAPPING)}break;case"object":if(!t.Util.isCompactIri(s)&&!("@id"in d)&&(d["@type"]==="@id"?!a["@base"]:!a["@vocab"]))throw new n.ErrorCoded(`Missing @id in context entry: '${s}': '${JSON.stringify(d)}'`,n.ERROR_CODES.INVALID_IRI_MAPPING);for(const f of Object.keys(d)){const h=d[f];if(h)switch(f){case"@id":if(t.Util.isValidKeyword(h)&&h!=="@type"&&h!=="@id"&&h!=="@graph"&&h!=="@nest")throw new n.ErrorCoded(`Illegal keyword alias in term value, found: '${s}': '${JSON.stringify(d)}'`,n.ERROR_CODES.INVALID_IRI_MAPPING);if(t.Util.isValidIriWeak(s)){if(h==="@type")throw new n.ErrorCoded(`IRIs can not be mapped to @type, found: '${s}': '${JSON.stringify(d)}'`,n.ERROR_CODES.INVALID_IRI_MAPPING);if(t.Util.isValidIri(h)&&h!==new i.JsonLdContextNormalized(a).expandTerm(s))throw new n.ErrorCoded(`IRIs can not be mapped to other IRIs, found: '${s}': '${JSON.stringify(d)}'`,n.ERROR_CODES.INVALID_IRI_MAPPING)}if(typeof h!="string")throw new n.ErrorCoded(`Detected non-string @id in context entry: '${s}': '${JSON.stringify(d)}'`,n.ERROR_CODES.INVALID_IRI_MAPPING);if(t.Util.getPrefix(h,a)===s)throw new n.ErrorCoded(`Detected cyclical IRI mapping in context entry: '${s}': '${JSON.stringify(d)}'`,n.ERROR_CODES.CYCLIC_IRI_MAPPING);break;case"@type":if(d["@container"]==="@type"&&h!=="@id"&&h!=="@vocab")throw new n.ErrorCoded(`@container: @type only allows @type: @id or @vocab, but got: '${s}': '${h}'`,n.ERROR_CODES.INVALID_TYPE_MAPPING);if(typeof h!="string")throw new n.ErrorCoded(`The value of an '@type' must be a string, got '${JSON.stringify(l)}'`,n.ERROR_CODES.INVALID_TYPE_MAPPING);if(h!=="@id"&&h!=="@vocab"&&(c===1||h!=="@json")&&(c===1||h!=="@none")&&(h[0]==="_"||!t.Util.isValidIri(h)))throw new n.ErrorCoded(`A context @type must be an absolute IRI, found: '${s}': '${h}'`,n.ERROR_CODES.INVALID_TYPE_MAPPING);break;case"@reverse":if(typeof h=="string"&&d["@id"]&&d["@id"]!==h)throw new n.ErrorCoded(`Found non-matching @id and @reverse term values in '${s}':'${h}' and '${d["@id"]}'`,n.ERROR_CODES.INVALID_REVERSE_PROPERTY);if("@nest"in d)throw new n.ErrorCoded(`@nest is not allowed in the reverse property '${s}'`,n.ERROR_CODES.INVALID_REVERSE_PROPERTY);break;case"@container":if(c===1&&(Object.keys(h).length>1||t.Util.CONTAINERS_1_0.indexOf(Object.keys(h)[0])<0))throw new n.ErrorCoded(`Invalid term @container for '${s}' ('${Object.keys(h)}') in 1.0, must be only one of ${t.Util.CONTAINERS_1_0.join(", ")}`,n.ERROR_CODES.INVALID_CONTAINER_MAPPING);for(const p of Object.keys(h)){if(p==="@list"&&d["@reverse"])throw new n.ErrorCoded(`Term value can not be @container: @list and @reverse at the same time on '${s}'`,n.ERROR_CODES.INVALID_REVERSE_PROPERTY);if(t.Util.CONTAINERS.indexOf(p)<0)throw new n.ErrorCoded(`Invalid term @container for '${s}' ('${p}'), must be one of ${t.Util.CONTAINERS.join(", ")}`,n.ERROR_CODES.INVALID_CONTAINER_MAPPING)}break;case"@language":e.validateLanguage(h,!0,n.ERROR_CODES.INVALID_LANGUAGE_MAPPING);break;case"@direction":e.validateDirection(h,!0);break;case"@prefix":if(h!==null&&typeof h!="boolean")throw new n.ErrorCoded(`Found an invalid term @prefix boolean in: '${s}': '${JSON.stringify(d)}'`,n.ERROR_CODES.INVALID_PREFIX_VALUE);if(!("@id"in d)&&!t.Util.isValidIri(s))throw new n.ErrorCoded(`Invalid @prefix definition for '${s}' ('${JSON.stringify(d)}'`,n.ERROR_CODES.INVALID_TERM_DEFINITION);break;case"@index":if(c===1||!d["@container"]||!d["@container"]["@index"])throw new n.ErrorCoded(`Attempt to add illegal key to value object: '${s}': '${JSON.stringify(d)}'`,n.ERROR_CODES.INVALID_TERM_DEFINITION);break;case"@nest":if(t.Util.isPotentialKeyword(h)&&h!=="@nest")throw new n.ErrorCoded(`Found an invalid term @nest value in: '${s}': '${JSON.stringify(d)}'`,n.ERROR_CODES.INVALID_NEST_VALUE)}}break;default:throw new n.ErrorCoded(`Found an invalid term value: '${s}': '${d}'`,n.ERROR_CODES.INVALID_TERM_DEFINITION)}}}applyBaseEntry(a,c,s){return typeof a=="string"||(s&&!("@base"in a)&&c.parentContext&&typeof c.parentContext=="object"&&"@base"in c.parentContext&&(a["@base"]=c.parentContext["@base"],c.parentContext["@__baseDocument"]&&(a["@__baseDocument"]=!0)),c.baseIRI&&!c.external&&("@base"in a?a["@base"]!==null&&typeof a["@base"]=="string"&&!t.Util.isValidIri(a["@base"])&&(a["@base"]=(0,u.resolve)(a["@base"],c.parentContext&&c.parentContext["@base"]||c.baseIRI)):(a["@base"]=c.baseIRI,a["@__baseDocument"]=!0))),a}normalizeContextIri(a,c){if(!t.Util.isValidIri(a))try{a=(0,u.resolve)(a,c)}catch{throw new Error(`Invalid context IRI: ${a}`)}return this.redirectSchemaOrgHttps&&a.startsWith("http://schema.org")&&(a="https://schema.org/"),a}async parseInnerContexts(a,c,s){for(const d of s??Object.keys(a)){const l=a[d];if(l&&typeof l=="object"&&"@context"in l&&l["@context"]!==null&&!c.ignoreScopedContexts){if(this.validateContext)try{const f=Object.assign(Object.assign({},a),{[d]:Object.assign({},a[d])});delete f[d]["@context"],await this.parse(l["@context"],Object.assign(Object.assign({},c),{external:!1,parentContext:f,ignoreProtection:!0,ignoreRemoteScopedContexts:!0,ignoreScopedContexts:!0}))}catch(f){throw new n.ErrorCoded(f.message,n.ERROR_CODES.INVALID_SCOPED_CONTEXT)}a[d]=Object.assign(Object.assign({},l),{"@context":(await this.parse(l["@context"],Object.assign(Object.assign({},c),{external:!1,minimalProcessing:!0,ignoreRemoteScopedContexts:!0,parentContext:a}))).getContextRaw()})}}return a}async parse(a,c={},s={}){const{baseIRI:d,parentContext:l,external:f,processingMode:h=e.DEFAULT_PROCESSING_MODE,normalizeLanguageTags:p,ignoreProtection:y,minimalProcessing:_}=c,b=c.remoteContexts||{};if(Object.keys(b).length>=this.remoteContextsDepthLimit)throw new n.ErrorCoded("Detected an overflow in remote context inclusions: "+Object.keys(b),n.ERROR_CODES.CONTEXT_OVERFLOW);if(a==null){if(!y&&l&&t.Util.hasProtectedTerms(l))throw new n.ErrorCoded("Illegal context nullification when terms are protected",n.ERROR_CODES.INVALID_CONTEXT_NULLIFICATION);return new i.JsonLdContextNormalized(this.applyBaseEntry({},c,!1))}else if(typeof a=="string"){const m=this.normalizeContextIri(a,d),g=this.getOverriddenLoad(m,c);if(g)return new i.JsonLdContextNormalized(g);const T=await this.parse(await this.load(m),Object.assign(Object.assign({},c),{baseIRI:m,external:!0,remoteContexts:Object.assign(Object.assign({},b),{[m]:!0})}));return this.applyBaseEntry(T.getContextRaw(),c,!0),T}else if(Array.isArray(a)){const m=[],g=await Promise.all(a.map((v,S)=>{if(typeof v=="string"){const F=this.normalizeContextIri(v,d);m[S]=F;const M=this.getOverriddenLoad(F,c);return M||this.load(F)}else return v}));if(_)return new i.JsonLdContextNormalized(g);const T=await g.reduce((v,S,F)=>v.then(M=>this.parse(S,Object.assign(Object.assign({},c),{baseIRI:m[F]||c.baseIRI,external:!!m[F]||c.external,parentContext:M.getContextRaw(),remoteContexts:m[F]?Object.assign(Object.assign({},b),{[m[F]]:!0}):b}),{skipValidation:F<g.length-1})),Promise.resolve(new i.JsonLdContextNormalized(l||{})));return this.applyBaseEntry(T.getContextRaw(),c,!0),T}else if(typeof a=="object"){if("@context"in a)return await this.parse(a["@context"],c);if(a=Object.assign({},a),f&&delete a["@base"],this.applyBaseEntry(a,c,!0),this.containersToHash(a),_)return new i.JsonLdContextNormalized(a);let m={};if("@import"in a)if(h>=1.1){if(typeof a["@import"]!="string")throw new n.ErrorCoded("An @import value must be a string, but got "+typeof a["@import"],n.ERROR_CODES.INVALID_IMPORT_VALUE);m=await this.loadImportContext(this.normalizeContextIri(a["@import"],d)),delete a["@import"]}else throw new n.ErrorCoded("Context importing is not supported in JSON-LD 1.0",n.ERROR_CODES.INVALID_CONTEXT_ENTRY);this.applyScopedProtected(m,{processingMode:h},i.defaultExpandOptions);const g=Object.assign(m,a);this.idifyReverseTerms(g),this.normalize(g,{processingMode:h,normalizeLanguageTags:p}),this.applyScopedProtected(g,{processingMode:h},i.defaultExpandOptions);const T=Object.keys(g),v=[];if(typeof l=="object")for(const F in l)F in g?v.push(F):g[F]=l[F];await this.parseInnerContexts(g,c,T);const S=new i.JsonLdContextNormalized(g);return(g&&g["@version"]||e.DEFAULT_PROCESSING_MODE)>=1.1&&(a["@vocab"]&&typeof a["@vocab"]=="string"||a["@vocab"]==="")&&(l&&"@vocab"in l&&a["@vocab"].indexOf(":")<0?g["@vocab"]=l["@vocab"]+a["@vocab"]:(t.Util.isCompactIri(a["@vocab"])||a["@vocab"]in g)&&(g["@vocab"]=S.expandTerm(a["@vocab"],!0))),this.expandPrefixedTerms(S,this.expandContentTypeToBase,T),!y&&l&&h>=1.1&&this.validateKeywordRedefinitions(l,g,i.defaultExpandOptions,v),this.validateContext&&!s.skipValidation&&this.validate(g,{processingMode:h}),S}else throw new n.ErrorCoded(`Tried parsing a context that is not a string, array or object, but got ${a}`,n.ERROR_CODES.INVALID_LOCAL_CONTEXT)}async load(a){const c=this.documentCache[a];if(c)return c;let s;try{s=await this.documentLoader.load(a)}catch(d){throw new n.ErrorCoded(`Failed to load remote context ${a}: ${d.message}`,n.ERROR_CODES.LOADING_REMOTE_CONTEXT_FAILED)}if(!("@context"in s))throw new n.ErrorCoded(`Missing @context in remote context at ${a}`,n.ERROR_CODES.INVALID_REMOTE_CONTEXT);return this.documentCache[a]=s["@context"]}getOverriddenLoad(a,c){if(a in(c.remoteContexts||{})){if(c.ignoreRemoteScopedContexts)return a;throw new n.ErrorCoded("Detected a cyclic context inclusion of "+a,n.ERROR_CODES.RECURSIVE_CONTEXT_INCLUSION)}return null}async loadImportContext(a){let c=await this.load(a);if(typeof c!="object"||Array.isArray(c))throw new n.ErrorCoded("An imported context must be a single object: "+a,n.ERROR_CODES.INVALID_REMOTE_CONTEXT);if("@import"in c)throw new n.ErrorCoded("An imported context can not import another context: "+a,n.ERROR_CODES.INVALID_CONTEXT_ENTRY);return c=Object.assign({},c),this.containersToHash(c),c}}return e.DEFAULT_PROCESSING_MODE=1.1,d0.ContextParser=e,d0}var HO={},$P;function FY(){return $P||($P=1,Object.defineProperty(HO,"__esModule",{value:!0})),HO}var GO={},UP;function IY(){return UP||(UP=1,Object.defineProperty(GO,"__esModule",{value:!0})),GO}var VP;function wr(){return VP||(VP=1,(function(u){var n=ou&&ou.__createBinding||(Object.create?(function(i,t,e,r){r===void 0&&(r=e);var a=Object.getOwnPropertyDescriptor(t,e);(!a||("get"in a?!t.__esModule:a.writable||a.configurable))&&(a={enumerable:!0,get:function(){return t[e]}}),Object.defineProperty(i,r,a)}):(function(i,t,e,r){r===void 0&&(r=e),i[r]=t[e]})),o=ou&&ou.__exportStar||function(i,t){for(var e in i)e!=="default"&&!Object.prototype.hasOwnProperty.call(t,e)&&n(t,i,e)};Object.defineProperty(u,"__esModule",{value:!0}),o(RY(),u),o(l0(),u),o(LP(),u),o(FY(),u),o(IY(),u),o(CP(),u),o(QO(),u)})(ou)),ou}var QP;function HP(){if(QP)return c0;QP=1,Object.defineProperty(c0,"__esModule",{value:!0}),c0.Util=void 0;const u=hr(),n=wr(),o=st();class i{constructor(e){this.nodeHandlers={},this.nodeValueHandlers={},this.directiveNodeHandlers={},this.settings=e,this.dataFactory=e.dataFactory||new u.DataFactory,this.operationFactory=new o.Factory(this.dataFactory),this.contextParser=new n.ContextParser}registerNodeHandler(e){this.nodeHandlers[e.targetKind]=e}registerNodeValueHandler(e){this.nodeValueHandlers[e.targetKind]=e}registerDirectiveNodeHandler(e){this.directiveNodeHandlers[e.targetKind]=e}handleNode(e,r){const a=this.nodeHandlers[e.kind];if(!a)throw new Error(`Unsupported GraphQL node '${e.kind}'`);return a.handle(e,r)}handleNodeValue(e,r,a){const c=this.nodeValueHandlers[e.kind];if(!c)throw new Error(`Unsupported GraphQL value node '${e.kind}'`);return c.handle(e,r,a)}handleDirectiveNode(e,r){const a=this.directiveNodeHandlers[e.directive.name.value];return a?a.handle(e,r):null}joinOperations(e){if(e.length===1)return e[0];const r=[],a=[];for(const c of e)c.type==="bgp"?r.push(c):a.push(c);if(r.length===e.length)return this.joinOperationsAsBgp(r);if(r.length===e.length-1&&a[0].type==="leftjoin"&&a[0].input[0].type==="bgp"){const c=a[0];return r.push(c.input[0]),this.operationFactory.createLeftJoin(this.joinOperationsAsBgp(r),c.input[1])}else return a.length===e.length?this.joinOperationsAsNestedJoin(a):this.joinOperationsAsNestedJoin([this.joinOperationsAsBgp(r),this.joinOperationsAsNestedJoin(a)])}joinOperationsAsBgp(e){return this.operationFactory.createBgp([].concat.apply([],e.map(r=>r.patterns)))}joinOperationsAsNestedJoin(e){return this.operationFactory.createJoin(e)}appendFieldToPath(e,r){return e.concat([r])}getFieldLabel(e){return(e.alias?e.alias:e.name).value}nameToVariable(e,r){return this.dataFactory.variable((r.path.length?r.path.join(this.settings.variableDelimiter)+this.settings.variableDelimiter:"")+e)}valueToNamedNode(e,r){const a=r.expandTerm(e,!0);if(this.settings.requireContext&&!a)throw new Error("No context entry was found for "+e);return this.dataFactory.namedNode(a||e)}getArgument(e,r){if(e){for(const a of e)if(a.name.value===r)return a}}newTypePattern(e,r,a){return this.operationFactory.createPattern(e,this.dataFactory.namedNode("http://www.w3.org/1999/02/22-rdf-syntax-ns#type"),this.valueToNamedNode(r.name.value,a.context),a.graph)}createQuadPattern(e,r,a,c,s){const d=this.valueToNamedNode(r.value,s);return s&&s.getContextRaw()[r.value]&&s.getContextRaw()[r.value]["@reverse"]?this.operationFactory.createPattern(a,d,e,c):this.operationFactory.createPattern(e,d,a,c)}createQuadPath(e,r,a,c,s,d){const l=this.valueToNamedNode(r.value,d);let f=this.operationFactory.createLink(l);for(const h of a.values){if(h.kind!=="EnumValue")throw new Error("Invalid value type for 'alt' argument, must be EnumValue, but got "+h.kind);f=this.operationFactory.createAlt([f,this.operationFactory.createLink(this.valueToNamedNode(h.value,d))])}return d&&d.getContextRaw()[r.value]&&d.getContextRaw()[r.value]["@reverse"]?this.operationFactory.createPath(c,f,e,s):this.operationFactory.createPath(e,f,c,s)}}return c0.Util=i,c0}var GP;function PY(){if(GP)return au;GP=1;var u=au&&au.__awaiter||function(a,c,s,d){function l(f){return f instanceof s?f:new s(function(h){h(f)})}return new(s||(s=Promise))(function(f,h){function p(b){try{_(d.next(b))}catch(m){h(m)}}function y(b){try{_(d.throw(b))}catch(m){h(m)}}function _(b){b.done?f(b.value):l(b.value).then(p,y)}_((d=d.apply(a,c||[])).next())})};Object.defineProperty(au,"__esModule",{value:!0}),au.Converter=void 0;const n=EY,o=oP(),i=B4(),t=Cp(),e=HP();class r{constructor(c){c=c||{},c.variableDelimiter=c.variableDelimiter||"_",c.expressionVariableCounter=c.expressionVariableCounter||0,this.util=new e.Util(c),this.initializeNodeHandlers(c)}static registerNodeHandlers(c,s){c.registerNodeHandler(new o.NodeHandlerDocument(c,s)),c.registerNodeHandler(new o.NodeHandlerDefinitionOperation(c,s)),c.registerNodeHandler(new o.NodeHandlerDefinitionFragment(c,s)),c.registerNodeHandler(new o.NodeHandlerSelectionFragmentSpread(c,s)),c.registerNodeHandler(new o.NodeHandlerSelectionInlineFragment(c,s)),c.registerNodeHandler(new o.NodeHandlerSelectionField(c,s))}static registerNodeValueHandlers(c,s){c.registerNodeValueHandler(new o.NodeValueHandlerVariable(c,s)),c.registerNodeValueHandler(new o.NodeValueHandlerInt(c,s)),c.registerNodeValueHandler(new o.NodeValueHandlerFloat(c,s)),c.registerNodeValueHandler(new o.NodeValueHandlerString(c,s)),c.registerNodeValueHandler(new o.NodeValueHandlerBoolean(c,s)),c.registerNodeValueHandler(new o.NodeValueHandlerNull(c,s)),c.registerNodeValueHandler(new o.NodeValueHandlerEnum(c,s)),c.registerNodeValueHandler(new o.NodeValueHandlerList(c,s)),c.registerNodeValueHandler(new o.NodeValueHandlerObject(c,s))}static registerDirectiveNodeHandlers(c,s){c.registerDirectiveNodeHandler(new i.DirectiveNodeHandlerInclude(c,s)),c.registerDirectiveNodeHandler(new i.DirectiveNodeHandlerOptional(c,s)),c.registerDirectiveNodeHandler(new i.DirectiveNodeHandlerPlural(c,s)),c.registerDirectiveNodeHandler(new i.DirectiveNodeHandlerSingle(c,s)),c.registerDirectiveNodeHandler(new i.DirectiveNodeHandlerSkip(c,s))}graphqlToSparqlAlgebra(c,s,d){return u(this,void 0,void 0,function*(){return this.graphqlToSparqlAlgebraRawContext(c,yield this.util.contextParser.parse(s),d)})}graphqlToSparqlAlgebraRawContext(c,s,d){d=d||{};const l=typeof c=="string"?(0,n.parse)(c):c,f=this.indexFragments(l),h={context:s,fragmentDefinitions:f,graph:this.util.dataFactory.defaultGraph(),path:[],singularizeState:t.SingularizeState.PLURAL,singularizeVariables:d.singularizeVariables||{},subject:null,terminalVariables:[],variablesDict:d.variablesDict||{},variablesMetaDict:{}};return this.util.handleNode(l,h)}indexFragments(c){const s={},d=[];for(const l of c.definitions)l.kind==="FragmentDefinition"?s[l.name.value]=l:d.push(l);return c.definitions=d,s}initializeNodeHandlers(c){r.registerNodeHandlers(this.util,c),r.registerNodeValueHandlers(this.util,c),r.registerDirectiveNodeHandlers(this.util,c)}}return au.Converter=r,au}var zO={},zP;function DY(){return zP||(zP=1,Object.defineProperty(zO,"__esModule",{value:!0})),zO}var XP;function NY(){return XP||(XP=1,(function(u){var n=tu&&tu.__createBinding||(Object.create?(function(i,t,e,r){r===void 0&&(r=e);var a=Object.getOwnPropertyDescriptor(t,e);(!a||("get"in a?!t.__esModule:a.writable||a.configurable))&&(a={enumerable:!0,get:function(){return t[e]}}),Object.defineProperty(i,r,a)}):(function(i,t,e,r){r===void 0&&(r=e),i[r]=t[e]})),o=tu&&tu.__exportStar||function(i,t){for(var e in i)e!=="default"&&!Object.prototype.hasOwnProperty.call(t,e)&&n(t,i,e)};Object.defineProperty(u,"__esModule",{value:!0}),o(oP(),u),o(PY(),u),o(Cp(),u),o(DY(),u),o(HP(),u)})(tu)),tu}var JP;function jY(){if(JP)return Np;JP=1,Object.defineProperty(Np,"__esModule",{value:!0}),Np.ActorQueryParseGraphql=void 0;const u=R4(),n=qe(),o=pe(),i=NY();let t=class extends u.ActorQueryParse{constructor(r){super(r),this.graphqlToSparql=new i.Converter({requireContext:!0})}async test(r){var a;return((a=r.queryFormat)==null?void 0:a.language)!=="graphql"?(0,o.failTest)("This actor can only parse GraphQL queries"):(0,o.passTestVoid)()}async run(r){const a=r.context.get(n.KeysInitQuery.jsonLdContext)||{},c={singularizeVariables:r.context.get(n.KeysInitQuery.graphqlSingularizeVariables)};return{operation:await this.graphqlToSparql.graphqlToSparqlAlgebra(r.query,a,c)}}};return Np.ActorQueryParseGraphql=t,Np}var KP;function LY(){return KP||(KP=1,(function(u){var n=eu&&eu.__createBinding||(Object.create?(function(i,t,e,r){r===void 0&&(r=e);var a=Object.getOwnPropertyDescriptor(t,e);(!a||("get"in a?!t.__esModule:a.writable||a.configurable))&&(a={enumerable:!0,get:function(){return t[e]}}),Object.defineProperty(i,r,a)}):(function(i,t,e,r){r===void 0&&(r=e),i[r]=t[e]})),o=eu&&eu.__exportStar||function(i,t){for(var e in i)e!=="default"&&!Object.prototype.hasOwnProperty.call(t,e)&&n(t,i,e)};Object.defineProperty(u,"__esModule",{value:!0}),o(jY(),u)})(eu)),eu}var cu={},p0={},du={},y0={},lu={},b0={},kP;function WP(){if(kP)return b0;kP=1,Object.defineProperty(b0,"__esModule",{value:!0}),b0.ActorAbstractMediaTyped=void 0;const u=pe();let n=class extends u.Actor{constructor(i){super(i)}async run(i){if("handle"in i){const t=i;return{handle:await this.runHandle(t.handle,t.handleMediaType,i.context)}}if("mediaTypes"in i)return{mediaTypes:await this.getMediaTypes(i.context)};if("mediaTypeFormats"in i)return{mediaTypeFormats:await this.getMediaTypeFormats(i.context)};throw new Error("Either a handle, mediaTypes or mediaTypeFormats action needs to be provided")}async test(i){if("handle"in i){const t=i;return(await this.testHandle(t.handle,t.handleMediaType,i.context)).map(e=>({handle:e}))}return"mediaTypes"in i?(await this.testMediaType(i.context)).map(t=>({mediaTypes:t})):"mediaTypeFormats"in i?(await this.testMediaTypeFormats(i.context)).map(t=>({mediaTypeFormats:t})):(0,u.failTest)("Either a handle, mediaTypes or mediaTypeFormats action needs to be provided")}};return b0.ActorAbstractMediaTyped=n,b0}var _0={},YP;function MY(){if(YP)return _0;YP=1,Object.defineProperty(_0,"__esModule",{value:!0}),_0.ActorAbstractMediaTypedFixed=void 0;const u=pe(),n=WP();let o=class extends n.ActorAbstractMediaTyped{constructor(t){super(t);const e=this.priorityScale||this.priorityScale===0?this.priorityScale:1;if(this.mediaTypePriorities)for(const[r,[a,c]]of Object.entries(this.mediaTypePriorities).entries())this.mediaTypePriorities[a]=e*c;this.mediaTypePriorities=Object.freeze(this.mediaTypePriorities),this.mediaTypeFormats=Object.freeze(this.mediaTypeFormats)}async testHandle(t,e,r){return!e||!(e in this.mediaTypePriorities)?(0,u.failTest)(`Unrecognized media type: ${e}`):await this.testHandleChecked(t,r)}async testMediaType(t){return(0,u.passTestVoid)()}async getMediaTypes(t){return this.mediaTypePriorities}async testMediaTypeFormats(t){return(0,u.passTestVoid)()}async getMediaTypeFormats(t){return this.mediaTypeFormats}};return _0.ActorAbstractMediaTypedFixed=o,_0}var ZP;function yf(){return ZP||(ZP=1,(function(u){var n=lu&&lu.__createBinding||(Object.create?(function(i,t,e,r){r===void 0&&(r=e);var a=Object.getOwnPropertyDescriptor(t,e);(!a||("get"in a?!t.__esModule:a.writable||a.configurable))&&(a={enumerable:!0,get:function(){return t[e]}}),Object.defineProperty(i,r,a)}):(function(i,t,e,r){r===void 0&&(r=e),i[r]=t[e]})),o=lu&&lu.__exportStar||function(i,t){for(var e in i)e!=="default"&&!Object.prototype.hasOwnProperty.call(t,e)&&n(t,i,e)};Object.defineProperty(u,"__esModule",{value:!0}),o(WP(),u),o(MY(),u)})(lu)),lu}var eD;function qY(){if(eD)return y0;eD=1,Object.defineProperty(y0,"__esModule",{value:!0}),y0.ActorQueryResultSerialize=void 0;const u=yf();let n=class extends u.ActorAbstractMediaTyped{constructor(i){super(i)}};return y0.ActorQueryResultSerialize=n,y0}var g0={},tD;function CY(){if(tD)return g0;tD=1,Object.defineProperty(g0,"__esModule",{value:!0}),g0.ActorQueryResultSerializeFixedMediaTypes=void 0;const u=yf(),n=pe();let o=class extends u.ActorAbstractMediaTypedFixed{constructor(t){super(t)}async testHandleChecked(t,e){return(0,n.passTestVoid)()}};return g0.ActorQueryResultSerializeFixedMediaTypes=o,g0}var rD;function Kn(){return rD||(rD=1,(function(u){var n=du&&du.__createBinding||(Object.create?(function(i,t,e,r){r===void 0&&(r=e);var a=Object.getOwnPropertyDescriptor(t,e);(!a||("get"in a?!t.__esModule:a.writable||a.configurable))&&(a={enumerable:!0,get:function(){return t[e]}}),Object.defineProperty(i,r,a)}):(function(i,t,e,r){r===void 0&&(r=e),i[r]=t[e]})),o=du&&du.__exportStar||function(i,t){for(var e in i)e!=="default"&&!Object.prototype.hasOwnProperty.call(t,e)&&n(t,i,e)};Object.defineProperty(u,"__esModule",{value:!0}),o(qY(),u),o(CY(),u)})(du)),du}var XO={exports:{}},JO={exports:{}},KO={},m0={},nD;function BY(){if(nD)return m0;nD=1,m0.byteLength=a,m0.toByteArray=s,m0.fromByteArray=f;for(var u=[],n=[],o=typeof Uint8Array<"u"?Uint8Array:Array,i="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",t=0,e=i.length;t<e;++t)u[t]=i[t],n[i.charCodeAt(t)]=t;n[45]=62,n[95]=63;function r(h){var p=h.length;if(p%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var y=h.indexOf("=");y===-1&&(y=p);var _=y===p?0:4-y%4;return[y,_]}function a(h){var p=r(h),y=p[0],_=p[1];return(y+_)*3/4-_}function c(h,p,y){return(p+y)*3/4-y}function s(h){var p,y=r(h),_=y[0],b=y[1],m=new o(c(h,_,b)),g=0,T=b>0?_-4:_,v;for(v=0;v<T;v+=4)p=n[h.charCodeAt(v)]<<18|n[h.charCodeAt(v+1)]<<12|n[h.charCodeAt(v+2)]<<6|n[h.charCodeAt(v+3)],m[g++]=p>>16&255,m[g++]=p>>8&255,m[g++]=p&255;return b===2&&(p=n[h.charCodeAt(v)]<<2|n[h.charCodeAt(v+1)]>>4,m[g++]=p&255),b===1&&(p=n[h.charCodeAt(v)]<<10|n[h.charCodeAt(v+1)]<<4|n[h.charCodeAt(v+2)]>>2,m[g++]=p>>8&255,m[g++]=p&255),m}function d(h){return u[h>>18&63]+u[h>>12&63]+u[h>>6&63]+u[h&63]}function l(h,p,y){for(var _,b=[],m=p;m<y;m+=3)_=(h[m]<<16&16711680)+(h[m+1]<<8&65280)+(h[m+2]&255),b.push(d(_));return b.join("")}function f(h){for(var p,y=h.length,_=y%3,b=[],m=16383,g=0,T=y-_;g<T;g+=m)b.push(l(h,g,g+m>T?T:g+m));return _===1?(p=h[y-1],b.push(u[p>>2]+u[p<<4&63]+"==")):_===2&&(p=(h[y-2]<<8)+h[y-1],b.push(u[p>>10]+u[p>>4&63]+u[p<<2&63]+"=")),b.join("")}return m0}var b3={};/*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> */var iD;function $Y(){return iD||(iD=1,b3.read=function(u,n,o,i,t){var e,r,a=t*8-i-1,c=(1<<a)-1,s=c>>1,d=-7,l=o?t-1:0,f=o?-1:1,h=u[n+l];for(l+=f,e=h&(1<<-d)-1,h>>=-d,d+=a;d>0;e=e*256+u[n+l],l+=f,d-=8);for(r=e&(1<<-d)-1,e>>=-d,d+=i;d>0;r=r*256+u[n+l],l+=f,d-=8);if(e===0)e=1-s;else{if(e===c)return r?NaN:(h?-1:1)*(1/0);r=r+Math.pow(2,i),e=e-s}return(h?-1:1)*r*Math.pow(2,e-i)},b3.write=function(u,n,o,i,t,e){var r,a,c,s=e*8-t-1,d=(1<<s)-1,l=d>>1,f=t===23?Math.pow(2,-24)-Math.pow(2,-77):0,h=i?0:e-1,p=i?1:-1,y=n<0||n===0&&1/n<0?1:0;for(n=Math.abs(n),isNaN(n)||n===1/0?(a=isNaN(n)?1:0,r=d):(r=Math.floor(Math.log(n)/Math.LN2),n*(c=Math.pow(2,-r))<1&&(r--,c*=2),r+l>=1?n+=f/c:n+=f*Math.pow(2,1-l),n*c>=2&&(r++,c/=2),r+l>=d?(a=0,r=d):r+l>=1?(a=(n*c-1)*Math.pow(2,t),r=r+l):(a=n*Math.pow(2,l-1)*Math.pow(2,t),r=0));t>=8;u[o+h]=a&255,h+=p,a/=256,t-=8);for(r=r<<t|a,s+=t;s>0;u[o+h]=r&255,h+=p,r/=256,s-=8);u[o+h-p]|=y*128}),b3}/*!
 * The buffer module from node.js, for the browser.
 *
 * @author   Feross Aboukhadijeh <https://feross.org>
 * @license  MIT
 */var aD;function kn(){return aD||(aD=1,(function(u){const n=BY(),o=$Y(),i=typeof Symbol=="function"&&typeof Symbol.for=="function"?Symbol.for("nodejs.util.inspect.custom"):null;u.Buffer=a,u.SlowBuffer=m,u.INSPECT_MAX_BYTES=50;const t=2147483647;u.kMaxLength=t,a.TYPED_ARRAY_SUPPORT=e(),!a.TYPED_ARRAY_SUPPORT&&typeof console<"u"&&typeof console.error=="function"&&console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support.");function e(){try{const L=new Uint8Array(1),x={foo:function(){return 42}};return Object.setPrototypeOf(x,Uint8Array.prototype),Object.setPrototypeOf(L,x),L.foo()===42}catch{return!1}}Object.defineProperty(a.prototype,"parent",{enumerable:!0,get:function(){if(a.isBuffer(this))return this.buffer}}),Object.defineProperty(a.prototype,"offset",{enumerable:!0,get:function(){if(a.isBuffer(this))return this.byteOffset}});function r(L){if(L>t)throw new RangeError('The value "'+L+'" is invalid for option "size"');const x=new Uint8Array(L);return Object.setPrototypeOf(x,a.prototype),x}function a(L,x,j){if(typeof L=="number"){if(typeof x=="string")throw new TypeError('The "string" argument must be of type string. Received type number');return l(L)}return c(L,x,j)}a.poolSize=8192;function c(L,x,j){if(typeof L=="string")return f(L,x);if(ArrayBuffer.isView(L))return p(L);if(L==null)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof L);if(se(L,ArrayBuffer)||L&&se(L.buffer,ArrayBuffer)||typeof SharedArrayBuffer<"u"&&(se(L,SharedArrayBuffer)||L&&se(L.buffer,SharedArrayBuffer)))return y(L,x,j);if(typeof L=="number")throw new TypeError('The "value" argument must not be of type number. Received type number');const z=L.valueOf&&L.valueOf();if(z!=null&&z!==L)return a.from(z,x,j);const W=_(L);if(W)return W;if(typeof Symbol<"u"&&Symbol.toPrimitive!=null&&typeof L[Symbol.toPrimitive]=="function")return a.from(L[Symbol.toPrimitive]("string"),x,j);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof L)}a.from=function(L,x,j){return c(L,x,j)},Object.setPrototypeOf(a.prototype,Uint8Array.prototype),Object.setPrototypeOf(a,Uint8Array);function s(L){if(typeof L!="number")throw new TypeError('"size" argument must be of type number');if(L<0)throw new RangeError('The value "'+L+'" is invalid for option "size"')}function d(L,x,j){return s(L),L<=0?r(L):x!==void 0?typeof j=="string"?r(L).fill(x,j):r(L).fill(x):r(L)}a.alloc=function(L,x,j){return d(L,x,j)};function l(L){return s(L),r(L<0?0:b(L)|0)}a.allocUnsafe=function(L){return l(L)},a.allocUnsafeSlow=function(L){return l(L)};function f(L,x){if((typeof x!="string"||x==="")&&(x="utf8"),!a.isEncoding(x))throw new TypeError("Unknown encoding: "+x);const j=g(L,x)|0;let z=r(j);const W=z.write(L,x);return W!==j&&(z=z.slice(0,W)),z}function h(L){const x=L.length<0?0:b(L.length)|0,j=r(x);for(let z=0;z<x;z+=1)j[z]=L[z]&255;return j}function p(L){if(se(L,Uint8Array)){const x=new Uint8Array(L);return y(x.buffer,x.byteOffset,x.byteLength)}return h(L)}function y(L,x,j){if(x<0||L.byteLength<x)throw new RangeError('"offset" is outside of buffer bounds');if(L.byteLength<x+(j||0))throw new RangeError('"length" is outside of buffer bounds');let z;return x===void 0&&j===void 0?z=new Uint8Array(L):j===void 0?z=new Uint8Array(L,x):z=new Uint8Array(L,x,j),Object.setPrototypeOf(z,a.prototype),z}function _(L){if(a.isBuffer(L)){const x=b(L.length)|0,j=r(x);return j.length===0||L.copy(j,0,0,x),j}if(L.length!==void 0)return typeof L.length!="number"||Se(L.length)?r(0):h(L);if(L.type==="Buffer"&&Array.isArray(L.data))return h(L.data)}function b(L){if(L>=t)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+t.toString(16)+" bytes");return L|0}function m(L){return+L!=L&&(L=0),a.alloc(+L)}a.isBuffer=function(x){return x!=null&&x._isBuffer===!0&&x!==a.prototype},a.compare=function(x,j){if(se(x,Uint8Array)&&(x=a.from(x,x.offset,x.byteLength)),se(j,Uint8Array)&&(j=a.from(j,j.offset,j.byteLength)),!a.isBuffer(x)||!a.isBuffer(j))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(x===j)return 0;let z=x.length,W=j.length;for(let le=0,ae=Math.min(z,W);le<ae;++le)if(x[le]!==j[le]){z=x[le],W=j[le];break}return z<W?-1:W<z?1:0},a.isEncoding=function(x){switch(String(x).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},a.concat=function(x,j){if(!Array.isArray(x))throw new TypeError('"list" argument must be an Array of Buffers');if(x.length===0)return a.alloc(0);let z;if(j===void 0)for(j=0,z=0;z<x.length;++z)j+=x[z].length;const W=a.allocUnsafe(j);let le=0;for(z=0;z<x.length;++z){let ae=x[z];if(se(ae,Uint8Array))le+ae.length>W.length?(a.isBuffer(ae)||(ae=a.from(ae)),ae.copy(W,le)):Uint8Array.prototype.set.call(W,ae,le);else if(a.isBuffer(ae))ae.copy(W,le);else throw new TypeError('"list" argument must be an Array of Buffers');le+=ae.length}return W};function g(L,x){if(a.isBuffer(L))return L.length;if(ArrayBuffer.isView(L)||se(L,ArrayBuffer))return L.byteLength;if(typeof L!="string")throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof L);const j=L.length,z=arguments.length>2&&arguments[2]===!0;if(!z&&j===0)return 0;let W=!1;for(;;)switch(x){case"ascii":case"latin1":case"binary":return j;case"utf8":case"utf-8":return U(L).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return j*2;case"hex":return j>>>1;case"base64":return k(L).length;default:if(W)return z?-1:U(L).length;x=(""+x).toLowerCase(),W=!0}}a.byteLength=g;function T(L,x,j){let z=!1;if((x===void 0||x<0)&&(x=0),x>this.length||((j===void 0||j>this.length)&&(j=this.length),j<=0)||(j>>>=0,x>>>=0,j<=x))return"";for(L||(L="utf8");;)switch(L){case"hex":return ce(this,x,j);case"utf8":case"utf-8":return B(this,x,j);case"ascii":return Z(this,x,j);case"latin1":case"binary":return ee(this,x,j);case"base64":return D(this,x,j);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return G(this,x,j);default:if(z)throw new TypeError("Unknown encoding: "+L);L=(L+"").toLowerCase(),z=!0}}a.prototype._isBuffer=!0;function v(L,x,j){const z=L[x];L[x]=L[j],L[j]=z}a.prototype.swap16=function(){const x=this.length;if(x%2!==0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(let j=0;j<x;j+=2)v(this,j,j+1);return this},a.prototype.swap32=function(){const x=this.length;if(x%4!==0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(let j=0;j<x;j+=4)v(this,j,j+3),v(this,j+1,j+2);return this},a.prototype.swap64=function(){const x=this.length;if(x%8!==0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(let j=0;j<x;j+=8)v(this,j,j+7),v(this,j+1,j+6),v(this,j+2,j+5),v(this,j+3,j+4);return this},a.prototype.toString=function(){const x=this.length;return x===0?"":arguments.length===0?B(this,0,x):T.apply(this,arguments)},a.prototype.toLocaleString=a.prototype.toString,a.prototype.equals=function(x){if(!a.isBuffer(x))throw new TypeError("Argument must be a Buffer");return this===x?!0:a.compare(this,x)===0},a.prototype.inspect=function(){let x="";const j=u.INSPECT_MAX_BYTES;return x=this.toString("hex",0,j).replace(/(.{2})/g,"$1 ").trim(),this.length>j&&(x+=" ... "),"<Buffer "+x+">"},i&&(a.prototype[i]=a.prototype.inspect),a.prototype.compare=function(x,j,z,W,le){if(se(x,Uint8Array)&&(x=a.from(x,x.offset,x.byteLength)),!a.isBuffer(x))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof x);if(j===void 0&&(j=0),z===void 0&&(z=x?x.length:0),W===void 0&&(W=0),le===void 0&&(le=this.length),j<0||z>x.length||W<0||le>this.length)throw new RangeError("out of range index");if(W>=le&&j>=z)return 0;if(W>=le)return-1;if(j>=z)return 1;if(j>>>=0,z>>>=0,W>>>=0,le>>>=0,this===x)return 0;let ae=le-W,De=z-j;const Ve=Math.min(ae,De),Be=this.slice(W,le),Ze=x.slice(j,z);for(let J=0;J<Ve;++J)if(Be[J]!==Ze[J]){ae=Be[J],De=Ze[J];break}return ae<De?-1:De<ae?1:0};function S(L,x,j,z,W){if(L.length===0)return-1;if(typeof j=="string"?(z=j,j=0):j>2147483647?j=2147483647:j<-2147483648&&(j=-2147483648),j=+j,Se(j)&&(j=W?0:L.length-1),j<0&&(j=L.length+j),j>=L.length){if(W)return-1;j=L.length-1}else if(j<0)if(W)j=0;else return-1;if(typeof x=="string"&&(x=a.from(x,z)),a.isBuffer(x))return x.length===0?-1:F(L,x,j,z,W);if(typeof x=="number")return x=x&255,typeof Uint8Array.prototype.indexOf=="function"?W?Uint8Array.prototype.indexOf.call(L,x,j):Uint8Array.prototype.lastIndexOf.call(L,x,j):F(L,[x],j,z,W);throw new TypeError("val must be string, number or Buffer")}function F(L,x,j,z,W){let le=1,ae=L.length,De=x.length;if(z!==void 0&&(z=String(z).toLowerCase(),z==="ucs2"||z==="ucs-2"||z==="utf16le"||z==="utf-16le")){if(L.length<2||x.length<2)return-1;le=2,ae/=2,De/=2,j/=2}function Ve(Ze,J){return le===1?Ze[J]:Ze.readUInt16BE(J*le)}let Be;if(W){let Ze=-1;for(Be=j;Be<ae;Be++)if(Ve(L,Be)===Ve(x,Ze===-1?0:Be-Ze)){if(Ze===-1&&(Ze=Be),Be-Ze+1===De)return Ze*le}else Ze!==-1&&(Be-=Be-Ze),Ze=-1}else for(j+De>ae&&(j=ae-De),Be=j;Be>=0;Be--){let Ze=!0;for(let J=0;J<De;J++)if(Ve(L,Be+J)!==Ve(x,J)){Ze=!1;break}if(Ze)return Be}return-1}a.prototype.includes=function(x,j,z){return this.indexOf(x,j,z)!==-1},a.prototype.indexOf=function(x,j,z){return S(this,x,j,z,!0)},a.prototype.lastIndexOf=function(x,j,z){return S(this,x,j,z,!1)};function M(L,x,j,z){j=Number(j)||0;const W=L.length-j;z?(z=Number(z),z>W&&(z=W)):z=W;const le=x.length;z>le/2&&(z=le/2);let ae;for(ae=0;ae<z;++ae){const De=parseInt(x.substr(ae*2,2),16);if(Se(De))return ae;L[j+ae]=De}return ae}function O(L,x,j,z){return oe(U(x,L.length-j),L,j,z)}function w(L,x,j,z){return oe(X(x),L,j,z)}function E(L,x,j,z){return oe(k(x),L,j,z)}function R(L,x,j,z){return oe(Q(x,L.length-j),L,j,z)}a.prototype.write=function(x,j,z,W){if(j===void 0)W="utf8",z=this.length,j=0;else if(z===void 0&&typeof j=="string")W=j,z=this.length,j=0;else if(isFinite(j))j=j>>>0,isFinite(z)?(z=z>>>0,W===void 0&&(W="utf8")):(W=z,z=void 0);else throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");const le=this.length-j;if((z===void 0||z>le)&&(z=le),x.length>0&&(z<0||j<0)||j>this.length)throw new RangeError("Attempt to write outside buffer bounds");W||(W="utf8");let ae=!1;for(;;)switch(W){case"hex":return M(this,x,j,z);case"utf8":case"utf-8":return O(this,x,j,z);case"ascii":case"latin1":case"binary":return w(this,x,j,z);case"base64":return E(this,x,j,z);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return R(this,x,j,z);default:if(ae)throw new TypeError("Unknown encoding: "+W);W=(""+W).toLowerCase(),ae=!0}},a.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};function D(L,x,j){return x===0&&j===L.length?n.fromByteArray(L):n.fromByteArray(L.slice(x,j))}function B(L,x,j){j=Math.min(L.length,j);const z=[];let W=x;for(;W<j;){const le=L[W];let ae=null,De=le>239?4:le>223?3:le>191?2:1;if(W+De<=j){let Ve,Be,Ze,J;switch(De){case 1:le<128&&(ae=le);break;case 2:Ve=L[W+1],(Ve&192)===128&&(J=(le&31)<<6|Ve&63,J>127&&(ae=J));break;case 3:Ve=L[W+1],Be=L[W+2],(Ve&192)===128&&(Be&192)===128&&(J=(le&15)<<12|(Ve&63)<<6|Be&63,J>2047&&(J<55296||J>57343)&&(ae=J));break;case 4:Ve=L[W+1],Be=L[W+2],Ze=L[W+3],(Ve&192)===128&&(Be&192)===128&&(Ze&192)===128&&(J=(le&15)<<18|(Ve&63)<<12|(Be&63)<<6|Ze&63,J>65535&&J<1114112&&(ae=J))}}ae===null?(ae=65533,De=1):ae>65535&&(ae-=65536,z.push(ae>>>10&1023|55296),ae=56320|ae&1023),z.push(ae),W+=De}return $(z)}const C=4096;function $(L){const x=L.length;if(x<=C)return String.fromCharCode.apply(String,L);let j="",z=0;for(;z<x;)j+=String.fromCharCode.apply(String,L.slice(z,z+=C));return j}function Z(L,x,j){let z="";j=Math.min(L.length,j);for(let W=x;W<j;++W)z+=String.fromCharCode(L[W]&127);return z}function ee(L,x,j){let z="";j=Math.min(L.length,j);for(let W=x;W<j;++W)z+=String.fromCharCode(L[W]);return z}function ce(L,x,j){const z=L.length;(!x||x<0)&&(x=0),(!j||j<0||j>z)&&(j=z);let W="";for(let le=x;le<j;++le)W+=Me[L[le]];return W}function G(L,x,j){const z=L.slice(x,j);let W="";for(let le=0;le<z.length-1;le+=2)W+=String.fromCharCode(z[le]+z[le+1]*256);return W}a.prototype.slice=function(x,j){const z=this.length;x=~~x,j=j===void 0?z:~~j,x<0?(x+=z,x<0&&(x=0)):x>z&&(x=z),j<0?(j+=z,j<0&&(j=0)):j>z&&(j=z),j<x&&(j=x);const W=this.subarray(x,j);return Object.setPrototypeOf(W,a.prototype),W};function fe(L,x,j){if(L%1!==0||L<0)throw new RangeError("offset is not uint");if(L+x>j)throw new RangeError("Trying to access beyond buffer length")}a.prototype.readUintLE=a.prototype.readUIntLE=function(x,j,z){x=x>>>0,j=j>>>0,z||fe(x,j,this.length);let W=this[x],le=1,ae=0;for(;++ae<j&&(le*=256);)W+=this[x+ae]*le;return W},a.prototype.readUintBE=a.prototype.readUIntBE=function(x,j,z){x=x>>>0,j=j>>>0,z||fe(x,j,this.length);let W=this[x+--j],le=1;for(;j>0&&(le*=256);)W+=this[x+--j]*le;return W},a.prototype.readUint8=a.prototype.readUInt8=function(x,j){return x=x>>>0,j||fe(x,1,this.length),this[x]},a.prototype.readUint16LE=a.prototype.readUInt16LE=function(x,j){return x=x>>>0,j||fe(x,2,this.length),this[x]|this[x+1]<<8},a.prototype.readUint16BE=a.prototype.readUInt16BE=function(x,j){return x=x>>>0,j||fe(x,2,this.length),this[x]<<8|this[x+1]},a.prototype.readUint32LE=a.prototype.readUInt32LE=function(x,j){return x=x>>>0,j||fe(x,4,this.length),(this[x]|this[x+1]<<8|this[x+2]<<16)+this[x+3]*16777216},a.prototype.readUint32BE=a.prototype.readUInt32BE=function(x,j){return x=x>>>0,j||fe(x,4,this.length),this[x]*16777216+(this[x+1]<<16|this[x+2]<<8|this[x+3])},a.prototype.readBigUInt64LE=Oe(function(x){x=x>>>0,A(x,"offset");const j=this[x],z=this[x+7];(j===void 0||z===void 0)&&I(x,this.length-8);const W=j+this[++x]*2**8+this[++x]*2**16+this[++x]*2**24,le=this[++x]+this[++x]*2**8+this[++x]*2**16+z*2**24;return BigInt(W)+(BigInt(le)<<BigInt(32))}),a.prototype.readBigUInt64BE=Oe(function(x){x=x>>>0,A(x,"offset");const j=this[x],z=this[x+7];(j===void 0||z===void 0)&&I(x,this.length-8);const W=j*2**24+this[++x]*2**16+this[++x]*2**8+this[++x],le=this[++x]*2**24+this[++x]*2**16+this[++x]*2**8+z;return(BigInt(W)<<BigInt(32))+BigInt(le)}),a.prototype.readIntLE=function(x,j,z){x=x>>>0,j=j>>>0,z||fe(x,j,this.length);let W=this[x],le=1,ae=0;for(;++ae<j&&(le*=256);)W+=this[x+ae]*le;return le*=128,W>=le&&(W-=Math.pow(2,8*j)),W},a.prototype.readIntBE=function(x,j,z){x=x>>>0,j=j>>>0,z||fe(x,j,this.length);let W=j,le=1,ae=this[x+--W];for(;W>0&&(le*=256);)ae+=this[x+--W]*le;return le*=128,ae>=le&&(ae-=Math.pow(2,8*j)),ae},a.prototype.readInt8=function(x,j){return x=x>>>0,j||fe(x,1,this.length),this[x]&128?(255-this[x]+1)*-1:this[x]},a.prototype.readInt16LE=function(x,j){x=x>>>0,j||fe(x,2,this.length);const z=this[x]|this[x+1]<<8;return z&32768?z|4294901760:z},a.prototype.readInt16BE=function(x,j){x=x>>>0,j||fe(x,2,this.length);const z=this[x+1]|this[x]<<8;return z&32768?z|4294901760:z},a.prototype.readInt32LE=function(x,j){return x=x>>>0,j||fe(x,4,this.length),this[x]|this[x+1]<<8|this[x+2]<<16|this[x+3]<<24},a.prototype.readInt32BE=function(x,j){return x=x>>>0,j||fe(x,4,this.length),this[x]<<24|this[x+1]<<16|this[x+2]<<8|this[x+3]},a.prototype.readBigInt64LE=Oe(function(x){x=x>>>0,A(x,"offset");const j=this[x],z=this[x+7];(j===void 0||z===void 0)&&I(x,this.length-8);const W=this[x+4]+this[x+5]*2**8+this[x+6]*2**16+(z<<24);return(BigInt(W)<<BigInt(32))+BigInt(j+this[++x]*2**8+this[++x]*2**16+this[++x]*2**24)}),a.prototype.readBigInt64BE=Oe(function(x){x=x>>>0,A(x,"offset");const j=this[x],z=this[x+7];(j===void 0||z===void 0)&&I(x,this.length-8);const W=(j<<24)+this[++x]*2**16+this[++x]*2**8+this[++x];return(BigInt(W)<<BigInt(32))+BigInt(this[++x]*2**24+this[++x]*2**16+this[++x]*2**8+z)}),a.prototype.readFloatLE=function(x,j){return x=x>>>0,j||fe(x,4,this.length),o.read(this,x,!0,23,4)},a.prototype.readFloatBE=function(x,j){return x=x>>>0,j||fe(x,4,this.length),o.read(this,x,!1,23,4)},a.prototype.readDoubleLE=function(x,j){return x=x>>>0,j||fe(x,8,this.length),o.read(this,x,!0,52,8)},a.prototype.readDoubleBE=function(x,j){return x=x>>>0,j||fe(x,8,this.length),o.read(this,x,!1,52,8)};function me(L,x,j,z,W,le){if(!a.isBuffer(L))throw new TypeError('"buffer" argument must be a Buffer instance');if(x>W||x<le)throw new RangeError('"value" argument is out of bounds');if(j+z>L.length)throw new RangeError("Index out of range")}a.prototype.writeUintLE=a.prototype.writeUIntLE=function(x,j,z,W){if(x=+x,j=j>>>0,z=z>>>0,!W){const De=Math.pow(2,8*z)-1;me(this,x,j,z,De,0)}let le=1,ae=0;for(this[j]=x&255;++ae<z&&(le*=256);)this[j+ae]=x/le&255;return j+z},a.prototype.writeUintBE=a.prototype.writeUIntBE=function(x,j,z,W){if(x=+x,j=j>>>0,z=z>>>0,!W){const De=Math.pow(2,8*z)-1;me(this,x,j,z,De,0)}let le=z-1,ae=1;for(this[j+le]=x&255;--le>=0&&(ae*=256);)this[j+le]=x/ae&255;return j+z},a.prototype.writeUint8=a.prototype.writeUInt8=function(x,j,z){return x=+x,j=j>>>0,z||me(this,x,j,1,255,0),this[j]=x&255,j+1},a.prototype.writeUint16LE=a.prototype.writeUInt16LE=function(x,j,z){return x=+x,j=j>>>0,z||me(this,x,j,2,65535,0),this[j]=x&255,this[j+1]=x>>>8,j+2},a.prototype.writeUint16BE=a.prototype.writeUInt16BE=function(x,j,z){return x=+x,j=j>>>0,z||me(this,x,j,2,65535,0),this[j]=x>>>8,this[j+1]=x&255,j+2},a.prototype.writeUint32LE=a.prototype.writeUInt32LE=function(x,j,z){return x=+x,j=j>>>0,z||me(this,x,j,4,4294967295,0),this[j+3]=x>>>24,this[j+2]=x>>>16,this[j+1]=x>>>8,this[j]=x&255,j+4},a.prototype.writeUint32BE=a.prototype.writeUInt32BE=function(x,j,z){return x=+x,j=j>>>0,z||me(this,x,j,4,4294967295,0),this[j]=x>>>24,this[j+1]=x>>>16,this[j+2]=x>>>8,this[j+3]=x&255,j+4};function ye(L,x,j,z,W){N(x,z,W,L,j,7);let le=Number(x&BigInt(4294967295));L[j++]=le,le=le>>8,L[j++]=le,le=le>>8,L[j++]=le,le=le>>8,L[j++]=le;let ae=Number(x>>BigInt(32)&BigInt(4294967295));return L[j++]=ae,ae=ae>>8,L[j++]=ae,ae=ae>>8,L[j++]=ae,ae=ae>>8,L[j++]=ae,j}function re(L,x,j,z,W){N(x,z,W,L,j,7);let le=Number(x&BigInt(4294967295));L[j+7]=le,le=le>>8,L[j+6]=le,le=le>>8,L[j+5]=le,le=le>>8,L[j+4]=le;let ae=Number(x>>BigInt(32)&BigInt(4294967295));return L[j+3]=ae,ae=ae>>8,L[j+2]=ae,ae=ae>>8,L[j+1]=ae,ae=ae>>8,L[j]=ae,j+8}a.prototype.writeBigUInt64LE=Oe(function(x,j=0){return ye(this,x,j,BigInt(0),BigInt("0xffffffffffffffff"))}),a.prototype.writeBigUInt64BE=Oe(function(x,j=0){return re(this,x,j,BigInt(0),BigInt("0xffffffffffffffff"))}),a.prototype.writeIntLE=function(x,j,z,W){if(x=+x,j=j>>>0,!W){const Ve=Math.pow(2,8*z-1);me(this,x,j,z,Ve-1,-Ve)}let le=0,ae=1,De=0;for(this[j]=x&255;++le<z&&(ae*=256);)x<0&&De===0&&this[j+le-1]!==0&&(De=1),this[j+le]=(x/ae>>0)-De&255;return j+z},a.prototype.writeIntBE=function(x,j,z,W){if(x=+x,j=j>>>0,!W){const Ve=Math.pow(2,8*z-1);me(this,x,j,z,Ve-1,-Ve)}let le=z-1,ae=1,De=0;for(this[j+le]=x&255;--le>=0&&(ae*=256);)x<0&&De===0&&this[j+le+1]!==0&&(De=1),this[j+le]=(x/ae>>0)-De&255;return j+z},a.prototype.writeInt8=function(x,j,z){return x=+x,j=j>>>0,z||me(this,x,j,1,127,-128),x<0&&(x=255+x+1),this[j]=x&255,j+1},a.prototype.writeInt16LE=function(x,j,z){return x=+x,j=j>>>0,z||me(this,x,j,2,32767,-32768),this[j]=x&255,this[j+1]=x>>>8,j+2},a.prototype.writeInt16BE=function(x,j,z){return x=+x,j=j>>>0,z||me(this,x,j,2,32767,-32768),this[j]=x>>>8,this[j+1]=x&255,j+2},a.prototype.writeInt32LE=function(x,j,z){return x=+x,j=j>>>0,z||me(this,x,j,4,2147483647,-2147483648),this[j]=x&255,this[j+1]=x>>>8,this[j+2]=x>>>16,this[j+3]=x>>>24,j+4},a.prototype.writeInt32BE=function(x,j,z){return x=+x,j=j>>>0,z||me(this,x,j,4,2147483647,-2147483648),x<0&&(x=4294967295+x+1),this[j]=x>>>24,this[j+1]=x>>>16,this[j+2]=x>>>8,this[j+3]=x&255,j+4},a.prototype.writeBigInt64LE=Oe(function(x,j=0){return ye(this,x,j,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))}),a.prototype.writeBigInt64BE=Oe(function(x,j=0){return re(this,x,j,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))});function xe(L,x,j,z,W,le){if(j+z>L.length)throw new RangeError("Index out of range");if(j<0)throw new RangeError("Index out of range")}function Re(L,x,j,z,W){return x=+x,j=j>>>0,W||xe(L,x,j,4),o.write(L,x,j,z,23,4),j+4}a.prototype.writeFloatLE=function(x,j,z){return Re(this,x,j,!0,z)},a.prototype.writeFloatBE=function(x,j,z){return Re(this,x,j,!1,z)};function Ie(L,x,j,z,W){return x=+x,j=j>>>0,W||xe(L,x,j,8),o.write(L,x,j,z,52,8),j+8}a.prototype.writeDoubleLE=function(x,j,z){return Ie(this,x,j,!0,z)},a.prototype.writeDoubleBE=function(x,j,z){return Ie(this,x,j,!1,z)},a.prototype.copy=function(x,j,z,W){if(!a.isBuffer(x))throw new TypeError("argument should be a Buffer");if(z||(z=0),!W&&W!==0&&(W=this.length),j>=x.length&&(j=x.length),j||(j=0),W>0&&W<z&&(W=z),W===z||x.length===0||this.length===0)return 0;if(j<0)throw new RangeError("targetStart out of bounds");if(z<0||z>=this.length)throw new RangeError("Index out of range");if(W<0)throw new RangeError("sourceEnd out of bounds");W>this.length&&(W=this.length),x.length-j<W-z&&(W=x.length-j+z);const le=W-z;return this===x&&typeof Uint8Array.prototype.copyWithin=="function"?this.copyWithin(j,z,W):Uint8Array.prototype.set.call(x,this.subarray(z,W),j),le},a.prototype.fill=function(x,j,z,W){if(typeof x=="string"){if(typeof j=="string"?(W=j,j=0,z=this.length):typeof z=="string"&&(W=z,z=this.length),W!==void 0&&typeof W!="string")throw new TypeError("encoding must be a string");if(typeof W=="string"&&!a.isEncoding(W))throw new TypeError("Unknown encoding: "+W);if(x.length===1){const ae=x.charCodeAt(0);(W==="utf8"&&ae<128||W==="latin1")&&(x=ae)}}else typeof x=="number"?x=x&255:typeof x=="boolean"&&(x=Number(x));if(j<0||this.length<j||this.length<z)throw new RangeError("Out of range index");if(z<=j)return this;j=j>>>0,z=z===void 0?this.length:z>>>0,x||(x=0);let le;if(typeof x=="number")for(le=j;le<z;++le)this[le]=x;else{const ae=a.isBuffer(x)?x:a.from(x,W),De=ae.length;if(De===0)throw new TypeError('The value "'+x+'" is invalid for argument "value"');for(le=0;le<z-j;++le)this[le+j]=ae[le%De]}return this};const he={};function be(L,x,j){he[L]=class extends j{constructor(){super(),Object.defineProperty(this,"message",{value:x.apply(this,arguments),writable:!0,configurable:!0}),this.name=`${this.name} [${L}]`,this.stack,delete this.name}get code(){return L}set code(W){Object.defineProperty(this,"code",{configurable:!0,enumerable:!0,value:W,writable:!0})}toString(){return`${this.name} [${L}]: ${this.message}`}}}be("ERR_BUFFER_OUT_OF_BOUNDS",function(L){return L?`${L} is outside of buffer bounds`:"Attempt to access memory outside buffer bounds"},RangeError),be("ERR_INVALID_ARG_TYPE",function(L,x){return`The "${L}" argument must be of type number. Received type ${typeof x}`},TypeError),be("ERR_OUT_OF_RANGE",function(L,x,j){let z=`The value of "${L}" is out of range.`,W=j;return Number.isInteger(j)&&Math.abs(j)>2**32?W=V(String(j)):typeof j=="bigint"&&(W=String(j),(j>BigInt(2)**BigInt(32)||j<-(BigInt(2)**BigInt(32)))&&(W=V(W)),W+="n"),z+=` It must be ${x}. Received ${W}`,z},RangeError);function V(L){let x="",j=L.length;const z=L[0]==="-"?1:0;for(;j>=z+4;j-=3)x=`_${L.slice(j-3,j)}${x}`;return`${L.slice(0,j)}${x}`}function P(L,x,j){A(x,"offset"),(L[x]===void 0||L[x+j]===void 0)&&I(x,L.length-(j+1))}function N(L,x,j,z,W,le){if(L>j||L<x){const ae=typeof x=="bigint"?"n":"";let De;throw x===0||x===BigInt(0)?De=`>= 0${ae} and < 2${ae} ** ${(le+1)*8}${ae}`:De=`>= -(2${ae} ** ${(le+1)*8-1}${ae}) and < 2 ** ${(le+1)*8-1}${ae}`,new he.ERR_OUT_OF_RANGE("value",De,L)}P(z,W,le)}function A(L,x){if(typeof L!="number")throw new he.ERR_INVALID_ARG_TYPE(x,"number",L)}function I(L,x,j){throw Math.floor(L)!==L?(A(L,j),new he.ERR_OUT_OF_RANGE("offset","an integer",L)):x<0?new he.ERR_BUFFER_OUT_OF_BOUNDS:new he.ERR_OUT_OF_RANGE("offset",`>= 0 and <= ${x}`,L)}const q=/[^+/0-9A-Za-z-_]/g;function H(L){if(L=L.split("=")[0],L=L.trim().replace(q,""),L.length<2)return"";for(;L.length%4!==0;)L=L+"=";return L}function U(L,x){x=x||1/0;let j;const z=L.length;let W=null;const le=[];for(let ae=0;ae<z;++ae){if(j=L.charCodeAt(ae),j>55295&&j<57344){if(!W){if(j>56319){(x-=3)>-1&&le.push(239,191,189);continue}else if(ae+1===z){(x-=3)>-1&&le.push(239,191,189);continue}W=j;continue}if(j<56320){(x-=3)>-1&&le.push(239,191,189),W=j;continue}j=(W-55296<<10|j-56320)+65536}else W&&(x-=3)>-1&&le.push(239,191,189);if(W=null,j<128){if((x-=1)<0)break;le.push(j)}else if(j<2048){if((x-=2)<0)break;le.push(j>>6|192,j&63|128)}else if(j<65536){if((x-=3)<0)break;le.push(j>>12|224,j>>6&63|128,j&63|128)}else if(j<1114112){if((x-=4)<0)break;le.push(j>>18|240,j>>12&63|128,j>>6&63|128,j&63|128)}else throw new Error("Invalid code point")}return le}function X(L){const x=[];for(let j=0;j<L.length;++j)x.push(L.charCodeAt(j)&255);return x}function Q(L,x){let j,z,W;const le=[];for(let ae=0;ae<L.length&&!((x-=2)<0);++ae)j=L.charCodeAt(ae),z=j>>8,W=j%256,le.push(W),le.push(z);return le}function k(L){return n.toByteArray(H(L))}function oe(L,x,j,z){let W;for(W=0;W<z&&!(W+j>=x.length||W>=L.length);++W)x[W+j]=L[W];return W}function se(L,x){return L instanceof x||L!=null&&L.constructor!=null&&L.constructor.name!=null&&L.constructor.name===x.name}function Se(L){return L!==L}const Me=(function(){const L="0123456789abcdef",x=new Array(256);for(let j=0;j<16;++j){const z=j*16;for(let W=0;W<16;++W)x[z+W]=L[j]+L[W]}return x})();function Oe(L){return typeof BigInt>"u"?ue:L}function ue(){throw new Error("BigInt not supported")}})(KO)),KO}var kO,uD;function tr(){if(uD)return kO;uD=1;class u extends Error{constructor(o){if(!Array.isArray(o))throw new TypeError(`Expected input to be an Array, got ${typeof o}`);let i="";for(let t=0;t<o.length;t++)i+=`    ${o[t].stack}
`;super(i),this.name="AggregateError",this.errors=o}}return kO={AggregateError:u,ArrayIsArray(n){return Array.isArray(n)},ArrayPrototypeIncludes(n,o){return n.includes(o)},ArrayPrototypeIndexOf(n,o){return n.indexOf(o)},ArrayPrototypeJoin(n,o){return n.join(o)},ArrayPrototypeMap(n,o){return n.map(o)},ArrayPrototypePop(n,o){return n.pop(o)},ArrayPrototypePush(n,o){return n.push(o)},ArrayPrototypeSlice(n,o,i){return n.slice(o,i)},Error,FunctionPrototypeCall(n,o,...i){return n.call(o,...i)},FunctionPrototypeSymbolHasInstance(n,o){return Function.prototype[Symbol.hasInstance].call(n,o)},MathFloor:Math.floor,Number,NumberIsInteger:Number.isInteger,NumberIsNaN:Number.isNaN,NumberMAX_SAFE_INTEGER:Number.MAX_SAFE_INTEGER,NumberMIN_SAFE_INTEGER:Number.MIN_SAFE_INTEGER,NumberParseInt:Number.parseInt,ObjectDefineProperties(n,o){return Object.defineProperties(n,o)},ObjectDefineProperty(n,o,i){return Object.defineProperty(n,o,i)},ObjectGetOwnPropertyDescriptor(n,o){return Object.getOwnPropertyDescriptor(n,o)},ObjectKeys(n){return Object.keys(n)},ObjectSetPrototypeOf(n,o){return Object.setPrototypeOf(n,o)},Promise,PromisePrototypeCatch(n,o){return n.catch(o)},PromisePrototypeThen(n,o,i){return n.then(o,i)},PromiseReject(n){return Promise.reject(n)},PromiseResolve(n){return Promise.resolve(n)},ReflectApply:Reflect.apply,RegExpPrototypeTest(n,o){return n.test(o)},SafeSet:Set,String,StringPrototypeSlice(n,o,i){return n.slice(o,i)},StringPrototypeToLowerCase(n){return n.toLowerCase()},StringPrototypeToUpperCase(n){return n.toUpperCase()},StringPrototypeTrim(n){return n.trim()},Symbol,SymbolFor:Symbol.for,SymbolAsyncIterator:Symbol.asyncIterator,SymbolHasInstance:Symbol.hasInstance,SymbolIterator:Symbol.iterator,SymbolDispose:Symbol.dispose||Symbol("Symbol.dispose"),SymbolAsyncDispose:Symbol.asyncDispose||Symbol("Symbol.asyncDispose"),TypedArrayPrototypeSet(n,o,i){return n.set(o,i)},Boolean,Uint8Array},kO}var WO={exports:{}},YO,oD;function sD(){return oD||(oD=1,YO={format(u,...n){return u.replace(/%([sdifj])/g,function(...[o,i]){const t=n.shift();return i==="f"?t.toFixed(6):i==="j"?JSON.stringify(t):i==="s"&&typeof t=="object"?`${t.constructor!==Object?t.constructor.name:""} {}`.trim():t.toString()})},inspect(u){switch(typeof u){case"string":if(u.includes("'"))if(u.includes('"')){if(!u.includes("`")&&!u.includes("${"))return`\`${u}\``}else return`"${u}"`;return`'${u}'`;case"number":return isNaN(u)?"NaN":Object.is(u,-0)?String(u):u;case"bigint":return`${String(u)}n`;case"boolean":case"undefined":return String(u);case"object":return"{}"}}}),YO}var ZO,cD;function Hr(){if(cD)return ZO;cD=1;const{format:u,inspect:n}=sD(),{AggregateError:o}=tr(),i=globalThis.AggregateError||o,t=Symbol("kIsNodeError"),e=["string","function","number","object","Function","Object","boolean","bigint","symbol"],r=/^([A-Z][a-z0-9]*)+$/,a="__node_internal_",c={};function s(_,b){if(!_)throw new c.ERR_INTERNAL_ASSERTION(b)}function d(_){let b="",m=_.length;const g=_[0]==="-"?1:0;for(;m>=g+4;m-=3)b=`_${_.slice(m-3,m)}${b}`;return`${_.slice(0,m)}${b}`}function l(_,b,m){if(typeof b=="function")return s(b.length<=m.length,`Code: ${_}; The provided arguments length (${m.length}) does not match the required ones (${b.length}).`),b(...m);const g=(b.match(/%[dfijoOs]/g)||[]).length;return s(g===m.length,`Code: ${_}; The provided arguments length (${m.length}) does not match the required ones (${g}).`),m.length===0?b:u(b,...m)}function f(_,b,m){m||(m=Error);class g extends m{constructor(...v){super(l(_,b,v))}toString(){return`${this.name} [${_}]: ${this.message}`}}Object.defineProperties(g.prototype,{name:{value:m.name,writable:!0,enumerable:!1,configurable:!0},toString:{value(){return`${this.name} [${_}]: ${this.message}`},writable:!0,enumerable:!1,configurable:!0}}),g.prototype.code=_,g.prototype[t]=!0,c[_]=g}function h(_){const b=a+_.name;return Object.defineProperty(_,"name",{value:b}),_}function p(_,b){if(_&&b&&_!==b){if(Array.isArray(b.errors))return b.errors.push(_),b;const m=new i([b,_],b.message);return m.code=b.code,m}return _||b}class y extends Error{constructor(b="The operation was aborted",m=void 0){if(m!==void 0&&typeof m!="object")throw new c.ERR_INVALID_ARG_TYPE("options","Object",m);super(b,m),this.code="ABORT_ERR",this.name="AbortError"}}return f("ERR_ASSERTION","%s",Error),f("ERR_INVALID_ARG_TYPE",(_,b,m)=>{s(typeof _=="string","'name' must be a string"),Array.isArray(b)||(b=[b]);let g="The ";_.endsWith(" argument")?g+=`${_} `:g+=`"${_}" ${_.includes(".")?"property":"argument"} `,g+="must be ";const T=[],v=[],S=[];for(const M of b)s(typeof M=="string","All expected entries have to be of type string"),e.includes(M)?T.push(M.toLowerCase()):r.test(M)?v.push(M):(s(M!=="object",'The value "object" should be written as "Object"'),S.push(M));if(v.length>0){const M=T.indexOf("object");M!==-1&&(T.splice(T,M,1),v.push("Object"))}if(T.length>0){switch(T.length){case 1:g+=`of type ${T[0]}`;break;case 2:g+=`one of type ${T[0]} or ${T[1]}`;break;default:{const M=T.pop();g+=`one of type ${T.join(", ")}, or ${M}`}}(v.length>0||S.length>0)&&(g+=" or ")}if(v.length>0){switch(v.length){case 1:g+=`an instance of ${v[0]}`;break;case 2:g+=`an instance of ${v[0]} or ${v[1]}`;break;default:{const M=v.pop();g+=`an instance of ${v.join(", ")}, or ${M}`}}S.length>0&&(g+=" or ")}switch(S.length){case 0:break;case 1:S[0].toLowerCase()!==S[0]&&(g+="an "),g+=`${S[0]}`;break;case 2:g+=`one of ${S[0]} or ${S[1]}`;break;default:{const M=S.pop();g+=`one of ${S.join(", ")}, or ${M}`}}if(m==null)g+=`. Received ${m}`;else if(typeof m=="function"&&m.name)g+=`. Received function ${m.name}`;else if(typeof m=="object"){var F;if((F=m.constructor)!==null&&F!==void 0&&F.name)g+=`. Received an instance of ${m.constructor.name}`;else{const M=n(m,{depth:-1});g+=`. Received ${M}`}}else{let M=n(m,{colors:!1});M.length>25&&(M=`${M.slice(0,25)}...`),g+=`. Received type ${typeof m} (${M})`}return g},TypeError),f("ERR_INVALID_ARG_VALUE",(_,b,m="is invalid")=>{let g=n(b);return g.length>128&&(g=g.slice(0,128)+"..."),`The ${_.includes(".")?"property":"argument"} '${_}' ${m}. Received ${g}`},TypeError),f("ERR_INVALID_RETURN_VALUE",(_,b,m)=>{var g;const T=m!=null&&(g=m.constructor)!==null&&g!==void 0&&g.name?`instance of ${m.constructor.name}`:`type ${typeof m}`;return`Expected ${_} to be returned from the "${b}" function but got ${T}.`},TypeError),f("ERR_MISSING_ARGS",(..._)=>{s(_.length>0,"At least one arg needs to be specified");let b;const m=_.length;switch(_=(Array.isArray(_)?_:[_]).map(g=>`"${g}"`).join(" or "),m){case 1:b+=`The ${_[0]} argument`;break;case 2:b+=`The ${_[0]} and ${_[1]} arguments`;break;default:{const g=_.pop();b+=`The ${_.join(", ")}, and ${g} arguments`}break}return`${b} must be specified`},TypeError),f("ERR_OUT_OF_RANGE",(_,b,m)=>{s(b,'Missing "range" argument');let g;if(Number.isInteger(m)&&Math.abs(m)>2**32)g=d(String(m));else if(typeof m=="bigint"){g=String(m);const T=BigInt(2)**BigInt(32);(m>T||m<-T)&&(g=d(g)),g+="n"}else g=n(m);return`The value of "${_}" is out of range. It must be ${b}. Received ${g}`},RangeError),f("ERR_MULTIPLE_CALLBACK","Callback called multiple times",Error),f("ERR_METHOD_NOT_IMPLEMENTED","The %s method is not implemented",Error),f("ERR_STREAM_ALREADY_FINISHED","Cannot call %s after a stream was finished",Error),f("ERR_STREAM_CANNOT_PIPE","Cannot pipe, not readable",Error),f("ERR_STREAM_DESTROYED","Cannot call %s after a stream was destroyed",Error),f("ERR_STREAM_NULL_VALUES","May not write null values to stream",TypeError),f("ERR_STREAM_PREMATURE_CLOSE","Premature close",Error),f("ERR_STREAM_PUSH_AFTER_EOF","stream.push() after EOF",Error),f("ERR_STREAM_UNSHIFT_AFTER_END_EVENT","stream.unshift() after end event",Error),f("ERR_STREAM_WRITE_AFTER_END","write after end",Error),f("ERR_UNKNOWN_ENCODING","Unknown encoding: %s",TypeError),ZO={AbortError:y,aggregateTwoErrors:h(p),hideStackFrames:h,codes:c},ZO}var v0={exports:{}},dD;function T0(){if(dD)return v0.exports;dD=1;const{AbortController:u,AbortSignal:n}=typeof self<"u"?self:typeof window<"u"?window:void 0;return v0.exports=u,v0.exports.AbortSignal=n,v0.exports.default=u,v0.exports}var lD;function Kr(){return lD||(lD=1,(function(u){const n=kn(),{format:o,inspect:i}=sD(),{codes:{ERR_INVALID_ARG_TYPE:t}}=Hr(),{kResistStopPropagation:e,AggregateError:r,SymbolDispose:a}=tr(),c=globalThis.AbortSignal||T0().AbortSignal,s=globalThis.AbortController||T0().AbortController,d=Object.getPrototypeOf(async function(){}).constructor,l=globalThis.Blob||n.Blob,f=typeof l<"u"?function(_){return _ instanceof l}:function(_){return!1},h=(y,_)=>{if(y!==void 0&&(y===null||typeof y!="object"||!("aborted"in y)))throw new t(_,"AbortSignal",y)},p=(y,_)=>{if(typeof y!="function")throw new t(_,"Function",y)};u.exports={AggregateError:r,kEmptyObject:Object.freeze({}),once(y){let _=!1;return function(...b){_||(_=!0,y.apply(this,b))}},createDeferredPromise:function(){let y,_;return{promise:new Promise((m,g)=>{y=m,_=g}),resolve:y,reject:_}},promisify(y){return new Promise((_,b)=>{y((m,...g)=>m?b(m):_(...g))})},debuglog(){return function(){}},format:o,inspect:i,types:{isAsyncFunction(y){return y instanceof d},isArrayBufferView(y){return ArrayBuffer.isView(y)}},isBlob:f,deprecate(y,_){return y},addAbortListener:hp().addAbortListener||function(_,b){if(_===void 0)throw new t("signal","AbortSignal",_);h(_,"signal"),p(b,"listener");let m;return _.aborted?queueMicrotask(()=>b()):(_.addEventListener("abort",b,{__proto__:null,once:!0,[e]:!0}),m=()=>{_.removeEventListener("abort",b)}),{__proto__:null,[a](){var g;(g=m)===null||g===void 0||g()}}},AbortSignalAny:c.any||function(_){if(_.length===1)return _[0];const b=new s,m=()=>b.abort();return _.forEach(g=>{h(g,"signals"),g.addEventListener("abort",m,{once:!0})}),b.signal.addEventListener("abort",()=>{_.forEach(g=>g.removeEventListener("abort",m))},{once:!0}),b.signal}},u.exports.promisify.custom=Symbol.for("nodejs.util.promisify.custom")})(WO)),WO.exports}var _3={},eA,fD;function w0(){if(fD)return eA;fD=1;const{ArrayIsArray:u,ArrayPrototypeIncludes:n,ArrayPrototypeJoin:o,ArrayPrototypeMap:i,NumberIsInteger:t,NumberIsNaN:e,NumberMAX_SAFE_INTEGER:r,NumberMIN_SAFE_INTEGER:a,NumberParseInt:c,ObjectPrototypeHasOwnProperty:s,RegExpPrototypeExec:d,String:l,StringPrototypeToUpperCase:f,StringPrototypeTrim:h}=tr(),{hideStackFrames:p,codes:{ERR_SOCKET_BAD_PORT:y,ERR_INVALID_ARG_TYPE:_,ERR_INVALID_ARG_VALUE:b,ERR_OUT_OF_RANGE:m,ERR_UNKNOWN_SIGNAL:g}}=Hr(),{normalizeEncoding:T}=Kr(),{isAsyncFunction:v,isArrayBufferView:S}=Kr().types,F={};function M(Q){return Q===(Q|0)}function O(Q){return Q===Q>>>0}const w=/^[0-7]+$/,E="must be a 32-bit unsigned integer or an octal string";function R(Q,k,oe){if(typeof Q>"u"&&(Q=oe),typeof Q=="string"){if(d(w,Q)===null)throw new b(k,Q,E);Q=c(Q,8)}return C(Q,k),Q}const D=p((Q,k,oe=a,se=r)=>{if(typeof Q!="number")throw new _(k,"number",Q);if(!t(Q))throw new m(k,"an integer",Q);if(Q<oe||Q>se)throw new m(k,`>= ${oe} && <= ${se}`,Q)}),B=p((Q,k,oe=-2147483648,se=2147483647)=>{if(typeof Q!="number")throw new _(k,"number",Q);if(!t(Q))throw new m(k,"an integer",Q);if(Q<oe||Q>se)throw new m(k,`>= ${oe} && <= ${se}`,Q)}),C=p((Q,k,oe=!1)=>{if(typeof Q!="number")throw new _(k,"number",Q);if(!t(Q))throw new m(k,"an integer",Q);const se=oe?1:0,Se=4294967295;if(Q<se||Q>Se)throw new m(k,`>= ${se} && <= ${Se}`,Q)});function $(Q,k){if(typeof Q!="string")throw new _(k,"string",Q)}function Z(Q,k,oe=void 0,se){if(typeof Q!="number")throw new _(k,"number",Q);if(oe!=null&&Q<oe||se!=null&&Q>se||(oe!=null||se!=null)&&e(Q))throw new m(k,`${oe!=null?`>= ${oe}`:""}${oe!=null&&se!=null?" && ":""}${se!=null?`<= ${se}`:""}`,Q)}const ee=p((Q,k,oe)=>{if(!n(oe,Q)){const Se="must be one of: "+o(i(oe,Me=>typeof Me=="string"?`'${Me}'`:l(Me)),", ");throw new b(k,Q,Se)}});function ce(Q,k){if(typeof Q!="boolean")throw new _(k,"boolean",Q)}function G(Q,k,oe){return Q==null||!s(Q,k)?oe:Q[k]}const fe=p((Q,k,oe=null)=>{const se=G(oe,"allowArray",!1),Se=G(oe,"allowFunction",!1);if(!G(oe,"nullable",!1)&&Q===null||!se&&u(Q)||typeof Q!="object"&&(!Se||typeof Q!="function"))throw new _(k,"Object",Q)}),me=p((Q,k)=>{if(Q!=null&&typeof Q!="object"&&typeof Q!="function")throw new _(k,"a dictionary",Q)}),ye=p((Q,k,oe=0)=>{if(!u(Q))throw new _(k,"Array",Q);if(Q.length<oe){const se=`must be longer than ${oe}`;throw new b(k,Q,se)}});function re(Q,k){ye(Q,k);for(let oe=0;oe<Q.length;oe++)$(Q[oe],`${k}[${oe}]`)}function xe(Q,k){ye(Q,k);for(let oe=0;oe<Q.length;oe++)ce(Q[oe],`${k}[${oe}]`)}function Re(Q,k){ye(Q,k);for(let oe=0;oe<Q.length;oe++){const se=Q[oe],Se=`${k}[${oe}]`;if(se==null)throw new _(Se,"AbortSignal",se);P(se,Se)}}function Ie(Q,k="signal"){if($(Q,k),F[Q]===void 0)throw F[f(Q)]!==void 0?new g(Q+" (signals must use all capital letters)"):new g(Q)}const he=p((Q,k="buffer")=>{if(!S(Q))throw new _(k,["Buffer","TypedArray","DataView"],Q)});function be(Q,k){const oe=T(k),se=Q.length;if(oe==="hex"&&se%2!==0)throw new b("encoding",k,`is invalid for data of length ${se}`)}function V(Q,k="Port",oe=!0){if(typeof Q!="number"&&typeof Q!="string"||typeof Q=="string"&&h(Q).length===0||+Q!==+Q>>>0||Q>65535||Q===0&&!oe)throw new y(k,Q,oe);return Q|0}const P=p((Q,k)=>{if(Q!==void 0&&(Q===null||typeof Q!="object"||!("aborted"in Q)))throw new _(k,"AbortSignal",Q)}),N=p((Q,k)=>{if(typeof Q!="function")throw new _(k,"Function",Q)}),A=p((Q,k)=>{if(typeof Q!="function"||v(Q))throw new _(k,"Function",Q)}),I=p((Q,k)=>{if(Q!==void 0)throw new _(k,"undefined",Q)});function q(Q,k,oe){if(!n(oe,Q))throw new _(k,`('${o(oe,"|")}')`,Q)}const H=/^(?:<[^>]*>)(?:\s*;\s*[^;"\s]+(?:=(")?[^;"\s]*\1)?)*$/;function U(Q,k){if(typeof Q>"u"||!d(H,Q))throw new b(k,Q,'must be an array or string of format "</styles.css>; rel=preload; as=style"')}function X(Q){if(typeof Q=="string")return U(Q,"hints"),Q;if(u(Q)){const k=Q.length;let oe="";if(k===0)return oe;for(let se=0;se<k;se++){const Se=Q[se];U(Se,"hints"),oe+=Se,se!==k-1&&(oe+=", ")}return oe}throw new b("hints",Q,'must be an array or string of format "</styles.css>; rel=preload; as=style"')}return eA={isInt32:M,isUint32:O,parseFileMode:R,validateArray:ye,validateStringArray:re,validateBooleanArray:xe,validateAbortSignalArray:Re,validateBoolean:ce,validateBuffer:he,validateDictionary:me,validateEncoding:be,validateFunction:N,validateInt32:B,validateInteger:D,validateNumber:Z,validateObject:fe,validateOneOf:ee,validatePlainFunction:A,validatePort:V,validateSignalName:Ie,validateString:$,validateUint32:C,validateUndefined:I,validateUnion:q,validateAbortSignal:P,validateLinkHeaderValue:X},eA}var g3={exports:{}},tA,hD;function di(){if(hD)return tA;hD=1;const{SymbolAsyncIterator:u,SymbolIterator:n,SymbolFor:o}=tr(),i=o("nodejs.stream.destroyed"),t=o("nodejs.stream.errored"),e=o("nodejs.stream.readable"),r=o("nodejs.stream.writable"),a=o("nodejs.stream.disturbed"),c=o("nodejs.webstream.isClosedPromise"),s=o("nodejs.webstream.controllerErrorFunction");function d(G,fe=!1){var me;return!!(G&&typeof G.pipe=="function"&&typeof G.on=="function"&&(!fe||typeof G.pause=="function"&&typeof G.resume=="function")&&(!G._writableState||((me=G._readableState)===null||me===void 0?void 0:me.readable)!==!1)&&(!G._writableState||G._readableState))}function l(G){var fe;return!!(G&&typeof G.write=="function"&&typeof G.on=="function"&&(!G._readableState||((fe=G._writableState)===null||fe===void 0?void 0:fe.writable)!==!1))}function f(G){return!!(G&&typeof G.pipe=="function"&&G._readableState&&typeof G.on=="function"&&typeof G.write=="function")}function h(G){return G&&(G._readableState||G._writableState||typeof G.write=="function"&&typeof G.on=="function"||typeof G.pipe=="function"&&typeof G.on=="function")}function p(G){return!!(G&&!h(G)&&typeof G.pipeThrough=="function"&&typeof G.getReader=="function"&&typeof G.cancel=="function")}function y(G){return!!(G&&!h(G)&&typeof G.getWriter=="function"&&typeof G.abort=="function")}function _(G){return!!(G&&!h(G)&&typeof G.readable=="object"&&typeof G.writable=="object")}function b(G){return p(G)||y(G)||_(G)}function m(G,fe){return G==null?!1:fe===!0?typeof G[u]=="function":fe===!1?typeof G[n]=="function":typeof G[u]=="function"||typeof G[n]=="function"}function g(G){if(!h(G))return null;const fe=G._writableState,me=G._readableState,ye=fe||me;return!!(G.destroyed||G[i]||ye!=null&&ye.destroyed)}function T(G){if(!l(G))return null;if(G.writableEnded===!0)return!0;const fe=G._writableState;return fe!=null&&fe.errored?!1:typeof(fe==null?void 0:fe.ended)!="boolean"?null:fe.ended}function v(G,fe){if(!l(G))return null;if(G.writableFinished===!0)return!0;const me=G._writableState;return me!=null&&me.errored?!1:typeof(me==null?void 0:me.finished)!="boolean"?null:!!(me.finished||fe===!1&&me.ended===!0&&me.length===0)}function S(G){if(!d(G))return null;if(G.readableEnded===!0)return!0;const fe=G._readableState;return!fe||fe.errored?!1:typeof(fe==null?void 0:fe.ended)!="boolean"?null:fe.ended}function F(G,fe){if(!d(G))return null;const me=G._readableState;return me!=null&&me.errored?!1:typeof(me==null?void 0:me.endEmitted)!="boolean"?null:!!(me.endEmitted||fe===!1&&me.ended===!0&&me.length===0)}function M(G){return G&&G[e]!=null?G[e]:typeof(G==null?void 0:G.readable)!="boolean"?null:g(G)?!1:d(G)&&G.readable&&!F(G)}function O(G){return G&&G[r]!=null?G[r]:typeof(G==null?void 0:G.writable)!="boolean"?null:g(G)?!1:l(G)&&G.writable&&!T(G)}function w(G,fe){return h(G)?g(G)?!0:!((fe==null?void 0:fe.readable)!==!1&&M(G)||(fe==null?void 0:fe.writable)!==!1&&O(G)):null}function E(G){var fe,me;return h(G)?G.writableErrored?G.writableErrored:(fe=(me=G._writableState)===null||me===void 0?void 0:me.errored)!==null&&fe!==void 0?fe:null:null}function R(G){var fe,me;return h(G)?G.readableErrored?G.readableErrored:(fe=(me=G._readableState)===null||me===void 0?void 0:me.errored)!==null&&fe!==void 0?fe:null:null}function D(G){if(!h(G))return null;if(typeof G.closed=="boolean")return G.closed;const fe=G._writableState,me=G._readableState;return typeof(fe==null?void 0:fe.closed)=="boolean"||typeof(me==null?void 0:me.closed)=="boolean"?(fe==null?void 0:fe.closed)||(me==null?void 0:me.closed):typeof G._closed=="boolean"&&B(G)?G._closed:null}function B(G){return typeof G._closed=="boolean"&&typeof G._defaultKeepAlive=="boolean"&&typeof G._removedConnection=="boolean"&&typeof G._removedContLen=="boolean"}function C(G){return typeof G._sent100=="boolean"&&B(G)}function $(G){var fe;return typeof G._consuming=="boolean"&&typeof G._dumped=="boolean"&&((fe=G.req)===null||fe===void 0?void 0:fe.upgradeOrConnect)===void 0}function Z(G){if(!h(G))return null;const fe=G._writableState,me=G._readableState,ye=fe||me;return!ye&&C(G)||!!(ye&&ye.autoDestroy&&ye.emitClose&&ye.closed===!1)}function ee(G){var fe;return!!(G&&((fe=G[a])!==null&&fe!==void 0?fe:G.readableDidRead||G.readableAborted))}function ce(G){var fe,me,ye,re,xe,Re,Ie,he,be,V;return!!(G&&((fe=(me=(ye=(re=(xe=(Re=G[t])!==null&&Re!==void 0?Re:G.readableErrored)!==null&&xe!==void 0?xe:G.writableErrored)!==null&&re!==void 0?re:(Ie=G._readableState)===null||Ie===void 0?void 0:Ie.errorEmitted)!==null&&ye!==void 0?ye:(he=G._writableState)===null||he===void 0?void 0:he.errorEmitted)!==null&&me!==void 0?me:(be=G._readableState)===null||be===void 0?void 0:be.errored)!==null&&fe!==void 0?fe:!((V=G._writableState)===null||V===void 0)&&V.errored))}return tA={isDestroyed:g,kIsDestroyed:i,isDisturbed:ee,kIsDisturbed:a,isErrored:ce,kIsErrored:t,isReadable:M,kIsReadable:e,kIsClosedPromise:c,kControllerErrorFunction:s,kIsWritable:r,isClosed:D,isDuplexNodeStream:f,isFinished:w,isIterable:m,isReadableNodeStream:d,isReadableStream:p,isReadableEnded:S,isReadableFinished:F,isReadableErrored:R,isNodeStream:h,isWebStream:b,isWritable:O,isWritableNodeStream:l,isWritableStream:y,isWritableEnded:T,isWritableFinished:v,isWritableErrored:E,isServerRequest:$,isServerResponse:C,willEmitClose:Z,isTransformStream:_},tA}var pD;function Qi(){if(pD)return g3.exports;pD=1;const u=Ui(),{AbortError:n,codes:o}=Hr(),{ERR_INVALID_ARG_TYPE:i,ERR_STREAM_PREMATURE_CLOSE:t}=o,{kEmptyObject:e,once:r}=Kr(),{validateAbortSignal:a,validateFunction:c,validateObject:s,validateBoolean:d}=w0(),{Promise:l,PromisePrototypeThen:f,SymbolDispose:h}=tr(),{isClosed:p,isReadable:y,isReadableNodeStream:_,isReadableStream:b,isReadableFinished:m,isReadableErrored:g,isWritable:T,isWritableNodeStream:v,isWritableStream:S,isWritableFinished:F,isWritableErrored:M,isNodeStream:O,willEmitClose:w,kIsClosedPromise:E}=di();let R;function D(ee){return ee.setHeader&&typeof ee.abort=="function"}const B=()=>{};function C(ee,ce,G){var fe,me;if(arguments.length===2?(G=ce,ce=e):ce==null?ce=e:s(ce,"options"),c(G,"callback"),a(ce.signal,"options.signal"),G=r(G),b(ee)||S(ee))return $(ee,ce,G);if(!O(ee))throw new i("stream",["ReadableStream","WritableStream","Stream"],ee);const ye=(fe=ce.readable)!==null&&fe!==void 0?fe:_(ee),re=(me=ce.writable)!==null&&me!==void 0?me:v(ee),xe=ee._writableState,Re=ee._readableState,Ie=()=>{ee.writable||V()};let he=w(ee)&&_(ee)===ye&&v(ee)===re,be=F(ee,!1);const V=()=>{be=!0,ee.destroyed&&(he=!1),!(he&&(!ee.readable||ye))&&(!ye||P)&&G.call(ee)};let P=m(ee,!1);const N=()=>{P=!0,ee.destroyed&&(he=!1),!(he&&(!ee.writable||re))&&(!re||be)&&G.call(ee)},A=Q=>{G.call(ee,Q)};let I=p(ee);const q=()=>{I=!0;const Q=M(ee)||g(ee);if(Q&&typeof Q!="boolean")return G.call(ee,Q);if(ye&&!P&&_(ee,!0)&&!m(ee,!1))return G.call(ee,new t);if(re&&!be&&!F(ee,!1))return G.call(ee,new t);G.call(ee)},H=()=>{I=!0;const Q=M(ee)||g(ee);if(Q&&typeof Q!="boolean")return G.call(ee,Q);G.call(ee)},U=()=>{ee.req.on("finish",V)};D(ee)?(ee.on("complete",V),he||ee.on("abort",q),ee.req?U():ee.on("request",U)):re&&!xe&&(ee.on("end",Ie),ee.on("close",Ie)),!he&&typeof ee.aborted=="boolean"&&ee.on("aborted",q),ee.on("end",N),ee.on("finish",V),ce.error!==!1&&ee.on("error",A),ee.on("close",q),I?u.nextTick(q):xe!=null&&xe.errorEmitted||Re!=null&&Re.errorEmitted?he||u.nextTick(H):(!ye&&(!he||y(ee))&&(be||T(ee)===!1)||!re&&(!he||T(ee))&&(P||y(ee)===!1)||Re&&ee.req&&ee.aborted)&&u.nextTick(H);const X=()=>{G=B,ee.removeListener("aborted",q),ee.removeListener("complete",V),ee.removeListener("abort",q),ee.removeListener("request",U),ee.req&&ee.req.removeListener("finish",V),ee.removeListener("end",Ie),ee.removeListener("close",Ie),ee.removeListener("finish",V),ee.removeListener("end",N),ee.removeListener("error",A),ee.removeListener("close",q)};if(ce.signal&&!I){const Q=()=>{const k=G;X(),k.call(ee,new n(void 0,{cause:ce.signal.reason}))};if(ce.signal.aborted)u.nextTick(Q);else{R=R||Kr().addAbortListener;const k=R(ce.signal,Q),oe=G;G=r((...se)=>{k[h](),oe.apply(ee,se)})}}return X}function $(ee,ce,G){let fe=!1,me=B;if(ce.signal)if(me=()=>{fe=!0,G.call(ee,new n(void 0,{cause:ce.signal.reason}))},ce.signal.aborted)u.nextTick(me);else{R=R||Kr().addAbortListener;const re=R(ce.signal,me),xe=G;G=r((...Re)=>{re[h](),xe.apply(ee,Re)})}const ye=(...re)=>{fe||u.nextTick(()=>G.apply(ee,re))};return f(ee[E].promise,ye,ye),B}function Z(ee,ce){var G;let fe=!1;return ce===null&&(ce=e),(G=ce)!==null&&G!==void 0&&G.cleanup&&(d(ce.cleanup,"cleanup"),fe=ce.cleanup),new l((me,ye)=>{const re=C(ee,ce,xe=>{fe&&re(),xe?ye(xe):me()})})}return g3.exports=C,g3.exports.finished=Z,g3.exports}var rA,yD;function bf(){if(yD)return rA;yD=1;const u=Ui(),{aggregateTwoErrors:n,codes:{ERR_MULTIPLE_CALLBACK:o},AbortError:i}=Hr(),{Symbol:t}=tr(),{kIsDestroyed:e,isDestroyed:r,isFinished:a,isServerRequest:c}=di(),s=t("kDestroy"),d=t("kConstruct");function l(w,E,R){w&&(w.stack,E&&!E.errored&&(E.errored=w),R&&!R.errored&&(R.errored=w))}function f(w,E){const R=this._readableState,D=this._writableState,B=D||R;return D!=null&&D.destroyed||R!=null&&R.destroyed?(typeof E=="function"&&E(),this):(l(w,D,R),D&&(D.destroyed=!0),R&&(R.destroyed=!0),B.constructed?h(this,w,E):this.once(s,function(C){h(this,n(C,w),E)}),this)}function h(w,E,R){let D=!1;function B(C){if(D)return;D=!0;const $=w._readableState,Z=w._writableState;l(C,Z,$),Z&&(Z.closed=!0),$&&($.closed=!0),typeof R=="function"&&R(C),C?u.nextTick(p,w,C):u.nextTick(y,w)}try{w._destroy(E||null,B)}catch(C){B(C)}}function p(w,E){_(w,E),y(w)}function y(w){const E=w._readableState,R=w._writableState;R&&(R.closeEmitted=!0),E&&(E.closeEmitted=!0),(R!=null&&R.emitClose||E!=null&&E.emitClose)&&w.emit("close")}function _(w,E){const R=w._readableState,D=w._writableState;D!=null&&D.errorEmitted||R!=null&&R.errorEmitted||(D&&(D.errorEmitted=!0),R&&(R.errorEmitted=!0),w.emit("error",E))}function b(){const w=this._readableState,E=this._writableState;w&&(w.constructed=!0,w.closed=!1,w.closeEmitted=!1,w.destroyed=!1,w.errored=null,w.errorEmitted=!1,w.reading=!1,w.ended=w.readable===!1,w.endEmitted=w.readable===!1),E&&(E.constructed=!0,E.destroyed=!1,E.closed=!1,E.closeEmitted=!1,E.errored=null,E.errorEmitted=!1,E.finalCalled=!1,E.prefinished=!1,E.ended=E.writable===!1,E.ending=E.writable===!1,E.finished=E.writable===!1)}function m(w,E,R){const D=w._readableState,B=w._writableState;if(B!=null&&B.destroyed||D!=null&&D.destroyed)return this;D!=null&&D.autoDestroy||B!=null&&B.autoDestroy?w.destroy(E):E&&(E.stack,B&&!B.errored&&(B.errored=E),D&&!D.errored&&(D.errored=E),R?u.nextTick(_,w,E):_(w,E))}function g(w,E){if(typeof w._construct!="function")return;const R=w._readableState,D=w._writableState;R&&(R.constructed=!1),D&&(D.constructed=!1),w.once(d,E),!(w.listenerCount(d)>1)&&u.nextTick(T,w)}function T(w){let E=!1;function R(D){if(E){m(w,D??new o);return}E=!0;const B=w._readableState,C=w._writableState,$=C||B;B&&(B.constructed=!0),C&&(C.constructed=!0),$.destroyed?w.emit(s,D):D?m(w,D,!0):u.nextTick(v,w)}try{w._construct(D=>{u.nextTick(R,D)})}catch(D){u.nextTick(R,D)}}function v(w){w.emit(d)}function S(w){return(w==null?void 0:w.setHeader)&&typeof w.abort=="function"}function F(w){w.emit("close")}function M(w,E){w.emit("error",E),u.nextTick(F,w)}function O(w,E){!w||r(w)||(!E&&!a(w)&&(E=new i),c(w)?(w.socket=null,w.destroy(E)):S(w)?w.abort():S(w.req)?w.req.abort():typeof w.destroy=="function"?w.destroy(E):typeof w.close=="function"?w.close():E?u.nextTick(M,w,E):u.nextTick(F,w),w.destroyed||(w[e]=!0))}return rA={construct:g,destroyer:O,destroy:f,undestroy:b,errorOrDestroy:m},rA}var nA,bD;function iA(){if(bD)return nA;bD=1;const{ArrayIsArray:u,ObjectSetPrototypeOf:n}=tr(),{EventEmitter:o}=hp();function i(e){o.call(this,e)}n(i.prototype,o.prototype),n(i,o),i.prototype.pipe=function(e,r){const a=this;function c(y){e.writable&&e.write(y)===!1&&a.pause&&a.pause()}a.on("data",c);function s(){a.readable&&a.resume&&a.resume()}e.on("drain",s),!e._isStdio&&(!r||r.end!==!1)&&(a.on("end",l),a.on("close",f));let d=!1;function l(){d||(d=!0,e.end())}function f(){d||(d=!0,typeof e.destroy=="function"&&e.destroy())}function h(y){p(),o.listenerCount(this,"error")===0&&this.emit("error",y)}t(a,"error",h),t(e,"error",h);function p(){a.removeListener("data",c),e.removeListener("drain",s),a.removeListener("end",l),a.removeListener("close",f),a.removeListener("error",h),e.removeListener("error",h),a.removeListener("end",p),a.removeListener("close",p),e.removeListener("close",p)}return a.on("end",p),a.on("close",p),e.on("close",p),e.emit("pipe",a),e};function t(e,r,a){if(typeof e.prependListener=="function")return e.prependListener(r,a);!e._events||!e._events[r]?e.on(r,a):u(e._events[r])?e._events[r].unshift(a):e._events[r]=[a,e._events[r]]}return nA={Stream:i,prependListener:t},nA}var aA={exports:{}},_D;function m3(){return _D||(_D=1,(function(u){const{SymbolDispose:n}=tr(),{AbortError:o,codes:i}=Hr(),{isNodeStream:t,isWebStream:e,kControllerErrorFunction:r}=di(),a=Qi(),{ERR_INVALID_ARG_TYPE:c}=i;let s;const d=(l,f)=>{if(typeof l!="object"||!("aborted"in l))throw new c(f,"AbortSignal",l)};u.exports.addAbortSignal=function(f,h){if(d(f,"signal"),!t(h)&&!e(h))throw new c("stream",["ReadableStream","WritableStream","Stream"],h);return u.exports.addAbortSignalNoValidate(f,h)},u.exports.addAbortSignalNoValidate=function(l,f){if(typeof l!="object"||!("aborted"in l))return f;const h=t(f)?()=>{f.destroy(new o(void 0,{cause:l.reason}))}:()=>{f[r](new o(void 0,{cause:l.reason}))};if(l.aborted)h();else{s=s||Kr().addAbortListener;const p=s(l,h);a(f,p[n])}return f}})(aA)),aA.exports}var uA,gD;function UY(){if(gD)return uA;gD=1;const{StringPrototypeSlice:u,SymbolIterator:n,TypedArrayPrototypeSet:o,Uint8Array:i}=tr(),{Buffer:t}=kn(),{inspect:e}=Kr();return uA=class{constructor(){this.head=null,this.tail=null,this.length=0}push(a){const c={data:a,next:null};this.length>0?this.tail.next=c:this.head=c,this.tail=c,++this.length}unshift(a){const c={data:a,next:this.head};this.length===0&&(this.tail=c),this.head=c,++this.length}shift(){if(this.length===0)return;const a=this.head.data;return this.length===1?this.head=this.tail=null:this.head=this.head.next,--this.length,a}clear(){this.head=this.tail=null,this.length=0}join(a){if(this.length===0)return"";let c=this.head,s=""+c.data;for(;(c=c.next)!==null;)s+=a+c.data;return s}concat(a){if(this.length===0)return t.alloc(0);const c=t.allocUnsafe(a>>>0);let s=this.head,d=0;for(;s;)o(c,s.data,d),d+=s.data.length,s=s.next;return c}consume(a,c){const s=this.head.data;if(a<s.length){const d=s.slice(0,a);return this.head.data=s.slice(a),d}return a===s.length?this.shift():c?this._getString(a):this._getBuffer(a)}first(){return this.head.data}*[n](){for(let a=this.head;a;a=a.next)yield a.data}_getString(a){let c="",s=this.head,d=0;do{const l=s.data;if(a>l.length)c+=l,a-=l.length;else{a===l.length?(c+=l,++d,s.next?this.head=s.next:this.head=this.tail=null):(c+=u(l,0,a),this.head=s,s.data=u(l,a));break}++d}while((s=s.next)!==null);return this.length-=d,c}_getBuffer(a){const c=t.allocUnsafe(a),s=a;let d=this.head,l=0;do{const f=d.data;if(a>f.length)o(c,f,s-a),a-=f.length;else{a===f.length?(o(c,f,s-a),++l,d.next?this.head=d.next:this.head=this.tail=null):(o(c,new i(f.buffer,f.byteOffset,a),s-a),this.head=d,d.data=f.slice(a));break}++l}while((d=d.next)!==null);return this.length-=l,c}[Symbol.for("nodejs.util.inspect.custom")](a,c){return e(this,{...c,depth:0,customInspect:!1})}},uA}var oA,mD;function v3(){if(mD)return oA;mD=1;const{MathFloor:u,NumberIsInteger:n}=tr(),{validateInteger:o}=w0(),{ERR_INVALID_ARG_VALUE:i}=Hr().codes;let t=16*1024,e=16;function r(d,l,f){return d.highWaterMark!=null?d.highWaterMark:l?d[f]:null}function a(d){return d?e:t}function c(d,l){o(l,"value",0),d?e=l:t=l}function s(d,l,f,h){const p=r(l,h,f);if(p!=null){if(!n(p)||p<0){const y=h?`options.${f}`:"options.highWaterMark";throw new i(y,p)}return u(p)}return a(d.objectMode)}return oA={getHighWaterMark:s,getDefaultHighWaterMark:a,setDefaultHighWaterMark:c},oA}var sA={},T3={exports:{}};/*! safe-buffer. MIT License. Feross Aboukhadijeh <https://feross.org/opensource> */var vD;function VY(){return vD||(vD=1,(function(u,n){var o=kn(),i=o.Buffer;function t(r,a){for(var c in r)a[c]=r[c]}i.from&&i.alloc&&i.allocUnsafe&&i.allocUnsafeSlow?u.exports=o:(t(o,n),n.Buffer=e);function e(r,a,c){return i(r,a,c)}e.prototype=Object.create(i.prototype),t(i,e),e.from=function(r,a,c){if(typeof r=="number")throw new TypeError("Argument must not be a number");return i(r,a,c)},e.alloc=function(r,a,c){if(typeof r!="number")throw new TypeError("Argument must be a number");var s=i(r);return a!==void 0?typeof c=="string"?s.fill(a,c):s.fill(a):s.fill(0),s},e.allocUnsafe=function(r){if(typeof r!="number")throw new TypeError("Argument must be a number");return i(r)},e.allocUnsafeSlow=function(r){if(typeof r!="number")throw new TypeError("Argument must be a number");return o.SlowBuffer(r)}})(T3,T3.exports)),T3.exports}var TD;function QY(){if(TD)return sA;TD=1;var u=VY().Buffer,n=u.isEncoding||function(b){switch(b=""+b,b&&b.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return!0;default:return!1}};function o(b){if(!b)return"utf8";for(var m;;)switch(b){case"utf8":case"utf-8":return"utf8";case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return"utf16le";case"latin1":case"binary":return"latin1";case"base64":case"ascii":case"hex":return b;default:if(m)return;b=(""+b).toLowerCase(),m=!0}}function i(b){var m=o(b);if(typeof m!="string"&&(u.isEncoding===n||!n(b)))throw new Error("Unknown encoding: "+b);return m||b}sA.StringDecoder=t;function t(b){this.encoding=i(b);var m;switch(this.encoding){case"utf16le":this.text=l,this.end=f,m=4;break;case"utf8":this.fillLast=c,m=4;break;case"base64":this.text=h,this.end=p,m=3;break;default:this.write=y,this.end=_;return}this.lastNeed=0,this.lastTotal=0,this.lastChar=u.allocUnsafe(m)}t.prototype.write=function(b){if(b.length===0)return"";var m,g;if(this.lastNeed){if(m=this.fillLast(b),m===void 0)return"";g=this.lastNeed,this.lastNeed=0}else g=0;return g<b.length?m?m+this.text(b,g):this.text(b,g):m||""},t.prototype.end=d,t.prototype.text=s,t.prototype.fillLast=function(b){if(this.lastNeed<=b.length)return b.copy(this.lastChar,this.lastTotal-this.lastNeed,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);b.copy(this.lastChar,this.lastTotal-this.lastNeed,0,b.length),this.lastNeed-=b.length};function e(b){return b<=127?0:b>>5===6?2:b>>4===14?3:b>>3===30?4:b>>6===2?-1:-2}function r(b,m,g){var T=m.length-1;if(T<g)return 0;var v=e(m[T]);return v>=0?(v>0&&(b.lastNeed=v-1),v):--T<g||v===-2?0:(v=e(m[T]),v>=0?(v>0&&(b.lastNeed=v-2),v):--T<g||v===-2?0:(v=e(m[T]),v>=0?(v>0&&(v===2?v=0:b.lastNeed=v-3),v):0))}function a(b,m,g){if((m[0]&192)!==128)return b.lastNeed=0,"";if(b.lastNeed>1&&m.length>1){if((m[1]&192)!==128)return b.lastNeed=1,"";if(b.lastNeed>2&&m.length>2&&(m[2]&192)!==128)return b.lastNeed=2,""}}function c(b){var m=this.lastTotal-this.lastNeed,g=a(this,b);if(g!==void 0)return g;if(this.lastNeed<=b.length)return b.copy(this.lastChar,m,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);b.copy(this.lastChar,m,0,b.length),this.lastNeed-=b.length}function s(b,m){var g=r(this,b,m);if(!this.lastNeed)return b.toString("utf8",m);this.lastTotal=g;var T=b.length-(g-this.lastNeed);return b.copy(this.lastChar,0,T),b.toString("utf8",m,T)}function d(b){var m=b&&b.length?this.write(b):"";return this.lastNeed?m+"":m}function l(b,m){if((b.length-m)%2===0){var g=b.toString("utf16le",m);if(g){var T=g.charCodeAt(g.length-1);if(T>=55296&&T<=56319)return this.lastNeed=2,this.lastTotal=4,this.lastChar[0]=b[b.length-2],this.lastChar[1]=b[b.length-1],g.slice(0,-1)}return g}return this.lastNeed=1,this.lastTotal=2,this.lastChar[0]=b[b.length-1],b.toString("utf16le",m,b.length-1)}function f(b){var m=b&&b.length?this.write(b):"";if(this.lastNeed){var g=this.lastTotal-this.lastNeed;return m+this.lastChar.toString("utf16le",0,g)}return m}function h(b,m){var g=(b.length-m)%3;return g===0?b.toString("base64",m):(this.lastNeed=3-g,this.lastTotal=3,g===1?this.lastChar[0]=b[b.length-1]:(this.lastChar[0]=b[b.length-2],this.lastChar[1]=b[b.length-1]),b.toString("base64",m,b.length-g))}function p(b){var m=b&&b.length?this.write(b):"";return this.lastNeed?m+this.lastChar.toString("base64",0,3-this.lastNeed):m}function y(b){return b.toString(this.encoding)}function _(b){return b&&b.length?this.write(b):""}return sA}var cA,wD;function SD(){if(wD)return cA;wD=1;const u=Ui(),{PromisePrototypeThen:n,SymbolAsyncIterator:o,SymbolIterator:i}=tr(),{Buffer:t}=kn(),{ERR_INVALID_ARG_TYPE:e,ERR_STREAM_NULL_VALUES:r}=Hr().codes;function a(c,s,d){let l;if(typeof s=="string"||s instanceof t)return new c({objectMode:!0,...d,read(){this.push(s),this.push(null)}});let f;if(s&&s[o])f=!0,l=s[o]();else if(s&&s[i])f=!1,l=s[i]();else throw new e("iterable",["Iterable"],s);const h=new c({objectMode:!0,highWaterMark:1,...d});let p=!1;h._read=function(){p||(p=!0,_())},h._destroy=function(b,m){n(y(b),()=>u.nextTick(m,b),g=>u.nextTick(m,g||b))};async function y(b){const m=b!=null,g=typeof l.throw=="function";if(m&&g){const{value:T,done:v}=await l.throw(b);if(await T,v)return}if(typeof l.return=="function"){const{value:T}=await l.return();await T}}async function _(){for(;;){try{const{value:b,done:m}=f?await l.next():l.next();if(m)h.push(null);else{const g=b&&typeof b.then=="function"?await b:b;if(g===null)throw p=!1,new r;if(h.push(g))continue;p=!1}}catch(b){h.destroy(b)}break}}return h}return cA=a,cA}var dA,OD;function w3(){if(OD)return dA;OD=1;const u=Ui(),{ArrayPrototypeIndexOf:n,NumberIsInteger:o,NumberIsNaN:i,NumberParseInt:t,ObjectDefineProperties:e,ObjectKeys:r,ObjectSetPrototypeOf:a,Promise:c,SafeSet:s,SymbolAsyncDispose:d,SymbolAsyncIterator:l,Symbol:f}=tr();dA=se,se.ReadableState=oe;const{EventEmitter:h}=hp(),{Stream:p,prependListener:y}=iA(),{Buffer:_}=kn(),{addAbortSignal:b}=m3(),m=Qi();let g=Kr().debuglog("stream",te=>{g=te});const T=UY(),v=bf(),{getHighWaterMark:S,getDefaultHighWaterMark:F}=v3(),{aggregateTwoErrors:M,codes:{ERR_INVALID_ARG_TYPE:O,ERR_METHOD_NOT_IMPLEMENTED:w,ERR_OUT_OF_RANGE:E,ERR_STREAM_PUSH_AFTER_EOF:R,ERR_STREAM_UNSHIFT_AFTER_END_EVENT:D},AbortError:B}=Hr(),{validateObject:C}=w0(),$=f("kPaused"),{StringDecoder:Z}=QY(),ee=SD();a(se.prototype,p.prototype),a(se,p);const ce=()=>{},{errorOrDestroy:G}=v,fe=1,me=2,ye=4,re=8,xe=16,Re=32,Ie=64,he=128,be=256,V=512,P=1024,N=2048,A=4096,I=8192,q=16384,H=32768,U=65536,X=1<<17,Q=1<<18;function k(te){return{enumerable:!1,get(){return(this.state&te)!==0},set(ne){ne?this.state|=te:this.state&=~te}}}e(oe.prototype,{objectMode:k(fe),ended:k(me),endEmitted:k(ye),reading:k(re),constructed:k(xe),sync:k(Re),needReadable:k(Ie),emittedReadable:k(he),readableListening:k(be),resumeScheduled:k(V),errorEmitted:k(P),emitClose:k(N),autoDestroy:k(A),destroyed:k(I),closed:k(q),closeEmitted:k(H),multiAwaitDrain:k(U),readingMore:k(X),dataEmitted:k(Q)});function oe(te,ne,Ne){typeof Ne!="boolean"&&(Ne=ne instanceof li()),this.state=N|A|xe|Re,te&&te.objectMode&&(this.state|=fe),Ne&&te&&te.readableObjectMode&&(this.state|=fe),this.highWaterMark=te?S(this,te,"readableHighWaterMark",Ne):F(!1),this.buffer=new T,this.length=0,this.pipes=[],this.flowing=null,this[$]=null,te&&te.emitClose===!1&&(this.state&=~N),te&&te.autoDestroy===!1&&(this.state&=~A),this.errored=null,this.defaultEncoding=te&&te.defaultEncoding||"utf8",this.awaitDrainWriters=null,this.decoder=null,this.encoding=null,te&&te.encoding&&(this.decoder=new Z(te.encoding),this.encoding=te.encoding)}function se(te){if(!(this instanceof se))return new se(te);const ne=this instanceof li();this._readableState=new oe(te,this,ne),te&&(typeof te.read=="function"&&(this._read=te.read),typeof te.destroy=="function"&&(this._destroy=te.destroy),typeof te.construct=="function"&&(this._construct=te.construct),te.signal&&!ne&&b(te.signal,this)),p.call(this,te),v.construct(this,()=>{this._readableState.needReadable&&W(this,this._readableState)})}se.prototype.destroy=v.destroy,se.prototype._undestroy=v.undestroy,se.prototype._destroy=function(te,ne){ne(te)},se.prototype[h.captureRejectionSymbol]=function(te){this.destroy(te)},se.prototype[d]=function(){let te;return this.destroyed||(te=this.readableEnded?null:new B,this.destroy(te)),new c((ne,Ne)=>m(this,Ce=>Ce&&Ce!==te?Ne(Ce):ne(null)))},se.prototype.push=function(te,ne){return Se(this,te,ne,!1)},se.prototype.unshift=function(te,ne){return Se(this,te,ne,!0)};function Se(te,ne,Ne,Ce){g("readableAddChunk",ne);const Qe=te._readableState;let Tt;if((Qe.state&fe)===0&&(typeof ne=="string"?(Ne=Ne||Qe.defaultEncoding,Qe.encoding!==Ne&&(Ce&&Qe.encoding?ne=_.from(ne,Ne).toString(Qe.encoding):(ne=_.from(ne,Ne),Ne=""))):ne instanceof _?Ne="":p._isUint8Array(ne)?(ne=p._uint8ArrayToBuffer(ne),Ne=""):ne!=null&&(Tt=new O("chunk",["string","Buffer","Uint8Array"],ne))),Tt)G(te,Tt);else if(ne===null)Qe.state&=~re,x(te,Qe);else if((Qe.state&fe)!==0||ne&&ne.length>0)if(Ce)if((Qe.state&ye)!==0)G(te,new D);else{if(Qe.destroyed||Qe.errored)return!1;Me(te,Qe,ne,!0)}else if(Qe.ended)G(te,new R);else{if(Qe.destroyed||Qe.errored)return!1;Qe.state&=~re,Qe.decoder&&!Ne?(ne=Qe.decoder.write(ne),Qe.objectMode||ne.length!==0?Me(te,Qe,ne,!1):W(te,Qe)):Me(te,Qe,ne,!1)}else Ce||(Qe.state&=~re,W(te,Qe));return!Qe.ended&&(Qe.length<Qe.highWaterMark||Qe.length===0)}function Me(te,ne,Ne,Ce){ne.flowing&&ne.length===0&&!ne.sync&&te.listenerCount("data")>0?((ne.state&U)!==0?ne.awaitDrainWriters.clear():ne.awaitDrainWriters=null,ne.dataEmitted=!0,te.emit("data",Ne)):(ne.length+=ne.objectMode?1:Ne.length,Ce?ne.buffer.unshift(Ne):ne.buffer.push(Ne),(ne.state&Ie)!==0&&j(te)),W(te,ne)}se.prototype.isPaused=function(){const te=this._readableState;return te[$]===!0||te.flowing===!1},se.prototype.setEncoding=function(te){const ne=new Z(te);this._readableState.decoder=ne,this._readableState.encoding=this._readableState.decoder.encoding;const Ne=this._readableState.buffer;let Ce="";for(const Qe of Ne)Ce+=ne.write(Qe);return Ne.clear(),Ce!==""&&Ne.push(Ce),this._readableState.length=Ce.length,this};const Oe=1073741824;function ue(te){if(te>Oe)throw new E("size","<= 1GiB",te);return te--,te|=te>>>1,te|=te>>>2,te|=te>>>4,te|=te>>>8,te|=te>>>16,te++,te}function L(te,ne){return te<=0||ne.length===0&&ne.ended?0:(ne.state&fe)!==0?1:i(te)?ne.flowing&&ne.length?ne.buffer.first().length:ne.length:te<=ne.length?te:ne.ended?ne.length:0}se.prototype.read=function(te){g("read",te),te===void 0?te=NaN:o(te)||(te=t(te,10));const ne=this._readableState,Ne=te;if(te>ne.highWaterMark&&(ne.highWaterMark=ue(te)),te!==0&&(ne.state&=~he),te===0&&ne.needReadable&&((ne.highWaterMark!==0?ne.length>=ne.highWaterMark:ne.length>0)||ne.ended))return g("read: emitReadable",ne.length,ne.ended),ne.length===0&&ne.ended?Pe(this):j(this),null;if(te=L(te,ne),te===0&&ne.ended)return ne.length===0&&Pe(this),null;let Ce=(ne.state&Ie)!==0;if(g("need readable",Ce),(ne.length===0||ne.length-te<ne.highWaterMark)&&(Ce=!0,g("length less than watermark",Ce)),ne.ended||ne.reading||ne.destroyed||ne.errored||!ne.constructed)Ce=!1,g("reading, ended or constructing",Ce);else if(Ce){g("do read"),ne.state|=re|Re,ne.length===0&&(ne.state|=Ie);try{this._read(ne.highWaterMark)}catch(Tt){G(this,Tt)}ne.state&=~Re,ne.reading||(te=L(Ne,ne))}let Qe;return te>0?Qe=$e(te,ne):Qe=null,Qe===null?(ne.needReadable=ne.length<=ne.highWaterMark,te=0):(ne.length-=te,ne.multiAwaitDrain?ne.awaitDrainWriters.clear():ne.awaitDrainWriters=null),ne.length===0&&(ne.ended||(ne.needReadable=!0),Ne!==te&&ne.ended&&Pe(this)),Qe!==null&&!ne.errorEmitted&&!ne.closeEmitted&&(ne.dataEmitted=!0,this.emit("data",Qe)),Qe};function x(te,ne){if(g("onEofChunk"),!ne.ended){if(ne.decoder){const Ne=ne.decoder.end();Ne&&Ne.length&&(ne.buffer.push(Ne),ne.length+=ne.objectMode?1:Ne.length)}ne.ended=!0,ne.sync?j(te):(ne.needReadable=!1,ne.emittedReadable=!0,z(te))}}function j(te){const ne=te._readableState;g("emitReadable",ne.needReadable,ne.emittedReadable),ne.needReadable=!1,ne.emittedReadable||(g("emitReadable",ne.flowing),ne.emittedReadable=!0,u.nextTick(z,te))}function z(te){const ne=te._readableState;g("emitReadable_",ne.destroyed,ne.length,ne.ended),!ne.destroyed&&!ne.errored&&(ne.length||ne.ended)&&(te.emit("readable"),ne.emittedReadable=!1),ne.needReadable=!ne.flowing&&!ne.ended&&ne.length<=ne.highWaterMark,J(te)}function W(te,ne){!ne.readingMore&&ne.constructed&&(ne.readingMore=!0,u.nextTick(le,te,ne))}function le(te,ne){for(;!ne.reading&&!ne.ended&&(ne.length<ne.highWaterMark||ne.flowing&&ne.length===0);){const Ne=ne.length;if(g("maybeReadMore read 0"),te.read(0),Ne===ne.length)break}ne.readingMore=!1}se.prototype._read=function(te){throw new w("_read()")},se.prototype.pipe=function(te,ne){const Ne=this,Ce=this._readableState;Ce.pipes.length===1&&(Ce.multiAwaitDrain||(Ce.multiAwaitDrain=!0,Ce.awaitDrainWriters=new s(Ce.awaitDrainWriters?[Ce.awaitDrainWriters]:[]))),Ce.pipes.push(te),g("pipe count=%d opts=%j",Ce.pipes.length,ne);const Tt=(!ne||ne.end!==!1)&&te!==u.stdout&&te!==u.stderr?ht:ie;Ce.endEmitted?u.nextTick(Tt):Ne.once("end",Tt),te.on("unpipe",Ue);function Ue(_e,ve){g("onunpipe"),_e===Ne&&ve&&ve.hasUnpiped===!1&&(ve.hasUnpiped=!0,tt())}function ht(){g("onend"),te.end()}let He,Je=!1;function tt(){g("cleanup"),te.removeListener("close",Lr),te.removeListener("finish",Ge),He&&te.removeListener("drain",He),te.removeListener("error",Xe),te.removeListener("unpipe",Ue),Ne.removeListener("end",ht),Ne.removeListener("end",ie),Ne.removeListener("data",at),Je=!0,He&&Ce.awaitDrainWriters&&(!te._writableState||te._writableState.needDrain)&&He()}function wt(){Je||(Ce.pipes.length===1&&Ce.pipes[0]===te?(g("false write response, pause",0),Ce.awaitDrainWriters=te,Ce.multiAwaitDrain=!1):Ce.pipes.length>1&&Ce.pipes.includes(te)&&(g("false write response, pause",Ce.awaitDrainWriters.size),Ce.awaitDrainWriters.add(te)),Ne.pause()),He||(He=ae(Ne,te),te.on("drain",He))}Ne.on("data",at);function at(_e){g("ondata");const ve=te.write(_e);g("dest.write",ve),ve===!1&&wt()}function Xe(_e){if(g("onerror",_e),ie(),te.removeListener("error",Xe),te.listenerCount("error")===0){const ve=te._writableState||te._readableState;ve&&!ve.errorEmitted?G(te,_e):te.emit("error",_e)}}y(te,"error",Xe);function Lr(){te.removeListener("finish",Ge),ie()}te.once("close",Lr);function Ge(){g("onfinish"),te.removeListener("close",Lr),ie()}te.once("finish",Ge);function ie(){g("unpipe"),Ne.unpipe(te)}return te.emit("pipe",Ne),te.writableNeedDrain===!0?wt():Ce.flowing||(g("pipe resume"),Ne.resume()),te};function ae(te,ne){return function(){const Ce=te._readableState;Ce.awaitDrainWriters===ne?(g("pipeOnDrain",1),Ce.awaitDrainWriters=null):Ce.multiAwaitDrain&&(g("pipeOnDrain",Ce.awaitDrainWriters.size),Ce.awaitDrainWriters.delete(ne)),(!Ce.awaitDrainWriters||Ce.awaitDrainWriters.size===0)&&te.listenerCount("data")&&te.resume()}}se.prototype.unpipe=function(te){const ne=this._readableState,Ne={hasUnpiped:!1};if(ne.pipes.length===0)return this;if(!te){const Qe=ne.pipes;ne.pipes=[],this.pause();for(let Tt=0;Tt<Qe.length;Tt++)Qe[Tt].emit("unpipe",this,{hasUnpiped:!1});return this}const Ce=n(ne.pipes,te);return Ce===-1?this:(ne.pipes.splice(Ce,1),ne.pipes.length===0&&this.pause(),te.emit("unpipe",this,Ne),this)},se.prototype.on=function(te,ne){const Ne=p.prototype.on.call(this,te,ne),Ce=this._readableState;return te==="data"?(Ce.readableListening=this.listenerCount("readable")>0,Ce.flowing!==!1&&this.resume()):te==="readable"&&!Ce.endEmitted&&!Ce.readableListening&&(Ce.readableListening=Ce.needReadable=!0,Ce.flowing=!1,Ce.emittedReadable=!1,g("on readable",Ce.length,Ce.reading),Ce.length?j(this):Ce.reading||u.nextTick(Ve,this)),Ne},se.prototype.addListener=se.prototype.on,se.prototype.removeListener=function(te,ne){const Ne=p.prototype.removeListener.call(this,te,ne);return te==="readable"&&u.nextTick(De,this),Ne},se.prototype.off=se.prototype.removeListener,se.prototype.removeAllListeners=function(te){const ne=p.prototype.removeAllListeners.apply(this,arguments);return(te==="readable"||te===void 0)&&u.nextTick(De,this),ne};function De(te){const ne=te._readableState;ne.readableListening=te.listenerCount("readable")>0,ne.resumeScheduled&&ne[$]===!1?ne.flowing=!0:te.listenerCount("data")>0?te.resume():ne.readableListening||(ne.flowing=null)}function Ve(te){g("readable nexttick read 0"),te.read(0)}se.prototype.resume=function(){const te=this._readableState;return te.flowing||(g("resume"),te.flowing=!te.readableListening,Be(this,te)),te[$]=!1,this};function Be(te,ne){ne.resumeScheduled||(ne.resumeScheduled=!0,u.nextTick(Ze,te,ne))}function Ze(te,ne){g("resume",ne.reading),ne.reading||te.read(0),ne.resumeScheduled=!1,te.emit("resume"),J(te),ne.flowing&&!ne.reading&&te.read(0)}se.prototype.pause=function(){return g("call pause flowing=%j",this._readableState.flowing),this._readableState.flowing!==!1&&(g("pause"),this._readableState.flowing=!1,this.emit("pause")),this._readableState[$]=!0,this};function J(te){const ne=te._readableState;for(g("flow",ne.flowing);ne.flowing&&te.read()!==null;);}se.prototype.wrap=function(te){let ne=!1;te.on("data",Ce=>{!this.push(Ce)&&te.pause&&(ne=!0,te.pause())}),te.on("end",()=>{this.push(null)}),te.on("error",Ce=>{G(this,Ce)}),te.on("close",()=>{this.destroy()}),te.on("destroy",()=>{this.destroy()}),this._read=()=>{ne&&te.resume&&(ne=!1,te.resume())};const Ne=r(te);for(let Ce=1;Ce<Ne.length;Ce++){const Qe=Ne[Ce];this[Qe]===void 0&&typeof te[Qe]=="function"&&(this[Qe]=te[Qe].bind(te))}return this},se.prototype[l]=function(){return we(this)},se.prototype.iterator=function(te){return te!==void 0&&C(te,"options"),we(this,te)};function we(te,ne){typeof te.read!="function"&&(te=se.wrap(te,{objectMode:!0}));const Ne=Ee(te,ne);return Ne.stream=te,Ne}async function*Ee(te,ne){let Ne=ce;function Ce(Ue){this===te?(Ne(),Ne=ce):Ne=Ue}te.on("readable",Ce);let Qe;const Tt=m(te,{writable:!1},Ue=>{Qe=Ue?M(Qe,Ue):null,Ne(),Ne=ce});try{for(;;){const Ue=te.destroyed?null:te.read();if(Ue!==null)yield Ue;else{if(Qe)throw Qe;if(Qe===null)return;await new c(Ce)}}}catch(Ue){throw Qe=M(Qe,Ue),Qe}finally{(Qe||(ne==null?void 0:ne.destroyOnReturn)!==!1)&&(Qe===void 0||te._readableState.autoDestroy)?v.destroyer(te,null):(te.off("readable",Ce),Tt())}}e(se.prototype,{readable:{__proto__:null,get(){const te=this._readableState;return!!te&&te.readable!==!1&&!te.destroyed&&!te.errorEmitted&&!te.endEmitted},set(te){this._readableState&&(this._readableState.readable=!!te)}},readableDidRead:{__proto__:null,enumerable:!1,get:function(){return this._readableState.dataEmitted}},readableAborted:{__proto__:null,enumerable:!1,get:function(){return!!(this._readableState.readable!==!1&&(this._readableState.destroyed||this._readableState.errored)&&!this._readableState.endEmitted)}},readableHighWaterMark:{__proto__:null,enumerable:!1,get:function(){return this._readableState.highWaterMark}},readableBuffer:{__proto__:null,enumerable:!1,get:function(){return this._readableState&&this._readableState.buffer}},readableFlowing:{__proto__:null,enumerable:!1,get:function(){return this._readableState.flowing},set:function(te){this._readableState&&(this._readableState.flowing=te)}},readableLength:{__proto__:null,enumerable:!1,get(){return this._readableState.length}},readableObjectMode:{__proto__:null,enumerable:!1,get(){return this._readableState?this._readableState.objectMode:!1}},readableEncoding:{__proto__:null,enumerable:!1,get(){return this._readableState?this._readableState.encoding:null}},errored:{__proto__:null,enumerable:!1,get(){return this._readableState?this._readableState.errored:null}},closed:{__proto__:null,get(){return this._readableState?this._readableState.closed:!1}},destroyed:{__proto__:null,enumerable:!1,get(){return this._readableState?this._readableState.destroyed:!1},set(te){this._readableState&&(this._readableState.destroyed=te)}},readableEnded:{__proto__:null,enumerable:!1,get(){return this._readableState?this._readableState.endEmitted:!1}}}),e(oe.prototype,{pipesCount:{__proto__:null,get(){return this.pipes.length}},paused:{__proto__:null,get(){return this[$]!==!1},set(te){this[$]=!!te}}}),se._fromList=$e;function $e(te,ne){if(ne.length===0)return null;let Ne;return ne.objectMode?Ne=ne.buffer.shift():!te||te>=ne.length?(ne.decoder?Ne=ne.buffer.join(""):ne.buffer.length===1?Ne=ne.buffer.first():Ne=ne.buffer.concat(ne.length),ne.buffer.clear()):Ne=ne.buffer.consume(te,ne.decoder),Ne}function Pe(te){const ne=te._readableState;g("endReadable",ne.endEmitted),ne.endEmitted||(ne.ended=!0,u.nextTick(et,ne,te))}function et(te,ne){if(g("endReadableNT",te.endEmitted,te.length),!te.errored&&!te.closeEmitted&&!te.endEmitted&&te.length===0){if(te.endEmitted=!0,ne.emit("end"),ne.writable&&ne.allowHalfOpen===!1)u.nextTick(rt,ne);else if(te.autoDestroy){const Ne=ne._writableState;(!Ne||Ne.autoDestroy&&(Ne.finished||Ne.writable===!1))&&ne.destroy()}}}function rt(te){te.writable&&!te.writableEnded&&!te.destroyed&&te.end()}se.from=function(te,ne){return ee(se,te,ne)};let ke;function ft(){return ke===void 0&&(ke={}),ke}return se.fromWeb=function(te,ne){return ft().newStreamReadableFromReadableStream(te,ne)},se.toWeb=function(te,ne){return ft().newReadableStreamFromStreamReadable(te,ne)},se.wrap=function(te,ne){var Ne,Ce;return new se({objectMode:(Ne=(Ce=te.readableObjectMode)!==null&&Ce!==void 0?Ce:te.objectMode)!==null&&Ne!==void 0?Ne:!0,...ne,destroy(Qe,Tt){v.destroyer(te,Qe),Tt(Qe)}}).wrap(te)},dA}var lA,AD;function fA(){if(AD)return lA;AD=1;const u=Ui(),{ArrayPrototypeSlice:n,Error:o,FunctionPrototypeSymbolHasInstance:i,ObjectDefineProperty:t,ObjectDefineProperties:e,ObjectSetPrototypeOf:r,StringPrototypeToLowerCase:a,Symbol:c,SymbolHasInstance:s}=tr();lA=C,C.WritableState=D;const{EventEmitter:d}=hp(),l=iA().Stream,{Buffer:f}=kn(),h=bf(),{addAbortSignal:p}=m3(),{getHighWaterMark:y,getDefaultHighWaterMark:_}=v3(),{ERR_INVALID_ARG_TYPE:b,ERR_METHOD_NOT_IMPLEMENTED:m,ERR_MULTIPLE_CALLBACK:g,ERR_STREAM_CANNOT_PIPE:T,ERR_STREAM_DESTROYED:v,ERR_STREAM_ALREADY_FINISHED:S,ERR_STREAM_NULL_VALUES:F,ERR_STREAM_WRITE_AFTER_END:M,ERR_UNKNOWN_ENCODING:O}=Hr().codes,{errorOrDestroy:w}=h;r(C.prototype,l.prototype),r(C,l);function E(){}const R=c("kOnFinished");function D(A,I,q){typeof q!="boolean"&&(q=I instanceof li()),this.objectMode=!!(A&&A.objectMode),q&&(this.objectMode=this.objectMode||!!(A&&A.writableObjectMode)),this.highWaterMark=A?y(this,A,"writableHighWaterMark",q):_(!1),this.finalCalled=!1,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1,this.destroyed=!1;const H=!!(A&&A.decodeStrings===!1);this.decodeStrings=!H,this.defaultEncoding=A&&A.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=G.bind(void 0,I),this.writecb=null,this.writelen=0,this.afterWriteTickInfo=null,B(this),this.pendingcb=0,this.constructed=!0,this.prefinished=!1,this.errorEmitted=!1,this.emitClose=!A||A.emitClose!==!1,this.autoDestroy=!A||A.autoDestroy!==!1,this.errored=null,this.closed=!1,this.closeEmitted=!1,this[R]=[]}function B(A){A.buffered=[],A.bufferedIndex=0,A.allBuffers=!0,A.allNoop=!0}D.prototype.getBuffer=function(){return n(this.buffered,this.bufferedIndex)},t(D.prototype,"bufferedRequestCount",{__proto__:null,get(){return this.buffered.length-this.bufferedIndex}});function C(A){const I=this instanceof li();if(!I&&!i(C,this))return new C(A);this._writableState=new D(A,this,I),A&&(typeof A.write=="function"&&(this._write=A.write),typeof A.writev=="function"&&(this._writev=A.writev),typeof A.destroy=="function"&&(this._destroy=A.destroy),typeof A.final=="function"&&(this._final=A.final),typeof A.construct=="function"&&(this._construct=A.construct),A.signal&&p(A.signal,this)),l.call(this,A),h.construct(this,()=>{const q=this._writableState;q.writing||re(this,q),he(this,q)})}t(C,s,{__proto__:null,value:function(A){return i(this,A)?!0:this!==C?!1:A&&A._writableState instanceof D}}),C.prototype.pipe=function(){w(this,new T)};function $(A,I,q,H){const U=A._writableState;if(typeof q=="function")H=q,q=U.defaultEncoding;else{if(!q)q=U.defaultEncoding;else if(q!=="buffer"&&!f.isEncoding(q))throw new O(q);typeof H!="function"&&(H=E)}if(I===null)throw new F;if(!U.objectMode)if(typeof I=="string")U.decodeStrings!==!1&&(I=f.from(I,q),q="buffer");else if(I instanceof f)q="buffer";else if(l._isUint8Array(I))I=l._uint8ArrayToBuffer(I),q="buffer";else throw new b("chunk",["string","Buffer","Uint8Array"],I);let X;return U.ending?X=new M:U.destroyed&&(X=new v("write")),X?(u.nextTick(H,X),w(A,X,!0),X):(U.pendingcb++,Z(A,U,I,q,H))}C.prototype.write=function(A,I,q){return $(this,A,I,q)===!0},C.prototype.cork=function(){this._writableState.corked++},C.prototype.uncork=function(){const A=this._writableState;A.corked&&(A.corked--,A.writing||re(this,A))},C.prototype.setDefaultEncoding=function(I){if(typeof I=="string"&&(I=a(I)),!f.isEncoding(I))throw new O(I);return this._writableState.defaultEncoding=I,this};function Z(A,I,q,H,U){const X=I.objectMode?1:q.length;I.length+=X;const Q=I.length<I.highWaterMark;return Q||(I.needDrain=!0),I.writing||I.corked||I.errored||!I.constructed?(I.buffered.push({chunk:q,encoding:H,callback:U}),I.allBuffers&&H!=="buffer"&&(I.allBuffers=!1),I.allNoop&&U!==E&&(I.allNoop=!1)):(I.writelen=X,I.writecb=U,I.writing=!0,I.sync=!0,A._write(q,H,I.onwrite),I.sync=!1),Q&&!I.errored&&!I.destroyed}function ee(A,I,q,H,U,X,Q){I.writelen=H,I.writecb=Q,I.writing=!0,I.sync=!0,I.destroyed?I.onwrite(new v("write")):q?A._writev(U,I.onwrite):A._write(U,X,I.onwrite),I.sync=!1}function ce(A,I,q,H){--I.pendingcb,H(q),ye(I),w(A,q)}function G(A,I){const q=A._writableState,H=q.sync,U=q.writecb;if(typeof U!="function"){w(A,new g);return}q.writing=!1,q.writecb=null,q.length-=q.writelen,q.writelen=0,I?(I.stack,q.errored||(q.errored=I),A._readableState&&!A._readableState.errored&&(A._readableState.errored=I),H?u.nextTick(ce,A,q,I,U):ce(A,q,I,U)):(q.buffered.length>q.bufferedIndex&&re(A,q),H?q.afterWriteTickInfo!==null&&q.afterWriteTickInfo.cb===U?q.afterWriteTickInfo.count++:(q.afterWriteTickInfo={count:1,cb:U,stream:A,state:q},u.nextTick(fe,q.afterWriteTickInfo)):me(A,q,1,U))}function fe({stream:A,state:I,count:q,cb:H}){return I.afterWriteTickInfo=null,me(A,I,q,H)}function me(A,I,q,H){for(!I.ending&&!A.destroyed&&I.length===0&&I.needDrain&&(I.needDrain=!1,A.emit("drain"));q-- >0;)I.pendingcb--,H();I.destroyed&&ye(I),he(A,I)}function ye(A){if(A.writing)return;for(let U=A.bufferedIndex;U<A.buffered.length;++U){var I;const{chunk:X,callback:Q}=A.buffered[U],k=A.objectMode?1:X.length;A.length-=k,Q((I=A.errored)!==null&&I!==void 0?I:new v("write"))}const q=A[R].splice(0);for(let U=0;U<q.length;U++){var H;q[U]((H=A.errored)!==null&&H!==void 0?H:new v("end"))}B(A)}function re(A,I){if(I.corked||I.bufferProcessing||I.destroyed||!I.constructed)return;const{buffered:q,bufferedIndex:H,objectMode:U}=I,X=q.length-H;if(!X)return;let Q=H;if(I.bufferProcessing=!0,X>1&&A._writev){I.pendingcb-=X-1;const k=I.allNoop?E:se=>{for(let Se=Q;Se<q.length;++Se)q[Se].callback(se)},oe=I.allNoop&&Q===0?q:n(q,Q);oe.allBuffers=I.allBuffers,ee(A,I,!0,I.length,oe,"",k),B(I)}else{do{const{chunk:k,encoding:oe,callback:se}=q[Q];q[Q++]=null;const Se=U?1:k.length;ee(A,I,!1,Se,k,oe,se)}while(Q<q.length&&!I.writing);Q===q.length?B(I):Q>256?(q.splice(0,Q),I.bufferedIndex=0):I.bufferedIndex=Q}I.bufferProcessing=!1}C.prototype._write=function(A,I,q){if(this._writev)this._writev([{chunk:A,encoding:I}],q);else throw new m("_write()")},C.prototype._writev=null,C.prototype.end=function(A,I,q){const H=this._writableState;typeof A=="function"?(q=A,A=null,I=null):typeof I=="function"&&(q=I,I=null);let U;if(A!=null){const X=$(this,A,I);X instanceof o&&(U=X)}return H.corked&&(H.corked=1,this.uncork()),U||(!H.errored&&!H.ending?(H.ending=!0,he(this,H,!0),H.ended=!0):H.finished?U=new S("end"):H.destroyed&&(U=new v("end"))),typeof q=="function"&&(U||H.finished?u.nextTick(q,U):H[R].push(q)),this};function xe(A){return A.ending&&!A.destroyed&&A.constructed&&A.length===0&&!A.errored&&A.buffered.length===0&&!A.finished&&!A.writing&&!A.errorEmitted&&!A.closeEmitted}function Re(A,I){let q=!1;function H(U){if(q){w(A,U??g());return}if(q=!0,I.pendingcb--,U){const X=I[R].splice(0);for(let Q=0;Q<X.length;Q++)X[Q](U);w(A,U,I.sync)}else xe(I)&&(I.prefinished=!0,A.emit("prefinish"),I.pendingcb++,u.nextTick(be,A,I))}I.sync=!0,I.pendingcb++;try{A._final(H)}catch(U){H(U)}I.sync=!1}function Ie(A,I){!I.prefinished&&!I.finalCalled&&(typeof A._final=="function"&&!I.destroyed?(I.finalCalled=!0,Re(A,I)):(I.prefinished=!0,A.emit("prefinish")))}function he(A,I,q){xe(I)&&(Ie(A,I),I.pendingcb===0&&(q?(I.pendingcb++,u.nextTick((H,U)=>{xe(U)?be(H,U):U.pendingcb--},A,I)):xe(I)&&(I.pendingcb++,be(A,I))))}function be(A,I){I.pendingcb--,I.finished=!0;const q=I[R].splice(0);for(let H=0;H<q.length;H++)q[H]();if(A.emit("finish"),I.autoDestroy){const H=A._readableState;(!H||H.autoDestroy&&(H.endEmitted||H.readable===!1))&&A.destroy()}}e(C.prototype,{closed:{__proto__:null,get(){return this._writableState?this._writableState.closed:!1}},destroyed:{__proto__:null,get(){return this._writableState?this._writableState.destroyed:!1},set(A){this._writableState&&(this._writableState.destroyed=A)}},writable:{__proto__:null,get(){const A=this._writableState;return!!A&&A.writable!==!1&&!A.destroyed&&!A.errored&&!A.ending&&!A.ended},set(A){this._writableState&&(this._writableState.writable=!!A)}},writableFinished:{__proto__:null,get(){return this._writableState?this._writableState.finished:!1}},writableObjectMode:{__proto__:null,get(){return this._writableState?this._writableState.objectMode:!1}},writableBuffer:{__proto__:null,get(){return this._writableState&&this._writableState.getBuffer()}},writableEnded:{__proto__:null,get(){return this._writableState?this._writableState.ending:!1}},writableNeedDrain:{__proto__:null,get(){const A=this._writableState;return A?!A.destroyed&&!A.ending&&A.needDrain:!1}},writableHighWaterMark:{__proto__:null,get(){return this._writableState&&this._writableState.highWaterMark}},writableCorked:{__proto__:null,get(){return this._writableState?this._writableState.corked:0}},writableLength:{__proto__:null,get(){return this._writableState&&this._writableState.length}},errored:{__proto__:null,enumerable:!1,get(){return this._writableState?this._writableState.errored:null}},writableAborted:{__proto__:null,enumerable:!1,get:function(){return!!(this._writableState.writable!==!1&&(this._writableState.destroyed||this._writableState.errored)&&!this._writableState.finished)}}});const V=h.destroy;C.prototype.destroy=function(A,I){const q=this._writableState;return!q.destroyed&&(q.bufferedIndex<q.buffered.length||q[R].length)&&u.nextTick(ye,q),V.call(this,A,I),this},C.prototype._undestroy=h.undestroy,C.prototype._destroy=function(A,I){I(A)},C.prototype[d.captureRejectionSymbol]=function(A){this.destroy(A)};let P;function N(){return P===void 0&&(P={}),P}return C.fromWeb=function(A,I){return N().newStreamWritableFromWritableStream(A,I)},C.toWeb=function(A){return N().newWritableStreamFromStreamWritable(A)},lA}var hA,ED;function HY(){if(ED)return hA;ED=1;const u=Ui(),n=kn(),{isReadable:o,isWritable:i,isIterable:t,isNodeStream:e,isReadableNodeStream:r,isWritableNodeStream:a,isDuplexNodeStream:c,isReadableStream:s,isWritableStream:d}=di(),l=Qi(),{AbortError:f,codes:{ERR_INVALID_ARG_TYPE:h,ERR_INVALID_RETURN_VALUE:p}}=Hr(),{destroyer:y}=bf(),_=li(),b=w3(),m=fA(),{createDeferredPromise:g}=Kr(),T=SD(),v=globalThis.Blob||n.Blob,S=typeof v<"u"?function(D){return D instanceof v}:function(D){return!1},F=globalThis.AbortController||T0().AbortController,{FunctionPrototypeCall:M}=tr();class O extends _{constructor(D){super(D),(D==null?void 0:D.readable)===!1&&(this._readableState.readable=!1,this._readableState.ended=!0,this._readableState.endEmitted=!0),(D==null?void 0:D.writable)===!1&&(this._writableState.writable=!1,this._writableState.ending=!0,this._writableState.ended=!0,this._writableState.finished=!0)}}hA=function R(D,B){if(c(D))return D;if(r(D))return E({readable:D});if(a(D))return E({writable:D});if(e(D))return E({writable:!1,readable:!1});if(s(D))return E({readable:b.fromWeb(D)});if(d(D))return E({writable:m.fromWeb(D)});if(typeof D=="function"){const{value:$,write:Z,final:ee,destroy:ce}=w(D);if(t($))return T(O,$,{objectMode:!0,write:Z,final:ee,destroy:ce});const G=$==null?void 0:$.then;if(typeof G=="function"){let fe;const me=M(G,$,ye=>{if(ye!=null)throw new p("nully","body",ye)},ye=>{y(fe,ye)});return fe=new O({objectMode:!0,readable:!1,write:Z,final(ye){ee(async()=>{try{await me,u.nextTick(ye,null)}catch(re){u.nextTick(ye,re)}})},destroy:ce})}throw new p("Iterable, AsyncIterable or AsyncFunction",B,$)}if(S(D))return R(D.arrayBuffer());if(t(D))return T(O,D,{objectMode:!0,writable:!1});if(s(D==null?void 0:D.readable)&&d(D==null?void 0:D.writable))return O.fromWeb(D);if(typeof(D==null?void 0:D.writable)=="object"||typeof(D==null?void 0:D.readable)=="object"){const $=D!=null&&D.readable?r(D==null?void 0:D.readable)?D==null?void 0:D.readable:R(D.readable):void 0,Z=D!=null&&D.writable?a(D==null?void 0:D.writable)?D==null?void 0:D.writable:R(D.writable):void 0;return E({readable:$,writable:Z})}const C=D==null?void 0:D.then;if(typeof C=="function"){let $;return M(C,D,Z=>{Z!=null&&$.push(Z),$.push(null)},Z=>{y($,Z)}),$=new O({objectMode:!0,writable:!1,read(){}})}throw new h(B,["Blob","ReadableStream","WritableStream","Stream","Iterable","AsyncIterable","Function","{ readable, writable } pair","Promise"],D)};function w(R){let{promise:D,resolve:B}=g();const C=new F,$=C.signal;return{value:R((async function*(){for(;;){const ee=D;D=null;const{chunk:ce,done:G,cb:fe}=await ee;if(u.nextTick(fe),G)return;if($.aborted)throw new f(void 0,{cause:$.reason});({promise:D,resolve:B}=g()),yield ce}})(),{signal:$}),write(ee,ce,G){const fe=B;B=null,fe({chunk:ee,done:!1,cb:G})},final(ee){const ce=B;B=null,ce({done:!0,cb:ee})},destroy(ee,ce){C.abort(),ce(ee)}}}function E(R){const D=R.readable&&typeof R.readable.read!="function"?b.wrap(R.readable):R.readable,B=R.writable;let C=!!o(D),$=!!i(B),Z,ee,ce,G,fe;function me(ye){const re=G;G=null,re?re(ye):ye&&fe.destroy(ye)}return fe=new O({readableObjectMode:!!(D!=null&&D.readableObjectMode),writableObjectMode:!!(B!=null&&B.writableObjectMode),readable:C,writable:$}),$&&(l(B,ye=>{$=!1,ye&&y(D,ye),me(ye)}),fe._write=function(ye,re,xe){B.write(ye,re)?xe():Z=xe},fe._final=function(ye){B.end(),ee=ye},B.on("drain",function(){if(Z){const ye=Z;Z=null,ye()}}),B.on("finish",function(){if(ee){const ye=ee;ee=null,ye()}})),C&&(l(D,ye=>{C=!1,ye&&y(D,ye),me(ye)}),D.on("readable",function(){if(ce){const ye=ce;ce=null,ye()}}),D.on("end",function(){fe.push(null)}),fe._read=function(){for(;;){const ye=D.read();if(ye===null){ce=fe._read;return}if(!fe.push(ye))return}}),fe._destroy=function(ye,re){!ye&&G!==null&&(ye=new f),ce=null,Z=null,ee=null,G===null?re(ye):(G=re,y(B,ye),y(D,ye))},fe}return hA}var pA,xD;function li(){if(xD)return pA;xD=1;const{ObjectDefineProperties:u,ObjectGetOwnPropertyDescriptor:n,ObjectKeys:o,ObjectSetPrototypeOf:i}=tr();pA=r;const t=w3(),e=fA();i(r.prototype,t.prototype),i(r,t);{const d=o(e.prototype);for(let l=0;l<d.length;l++){const f=d[l];r.prototype[f]||(r.prototype[f]=e.prototype[f])}}function r(d){if(!(this instanceof r))return new r(d);t.call(this,d),e.call(this,d),d?(this.allowHalfOpen=d.allowHalfOpen!==!1,d.readable===!1&&(this._readableState.readable=!1,this._readableState.ended=!0,this._readableState.endEmitted=!0),d.writable===!1&&(this._writableState.writable=!1,this._writableState.ending=!0,this._writableState.ended=!0,this._writableState.finished=!0)):this.allowHalfOpen=!0}u(r.prototype,{writable:{__proto__:null,...n(e.prototype,"writable")},writableHighWaterMark:{__proto__:null,...n(e.prototype,"writableHighWaterMark")},writableObjectMode:{__proto__:null,...n(e.prototype,"writableObjectMode")},writableBuffer:{__proto__:null,...n(e.prototype,"writableBuffer")},writableLength:{__proto__:null,...n(e.prototype,"writableLength")},writableFinished:{__proto__:null,...n(e.prototype,"writableFinished")},writableCorked:{__proto__:null,...n(e.prototype,"writableCorked")},writableEnded:{__proto__:null,...n(e.prototype,"writableEnded")},writableNeedDrain:{__proto__:null,...n(e.prototype,"writableNeedDrain")},destroyed:{__proto__:null,get(){return this._readableState===void 0||this._writableState===void 0?!1:this._readableState.destroyed&&this._writableState.destroyed},set(d){this._readableState&&this._writableState&&(this._readableState.destroyed=d,this._writableState.destroyed=d)}}});let a;function c(){return a===void 0&&(a={}),a}r.fromWeb=function(d,l){return c().newStreamDuplexFromReadableWritablePair(d,l)},r.toWeb=function(d){return c().newReadableWritablePairFromDuplex(d)};let s;return r.from=function(d){return s||(s=HY()),s(d,"body")},pA}var yA,RD;function FD(){if(RD)return yA;RD=1;const{ObjectSetPrototypeOf:u,Symbol:n}=tr();yA=r;const{ERR_METHOD_NOT_IMPLEMENTED:o}=Hr().codes,i=li(),{getHighWaterMark:t}=v3();u(r.prototype,i.prototype),u(r,i);const e=n("kCallback");function r(s){if(!(this instanceof r))return new r(s);const d=s?t(this,s,"readableHighWaterMark",!0):null;d===0&&(s={...s,highWaterMark:null,readableHighWaterMark:d,writableHighWaterMark:s.writableHighWaterMark||0}),i.call(this,s),this._readableState.sync=!1,this[e]=null,s&&(typeof s.transform=="function"&&(this._transform=s.transform),typeof s.flush=="function"&&(this._flush=s.flush)),this.on("prefinish",c)}function a(s){typeof this._flush=="function"&&!this.destroyed?this._flush((d,l)=>{if(d){s?s(d):this.destroy(d);return}l!=null&&this.push(l),this.push(null),s&&s()}):(this.push(null),s&&s())}function c(){this._final!==a&&a.call(this)}return r.prototype._final=a,r.prototype._transform=function(s,d,l){throw new o("_transform()")},r.prototype._write=function(s,d,l){const f=this._readableState,h=this._writableState,p=f.length;this._transform(s,d,(y,_)=>{if(y){l(y);return}_!=null&&this.push(_),h.ended||p===f.length||f.length<f.highWaterMark?l():this[e]=l})},r.prototype._read=function(){if(this[e]){const s=this[e];this[e]=null,s()}},yA}var bA,ID;function PD(){if(ID)return bA;ID=1;const{ObjectSetPrototypeOf:u}=tr();bA=o;const n=FD();u(o.prototype,n.prototype),u(o,n);function o(i){if(!(this instanceof o))return new o(i);n.call(this,i)}return o.prototype._transform=function(i,t,e){e(null,i)},bA}var _A,DD;function gA(){if(DD)return _A;DD=1;const u=Ui(),{ArrayIsArray:n,Promise:o,SymbolAsyncIterator:i,SymbolDispose:t}=tr(),e=Qi(),{once:r}=Kr(),a=bf(),c=li(),{aggregateTwoErrors:s,codes:{ERR_INVALID_ARG_TYPE:d,ERR_INVALID_RETURN_VALUE:l,ERR_MISSING_ARGS:f,ERR_STREAM_DESTROYED:h,ERR_STREAM_PREMATURE_CLOSE:p},AbortError:y}=Hr(),{validateFunction:_,validateAbortSignal:b}=w0(),{isIterable:m,isReadable:g,isReadableNodeStream:T,isNodeStream:v,isTransformStream:S,isWebStream:F,isReadableStream:M,isReadableFinished:O}=di(),w=globalThis.AbortController||T0().AbortController;let E,R,D;function B(ye,re,xe){let Re=!1;ye.on("close",()=>{Re=!0});const Ie=e(ye,{readable:re,writable:xe},he=>{Re=!he});return{destroy:he=>{Re||(Re=!0,a.destroyer(ye,he||new h("pipe")))},cleanup:Ie}}function C(ye){return _(ye[ye.length-1],"streams[stream.length - 1]"),ye.pop()}function $(ye){if(m(ye))return ye;if(T(ye))return Z(ye);throw new d("val",["Readable","Iterable","AsyncIterable"],ye)}async function*Z(ye){R||(R=w3()),yield*R.prototype[i].call(ye)}async function ee(ye,re,xe,{end:Re}){let Ie,he=null;const be=N=>{if(N&&(Ie=N),he){const A=he;he=null,A()}},V=()=>new o((N,A)=>{Ie?A(Ie):he=()=>{Ie?A(Ie):N()}});re.on("drain",be);const P=e(re,{readable:!1},be);try{re.writableNeedDrain&&await V();for await(const N of ye)re.write(N)||await V();Re&&(re.end(),await V()),xe()}catch(N){xe(Ie!==N?s(Ie,N):N)}finally{P(),re.off("drain",be)}}async function ce(ye,re,xe,{end:Re}){S(re)&&(re=re.writable);const Ie=re.getWriter();try{for await(const he of ye)await Ie.ready,Ie.write(he).catch(()=>{});await Ie.ready,Re&&await Ie.close(),xe()}catch(he){try{await Ie.abort(he),xe(he)}catch(be){xe(be)}}}function G(...ye){return fe(ye,r(C(ye)))}function fe(ye,re,xe){if(ye.length===1&&n(ye[0])&&(ye=ye[0]),ye.length<2)throw new f("streams");const Re=new w,Ie=Re.signal,he=xe==null?void 0:xe.signal,be=[];b(he,"options.signal");function V(){U(new y)}D=D||Kr().addAbortListener;let P;he&&(P=D(he,V));let N,A;const I=[];let q=0;function H(oe){U(oe,--q===0)}function U(oe,se){var Se;if(oe&&(!N||N.code==="ERR_STREAM_PREMATURE_CLOSE")&&(N=oe),!(!N&&!se)){for(;I.length;)I.shift()(N);(Se=P)===null||Se===void 0||Se[t](),Re.abort(),se&&(N||be.forEach(Me=>Me()),u.nextTick(re,N,A))}}let X;for(let oe=0;oe<ye.length;oe++){const se=ye[oe],Se=oe<ye.length-1,Me=oe>0,Oe=Se||(xe==null?void 0:xe.end)!==!1,ue=oe===ye.length-1;if(v(se)){let L=function(x){x&&x.name!=="AbortError"&&x.code!=="ERR_STREAM_PREMATURE_CLOSE"&&H(x)};if(Oe){const{destroy:x,cleanup:j}=B(se,Se,Me);I.push(x),g(se)&&ue&&be.push(j)}se.on("error",L),g(se)&&ue&&be.push(()=>{se.removeListener("error",L)})}if(oe===0)if(typeof se=="function"){if(X=se({signal:Ie}),!m(X))throw new l("Iterable, AsyncIterable or Stream","source",X)}else m(se)||T(se)||S(se)?X=se:X=c.from(se);else if(typeof se=="function"){if(S(X)){var Q;X=$((Q=X)===null||Q===void 0?void 0:Q.readable)}else X=$(X);if(X=se(X,{signal:Ie}),Se){if(!m(X,!0))throw new l("AsyncIterable",`transform[${oe-1}]`,X)}else{var k;E||(E=PD());const L=new E({objectMode:!0}),x=(k=X)===null||k===void 0?void 0:k.then;if(typeof x=="function")q++,x.call(X,W=>{A=W,W!=null&&L.write(W),Oe&&L.end(),u.nextTick(H)},W=>{L.destroy(W),u.nextTick(H,W)});else if(m(X,!0))q++,ee(X,L,H,{end:Oe});else if(M(X)||S(X)){const W=X.readable||X;q++,ee(W,L,H,{end:Oe})}else throw new l("AsyncIterable or Promise","destination",X);X=L;const{destroy:j,cleanup:z}=B(X,!1,!0);I.push(j),ue&&be.push(z)}}else if(v(se)){if(T(X)){q+=2;const L=me(X,se,H,{end:Oe});g(se)&&ue&&be.push(L)}else if(S(X)||M(X)){const L=X.readable||X;q++,ee(L,se,H,{end:Oe})}else if(m(X))q++,ee(X,se,H,{end:Oe});else throw new d("val",["Readable","Iterable","AsyncIterable","ReadableStream","TransformStream"],X);X=se}else if(F(se)){if(T(X))q++,ce($(X),se,H,{end:Oe});else if(M(X)||m(X))q++,ce(X,se,H,{end:Oe});else if(S(X))q++,ce(X.readable,se,H,{end:Oe});else throw new d("val",["Readable","Iterable","AsyncIterable","ReadableStream","TransformStream"],X);X=se}else X=c.from(se)}return(Ie!=null&&Ie.aborted||he!=null&&he.aborted)&&u.nextTick(V),X}function me(ye,re,xe,{end:Re}){let Ie=!1;if(re.on("close",()=>{Ie||xe(new p)}),ye.pipe(re,{end:!1}),Re){let he=function(){Ie=!0,re.end()};O(ye)?u.nextTick(he):ye.once("end",he)}else xe();return e(ye,{readable:!0,writable:!1},he=>{const be=ye._readableState;he&&he.code==="ERR_STREAM_PREMATURE_CLOSE"&&be&&be.ended&&!be.errored&&!be.errorEmitted?ye.once("end",xe).once("error",xe):xe(he)}),e(re,{readable:!1,writable:!0},xe)}return _A={pipelineImpl:fe,pipeline:G},_A}var mA,ND;function jD(){if(ND)return mA;ND=1;const{pipeline:u}=gA(),n=li(),{destroyer:o}=bf(),{isNodeStream:i,isReadable:t,isWritable:e,isWebStream:r,isTransformStream:a,isWritableStream:c,isReadableStream:s}=di(),{AbortError:d,codes:{ERR_INVALID_ARG_VALUE:l,ERR_MISSING_ARGS:f}}=Hr(),h=Qi();return mA=function(...y){if(y.length===0)throw new f("streams");if(y.length===1)return n.from(y[0]);const _=[...y];if(typeof y[0]=="function"&&(y[0]=n.from(y[0])),typeof y[y.length-1]=="function"){const E=y.length-1;y[E]=n.from(y[E])}for(let E=0;E<y.length;++E)if(!(!i(y[E])&&!r(y[E]))){if(E<y.length-1&&!(t(y[E])||s(y[E])||a(y[E])))throw new l(`streams[${E}]`,_[E],"must be readable");if(E>0&&!(e(y[E])||c(y[E])||a(y[E])))throw new l(`streams[${E}]`,_[E],"must be writable")}let b,m,g,T,v;function S(E){const R=T;T=null,R?R(E):E?v.destroy(E):!w&&!O&&v.destroy()}const F=y[0],M=u(y,S),O=!!(e(F)||c(F)||a(F)),w=!!(t(M)||s(M)||a(M));if(v=new n({writableObjectMode:!!(F!=null&&F.writableObjectMode),readableObjectMode:!!(M!=null&&M.readableObjectMode),writable:O,readable:w}),O){if(i(F))v._write=function(R,D,B){F.write(R,D)?B():b=B},v._final=function(R){F.end(),m=R},F.on("drain",function(){if(b){const R=b;b=null,R()}});else if(r(F)){const D=(a(F)?F.writable:F).getWriter();v._write=async function(B,C,$){try{await D.ready,D.write(B).catch(()=>{}),$()}catch(Z){$(Z)}},v._final=async function(B){try{await D.ready,D.close().catch(()=>{}),m=B}catch(C){B(C)}}}const E=a(M)?M.readable:M;h(E,()=>{if(m){const R=m;m=null,R()}})}if(w){if(i(M))M.on("readable",function(){if(g){const E=g;g=null,E()}}),M.on("end",function(){v.push(null)}),v._read=function(){for(;;){const E=M.read();if(E===null){g=v._read;return}if(!v.push(E))return}};else if(r(M)){const R=(a(M)?M.readable:M).getReader();v._read=async function(){for(;;)try{const{value:D,done:B}=await R.read();if(!v.push(D))return;if(B){v.push(null);return}}catch{return}}}}return v._destroy=function(E,R){!E&&T!==null&&(E=new d),g=null,b=null,m=null,T===null?R(E):(T=R,i(M)&&o(M,E))},v},mA}var LD;function GY(){if(LD)return _3;LD=1;const u=globalThis.AbortController||T0().AbortController,{codes:{ERR_INVALID_ARG_VALUE:n,ERR_INVALID_ARG_TYPE:o,ERR_MISSING_ARGS:i,ERR_OUT_OF_RANGE:t},AbortError:e}=Hr(),{validateAbortSignal:r,validateInteger:a,validateObject:c}=w0(),s=tr().Symbol("kWeak"),d=tr().Symbol("kResistStopPropagation"),{finished:l}=Qi(),f=jD(),{addAbortSignalNoValidate:h}=m3(),{isWritable:p,isNodeStream:y}=di(),{deprecate:_}=Kr(),{ArrayPrototypePush:b,Boolean:m,MathFloor:g,Number:T,NumberIsNaN:v,Promise:S,PromiseReject:F,PromiseResolve:M,PromisePrototypeThen:O,Symbol:w}=tr(),E=w("kEmpty"),R=w("kEof");function D(he,be){if(be!=null&&c(be,"options"),(be==null?void 0:be.signal)!=null&&r(be.signal,"options.signal"),y(he)&&!p(he))throw new n("stream",he,"must be writable");const V=f(this,he);return be!=null&&be.signal&&h(be.signal,V),V}function B(he,be){if(typeof he!="function")throw new o("fn",["Function","AsyncFunction"],he);be!=null&&c(be,"options"),(be==null?void 0:be.signal)!=null&&r(be.signal,"options.signal");let V=1;(be==null?void 0:be.concurrency)!=null&&(V=g(be.concurrency));let P=V-1;return(be==null?void 0:be.highWaterMark)!=null&&(P=g(be.highWaterMark)),a(V,"options.concurrency",1),a(P,"options.highWaterMark",0),P+=V,(async function*(){const A=Kr().AbortSignalAny([be==null?void 0:be.signal].filter(m)),I=this,q=[],H={signal:A};let U,X,Q=!1,k=0;function oe(){Q=!0,se()}function se(){k-=1,Se()}function Se(){X&&!Q&&k<V&&q.length<P&&(X(),X=null)}async function Me(){try{for await(let Oe of I){if(Q)return;if(A.aborted)throw new e;try{if(Oe=he(Oe,H),Oe===E)continue;Oe=M(Oe)}catch(ue){Oe=F(ue)}k+=1,O(Oe,se,oe),q.push(Oe),U&&(U(),U=null),!Q&&(q.length>=P||k>=V)&&await new S(ue=>{X=ue})}q.push(R)}catch(Oe){const ue=F(Oe);O(ue,se,oe),q.push(ue)}finally{Q=!0,U&&(U(),U=null)}}Me();try{for(;;){for(;q.length>0;){const Oe=await q[0];if(Oe===R)return;if(A.aborted)throw new e;Oe!==E&&(yield Oe),q.shift(),Se()}await new S(Oe=>{U=Oe})}}finally{Q=!0,X&&(X(),X=null)}}).call(this)}function C(he=void 0){return he!=null&&c(he,"options"),(he==null?void 0:he.signal)!=null&&r(he.signal,"options.signal"),(async function*(){let V=0;for await(const N of this){var P;if(he!=null&&(P=he.signal)!==null&&P!==void 0&&P.aborted)throw new e({cause:he.signal.reason});yield[V++,N]}}).call(this)}async function $(he,be=void 0){for await(const V of G.call(this,he,be))return!0;return!1}async function Z(he,be=void 0){if(typeof he!="function")throw new o("fn",["Function","AsyncFunction"],he);return!await $.call(this,async(...V)=>!await he(...V),be)}async function ee(he,be){for await(const V of G.call(this,he,be))return V}async function ce(he,be){if(typeof he!="function")throw new o("fn",["Function","AsyncFunction"],he);async function V(P,N){return await he(P,N),E}for await(const P of B.call(this,V,be));}function G(he,be){if(typeof he!="function")throw new o("fn",["Function","AsyncFunction"],he);async function V(P,N){return await he(P,N)?P:E}return B.call(this,V,be)}class fe extends i{constructor(){super("reduce"),this.message="Reduce of an empty stream requires an initial value"}}async function me(he,be,V){var P;if(typeof he!="function")throw new o("reducer",["Function","AsyncFunction"],he);V!=null&&c(V,"options"),(V==null?void 0:V.signal)!=null&&r(V.signal,"options.signal");let N=arguments.length>1;if(V!=null&&(P=V.signal)!==null&&P!==void 0&&P.aborted){const U=new e(void 0,{cause:V.signal.reason});throw this.once("error",()=>{}),await l(this.destroy(U)),U}const A=new u,I=A.signal;if(V!=null&&V.signal){const U={once:!0,[s]:this,[d]:!0};V.signal.addEventListener("abort",()=>A.abort(),U)}let q=!1;try{for await(const U of this){var H;if(q=!0,V!=null&&(H=V.signal)!==null&&H!==void 0&&H.aborted)throw new e;N?be=await he(be,U,{signal:I}):(be=U,N=!0)}if(!q&&!N)throw new fe}finally{A.abort()}return be}async function ye(he){he!=null&&c(he,"options"),(he==null?void 0:he.signal)!=null&&r(he.signal,"options.signal");const be=[];for await(const P of this){var V;if(he!=null&&(V=he.signal)!==null&&V!==void 0&&V.aborted)throw new e(void 0,{cause:he.signal.reason});b(be,P)}return be}function re(he,be){const V=B.call(this,he,be);return(async function*(){for await(const N of V)yield*N}).call(this)}function xe(he){if(he=T(he),v(he))return 0;if(he<0)throw new t("number",">= 0",he);return he}function Re(he,be=void 0){return be!=null&&c(be,"options"),(be==null?void 0:be.signal)!=null&&r(be.signal,"options.signal"),he=xe(he),(async function*(){var P;if(be!=null&&(P=be.signal)!==null&&P!==void 0&&P.aborted)throw new e;for await(const A of this){var N;if(be!=null&&(N=be.signal)!==null&&N!==void 0&&N.aborted)throw new e;he--<=0&&(yield A)}}).call(this)}function Ie(he,be=void 0){return be!=null&&c(be,"options"),(be==null?void 0:be.signal)!=null&&r(be.signal,"options.signal"),he=xe(he),(async function*(){var P;if(be!=null&&(P=be.signal)!==null&&P!==void 0&&P.aborted)throw new e;for await(const A of this){var N;if(be!=null&&(N=be.signal)!==null&&N!==void 0&&N.aborted)throw new e;if(he-- >0&&(yield A),he<=0)return}}).call(this)}return _3.streamReturningOperators={asIndexedPairs:_(C,"readable.asIndexedPairs will be removed in a future version."),drop:Re,filter:G,flatMap:re,map:B,take:Ie,compose:D},_3.promiseReturningOperators={every:Z,forEach:ce,reduce:me,toArray:ye,some:$,find:ee},_3}var vA,MD;function qD(){if(MD)return vA;MD=1;const{ArrayPrototypePop:u,Promise:n}=tr(),{isIterable:o,isNodeStream:i,isWebStream:t}=di(),{pipelineImpl:e}=gA(),{finished:r}=Qi();BD();function a(...c){return new n((s,d)=>{let l,f;const h=c[c.length-1];if(h&&typeof h=="object"&&!i(h)&&!o(h)&&!t(h)){const p=u(c);l=p.signal,f=p.end}e(c,(p,y)=>{p?d(p):s(y)},{signal:l,end:f})})}return vA={finished:r,pipeline:a},vA}var CD;function BD(){if(CD)return JO.exports;CD=1;const{Buffer:u}=kn(),{ObjectDefineProperty:n,ObjectKeys:o,ReflectApply:i}=tr(),{promisify:{custom:t}}=Kr(),{streamReturningOperators:e,promiseReturningOperators:r}=GY(),{codes:{ERR_ILLEGAL_CONSTRUCTOR:a}}=Hr(),c=jD(),{setDefaultHighWaterMark:s,getDefaultHighWaterMark:d}=v3(),{pipeline:l}=gA(),{destroyer:f}=bf(),h=Qi(),p=qD(),y=di(),_=JO.exports=iA().Stream;_.isDestroyed=y.isDestroyed,_.isDisturbed=y.isDisturbed,_.isErrored=y.isErrored,_.isReadable=y.isReadable,_.isWritable=y.isWritable,_.Readable=w3();for(const m of o(e)){let T=function(...v){if(new.target)throw a();return _.Readable.from(i(g,this,v))};const g=e[m];n(T,"name",{__proto__:null,value:g.name}),n(T,"length",{__proto__:null,value:g.length}),n(_.Readable.prototype,m,{__proto__:null,value:T,enumerable:!1,configurable:!0,writable:!0})}for(const m of o(r)){let T=function(...v){if(new.target)throw a();return i(g,this,v)};const g=r[m];n(T,"name",{__proto__:null,value:g.name}),n(T,"length",{__proto__:null,value:g.length}),n(_.Readable.prototype,m,{__proto__:null,value:T,enumerable:!1,configurable:!0,writable:!0})}_.Writable=fA(),_.Duplex=li(),_.Transform=FD(),_.PassThrough=PD(),_.pipeline=l;const{addAbortSignal:b}=m3();return _.addAbortSignal=b,_.finished=h,_.destroy=f,_.compose=c,_.setDefaultHighWaterMark=s,_.getDefaultHighWaterMark=d,n(_,"promises",{__proto__:null,configurable:!0,enumerable:!0,get(){return p}}),n(l,t,{__proto__:null,enumerable:!0,get(){return p.pipeline}}),n(h,t,{__proto__:null,enumerable:!0,get(){return p.finished}}),_.Stream=_,_._isUint8Array=function(g){return g instanceof Uint8Array},_._uint8ArrayToBuffer=function(g){return u.from(g.buffer,g.byteOffset,g.byteLength)},JO.exports}var $D;function Pt(){return $D||($D=1,(function(u){const n=BD(),o=qD(),i=n.Readable.destroy;u.exports=n.Readable,u.exports._uint8ArrayToBuffer=n._uint8ArrayToBuffer,u.exports._isUint8Array=n._isUint8Array,u.exports.isDisturbed=n.isDisturbed,u.exports.isErrored=n.isErrored,u.exports.isReadable=n.isReadable,u.exports.Readable=n.Readable,u.exports.Writable=n.Writable,u.exports.Duplex=n.Duplex,u.exports.Transform=n.Transform,u.exports.PassThrough=n.PassThrough,u.exports.addAbortSignal=n.addAbortSignal,u.exports.finished=n.finished,u.exports.destroy=n.destroy,u.exports.destroy=i,u.exports.pipeline=n.pipeline,u.exports.compose=n.compose,Object.defineProperty(n,"promises",{configurable:!0,enumerable:!0,get(){return o}}),u.exports.Stream=n.Stream,u.exports.default=u.exports})(XO)),XO.exports}var UD;function zY(){if(UD)return p0;UD=1,Object.defineProperty(p0,"__esModule",{value:!0}),p0.ActorQueryResultSerializeJson=void 0;const u=Kn(),n=pe(),o=pt(),i=Yt(),t=Pt();let e=class extends u.ActorQueryResultSerializeFixedMediaTypes{constructor(a){super(a)}async testHandleChecked(a,c){return["bindings","quads","boolean"].includes(a.type)?(0,n.passTestVoid)():(0,n.failTest)("This actor can only handle bindings or quad streams.")}async runHandle(a,c,s){const d=new t.Readable;if(d._read=()=>{},a.type==="bindings"||a.type==="quads"){let l=a.type==="bindings"?(0,o.wrap)(a.bindingsStream).map(h=>JSON.stringify(Object.fromEntries([...h].map(([p,y])=>[p.value,i.termToString(y)])))):(0,o.wrap)(a.quadStream).map(h=>JSON.stringify(i.quadToStringQuad(h))),f=!0;l=l.map(h=>{const p=`${f?"":","}
${h}`;return f=!1,p}).prepend(["["]).append([`
]
`]),d.wrap(l)}else try{d.push(`${JSON.stringify(await a.execute())}
`),d.push(null)}catch(l){setTimeout(()=>d.emit("error",l))}return{data:d}}};return p0.ActorQueryResultSerializeJson=e,p0}var VD;function XY(){return VD||(VD=1,(function(u){var n=cu&&cu.__createBinding||(Object.create?(function(i,t,e,r){r===void 0&&(r=e);var a=Object.getOwnPropertyDescriptor(t,e);(!a||("get"in a?!t.__esModule:a.writable||a.configurable))&&(a={enumerable:!0,get:function(){return t[e]}}),Object.defineProperty(i,r,a)}):(function(i,t,e,r){r===void 0&&(r=e),i[r]=t[e]})),o=cu&&cu.__exportStar||function(i,t){for(var e in i)e!=="default"&&!Object.prototype.hasOwnProperty.call(t,e)&&n(t,i,e)};Object.defineProperty(u,"__esModule",{value:!0}),o(zY(),u)})(cu)),cu}var fu={},S0={},QD;function JY(){if(QD)return S0;QD=1,Object.defineProperty(S0,"__esModule",{value:!0}),S0.ActorQueryResultSerializeSimple=void 0;const u=Kn(),n=pe(),o=pt(),i=Yt(),t=Pt();let e=class Qf extends u.ActorQueryResultSerializeFixedMediaTypes{constructor(a){super(a)}async testHandleChecked(a,c){return["bindings","quads","boolean","void"].includes(a.type)?(0,n.passTestVoid)():(0,n.failTest)("This actor can only handle bindings streams, quad streams, booleans, or updates.")}static termToString(a){return a.termType==="Quad"?(0,i.termToString)(a):a.value}async runHandle(a,c,s){const d=new t.Readable;return a.type==="bindings"?d.wrap(a.bindingsStream.map(l=>`${[...l].map(([f,h])=>`?${f.value}: ${Qf.termToString(h)}`).join(`
`)}

`)):a.type==="quads"?d.wrap(a.quadStream.map(l=>`subject: ${Qf.termToString(l.subject)}
predicate: ${Qf.termToString(l.predicate)}
object: ${Qf.termToString(l.object)}
graph: ${Qf.termToString(l.graph)}

`)):d.wrap((0,o.wrap)(a.type==="boolean"?a.execute().then(l=>[`${l}
`]):a.execute().then(()=>[`ok
`]))),{data:d}}};return S0.ActorQueryResultSerializeSimple=e,S0}var HD;function KY(){return HD||(HD=1,(function(u){var n=fu&&fu.__createBinding||(Object.create?(function(i,t,e,r){r===void 0&&(r=e);var a=Object.getOwnPropertyDescriptor(t,e);(!a||("get"in a?!t.__esModule:a.writable||a.configurable))&&(a={enumerable:!0,get:function(){return t[e]}}),Object.defineProperty(i,r,a)}):(function(i,t,e,r){r===void 0&&(r=e),i[r]=t[e]})),o=fu&&fu.__exportStar||function(i,t){for(var e in i)e!=="default"&&!Object.prototype.hasOwnProperty.call(t,e)&&n(t,i,e)};Object.defineProperty(u,"__esModule",{value:!0}),o(JY(),u)})(fu)),fu}var hu={},O0={},GD;function kY(){if(GD)return O0;GD=1,Object.defineProperty(O0,"__esModule",{value:!0}),O0.ActorQueryResultSerializeSparqlCsv=void 0;const u=Kn(),n=pe(),o=Pt();let i=class AT extends u.ActorQueryResultSerializeFixedMediaTypes{constructor(e){super(e)}static bindingToCsvBindings(e){if(!e)return"";let r=e.value;if(e.termType==="Literal")r=`${r}`;else if(e.termType==="BlankNode")r=`_:${r}`;else if(e.termType==="Quad"){let a=AT.bindingToCsvBindings(e.object);e.object.termType==="Literal"&&(a=`"${a.replaceAll('"','""')}"`),r=`<< ${AT.bindingToCsvBindings(e.subject)} ${AT.bindingToCsvBindings(e.predicate)} ${a} >>`}else r=`<${r}>`;return/[",\n\r]/u.test(r)&&(r=`"${r.replaceAll('"','""')}"`),r}async testHandleChecked(e,r){return e.type!=="bindings"?(0,n.failTest)("This actor can only handle bindings streams."):(0,n.passTestVoid)()}async runHandle(e,r,a){const c=e,s=new o.Readable,d=await c.metadata();return s.push(`${d.variables.map(l=>l.variable.value).join(",")}\r
`),s.wrap(c.bindingsStream.map(l=>`${d.variables.map(f=>AT.bindingToCsvBindings(l.get(f.variable))).join(",")}\r
`)),{data:s}}};return O0.ActorQueryResultSerializeSparqlCsv=i,O0}var zD;function WY(){return zD||(zD=1,(function(u){var n=hu&&hu.__createBinding||(Object.create?(function(i,t,e,r){r===void 0&&(r=e);var a=Object.getOwnPropertyDescriptor(t,e);(!a||("get"in a?!t.__esModule:a.writable||a.configurable))&&(a={enumerable:!0,get:function(){return t[e]}}),Object.defineProperty(i,r,a)}):(function(i,t,e,r){r===void 0&&(r=e),i[r]=t[e]})),o=hu&&hu.__exportStar||function(i,t){for(var e in i)e!=="default"&&!Object.prototype.hasOwnProperty.call(t,e)&&n(t,i,e)};Object.defineProperty(u,"__esModule",{value:!0}),o(kY(),u)})(hu)),hu}var pu={},A0={},TA={},Sr={},XD;function YY(){if(XD)return Sr;XD=1,Object.defineProperty(Sr,"__esModule",{value:!0}),Sr.stringQuadToQuad=Sr.quadToStringQuad=Sr.stringToTerm=Sr.getLiteralLanguage=Sr.getLiteralType=Sr.getLiteralValue=Sr.termToString=void 0;const u=hr(),n=new u.DataFactory;function o(p){if(p)switch(p.termType){case"NamedNode":return`<${s(p.value)}>`;case"BlankNode":return`_:${p.value}`;case"Literal":{const y=p;return`"${d(y.value)}"${y.datatype&&y.datatype.value!=="http://www.w3.org/2001/XMLSchema#string"&&y.datatype.value!=="http://www.w3.org/1999/02/22-rdf-syntax-ns#langString"?`^^<${y.datatype.value}>`:""}${y.language?`@${y.language}`:""}`}case"Quad":return`<<${o(p.subject)} ${o(p.predicate)} ${o(p.object)}${p.graph.termType==="DefaultGraph"?"":` ${o(p.graph)}`}>>`;case"Variable":return`?${p.value}`;case"DefaultGraph":return p.value}}Sr.termToString=o;function i(p){const y=/^"([^]*)"((\^\^.*)|(@.*))?$/u.exec(p);if(!y)throw new Error(`${p} is not a literal`);return y[1].replace(/\\"/ug,'"')}Sr.getLiteralValue=i;function t(p){const y=/^"[^]*"(?:\^\^<([^"]+)>|(@)[^@"]+)?$/u.exec(p);if(!y)throw new Error(`${p} is not a literal`);return y[1]||(y[2]?"http://www.w3.org/1999/02/22-rdf-syntax-ns#langString":"http://www.w3.org/2001/XMLSchema#string")}Sr.getLiteralType=t;function e(p){const y=/^"[^]*"(?:@([^@"]+)|\^\^[^"]+)?$/u.exec(p);if(!y)throw new Error(`${p} is not a literal`);return y[1]?y[1].toLowerCase():""}Sr.getLiteralLanguage=e;function r(p,y){if(y=y||n,!p||p.length===0)return y.defaultGraph();switch(p[0]){case"_":return y.blankNode(p.slice(2));case"?":if(!y.variable)throw new Error("Missing 'variable()' method on the given DataFactory");return y.variable(p.slice(1));case'"':{const _=e(p),b=y.namedNode(t(p));return y.literal(i(p),_||b)}case"<":default:if(p.startsWith("<<")&&p.endsWith(">>")){const _=p.slice(2,-2),b=[];let m=0,g=0;for(let T=0;T<_.length;T++){const v=_[T];if(v==="<"&&m++,v===">"){if(m===0)throw new Error(`Found closing tag without opening tag in ${p}`);m--}v===" "&&m===0&&(b.push(_.slice(g,T)),g=T+1)}if(m!==0)throw new Error(`Found opening tag without closing tag in ${p}`);if(b.push(_.slice(g,_.length)),b.length!==3&&b.length!==4)throw new Error(`Nested quad syntax error ${p}`);return y.quad(r(b[0]),r(b[1]),r(b[2]),b[3]?r(b[3]):void 0)}if(!p.startsWith("<")||!p.endsWith(">"))throw new Error(`Detected invalid iri for named node (must be wrapped in <>): ${p}`);return y.namedNode(p.slice(1,-1))}}Sr.stringToTerm=r;function a(p){return{subject:o(p.subject),predicate:o(p.predicate),object:o(p.object),graph:o(p.graph)}}Sr.quadToStringQuad=a;function c(p,y){return y=y||n,y.quad(r(p.subject,y),r(p.predicate,y),r(p.object,y),r(p.graph,y))}Sr.stringQuadToQuad=c;function s(p){return p.replace(l,h)}function d(p){return l.test(p)&&(p=p.replace(l,h)),p}const l=/["\\\t\n\r\b\f\u0000-\u0019]|[\uD800-\uDBFF][\uDC00-\uDFFF]/g,f=new Map([["\\","\\\\"],['"','\\"'],["	","\\t"],[`
`,"\\n"],["\r","\\r"],["\b","\\b"],["\f","\\f"]]);function h(p){const y=f.get(p);if(!y){if(p.length===1){const b=p.charCodeAt(0).toString(16);return`${"\\u0000".slice(0,-b.length)}${b}`}const _=((p.charCodeAt(0)-55296)*1024+p.charCodeAt(1)+9216).toString(16);return`${"\\U00000000".slice(0,-_.length)}${_}`}return y}return Sr}var JD;function E0(){return JD||(JD=1,(function(u){Object.defineProperty(u,"__esModule",{value:!0}),u.termToString=u.stringToTerm=u.stringQuadToQuad=u.quadToStringQuad=u.getLiteralValue=u.getLiteralType=u.getLiteralLanguage=void 0;const n=YY();Object.defineProperty(u,"getLiteralLanguage",{enumerable:!0,get:function(){return n.getLiteralLanguage}}),Object.defineProperty(u,"getLiteralType",{enumerable:!0,get:function(){return n.getLiteralType}}),Object.defineProperty(u,"getLiteralValue",{enumerable:!0,get:function(){return n.getLiteralValue}}),Object.defineProperty(u,"quadToStringQuad",{enumerable:!0,get:function(){return n.quadToStringQuad}}),Object.defineProperty(u,"stringQuadToQuad",{enumerable:!0,get:function(){return n.stringQuadToQuad}}),Object.defineProperty(u,"stringToTerm",{enumerable:!0,get:function(){return n.stringToTerm}}),Object.defineProperty(u,"termToString",{enumerable:!0,get:function(){return n.termToString}})})(TA)),TA}var KD;function ZY(){if(KD)return A0;KD=1,Object.defineProperty(A0,"__esModule",{value:!0}),A0.ActorQueryResultSerializeSparqlTsv=void 0;const u=Kn(),n=pe(),o=E0(),i=Pt();let t=class tJ extends u.ActorQueryResultSerializeFixedMediaTypes{constructor(r){super(r)}static bindingToTsvBindings(r){return r?(0,o.termToString)(r).replaceAll("	","\\t").replaceAll(`
`,"\\n").replaceAll("\r","\\r"):""}async testHandleChecked(r,a){return r.type!=="bindings"?(0,n.failTest)("This actor can only handle bindings streams."):(0,n.passTestVoid)()}async runHandle(r,a,c){const s=r,d=new i.Readable,l=await s.metadata();return d.push(`${l.variables.map(f=>f.variable.value).join("	")}
`),d.wrap(s.bindingsStream.map(f=>`${l.variables.map(h=>tJ.bindingToTsvBindings(f.get(h.variable))).join("	")}
`)),{data:d}}};return A0.ActorQueryResultSerializeSparqlTsv=t,A0}var kD;function eZ(){return kD||(kD=1,(function(u){var n=pu&&pu.__createBinding||(Object.create?(function(i,t,e,r){r===void 0&&(r=e);var a=Object.getOwnPropertyDescriptor(t,e);(!a||("get"in a?!t.__esModule:a.writable||a.configurable))&&(a={enumerable:!0,get:function(){return t[e]}}),Object.defineProperty(i,r,a)}):(function(i,t,e,r){r===void 0&&(r=e),i[r]=t[e]})),o=pu&&pu.__exportStar||function(i,t){for(var e in i)e!=="default"&&!Object.prototype.hasOwnProperty.call(t,e)&&n(t,i,e)};Object.defineProperty(u,"__esModule",{value:!0}),o(ZY(),u)})(pu)),pu}var yu={},x0={},R0={},WD;function tZ(){if(WD)return R0;WD=1,Object.defineProperty(R0,"__esModule",{value:!0}),R0.XmlSerializer=void 0;let u=class{constructor(){this.stack=[]}open(o,i){const t=`${this.identation()+this.formatTag(o,i,"open")}
`;return this.stack.push(o),t}close(){const o=this.stack.pop();if(o===void 0)throw new Error("There is no tag left to close");return`${this.identation()+this.formatTag(o,{},"close")}
`}serializeNode(o){if(o.children===void 0)return`${this.identation()+this.formatTag(o.name,o.attributes,"self-closing")}
`;if(typeof o.children=="string")return`${this.identation()+this.formatTag(o.name,o.attributes,"open")+this.escape(o.children)+this.formatTag(o.name,{},"close")}
`;const i=[];i.push(`${this.identation()+this.formatTag(o.name,o.attributes,"open")}
`),this.stack.push(o.name);for(const t of o.children)i.push(this.serializeNode(t));return this.stack.pop(),i.push(`${this.identation()+this.formatTag(o.name,{},"close")}
`),i.join("")}identation(){return this.stack.map(o=>"  ").join("")}formatTag(o,i,t){return`<${t==="close"?"/":""}${o}${Object.entries(i??{}).map(e=>` ${e[0]}="${this.escape(e[1])}"`)}${t==="self-closing"?"/":""}>`}escape(o){return o.replaceAll(/["&'<>]/gu,(i=>{switch(i){case"<":return"&lt;";case">":return"&gt;";case"&":return"&amp;";case"'":return"&apos;";case'"':return"&quot;"}}))}};return R0.XmlSerializer=u,u.header=`<?xml version="1.0" encoding="UTF-8"?>
`,R0}var YD;function rZ(){if(YD)return x0;YD=1,Object.defineProperty(x0,"__esModule",{value:!0}),x0.ActorQueryResultSerializeSparqlXml=void 0;const u=Kn(),n=pe(),o=pt(),i=Pt(),t=tZ();let e=class rJ extends u.ActorQueryResultSerializeFixedMediaTypes{constructor(a){super(a)}static bindingToXmlBindings(a,c){return{name:"binding",attributes:{name:c.value},children:[this.valueToXmlValue(a)]}}static valueToXmlValue(a){let c;switch(a.termType){case"Literal":return a.language?c={"xml:lang":a.language}:a.datatype&&a.datatype.value!=="http://www.w3.org/2001/XMLSchema#string"?c={datatype:a.datatype.value}:c={},{name:"literal",attributes:c,children:a.value};case"BlankNode":return{name:"bnode",children:a.value};case"Quad":return{name:"triple",children:[{name:"subject",children:[this.valueToXmlValue(a.subject)]},{name:"predicate",children:[this.valueToXmlValue(a.predicate)]},{name:"object",children:[this.valueToXmlValue(a.object)]}]};default:return{name:"uri",children:a.value}}}async testHandleChecked(a,c){return["bindings","boolean"].includes(a.type)?(0,n.passTestVoid)():(0,n.failTest)("This actor can only handle bindings streams or booleans.")}async runHandle(a,c,s){const d=new i.Readable;d._read=()=>{};const l=new t.XmlSerializer,f=await a.metadata();if(d.push(t.XmlSerializer.header),d.push(l.open("sparql",{xmlns:"http://www.w3.org/2005/sparql-results#"})),d.push(l.serializeNode({name:"head",children:f.variables.map(h=>({name:"variable",attributes:{name:h.variable.value}}))})),a.type==="bindings"){function*h(){yield l.close(),yield l.close()}d.push(l.open("results"));const p=(0,o.wrap)(a.bindingsStream).map(y=>l.serializeNode({name:"result",children:[...y].map(([_,b])=>rJ.bindingToXmlBindings(b,_))})).append((0,o.wrap)(h()));d.wrap(p)}else try{const h=await a.execute();d.push(l.serializeNode({name:"boolean",children:h.toString()})),d.push(l.close()),setTimeout(()=>d.push(null))}catch(h){setTimeout(()=>d.emit("error",h))}return{data:d}}};return x0.ActorQueryResultSerializeSparqlXml=e,x0}var ZD;function nZ(){return ZD||(ZD=1,(function(u){var n=yu&&yu.__createBinding||(Object.create?(function(i,t,e,r){r===void 0&&(r=e);var a=Object.getOwnPropertyDescriptor(t,e);(!a||("get"in a?!t.__esModule:a.writable||a.configurable))&&(a={enumerable:!0,get:function(){return t[e]}}),Object.defineProperty(i,r,a)}):(function(i,t,e,r){r===void 0&&(r=e),i[r]=t[e]})),o=yu&&yu.__exportStar||function(i,t){for(var e in i)e!=="default"&&!Object.prototype.hasOwnProperty.call(t,e)&&n(t,i,e)};Object.defineProperty(u,"__esModule",{value:!0}),o(rZ(),u)})(yu)),yu}var bu={},F0={},eN;function iZ(){if(eN)return F0;eN=1,Object.defineProperty(F0,"__esModule",{value:!0}),F0.ActorQueryResultSerializeTable=void 0;const u=Kn(),n=qe(),o=pe(),i=Yt(),t=_n(),e=Pt();let r=class Ex extends u.ActorQueryResultSerializeFixedMediaTypes{constructor(c){super(c),this.padding=Ex.repeat(" ",this.columnWidth)}static repeat(c,s){return c.repeat(s)}async testHandleChecked(c,s){return["bindings","quads"].includes(c.type)?(0,o.passTestVoid)():(0,o.failTest)("This actor can only handle bindings or quad streams.")}termToString(c){return c.termType==="Quad"?(0,i.termToString)(c):c.value}pad(c){return c.length<=this.columnWidth?c+this.padding.slice(c.length):`${c.slice(0,this.columnWidth-1)}`}pushHeader(c,s){const d=s.map(l=>this.pad(l.value)).join(" ");c.push(`${d}
${Ex.repeat("-",d.length)}
`)}createRow(c,s){return`${c.map(d=>s.has(d)?this.termToString(s.get(d)):"").map(d=>this.pad(d)).join(" ")}
`}async runHandle(c,s,d){const l=new e.Readable;let f;if(c.type==="bindings"){f=c.bindingsStream.map(p=>this.createRow(h,p));const h=(await c.metadata()).variables.map(p=>p.variable);this.pushHeader(l,h)}else{f=c.quadStream.map(p=>`${(0,t.getTerms)(p).map(y=>this.pad(this.termToString(y))).join(" ")}
`);const h=c.context.getSafe(n.KeysInitQuery.dataFactory);this.pushHeader(l,t.QUAD_TERM_NAMES.map(p=>h.variable(p)))}return l.wrap(f),{data:l}}};return F0.ActorQueryResultSerializeTable=r,F0}var tN;function aZ(){return tN||(tN=1,(function(u){var n=bu&&bu.__createBinding||(Object.create?(function(i,t,e,r){r===void 0&&(r=e);var a=Object.getOwnPropertyDescriptor(t,e);(!a||("get"in a?!t.__esModule:a.writable||a.configurable))&&(a={enumerable:!0,get:function(){return t[e]}}),Object.defineProperty(i,r,a)}):(function(i,t,e,r){r===void 0&&(r=e),i[r]=t[e]})),o=bu&&bu.__exportStar||function(i,t){for(var e in i)e!=="default"&&!Object.prototype.hasOwnProperty.call(t,e)&&n(t,i,e)};Object.defineProperty(u,"__esModule",{value:!0}),o(iZ(),u)})(bu)),bu}var _u={},I0={},gu={},P0={},mu={},vu={},D0={},N0={},rN;function _f(){if(rN)return N0;rN=1,Object.defineProperty(N0,"__esModule",{value:!0}),N0.Translator=void 0;let u=class{constructor(){this.supportedRdfDatatypes=[],this.fromRdfHandlers={},this.toRdfHandlers={}}static incorrectRdfDataType(o){throw new Error(`Invalid RDF ${o.datatype.value} value: '${o.value}'`)}registerHandler(o,i,t){for(const e of i)this.supportedRdfDatatypes.push(e),this.fromRdfHandlers[e.value]=o;for(const e of t){let r=this.toRdfHandlers[e];r||(this.toRdfHandlers[e]=r=[]),r.push(o)}}fromRdf(o,i){const t=this.fromRdfHandlers[o.datatype.value];return t?t.fromRdf(o,i):o.value}toRdf(o,i){const t=this.toRdfHandlers[typeof o];if(t)for(const e of t){const r=e.toRdf(o,i);if(r)return r}throw new Error(`Invalid JavaScript value: '${o}'`)}getSupportedRdfDatatypes(){return this.supportedRdfDatatypes}getSupportedJavaScriptPrimitives(){return Object.keys(this.toRdfHandlers)}};return N0.Translator=u,N0}var nN;function uZ(){if(nN)return D0;nN=1,Object.defineProperty(D0,"__esModule",{value:!0}),D0.TypeHandlerBoolean=void 0;const u=_f();let n=class nJ{fromRdf(i,t){switch(i.value){case"true":return!0;case"false":return!1;case"1":return!0;case"0":return!1}return t&&u.Translator.incorrectRdfDataType(i),!1}toRdf(i,{datatype:t,dataFactory:e}){return e.literal(i?"true":"false",t||e.namedNode(nJ.TYPE))}};return n.TYPE="http://www.w3.org/2001/XMLSchema#boolean",D0.TypeHandlerBoolean=n,D0}var j0={},iN;function oZ(){if(iN)return j0;iN=1,Object.defineProperty(j0,"__esModule",{value:!0}),j0.TypeHandlerDate=void 0;const u=_f();let n=class xx{fromRdf(i,t){switch(t&&!i.value.match(xx.VALIDATORS[i.datatype.value.substr(33,i.datatype.value.length)])&&u.Translator.incorrectRdfDataType(i),i.datatype.value){case"http://www.w3.org/2001/XMLSchema#gDay":return new Date(0,0,parseInt(i.value,10));case"http://www.w3.org/2001/XMLSchema#gMonthDay":const e=i.value.split("-");return new Date(0,parseInt(e[0],10)-1,parseInt(e[1],10));case"http://www.w3.org/2001/XMLSchema#gYear":return new Date(i.value+"-01-01");case"http://www.w3.org/2001/XMLSchema#gYearMonth":return new Date(i.value+"-01");default:return new Date(i.value)}}toRdf(i,{datatype:t,dataFactory:e}){if(t=t||e.namedNode(xx.TYPES[0]),!(i instanceof Date))return null;const r=i;let a;switch(t.value){case"http://www.w3.org/2001/XMLSchema#gDay":a=String(r.getUTCDate());break;case"http://www.w3.org/2001/XMLSchema#gMonthDay":a=r.getUTCMonth()+1+"-"+r.getUTCDate();break;case"http://www.w3.org/2001/XMLSchema#gYear":a=String(r.getUTCFullYear());break;case"http://www.w3.org/2001/XMLSchema#gYearMonth":a=r.getUTCFullYear()+"-"+(r.getUTCMonth()+1);break;case"http://www.w3.org/2001/XMLSchema#date":a=r.toISOString().replace(/T.*$/,"");break;default:a=r.toISOString()}return e.literal(a,t)}};return n.TYPES=["http://www.w3.org/2001/XMLSchema#dateTime","http://www.w3.org/2001/XMLSchema#date","http://www.w3.org/2001/XMLSchema#gDay","http://www.w3.org/2001/XMLSchema#gMonthDay","http://www.w3.org/2001/XMLSchema#gYear","http://www.w3.org/2001/XMLSchema#gYearMonth"],n.VALIDATORS={date:/^[0-9]+-[0-9][0-9]-[0-9][0-9]Z?$/,dateTime:/^[0-9]+-[0-9][0-9]-[0-9][0-9]T[0-9][0-9]:[0-9][0-9]:[0-9][0-9](\.[0-9][0-9][0-9])?((Z?)|([\+-][0-9][0-9]:[0-9][0-9]))$/,gDay:/^[0-9]+$/,gMonthDay:/^[0-9]+-[0-9][0-9]$/,gYear:/^[0-9]+$/,gYearMonth:/^[0-9]+-[0-9][0-9]$/},j0.TypeHandlerDate=n,j0}var L0={},aN;function sZ(){if(aN)return L0;aN=1,Object.defineProperty(L0,"__esModule",{value:!0}),L0.TypeHandlerNumberDouble=void 0;const u=_f();let n=class iJ{fromRdf(i,t){const e=parseFloat(i.value);return t&&isNaN(e)&&u.Translator.incorrectRdfDataType(i),e}toRdf(i,{datatype:t,dataFactory:e}){return t=t||e.namedNode(iJ.TYPES[0]),isNaN(i)?e.literal("NaN",t):isFinite(i)?i%1===0?null:e.literal(i.toExponential(15).replace(/(\d)0*e\+?/,"$1E"),t):e.literal(i>0?"INF":"-INF",t)}};return n.TYPES=["http://www.w3.org/2001/XMLSchema#double","http://www.w3.org/2001/XMLSchema#decimal","http://www.w3.org/2001/XMLSchema#float"],L0.TypeHandlerNumberDouble=n,L0}var M0={},uN;function cZ(){if(uN)return M0;uN=1,Object.defineProperty(M0,"__esModule",{value:!0}),M0.TypeHandlerNumberInteger=void 0;const u=_f();let n=class ET{fromRdf(i,t){const e=parseInt(i.value,10);return t&&(isNaN(e)||i.value.indexOf(".")>=0)&&u.Translator.incorrectRdfDataType(i),e}toRdf(i,{datatype:t,dataFactory:e}){return e.literal(String(i),t||(i<=ET.MAX_INT&&i>=ET.MIN_INT?e.namedNode(ET.TYPES[0]):e.namedNode(ET.TYPES[1])))}};return n.TYPES=["http://www.w3.org/2001/XMLSchema#integer","http://www.w3.org/2001/XMLSchema#long","http://www.w3.org/2001/XMLSchema#int","http://www.w3.org/2001/XMLSchema#byte","http://www.w3.org/2001/XMLSchema#short","http://www.w3.org/2001/XMLSchema#negativeInteger","http://www.w3.org/2001/XMLSchema#nonNegativeInteger","http://www.w3.org/2001/XMLSchema#nonPositiveInteger","http://www.w3.org/2001/XMLSchema#positiveInteger","http://www.w3.org/2001/XMLSchema#unsignedByte","http://www.w3.org/2001/XMLSchema#unsignedInt","http://www.w3.org/2001/XMLSchema#unsignedLong","http://www.w3.org/2001/XMLSchema#unsignedShort"],n.MAX_INT=2147483647,n.MIN_INT=-2147483648,M0.TypeHandlerNumberInteger=n,M0}var q0={},oN;function dZ(){if(oN)return q0;oN=1,Object.defineProperty(q0,"__esModule",{value:!0}),q0.TypeHandlerString=void 0;let u=class{fromRdf(o){return o.value}toRdf(o,{datatype:i,dataFactory:t}){return t.literal(o,i)}};return u.TYPES=["http://www.w3.org/2001/XMLSchema#string","http://www.w3.org/2001/XMLSchema#normalizedString","http://www.w3.org/2001/XMLSchema#anyURI","http://www.w3.org/2001/XMLSchema#base64Binary","http://www.w3.org/2001/XMLSchema#language","http://www.w3.org/2001/XMLSchema#Name","http://www.w3.org/2001/XMLSchema#NCName","http://www.w3.org/2001/XMLSchema#NMTOKEN","http://www.w3.org/2001/XMLSchema#token","http://www.w3.org/2001/XMLSchema#hexBinary","http://www.w3.org/1999/02/22-rdf-syntax-ns#langString","http://www.w3.org/2001/XMLSchema#time","http://www.w3.org/2001/XMLSchema#duration"],q0.TypeHandlerString=u,q0}var sN;function cN(){return sN||(sN=1,(function(u){var n=vu&&vu.__createBinding||(Object.create?(function(i,t,e,r){r===void 0&&(r=e);var a=Object.getOwnPropertyDescriptor(t,e);(!a||("get"in a?!t.__esModule:a.writable||a.configurable))&&(a={enumerable:!0,get:function(){return t[e]}}),Object.defineProperty(i,r,a)}):(function(i,t,e,r){r===void 0&&(r=e),i[r]=t[e]})),o=vu&&vu.__exportStar||function(i,t){for(var e in i)e!=="default"&&!Object.prototype.hasOwnProperty.call(t,e)&&n(t,i,e)};Object.defineProperty(u,"__esModule",{value:!0}),o(uZ(),u),o(oZ(),u),o(sZ(),u),o(cZ(),u),o(dZ(),u)})(vu)),vu}var wA={},dN;function lZ(){return dN||(dN=1,Object.defineProperty(wA,"__esModule",{value:!0})),wA}var lN;function fZ(){return lN||(lN=1,(function(u){var n=mu&&mu.__createBinding||(Object.create?(function(h,p,y,_){_===void 0&&(_=y);var b=Object.getOwnPropertyDescriptor(p,y);(!b||("get"in b?!p.__esModule:b.writable||b.configurable))&&(b={enumerable:!0,get:function(){return p[y]}}),Object.defineProperty(h,_,b)}):(function(h,p,y,_){_===void 0&&(_=y),h[_]=p[y]})),o=mu&&mu.__exportStar||function(h,p){for(var y in h)y!=="default"&&!Object.prototype.hasOwnProperty.call(p,y)&&n(p,h,y)};Object.defineProperty(u,"__esModule",{value:!0}),u.getSupportedJavaScriptPrimitives=u.getSupportedRdfDatatypes=u.getTermRaw=u.toRdf=u.fromRdf=void 0;const i=hr(),t=cN(),e=_f();o(cN(),u),o(lZ(),u),o(_f(),u);const r=new i.DataFactory,a=new e.Translator;a.registerHandler(new t.TypeHandlerString,t.TypeHandlerString.TYPES.map(h=>r.namedNode(h)),["string"]),a.registerHandler(new t.TypeHandlerBoolean,[t.TypeHandlerBoolean.TYPE].map(h=>r.namedNode(h)),["boolean"]),a.registerHandler(new t.TypeHandlerNumberDouble,t.TypeHandlerNumberDouble.TYPES.map(h=>r.namedNode(h)),["number"]),a.registerHandler(new t.TypeHandlerNumberInteger,t.TypeHandlerNumberInteger.TYPES.map(h=>r.namedNode(h)),["number"]),a.registerHandler(new t.TypeHandlerDate,t.TypeHandlerDate.TYPES.map(h=>r.namedNode(h)),["object"]);function c(h,p){return a.fromRdf(h,p)}u.fromRdf=c;function s(h,p){return p&&"namedNode"in p&&(p={dataFactory:p}),p=p||{},p&&!p.dataFactory&&(p.dataFactory=r),a.toRdf(h,p)}u.toRdf=s;function d(h,p){return h.termType==="Literal"?c(h,p):h.value}u.getTermRaw=d;function l(){return a.getSupportedRdfDatatypes()}u.getSupportedRdfDatatypes=l;function f(){return a.getSupportedJavaScriptPrimitives()}u.getSupportedJavaScriptPrimitives=f})(mu)),mu}var Tu={},C0={},SA,fN;function hN(){if(fN)return SA;fN=1;var{Buffer:u}=kn(),n={},o=n.LEFT_BRACE=1,i=n.RIGHT_BRACE=2,t=n.LEFT_BRACKET=3,e=n.RIGHT_BRACKET=4,r=n.COLON=5,a=n.COMMA=6,c=n.TRUE=7,s=n.FALSE=8,d=n.NULL=9,l=n.STRING=10,f=n.NUMBER=11,h=n.START=17,p=n.STOP=18,y=n.TRUE1=33,_=n.TRUE2=34,b=n.TRUE3=35,m=n.FALSE1=49,g=n.FALSE2=50,T=n.FALSE3=51,v=n.FALSE4=52,S=n.NULL1=65,F=n.NULL2=66,M=n.NULL3=67,O=n.NUMBER1=81,w=n.NUMBER3=83,E=n.STRING1=97,R=n.STRING2=98,D=n.STRING3=99,B=n.STRING4=100,C=n.STRING5=101,$=n.STRING6=102,Z=n.VALUE=113,ee=n.KEY=114,ce=n.OBJECT=129,G=n.ARRAY=130,fe=92,me=47,ye=8,re=12,xe=10,Re=13,Ie=9,he=64*1024;function be(N){return u.alloc?u.alloc(N):new u(N)}function V(){this.tState=h,this.value=void 0,this.string=void 0,this.stringBuffer=be(he),this.stringBufferOffset=0,this.unicode=void 0,this.highSurrogate=void 0,this.key=void 0,this.mode=void 0,this.stack=[],this.state=Z,this.bytes_remaining=0,this.bytes_in_sequence=0,this.temp_buffs={2:be(2),3:be(3),4:be(4)},this.offset=-1}V.toknam=function(N){for(var A=Object.keys(n),I=0,q=A.length;I<q;I++){var H=A[I];if(n[H]===N)return H}return N&&"0x"+N.toString(16)};var P=V.prototype;return P.onError=function(N){throw N},P.charError=function(N,A){this.tState=p,this.onError(new Error("Unexpected "+JSON.stringify(String.fromCharCode(N[A]))+" at position "+A+" in state "+V.toknam(this.tState)))},P.appendStringChar=function(N){this.stringBufferOffset>=he&&(this.string+=this.stringBuffer.toString("utf8"),this.stringBufferOffset=0),this.stringBuffer[this.stringBufferOffset++]=N},P.appendStringBuf=function(N,A,I){var q=N.length;typeof A=="number"&&(typeof I=="number"?I<0?q=N.length-A+I:q=I-A:q=N.length-A),q<0&&(q=0),this.stringBufferOffset+q>he&&(this.string+=this.stringBuffer.toString("utf8",0,this.stringBufferOffset),this.stringBufferOffset=0),N.copy(this.stringBuffer,this.stringBufferOffset,A,I),this.stringBufferOffset+=q},P.write=function(N){typeof N=="string"&&(N=new u(N));for(var A,I=0,q=N.length;I<q;I++)if(this.tState===h){if(A=N[I],this.offset++,A===123)this.onToken(o,"{");else if(A===125)this.onToken(i,"}");else if(A===91)this.onToken(t,"[");else if(A===93)this.onToken(e,"]");else if(A===58)this.onToken(r,":");else if(A===44)this.onToken(a,",");else if(A===116)this.tState=y;else if(A===102)this.tState=m;else if(A===110)this.tState=S;else if(A===34)this.string="",this.stringBufferOffset=0,this.tState=E;else if(A===45)this.string="-",this.tState=O;else if(A>=48&&A<64)this.string=String.fromCharCode(A),this.tState=w;else if(!(A===32||A===9||A===10||A===13))return this.charError(N,I)}else if(this.tState===E)if(A=N[I],this.bytes_remaining>0){for(var H=0;H<this.bytes_remaining;H++)this.temp_buffs[this.bytes_in_sequence][this.bytes_in_sequence-this.bytes_remaining+H]=N[H];this.appendStringBuf(this.temp_buffs[this.bytes_in_sequence]),this.bytes_in_sequence=this.bytes_remaining=0,I=I+H-1}else if(this.bytes_remaining===0&&A>=128){if(A<=193||A>244)return this.onError(new Error("Invalid UTF-8 character at position "+I+" in state "+V.toknam(this.tState)));if(A>=194&&A<=223&&(this.bytes_in_sequence=2),A>=224&&A<=239&&(this.bytes_in_sequence=3),A>=240&&A<=244&&(this.bytes_in_sequence=4),this.bytes_in_sequence+I>N.length){for(var U=0;U<=N.length-1-I;U++)this.temp_buffs[this.bytes_in_sequence][U]=N[I+U];this.bytes_remaining=I+this.bytes_in_sequence-N.length,I=N.length-1}else this.appendStringBuf(N,I,I+this.bytes_in_sequence),I=I+this.bytes_in_sequence-1}else if(A===34)this.tState=h,this.string+=this.stringBuffer.toString("utf8",0,this.stringBufferOffset),this.stringBufferOffset=0,this.onToken(l,this.string),this.offset+=u.byteLength(this.string,"utf8")+1,this.string=void 0;else if(A===92)this.tState=R;else if(A>=32)this.appendStringChar(A);else return this.charError(N,I);else if(this.tState===R)if(A=N[I],A===34)this.appendStringChar(A),this.tState=E;else if(A===92)this.appendStringChar(fe),this.tState=E;else if(A===47)this.appendStringChar(me),this.tState=E;else if(A===98)this.appendStringChar(ye),this.tState=E;else if(A===102)this.appendStringChar(re),this.tState=E;else if(A===110)this.appendStringChar(xe),this.tState=E;else if(A===114)this.appendStringChar(Re),this.tState=E;else if(A===116)this.appendStringChar(Ie),this.tState=E;else if(A===117)this.unicode="",this.tState=D;else return this.charError(N,I);else if(this.tState===D||this.tState===B||this.tState===C||this.tState===$)if(A=N[I],A>=48&&A<64||A>64&&A<=70||A>96&&A<=102){if(this.unicode+=String.fromCharCode(A),this.tState++===$){var X=parseInt(this.unicode,16);this.unicode=void 0,this.highSurrogate!==void 0&&X>=56320&&X<57344?(this.appendStringBuf(new u(String.fromCharCode(this.highSurrogate,X))),this.highSurrogate=void 0):this.highSurrogate===void 0&&X>=55296&&X<56320?this.highSurrogate=X:(this.highSurrogate!==void 0&&(this.appendStringBuf(new u(String.fromCharCode(this.highSurrogate))),this.highSurrogate=void 0),this.appendStringBuf(new u(String.fromCharCode(X)))),this.tState=E}}else return this.charError(N,I);else if(this.tState===O||this.tState===w)switch(A=N[I],A){case 48:case 49:case 50:case 51:case 52:case 53:case 54:case 55:case 56:case 57:case 46:case 101:case 69:case 43:case 45:this.string+=String.fromCharCode(A),this.tState=w;break;default:this.tState=h;var Q=this.numberReviver(this.string,N,I);if(Q)return Q;this.offset+=this.string.length-1,this.string=void 0,I--;break}else if(this.tState===y)if(N[I]===114)this.tState=_;else return this.charError(N,I);else if(this.tState===_)if(N[I]===117)this.tState=b;else return this.charError(N,I);else if(this.tState===b)if(N[I]===101)this.tState=h,this.onToken(c,!0),this.offset+=3;else return this.charError(N,I);else if(this.tState===m)if(N[I]===97)this.tState=g;else return this.charError(N,I);else if(this.tState===g)if(N[I]===108)this.tState=T;else return this.charError(N,I);else if(this.tState===T)if(N[I]===115)this.tState=v;else return this.charError(N,I);else if(this.tState===v)if(N[I]===101)this.tState=h,this.onToken(s,!1),this.offset+=4;else return this.charError(N,I);else if(this.tState===S)if(N[I]===117)this.tState=F;else return this.charError(N,I);else if(this.tState===F)if(N[I]===108)this.tState=M;else return this.charError(N,I);else if(this.tState===M)if(N[I]===108)this.tState=h,this.onToken(d,null),this.offset+=3;else return this.charError(N,I)},P.onToken=function(N,A){},P.parseError=function(N,A){this.tState=p,this.onError(new Error("Unexpected "+V.toknam(N)+(A?"("+JSON.stringify(A)+")":"")+" in state "+V.toknam(this.state)))},P.push=function(){this.stack.push({value:this.value,key:this.key,mode:this.mode})},P.pop=function(){var N=this.value,A=this.stack.pop();this.value=A.value,this.key=A.key,this.mode=A.mode,this.emit(N),this.mode||(this.state=Z)},P.emit=function(N){this.mode&&(this.state=a),this.onValue(N)},P.onValue=function(N){},P.onToken=function(N,A){if(this.state===Z)if(N===l||N===f||N===c||N===s||N===d)this.value&&(this.value[this.key]=A),this.emit(A);else if(N===o)this.push(),this.value?this.value=this.value[this.key]={}:this.value={},this.key=void 0,this.state=ee,this.mode=ce;else if(N===t)this.push(),this.value?this.value=this.value[this.key]=[]:this.value=[],this.key=0,this.mode=G,this.state=Z;else if(N===i)if(this.mode===ce)this.pop();else return this.parseError(N,A);else if(N===e)if(this.mode===G)this.pop();else return this.parseError(N,A);else return this.parseError(N,A);else if(this.state===ee)if(N===l)this.key=A,this.state=r;else if(N===i)this.pop();else return this.parseError(N,A);else if(this.state===r)if(N===r)this.state=Z;else return this.parseError(N,A);else if(this.state===a)if(N===a)this.mode===G?(this.key++,this.state=Z):this.mode===ce&&(this.state=ee);else if(N===e&&this.mode===G||N===i&&this.mode===ce)this.pop();else return this.parseError(N,A);else return this.parseError(N,A)},P.numberReviver=function(N,A,I){var q=Number(N);if(isNaN(q))return this.charError(A,I);N.match(/[0-9]+/)==N&&q.toString()!=N?this.onToken(l,N):this.onToken(f,q)},V.C=n,SA=V,SA}var pN;function hZ(){if(pN)return C0;pN=1,Object.defineProperty(C0,"__esModule",{value:!0}),C0.SparqlJsonParser=void 0;const u=hr(),n=Pt(),o=hN();let i=class{constructor(e){var r;e=e||{},this.dataFactory=e.dataFactory||new u.DataFactory,this.prefixVariableQuestionMark=!!e.prefixVariableQuestionMark,this.suppressMissingStreamResultsError=(r=e.suppressMissingStreamResultsError)!==null&&r!==void 0?r:!0}parseJsonResults(e){return e.results.bindings.map(r=>this.parseJsonBindings(r))}parseJsonResultsStream(e){const r=l=>d.emit("error",l);e.on("error",r);const a=new o;a.onError=r;let c=!1,s=!1;a.onValue=l=>{if(a.key==="vars"&&a.stack.length===2&&a.stack[1].key==="head")d.emit("variables",l.map(f=>this.dataFactory.variable(f))),c=!0;else if(a.key==="results"&&a.stack.length===1)s=!0;else if(typeof a.key=="number"&&a.stack.length===3&&a.stack[1].key==="results"&&a.stack[2].key==="bindings")try{d.push(this.parseJsonBindings(l))}catch(f){d.emit("error",f)}else a.key==="metadata"&&a.stack.length===1&&d.emit("metadata",l)};const d=e.on("end",l=>{!s&&!this.suppressMissingStreamResultsError?d.emit("error",new Error("No valid SPARQL query results were found.")):c||d.emit("variables",[])}).pipe(new n.Transform({objectMode:!0,transform(l,f,h){a.write(l),h()}}));return d}parseJsonBindings(e){const r={};for(const a in e){const c=e[a];r[this.prefixVariableQuestionMark?"?"+a:a]=this.parseJsonValue(c)}return r}parseJsonValue(e){let r;switch(e.type){case"bnode":r=this.dataFactory.blankNode(e.value);break;case"literal":e["xml:lang"]?r=this.dataFactory.literal(e.value,e["xml:lang"]):e.datatype?r=this.dataFactory.literal(e.value,this.dataFactory.namedNode(e.datatype)):r=this.dataFactory.literal(e.value);break;case"typed-literal":r=this.dataFactory.literal(e.value,this.dataFactory.namedNode(e.datatype));break;case"triple":const a=e.value;if(!a||!a.subject||!a.predicate||!a.object)throw new Error("Invalid quoted triple: "+JSON.stringify(e));r=this.dataFactory.quad(this.parseJsonValue(a.subject),this.parseJsonValue(a.predicate),this.parseJsonValue(a.object));break;default:r=this.dataFactory.namedNode(e.value);break}return r}parseJsonBoolean(e){if("boolean"in e)return e.boolean;throw new Error("No valid ASK response was found.")}parseJsonBooleanStream(e){return new Promise((r,a)=>{const c=new o;c.onError=a,c.onValue=s=>{c.key==="boolean"&&typeof s=="boolean"&&c.stack.length===1&&r(s)},e.on("error",a).on("data",s=>c.write(s)).on("end",()=>a(new Error("No valid ASK response was found.")))})}};return C0.SparqlJsonParser=i,C0}var yN;function bN(){return yN||(yN=1,(function(u){var n=Tu&&Tu.__createBinding||(Object.create?(function(i,t,e,r){r===void 0&&(r=e);var a=Object.getOwnPropertyDescriptor(t,e);(!a||("get"in a?!t.__esModule:a.writable||a.configurable))&&(a={enumerable:!0,get:function(){return t[e]}}),Object.defineProperty(i,r,a)}):(function(i,t,e,r){r===void 0&&(r=e),i[r]=t[e]})),o=Tu&&Tu.__exportStar||function(i,t){for(var e in i)e!=="default"&&!Object.prototype.hasOwnProperty.call(t,e)&&n(t,i,e)};Object.defineProperty(u,"__esModule",{value:!0}),o(hZ(),u)})(Tu)),Tu}var _N;function pZ(){if(_N)return P0;_N=1,Object.defineProperty(P0,"__esModule",{value:!0}),P0.Converter=void 0;const u=fZ(),n=bN();let o=class Fi{constructor(t){t=t||{delimiter:"_"},t.prefixVariableQuestionMark=!1,this.delimiter=t.delimiter||"_",this.parser=new n.SparqlJsonParser(t),this.materializeRdfJsTerms=t.materializeRdfJsTerms}static addValueToTree(t,e,r,a,c,s){const d=e[0],l=a?a+s+d:d,f=c.singularizeVariables[l];if(e.length===1)f?t[d]||(t[d]=r):(t[d]||(t[d]=[]),t[d].push(r));else{let h;f?(t[d]||(t[d]={}),h=t[d]):(t[d]||(t[d]=[{}]),h=t[d][0]),Fi.addValueToTree(h,e.slice(1),r,l,c,s)}}static mergeTrees(t,e){if(typeof t!=typeof e)throw new Error(`Two incompatible tree nodes were found: ${typeof t} and ${typeof e}`);if(Array.isArray(t)!==Array.isArray(e))throw new Error(`Two incompatible tree nodes were found: Array?${Array.isArray(t)} and Array?${Array.isArray(e)}`);if(typeof t=="object"&&typeof e=="object"){if(t.termType&&e.termType)return t.equals(e)?{valid:!0,result:t}:{valid:!1,result:t};if(Array.isArray(t)&&Array.isArray(e)){if(t.length>0){const r=[];let a=!1;for(const c of t){const s=Fi.mergeTrees(c,e[0]);s.valid?(a=!0,r.push(s.result)):r.push(c)}if(a)return{valid:!0,result:r}}return{valid:!0,result:t.concat(e)}}else{const r={};for(const a in e)r[a]=e[a];for(const a in t)if(r[a]){const c=Fi.mergeTrees(t[a],r[a]);if(c.valid)r[a]=c.result;else return{valid:!1,result:t}}else r[a]=t[a];return{valid:!0,result:r}}}else throw new Error(`Unmergable tree types: ${typeof t} and ${typeof e}`)}static materializeTree(t){if(t.termType)return(0,u.getTermRaw)(t);if(Array.isArray(t))return t.map(Fi.materializeTree);{const e={};for(const r in t)e[r]=Fi.materializeTree(t[r]);return e}}sparqlJsonResultsToTree(t,e){return this.bindingsToTree(this.parser.parseJsonResults(t),e||{singularizeVariables:{}})}bindingsToTree(t,e){const r=e&&e.singularizeVariables[""];let a=r?{}:[];for(const c of t){const s=r?{}:[{}];for(const d in c){const l=d.split(this.delimiter),f=c[d];Fi.addValueToTree(r?s:s[0],l,f,"",e,this.delimiter)}a=Fi.mergeTrees(a,s).result}return this.materializeRdfJsTerms&&(a=Fi.materializeTree(a)),a}};return P0.Converter=o,P0}var gN;function yZ(){return gN||(gN=1,(function(u){var n=gu&&gu.__createBinding||(Object.create?(function(i,t,e,r){r===void 0&&(r=e);var a=Object.getOwnPropertyDescriptor(t,e);(!a||("get"in a?!t.__esModule:a.writable||a.configurable))&&(a={enumerable:!0,get:function(){return t[e]}}),Object.defineProperty(i,r,a)}):(function(i,t,e,r){r===void 0&&(r=e),i[r]=t[e]})),o=gu&&gu.__exportStar||function(i,t){for(var e in i)e!=="default"&&!Object.prototype.hasOwnProperty.call(t,e)&&n(t,i,e)};Object.defineProperty(u,"__esModule",{value:!0}),o(pZ(),u)})(gu)),gu}var mN;function vN(){if(mN)return I0;mN=1,Object.defineProperty(I0,"__esModule",{value:!0}),I0.ActorQueryResultSerializeTree=void 0;const u=Kn(),n=qe(),o=pe(),i=Pt(),t=yZ();let e=class aJ extends u.ActorQueryResultSerializeFixedMediaTypes{constructor(a){super(a)}static async bindingsStreamToGraphQl(a,c,s){const d=o.ActionContext.ensureActionContext(c),l=new t.Converter(s),f={singularizeVariables:d.get(n.KeysInitQuery.graphqlSingularizeVariables)??{}};return l.bindingsToTree(await a.map(h=>Object.fromEntries([...h].map(([p,y])=>[p.value,y]))).toArray(),f)}async testHandleChecked(a){return a.type!=="bindings"?(0,o.failTest)("This actor can only handle bindings streams."):(0,o.passTestVoid)()}async runHandle(a,c){const s=new i.Readable;return s._read=()=>{s._read=()=>{},aJ.bindingsStreamToGraphQl(a.bindingsStream,a.context,{materializeRdfJsTerms:!0}).then(d=>{s.push(JSON.stringify(d,null,"  ")),s.push(null)}).catch(d=>s.emit("error",d))},{data:s}}};return I0.ActorQueryResultSerializeTree=e,I0}var TN;function bZ(){return TN||(TN=1,(function(u){var n=_u&&_u.__createBinding||(Object.create?(function(e,r,a,c){c===void 0&&(c=a);var s=Object.getOwnPropertyDescriptor(r,a);(!s||("get"in s?!r.__esModule:s.writable||s.configurable))&&(s={enumerable:!0,get:function(){return r[a]}}),Object.defineProperty(e,c,s)}):(function(e,r,a,c){c===void 0&&(c=a),e[c]=r[a]})),o=_u&&_u.__exportStar||function(e,r){for(var a in e)a!=="default"&&!Object.prototype.hasOwnProperty.call(r,a)&&n(r,e,a)};Object.defineProperty(u,"__esModule",{value:!0}),u.bindingsStreamToGraphQl=void 0;const i=vN(),{bindingsStreamToGraphQl:t}=i.ActorQueryResultSerializeTree;u.bindingsStreamToGraphQl=t,o(vN(),u)})(_u)),_u}var wu={},B0={},wN;function _Z(){if(wN)return B0;wN=1,Object.defineProperty(B0,"__esModule",{value:!0}),B0.MediatorCombineUnion=void 0;const u=pe();let n=class extends u.Mediator{constructor(i){super(i),this.combiner=this.createCombiner()}async mediate(i){let t;try{t=this.publish(i)}catch{t=[]}if(this.filterFailures){const a=[];for(const c of t)(await c.reply).isPassed()&&a.push(c);t=a}const e=[];await Promise.all(t.map(async({reply:a},c)=>{const s=await a,d=s.getOrThrow();return e[c]=s.getSideData(),d}));const r=await Promise.all(t.map((a,c)=>a.actor.runObservable(i,e[c])));return this.combiner(r)}mediateWith(){throw new Error("Method not supported.")}createCombiner(){return i=>{const t={};return t[this.field]={},[{}].concat(i.map(e=>e[this.field])).forEach(e=>{t[this.field]={...e,...t[this.field]}}),t}}};return B0.MediatorCombineUnion=n,B0}var SN;function Hi(){return SN||(SN=1,(function(u){var n=wu&&wu.__createBinding||(Object.create?(function(i,t,e,r){r===void 0&&(r=e);var a=Object.getOwnPropertyDescriptor(t,e);(!a||("get"in a?!t.__esModule:a.writable||a.configurable))&&(a={enumerable:!0,get:function(){return t[e]}}),Object.defineProperty(i,r,a)}):(function(i,t,e,r){r===void 0&&(r=e),i[r]=t[e]})),o=wu&&wu.__exportStar||function(i,t){for(var e in i)e!=="default"&&!Object.prototype.hasOwnProperty.call(t,e)&&n(t,i,e)};Object.defineProperty(u,"__esModule",{value:!0}),o(_Z(),u)})(wu)),wu}var Su={},$0={},ON;function gZ(){if(ON)return $0;ON=1,Object.defineProperty($0,"__esModule",{value:!0}),$0.MediatorNumber=void 0;const u=pe();let n=class extends u.Mediator{constructor(i){super(i),this.indexPicker=this.createIndexPicker()}createIndexPicker(){switch(this.type){case"min":return i=>i.reduce((t,e,r)=>{const a=this.getOrDefault(e[this.field],Number.POSITIVE_INFINITY);return a!==null&&(Number.isNaN(t[0])||t[0]>a)?[a,r]:t},[Number.NaN,-1])[1];case"max":return i=>i.reduce((t,e,r)=>{const a=this.getOrDefault(e[this.field],Number.NEGATIVE_INFINITY);return a!==null&&(Number.isNaN(t[0])||t[0]<a)?[a,r]:t},[Number.NaN,-1])[1];default:throw new Error(`No valid "type" value was given, must be either 'min' or 'max', but got: ${this.type}`)}}getOrDefault(i,t){return i===void 0?t:i}async mediateWith(i,t){let e=await Promise.all(t.map(({reply:d})=>d));const r=[];if(this.ignoreFailures){const d={};d[this.field]=null,e=e.map(l=>l.isFailed()?(r.push(l.getFailMessage()),(0,u.passTestWithSideData)(d,void 0)):l)}const a=[],c=e.map((d,l)=>{const f=d.getOrThrow();return a[l]=d.getSideData(),f}),s=this.indexPicker(c);return s<0?(0,u.failTest)(this.constructFailureMessage(i,r)):(0,u.passTestWithSideData)(t[s].actor,a[s])}};return $0.MediatorNumber=n,$0}var AN;function gf(){return AN||(AN=1,(function(u){var n=Su&&Su.__createBinding||(Object.create?(function(i,t,e,r){r===void 0&&(r=e);var a=Object.getOwnPropertyDescriptor(t,e);(!a||("get"in a?!t.__esModule:a.writable||a.configurable))&&(a={enumerable:!0,get:function(){return t[e]}}),Object.defineProperty(i,r,a)}):(function(i,t,e,r){r===void 0&&(r=e),i[r]=t[e]})),o=Su&&Su.__exportStar||function(i,t){for(var e in i)e!=="default"&&!Object.prototype.hasOwnProperty.call(t,e)&&n(t,i,e)};Object.defineProperty(u,"__esModule",{value:!0}),o(gZ(),u)})(Su)),Su}var Ou={},U0={},Au={},V0={},fi={},EN;function OA(){if(EN)return fi;EN=1,Object.defineProperty(fi,"__esModule",{value:!0}),fi.ActorDereferenceBase=fi.isHardError=fi.emptyReadable=void 0;const u=qe(),n=pe(),o=Pt();function i(){const r=new o.Readable;return r.push(null),r}fi.emptyReadable=i;function t(r){return!r.get(u.KeysInitQuery.lenient)}fi.isHardError=t;let e=class extends n.Actor{constructor(a){super(a)}async dereferenceErrorHandler(a,c,s){if(t(a.context))throw c;return this.logWarn(a.context,c.message,()=>({url:a.url})),{...s,data:i()}}};return fi.ActorDereferenceBase=e,fi}var xN;function mZ(){if(xN)return V0;xN=1,Object.defineProperty(V0,"__esModule",{value:!0}),V0.ActorDereference=void 0;const u=OA();let n=class extends u.ActorDereferenceBase{constructor(i){super(i)}async handleDereferenceErrors(i,t,e,r=0){return this.dereferenceErrorHandler(i,t,{url:i.url,exists:!1,headers:e,requestTime:r})}};return V0.ActorDereference=n,V0}var Eu={},RN;function vZ(){if(RN)return Eu;RN=1,Object.defineProperty(Eu,"__esModule",{value:!0}),Eu.ActorDereferenceParse=Eu.getMediaTypeFromExtension=void 0;const u=pe(),n=Pt(),o=OA();function i(e,r){const a=e.lastIndexOf(".");return a>=0&&(r==null?void 0:r[e.slice(a+1)])||""}Eu.getMediaTypeFromExtension=i;let t=class extends o.ActorDereferenceBase{constructor(r){super(r)}async test(r){return(0,u.passTestVoid)()}handleDereferenceStreamErrors(r,a){return(0,o.isHardError)(r.context)||(a.on("error",c=>{this.logWarn(r.context,c.message,()=>({url:r.url})),a.push(null)}),a=a.pipe(new n.PassThrough({objectMode:!0}))),a}async run(r){var d,l,f,h;const{context:a}=r,c=await this.mediatorDereference.mediate({...r,mediaTypes:async()=>{var p,y;return(y=await((p=this.mediatorParseMediatypes)==null?void 0:p.mediate({context:a,mediaTypes:!0})))==null?void 0:y.mediaTypes}});let s;if(c.exists)try{s=(await this.mediatorParse.mediate({context:a,handle:{context:a,...c,metadata:await this.getMetadata(c)},handleMediaType:c.mediaType||r.mediaType||i(c.url,this.mediaMappings)})).handle,s.data=this.handleDereferenceStreamErrors(r,s.data)}catch(p){await((l=(d=c.data).close)==null?void 0:l.call(d)),s=await this.dereferenceErrorHandler(r,p,{})}else await((h=(f=c.data).close)==null?void 0:h.call(f)),s={data:(0,o.emptyReadable)()};return{...c,...s}}};return Eu.ActorDereferenceParse=t,Eu}var FN;function AA(){return FN||(FN=1,(function(u){var n=Au&&Au.__createBinding||(Object.create?(function(i,t,e,r){r===void 0&&(r=e);var a=Object.getOwnPropertyDescriptor(t,e);(!a||("get"in a?!t.__esModule:a.writable||a.configurable))&&(a={enumerable:!0,get:function(){return t[e]}}),Object.defineProperty(i,r,a)}):(function(i,t,e,r){r===void 0&&(r=e),i[r]=t[e]})),o=Au&&Au.__exportStar||function(i,t){for(var e in i)e!=="default"&&!Object.prototype.hasOwnProperty.call(t,e)&&n(t,i,e)};Object.defineProperty(u,"__esModule",{value:!0}),o(mZ(),u),o(vZ(),u),o(OA(),u)})(Au)),Au}var IN;function TZ(){if(IN)return U0;IN=1,Object.defineProperty(U0,"__esModule",{value:!0}),U0.ActorDereferenceFallback=void 0;const u=AA(),n=pe();let o=class extends u.ActorDereference{constructor(t){super(t)}async test(t){return(0,n.passTestVoid)()}async run(t){return this.handleDereferenceErrors(t,new Error(`Could not dereference '${t.url}'`))}};return U0.ActorDereferenceFallback=o,U0}var PN;function wZ(){return PN||(PN=1,(function(u){var n=Ou&&Ou.__createBinding||(Object.create?(function(i,t,e,r){r===void 0&&(r=e);var a=Object.getOwnPropertyDescriptor(t,e);(!a||("get"in a?!t.__esModule:a.writable||a.configurable))&&(a={enumerable:!0,get:function(){return t[e]}}),Object.defineProperty(i,r,a)}):(function(i,t,e,r){r===void 0&&(r=e),i[r]=t[e]})),o=Ou&&Ou.__exportStar||function(i,t){for(var e in i)e!=="default"&&!Object.prototype.hasOwnProperty.call(t,e)&&n(t,i,e)};Object.defineProperty(u,"__esModule",{value:!0}),o(TZ(),u)})(Ou)),Ou}var xu={},Q0={},Ru={},H0={},DN;function SZ(){if(DN)return H0;DN=1,Object.defineProperty(H0,"__esModule",{value:!0}),H0.ActorRdfJoinEntriesSort=void 0;const u=pe();let n=class extends u.Actor{constructor(i){super(i)}};return H0.ActorRdfJoinEntriesSort=n,H0}var NN;function jN(){return NN||(NN=1,(function(u){var n=Ru&&Ru.__createBinding||(Object.create?(function(i,t,e,r){r===void 0&&(r=e);var a=Object.getOwnPropertyDescriptor(t,e);(!a||("get"in a?!t.__esModule:a.writable||a.configurable))&&(a={enumerable:!0,get:function(){return t[e]}}),Object.defineProperty(i,r,a)}):(function(i,t,e,r){r===void 0&&(r=e),i[r]=t[e]})),o=Ru&&Ru.__exportStar||function(i,t){for(var e in i)e!=="default"&&!Object.prototype.hasOwnProperty.call(t,e)&&n(t,i,e)};Object.defineProperty(u,"__esModule",{value:!0}),o(SZ(),u)})(Ru)),Ru}var LN;function OZ(){if(LN)return Q0;LN=1,Object.defineProperty(Q0,"__esModule",{value:!0}),Q0.ActorRdfJoinEntriesSortCardinality=void 0;const u=jN(),n=pe();let o=class extends u.ActorRdfJoinEntriesSort{constructor(t){super(t)}async test(t){return(0,n.passTest)({accuracy:t.entries.length===0?1:t.entries.reduce((e,r)=>e+(Number.isFinite(r.metadata.cardinality.value)?1:0),0)/t.entries.length})}async run(t){return{entries:[...t.entries].sort((r,a)=>r.metadata.cardinality.value-a.metadata.cardinality.value)}}};return Q0.ActorRdfJoinEntriesSortCardinality=o,Q0}var MN;function AZ(){return MN||(MN=1,(function(u){var n=xu&&xu.__createBinding||(Object.create?(function(i,t,e,r){r===void 0&&(r=e);var a=Object.getOwnPropertyDescriptor(t,e);(!a||("get"in a?!t.__esModule:a.writable||a.configurable))&&(a={enumerable:!0,get:function(){return t[e]}}),Object.defineProperty(i,r,a)}):(function(i,t,e,r){r===void 0&&(r=e),i[r]=t[e]})),o=xu&&xu.__exportStar||function(i,t){for(var e in i)e!=="default"&&!Object.prototype.hasOwnProperty.call(t,e)&&n(t,i,e)};Object.defineProperty(u,"__esModule",{value:!0}),o(OZ(),u)})(xu)),xu}var Fu={},Iu={},Pu={},G0={},qN;function EZ(){if(qN)return G0;qN=1,Object.defineProperty(G0,"__esModule",{value:!0}),G0.ActorRdfJoinSelectivity=void 0;const u=pe();let n=class extends u.Actor{constructor(i){super(i)}};return G0.ActorRdfJoinSelectivity=n,G0}var CN;function xZ(){return CN||(CN=1,(function(u){var n=Pu&&Pu.__createBinding||(Object.create?(function(i,t,e,r){r===void 0&&(r=e);var a=Object.getOwnPropertyDescriptor(t,e);(!a||("get"in a?!t.__esModule:a.writable||a.configurable))&&(a={enumerable:!0,get:function(){return t[e]}}),Object.defineProperty(i,r,a)}):(function(i,t,e,r){r===void 0&&(r=e),i[r]=t[e]})),o=Pu&&Pu.__exportStar||function(i,t){for(var e in i)e!=="default"&&!Object.prototype.hasOwnProperty.call(t,e)&&n(t,i,e)};Object.defineProperty(u,"__esModule",{value:!0}),o(EZ(),u)})(Pu)),Pu}var BN;function RZ(){if(BN)return Iu;BN=1,Object.defineProperty(Iu,"__esModule",{value:!0}),Iu.JoinTypes=Iu.ActorRdfJoinSelectivityVariableCounting=void 0;const u=xZ(),n=pe(),o=st();let i=class Ul extends u.ActorRdfJoinSelectivity{constructor(r){super(r)}async test(r){return(0,n.passTest)({accuracy:.5})}static getPatternCost(r){let a=1;return r.subject.termType==="Variable"&&(a+=4),(r.predicate.termType==="Variable"||r.type===o.Algebra.types.PATH)&&(a+=1),r.object.termType==="Variable"&&(a+=2),r.graph.termType==="Variable"&&(a+=1),a/9}static getJoinTypes(r,a){const c=[];return r.subject.termType==="Variable"?(r.subject.equals(a.subject)&&c.push(t.unboundSS),a.type==="pattern"&&r.subject.equals(a.predicate)&&c.push(t.unboundSP),r.subject.equals(a.object)&&c.push(t.unboundSO),r.subject.equals(a.graph)&&c.push(t.unboundSG)):(r.subject.equals(a.subject)&&c.push(t.boundSS),a.type==="pattern"&&r.subject.equals(a.predicate)&&c.push(t.boundSP),r.subject.equals(a.object)&&c.push(t.boundSO),r.subject.equals(a.graph)&&c.push(t.boundSG)),r.type==="pattern"&&(r.predicate.termType==="Variable"?(r.predicate.equals(a.subject)&&c.push(t.unboundPS),a.type==="pattern"&&r.predicate.equals(a.predicate)&&c.push(t.unboundPP),r.predicate.equals(a.object)&&c.push(t.unboundPO),r.predicate.equals(a.graph)&&c.push(t.unboundPG)):(r.predicate.equals(a.subject)&&c.push(t.boundPS),a.type==="pattern"&&r.predicate.equals(a.predicate)&&c.push(t.boundPP),r.predicate.equals(a.object)&&c.push(t.boundPO),r.predicate.equals(a.graph)&&c.push(t.boundPG))),r.object.termType==="Variable"?(r.object.equals(a.subject)&&c.push(t.unboundOS),a.type==="pattern"&&r.object.equals(a.predicate)&&c.push(t.unboundOP),r.object.equals(a.object)&&c.push(t.unboundOO),r.object.equals(a.graph)&&c.push(t.unboundOG)):(r.object.equals(a.subject)&&c.push(t.boundOS),a.type==="pattern"&&r.object.equals(a.predicate)&&c.push(t.boundOP),r.object.equals(a.object)&&c.push(t.boundOO),r.object.equals(a.graph)&&c.push(t.boundOG)),r.graph.termType==="Variable"?(r.graph.equals(a.subject)&&c.push(t.unboundGS),a.type==="pattern"&&r.graph.equals(a.predicate)&&c.push(t.unboundGP),r.graph.equals(a.object)&&c.push(t.unboundGO),r.graph.equals(a.graph)&&c.push(t.unboundGG)):(r.graph.equals(a.subject)&&c.push(t.boundGS),a.type==="pattern"&&r.graph.equals(a.predicate)&&c.push(t.boundGP),r.graph.equals(a.object)&&c.push(t.boundGO),r.graph.equals(a.graph)&&c.push(t.boundGG)),c}static getOperationsPairwiseJoinCost(r,a){let c=Ul.MAX_PAIRWISE_COST;for(const s of Ul.getJoinTypes(r,a))switch(s){case t.boundSS:c-=4;break;case t.boundSP:c-=6;break;case t.boundSO:c-=2;break;case t.boundSG:c-=6;break;case t.boundPS:c-=6;break;case t.boundPP:return 1;case t.boundPO:c-=6;break;case t.boundPG:c-=6;break;case t.boundOS:c-=2;break;case t.boundOP:c-=6;break;case t.boundOO:c-=2;break;case t.boundOG:c-=6;break;case t.boundGS:c-=6;break;case t.boundGP:c-=6;break;case t.boundGO:c-=6;break;case t.boundGG:c-=6;break;case t.unboundSS:c-=2;break;case t.unboundSP:c-=3;break;case t.unboundSO:c-=1;break;case t.unboundSG:c-=3;break;case t.unboundPS:c-=3;break;case t.unboundPP:c-=3;break;case t.unboundPO:c-=3;break;case t.unboundPG:c-=3;break;case t.unboundOS:c-=1;break;case t.unboundOP:c-=3;break;case t.unboundOO:c-=1;break;case t.unboundOG:c-=3;break;case t.unboundGS:c-=3;break;case t.unboundGP:c-=3;break;case t.unboundGO:c-=3;break;case t.unboundGG:c-=3;break}return c/Ul.MAX_PAIRWISE_COST}static getOperationsJoinCost(r){const a=[];for(const d of r)o.Util.recurseOperation(d,{[o.Algebra.types.PATTERN](l){return a.push(l),!1},[o.Algebra.types.PATH](l){return a.push(l),!1}});let c=0,s=0;for(const d of a)for(const l of a)d!==l&&(c+=Ul.getOperationsPairwiseJoinCost(d,l),s++);return s===0?1:c/s*a.reduce((d,l)=>d*Ul.getPatternCost(l),1)}async run(r){return r.entries.length<=1?{selectivity:1}:{selectivity:Ul.getOperationsJoinCost(r.entries.map(a=>a.operation))}}};Iu.ActorRdfJoinSelectivityVariableCounting=i,i.MAX_PAIRWISE_COST=82;var t;return(function(e){e[e.boundSS=0]="boundSS",e[e.boundSP=1]="boundSP",e[e.boundSO=2]="boundSO",e[e.boundSG=3]="boundSG",e[e.boundPS=4]="boundPS",e[e.boundPP=5]="boundPP",e[e.boundPO=6]="boundPO",e[e.boundPG=7]="boundPG",e[e.boundOS=8]="boundOS",e[e.boundOP=9]="boundOP",e[e.boundOO=10]="boundOO",e[e.boundOG=11]="boundOG",e[e.boundGS=12]="boundGS",e[e.boundGP=13]="boundGP",e[e.boundGO=14]="boundGO",e[e.boundGG=15]="boundGG",e[e.unboundSS=16]="unboundSS",e[e.unboundSP=17]="unboundSP",e[e.unboundSO=18]="unboundSO",e[e.unboundSG=19]="unboundSG",e[e.unboundPS=20]="unboundPS",e[e.unboundPP=21]="unboundPP",e[e.unboundPO=22]="unboundPO",e[e.unboundPG=23]="unboundPG",e[e.unboundOS=24]="unboundOS",e[e.unboundOP=25]="unboundOP",e[e.unboundOO=26]="unboundOO",e[e.unboundOG=27]="unboundOG",e[e.unboundGS=28]="unboundGS",e[e.unboundGP=29]="unboundGP",e[e.unboundGO=30]="unboundGO",e[e.unboundGG=31]="unboundGG"})(t||(Iu.JoinTypes=t={})),Iu}var $N;function FZ(){return $N||($N=1,(function(u){var n=Fu&&Fu.__createBinding||(Object.create?(function(i,t,e,r){r===void 0&&(r=e);var a=Object.getOwnPropertyDescriptor(t,e);(!a||("get"in a?!t.__esModule:a.writable||a.configurable))&&(a={enumerable:!0,get:function(){return t[e]}}),Object.defineProperty(i,r,a)}):(function(i,t,e,r){r===void 0&&(r=e),i[r]=t[e]})),o=Fu&&Fu.__exportStar||function(i,t){for(var e in i)e!=="default"&&!Object.prototype.hasOwnProperty.call(t,e)&&n(t,i,e)};Object.defineProperty(u,"__esModule",{value:!0}),o(RZ(),u)})(Fu)),Fu}var Du={},z0={},Nu={},X0={},UN;function IZ(){if(UN)return X0;UN=1,Object.defineProperty(X0,"__esModule",{value:!0}),X0.ActorRdfMetadata=void 0;const u=pe();let n=class extends u.Actor{constructor(i){super(i)}};return X0.ActorRdfMetadata=n,X0}var VN;function QN(){return VN||(VN=1,(function(u){var n=Nu&&Nu.__createBinding||(Object.create?(function(i,t,e,r){r===void 0&&(r=e);var a=Object.getOwnPropertyDescriptor(t,e);(!a||("get"in a?!t.__esModule:a.writable||a.configurable))&&(a={enumerable:!0,get:function(){return t[e]}}),Object.defineProperty(i,r,a)}):(function(i,t,e,r){r===void 0&&(r=e),i[r]=t[e]})),o=Nu&&Nu.__exportStar||function(i,t){for(var e in i)e!=="default"&&!Object.prototype.hasOwnProperty.call(t,e)&&n(t,i,e)};Object.defineProperty(u,"__esModule",{value:!0}),o(IZ(),u)})(Nu)),Nu}var HN;function PZ(){if(HN)return z0;HN=1,Object.defineProperty(z0,"__esModule",{value:!0}),z0.ActorRdfMetadataPrimaryTopic=void 0;const u=QN(),n=pe(),o=Pt();let i=class extends u.ActorRdfMetadata{constructor(e){super(e)}async test(e){return e.triples?(0,n.failTest)("This actor only supports non-triple quad streams."):(0,n.passTestVoid)()}async run(e){const r=new o.Readable({objectMode:!0}),a=new o.Readable({objectMode:!0}),c=()=>{r._read=a._read=()=>{},e.quads.on("error",f=>{r.emit("error",f),a.emit("error",f)});const s={};let d;const l={};e.quads.on("data",f=>{f.predicate.value==="http://rdfs.org/ns/void#subset"&&f.object.value===e.url?d=f.subject.value:f.predicate.value==="http://xmlns.com/foaf/0.1/primaryTopic"&&(l[f.object.value]=f.subject.value);let h=s[f.graph.value];h||(h=s[f.graph.value]=[]),h.push(f)}),e.quads.on("end",()=>{const f=d?l[d]:void 0;for(const h in s)if(h===f){for(const p of s[h])a.push(p);if(this.metadataToData)for(const p of s[h])r.push(p)}else{for(const p of s[h])r.push(p);if(!f&&this.dataToMetadataOnInvalidMetadataGraph)for(const p of s[h])a.push(p)}r.push(null),a.push(null)})};return r._read=a._read=()=>{c()},{data:r,metadata:a}}};return z0.ActorRdfMetadataPrimaryTopic=i,z0}var GN;function DZ(){return GN||(GN=1,(function(u){var n=Du&&Du.__createBinding||(Object.create?(function(i,t,e,r){r===void 0&&(r=e);var a=Object.getOwnPropertyDescriptor(t,e);(!a||("get"in a?!t.__esModule:a.writable||a.configurable))&&(a={enumerable:!0,get:function(){return t[e]}}),Object.defineProperty(i,r,a)}):(function(i,t,e,r){r===void 0&&(r=e),i[r]=t[e]})),o=Du&&Du.__exportStar||function(i,t){for(var e in i)e!=="default"&&!Object.prototype.hasOwnProperty.call(t,e)&&n(t,i,e)};Object.defineProperty(u,"__esModule",{value:!0}),o(PZ(),u)})(Du)),Du}var ju={},J0={},zN;function NZ(){if(zN)return J0;zN=1,Object.defineProperty(J0,"__esModule",{value:!0}),J0.ActorRdfMetadataAll=void 0;const u=QN(),n=pe(),o=Pt();let i=class extends u.ActorRdfMetadata{constructor(e){super(e)}async test(e){return(0,n.passTestVoid)()}async run(e){const r=new o.Readable({objectMode:!0}),a=new o.Readable({objectMode:!0});e.quads.on("error",s=>{r.emit("error",s),a.emit("error",s)}),e.quads.on("end",()=>{r.push(null),a.push(null)});const c=r._read=a._read=s=>{for(;s>0;){const d=e.quads.read();if(d===null)return e.quads.once("readable",()=>c(s));s--,r.push(d),a.push(d)}};return{data:r,metadata:a}}};return J0.ActorRdfMetadataAll=i,J0}var XN;function jZ(){return XN||(XN=1,(function(u){var n=ju&&ju.__createBinding||(Object.create?(function(i,t,e,r){r===void 0&&(r=e);var a=Object.getOwnPropertyDescriptor(t,e);(!a||("get"in a?!t.__esModule:a.writable||a.configurable))&&(a={enumerable:!0,get:function(){return t[e]}}),Object.defineProperty(i,r,a)}):(function(i,t,e,r){r===void 0&&(r=e),i[r]=t[e]})),o=ju&&ju.__exportStar||function(i,t){for(var e in i)e!=="default"&&!Object.prototype.hasOwnProperty.call(t,e)&&n(t,i,e)};Object.defineProperty(u,"__esModule",{value:!0}),o(NZ(),u)})(ju)),ju}var Lu={},K0={},Mu={},k0={},JN;function LZ(){if(JN)return k0;JN=1,Object.defineProperty(k0,"__esModule",{value:!0}),k0.ActorRdfMetadataAccumulate=void 0;const u=pe();let n=class extends u.Actor{constructor(i){super(i)}};return k0.ActorRdfMetadataAccumulate=n,k0}var KN;function EA(){return KN||(KN=1,(function(u){var n=Mu&&Mu.__createBinding||(Object.create?(function(i,t,e,r){r===void 0&&(r=e);var a=Object.getOwnPropertyDescriptor(t,e);(!a||("get"in a?!t.__esModule:a.writable||a.configurable))&&(a={enumerable:!0,get:function(){return t[e]}}),Object.defineProperty(i,r,a)}):(function(i,t,e,r){r===void 0&&(r=e),i[r]=t[e]})),o=Mu&&Mu.__exportStar||function(i,t){for(var e in i)e!=="default"&&!Object.prototype.hasOwnProperty.call(t,e)&&n(t,i,e)};Object.defineProperty(u,"__esModule",{value:!0}),o(LZ(),u)})(Mu)),Mu}var kN;function MZ(){if(kN)return K0;kN=1,Object.defineProperty(K0,"__esModule",{value:!0}),K0.ActorRdfMetadataAccumulateCardinality=void 0;const u=EA(),n=pe();let o=class extends u.ActorRdfMetadataAccumulate{constructor(t){super(t)}async test(t){return(0,n.passTestVoid)()}async run(t){if(t.mode==="initialize")return{metadata:{cardinality:{type:"exact",value:0}}};const e={...t.accumulatedMetadata.cardinality};if(e.dataset){if(t.accumulatedMetadata.defaultGraph===e.dataset&&e.dataset!==t.appendingMetadata.cardinality.dataset)return{metadata:{cardinality:t.appendingMetadata.cardinality}};if(t.appendingMetadata.cardinality.dataset){if(e.dataset!==t.appendingMetadata.cardinality.dataset&&t.appendingMetadata.subsetOf===e.dataset)return{metadata:{cardinality:t.appendingMetadata.cardinality}};if(e.dataset===t.appendingMetadata.cardinality.dataset)return{metadata:{cardinality:e}};delete e.dataset}else return{metadata:{cardinality:e}}}return!t.appendingMetadata.cardinality||!Number.isFinite(t.appendingMetadata.cardinality.value)?(e.type="estimate",e.value=Number.POSITIVE_INFINITY):(t.appendingMetadata.cardinality.type==="estimate"&&(e.type="estimate"),e.value+=t.appendingMetadata.cardinality.value),{metadata:{cardinality:e}}}};return K0.ActorRdfMetadataAccumulateCardinality=o,K0}var WN;function qZ(){return WN||(WN=1,(function(u){var n=Lu&&Lu.__createBinding||(Object.create?(function(i,t,e,r){r===void 0&&(r=e);var a=Object.getOwnPropertyDescriptor(t,e);(!a||("get"in a?!t.__esModule:a.writable||a.configurable))&&(a={enumerable:!0,get:function(){return t[e]}}),Object.defineProperty(i,r,a)}):(function(i,t,e,r){r===void 0&&(r=e),i[r]=t[e]})),o=Lu&&Lu.__exportStar||function(i,t){for(var e in i)e!=="default"&&!Object.prototype.hasOwnProperty.call(t,e)&&n(t,i,e)};Object.defineProperty(u,"__esModule",{value:!0}),o(MZ(),u)})(Lu)),Lu}var qu={},W0={},YN;function CZ(){if(YN)return W0;YN=1,Object.defineProperty(W0,"__esModule",{value:!0}),W0.ActorRdfMetadataAccumulatePageSize=void 0;const u=EA(),n=pe();let o=class extends u.ActorRdfMetadataAccumulate{constructor(t){super(t)}async test(t){return(0,n.passTestVoid)()}async run(t){return t.mode==="initialize"?{metadata:{}}:{metadata:{..."pageSize"in t.accumulatedMetadata||"pageSize"in t.appendingMetadata?{pageSize:(t.accumulatedMetadata.pageSize??0)+(t.appendingMetadata.pageSize??0)}:{}}}}};return W0.ActorRdfMetadataAccumulatePageSize=o,W0}var ZN;function BZ(){return ZN||(ZN=1,(function(u){var n=qu&&qu.__createBinding||(Object.create?(function(i,t,e,r){r===void 0&&(r=e);var a=Object.getOwnPropertyDescriptor(t,e);(!a||("get"in a?!t.__esModule:a.writable||a.configurable))&&(a={enumerable:!0,get:function(){return t[e]}}),Object.defineProperty(i,r,a)}):(function(i,t,e,r){r===void 0&&(r=e),i[r]=t[e]})),o=qu&&qu.__exportStar||function(i,t){for(var e in i)e!=="default"&&!Object.prototype.hasOwnProperty.call(t,e)&&n(t,i,e)};Object.defineProperty(u,"__esModule",{value:!0}),o(CZ(),u)})(qu)),qu}var Cu={},Y0={},e8;function $Z(){if(e8)return Y0;e8=1,Object.defineProperty(Y0,"__esModule",{value:!0}),Y0.ActorRdfMetadataAccumulateRequestTime=void 0;const u=EA(),n=pe();let o=class extends u.ActorRdfMetadataAccumulate{constructor(t){super(t)}async test(t){return(0,n.passTestVoid)()}async run(t){return t.mode==="initialize"?{metadata:{}}:{metadata:{..."requestTime"in t.accumulatedMetadata||"requestTime"in t.appendingMetadata?{requestTime:(t.accumulatedMetadata.requestTime??0)+(t.appendingMetadata.requestTime??0)}:{}}}}};return Y0.ActorRdfMetadataAccumulateRequestTime=o,Y0}var t8;function UZ(){return t8||(t8=1,(function(u){var n=Cu&&Cu.__createBinding||(Object.create?(function(i,t,e,r){r===void 0&&(r=e);var a=Object.getOwnPropertyDescriptor(t,e);(!a||("get"in a?!t.__esModule:a.writable||a.configurable))&&(a={enumerable:!0,get:function(){return t[e]}}),Object.defineProperty(i,r,a)}):(function(i,t,e,r){r===void 0&&(r=e),i[r]=t[e]})),o=Cu&&Cu.__exportStar||function(i,t){for(var e in i)e!=="default"&&!Object.prototype.hasOwnProperty.call(t,e)&&n(t,i,e)};Object.defineProperty(u,"__esModule",{value:!0}),o($Z(),u)})(Cu)),Cu}var Bu={},Z0={},$u={},e1={},r8;function VZ(){if(r8)return e1;r8=1,Object.defineProperty(e1,"__esModule",{value:!0}),e1.ActorRdfMetadataExtract=void 0;const u=pe();let n=class extends u.Actor{constructor(i){super(i)}};return e1.ActorRdfMetadataExtract=n,e1}var n8;function hi(){return n8||(n8=1,(function(u){var n=$u&&$u.__createBinding||(Object.create?(function(i,t,e,r){r===void 0&&(r=e);var a=Object.getOwnPropertyDescriptor(t,e);(!a||("get"in a?!t.__esModule:a.writable||a.configurable))&&(a={enumerable:!0,get:function(){return t[e]}}),Object.defineProperty(i,r,a)}):(function(i,t,e,r){r===void 0&&(r=e),i[r]=t[e]})),o=$u&&$u.__exportStar||function(i,t){for(var e in i)e!=="default"&&!Object.prototype.hasOwnProperty.call(t,e)&&n(t,i,e)};Object.defineProperty(u,"__esModule",{value:!0}),o(VZ(),u)})($u)),$u}var xA={exports:{}},i8;function QZ(){return i8||(i8=1,(function(u){(function(n){var o=(function(){function p(y){this.options=y}return p.prototype.toString=function(){return JSON&&JSON.stringify?JSON.stringify(this.options):this.options},p})(),i=(function(){function p(F){return Object.prototype.toString.apply(F)==="[object Array]"}function y(F){return Object.prototype.toString.apply(F)==="[object String]"}function _(F){return Object.prototype.toString.apply(F)==="[object Number]"}function b(F){return Object.prototype.toString.apply(F)==="[object Boolean]"}function m(F,M){var O="",w=!0,E;for(E=0;E<F.length;E+=1)w?w=!1:O+=M,O+=F[E];return O}function g(F,M){for(var O=[],w=0;w<F.length;w+=1)O.push(M(F[w]));return O}function T(F,M){for(var O=[],w=0;w<F.length;w+=1)M(F[w])&&O.push(F[w]);return O}function v(F){if(typeof F!="object"||F===null)return F;Object.freeze(F);var M,O;for(O in F)F.hasOwnProperty(O)&&(M=F[O],typeof M=="object"&&S(M));return F}function S(F){return typeof Object.freeze=="function"?v(F):F}return{isArray:p,isString:y,isNumber:_,isBoolean:b,join:m,map:g,filter:T,deepFreeze:S}})(),t=(function(){function p(b){return b>="a"&&b<="z"||b>="A"&&b<="Z"}function y(b){return b>="0"&&b<="9"}function _(b){return y(b)||b>="a"&&b<="f"||b>="A"&&b<="F"}return{isAlpha:p,isDigit:y,isHexDigit:_}})(),e=(function(){var p={encode:function(T){return unescape(encodeURIComponent(T))},numBytes:function(T){return T<=127?1:194<=T&&T<=223?2:224<=T&&T<=239?3:240<=T&&T<=244?4:0},isValidFollowingCharCode:function(T){return 128<=T&&T<=191}};function y(T){var v="",S=p.encode(T),F,M;for(M=0;M<S.length;M+=1)F=S.charCodeAt(M),v+="%"+(F<16?"0":"")+F.toString(16).toUpperCase();return v}function _(T,v){return T.charAt(v)==="%"&&t.isHexDigit(T.charAt(v+1))&&t.isHexDigit(T.charAt(v+2))}function b(T,v){return parseInt(T.substr(v,2),16)}function m(T){if(!_(T,0))return!1;var v=b(T,1),S=p.numBytes(v);if(S===0)return!1;for(var F=1;F<S;F+=1)if(!_(T,3*F)||!p.isValidFollowingCharCode(b(T,3*F+1)))return!1;return!0}function g(T,v){var S=T.charAt(v);if(!_(T,v))return S;var F=b(T,v+1),M=p.numBytes(F);if(M===0)return S;for(var O=1;O<M;O+=1)if(!_(T,v+3*O)||!p.isValidFollowingCharCode(b(T,v+3*O+1)))return S;return T.substr(v,3*M)}return{encodeCharacter:y,isPctEncoded:m,pctCharAt:g}})(),r=(function(){function p(b){return t.isAlpha(b)||t.isDigit(b)||b==="_"||e.isPctEncoded(b)}function y(b){return t.isAlpha(b)||t.isDigit(b)||b==="-"||b==="."||b==="_"||b==="~"}function _(b){return b===":"||b==="/"||b==="?"||b==="#"||b==="["||b==="]"||b==="@"||b==="!"||b==="$"||b==="&"||b==="("||b===")"||b==="*"||b==="+"||b===","||b===";"||b==="="||b==="'"}return{isVarchar:p,isUnreserved:y,isReserved:_}})(),a=(function(){function p(m,g){var T="",v,S="";for((typeof m=="number"||typeof m=="boolean")&&(m=m.toString()),v=0;v<m.length;v+=S.length)S=m.charAt(v),T+=r.isUnreserved(S)||g&&r.isReserved(S)?S:e.encodeCharacter(S);return T}function y(m){return p(m,!0)}function _(m,g){var T=e.pctCharAt(m,g);return T.length>1||r.isReserved(T)||r.isUnreserved(T)?T:e.encodeCharacter(T)}function b(m){var g="",T,v="";for(T=0;T<m.length;T+=v.length)v=e.pctCharAt(m,T),v.length>1?g+=v:g+=r.isReserved(v)||r.isUnreserved(v)?v:e.encodeCharacter(v);return g}return{encode:p,encodePassReserved:y,encodeLiteral:b,encodeLiteralCharacter:_}})(),c=(function(){var p={};function y(_){p[_]={symbol:_,separator:_==="?"?"&":_===""||_==="+"||_==="#"?",":_,named:_===";"||_==="&"||_==="?",ifEmpty:_==="&"||_==="?"?"=":"",first:_==="+"?"":_,encode:_==="+"||_==="#"?a.encodePassReserved:a.encode,toString:function(){return this.symbol}}}return y(""),y("+"),y("#"),y("."),y("/"),y(";"),y("?"),y("&"),{valueOf:function(_){return p[_]?p[_]:"=,!@|".indexOf(_)>=0?null:p[""]}}})();function s(p){var y;if(p==null)return!1;if(i.isArray(p))return p.length>0;if(typeof p=="string"||typeof p=="number"||typeof p=="boolean")return!0;for(y in p)if(p.hasOwnProperty(y)&&s(p[y]))return!0;return!1}var d=(function(){function p(y){this.literal=a.encodeLiteral(y)}return p.prototype.expand=function(){return this.literal},p.prototype.toString=p.prototype.expand,p})(),l=(function(){function p(_){var b,m=[],g=null,T=null,v=null,S,F="";function M(){var w=_.substring(T,S);if(w.length===0)throw new o({expressionText:_,message:"a varname must be specified",position:S});g={varname:w,exploded:!1,maxLength:null},T=null}function O(){if(v===S)throw new o({expressionText:_,message:"after a ':' you have to specify the length",position:S});g.maxLength=parseInt(_.substring(v,S),10),v=null}for(b=(function(w){var E=c.valueOf(w);if(E===null)throw new o({expressionText:_,message:"illegal use of reserved operator",position:S,operator:w});return E})(_.charAt(0)),S=b.symbol.length,T=S;S<_.length;S+=F.length){if(F=e.pctCharAt(_,S),T!==null){if(F==="."){if(T===S)throw new o({expressionText:_,message:"a varname MUST NOT start with a dot",position:S});continue}if(r.isVarchar(F))continue;M()}if(v!==null){if(S===v&&F==="0")throw new o({expressionText:_,message:"A :prefix must not start with digit 0",position:S});if(t.isDigit(F)){if(S-v>=4)throw new o({expressionText:_,message:"A :prefix must have max 4 digits",position:S});continue}O()}if(F===":"){if(g.maxLength!==null)throw new o({expressionText:_,message:"only one :maxLength is allowed per varspec",position:S});if(g.exploded)throw new o({expressionText:_,message:"an exploeded varspec MUST NOT be varspeced",position:S});v=S+1;continue}if(F==="*"){if(g===null)throw new o({expressionText:_,message:"exploded without varspec",position:S});if(g.exploded)throw new o({expressionText:_,message:"exploded twice",position:S});if(g.maxLength)throw new o({expressionText:_,message:"an explode (*) MUST NOT follow to a prefix",position:S});g.exploded=!0;continue}if(F===","){m.push(g),g=null,T=S+1;continue}throw new o({expressionText:_,message:"illegal character",character:F,position:S})}return T!==null&&M(),v!==null&&O(),m.push(g),new f(_,b,m)}function y(_){var b,m,g=[],T=null,v=0;for(b=0;b<_.length;b+=1){if(m=_.charAt(b),v!==null){if(m==="}")throw new o({templateText:_,message:"unopened brace closed",position:b});m==="{"&&(v<b&&g.push(new d(_.substring(v,b))),v=null,T=b);continue}if(T!==null){if(m==="{")throw new o({templateText:_,message:"brace already opened",position:b});if(m==="}"){if(T+1===b)throw new o({templateText:_,message:"empty braces",position:T});try{g.push(p(_.substring(T+1,b)))}catch(S){throw S.prototype===o.prototype?new o({templateText:_,message:S.options.message,position:T+S.options.position,details:S.options}):S}T=null,v=b+1}continue}throw new Error("reached unreachable code")}if(T!==null)throw new o({templateText:_,message:"unclosed brace",position:T});return v<_.length&&g.push(new d(_.substr(v))),new h(_,g)}return y})(),f=(function(){function p(F){return JSON&&JSON.stringify?JSON.stringify(F):F}function y(F){if(!s(F))return!0;if(i.isString(F))return F==="";if(i.isNumber(F)||i.isBoolean(F))return!1;if(i.isArray(F))return F.length===0;for(var M in F)if(F.hasOwnProperty(M))return!1;return!0}function _(F){var M=[],O;for(O in F)F.hasOwnProperty(O)&&M.push({name:O,value:F[O]});return M}function b(F,M,O){this.templateText=F,this.operator=M,this.varspecs=O}b.prototype.toString=function(){return this.templateText};function m(F,M,O){var w="";if(O=O.toString(),M.named){if(w+=a.encodeLiteral(F.varname),O==="")return w+=M.ifEmpty,w;w+="="}return F.maxLength!==null&&(O=O.substr(0,F.maxLength)),w+=M.encode(O),w}function g(F){return s(F.value)}function T(F,M,O){var w=[],E="";if(M.named){if(E+=a.encodeLiteral(F.varname),y(O))return E+=M.ifEmpty,E;E+="="}return i.isArray(O)?(w=O,w=i.filter(w,s),w=i.map(w,M.encode),E+=i.join(w,",")):(w=_(O),w=i.filter(w,g),w=i.map(w,function(R){return M.encode(R.name)+","+M.encode(R.value)}),E+=i.join(w,",")),E}function v(F,M,O){var w=i.isArray(O),E=[];return w?(E=O,E=i.filter(E,s),E=i.map(E,function(R){var D=a.encodeLiteral(F.varname);return y(R)?D+=M.ifEmpty:D+="="+M.encode(R),D})):(E=_(O),E=i.filter(E,g),E=i.map(E,function(R){var D=a.encodeLiteral(R.name);return y(R.value)?D+=M.ifEmpty:D+="="+M.encode(R.value),D})),i.join(E,M.separator)}function S(F,M){var O=[],w="";return i.isArray(M)?(O=M,O=i.filter(O,s),O=i.map(O,F.encode),w+=i.join(O,F.separator)):(O=_(M),O=i.filter(O,function(E){return s(E.value)}),O=i.map(O,function(E){return F.encode(E.name)+"="+F.encode(E.value)}),w+=i.join(O,F.separator)),w}return b.prototype.expand=function(F){var M=[],O,w,E,R=this.operator;for(O=0;O<this.varspecs.length;O+=1)if(w=this.varspecs[O],E=F[w.varname],E!=null)if(w.exploded,i.isArray(E),typeof E=="string"||typeof E=="number"||typeof E=="boolean")M.push(m(w,R,E));else{if(w.maxLength&&s(E))throw new Error("Prefix modifiers are not applicable to variables that have composite values. You tried to expand "+this+" with "+p(E));w.exploded?s(E)&&(R.named?M.push(v(w,R,E)):M.push(S(R,E))):(R.named||!y(E))&&M.push(T(w,R,E))}return M.length===0?"":R.first+i.join(M,R.separator)},b})(),h=(function(){function p(y,_){this.templateText=y,this.expressions=_,i.deepFreeze(this)}return p.prototype.toString=function(){return this.templateText},p.prototype.expand=function(y){var _,b="";for(_=0;_<this.expressions.length;_+=1)b+=this.expressions[_].expand(y);return b},p.parse=l,p.UriTemplateError=o,p})();n(h)})(function(n){u.exports=n})})(xA)),xA.exports}var a8;function HZ(){if(a8)return Z0;a8=1,Object.defineProperty(Z0,"__esModule",{value:!0}),Z0.ActorRdfMetadataExtractHydraControls=void 0;const u=hi(),n=pe(),o=QZ();let i=class qw extends u.ActorRdfMetadataExtract{constructor(e){super(e),this.parsedUriTemplateCache={}}async test(e){return(0,n.passTestVoid)()}getLinks(e,r){return Object.fromEntries(qw.LINK_TYPES.map(a=>{const c=r[a]||r[`${a}Page`],s=c&&c[e];return[a,s&&s.length>0?[s[0]]:[]]}))}parseUriTemplateCached(e){const r=this.parsedUriTemplateCache[e];return r||(this.parsedUriTemplateCache[e]=(0,o.parse)(e))}getSearchForms(e){const r=e.search,a=[];if(r)for(const c in r)for(const s of r[c]){const d=(e.template||{})[s]||[];if(d.length!==1)throw new Error(`Expected 1 hydra:template for ${s}`);const l=d[0],f=this.parseUriTemplateCached(l),h=Object.fromEntries(((e.mapping||{})[s]||[]).map(y=>{const _=((e.variable||{})[y]||[])[0],b=((e.property||{})[y]||[])[0];if(!_)throw new Error(`Expected a hydra:variable for ${y}`);if(!b)throw new Error(`Expected a hydra:property for ${y}`);return[b,_]})),p=y=>f.expand(Object.fromEntries(Object.keys(y).map(_=>[h[_],y[_]])));a.push({dataset:c,template:l,mappings:h,getUri:p})}return{values:a}}getHydraProperties(e){return new Promise((r,a)=>{e.on("error",a);const c={};e.on("data",s=>{if(s.predicate.value.startsWith(qw.HYDRA)){const d=s.predicate.value.slice(qw.HYDRA.length),l=c[d]||(c[d]={});(l[s.subject.value]||(l[s.subject.value]=[])).push(s.object.value)}}),e.on("end",()=>r(c))})}async run(e){const r={},a=await this.getHydraProperties(e.metadata);return Object.assign(r,this.getLinks(e.url,a)),r.searchForms=this.getSearchForms(a),{metadata:r}}};return Z0.ActorRdfMetadataExtractHydraControls=i,i.HYDRA="http://www.w3.org/ns/hydra/core#",i.LINK_TYPES=["first","next","previous","last"],Z0}var u8;function GZ(){return u8||(u8=1,(function(u){var n=Bu&&Bu.__createBinding||(Object.create?(function(i,t,e,r){r===void 0&&(r=e);var a=Object.getOwnPropertyDescriptor(t,e);(!a||("get"in a?!t.__esModule:a.writable||a.configurable))&&(a={enumerable:!0,get:function(){return t[e]}}),Object.defineProperty(i,r,a)}):(function(i,t,e,r){r===void 0&&(r=e),i[r]=t[e]})),o=Bu&&Bu.__exportStar||function(i,t){for(var e in i)e!=="default"&&!Object.prototype.hasOwnProperty.call(t,e)&&n(t,i,e)};Object.defineProperty(u,"__esModule",{value:!0}),o(HZ(),u)})(Bu)),Bu}var Uu={},t1={},o8;function zZ(){if(o8)return t1;o8=1,Object.defineProperty(t1,"__esModule",{value:!0}),t1.ActorRdfMetadataExtractHydraCount=void 0;const u=hi(),n=pe();let o=class extends u.ActorRdfMetadataExtract{constructor(t){super(t)}async test(t){return(0,n.passTestVoid)()}run(t){return new Promise((e,r)=>{t.metadata.on("error",r),t.metadata.on("data",a=>{this.predicates.includes(a.predicate.value)&&e({metadata:{cardinality:{type:"estimate",value:Number.parseInt(a.object.value,10),dataset:a.subject.value}}})}),t.metadata.on("end",()=>{e({metadata:{cardinality:{type:"estimate",value:0}}})})})}};return t1.ActorRdfMetadataExtractHydraCount=o,t1}var s8;function XZ(){return s8||(s8=1,(function(u){var n=Uu&&Uu.__createBinding||(Object.create?(function(i,t,e,r){r===void 0&&(r=e);var a=Object.getOwnPropertyDescriptor(t,e);(!a||("get"in a?!t.__esModule:a.writable||a.configurable))&&(a={enumerable:!0,get:function(){return t[e]}}),Object.defineProperty(i,r,a)}):(function(i,t,e,r){r===void 0&&(r=e),i[r]=t[e]})),o=Uu&&Uu.__exportStar||function(i,t){for(var e in i)e!=="default"&&!Object.prototype.hasOwnProperty.call(t,e)&&n(t,i,e)};Object.defineProperty(u,"__esModule",{value:!0}),o(zZ(),u)})(Uu)),Uu}var Vu={},r1={},c8;function JZ(){if(c8)return r1;c8=1,Object.defineProperty(r1,"__esModule",{value:!0}),r1.ActorRdfMetadataExtractHydraPagesize=void 0;const u=hi(),n=pe();let o=class extends u.ActorRdfMetadataExtract{constructor(t){super(t)}async test(t){return(0,n.passTestVoid)()}async run(t){return new Promise((e,r)=>{t.metadata.on("error",r),t.metadata.on("data",a=>{this.predicates.includes(a.predicate.value)&&e({metadata:{pageSize:Number.parseInt(a.object.value,10)}})}),t.metadata.on("end",()=>{e({metadata:{}})})})}};return r1.ActorRdfMetadataExtractHydraPagesize=o,r1}var d8;function KZ(){return d8||(d8=1,(function(u){var n=Vu&&Vu.__createBinding||(Object.create?(function(i,t,e,r){r===void 0&&(r=e);var a=Object.getOwnPropertyDescriptor(t,e);(!a||("get"in a?!t.__esModule:a.writable||a.configurable))&&(a={enumerable:!0,get:function(){return t[e]}}),Object.defineProperty(i,r,a)}):(function(i,t,e,r){r===void 0&&(r=e),i[r]=t[e]})),o=Vu&&Vu.__exportStar||function(i,t){for(var e in i)e!=="default"&&!Object.prototype.hasOwnProperty.call(t,e)&&n(t,i,e)};Object.defineProperty(u,"__esModule",{value:!0}),o(JZ(),u)})(Vu)),Vu}var Qu={},n1={},l8;function kZ(){if(l8)return n1;l8=1,Object.defineProperty(n1,"__esModule",{value:!0}),n1.ActorRdfMetadataExtractRequestTime=void 0;const u=hi(),n=pe();let o=class extends u.ActorRdfMetadataExtract{constructor(t){super(t)}async test(t){return(0,n.passTestVoid)()}async run(t){return{metadata:{requestTime:t.requestTime}}}};return n1.ActorRdfMetadataExtractRequestTime=o,n1}var f8;function WZ(){return f8||(f8=1,(function(u){var n=Qu&&Qu.__createBinding||(Object.create?(function(i,t,e,r){r===void 0&&(r=e);var a=Object.getOwnPropertyDescriptor(t,e);(!a||("get"in a?!t.__esModule:a.writable||a.configurable))&&(a={enumerable:!0,get:function(){return t[e]}}),Object.defineProperty(i,r,a)}):(function(i,t,e,r){r===void 0&&(r=e),i[r]=t[e]})),o=Qu&&Qu.__exportStar||function(i,t){for(var e in i)e!=="default"&&!Object.prototype.hasOwnProperty.call(t,e)&&n(t,i,e)};Object.defineProperty(u,"__esModule",{value:!0}),o(kZ(),u)})(Qu)),Qu}var Hu={},i1={},h8;function YZ(){if(h8)return i1;h8=1,Object.defineProperty(i1,"__esModule",{value:!0}),i1.ActorRdfMetadataExtractAllowHttpMethods=void 0;const u=hi(),n=pe();let o=class extends u.ActorRdfMetadataExtract{constructor(t){super(t)}async test(t){return(0,n.passTestVoid)()}async run(t){var r,a;const e={};return(r=t.headers)!=null&&r.get("allow")&&(e.allowHttpMethods=(a=t.headers.get("allow"))==null?void 0:a.split(/, */u)),{metadata:e}}};return i1.ActorRdfMetadataExtractAllowHttpMethods=o,i1}var p8;function ZZ(){return p8||(p8=1,(function(u){var n=Hu&&Hu.__createBinding||(Object.create?(function(i,t,e,r){r===void 0&&(r=e);var a=Object.getOwnPropertyDescriptor(t,e);(!a||("get"in a?!t.__esModule:a.writable||a.configurable))&&(a={enumerable:!0,get:function(){return t[e]}}),Object.defineProperty(i,r,a)}):(function(i,t,e,r){r===void 0&&(r=e),i[r]=t[e]})),o=Hu&&Hu.__exportStar||function(i,t){for(var e in i)e!=="default"&&!Object.prototype.hasOwnProperty.call(t,e)&&n(t,i,e)};Object.defineProperty(u,"__esModule",{value:!0}),o(YZ(),u)})(Hu)),Hu}var Gu={},a1={},y8;function eee(){if(y8)return a1;y8=1,Object.defineProperty(a1,"__esModule",{value:!0}),a1.ActorRdfMetadataExtractPutAccepted=void 0;const u=hi(),n=pe();let o=class extends u.ActorRdfMetadataExtract{constructor(t){super(t)}async test(t){return(0,n.passTestVoid)()}async run(t){var r,a;const e={};return(r=t.headers)!=null&&r.get("accept-put")&&(e.putAccepted=(a=t.headers.get("accept-put"))==null?void 0:a.split(/, */u)),{metadata:e}}};return a1.ActorRdfMetadataExtractPutAccepted=o,a1}var b8;function tee(){return b8||(b8=1,(function(u){var n=Gu&&Gu.__createBinding||(Object.create?(function(i,t,e,r){r===void 0&&(r=e);var a=Object.getOwnPropertyDescriptor(t,e);(!a||("get"in a?!t.__esModule:a.writable||a.configurable))&&(a={enumerable:!0,get:function(){return t[e]}}),Object.defineProperty(i,r,a)}):(function(i,t,e,r){r===void 0&&(r=e),i[r]=t[e]})),o=Gu&&Gu.__exportStar||function(i,t){for(var e in i)e!=="default"&&!Object.prototype.hasOwnProperty.call(t,e)&&n(t,i,e)};Object.defineProperty(u,"__esModule",{value:!0}),o(eee(),u)})(Gu)),Gu}var zu={},u1={},_8;function ree(){if(_8)return u1;_8=1,Object.defineProperty(u1,"__esModule",{value:!0}),u1.ActorRdfMetadataExtractPatchSparqlUpdate=void 0;const u=hi(),n=pe();let o=class extends u.ActorRdfMetadataExtract{constructor(t){super(t)}async test(t){return(0,n.passTestVoid)()}async run(t){var r,a,c,s;const e={};return(((a=(r=t.headers)==null?void 0:r.get("accept-patch"))==null?void 0:a.includes("application/sparql-update"))??((s=(c=t.headers)==null?void 0:c.get("ms-author-via"))==null?void 0:s.includes("SPARQL")))&&(e.patchSparqlUpdate=!0),{metadata:e}}};return u1.ActorRdfMetadataExtractPatchSparqlUpdate=o,u1}var g8;function nee(){return g8||(g8=1,(function(u){var n=zu&&zu.__createBinding||(Object.create?(function(i,t,e,r){r===void 0&&(r=e);var a=Object.getOwnPropertyDescriptor(t,e);(!a||("get"in a?!t.__esModule:a.writable||a.configurable))&&(a={enumerable:!0,get:function(){return t[e]}}),Object.defineProperty(i,r,a)}):(function(i,t,e,r){r===void 0&&(r=e),i[r]=t[e]})),o=zu&&zu.__exportStar||function(i,t){for(var e in i)e!=="default"&&!Object.prototype.hasOwnProperty.call(t,e)&&n(t,i,e)};Object.defineProperty(u,"__esModule",{value:!0}),o(ree(),u)})(zu)),zu}var Xu={},o1={},m8;function iee(){if(m8)return o1;m8=1,Object.defineProperty(o1,"__esModule",{value:!0}),o1.ActorRdfMetadataExtractSparqlService=void 0;const u=hi(),n=pe(),o=Jr();let i=class extends u.ActorRdfMetadataExtract{constructor(e){super(e)}async test(e){return(0,n.passTestVoid)()}async run(e){return new Promise((r,a)=>{e.metadata.on("error",a);const c=new Set([e.url]),s={},d=new Set,l=new Set,f=new Set;e.metadata.on("data",h=>{if(h.predicate.value==="http://rdfs.org/ns/void#subset"&&h.object.value===e.url)c.add(h.subject.value);else if(h.subject.value===s.defaultDataset||h.subject.termType==="BlankNode"||c.has(h.subject.value))switch(h.predicate.value){case"http://www.w3.org/ns/sparql-service-description#endpoint":s.sparqlService=h.object.termType==="Literal"?(0,o.resolve)(h.object.value,e.url):h.object.value,this.inferHttpsEndpoint&&e.url.startsWith("https")&&!h.object.value.startsWith("https")&&(s.sparqlService=s.sparqlService.replace(/^http:/u,"https:"));break;case"http://www.w3.org/ns/sparql-service-description#defaultDataset":s.defaultDataset=h.object.value;break;case"http://www.w3.org/ns/sparql-service-description#defaultGraph":s.defaultGraph=h.object.value;break;case"http://www.w3.org/ns/sparql-service-description#inputFormat":d.add(h.object.value);break;case"http://www.w3.org/ns/sparql-service-description#resultFormat":l.add(h.object.value);break;case"http://www.w3.org/ns/sparql-service-description#supportedLanguage":f.add(h.object.value);break;case"http://www.w3.org/ns/sparql-service-description#feature":h.object.value==="http://www.w3.org/ns/sparql-service-description#UnionDefaultGraph"?s.unionDefaultGraph=!0:h.object.value==="http://www.w3.org/ns/sparql-service-description#BasicFederatedQuery"&&(s.basicFederatedQuery=!0);break}}),e.metadata.on("end",()=>{r({metadata:{...s,...d.size>0?{inputFormats:[...d.values()]}:{},...l.size>0?{resultFormats:[...l.values()]}:{},...f.size>0?{supportedLanguages:[...f.values()]}:{}}})})})}};return o1.ActorRdfMetadataExtractSparqlService=i,o1}var v8;function aee(){return v8||(v8=1,(function(u){var n=Xu&&Xu.__createBinding||(Object.create?(function(i,t,e,r){r===void 0&&(r=e);var a=Object.getOwnPropertyDescriptor(t,e);(!a||("get"in a?!t.__esModule:a.writable||a.configurable))&&(a={enumerable:!0,get:function(){return t[e]}}),Object.defineProperty(i,r,a)}):(function(i,t,e,r){r===void 0&&(r=e),i[r]=t[e]})),o=Xu&&Xu.__exportStar||function(i,t){for(var e in i)e!=="default"&&!Object.prototype.hasOwnProperty.call(t,e)&&n(t,i,e)};Object.defineProperty(u,"__esModule",{value:!0}),o(iee(),u)})(Xu)),Xu}var Ju={},s1={},RA={},T8;function w8(){return T8||(T8=1,(function(u){Object.defineProperty(u,"__esModule",{value:!0}),u.VOID_CLASS_PARTITION=u.VOID_PROPERTY_PARTITION=u.VOID_DISTINCT_SUBJECTS=u.VOID_DISTINCT_OBJECTS=u.VOID_URI_REGEX_PATTERN=u.VOID_URI_SPACE=u.VOID_VOCABULARY=u.VOID_PROPERTY=u.VOID_CLASS=u.VOID_ENTITIES=u.VOID_TRIPLES=u.VOID_CLASSES=u.VOID_DATASET=u.VOID=u.SD_GRAPH=u.SD_FEATURE=u.SD_UNION_DEFAULT_GRAPH=u.SD_DEFAULT_GRAPH=u.SD_DEFAULT_DATASET=u.SD=u.RDF_TYPE=void 0,u.RDF_TYPE="http://www.w3.org/1999/02/22-rdf-syntax-ns#type",u.SD="http://www.w3.org/ns/sparql-service-description#",u.SD_DEFAULT_DATASET=`${u.SD}defaultDataset`,u.SD_DEFAULT_GRAPH=`${u.SD}defaultGraph`,u.SD_UNION_DEFAULT_GRAPH=`${u.SD}UnionDefaultGraph`,u.SD_FEATURE=`${u.SD}feature`,u.SD_GRAPH=`${u.SD}Graph`,u.VOID="http://rdfs.org/ns/void#",u.VOID_DATASET=`${u.VOID}Dataset`,u.VOID_CLASSES=`${u.VOID}classes`,u.VOID_TRIPLES=`${u.VOID}triples`,u.VOID_ENTITIES=`${u.VOID}entities`,u.VOID_CLASS=`${u.VOID}class`,u.VOID_PROPERTY=`${u.VOID}property`,u.VOID_VOCABULARY=`${u.VOID}vocabulary`,u.VOID_URI_SPACE=`${u.VOID}uriSpace`,u.VOID_URI_REGEX_PATTERN=`${u.VOID}uriRegexPattern`,u.VOID_DISTINCT_OBJECTS=`${u.VOID}distinctSubjects`,u.VOID_DISTINCT_SUBJECTS=`${u.VOID}distinctObjects`,u.VOID_PROPERTY_PARTITION=`${u.VOID}propertyPartition`,u.VOID_CLASS_PARTITION=`${u.VOID}classPartition`})(RA)),RA}var rr={},S8;function uee(){if(S8)return rr;S8=1,Object.defineProperty(rr,"__esModule",{value:!0}),rr.getClassPartitionEntities=rr.getPredicateTriples=rr.getPredicateSubjects=rr.getPredicateObjects=rr.getDistinctSubjects=rr.getDistinctObjects=rr.estimatePatternCardinalityRaw=rr.matchPatternVocabularies=rr.matchPatternResourceUris=rr.estimatePatternCardinality=void 0;const u=w8();function n(l,f){const h={type:"exact",value:0};if(i(l,f)&&o(l,f)){const p=t(l,f);p>0&&(h.value=p,h.type="estimate")}return h}rr.estimatePatternCardinality=n;function o(l,f){return!l.uriRegexPattern||f.subject.termType!=="NamedNode"||l.uriRegexPattern.test(f.subject.value)||f.object.termType!=="NamedNode"||l.uriRegexPattern.test(f.object.value)}rr.matchPatternResourceUris=o;function i(l,f){return l.vocabularies!==void 0&&f.predicate.termType==="NamedNode"?l.vocabularies.some(h=>f.predicate.value.startsWith(h)):!0}rr.matchPatternVocabularies=i;function t(l,f){if(f.subject.termType==="Variable"&&f.predicate.termType==="NamedNode"&&f.predicate.value===u.RDF_TYPE&&(f.object.termType==="NamedNode"||f.object.termType==="BlankNode"))return d(l,f.object);if(f.subject.termType==="Variable"&&f.predicate.termType==="Variable"&&f.object.termType==="Variable")return l.triples;if((f.subject.termType==="NamedNode"||f.subject.termType==="BlankNode")&&f.predicate.termType==="Variable"&&(f.object.termType==="Variable"||f.object.termType==="Literal")){const h=r(l);if(h>0)return l.triples/h}if(f.subject.termType==="Variable"&&f.predicate.termType==="NamedNode"&&(f.object.termType==="Variable"||f.object.termType==="Literal"))return s(l,f.predicate);if(f.subject.termType==="Variable"&&f.predicate.termType==="Variable"&&(f.object.termType==="NamedNode"||f.object.termType==="BlankNode"||f.object.termType==="Literal")){const h=e(l);if(h>0)return l.triples/h}if((f.subject.termType==="NamedNode"||f.subject.termType==="BlankNode")&&f.predicate.termType==="NamedNode"&&(f.object.termType==="Variable"||f.object.termType==="Literal")){const h=s(l,f.predicate),p=c(l,f.predicate);return p>0?h/p:h}if((f.subject.termType==="NamedNode"||f.subject.termType==="BlankNode")&&f.predicate.termType==="Variable"&&(f.object.termType==="NamedNode"||f.object.termType==="BlankNode")){const h=r(l),p=e(l);if(h>0&&p>0)return l.triples/(h*p)}if(f.subject.termType==="Variable"&&f.predicate.termType==="NamedNode"&&(f.object.termType==="NamedNode"||f.object.termType==="BlankNode")){const h=s(l,f.predicate),p=a(l,f.predicate);return p>0?h/p:h}if((f.subject.termType==="NamedNode"||f.subject.termType==="BlankNode")&&f.predicate.termType==="NamedNode"&&(f.object.termType==="NamedNode"||f.object.termType==="BlankNode")){const h=s(l,f.predicate),p=c(l,f.predicate),y=a(l,f.predicate);return p>0&&y>0?h/(p*y):h}return l.triples}rr.estimatePatternCardinalityRaw=t;function e(l){return l.distinctObjects??l.entities??l.triples}rr.getDistinctObjects=e;function r(l){return l.distinctSubjects??l.entities??l.triples}rr.getDistinctSubjects=r;function a(l,f){if(l.propertyPartitions){const h=l.propertyPartitions[f.value];return(h==null?void 0:h.distinctObjects)??(h==null?void 0:h.triples)??0}return l.triples}rr.getPredicateObjects=a;function c(l,f){if(l.propertyPartitions){const h=l.propertyPartitions[f.value];return(h==null?void 0:h.distinctSubjects)??(h==null?void 0:h.triples)??0}return l.triples}rr.getPredicateSubjects=c;function s(l,f){var h;return l.propertyPartitions?((h=l.propertyPartitions[f.value])==null?void 0:h.triples)??0:l.triples}rr.getPredicateTriples=s;function d(l,f){var h;return l.classPartitions?((h=l.classPartitions[f.value])==null?void 0:h.entities)??0:l.entities!==void 0&&l.classes?l.entities/l.classes:l.triples}return rr.getClassPartitionEntities=d,rr}var O8;function oee(){if(O8)return s1;O8=1,Object.defineProperty(s1,"__esModule",{value:!0}),s1.ActorRdfMetadataExtractVoid=void 0;const u=hi(),n=pe(),o=st(),i=w8(),t=uee();let e=class extends u.ActorRdfMetadataExtract{constructor(a){super(a)}async test(a){return(0,n.passTestVoid)()}async run(a){return new Promise((c,s)=>{const d=new Set,l=new Set,f={},h={},p={},y={},_={},b={},m={},g={},T={},v={},S={};let F,M,O=!1;a.metadata.on("error",s).on("data",w=>{switch(w.predicate.value){case i.RDF_TYPE:(w.object.value===i.SD_GRAPH||w.object.value===i.VOID_DATASET)&&d.add(w.subject.value);break;case i.VOID_TRIPLES:f[w.subject.value]=Number.parseInt(w.object.value,10);break;case i.VOID_ENTITIES:h[w.subject.value]=Number.parseInt(w.object.value,10);break;case i.VOID_CLASSES:y[w.subject.value]=Number.parseInt(w.object.value,10);break;case i.VOID_CLASS:S[w.subject.value]=w.object.value;break;case i.VOID_PROPERTY:T[w.subject.value]=w.object.value;break;case i.VOID_DISTINCT_OBJECTS:_[w.subject.value]=Number.parseInt(w.object.value,10);break;case i.VOID_DISTINCT_SUBJECTS:b[w.subject.value]=Number.parseInt(w.object.value,10);break;case i.VOID_VOCABULARY:p[w.subject.value]?p[w.subject.value].push(w.object.value):p[w.subject.value]=[w.object.value];break;case i.VOID_URI_SPACE:m[w.subject.value]||(m[w.subject.value]=new RegExp(`^${w.object.value}`,"u"));break;case i.VOID_URI_REGEX_PATTERN:m[w.subject.value]=new RegExp(w.object.value,"u");break;case i.VOID_PROPERTY_PARTITION:l.add(w.object.value),g[w.subject.value]?g[w.subject.value].push(w.object.value):g[w.subject.value]=[w.object.value];break;case i.VOID_CLASS_PARTITION:l.add(w.object.value),v[w.subject.value]?v[w.subject.value].push(w.object.value):v[w.subject.value]=[w.object.value];break;case i.SD_DEFAULT_DATASET:F=w.object.value;break;case i.SD_DEFAULT_GRAPH:M=w.object.value;break;case i.SD_FEATURE:w.object.value===i.SD_UNION_DEFAULT_GRAPH&&(O=!0);break}}).on("end",()=>{var D;const w=[],E=B=>{const C={};for(const $ of g[B]){const Z=T[$];Z&&(C[Z]={distinctObjects:_[$],distinctSubjects:b[$],triples:f[$]})}return C},R=B=>{const C={};for(const $ of v[B]){const Z=S[$];Z&&(C[Z]={entities:h[$],propertyPartitions:g[$]?E($):void 0})}return C};F&&l.add(F),O&&M&&l.add(M),F&&M&&p[F]&&(p[M]=[...p[M]??[],...p[F]]);for(const B of l)d.delete(B);for(const B of d)if(f[B]){const C={entities:h[B],identifier:B,classes:y[B]??((D=v[B])==null?void 0:D.length)??0,classPartitions:v[B]?R(B):void 0,distinctObjects:_[B],distinctSubjects:b[B],propertyPartitions:g[B]?E(B):void 0,triples:f[B],uriRegexPattern:m[B],vocabularies:p[B]};w.push({uri:B,source:a.url,getCardinality:$=>{if($.type===o.Algebra.types.PATTERN)return{...(0,t.estimatePatternCardinality)(C,$),dataset:B}}})}c({metadata:w.length>0?{datasets:w}:{}})})})}};return s1.ActorRdfMetadataExtractVoid=e,s1}var A8;function see(){return A8||(A8=1,(function(u){var n=Ju&&Ju.__createBinding||(Object.create?(function(i,t,e,r){r===void 0&&(r=e);var a=Object.getOwnPropertyDescriptor(t,e);(!a||("get"in a?!t.__esModule:a.writable||a.configurable))&&(a={enumerable:!0,get:function(){return t[e]}}),Object.defineProperty(i,r,a)}):(function(i,t,e,r){r===void 0&&(r=e),i[r]=t[e]})),o=Ju&&Ju.__exportStar||function(i,t){for(var e in i)e!=="default"&&!Object.prototype.hasOwnProperty.call(t,e)&&n(t,i,e)};Object.defineProperty(u,"__esModule",{value:!0}),o(oee(),u)})(Ju)),Ju}var Ku={},c1={},ku={},d1={},E8;function cee(){if(E8)return d1;E8=1,Object.defineProperty(d1,"__esModule",{value:!0}),d1.ActorRdfParse=void 0;const u=yf();let n=class extends u.ActorAbstractMediaTyped{constructor(i){super(i)}};return d1.ActorRdfParse=n,d1}var l1={},x8;function dee(){if(x8)return l1;x8=1,Object.defineProperty(l1,"__esModule",{value:!0}),l1.ActorRdfParseFixedMediaTypes=void 0;const u=yf(),n=pe();let o=class extends u.ActorAbstractMediaTypedFixed{constructor(t){super(t)}async testHandleChecked(t){return(0,n.passTestVoid)()}};return l1.ActorRdfParseFixedMediaTypes=o,l1}var R8;function mf(){return R8||(R8=1,(function(u){var n=ku&&ku.__createBinding||(Object.create?(function(i,t,e,r){r===void 0&&(r=e);var a=Object.getOwnPropertyDescriptor(t,e);(!a||("get"in a?!t.__esModule:a.writable||a.configurable))&&(a={enumerable:!0,get:function(){return t[e]}}),Object.defineProperty(i,r,a)}):(function(i,t,e,r){r===void 0&&(r=e),i[r]=t[e]})),o=ku&&ku.__exportStar||function(i,t){for(var e in i)e!=="default"&&!Object.prototype.hasOwnProperty.call(t,e)&&n(t,i,e)};Object.defineProperty(u,"__esModule",{value:!0}),o(cee(),u),o(dee(),u)})(ku)),ku}var lee=kn();const f1="http://www.w3.org/1999/02/22-rdf-syntax-ns#",h1="http://www.w3.org/2001/XMLSchema#",S3="http://www.w3.org/2000/10/swap/";var Or={xsd:{decimal:`${h1}decimal`,boolean:`${h1}boolean`,double:`${h1}double`,integer:`${h1}integer`,string:`${h1}string`},rdf:{type:`${f1}type`,nil:`${f1}nil`,first:`${f1}first`,rest:`${f1}rest`,langString:`${f1}langString`},owl:{sameAs:"http://www.w3.org/2002/07/owl#sameAs"},r:{forSome:`${S3}reify#forSome`,forAll:`${S3}reify#forAll`},log:{implies:`${S3}log#implies`,isImpliedBy:`${S3}log#isImpliedBy`}};const{xsd:O3}=Or,fee=/\\u([a-fA-F0-9]{4})|\\U([a-fA-F0-9]{8})|\\([^])/g,F8={"\\":"\\","'":"'",'"':'"',n:`
`,r:"\r",t:"	",f:"\f",b:"\b",_:"_","~":"~",".":".","-":"-","!":"!",$:"$","&":"&","(":"(",")":")","*":"*","+":"+",",":",",";":";","=":"=","/":"/","?":"?","#":"#","@":"@","%":"%"},hee=/[\x00-\x20<>\\"\{\}\|\^\`]/,pee={_iri:!0,_unescapedIri:!0,_simpleQuotedString:!0,_langcode:!0,_blank:!0,_newline:!0,_comment:!0,_whitespace:!0,_endOfFile:!0},yee=/$0^/;class FA{constructor(n){if(this._iri=/^<((?:[^ <>{}\\]|\\[uU])+)>[ \t]*/,this._unescapedIri=/^<([^\x00-\x20<>\\"\{\}\|\^\`]*)>[ \t]*/,this._simpleQuotedString=/^"([^"\\\r\n]*)"(?=[^"])/,this._simpleApostropheString=/^'([^'\\\r\n]*)'(?=[^'])/,this._langcode=/^@([a-z]+(?:-[a-z0-9]+)*)(?=[^a-z0-9\-])/i,this._prefix=/^((?:[A-Za-z\xc0-\xd6\xd8-\xf6\xf8-\u02ff\u0370-\u037d\u037f-\u1fff\u200c\u200d\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]|[\ud800-\udb7f][\udc00-\udfff])(?:\.?[\-0-9A-Z_a-z\xb7\xc0-\xd6\xd8-\xf6\xf8-\u037d\u037f-\u1fff\u200c\u200d\u203f\u2040\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]|[\ud800-\udb7f][\udc00-\udfff])*)?:(?=[#\s<])/,this._prefixed=/^((?:[A-Za-z\xc0-\xd6\xd8-\xf6\xf8-\u02ff\u0370-\u037d\u037f-\u1fff\u200c\u200d\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]|[\ud800-\udb7f][\udc00-\udfff])(?:\.?[\-0-9A-Z_a-z\xb7\xc0-\xd6\xd8-\xf6\xf8-\u037d\u037f-\u1fff\u200c\u200d\u203f\u2040\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]|[\ud800-\udb7f][\udc00-\udfff])*)?:((?:(?:[0-:A-Z_a-z\xc0-\xd6\xd8-\xf6\xf8-\u02ff\u0370-\u037d\u037f-\u1fff\u200c\u200d\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]|[\ud800-\udb7f][\udc00-\udfff]|%[0-9a-fA-F]{2}|\\[!#-\/;=?\-@_~])(?:(?:[\.\-0-:A-Z_a-z\xb7\xc0-\xd6\xd8-\xf6\xf8-\u037d\u037f-\u1fff\u200c\u200d\u203f\u2040\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]|[\ud800-\udb7f][\udc00-\udfff]|%[0-9a-fA-F]{2}|\\[!#-\/;=?\-@_~])*(?:[\-0-:A-Z_a-z\xb7\xc0-\xd6\xd8-\xf6\xf8-\u037d\u037f-\u1fff\u200c\u200d\u203f\u2040\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]|[\ud800-\udb7f][\udc00-\udfff]|%[0-9a-fA-F]{2}|\\[!#-\/;=?\-@_~]))?)?)(?:[ \t]+|(?=\.?[,;!\^\s#()\[\]\{\}"'<>]))/,this._variable=/^\?(?:(?:[A-Z_a-z\xc0-\xd6\xd8-\xf6\xf8-\u02ff\u0370-\u037d\u037f-\u1fff\u200c\u200d\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]|[\ud800-\udb7f][\udc00-\udfff])(?:[\-0-:A-Z_a-z\xb7\xc0-\xd6\xd8-\xf6\xf8-\u037d\u037f-\u1fff\u200c\u200d\u203f\u2040\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]|[\ud800-\udb7f][\udc00-\udfff])*)(?=[.,;!\^\s#()\[\]\{\}"'<>])/,this._blank=/^_:((?:[0-9A-Z_a-z\xc0-\xd6\xd8-\xf6\xf8-\u02ff\u0370-\u037d\u037f-\u1fff\u200c\u200d\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]|[\ud800-\udb7f][\udc00-\udfff])(?:\.?[\-0-9A-Z_a-z\xb7\xc0-\xd6\xd8-\xf6\xf8-\u037d\u037f-\u1fff\u200c\u200d\u203f\u2040\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]|[\ud800-\udb7f][\udc00-\udfff])*)(?:[ \t]+|(?=\.?[,;:\s#()\[\]\{\}"'<>]))/,this._number=/^[\-+]?(?:(\d+\.\d*|\.?\d+)[eE][\-+]?|\d*(\.)?)\d+(?=\.?[,;:\s#()\[\]\{\}"'<>])/,this._boolean=/^(?:true|false)(?=[.,;\s#()\[\]\{\}"'<>])/,this._keyword=/^@[a-z]+(?=[\s#<:])/i,this._sparqlKeyword=/^(?:PREFIX|BASE|GRAPH)(?=[\s#<])/i,this._shortPredicates=/^a(?=[\s#()\[\]\{\}"'<>])/,this._newline=/^[ \t]*(?:#[^\n\r]*)?(?:\r\n|\n|\r)[ \t]*/,this._comment=/#([^\n\r]*)/,this._whitespace=/^[ \t]+/,this._endOfFile=/^(?:#[^\n\r]*)?$/,n=n||{},this._isImpliedBy=n.isImpliedBy,this._lineMode=!!n.lineMode){this._n3Mode=!1;for(const o in this)!(o in pee)&&this[o]instanceof RegExp&&(this[o]=yee)}else this._n3Mode=n.n3!==!1;this.comments=!!n.comments,this._literalClosingPos=0}_tokenizeToEnd(n,o){let i=this._input,t=i.length;for(;;){let a,c;for(;a=this._newline.exec(i);)this.comments&&(c=this._comment.exec(a[0]))&&e("comment",c[1],"",this._line,a[0].length),i=i.substr(a[0].length,i.length),t=i.length,this._line++;if(!a&&(a=this._whitespace.exec(i))&&(i=i.substr(a[0].length,i.length)),this._endOfFile.test(i))return o&&(this.comments&&(c=this._comment.exec(i))&&e("comment",c[1],"",this._line,i.length),i=null,e("eof","","",this._line,0)),this._input=i;const s=this._line,d=i[0];let l="",f="",h="",p=null,y=0,_=!1;switch(d){case"^":if(i.length<3)break;if(i[1]==="^"){if(this._previousMarker="^^",i=i.substr(2),i[0]!=="<"){_=!0;break}}else{this._n3Mode&&(y=1,l="^");break}case"<":if(p=this._unescapedIri.exec(i))l="IRI",f=p[1];else if(p=this._iri.exec(i)){if(f=this._unescape(p[1]),f===null||hee.test(f))return r(this);l="IRI"}else i.length>1&&i[1]==="<"?(l="<<",y=2):this._n3Mode&&i.length>1&&i[1]==="="&&(y=2,this._isImpliedBy?(l="abbreviation",f="<"):(l="inverse",f=">"));break;case">":i.length>1&&i[1]===">"&&(l=">>",y=2);break;case"_":((p=this._blank.exec(i))||o&&(p=this._blank.exec(`${i} `)))&&(l="blank",h="_",f=p[1]);break;case'"':if(p=this._simpleQuotedString.exec(i))f=p[1];else if({value:f,matchLength:y}=this._parseLiteral(i),f===null)return r(this);(p!==null||y!==0)&&(l="literal",this._literalClosingPos=0);break;case"'":if(!this._lineMode){if(p=this._simpleApostropheString.exec(i))f=p[1];else if({value:f,matchLength:y}=this._parseLiteral(i),f===null)return r(this);(p!==null||y!==0)&&(l="literal",this._literalClosingPos=0)}break;case"?":this._n3Mode&&(p=this._variable.exec(i))&&(l="var",f=p[0]);break;case"@":this._previousMarker==="literal"&&(p=this._langcode.exec(i))?(l="langcode",f=p[1]):(p=this._keyword.exec(i))&&(l=p[0]);break;case".":if(i.length===1?o:i[1]<"0"||i[1]>"9"){l=".",y=1;break}case"0":case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":case"+":case"-":(p=this._number.exec(i)||o&&(p=this._number.exec(`${i} `)))&&(l="literal",f=p[0],h=typeof p[1]=="string"?O3.double:typeof p[2]=="string"?O3.decimal:O3.integer);break;case"B":case"b":case"p":case"P":case"G":case"g":(p=this._sparqlKeyword.exec(i))?l=p[0].toUpperCase():_=!0;break;case"f":case"t":(p=this._boolean.exec(i))?(l="literal",f=p[0],h=O3.boolean):_=!0;break;case"a":(p=this._shortPredicates.exec(i))?(l="abbreviation",f="a"):_=!0;break;case"=":this._n3Mode&&i.length>1&&(l="abbreviation",i[1]!==">"?(y=1,f="="):(y=2,f=">"));break;case"!":if(!this._n3Mode)break;case",":case";":case"[":case"]":case"(":case")":case"}":this._lineMode||(y=1,l=d);break;case"{":!this._lineMode&&i.length>=2&&(i[1]==="|"?(l="{|",y=2):(l=d,y=1));break;case"|":i.length>=2&&i[1]==="}"&&(l="|}",y=2);break;default:_=!0}if(_&&((this._previousMarker==="@prefix"||this._previousMarker==="PREFIX")&&(p=this._prefix.exec(i))?(l="prefix",f=p[1]||""):((p=this._prefixed.exec(i))||o&&(p=this._prefixed.exec(`${i} `)))&&(l="prefixed",h=p[1]||"",f=this._unescape(p[2]))),this._previousMarker==="^^")switch(l){case"prefixed":l="type";break;case"IRI":l="typeIRI";break;default:l=""}if(!l)return o||!/^'''|^"""/.test(i)&&/\n|\r/.test(i)?r(this):this._input=i;const b=y||p[0].length,m=e(l,f,h,s,b);this.previousToken=m,this._previousMarker=l,i=i.substr(b,i.length)}function e(a,c,s,d,l){const f=i?t-i.length:t,h=f+l,p={type:a,value:c,prefix:s,line:d,start:f,end:h};return n(null,p),p}function r(a){n(a._syntaxError(/^\S*/.exec(i)[0]))}}_unescape(n){let o=!1;const i=n.replace(fee,(t,e,r,a)=>{if(typeof e=="string")return String.fromCharCode(Number.parseInt(e,16));if(typeof r=="string"){let c=Number.parseInt(r,16);return c<=65535?String.fromCharCode(Number.parseInt(r,16)):String.fromCharCode(55296+((c-=65536)>>10),56320+(c&1023))}return a in F8?F8[a]:(o=!0,"")});return o?null:i}_parseLiteral(n){if(n.length>=3){const o=n.match(/^(?:"""|"|'''|'|)/)[0],i=o.length;let t=Math.max(this._literalClosingPos,i);for(;(t=n.indexOf(o,t))>0;){let e=0;for(;n[t-e-1]==="\\";)e++;if(e%2===0){const r=n.substring(i,t),a=r.split(/\r\n|\r|\n/).length-1,c=t+i;if(i===1&&a!==0||i===3&&this._lineMode)break;return this._line+=a,{value:this._unescape(r),matchLength:c}}t++}this._literalClosingPos=n.length-i+1}return{value:"",matchLength:0}}_syntaxError(n){this._input=null;const o=new Error(`Unexpected "${n}" on line ${this._line}.`);return o.context={token:void 0,line:this._line,previousToken:this.previousToken},o}_readStartingBom(n){return n.startsWith("\uFEFF")?n.substr(1):n}tokenize(n,o){if(this._line=1,typeof n=="string")if(this._input=this._readStartingBom(n),typeof o=="function")queueMicrotask(()=>this._tokenizeToEnd(o,!0));else{const i=[];let t;if(this._tokenizeToEnd((e,r)=>e?t=e:i.push(r),!0),t)throw t;return i}else this._pendingBuffer=null,typeof n.setEncoding=="function"&&n.setEncoding("utf8"),n.on("data",i=>{this._input!==null&&i.length!==0&&(this._pendingBuffer&&(i=lee.Buffer.concat([this._pendingBuffer,i]),this._pendingBuffer=null),i[i.length-1]&128?this._pendingBuffer=i:(typeof this._input>"u"?this._input=this._readStartingBom(typeof i=="string"?i:i.toString()):this._input+=i,this._tokenizeToEnd(o,!1)))}),n.on("end",()=>{typeof this._input=="string"&&this._tokenizeToEnd(o,!0)}),n.on("error",o)}}const{rdf:bee,xsd:Wu}=Or;let vf,_ee=0;const In={namedNode:I8,blankNode:P8,variable:N8,literal:D8,defaultGraph:gee,quad:NA,triple:NA,fromTerm:p1,fromQuad:j8};class an{constructor(n){this.id=n}get value(){return this.id}equals(n){return n instanceof an?this.id===n.id:!!n&&this.termType===n.termType&&this.value===n.value}hashCode(){return 0}toJSON(){return{termType:this.termType,value:this.value}}}let A3=class extends an{get termType(){return"NamedNode"}},Tf=class uJ extends an{get termType(){return"Literal"}get value(){return this.id.substring(1,this.id.lastIndexOf('"'))}get language(){const n=this.id;let o=n.lastIndexOf('"')+1;return o<n.length&&n[o++]==="@"?n.substr(o).toLowerCase():""}get datatype(){return new A3(this.datatypeString)}get datatypeString(){const n=this.id,o=n.lastIndexOf('"')+1,i=o<n.length?n[o]:"";return i==="^"?n.substr(o+2):i!=="@"?Wu.string:bee.langString}equals(n){return n instanceof uJ?this.id===n.id:!!n&&!!n.datatype&&this.termType===n.termType&&this.value===n.value&&this.language===n.language&&this.datatype.value===n.datatype.value}toJSON(){return{termType:this.termType,value:this.value,language:this.language,datatype:{termType:"NamedNode",value:this.datatypeString}}}},IA=class extends an{constructor(n){super(`_:${n}`)}get termType(){return"BlankNode"}get value(){return this.id.substr(2)}},PA=class extends an{constructor(n){super(`?${n}`)}get termType(){return"Variable"}get value(){return this.id.substr(1)}},DA=class extends an{constructor(){return super(""),vf||this}get termType(){return"DefaultGraph"}equals(n){return this===n||!!n&&this.termType===n.termType}};vf=new DA;function Yu(u,n,o){if(n=n||In,!u)return n.defaultGraph();switch(u[0]){case"?":return n.variable(u.substr(1));case"_":return n.blankNode(u.substr(2));case'"':if(n===In)return new Tf(u);if(u[u.length-1]==='"')return n.literal(u.substr(1,u.length-2));const i=u.lastIndexOf('"',u.length-1);return n.literal(u.substr(1,i-1),u[i+1]==="@"?u.substr(i+2):n.namedNode(u.substr(i+3)));case"[":u=JSON.parse(u);break;default:if(!o||!Array.isArray(u))return n.namedNode(u)}return n.quad(Yu(u[0],n,!0),Yu(u[1],n,!0),Yu(u[2],n,!0),u[3]&&Yu(u[3],n,!0))}function Gi(u,n){if(typeof u=="string")return u;if(u instanceof an&&u.termType!=="Quad")return u.id;if(!u)return vf.id;switch(u.termType){case"NamedNode":return u.value;case"BlankNode":return`_:${u.value}`;case"Variable":return`?${u.value}`;case"DefaultGraph":return"";case"Literal":return`"${u.value}"${u.language?`@${u.language}`:u.datatype&&u.datatype.value!==Wu.string?`^^${u.datatype.value}`:""}`;case"Quad":const o=[Gi(u.subject,!0),Gi(u.predicate,!0),Gi(u.object,!0)];return u.graph&&u.graph.termType!=="DefaultGraph"&&o.push(Gi(u.graph,!0)),n?o:JSON.stringify(o);default:throw new Error(`Unexpected termType: ${u.termType}`)}}let wf=class extends an{constructor(n,o,i,t){super(""),this._subject=n,this._predicate=o,this._object=i,this._graph=t||vf}get termType(){return"Quad"}get subject(){return this._subject}get predicate(){return this._predicate}get object(){return this._object}get graph(){return this._graph}toJSON(){return{termType:this.termType,subject:this._subject.toJSON(),predicate:this._predicate.toJSON(),object:this._object.toJSON(),graph:this._graph.toJSON()}}equals(n){return!!n&&this._subject.equals(n.subject)&&this._predicate.equals(n.predicate)&&this._object.equals(n.object)&&this._graph.equals(n.graph)}};function I8(u){return new A3(u)}function P8(u){return new IA(u||`n3-${_ee++}`)}function D8(u,n){if(typeof n=="string")return new Tf(`"${u}"@${n.toLowerCase()}`);let o=n?n.value:"";return o===""&&(typeof u=="boolean"?o=Wu.boolean:typeof u=="number"&&(Number.isFinite(u)?o=Number.isInteger(u)?Wu.integer:Wu.double:(o=Wu.double,Number.isNaN(u)||(u=u>0?"INF":"-INF")))),o===""||o===Wu.string?new Tf(`"${u}"`):new Tf(`"${u}"^^${o}`)}function N8(u){return new PA(u)}function gee(){return vf}function NA(u,n,o,i){return new wf(u,n,o,i)}function p1(u){if(u instanceof an)return u;switch(u.termType){case"NamedNode":return I8(u.value);case"BlankNode":return P8(u.value);case"Variable":return N8(u.value);case"DefaultGraph":return vf;case"Literal":return D8(u.value,u.language||u.datatype);case"Quad":return j8(u);default:throw new Error(`Unexpected termType: ${u.termType}`)}}function j8(u){if(u instanceof wf)return u;if(u.termType!=="Quad")throw new Error(`Unexpected termType: ${u.termType}`);return NA(p1(u.subject),p1(u.predicate),p1(u.object),p1(u.graph))}let L8=0;class E3{constructor(n){this._contextStack=[],this._graph=null,n=n||{},this._setBase(n.baseIRI),n.factory&&M8(this,n.factory);const o=typeof n.format=="string"?n.format.match(/\w*$/)[0].toLowerCase():"",i=/turtle/.test(o),t=/trig/.test(o),e=/triple/.test(o),r=/quad/.test(o),a=this._n3Mode=/n3/.test(o),c=e||r;(this._supportsNamedGraphs=!(i||a))||(this._readPredicateOrNamedGraph=this._readPredicate),this._supportsQuads=!(i||t||e||a),this._isImpliedBy=n.isImpliedBy,this._supportsRDFStar=o===""||/star|\*$/.test(o),c&&(this._resolveRelativeIRI=s=>null),this._blankNodePrefix=typeof n.blankNodePrefix!="string"?"":n.blankNodePrefix.replace(/^(?!_:)/,"_:"),this._lexer=n.lexer||new FA({lineMode:c,n3:a,isImpliedBy:this._isImpliedBy}),this._explicitQuantifiers=!!n.explicitQuantifiers}static _resetBlankNodePrefix(){L8=0}_setBase(n){if(!n)this._base="",this._basePath="";else{const o=n.indexOf("#");o>=0&&(n=n.substr(0,o)),this._base=n,this._basePath=n.indexOf("/")<0?n:n.replace(/[^\/?]*(?:\?.*)?$/,""),n=n.match(/^(?:([a-z][a-z0-9+.-]*:))?(?:\/\/[^\/]*)?/i),this._baseRoot=n[0],this._baseScheme=n[1]}}_saveContext(n,o,i,t,e){const r=this._n3Mode;this._contextStack.push({type:n,subject:i,predicate:t,object:e,graph:o,inverse:r?this._inversePredicate:!1,blankPrefix:r?this._prefixes._:"",quantified:r?this._quantified:null}),r&&(this._inversePredicate=!1,this._prefixes._=this._graph?`${this._graph.value}.`:".",this._quantified=Object.create(this._quantified))}_restoreContext(n,o){const i=this._contextStack.pop();if(!i||i.type!==n)return this._error(`Unexpected ${o.type}`,o);this._subject=i.subject,this._predicate=i.predicate,this._object=i.object,this._graph=i.graph,this._n3Mode&&(this._inversePredicate=i.inverse,this._prefixes._=i.blankPrefix,this._quantified=i.quantified)}_readInTopContext(n){switch(n.type){case"eof":return this._graph!==null?this._error("Unclosed graph",n):(delete this._prefixes._,this._callback(null,null,this._prefixes));case"PREFIX":this._sparqlStyle=!0;case"@prefix":return this._readPrefix;case"BASE":this._sparqlStyle=!0;case"@base":return this._readBaseIRI;case"{":if(this._supportsNamedGraphs)return this._graph="",this._subject=null,this._readSubject;case"GRAPH":if(this._supportsNamedGraphs)return this._readNamedGraphLabel;default:return this._readSubject(n)}}_readEntity(n,o){let i;switch(n.type){case"IRI":case"typeIRI":const t=this._resolveIRI(n.value);if(t===null)return this._error("Invalid IRI",n);i=this._factory.namedNode(t);break;case"type":case"prefixed":const e=this._prefixes[n.prefix];if(e===void 0)return this._error(`Undefined prefix "${n.prefix}:"`,n);i=this._factory.namedNode(e+n.value);break;case"blank":i=this._factory.blankNode(this._prefixes[n.prefix]+n.value);break;case"var":i=this._factory.variable(n.value.substr(1));break;default:return this._error(`Expected entity but got ${n.type}`,n)}return!o&&this._n3Mode&&i.id in this._quantified&&(i=this._quantified[i.id]),i}_readSubject(n){switch(this._predicate=null,n.type){case"[":return this._saveContext("blank",this._graph,this._subject=this._factory.blankNode(),null,null),this._readBlankNodeHead;case"(":return this._saveContext("list",this._graph,this.RDF_NIL,null,null),this._subject=null,this._readListItem;case"{":return this._n3Mode?(this._saveContext("formula",this._graph,this._graph=this._factory.blankNode(),null,null),this._readSubject):this._error("Unexpected graph",n);case"}":return this._readPunctuation(n);case"@forSome":return this._n3Mode?(this._subject=null,this._predicate=this.N3_FORSOME,this._quantifier="blankNode",this._readQuantifierList):this._error('Unexpected "@forSome"',n);case"@forAll":return this._n3Mode?(this._subject=null,this._predicate=this.N3_FORALL,this._quantifier="variable",this._readQuantifierList):this._error('Unexpected "@forAll"',n);case"literal":if(!this._n3Mode)return this._error("Unexpected literal",n);if(n.prefix.length===0)return this._literalValue=n.value,this._completeSubjectLiteral;this._subject=this._factory.literal(n.value,this._factory.namedNode(n.prefix));break;case"<<":return this._supportsRDFStar?(this._saveContext("<<",this._graph,null,null,null),this._graph=null,this._readSubject):this._error("Unexpected RDF-star syntax",n);default:if((this._subject=this._readEntity(n))===void 0)return;if(this._n3Mode)return this._getPathReader(this._readPredicateOrNamedGraph)}return this._readPredicateOrNamedGraph}_readPredicate(n){const o=n.type;switch(o){case"inverse":this._inversePredicate=!0;case"abbreviation":this._predicate=this.ABBREVIATIONS[n.value];break;case".":case"]":case"}":return this._predicate===null?this._error(`Unexpected ${o}`,n):(this._subject=null,o==="]"?this._readBlankNodeTail(n):this._readPunctuation(n));case";":return this._predicate!==null?this._readPredicate:this._error("Expected predicate but got ;",n);case"[":if(this._n3Mode)return this._saveContext("blank",this._graph,this._subject,this._subject=this._factory.blankNode(),null),this._readBlankNodeHead;case"blank":if(!this._n3Mode)return this._error("Disallowed blank node as predicate",n);default:if((this._predicate=this._readEntity(n))===void 0)return}return this._readObject}_readObject(n){switch(n.type){case"literal":if(n.prefix.length===0)return this._literalValue=n.value,this._readDataTypeOrLang;this._object=this._factory.literal(n.value,this._factory.namedNode(n.prefix));break;case"[":return this._saveContext("blank",this._graph,this._subject,this._predicate,this._subject=this._factory.blankNode()),this._readBlankNodeHead;case"(":return this._saveContext("list",this._graph,this._subject,this._predicate,this.RDF_NIL),this._subject=null,this._readListItem;case"{":return this._n3Mode?(this._saveContext("formula",this._graph,this._subject,this._predicate,this._graph=this._factory.blankNode()),this._readSubject):this._error("Unexpected graph",n);case"<<":return this._supportsRDFStar?(this._saveContext("<<",this._graph,this._subject,this._predicate,null),this._graph=null,this._readSubject):this._error("Unexpected RDF-star syntax",n);default:if((this._object=this._readEntity(n))===void 0)return;if(this._n3Mode)return this._getPathReader(this._getContextEndReader())}return this._getContextEndReader()}_readPredicateOrNamedGraph(n){return n.type==="{"?this._readGraph(n):this._readPredicate(n)}_readGraph(n){return n.type!=="{"?this._error(`Expected graph but got ${n.type}`,n):(this._graph=this._subject,this._subject=null,this._readSubject)}_readBlankNodeHead(n){return n.type==="]"?(this._subject=null,this._readBlankNodeTail(n)):(this._predicate=null,this._readPredicate(n))}_readBlankNodeTail(n){if(n.type!=="]")return this._readBlankNodePunctuation(n);this._subject!==null&&this._emit(this._subject,this._predicate,this._object,this._graph);const o=this._predicate===null;return this._restoreContext("blank",n),this._object!==null?this._getContextEndReader():this._predicate!==null?this._readObject:o?this._readPredicateOrNamedGraph:this._readPredicateAfterBlank}_readPredicateAfterBlank(n){switch(n.type){case".":case"}":return this._subject=null,this._readPunctuation(n);default:return this._readPredicate(n)}}_readListItem(n){let o=null,i=null,t=this._readListItem;const e=this._subject,r=this._contextStack,a=r[r.length-1];switch(n.type){case"[":this._saveContext("blank",this._graph,i=this._factory.blankNode(),this.RDF_FIRST,this._subject=o=this._factory.blankNode()),t=this._readBlankNodeHead;break;case"(":this._saveContext("list",this._graph,i=this._factory.blankNode(),this.RDF_FIRST,this.RDF_NIL),this._subject=null;break;case")":if(this._restoreContext("list",n),r.length!==0&&r[r.length-1].type==="list"&&this._emit(this._subject,this._predicate,this._object,this._graph),this._predicate===null){if(t=this._readPredicate,this._subject===this.RDF_NIL)return t}else if(t=this._getContextEndReader(),this._object===this.RDF_NIL)return t;i=this.RDF_NIL;break;case"literal":n.prefix.length===0?(this._literalValue=n.value,t=this._readListItemDataTypeOrLang):(o=this._factory.literal(n.value,this._factory.namedNode(n.prefix)),t=this._getContextEndReader());break;case"{":return this._n3Mode?(this._saveContext("formula",this._graph,this._subject,this._predicate,this._graph=this._factory.blankNode()),this._readSubject):this._error("Unexpected graph",n);default:if((o=this._readEntity(n))===void 0)return}if(i===null&&(this._subject=i=this._factory.blankNode()),e===null?a.predicate===null?a.subject=i:a.object=i:this._emit(e,this.RDF_REST,i,this._graph),o!==null){if(this._n3Mode&&(n.type==="IRI"||n.type==="prefixed"))return this._saveContext("item",this._graph,i,this.RDF_FIRST,o),this._subject=o,this._predicate=null,this._getPathReader(this._readListItem);this._emit(i,this.RDF_FIRST,o,this._graph)}return t}_readDataTypeOrLang(n){return this._completeObjectLiteral(n,!1)}_readListItemDataTypeOrLang(n){return this._completeObjectLiteral(n,!0)}_completeLiteral(n){let o=this._factory.literal(this._literalValue);switch(n.type){case"type":case"typeIRI":const i=this._readEntity(n);if(i===void 0)return;o=this._factory.literal(this._literalValue,i),n=null;break;case"langcode":o=this._factory.literal(this._literalValue,n.value),n=null;break}return{token:n,literal:o}}_completeSubjectLiteral(n){return this._subject=this._completeLiteral(n).literal,this._readPredicateOrNamedGraph}_completeObjectLiteral(n,o){const i=this._completeLiteral(n);if(i)return this._object=i.literal,o&&this._emit(this._subject,this.RDF_FIRST,this._object,this._graph),i.token===null?this._getContextEndReader():(this._readCallback=this._getContextEndReader(),this._readCallback(i.token))}_readFormulaTail(n){return n.type!=="}"?this._readPunctuation(n):(this._subject!==null&&this._emit(this._subject,this._predicate,this._object,this._graph),this._restoreContext("formula",n),this._object===null?this._readPredicate:this._getContextEndReader())}_readPunctuation(n){let o,i=this._graph;const t=this._subject,e=this._inversePredicate;switch(n.type){case"}":if(this._graph===null)return this._error("Unexpected graph closing",n);if(this._n3Mode)return this._readFormulaTail(n);this._graph=null;case".":this._subject=null,o=this._contextStack.length?this._readSubject:this._readInTopContext,e&&(this._inversePredicate=!1);break;case";":o=this._readPredicate;break;case",":o=this._readObject;break;case"{|":if(!this._supportsRDFStar)return this._error("Unexpected RDF-star syntax",n);const r=this._predicate,a=this._object;this._subject=this._factory.quad(t,r,a,this.DEFAULTGRAPH),o=this._readPredicate;break;case"|}":if(this._subject.termType!=="Quad")return this._error("Unexpected asserted triple closing",n);this._subject=null,o=this._readPunctuation;break;default:if(this._supportsQuads&&this._graph===null&&(i=this._readEntity(n))!==void 0){o=this._readQuadPunctuation;break}return this._error(`Expected punctuation to follow "${this._object.id}"`,n)}if(t!==null){const r=this._predicate,a=this._object;e?this._emit(a,r,t,i):this._emit(t,r,a,i)}return o}_readBlankNodePunctuation(n){let o;switch(n.type){case";":o=this._readPredicate;break;case",":o=this._readObject;break;default:return this._error(`Expected punctuation to follow "${this._object.id}"`,n)}return this._emit(this._subject,this._predicate,this._object,this._graph),o}_readQuadPunctuation(n){return n.type!=="."?this._error("Expected dot to follow quad",n):this._readInTopContext}_readPrefix(n){return n.type!=="prefix"?this._error("Expected prefix to follow @prefix",n):(this._prefix=n.value,this._readPrefixIRI)}_readPrefixIRI(n){if(n.type!=="IRI")return this._error(`Expected IRI to follow prefix "${this._prefix}:"`,n);const o=this._readEntity(n);return this._prefixes[this._prefix]=o.value,this._prefixCallback(this._prefix,o),this._readDeclarationPunctuation}_readBaseIRI(n){const o=n.type==="IRI"&&this._resolveIRI(n.value);return o?(this._setBase(o),this._readDeclarationPunctuation):this._error("Expected valid IRI to follow base declaration",n)}_readNamedGraphLabel(n){switch(n.type){case"IRI":case"blank":case"prefixed":return this._readSubject(n),this._readGraph;case"[":return this._readNamedGraphBlankLabel;default:return this._error("Invalid graph label",n)}}_readNamedGraphBlankLabel(n){return n.type!=="]"?this._error("Invalid graph label",n):(this._subject=this._factory.blankNode(),this._readGraph)}_readDeclarationPunctuation(n){return this._sparqlStyle?(this._sparqlStyle=!1,this._readInTopContext(n)):n.type!=="."?this._error("Expected declaration to end with a dot",n):this._readInTopContext}_readQuantifierList(n){let o;switch(n.type){case"IRI":case"prefixed":if((o=this._readEntity(n,!0))!==void 0)break;default:return this._error(`Unexpected ${n.type}`,n)}return this._explicitQuantifiers?(this._subject===null?this._emit(this._graph||this.DEFAULTGRAPH,this._predicate,this._subject=this._factory.blankNode(),this.QUANTIFIERS_GRAPH):this._emit(this._subject,this.RDF_REST,this._subject=this._factory.blankNode(),this.QUANTIFIERS_GRAPH),this._emit(this._subject,this.RDF_FIRST,o,this.QUANTIFIERS_GRAPH)):this._quantified[o.id]=this._factory[this._quantifier](this._factory.blankNode().value),this._readQuantifierPunctuation}_readQuantifierPunctuation(n){return n.type===","?this._readQuantifierList:(this._explicitQuantifiers&&(this._emit(this._subject,this.RDF_REST,this.RDF_NIL,this.QUANTIFIERS_GRAPH),this._subject=null),this._readCallback=this._getContextEndReader(),this._readCallback(n))}_getPathReader(n){return this._afterPath=n,this._readPath}_readPath(n){switch(n.type){case"!":return this._readForwardPath;case"^":return this._readBackwardPath;default:const o=this._contextStack,i=o.length&&o[o.length-1];if(i&&i.type==="item"){const t=this._subject;this._restoreContext("item",n),this._emit(this._subject,this.RDF_FIRST,t,this._graph)}return this._afterPath(n)}}_readForwardPath(n){let o,i;const t=this._factory.blankNode();if((i=this._readEntity(n))!==void 0)return this._predicate===null?(o=this._subject,this._subject=t):(o=this._object,this._object=t),this._emit(o,i,t,this._graph),this._readPath}_readBackwardPath(n){const o=this._factory.blankNode();let i,t;if((i=this._readEntity(n))!==void 0)return this._predicate===null?(t=this._subject,this._subject=o):(t=this._object,this._object=o),this._emit(o,i,t,this._graph),this._readPath}_readRDFStarTailOrGraph(n){return n.type!==">>"?this._supportsQuads&&this._graph===null&&(this._graph=this._readEntity(n))!==void 0?this._readRDFStarTail:this._error(`Expected >> to follow "${this._object.id}"`,n):this._readRDFStarTail(n)}_readRDFStarTail(n){if(n.type!==">>")return this._error(`Expected >> but got ${n.type}`,n);const o=this._factory.quad(this._subject,this._predicate,this._object,this._graph||this.DEFAULTGRAPH);return this._restoreContext("<<",n),this._subject===null?(this._subject=o,this._readPredicate):(this._object=o,this._getContextEndReader())}_getContextEndReader(){const n=this._contextStack;if(!n.length)return this._readPunctuation;switch(n[n.length-1].type){case"blank":return this._readBlankNodeTail;case"list":return this._readListItem;case"formula":return this._readFormulaTail;case"<<":return this._readRDFStarTailOrGraph}}_emit(n,o,i,t){this._callback(null,this._factory.quad(n,o,i,t||this.DEFAULTGRAPH))}_error(n,o){const i=new Error(`${n} on line ${o.line}.`);i.context={token:o,line:o.line,previousToken:this._lexer.previousToken},this._callback(i),this._callback=x3}_resolveIRI(n){return/^[a-z][a-z0-9+.-]*:/i.test(n)?n:this._resolveRelativeIRI(n)}_resolveRelativeIRI(n){if(!n.length)return this._base;switch(n[0]){case"#":return this._base+n;case"?":return this._base.replace(/(?:\?.*)?$/,n);case"/":return(n[1]==="/"?this._baseScheme:this._baseRoot)+this._removeDotSegments(n);default:return/^[^/:]*:/.test(n)?null:this._removeDotSegments(this._basePath+n)}}_removeDotSegments(n){if(!/(^|\/)\.\.?($|[/#?])/.test(n))return n;const o=n.length;let i="",t=-1,e=-1,r=0,a="/";for(;t<o;){switch(a){case":":if(e<0&&n[++t]==="/"&&n[++t]==="/")for(;(e=t+1)<o&&n[e]!=="/";)t=e;break;case"?":case"#":t=o;break;case"/":if(n[t+1]===".")switch(a=n[++t+1],a){case"/":i+=n.substring(r,t-1),r=t+1;break;case void 0:case"?":case"#":return i+n.substring(r,t)+n.substr(t+1);case".":if(a=n[++t+1],a===void 0||a==="/"||a==="?"||a==="#"){if(i+=n.substring(r,t-2),(r=i.lastIndexOf("/"))>=e&&(i=i.substr(0,r)),a!=="/")return`${i}/${n.substr(t+1)}`;r=t+1}}}a=n[++t]}return i+n.substring(r)}parse(n,o,i){let t,e,r;if(o&&(o.onQuad||o.onPrefix||o.onComment)?(t=o.onQuad,e=o.onPrefix,r=o.onComment):(t=o,e=i),this._readCallback=this._readInTopContext,this._sparqlStyle=!1,this._prefixes=Object.create(null),this._prefixes._=this._blankNodePrefix?this._blankNodePrefix.substr(2):`b${L8++}_`,this._prefixCallback=e||x3,this._inversePredicate=!1,this._quantified=Object.create(null),!t){const c=[];let s;if(this._callback=(d,l)=>{d?s=d:l&&c.push(l)},this._lexer.tokenize(n).every(d=>this._readCallback=this._readCallback(d)),s)throw s;return c}let a=(c,s)=>{c!==null?(this._callback(c),this._callback=x3):this._readCallback&&(this._readCallback=this._readCallback(s))};r&&(this._lexer.comments=!0,a=(c,s)=>{c!==null?(this._callback(c),this._callback=x3):this._readCallback&&(s.type==="comment"?r(s.value):this._readCallback=this._readCallback(s))}),this._callback=t,this._lexer.tokenize(n,a)}}function x3(){}function M8(u,n){u._factory=n,u.DEFAULTGRAPH=n.defaultGraph(),u.RDF_FIRST=n.namedNode(Or.rdf.first),u.RDF_REST=n.namedNode(Or.rdf.rest),u.RDF_NIL=n.namedNode(Or.rdf.nil),u.N3_FORALL=n.namedNode(Or.r.forAll),u.N3_FORSOME=n.namedNode(Or.r.forSome),u.ABBREVIATIONS={a:n.namedNode(Or.rdf.type),"=":n.namedNode(Or.owl.sameAs),">":n.namedNode(Or.log.implies),"<":n.namedNode(Or.log.isImpliedBy)},u.QUANTIFIERS_GRAPH=n.namedNode("urn:n3:quantifiers")}M8(E3.prototype,In);function mee(u){return!!u&&u.termType==="NamedNode"}function vee(u){return!!u&&u.termType==="BlankNode"}function Tee(u){return!!u&&u.termType==="Literal"}function wee(u){return!!u&&u.termType==="Variable"}function See(u){return!!u&&u.termType==="Quad"}function y1(u){return!!u&&u.termType==="DefaultGraph"}function Oee(u){return y1(u.graph)}function Aee(u,n){return q8({"":u.value||u},n)("")}function q8(u,n){const o=Object.create(null);for(const t in u)i(t,u[t]);n=n||In;function i(t,e){if(typeof e=="string"){const r=Object.create(null);o[t]=a=>r[a]||(r[a]=n.namedNode(e+a))}else if(!(t in o))throw new Error(`Unknown prefix: ${t}`);return o[t]}return i}var C8=Object.freeze({__proto__:null,inDefaultGraph:Oee,isBlankNode:vee,isDefaultGraph:y1,isLiteral:Tee,isNamedNode:mee,isQuad:See,isVariable:wee,prefix:Aee,prefixes:q8});function R3(u){return u.replace(/[\]\/\(\)\*\+\?\.\\\$]/g,"\\$&")}const Eee=/^:?[^:?#]*(?:[?#]|$)|^file:|^[^:]*:\/*[^?#]+?\/(?:\.\.?(?:\/|$)|\/)/i,xee=/^(?:(?:[^/?#]{3,}|\.?[^/?#.]\.?)(?:\/[^/?#]{3,}|\.?[^/?#.]\.?)*\/?)?(?:[?#]|$)/,B8="./",Ree="../",jA="?",$8="#";class b1{constructor(n){this.base=n,this._baseLength=0,this._baseMatcher=null,this._pathReplacements=new Array(n.length+1)}static supports(n){return!Eee.test(n)}_getBaseMatcher(){if(this._baseMatcher)return this._baseMatcher;if(!b1.supports(this.base))return this._baseMatcher=/.^/;const n=/^[^:]*:\/*/.exec(this.base)[0],o=["^",R3(n)],i=[],t=[],e=/[^/?#]*([/?#])/y;let r,a=0,c=0,s=e.lastIndex=n.length;for(;!a&&!c&&(r=e.exec(this.base));)r[1]===$8?c=e.lastIndex-1:(o.push(R3(r[0]),"(?:"),i.push(")?"),r[1]!==jA?t.push(s=e.lastIndex):(a=s=e.lastIndex,c=this.base.indexOf($8,a),this._pathReplacements[a]=jA));for(let d=0;d<t.length;d++)this._pathReplacements[t[d]]=Ree.repeat(t.length-d-1);return this._pathReplacements[t[t.length-1]]=B8,this._baseLength=c>0?c:this.base.length,o.push(R3(this.base.substring(s,this._baseLength)),a?"(?:#|$)":"(?:[?#]|$)"),this._baseMatcher=new RegExp([...o,...i].join(""))}toRelative(n){const o=this._getBaseMatcher().exec(n);if(!o)return n;const i=o[0].length;if(i===this._baseLength&&i===n.length)return"";const t=this._pathReplacements[i];if(t){const e=n.substring(i);return t!==jA&&!xee.test(e)?n:t===B8&&/^[^?#]/.test(e)?e:t+e}return n.substring(i-1)}}const _1=In.defaultGraph(),{rdf:Fee,xsd:Sf}=Or,U8=/["\\\t\n\r\b\f\u0000-\u0019\ud800-\udbff]/,V8=/["\\\t\n\r\b\f\u0000-\u0019]|[\ud800-\udbff][\udc00-\udfff]/g,Iee={"\\":"\\\\",'"':'\\"',"	":"\\t","\n":"\\n","\r":"\\r","\b":"\\b","\f":"\\f"};class g1 extends an{equals(n){return n===this}}class m1{constructor(n,o){if(this._prefixRegex=/$0^/,n&&typeof n.write!="function"&&(o=n,n=null),o=o||{},this._lists=o.lists,n)this._outputStream=n,this._endStream=o.end===void 0?!0:!!o.end;else{let i="";this._outputStream={write(t,e,r){i+=t,r&&r()},end:t=>{t&&t(null,i)}},this._endStream=!0}this._subject=null,/triple|quad/i.test(o.format)?(this._lineMode=!0,this._writeQuad=this._writeQuadLine):(this._lineMode=!1,this._graph=_1,this._prefixIRIs=Object.create(null),o.prefixes&&this.addPrefixes(o.prefixes),o.baseIRI&&(this._baseIri=new b1(o.baseIRI)))}get _inDefaultGraph(){return _1.equals(this._graph)}_write(n,o){this._outputStream.write(n,"utf8",o)}_writeQuad(n,o,i,t,e){try{t.equals(this._graph)||(this._write((this._subject===null?"":this._inDefaultGraph?`.
`:`
}
`)+(_1.equals(t)?"":`${this._encodeIriOrBlank(t)} {
`)),this._graph=t,this._subject=null),n.equals(this._subject)?o.equals(this._predicate)?this._write(`, ${this._encodeObject(i)}`,e):this._write(`;
    ${this._encodePredicate(this._predicate=o)} ${this._encodeObject(i)}`,e):this._write(`${(this._subject===null?"":`.
`)+this._encodeSubject(this._subject=n)} ${this._encodePredicate(this._predicate=o)} ${this._encodeObject(i)}`,e)}catch(r){e&&e(r)}}_writeQuadLine(n,o,i,t,e){delete this._prefixMatch,this._write(this.quadToString(n,o,i,t),e)}quadToString(n,o,i,t){return`${this._encodeSubject(n)} ${this._encodeIriOrBlank(o)} ${this._encodeObject(i)}${t&&t.value?` ${this._encodeIriOrBlank(t)} .
`:` .
`}`}quadsToString(n){let o="";for(const i of n)o+=this.quadToString(i.subject,i.predicate,i.object,i.graph);return o}_encodeSubject(n){return n.termType==="Quad"?this._encodeQuad(n):this._encodeIriOrBlank(n)}_encodeIriOrBlank(n){if(n.termType!=="NamedNode")return this._lists&&n.value in this._lists&&(n=this.list(this._lists[n.value])),"id"in n?n.id:`_:${n.value}`;let o=n.value;this._baseIri&&(o=this._baseIri.toRelative(o)),U8.test(o)&&(o=o.replace(V8,Q8));const i=this._prefixRegex.exec(o);return i?i[1]?this._prefixIRIs[i[1]]+i[2]:o:`<${o}>`}_encodeLiteral(n){let o=n.value;if(U8.test(o)&&(o=o.replace(V8,Q8)),n.language)return`"${o}"@${n.language}`;if(this._lineMode){if(n.datatype.value===Sf.string)return`"${o}"`}else switch(n.datatype.value){case Sf.string:return`"${o}"`;case Sf.boolean:if(o==="true"||o==="false")return o;break;case Sf.integer:if(/^[+-]?\d+$/.test(o))return o;break;case Sf.decimal:if(/^[+-]?\d*\.\d+$/.test(o))return o;break;case Sf.double:if(/^[+-]?(?:\d+\.\d*|\.?\d+)[eE][+-]?\d+$/.test(o))return o;break}return`"${o}"^^${this._encodeIriOrBlank(n.datatype)}`}_encodePredicate(n){return n.value===Fee.type?"a":this._encodeIriOrBlank(n)}_encodeObject(n){switch(n.termType){case"Quad":return this._encodeQuad(n);case"Literal":return this._encodeLiteral(n);default:return this._encodeIriOrBlank(n)}}_encodeQuad({subject:n,predicate:o,object:i,graph:t}){return`<<${this._encodeSubject(n)} ${this._encodePredicate(o)} ${this._encodeObject(i)}${y1(t)?"":` ${this._encodeIriOrBlank(t)}`}>>`}_blockedWrite(){throw new Error("Cannot write because the writer has been closed.")}addQuad(n,o,i,t,e){i===void 0?this._writeQuad(n.subject,n.predicate,n.object,n.graph,o):typeof t=="function"?this._writeQuad(n,o,i,_1,t):this._writeQuad(n,o,i,t||_1,e)}addQuads(n){for(let o=0;o<n.length;o++)this.addQuad(n[o])}addPrefix(n,o,i){const t={};t[n]=o,this.addPrefixes(t,i)}addPrefixes(n,o){if(!this._prefixIRIs)return o&&o();let i=!1;for(let t in n){let e=n[t];typeof e!="string"&&(e=e.value),i=!0,this._subject!==null&&(this._write(this._inDefaultGraph?`.
`:`
}
`),this._subject=null,this._graph=""),this._prefixIRIs[e]=t+=":",this._write(`@prefix ${t} <${e}>.
`)}if(i){let t="",e="";for(const r in this._prefixIRIs)t+=t?`|${r}`:r,e+=(e?"|":"")+this._prefixIRIs[r];t=R3(t),this._prefixRegex=new RegExp(`^(?:${e})[^/]*$|^(${t})([_a-zA-Z0-9][\\-_a-zA-Z0-9]*)$`)}this._write(i?`
`:"",o)}blank(n,o){let i=n,t,e;switch(n===void 0?i=[]:n.termType?i=[{predicate:n,object:o}]:"length"in n||(i=[n]),e=i.length){case 0:return new g1("[]");case 1:if(t=i[0],!(t.object instanceof g1))return new g1(`[ ${this._encodePredicate(t.predicate)} ${this._encodeObject(t.object)} ]`);default:let r="[";for(let a=0;a<e;a++)t=i[a],t.predicate.equals(n)?r+=`, ${this._encodeObject(t.object)}`:(r+=`${(a?`;
  `:`
  `)+this._encodePredicate(t.predicate)} ${this._encodeObject(t.object)}`,n=t.predicate);return new g1(`${r}
]`)}}list(n){const o=n&&n.length||0,i=new Array(o);for(let t=0;t<o;t++)i[t]=this._encodeObject(n[t]);return new g1(`(${i.join(" ")})`)}end(n){this._subject!==null&&(this._write(this._inDefaultGraph?`.
`:`
}
`),this._subject=null),this._write=this._blockedWrite;let o=n&&((i,t)=>{o=null,n(i,t)});if(this._endStream)try{return this._outputStream.end(o)}catch{}o&&o()}}function Q8(u){let n=Iee[u];return n===void 0&&(u.length===1?(n=u.charCodeAt(0).toString(16),n="\\u0000".substr(0,6-n.length)+n):(n=((u.charCodeAt(0)-55296)*1024+u.charCodeAt(1)+9216).toString(16),n="\\U00000000".substr(0,10-n.length)+n)),n}var F3=Pt();const LA=Symbol("iter");function v1(u,n,o=4){if(o===0)return Object.assign(u,n);for(const i in n)u[i]=v1(u[i]||Object.create(null),n[i],o-1);return u}function H8(u,n,o=4){let i=!1;for(const t in u)if(t in n){const e=o===0?null:H8(u[t],n[t],o-1);if(e!==!1)i=i||Object.create(null),i[t]=e;else if(o===3)return!1}return i}function G8(u,n,o=4){let i=!1;for(const t in u)if(!(t in n))i=i||Object.create(null),i[t]=o===0?null:v1({},u[t],o-1);else if(o!==0){const e=G8(u[t],n[t],o-1);if(e!==!1)i=i||Object.create(null),i[t]=e;else if(o===3)return!1}return i}class MA{constructor(n={}){this._id=1,this._ids=Object.create(null),this._ids[""]=1,this._entities=Object.create(null),this._entities[1]="",this._blankNodeIndex=0,this._factory=n.factory||In}_termFromId(n){if(n[0]==="."){const o=this._entities,i=n.split(".");return this._factory.quad(this._termFromId(o[i[1]]),this._termFromId(o[i[2]]),this._termFromId(o[i[3]]),i[4]&&this._termFromId(o[i[4]]))}return Yu(n,this._factory)}_termToNumericId(n){if(n.termType==="Quad"){const o=this._termToNumericId(n.subject),i=this._termToNumericId(n.predicate),t=this._termToNumericId(n.object);let e;return o&&i&&t&&(y1(n.graph)||(e=this._termToNumericId(n.graph)))&&this._ids[e?`.${o}.${i}.${t}.${e}`:`.${o}.${i}.${t}`]}return this._ids[Gi(n)]}_termToNewNumericId(n){const o=n&&n.termType==="Quad"?`.${this._termToNewNumericId(n.subject)}.${this._termToNewNumericId(n.predicate)}.${this._termToNewNumericId(n.object)}${y1(n.graph)?"":`.${this._termToNewNumericId(n.graph)}`}`:Gi(n);return this._ids[o]||(this._ids[this._entities[++this._id]=o]=this._id)}createBlankNode(n){let o,i;if(n)for(o=n=`_:${n}`,i=1;this._ids[o];)o=n+i++;else do o=`_:b${this._blankNodeIndex++}`;while(this._ids[o]);return this._ids[o]=++this._id,this._entities[this._id]=o,this._factory.blankNode(o.substr(2))}}class Nr{constructor(n,o){this._size=0,this._graphs=Object.create(null),!o&&n&&!n[0]&&typeof n.match!="function"&&(o=n,n=null),o=o||{},this._factory=o.factory||In,this._entityIndex=o.entityIndex||new MA({factory:this._factory}),this._entities=this._entityIndex._entities,this._termFromId=this._entityIndex._termFromId.bind(this._entityIndex),this._termToNumericId=this._entityIndex._termToNumericId.bind(this._entityIndex),this._termToNewNumericId=this._entityIndex._termToNewNumericId.bind(this._entityIndex),n&&this.addAll(n)}get size(){let n=this._size;if(n!==null)return n;n=0;const o=this._graphs;let i,t;for(const e in o)for(const r in i=o[e].subjects)for(const a in t=i[r])n+=Object.keys(t[a]).length;return this._size=n}_addToIndex(n,o,i,t){const e=n[o]||(n[o]={}),r=e[i]||(e[i]={}),a=t in r;return a||(r[t]=null),!a}_removeFromIndex(n,o,i,t){const e=n[o],r=e[i];delete r[t];for(const a in r)return;delete e[i];for(const a in e)return;delete n[o]}*_findInIndex(n,o,i,t,e,r,a,c){let s,d,l;const f=this._entities,h=this._termFromId(f[c]),p={subject:null,predicate:null,object:null};o&&((s=n,n={})[o]=s[o]);for(const y in n)if(d=n[y]){p[e]=this._termFromId(f[y]),i&&((s=d,d={})[i]=s[i]);for(const _ in d)if(l=d[_]){p[r]=this._termFromId(f[_]);const b=t?t in l?[t]:[]:Object.keys(l);for(let m=0;m<b.length;m++)p[a]=this._termFromId(f[b[m]]),yield this._factory.quad(p.subject,p.predicate,p.object,h)}}}_loop(n,o){for(const i in n)o(i)}_loopByKey0(n,o,i){let t,e;if(t=n[o])for(e in t)i(e)}_loopByKey1(n,o,i){let t,e;for(t in n)e=n[t],e[o]&&i(t)}_loopBy2Keys(n,o,i,t){let e,r,a;if((e=n[o])&&(r=e[i]))for(a in r)t(a)}_countInIndex(n,o,i,t){let e=0,r,a,c;o&&((r=n,n={})[o]=r[o]);for(const s in n)if(a=n[s]){i&&((r=a,a={})[i]=r[i]);for(const d in a)(c=a[d])&&(t?t in c&&e++:e+=Object.keys(c).length)}return e}_getGraphs(n){return n=n===""?1:n&&(this._termToNumericId(n)||-1),typeof n!="number"?this._graphs:{[n]:this._graphs[n]}}_uniqueEntities(n){const o=Object.create(null);return i=>{i in o||(o[i]=!0,n(this._termFromId(this._entities[i],this._factory)))}}add(n){return this.addQuad(n),this}addQuad(n,o,i,t){o||(t=n.graph,i=n.object,o=n.predicate,n=n.subject),t=t?this._termToNewNumericId(t):1;let e=this._graphs[t];return e||(e=this._graphs[t]={subjects:{},predicates:{},objects:{}},Object.freeze(e)),n=this._termToNewNumericId(n),o=this._termToNewNumericId(o),i=this._termToNewNumericId(i),this._addToIndex(e.subjects,n,o,i)?(this._addToIndex(e.predicates,o,i,n),this._addToIndex(e.objects,i,n,o),this._size=null,!0):!1}addQuads(n){for(let o=0;o<n.length;o++)this.addQuad(n[o])}delete(n){return this.removeQuad(n),this}has(n,o,i,t){return n&&n.subject&&({subject:n,predicate:o,object:i,graph:t}=n),!this.readQuads(n,o,i,t).next().done}import(n){return n.on("data",o=>{this.addQuad(o)}),n}removeQuad(n,o,i,t){o||({subject:n,predicate:o,object:i,graph:t}=n),t=t?this._termToNumericId(t):1;const e=this._graphs;let r,a,c;if(!(n=n&&this._termToNumericId(n))||!(o=o&&this._termToNumericId(o))||!(i=i&&this._termToNumericId(i))||!(r=e[t])||!(a=r.subjects[n])||!(c=a[o])||!(i in c))return!1;this._removeFromIndex(r.subjects,n,o,i),this._removeFromIndex(r.predicates,o,i,n),this._removeFromIndex(r.objects,i,n,o),this._size!==null&&this._size--;for(n in r.subjects)return!0;return delete e[t],!0}removeQuads(n){for(let o=0;o<n.length;o++)this.removeQuad(n[o])}remove(n){return n.on("data",o=>{this.removeQuad(o)}),n}removeMatches(n,o,i,t){const e=new F3.Readable({objectMode:!0}),r=this.readQuads(n,o,i,t);return e._read=a=>{for(;--a>=0;){const{done:c,value:s}=r.next();if(c){e.push(null);return}e.push(s)}},this.remove(e)}deleteGraph(n){return this.removeMatches(null,null,null,n)}getQuads(n,o,i,t){return[...this.readQuads(n,o,i,t)]}*readQuads(n,o,i,t){const e=this._getGraphs(t);let r,a,c,s;if(!(n&&!(a=this._termToNumericId(n))||o&&!(c=this._termToNumericId(o))||i&&!(s=this._termToNumericId(i))))for(const d in e)(r=e[d])&&(a?s?yield*this._findInIndex(r.objects,s,a,c,"object","subject","predicate",d):yield*this._findInIndex(r.subjects,a,c,null,"subject","predicate","object",d):c?yield*this._findInIndex(r.predicates,c,s,null,"predicate","object","subject",d):s?yield*this._findInIndex(r.objects,s,null,null,"object","subject","predicate",d):yield*this._findInIndex(r.subjects,null,null,null,"subject","predicate","object",d))}match(n,o,i,t){return new zi(this,n,o,i,t,{entityIndex:this._entityIndex})}countQuads(n,o,i,t){const e=this._getGraphs(t);let r=0,a,c,s,d;if(n&&!(c=this._termToNumericId(n))||o&&!(s=this._termToNumericId(o))||i&&!(d=this._termToNumericId(i)))return 0;for(const l in e)(a=e[l])&&(n?i?r+=this._countInIndex(a.objects,d,c,s):r+=this._countInIndex(a.subjects,c,s,d):o?r+=this._countInIndex(a.predicates,s,d,c):r+=this._countInIndex(a.objects,d,c,s));return r}forEach(n,o,i,t,e){this.some(r=>(n(r,this),!1),o,i,t,e)}every(n,o,i,t,e){return!this.some(r=>!n(r,this),o,i,t,e)}some(n,o,i,t,e){for(const r of this.readQuads(o,i,t,e))if(n(r,this))return!0;return!1}getSubjects(n,o,i){const t=[];return this.forSubjects(e=>{t.push(e)},n,o,i),t}forSubjects(n,o,i,t){const e=this._getGraphs(t);let r,a,c;if(n=this._uniqueEntities(n),!(o&&!(a=this._termToNumericId(o))||i&&!(c=this._termToNumericId(i))))for(t in e)(r=e[t])&&(a?c?this._loopBy2Keys(r.predicates,a,c,n):this._loopByKey1(r.subjects,a,n):c?this._loopByKey0(r.objects,c,n):this._loop(r.subjects,n))}getPredicates(n,o,i){const t=[];return this.forPredicates(e=>{t.push(e)},n,o,i),t}forPredicates(n,o,i,t){const e=this._getGraphs(t);let r,a,c;if(n=this._uniqueEntities(n),!(o&&!(a=this._termToNumericId(o))||i&&!(c=this._termToNumericId(i))))for(t in e)(r=e[t])&&(a?c?this._loopBy2Keys(r.objects,c,a,n):this._loopByKey0(r.subjects,a,n):c?this._loopByKey1(r.predicates,c,n):this._loop(r.predicates,n))}getObjects(n,o,i){const t=[];return this.forObjects(e=>{t.push(e)},n,o,i),t}forObjects(n,o,i,t){const e=this._getGraphs(t);let r,a,c;if(n=this._uniqueEntities(n),!(o&&!(a=this._termToNumericId(o))||i&&!(c=this._termToNumericId(i))))for(t in e)(r=e[t])&&(a?c?this._loopBy2Keys(r.subjects,a,c,n):this._loopByKey1(r.objects,a,n):c?this._loopByKey0(r.predicates,c,n):this._loop(r.objects,n))}getGraphs(n,o,i){const t=[];return this.forGraphs(e=>{t.push(e)},n,o,i),t}forGraphs(n,o,i,t){for(const e in this._graphs)this.some(r=>(n(r.graph),!0),o,i,t,this._termFromId(this._entities[e]))}createBlankNode(n){return this._entityIndex.createBlankNode(n)}extractLists({remove:n=!1,ignoreErrors:o=!1}={}){const i={},t=o?(()=>!0):((a,c)=>{throw new Error(`${a.value} ${c}`)}),e=this.getQuads(null,Or.rdf.rest,Or.rdf.nil,null),r=n?[...e]:[];return e.forEach(a=>{const c=[];let s=!1,d,l;const f=a.graph;let h=a.subject;for(;h&&!s;){const p=this.getQuads(null,null,h,null),y=this.getQuads(h,null,null,null);let _,b=null,m=null,g=null;for(let T=0;T<y.length&&!s;T++)_=y[T],_.graph.equals(f)?d?s=t(h,"has non-list arcs out"):_.predicate.value===Or.rdf.first?b?s=t(h,"has multiple rdf:first arcs"):r.push(b=_):_.predicate.value===Or.rdf.rest?m?s=t(h,"has multiple rdf:rest arcs"):r.push(m=_):p.length?s=t(h,"can't be subject and object"):(d=_,l="subject"):s=t(h,"not confined to single graph");for(let T=0;T<p.length&&!s;++T)_=p[T],d?s=t(h,"can't have coreferences"):_.predicate.value===Or.rdf.rest?g?s=t(h,"has incoming rdf:rest arcs"):g=_:(d=_,l="object");b?c.unshift(b.object):s=t(h,"has no list head"),h=g&&g.subject}s?n=!1:d&&(i[d[l].value]=c)}),n&&this.removeQuads(r),i}addAll(n){if(n instanceof zi&&(n=n.filtered),Array.isArray(n))this.addQuads(n);else if(n instanceof Nr&&n._entityIndex===this._entityIndex)n._size!==0&&(this._graphs=v1(this._graphs,n._graphs),this._size=null);else for(const o of n)this.add(o);return this}contains(n){if(n instanceof zi&&(n=n.filtered),n===this)return!0;if(!(n instanceof Nr)||this._entityIndex!==n._entityIndex)return n.every(s=>this.has(s));const o=this._graphs,i=n._graphs;let t,e,r,a,c;for(const s in i){if(!(t=o[s]))return!1;t=t.subjects;for(const d in e=i[s].subjects){if(!(r=t[d]))return!1;for(const l in a=e[d]){if(!(c=r[l]))return!1;for(const f in a[l])if(!(f in c))return!1}}}return!0}deleteMatches(n,o,i,t){for(const e of this.match(n,o,i,t))this.removeQuad(e);return this}difference(n){if(n&&n instanceof zi&&(n=n.filtered),n===this)return new Nr({entityIndex:this._entityIndex});if(n instanceof Nr&&n._entityIndex===this._entityIndex){const o=new Nr({entityIndex:this._entityIndex}),i=G8(this._graphs,n._graphs);return i&&(o._graphs=i,o._size=null),o}return this.filter(o=>!n.has(o))}equals(n){return n instanceof zi&&(n=n.filtered),n===this||this.size===n.size&&this.contains(n)}filter(n){const o=new Nr({entityIndex:this._entityIndex});for(const i of this)n(i,this)&&o.add(i);return o}intersection(n){if(n instanceof zi&&(n=n.filtered),n===this){const o=new Nr({entityIndex:this._entityIndex});return o._graphs=v1(Object.create(null),this._graphs),o._size=this._size,o}else if(n instanceof Nr&&this._entityIndex===n._entityIndex){const o=new Nr({entityIndex:this._entityIndex}),i=H8(n._graphs,this._graphs);return i&&(o._graphs=i,o._size=null),o}return this.filter(o=>n.has(o))}map(n){const o=new Nr({entityIndex:this._entityIndex});for(const i of this)o.add(n(i,this));return o}reduce(n,o){const i=this.readQuads();let t=o===void 0?i.next().value:o;for(const e of i)t=n(t,e,this);return t}toArray(){return this.getQuads()}toCanonical(){throw new Error("not implemented")}toStream(){return this.match()}toString(){return new m1().quadsToString(this)}union(n){const o=new Nr({entityIndex:this._entityIndex});return o._graphs=v1(Object.create(null),this._graphs),o._size=this._size,o.addAll(n),o}*[Symbol.iterator](){yield*this.readQuads()}}function Wn(u,n,o=0){const i=n[o];if(i&&!(i in u))return!1;let t=!1;for(const e in i?{[i]:u[i]}:u){const r=o===2?null:Wn(u[e],n,o+1);r!==!1&&(t=t||Object.create(null),t[e]=r)}return t}class zi extends F3.Readable{constructor(n,o,i,t,e,r){super({objectMode:!0}),Object.assign(this,{n3Store:n,subject:o,predicate:i,object:t,graph:e,options:r})}get filtered(){if(!this._filtered){const{n3Store:n,graph:o,object:i,predicate:t,subject:e}=this,r=this._filtered=new Nr({factory:n._factory,entityIndex:this.options.entityIndex});let a,c,s;if(e&&!(a=r._termToNumericId(e))||t&&!(c=r._termToNumericId(t))||i&&!(s=r._termToNumericId(i)))return r;const d=n._getGraphs(o);for(const l in d){let f,h,p,y;(y=d[l])&&(!a&&c?(h=Wn(y.predicates,[c,s,a]))&&(f=Wn(y.subjects,[a,c,s]),p=Wn(y.objects,[s,a,c])):s?(p=Wn(y.objects,[s,a,c]))&&(f=Wn(y.subjects,[a,c,s]),h=Wn(y.predicates,[c,s,a])):(f=Wn(y.subjects,[a,c,s]))&&(h=Wn(y.predicates,[c,s,a]),p=Wn(y.objects,[s,a,c])),f&&(r._graphs[l]={subjects:f,predicates:h,objects:p}))}r._size=null}return this._filtered}get size(){return this.filtered.size}_read(n){n>0&&!this[LA]&&(this[LA]=this[Symbol.iterator]());const o=this[LA];for(;--n>=0;){const{done:i,value:t}=o.next();if(i){this.push(null);return}this.push(t)}}addAll(n){return this.filtered.addAll(n)}contains(n){return this.filtered.contains(n)}deleteMatches(n,o,i,t){return this.filtered.deleteMatches(n,o,i,t)}difference(n){return this.filtered.difference(n)}equals(n){return this.filtered.equals(n)}every(n,o,i,t,e){return this.filtered.every(n,o,i,t,e)}filter(n){return this.filtered.filter(n)}forEach(n,o,i,t,e){return this.filtered.forEach(n,o,i,t,e)}import(n){return this.filtered.import(n)}intersection(n){return this.filtered.intersection(n)}map(n){return this.filtered.map(n)}some(n,o,i,t,e){return this.filtered.some(n,o,i,t,e)}toCanonical(){return this.filtered.toCanonical()}toStream(){return this._filtered?this._filtered.toStream():this.n3Store.match(this.subject,this.predicate,this.object,this.graph)}union(n){return this._filtered?this._filtered.union(n):this.n3Store.match(this.subject,this.predicate,this.object,this.graph).addAll(n)}toArray(){return this._filtered?this._filtered.toArray():this.n3Store.getQuads(this.subject,this.predicate,this.object,this.graph)}reduce(n,o){return this.filtered.reduce(n,o)}toString(){return new m1().quadsToString(this)}add(n){return this.filtered.add(n)}delete(n){return this.filtered.delete(n)}has(n){return this.filtered.has(n)}match(n,o,i,t){return new zi(this.filtered,n,o,i,t,this.options)}*[Symbol.iterator](){yield*this._filtered||this.n3Store.readQuads(this.subject,this.predicate,this.object,this.graph)}}class z8{dataset(n){return new Nr(n)}}function X8(u){const n=[];for(const{subject:o,object:i}of u.match(null,In.namedNode("http://www.w3.org/2000/10/swap/log#implies"),null,In.defaultGraph())){const t=[...u.match(null,null,null,o)],e=[...u.match(null,null,null,i)];n.push({premise:t,conclusion:e})}return n}class J8{constructor(n){this._store=n}_add(n,o,i,t,e){this._store._addToIndex(t.subjects,n,o,i)&&(this._store._addToIndex(t.predicates,o,i,n),this._store._addToIndex(t.objects,i,n,o),e())}_evaluatePremise(n,o,i,t=0){let e,r,a,c,s;const[d,l,f]=n.premise[t].value,h=o[n.premise[t].content],p=!(a=d.value);for(a in p?h:{[a]:h[a]})if(c=h[a]){p&&(d.value=Number(a)),e=!(a=l.value);for(a in e?c:{[a]:c[a]})if(s=c[a]){e&&(l.value=Number(a)),r=!(a=f.value);for(a in r?s:{[a]:s[a]})r&&(f.value=Number(a)),t===n.premise.length-1?n.conclusion.forEach(y=>{this._add(y.subject.value,y.predicate.value,y.object.value,o,()=>{i(y)})}):this._evaluatePremise(n,o,i,t+1);r&&(f.value=null)}e&&(l.value=null)}p&&(d.value=null)}_evaluateRules(n,o,i){for(let t=0;t<n.length;t++)this._evaluatePremise(n[t],o,i)}_reasonGraphNaive(n,o){const i=[];function t(a){a.next&&a.next.forEach(c=>{i.push([a.subject.value,a.predicate.value,a.object.value,c])})}const e=a=>{a.forEach(c=>{this._add(c.subject.value,c.predicate.value,c.object.value,o,()=>{t(c)})})};this._evaluateRules(n,o,t);let r;for(;(r=i.pop())!==void 0;){const[a,c,s,d]=r,l=d.basePremise.subject.value;l||(d.basePremise.subject.value=a);const f=d.basePremise.predicate.value;f||(d.basePremise.predicate.value=c);const h=d.basePremise.object.value;h||(d.basePremise.object.value=s),d.premise.length===0?e(d.conclusion):this._evaluatePremise(d,o,t),l||(d.basePremise.subject.value=null),f||(d.basePremise.predicate.value=null),h||(d.basePremise.object.value=null)}}_createRule({premise:n,conclusion:o}){const i={},t=r=>r.termType==="Variable"?i[r.value]=i[r.value]||{}:{value:this._store._termToNewNumericId(r)},e=r=>({subject:t(r.subject),predicate:t(r.predicate),object:t(r.object)});return{premise:n.map(r=>e(r)),conclusion:o.map(r=>e(r)),variables:Object.values(i)}}reason(n){Array.isArray(n)||(n=X8(n)),n=n.map(i=>this._createRule(i));for(const i of n)for(const t of n)for(let e=0;e<t.premise.length;e++){const r=t.premise[e];for(const a of i.conclusion){if(qA(r.subject,a.subject)&&qA(r.predicate,a.predicate)&&qA(r.object,a.object)){const c=new Set,s=[];r.subject.value=r.subject.value||1,r.object.value=r.object.value||1,r.predicate.value=r.predicate.value||1;for(let d=0;d<t.premise.length;d++)d!==e&&s.push(K8(t.premise[d],c));(a.next=a.next||[]).push({premise:s,conclusion:t.conclusion,basePremise:r})}t.variables.forEach(c=>{c.value=null})}}for(const i of n){const t=new Set;i.premise=i.premise.map(e=>K8(e,t))}const o=this._store._getGraphs();for(const i in o)this._reasonGraphNaive(n,o[i]);this._store._size=null}}function K8({subject:u,predicate:n,object:o},i){const t=u.value||i.has(u)||(i.add(u),!1),e=n.value||i.has(n)||(i.add(n),!1),r=o.value||i.has(o)||(i.add(o),!1);return!t&&e?{content:"predicates",value:[n,o,u]}:r?{content:"objects",value:[o,u,n]}:{content:"subjects",value:[u,n,o]}}function qA(u,n){return u.value===null&&(u.value=n.value),u.value===n.value}class k8 extends F3.Transform{constructor(n){super({decodeStrings:!0}),this._readableState.objectMode=!0;const o=new E3(n);let i,t;const e={onQuad:(r,a)=>{r&&this.emit("error",r)||a&&this.push(a)},onPrefix:(r,a)=>{this.emit("prefix",r,a)}};n&&n.comments&&(e.onComment=r=>{this.emit("comment",r)}),o.parse({on:(r,a)=>{switch(r){case"data":i=a;break;case"end":t=a;break}}},e),this._transform=(r,a,c)=>{i(r),c()},this._flush=r=>{t(),r()}}import(n){return n.on("data",o=>{this.write(o)}),n.on("end",()=>{this.end()}),n.on("error",o=>{this.emit("error",o)}),this}}class W8 extends F3.Transform{constructor(n){super({encoding:"utf8",writableObjectMode:!0});const o=this._writer=new m1({write:(i,t,e)=>{this.push(i),e&&e()},end:i=>{this.push(null),i&&i()}},n);this._transform=(i,t,e)=>{o.addQuad(i,e)},this._flush=i=>{o.end(i)}}import(n){return n.on("data",o=>{this.write(o)}),n.on("end",()=>{this.end()}),n.on("error",o=>{this.emit("error",o)}),n.on("prefix",(o,i)=>{this._writer.addPrefix(o,i)}),this}}var Pee={Lexer:FA,Parser:E3,Writer:m1,Store:Nr,StoreFactory:z8,EntityIndex:MA,StreamParser:k8,StreamWriter:W8,Util:C8,Reasoner:J8,BaseIRI:b1,DataFactory:In,Term:an,NamedNode:A3,Literal:Tf,BlankNode:IA,Variable:PA,DefaultGraph:DA,Quad:wf,Triple:wf,termFromId:Yu,termToId:Gi},Dee=Object.freeze({__proto__:null,BaseIRI:b1,BlankNode:IA,DataFactory:In,DefaultGraph:DA,EntityIndex:MA,Lexer:FA,Literal:Tf,NamedNode:A3,Parser:E3,Quad:wf,Reasoner:J8,Store:Nr,StoreFactory:z8,StreamParser:k8,StreamWriter:W8,Term:an,Triple:wf,Util:C8,Variable:PA,Writer:m1,default:Pee,getRulesFromDataset:X8,termFromId:Yu,termToId:Gi}),Xi=Lt(Dee),Y8;function Nee(){if(Y8)return c1;Y8=1,Object.defineProperty(c1,"__esModule",{value:!0}),c1.ActorRdfParseN3=void 0;const u=mf(),n=qe(),o=Xi;let i=class extends u.ActorRdfParseFixedMediaTypes{constructor(e){super(e)}async runHandle(e,r,a){var d;const c=e.context.getSafe(n.KeysInitQuery.dataFactory);e.data.on("error",l=>s.emit("error",l));const s=e.data.pipe(new o.StreamParser({factory:c,baseIRI:(d=e.metadata)==null?void 0:d.baseIRI,format:r.endsWith("n3")?r:`${r}*`}));return{data:s,metadata:{triples:r==="text/turtle"||r==="application/n-triples"||r==="text/n3"}}}};return c1.ActorRdfParseN3=i,c1}var Z8;function jee(){return Z8||(Z8=1,(function(u){var n=Ku&&Ku.__createBinding||(Object.create?(function(i,t,e,r){r===void 0&&(r=e);var a=Object.getOwnPropertyDescriptor(t,e);(!a||("get"in a?!t.__esModule:a.writable||a.configurable))&&(a={enumerable:!0,get:function(){return t[e]}}),Object.defineProperty(i,r,a)}):(function(i,t,e,r){r===void 0&&(r=e),i[r]=t[e]})),o=Ku&&Ku.__exportStar||function(i,t){for(var e in i)e!=="default"&&!Object.prototype.hasOwnProperty.call(t,e)&&n(t,i,e)};Object.defineProperty(u,"__esModule",{value:!0}),o(Nee(),u)})(Ku)),Ku}var Zu={},T1={},eo={},to={},ro={},CA={},ej;function Lee(){return ej||(ej=1,(function(u){/**
 * Character classes and associated utilities for the 5th edition of XML 1.0.
 *
 * @author Louis-Dominique Dubeau
 * @license MIT
 * @copyright Louis-Dominique Dubeau
 */Object.defineProperty(u,"__esModule",{value:!0}),u.CHAR=`	
\r ---`,u.S=` 	\r
`,u.NAME_START_CHAR=":A-Z_a-z-----------",u.NAME_CHAR="-"+u.NAME_START_CHAR+".0-9--",u.CHAR_RE=new RegExp("^["+u.CHAR+"]$","u"),u.S_RE=new RegExp("^["+u.S+"]+$","u"),u.NAME_START_CHAR_RE=new RegExp("^["+u.NAME_START_CHAR+"]$","u"),u.NAME_CHAR_RE=new RegExp("^["+u.NAME_CHAR+"]$","u"),u.NAME_RE=new RegExp("^["+u.NAME_START_CHAR+"]["+u.NAME_CHAR+"]*$","u"),u.NMTOKEN_RE=new RegExp("^["+u.NAME_CHAR+"]+$","u");var n=9,o=10,i=13,t=32;u.S_LIST=[t,o,i,n];function e(s){return s>=t&&s<=55295||s===o||s===i||s===n||s>=57344&&s<=65533||s>=65536&&s<=1114111}u.isChar=e;function r(s){return s===t||s===o||s===i||s===n}u.isS=r;function a(s){return s>=65&&s<=90||s>=97&&s<=122||s===58||s===95||s===8204||s===8205||s>=192&&s<=214||s>=216&&s<=246||s>=248&&s<=767||s>=880&&s<=893||s>=895&&s<=8191||s>=8304&&s<=8591||s>=11264&&s<=12271||s>=12289&&s<=55295||s>=63744&&s<=64975||s>=65008&&s<=65533||s>=65536&&s<=983039}u.isNameStartChar=a;function c(s){return a(s)||s>=48&&s<=57||s===45||s===46||s===183||s>=768&&s<=879||s>=8255&&s<=8256}u.isNameChar=c})(CA)),CA}var BA={},tj;function Mee(){return tj||(tj=1,(function(u){/**
 * Character classes and associated utilities for the 2nd edition of XML 1.1.
 *
 * @author Louis-Dominique Dubeau
 * @license MIT
 * @copyright Louis-Dominique Dubeau
 */Object.defineProperty(u,"__esModule",{value:!0}),u.CHAR="---",u.RESTRICTED_CHAR="-\b\v\f---",u.S=` 	\r
`,u.NAME_START_CHAR=":A-Z_a-z-----------",u.NAME_CHAR="-"+u.NAME_START_CHAR+".0-9--",u.CHAR_RE=new RegExp("^["+u.CHAR+"]$","u"),u.RESTRICTED_CHAR_RE=new RegExp("^["+u.RESTRICTED_CHAR+"]$","u"),u.S_RE=new RegExp("^["+u.S+"]+$","u"),u.NAME_START_CHAR_RE=new RegExp("^["+u.NAME_START_CHAR+"]$","u"),u.NAME_CHAR_RE=new RegExp("^["+u.NAME_CHAR+"]$","u"),u.NAME_RE=new RegExp("^["+u.NAME_START_CHAR+"]["+u.NAME_CHAR+"]*$","u"),u.NMTOKEN_RE=new RegExp("^["+u.NAME_CHAR+"]+$","u");var n=9,o=10,i=13,t=32;u.S_LIST=[t,o,i,n];function e(l){return l>=1&&l<=55295||l>=57344&&l<=65533||l>=65536&&l<=1114111}u.isChar=e;function r(l){return l>=1&&l<=8||l===11||l===12||l>=14&&l<=31||l>=127&&l<=132||l>=134&&l<=159}u.isRestrictedChar=r;function a(l){return l===9||l===10||l===13||l>31&&l<127||l===133||l>159&&l<=55295||l>=57344&&l<=65533||l>=65536&&l<=1114111}u.isCharAndNotRestricted=a;function c(l){return l===t||l===o||l===i||l===n}u.isS=c;function s(l){return l>=65&&l<=90||l>=97&&l<=122||l===58||l===95||l===8204||l===8205||l>=192&&l<=214||l>=216&&l<=246||l>=248&&l<=767||l>=880&&l<=893||l>=895&&l<=8191||l>=8304&&l<=8591||l>=11264&&l<=12271||l>=12289&&l<=55295||l>=63744&&l<=64975||l>=65008&&l<=65533||l>=65536&&l<=983039}u.isNameStartChar=s;function d(l){return s(l)||l>=48&&l<=57||l===45||l===46||l===183||l>=768&&l<=879||l>=8255&&l<=8256}u.isNameChar=d})(BA)),BA}var $A={},rj;function qee(){return rj||(rj=1,(function(u){/**
 * Character class utilities for XML NS 1.0 edition 3.
 *
 * @author Louis-Dominique Dubeau
 * @license MIT
 * @copyright Louis-Dominique Dubeau
 */Object.defineProperty(u,"__esModule",{value:!0}),u.NC_NAME_START_CHAR="A-Z_a-z------------",u.NC_NAME_CHAR="-"+u.NC_NAME_START_CHAR+".0-9--",u.NC_NAME_START_CHAR_RE=new RegExp("^["+u.NC_NAME_START_CHAR+"]$","u"),u.NC_NAME_CHAR_RE=new RegExp("^["+u.NC_NAME_CHAR+"]$","u"),u.NC_NAME_RE=new RegExp("^["+u.NC_NAME_START_CHAR+"]["+u.NC_NAME_CHAR+"]*$","u");function n(i){return i>=65&&i<=90||i===95||i>=97&&i<=122||i>=192&&i<=214||i>=216&&i<=246||i>=248&&i<=767||i>=880&&i<=893||i>=895&&i<=8191||i>=8204&&i<=8205||i>=8304&&i<=8591||i>=11264&&i<=12271||i>=12289&&i<=55295||i>=63744&&i<=64975||i>=65008&&i<=65533||i>=65536&&i<=983039}u.isNCNameStartChar=n;function o(i){return n(i)||i===45||i===46||i>=48&&i<=57||i===183||i>=768&&i<=879||i>=8255&&i<=8256}u.isNCNameChar=o})($A)),$A}var nj;function ij(){if(nj)return ro;nj=1,Object.defineProperty(ro,"__esModule",{value:!0}),ro.SaxesParser=ro.EVENTS=void 0;const u=Lee(),n=Mee(),o=qee();var i=u.isS,t=u.isChar,e=u.isNameStartChar,r=u.isNameChar,a=u.S_LIST,c=u.NAME_RE,s=n.isChar,d=o.isNCNameStartChar,l=o.isNCNameChar,f=o.NC_NAME_RE;const h="http://www.w3.org/XML/1998/namespace",p="http://www.w3.org/2000/xmlns/",y={__proto__:null,xml:h,xmlns:p},_={__proto__:null,amp:"&",gt:">",lt:"<",quot:'"',apos:"'"},b=-1,m=-2,g=0,T=1,v=2,S=3,F=4,M=5,O=6,w=7,E=8,R=9,D=10,B=11,C=12,$=13,Z=14,ee=15,ce=16,G=17,fe=18,me=19,ye=20,re=21,xe=22,Re=23,Ie=24,he=25,be=26,V=27,P=28,N=29,A=30,I=31,q=32,H=33,U=34,X=35,Q=36,k=37,oe=38,se=39,Se=40,Me=41,Oe=42,ue=43,L=44,x=9,j=10,z=13,W=32,le=33,ae=34,De=38,Ve=39,Be=45,Ze=47,J=59,we=60,Ee=61,$e=62,Pe=63,et=91,rt=93,ke=133,ft=8232,te=Ge=>Ge===ae||Ge===Ve,ne=[ae,Ve],Ne=[...ne,et,$e],Ce=[...ne,we,rt],Qe=[Ee,Pe,...a],Tt=[...a,$e,De,we];function Ue(Ge,ie,_e){switch(ie){case"xml":_e!==h&&Ge.fail(`xml prefix must be bound to ${h}.`);break;case"xmlns":_e!==p&&Ge.fail(`xmlns prefix must be bound to ${p}.`);break}switch(_e){case p:Ge.fail(ie===""?`the default namespace may not be set to ${_e}.`:`may not assign a prefix (even "xmlns") to the URI ${p}.`);break;case h:switch(ie){case"xml":break;case"":Ge.fail(`the default namespace may not be set to ${_e}.`);break;default:Ge.fail("may not assign the xml namespace to another prefix.")}break}}function ht(Ge,ie){for(const _e of Object.keys(ie))Ue(Ge,_e,ie[_e])}const He=Ge=>f.test(Ge),Je=Ge=>c.test(Ge),tt=0,wt=1,at=2;ro.EVENTS=["xmldecl","text","processinginstruction","doctype","comment","opentagstart","attribute","opentag","closetag","cdata","error","end","ready"];const Xe={xmldecl:"xmldeclHandler",text:"textHandler",processinginstruction:"piHandler",doctype:"doctypeHandler",comment:"commentHandler",opentagstart:"openTagStartHandler",attribute:"attributeHandler",opentag:"openTagHandler",closetag:"closeTagHandler",cdata:"cdataHandler",error:"errorHandler",end:"endHandler",ready:"readyHandler"};class Lr{get closed(){return this._closed}constructor(ie){this.opt=ie??{},this.fragmentOpt=!!this.opt.fragment;const _e=this.xmlnsOpt=!!this.opt.xmlns;if(this.trackPosition=this.opt.position!==!1,this.fileName=this.opt.fileName,_e){this.nameStartCheck=d,this.nameCheck=l,this.isName=He,this.processAttribs=this.processAttribsNS,this.pushAttrib=this.pushAttribNS,this.ns=Object.assign({__proto__:null},y);const ve=this.opt.additionalNamespaces;ve!=null&&(ht(this,ve),Object.assign(this.ns,ve))}else this.nameStartCheck=e,this.nameCheck=r,this.isName=Je,this.processAttribs=this.processAttribsPlain,this.pushAttrib=this.pushAttribPlain;this.stateTable=[this.sBegin,this.sBeginWhitespace,this.sDoctype,this.sDoctypeQuote,this.sDTD,this.sDTDQuoted,this.sDTDOpenWaka,this.sDTDOpenWakaBang,this.sDTDComment,this.sDTDCommentEnding,this.sDTDCommentEnded,this.sDTDPI,this.sDTDPIEnding,this.sText,this.sEntity,this.sOpenWaka,this.sOpenWakaBang,this.sComment,this.sCommentEnding,this.sCommentEnded,this.sCData,this.sCDataEnding,this.sCDataEnding2,this.sPIFirstChar,this.sPIRest,this.sPIBody,this.sPIEnding,this.sXMLDeclNameStart,this.sXMLDeclName,this.sXMLDeclEq,this.sXMLDeclValueStart,this.sXMLDeclValue,this.sXMLDeclSeparator,this.sXMLDeclEnding,this.sOpenTag,this.sOpenTagSlash,this.sAttrib,this.sAttribName,this.sAttribNameSawWhite,this.sAttribValue,this.sAttribValueQuoted,this.sAttribValueClosed,this.sAttribValueUnquoted,this.sCloseTag,this.sCloseTagSawWhite],this._init()}_init(){var ie;this.openWakaBang="",this.text="",this.name="",this.piTarget="",this.entity="",this.q=null,this.tags=[],this.tag=null,this.topNS=null,this.chunk="",this.chunkPosition=0,this.i=0,this.prevI=0,this.carriedFromPrevious=void 0,this.forbiddenState=tt,this.attribList=[];const{fragmentOpt:_e}=this;this.state=_e?$:g,this.reportedTextBeforeRoot=this.reportedTextAfterRoot=this.closedRoot=this.sawRoot=_e,this.xmlDeclPossible=!_e,this.xmlDeclExpects=["version"],this.entityReturnState=void 0;let{defaultXMLVersion:ve}=this.opt;if(ve===void 0){if(this.opt.forceXMLVersion===!0)throw new Error("forceXMLVersion set but defaultXMLVersion is not set");ve="1.0"}this.setXMLVersion(ve),this.positionAtNewLine=0,this.doctype=!1,this._closed=!1,this.xmlDecl={version:void 0,encoding:void 0,standalone:void 0},this.line=1,this.column=0,this.ENTITIES=Object.create(_),(ie=this.readyHandler)===null||ie===void 0||ie.call(this)}get position(){return this.chunkPosition+this.i}get columnIndex(){return this.position-this.positionAtNewLine}on(ie,_e){this[Xe[ie]]=_e}off(ie){this[Xe[ie]]=void 0}makeError(ie){var _e;let ve=(_e=this.fileName)!==null&&_e!==void 0?_e:"";return this.trackPosition&&(ve.length>0&&(ve+=":"),ve+=`${this.line}:${this.column}`),ve.length>0&&(ve+=": "),new Error(ve+ie)}fail(ie){const _e=this.makeError(ie),ve=this.errorHandler;if(ve===void 0)throw _e;return ve(_e),this}write(ie){if(this.closed)return this.fail("cannot write after close; assign an onready handler.");let _e=!1;ie===null?(_e=!0,ie=""):typeof ie=="object"&&(ie=ie.toString()),this.carriedFromPrevious!==void 0&&(ie=`${this.carriedFromPrevious}${ie}`,this.carriedFromPrevious=void 0);let ve=ie.length;const We=ie.charCodeAt(ve-1);!_e&&(We===z||We>=55296&&We<=56319)&&(this.carriedFromPrevious=ie[ve-1],ve--,ie=ie.slice(0,ve));const{stateTable:Ye}=this;for(this.chunk=ie,this.i=0;this.i<ve;)Ye[this.state].call(this);return this.chunkPosition+=ve,_e?this.end():this}close(){return this.write(null)}getCode10(){const{chunk:ie,i:_e}=this;if(this.prevI=_e,this.i=_e+1,_e>=ie.length)return b;const ve=ie.charCodeAt(_e);if(this.column++,ve<55296){if(ve>=W||ve===x)return ve;switch(ve){case j:return this.line++,this.column=0,this.positionAtNewLine=this.position,j;case z:return ie.charCodeAt(_e+1)===j&&(this.i=_e+2),this.line++,this.column=0,this.positionAtNewLine=this.position,m;default:return this.fail("disallowed character."),ve}}if(ve>56319)return ve>=57344&&ve<=65533||this.fail("disallowed character."),ve;const We=65536+(ve-55296)*1024+(ie.charCodeAt(_e+1)-56320);return this.i=_e+2,We>1114111&&this.fail("disallowed character."),We}getCode11(){const{chunk:ie,i:_e}=this;if(this.prevI=_e,this.i=_e+1,_e>=ie.length)return b;const ve=ie.charCodeAt(_e);if(this.column++,ve<55296){if(ve>31&&ve<127||ve>159&&ve!==ft||ve===x)return ve;switch(ve){case j:return this.line++,this.column=0,this.positionAtNewLine=this.position,j;case z:{const Ye=ie.charCodeAt(_e+1);(Ye===j||Ye===ke)&&(this.i=_e+2)}case ke:case ft:return this.line++,this.column=0,this.positionAtNewLine=this.position,m;default:return this.fail("disallowed character."),ve}}if(ve>56319)return ve>=57344&&ve<=65533||this.fail("disallowed character."),ve;const We=65536+(ve-55296)*1024+(ie.charCodeAt(_e+1)-56320);return this.i=_e+2,We>1114111&&this.fail("disallowed character."),We}getCodeNorm(){const ie=this.getCode();return ie===m?j:ie}unget(){this.i=this.prevI,this.column--}captureTo(ie){let{i:_e}=this;const{chunk:ve}=this;for(;;){const We=this.getCode(),Ye=We===m,mt=Ye?j:We;if(mt===b||ie.includes(mt))return this.text+=ve.slice(_e,this.prevI),mt;Ye&&(this.text+=`${ve.slice(_e,this.prevI)}
`,_e=this.i)}}captureToChar(ie){let{i:_e}=this;const{chunk:ve}=this;for(;;){let We=this.getCode();switch(We){case m:this.text+=`${ve.slice(_e,this.prevI)}
`,_e=this.i,We=j;break;case b:return this.text+=ve.slice(_e),!1}if(We===ie)return this.text+=ve.slice(_e,this.prevI),!0}}captureNameChars(){const{chunk:ie,i:_e}=this;for(;;){const ve=this.getCode();if(ve===b)return this.name+=ie.slice(_e),b;if(!r(ve))return this.name+=ie.slice(_e,this.prevI),ve===m?j:ve}}skipSpaces(){for(;;){const ie=this.getCodeNorm();if(ie===b||!i(ie))return ie}}setXMLVersion(ie){this.currentXMLVersion=ie,ie==="1.0"?(this.isChar=t,this.getCode=this.getCode10):(this.isChar=s,this.getCode=this.getCode11)}sBegin(){this.chunk.charCodeAt(0)===65279&&(this.i++,this.column++),this.state=T}sBeginWhitespace(){const ie=this.i,_e=this.skipSpaces();switch(this.prevI!==ie&&(this.xmlDeclPossible=!1),_e){case we:if(this.state=ee,this.text.length!==0)throw new Error("no-empty text at start");break;case b:break;default:this.unget(),this.state=$,this.xmlDeclPossible=!1}}sDoctype(){var ie;const _e=this.captureTo(Ne);switch(_e){case $e:{(ie=this.doctypeHandler)===null||ie===void 0||ie.call(this,this.text),this.text="",this.state=$,this.doctype=!0;break}case b:break;default:this.text+=String.fromCodePoint(_e),_e===et?this.state=F:te(_e)&&(this.state=S,this.q=_e)}}sDoctypeQuote(){const ie=this.q;this.captureToChar(ie)&&(this.text+=String.fromCodePoint(ie),this.q=null,this.state=v)}sDTD(){const ie=this.captureTo(Ce);ie!==b&&(this.text+=String.fromCodePoint(ie),ie===rt?this.state=v:ie===we?this.state=O:te(ie)&&(this.state=M,this.q=ie))}sDTDQuoted(){const ie=this.q;this.captureToChar(ie)&&(this.text+=String.fromCodePoint(ie),this.state=F,this.q=null)}sDTDOpenWaka(){const ie=this.getCodeNorm();switch(this.text+=String.fromCodePoint(ie),ie){case le:this.state=w,this.openWakaBang="";break;case Pe:this.state=B;break;default:this.state=F}}sDTDOpenWakaBang(){const ie=String.fromCodePoint(this.getCodeNorm()),_e=this.openWakaBang+=ie;this.text+=ie,_e!=="-"&&(this.state=_e==="--"?E:F,this.openWakaBang="")}sDTDComment(){this.captureToChar(Be)&&(this.text+="-",this.state=R)}sDTDCommentEnding(){const ie=this.getCodeNorm();this.text+=String.fromCodePoint(ie),this.state=ie===Be?D:E}sDTDCommentEnded(){const ie=this.getCodeNorm();this.text+=String.fromCodePoint(ie),ie===$e?this.state=F:(this.fail("malformed comment."),this.state=E)}sDTDPI(){this.captureToChar(Pe)&&(this.text+="?",this.state=C)}sDTDPIEnding(){const ie=this.getCodeNorm();this.text+=String.fromCodePoint(ie),ie===$e&&(this.state=F)}sText(){this.tags.length!==0?this.handleTextInRoot():this.handleTextOutsideRoot()}sEntity(){let{i:ie}=this;const{chunk:_e}=this;e:for(;;)switch(this.getCode()){case m:this.entity+=`${_e.slice(ie,this.prevI)}
`,ie=this.i;break;case J:{const{entityReturnState:ve}=this,We=this.entity+_e.slice(ie,this.prevI);this.state=ve;let Ye;We===""?(this.fail("empty entity name."),Ye="&;"):(Ye=this.parseEntity(We),this.entity=""),(ve!==$||this.textHandler!==void 0)&&(this.text+=Ye);break e}case b:this.entity+=_e.slice(ie);break e}}sOpenWaka(){const ie=this.getCode();if(e(ie))this.state=U,this.unget(),this.xmlDeclPossible=!1;else switch(ie){case Ze:this.state=ue,this.xmlDeclPossible=!1;break;case le:this.state=ce,this.openWakaBang="",this.xmlDeclPossible=!1;break;case Pe:this.state=Re;break;default:this.fail("disallowed character in tag name"),this.state=$,this.xmlDeclPossible=!1}}sOpenWakaBang(){switch(this.openWakaBang+=String.fromCodePoint(this.getCodeNorm()),this.openWakaBang){case"[CDATA[":!this.sawRoot&&!this.reportedTextBeforeRoot&&(this.fail("text data outside of root node."),this.reportedTextBeforeRoot=!0),this.closedRoot&&!this.reportedTextAfterRoot&&(this.fail("text data outside of root node."),this.reportedTextAfterRoot=!0),this.state=ye,this.openWakaBang="";break;case"--":this.state=G,this.openWakaBang="";break;case"DOCTYPE":this.state=v,(this.doctype||this.sawRoot)&&this.fail("inappropriately located doctype declaration."),this.openWakaBang="";break;default:this.openWakaBang.length>=7&&this.fail("incorrect syntax.")}}sComment(){this.captureToChar(Be)&&(this.state=fe)}sCommentEnding(){var ie;const _e=this.getCodeNorm();_e===Be?(this.state=me,(ie=this.commentHandler)===null||ie===void 0||ie.call(this,this.text),this.text=""):(this.text+=`-${String.fromCodePoint(_e)}`,this.state=G)}sCommentEnded(){const ie=this.getCodeNorm();ie!==$e?(this.fail("malformed comment."),this.text+=`--${String.fromCodePoint(ie)}`,this.state=G):this.state=$}sCData(){this.captureToChar(rt)&&(this.state=re)}sCDataEnding(){const ie=this.getCodeNorm();ie===rt?this.state=xe:(this.text+=`]${String.fromCodePoint(ie)}`,this.state=ye)}sCDataEnding2(){var ie;const _e=this.getCodeNorm();switch(_e){case $e:{(ie=this.cdataHandler)===null||ie===void 0||ie.call(this,this.text),this.text="",this.state=$;break}case rt:this.text+="]";break;default:this.text+=`]]${String.fromCodePoint(_e)}`,this.state=ye}}sPIFirstChar(){const ie=this.getCodeNorm();this.nameStartCheck(ie)?(this.piTarget+=String.fromCodePoint(ie),this.state=Ie):ie===Pe||i(ie)?(this.fail("processing instruction without a target."),this.state=ie===Pe?be:he):(this.fail("disallowed character in processing instruction name."),this.piTarget+=String.fromCodePoint(ie),this.state=Ie)}sPIRest(){const{chunk:ie,i:_e}=this;for(;;){const ve=this.getCodeNorm();if(ve===b){this.piTarget+=ie.slice(_e);return}if(!this.nameCheck(ve)){this.piTarget+=ie.slice(_e,this.prevI);const We=ve===Pe;We||i(ve)?this.piTarget==="xml"?(this.xmlDeclPossible||this.fail("an XML declaration must be at the start of the document."),this.state=We?H:V):this.state=We?be:he:(this.fail("disallowed character in processing instruction name."),this.piTarget+=String.fromCodePoint(ve));break}}}sPIBody(){if(this.text.length===0){const ie=this.getCodeNorm();ie===Pe?this.state=be:i(ie)||(this.text=String.fromCodePoint(ie))}else this.captureToChar(Pe)&&(this.state=be)}sPIEnding(){var ie;const _e=this.getCodeNorm();if(_e===$e){const{piTarget:ve}=this;ve.toLowerCase()==="xml"&&this.fail("the XML declaration must appear at the start of the document."),(ie=this.piHandler)===null||ie===void 0||ie.call(this,{target:ve,body:this.text}),this.piTarget=this.text="",this.state=$}else _e===Pe?this.text+="?":(this.text+=`?${String.fromCodePoint(_e)}`,this.state=he);this.xmlDeclPossible=!1}sXMLDeclNameStart(){const ie=this.skipSpaces();if(ie===Pe){this.state=H;return}ie!==b&&(this.state=P,this.name=String.fromCodePoint(ie))}sXMLDeclName(){const ie=this.captureTo(Qe);if(ie===Pe){this.state=H,this.name+=this.text,this.text="",this.fail("XML declaration is incomplete.");return}if(i(ie)||ie===Ee){if(this.name+=this.text,this.text="",!this.xmlDeclExpects.includes(this.name))switch(this.name.length){case 0:this.fail("did not expect any more name/value pairs.");break;case 1:this.fail(`expected the name ${this.xmlDeclExpects[0]}.`);break;default:this.fail(`expected one of ${this.xmlDeclExpects.join(", ")}`)}this.state=ie===Ee?A:N}}sXMLDeclEq(){const ie=this.getCodeNorm();if(ie===Pe){this.state=H,this.fail("XML declaration is incomplete.");return}i(ie)||(ie!==Ee&&this.fail("value required."),this.state=A)}sXMLDeclValueStart(){const ie=this.getCodeNorm();if(ie===Pe){this.state=H,this.fail("XML declaration is incomplete.");return}i(ie)||(te(ie)?this.q=ie:(this.fail("value must be quoted."),this.q=W),this.state=I)}sXMLDeclValue(){const ie=this.captureTo([this.q,Pe]);if(ie===Pe){this.state=H,this.text="",this.fail("XML declaration is incomplete.");return}if(ie===b)return;const _e=this.text;switch(this.text="",this.name){case"version":{this.xmlDeclExpects=["encoding","standalone"];const ve=_e;this.xmlDecl.version=ve,/^1\.[0-9]+$/.test(ve)?this.opt.forceXMLVersion||this.setXMLVersion(ve):this.fail("version number must match /^1\\.[0-9]+$/.");break}case"encoding":/^[A-Za-z][A-Za-z0-9._-]*$/.test(_e)||this.fail("encoding value must match 	/^[A-Za-z0-9][A-Za-z0-9._-]*$/."),this.xmlDeclExpects=["standalone"],this.xmlDecl.encoding=_e;break;case"standalone":_e!=="yes"&&_e!=="no"&&this.fail('standalone value must match "yes" or "no".'),this.xmlDeclExpects=[],this.xmlDecl.standalone=_e;break}this.name="",this.state=q}sXMLDeclSeparator(){const ie=this.getCodeNorm();if(ie===Pe){this.state=H;return}i(ie)||(this.fail("whitespace required."),this.unget()),this.state=V}sXMLDeclEnding(){var ie;this.getCodeNorm()===$e?(this.piTarget!=="xml"?this.fail("processing instructions are not allowed before root."):this.name!=="version"&&this.xmlDeclExpects.includes("version")&&this.fail("XML declaration must contain a version."),(ie=this.xmldeclHandler)===null||ie===void 0||ie.call(this,this.xmlDecl),this.name="",this.piTarget=this.text="",this.state=$):this.fail("The character ? is disallowed anywhere in XML declarations."),this.xmlDeclPossible=!1}sOpenTag(){var ie;const _e=this.captureNameChars();if(_e===b)return;const ve=this.tag={name:this.name,attributes:Object.create(null)};switch(this.name="",this.xmlnsOpt&&(this.topNS=ve.ns=Object.create(null)),(ie=this.openTagStartHandler)===null||ie===void 0||ie.call(this,ve),this.sawRoot=!0,!this.fragmentOpt&&this.closedRoot&&this.fail("documents may contain only one root."),_e){case $e:this.openTag();break;case Ze:this.state=X;break;default:i(_e)||this.fail("disallowed character in tag name."),this.state=Q}}sOpenTagSlash(){this.getCode()===$e?this.openSelfClosingTag():(this.fail("forward-slash in opening tag not followed by >."),this.state=Q)}sAttrib(){const ie=this.skipSpaces();ie!==b&&(e(ie)?(this.unget(),this.state=k):ie===$e?this.openTag():ie===Ze?this.state=X:this.fail("disallowed character in attribute name."))}sAttribName(){const ie=this.captureNameChars();ie===Ee?this.state=se:i(ie)?this.state=oe:ie===$e?(this.fail("attribute without value."),this.pushAttrib(this.name,this.name),this.name=this.text="",this.openTag()):ie!==b&&this.fail("disallowed character in attribute name.")}sAttribNameSawWhite(){const ie=this.skipSpaces();switch(ie){case b:return;case Ee:this.state=se;break;default:this.fail("attribute without value."),this.text="",this.name="",ie===$e?this.openTag():e(ie)?(this.unget(),this.state=k):(this.fail("disallowed character in attribute name."),this.state=Q)}}sAttribValue(){const ie=this.getCodeNorm();te(ie)?(this.q=ie,this.state=Se):i(ie)||(this.fail("unquoted attribute value."),this.state=Oe,this.unget())}sAttribValueQuoted(){const{q:ie,chunk:_e}=this;let{i:ve}=this;for(;;)switch(this.getCode()){case ie:this.pushAttrib(this.name,this.text+_e.slice(ve,this.prevI)),this.name=this.text="",this.q=null,this.state=Me;return;case De:this.text+=_e.slice(ve,this.prevI),this.state=Z,this.entityReturnState=Se;return;case j:case m:case x:this.text+=`${_e.slice(ve,this.prevI)} `,ve=this.i;break;case we:this.text+=_e.slice(ve,this.prevI),this.fail("disallowed character.");return;case b:this.text+=_e.slice(ve);return}}sAttribValueClosed(){const ie=this.getCodeNorm();i(ie)?this.state=Q:ie===$e?this.openTag():ie===Ze?this.state=X:e(ie)?(this.fail("no whitespace between attributes."),this.unget(),this.state=k):this.fail("disallowed character in attribute name.")}sAttribValueUnquoted(){const ie=this.captureTo(Tt);switch(ie){case De:this.state=Z,this.entityReturnState=Oe;break;case we:this.fail("disallowed character.");break;case b:break;default:this.text.includes("]]>")&&this.fail('the string "]]>" is disallowed in char data.'),this.pushAttrib(this.name,this.text),this.name=this.text="",ie===$e?this.openTag():this.state=Q}}sCloseTag(){const ie=this.captureNameChars();ie===$e?this.closeTag():i(ie)?this.state=L:ie!==b&&this.fail("disallowed character in closing tag.")}sCloseTagSawWhite(){switch(this.skipSpaces()){case $e:this.closeTag();break;case b:break;default:this.fail("disallowed character in closing tag.")}}handleTextInRoot(){let{i:ie,forbiddenState:_e}=this;const{chunk:ve,textHandler:We}=this;e:for(;;)switch(this.getCode()){case we:{if(this.state=ee,We!==void 0){const{text:Ye}=this,mt=ve.slice(ie,this.prevI);Ye.length!==0?(We(Ye+mt),this.text=""):mt.length!==0&&We(mt)}_e=tt;break e}case De:this.state=Z,this.entityReturnState=$,We!==void 0&&(this.text+=ve.slice(ie,this.prevI)),_e=tt;break e;case rt:switch(_e){case tt:_e=wt;break;case wt:_e=at;break;case at:break;default:throw new Error("impossible state")}break;case $e:_e===at&&this.fail('the string "]]>" is disallowed in char data.'),_e=tt;break;case m:We!==void 0&&(this.text+=`${ve.slice(ie,this.prevI)}
`),ie=this.i,_e=tt;break;case b:We!==void 0&&(this.text+=ve.slice(ie));break e;default:_e=tt}this.forbiddenState=_e}handleTextOutsideRoot(){let{i:ie}=this;const{chunk:_e,textHandler:ve}=this;let We=!1;e:for(;;){const Ye=this.getCode();switch(Ye){case we:{if(this.state=ee,ve!==void 0){const{text:mt}=this,nr=_e.slice(ie,this.prevI);mt.length!==0?(ve(mt+nr),this.text=""):nr.length!==0&&ve(nr)}break e}case De:this.state=Z,this.entityReturnState=$,ve!==void 0&&(this.text+=_e.slice(ie,this.prevI)),We=!0;break e;case m:ve!==void 0&&(this.text+=`${_e.slice(ie,this.prevI)}
`),ie=this.i;break;case b:ve!==void 0&&(this.text+=_e.slice(ie));break e;default:i(Ye)||(We=!0)}}We&&(!this.sawRoot&&!this.reportedTextBeforeRoot&&(this.fail("text data outside of root node."),this.reportedTextBeforeRoot=!0),this.closedRoot&&!this.reportedTextAfterRoot&&(this.fail("text data outside of root node."),this.reportedTextAfterRoot=!0))}pushAttribNS(ie,_e){var ve;const{prefix:We,local:Ye}=this.qname(ie),mt={name:ie,prefix:We,local:Ye,value:_e};if(this.attribList.push(mt),(ve=this.attributeHandler)===null||ve===void 0||ve.call(this,mt),We==="xmlns"){const nr=_e.trim();this.currentXMLVersion==="1.0"&&nr===""&&this.fail("invalid attempt to undefine prefix in XML 1.0"),this.topNS[Ye]=nr,Ue(this,Ye,nr)}else if(ie==="xmlns"){const nr=_e.trim();this.topNS[""]=nr,Ue(this,"",nr)}}pushAttribPlain(ie,_e){var ve;const We={name:ie,value:_e};this.attribList.push(We),(ve=this.attributeHandler)===null||ve===void 0||ve.call(this,We)}end(){var ie,_e;this.sawRoot||this.fail("document must contain a root element.");const{tags:ve}=this;for(;ve.length>0;){const Ye=ve.pop();this.fail(`unclosed tag: ${Ye.name}`)}this.state!==g&&this.state!==$&&this.fail("unexpected end.");const{text:We}=this;return We.length!==0&&((ie=this.textHandler)===null||ie===void 0||ie.call(this,We),this.text=""),this._closed=!0,(_e=this.endHandler)===null||_e===void 0||_e.call(this),this._init(),this}resolve(ie){var _e,ve;let We=this.topNS[ie];if(We!==void 0)return We;const{tags:Ye}=this;for(let mt=Ye.length-1;mt>=0;mt--)if(We=Ye[mt].ns[ie],We!==void 0)return We;return We=this.ns[ie],We!==void 0?We:(ve=(_e=this.opt).resolvePrefix)===null||ve===void 0?void 0:ve.call(_e,ie)}qname(ie){const _e=ie.indexOf(":");if(_e===-1)return{prefix:"",local:ie};const ve=ie.slice(_e+1),We=ie.slice(0,_e);return(We===""||ve===""||ve.includes(":"))&&this.fail(`malformed name: ${ie}.`),{prefix:We,local:ve}}processAttribsNS(){var ie;const{attribList:_e}=this,ve=this.tag;{const{prefix:mt,local:nr}=this.qname(ve.name);ve.prefix=mt,ve.local=nr;const Qt=ve.uri=(ie=this.resolve(mt))!==null&&ie!==void 0?ie:"";mt!==""&&(mt==="xmlns"&&this.fail('tags may not have "xmlns" as prefix.'),Qt===""&&(this.fail(`unbound namespace prefix: ${JSON.stringify(mt)}.`),ve.uri=mt))}if(_e.length===0)return;const{attributes:We}=ve,Ye=new Set;for(const mt of _e){const{name:nr,prefix:Qt,local:wi}=mt;let sn,Kt;Qt===""?(sn=nr==="xmlns"?p:"",Kt=nr):(sn=this.resolve(Qt),sn===void 0&&(this.fail(`unbound namespace prefix: ${JSON.stringify(Qt)}.`),sn=Qt),Kt=`{${sn}}${wi}`),Ye.has(Kt)&&this.fail(`duplicate attribute: ${Kt}.`),Ye.add(Kt),mt.uri=sn,We[nr]=mt}this.attribList=[]}processAttribsPlain(){const{attribList:ie}=this,_e=this.tag.attributes;for(const{name:ve,value:We}of ie)_e[ve]!==void 0&&this.fail(`duplicate attribute: ${ve}.`),_e[ve]=We;this.attribList=[]}openTag(){var ie;this.processAttribs();const{tags:_e}=this,ve=this.tag;ve.isSelfClosing=!1,(ie=this.openTagHandler)===null||ie===void 0||ie.call(this,ve),_e.push(ve),this.state=$,this.name=""}openSelfClosingTag(){var ie,_e,ve;this.processAttribs();const{tags:We}=this,Ye=this.tag;Ye.isSelfClosing=!0,(ie=this.openTagHandler)===null||ie===void 0||ie.call(this,Ye),(_e=this.closeTagHandler)===null||_e===void 0||_e.call(this,Ye),(this.tag=(ve=We[We.length-1])!==null&&ve!==void 0?ve:null)===null&&(this.closedRoot=!0),this.state=$,this.name=""}closeTag(){const{tags:ie,name:_e}=this;if(this.state=$,this.name="",_e===""){this.fail("weird empty close tag."),this.text+="</>";return}const ve=this.closeTagHandler;let We=ie.length;for(;We-- >0;){const Ye=this.tag=ie.pop();if(this.topNS=Ye.ns,ve==null||ve(Ye),Ye.name===_e)break;this.fail("unexpected close tag.")}We===0?this.closedRoot=!0:We<0&&(this.fail(`unmatched closing tag: ${_e}.`),this.text+=`</${_e}>`)}parseEntity(ie){if(ie[0]!=="#"){const ve=this.ENTITIES[ie];return ve!==void 0?ve:(this.fail(this.isName(ie)?"undefined entity.":"disallowed character in entity name."),`&${ie};`)}let _e=NaN;return ie[1]==="x"&&/^#x[0-9a-f]+$/i.test(ie)?_e=parseInt(ie.slice(2),16):/^#[0-9]+$/.test(ie)&&(_e=parseInt(ie.slice(1),10)),this.isChar(_e)?String.fromCodePoint(_e):(this.fail("malformed character entity."),`&${ie};`)}}return ro.SaxesParser=Lr,ro}var w1={},aj;function Cee(){if(aj)return w1;aj=1,Object.defineProperty(w1,"__esModule",{value:!0}),w1.ParseError=void 0;let u=class extends Error{constructor(o,i){const t=o.saxParser;super(o.trackPosition?`Line ${t.line} column ${t.column+1}: ${i}`:i)}};return w1.ParseError=u,w1}var no={},UA={},uj;function Bee(){return uj||(uj=1,(function(u){Object.defineProperty(u,"__esModule",{value:!0}),u.validateIri=u.IriValidationStrategy=void 0;function n(){const a="[!$&'()*+,;=]",c="%[a-fA-F0-9]{2}",s="([0-9]|[1-9][0-9]|1[0-9][0-9]|2[0-4][0-9]|25[0-5])",d=`${s}\\.${s}\\.${s}\\.${s}`,l="[a-fA-F0-9]{1,4}",f=`(${l}:${l}|${d})`,h=`((${l}:){6}${f}|::(${l}:){5}${f}|(${l})?::(${l}:){4}${f}|((${l}:){0,1}${l})?::(${l}:){3}${f}|((${l}:){0,2}${l})?::(${l}:){2}${f}|((${l}:){0,3}${l})?::${l}:${f}|((${l}:){0,4}${l})?::${f}|((${l}:){0,5}${l})?::${l}|((${l}:){0,6}${l})?::)`,p=`v[a-fA-F0-9]+\\.(${a}|${a}|":)+`,y=`\\[(${h}|${p})\\]`,_="[0-9]*",b="[a-zA-Z][a-zA-Z0-9+\\-.]*",g="[---]",S="[a-zA-Z0-9\\-._~-----------------]",F=`(${S}|${c}|${a}|[:@])*`,M=`(${F}|[\\/?])*`,O=`(${F}|${g}|[\\/?])*`,w=`(${F})+`,E=`(${F})*`,R="",D=`${w}(\\/${E})*`,B=`\\/(${w}(\\/${E})*)?`,C=`(\\/${E})*`,$=`(${S}|${c}|${a})*`,Z=`(${y}|${d}|${$})`,G=`(\\/\\/${`(${`(${S}|${c}|${a}|:)*`}@)?${Z}(:${_})?`}${C}|${B}|${D}|${R})`,fe=`^${b}:${G}(\\?${O})?(#${M})?$`;return new RegExp(fe,"u")}const o=n(),i=/^[A-Za-z][\d+-.A-Za-z]*:[^\u0000-\u0020"<>\\^`{|}]*$/u;var t;(function(r){r.Strict="strict",r.Pragmatic="pragmatic",r.None="none"})(t=u.IriValidationStrategy||(u.IriValidationStrategy={}));function e(r,a=t.Strict){switch(a){case t.Strict:return o.test(r)?void 0:new Error(`Invalid IRI according to RFC 3987: '${r}'`);case t.Pragmatic:return i.test(r)?void 0:new Error(`Invalid IRI according to RDF Turtle: '${r}'`);case t.None:return;default:return new Error(`Not supported validation strategy "${a}"`)}}u.validateIri=e})(UA)),UA}var oj;function $ee(){return oj||(oj=1,(function(u){var n=no&&no.__createBinding||(Object.create?(function(i,t,e,r){r===void 0&&(r=e);var a=Object.getOwnPropertyDescriptor(t,e);(!a||("get"in a?!t.__esModule:a.writable||a.configurable))&&(a={enumerable:!0,get:function(){return t[e]}}),Object.defineProperty(i,r,a)}):(function(i,t,e,r){r===void 0&&(r=e),i[r]=t[e]})),o=no&&no.__exportStar||function(i,t){for(var e in i)e!=="default"&&!Object.prototype.hasOwnProperty.call(t,e)&&n(t,i,e)};Object.defineProperty(u,"__esModule",{value:!0}),o(Bee(),u)})(no)),no}var sj;function Uee(){if(sj)return to;sj=1,Object.defineProperty(to,"__esModule",{value:!0}),to.ParseType=to.RdfXmlParser=void 0;const u=Jr(),n=ij(),o=Pt(),i=Cee(),t=hr(),e=$ee();let r=class ir extends o.Transform{constructor(s){super({readableObjectMode:!0}),this.activeTagStack=[],this.nodeIds={},s&&(Object.assign(this,s),this.options=s),this.dataFactory||(this.dataFactory=new t.DataFactory),this.baseIRI||(this.baseIRI=""),this.defaultGraph||(this.defaultGraph=this.dataFactory.defaultGraph()),this.validateUri!==!1&&(this.validateUri=!0),this.iriValidationStrategy||(this.iriValidationStrategy=this.validateUri?e.IriValidationStrategy.Pragmatic:e.IriValidationStrategy.None),this.saxParser=new n.SaxesParser({xmlns:!0,position:this.trackPosition}),this.attachSaxListeners()}import(s){const d=new o.PassThrough({readableObjectMode:!0});s.on("error",f=>l.emit("error",f)),s.on("data",f=>d.push(f)),s.on("end",()=>d.push(null));const l=d.pipe(new ir(this.options));return l}_transform(s,d,l){try{this.saxParser.write(s)}catch(f){return l(f)}l()}newParseError(s){return new i.ParseError(this,s)}valueToUri(s,d){return this.uriToNamedNode((0,u.resolve)(s,d.baseIRI))}uriToNamedNode(s){const d=(0,e.validateIri)(s,this.iriValidationStrategy);if(d instanceof Error)throw this.newParseError(d.message);return this.dataFactory.namedNode(s)}validateNcname(s){if(!ir.NCNAME_MATCHER.test(s))throw this.newParseError(`Not a valid NCName: ${s}`)}attachSaxListeners(){this.saxParser.on("error",s=>this.emit("error",s)),this.saxParser.on("opentag",this.onTag.bind(this)),this.saxParser.on("text",this.onText.bind(this)),this.saxParser.on("cdata",this.onText.bind(this)),this.saxParser.on("closetag",this.onCloseTag.bind(this)),this.saxParser.on("doctype",this.onDoctype.bind(this))}onTag(s){const d=this.activeTagStack.length?this.activeTagStack[this.activeTagStack.length-1]:null;let l=a.RESOURCE;if(d&&(d.hadChildren=!0,l=d.childrenParseType),d&&d.childrenStringTags){const h=s.name;let p="";for(const m in s.attributes)p+=` ${m}="${s.attributes[m].value}"`;const _=`<${`${h}${p}`}>`;d.childrenStringTags.push(_);const b={childrenStringTags:d.childrenStringTags};b.childrenStringEmitClosingTag=`</${h}>`,this.activeTagStack.push(b);return}const f={};d?(f.language=d.language,f.baseIRI=d.baseIRI):f.baseIRI=this.baseIRI,this.activeTagStack.push(f),l===a.RESOURCE?this.onTagResource(s,f,d,!d):this.onTagProperty(s,f,d)}onTagResource(s,d,l,f){d.childrenParseType=a.PROPERTY;let h=!0;if(s.uri===ir.RDF){if(!f&&ir.FORBIDDEN_NODE_ELEMENTS.indexOf(s.local)>=0)throw this.newParseError(`Illegal node element name: ${s.local}`);switch(s.local){case"RDF":d.childrenParseType=a.RESOURCE;case"Description":h=!1}}const p=[],y=[];let _=null,b=!1,m=!1,g=null;for(const T in s.attributes){const v=s.attributes[T];if(l&&v.uri===ir.RDF)switch(v.local){case"about":if(_)throw this.newParseError(`Only one of rdf:about, rdf:nodeID and rdf:ID can be present, while ${v.value} and ${_} where found.`);_=v.value;continue;case"ID":if(_)throw this.newParseError(`Only one of rdf:about, rdf:nodeID and rdf:ID can be present, while ${v.value} and ${_} where found.`);this.validateNcname(v.value),_="#"+v.value,b=!0;continue;case"nodeID":if(_)throw this.newParseError(`Only one of rdf:about, rdf:nodeID and rdf:ID can be present, while ${v.value} and ${_} where found.`);this.validateNcname(v.value),_=v.value,m=!0;continue;case"bagID":throw this.newParseError("rdf:bagID is not supported.");case"type":g=v.value;continue;case"aboutEach":throw this.newParseError("rdf:aboutEach is not supported.");case"aboutEachPrefix":throw this.newParseError("rdf:aboutEachPrefix is not supported.");case"li":throw this.newParseError("rdf:li on node elements are not supported.")}else if(v.uri===ir.XML){if(v.local==="lang"){d.language=v.value===""?null:v.value.toLowerCase();continue}else if(v.local==="base"){d.baseIRI=(0,u.resolve)(v.value,d.baseIRI);continue}}v.prefix!=="xml"&&v.prefix!=="xmlns"&&(v.prefix!==""||v.local!=="xmlns")&&v.uri&&(p.push(this.uriToNamedNode(v.uri+v.local)),y.push(v.value))}if(_!==null&&(d.subject=m?this.dataFactory.blankNode(_):this.valueToUri(_,d),b&&this.claimNodeId(d.subject)),d.subject||(d.subject=this.dataFactory.blankNode()),h){const T=this.uriToNamedNode(s.uri+s.local);this.emitTriple(d.subject,this.dataFactory.namedNode(ir.RDF+"type"),T,l?l.reifiedStatementId:null)}if(l){if(l.predicate)if(l.childrenCollectionSubject){const T=this.dataFactory.blankNode();this.emitTriple(l.childrenCollectionSubject,l.childrenCollectionPredicate,T,l.reifiedStatementId),this.emitTriple(T,this.dataFactory.namedNode(ir.RDF+"first"),d.subject,d.reifiedStatementId),l.childrenCollectionSubject=T,l.childrenCollectionPredicate=this.dataFactory.namedNode(ir.RDF+"rest")}else{this.emitTriple(l.subject,l.predicate,d.subject,l.reifiedStatementId);for(let T=0;T<l.predicateSubPredicates.length;T++)this.emitTriple(d.subject,l.predicateSubPredicates[T],l.predicateSubObjects[T],null);l.predicateSubPredicates=[],l.predicateSubObjects=[],l.predicateEmitted=!0}for(let T=0;T<p.length;T++){const v=this.dataFactory.literal(y[T],d.datatype||d.language);this.emitTriple(d.subject,p[T],v,l.reifiedStatementId)}g&&this.emitTriple(d.subject,this.dataFactory.namedNode(ir.RDF+"type"),this.uriToNamedNode(g),null)}}onTagProperty(s,d,l){if(d.childrenParseType=a.RESOURCE,d.subject=l.subject,s.uri===ir.RDF&&s.local==="li"?(l.listItemCounter||(l.listItemCounter=1),d.predicate=this.uriToNamedNode(s.uri+"_"+l.listItemCounter++)):d.predicate=this.uriToNamedNode(s.uri+s.local),s.uri===ir.RDF&&ir.FORBIDDEN_PROPERTY_ELEMENTS.indexOf(s.local)>=0)throw this.newParseError(`Illegal property element name: ${s.local}`);d.predicateSubPredicates=[],d.predicateSubObjects=[];let f=!1,h=!1,p=null,y=!0;const _=[],b=[];for(const m in s.attributes){const g=s.attributes[m];if(g.uri===ir.RDF)switch(g.local){case"resource":if(p)throw this.newParseError(`Found both rdf:resource (${g.value}) and rdf:nodeID (${p}).`);if(f)throw this.newParseError(`rdf:parseType is not allowed on property elements with rdf:resource (${g.value})`);d.hadChildren=!0,p=g.value,y=!1;continue;case"datatype":if(h)throw this.newParseError(`Found both non-rdf:* property attributes and rdf:datatype (${g.value}).`);if(f)throw this.newParseError(`rdf:parseType is not allowed on property elements with rdf:datatype (${g.value})`);d.datatype=this.valueToUri(g.value,d);continue;case"nodeID":if(h)throw this.newParseError(`Found both non-rdf:* property attributes and rdf:nodeID (${g.value}).`);if(d.hadChildren)throw this.newParseError(`Found both rdf:resource and rdf:nodeID (${g.value}).`);if(f)throw this.newParseError(`rdf:parseType is not allowed on property elements with rdf:nodeID (${g.value})`);this.validateNcname(g.value),d.hadChildren=!0,p=g.value,y=!0;continue;case"bagID":throw this.newParseError("rdf:bagID is not supported.");case"parseType":if(h)throw this.newParseError("rdf:parseType is not allowed when non-rdf:* property attributes are present");if(d.datatype)throw this.newParseError(`rdf:parseType is not allowed on property elements with rdf:datatype (${d.datatype.value})`);if(p)throw this.newParseError(`rdf:parseType is not allowed on property elements with rdf:nodeID or rdf:resource (${p})`);if(g.value==="Resource"){f=!0,d.childrenParseType=a.PROPERTY;const T=this.dataFactory.blankNode();this.emitTriple(d.subject,d.predicate,T,d.reifiedStatementId),d.subject=T,d.predicate=null}else g.value==="Collection"?(f=!0,d.hadChildren=!0,d.childrenCollectionSubject=d.subject,d.childrenCollectionPredicate=d.predicate,y=!1):g.value==="Literal"&&(f=!0,d.childrenTagsToString=!0,d.childrenStringTags=[]);continue;case"ID":this.validateNcname(g.value),d.reifiedStatementId=this.valueToUri("#"+g.value,d),this.claimNodeId(d.reifiedStatementId);continue}else if(g.uri===ir.XML&&g.local==="lang"){d.language=g.value===""?null:g.value.toLowerCase();continue}if(g.prefix!=="xml"&&g.prefix!=="xmlns"&&(g.prefix!==""||g.local!=="xmlns")&&g.uri){if(f||d.datatype)throw this.newParseError(`Found illegal rdf:* properties on property element with attribute: ${g.value}`);d.hadChildren=!0,h=!0,_.push(this.uriToNamedNode(g.uri+g.local)),b.push(this.dataFactory.literal(g.value,d.datatype||d.language))}}if(p!==null){const m=d.subject;d.subject=y?this.dataFactory.blankNode(p):this.valueToUri(p,d),this.emitTriple(m,d.predicate,d.subject,d.reifiedStatementId);for(let g=0;g<_.length;g++)this.emitTriple(d.subject,_[g],b[g],null);d.predicateEmitted=!0}else y&&(d.predicateSubPredicates=_,d.predicateSubObjects=b,d.predicateEmitted=!1)}emitTriple(s,d,l,f){this.push(this.dataFactory.quad(s,d,l,this.defaultGraph)),f&&(this.push(this.dataFactory.quad(f,this.dataFactory.namedNode(ir.RDF+"type"),this.dataFactory.namedNode(ir.RDF+"Statement"),this.defaultGraph)),this.push(this.dataFactory.quad(f,this.dataFactory.namedNode(ir.RDF+"subject"),s,this.defaultGraph)),this.push(this.dataFactory.quad(f,this.dataFactory.namedNode(ir.RDF+"predicate"),d,this.defaultGraph)),this.push(this.dataFactory.quad(f,this.dataFactory.namedNode(ir.RDF+"object"),l,this.defaultGraph)))}claimNodeId(s){if(!this.allowDuplicateRdfIds){if(this.nodeIds[s.value])throw this.newParseError(`Found multiple occurrences of rdf:ID='${s.value}'.`);this.nodeIds[s.value]=!0}}onText(s){const d=this.activeTagStack.length?this.activeTagStack[this.activeTagStack.length-1]:null;d&&(d.childrenStringTags?d.childrenStringTags.push(s):d.predicate&&(d.text=s))}onCloseTag(){const s=this.activeTagStack.pop();if(s.childrenStringEmitClosingTag&&s.childrenStringTags.push(s.childrenStringEmitClosingTag),s.childrenTagsToString&&(s.datatype=this.dataFactory.namedNode(ir.RDF+"XMLLiteral"),s.text=s.childrenStringTags.join(""),s.hadChildren=!1),s.childrenCollectionSubject)this.emitTriple(s.childrenCollectionSubject,s.childrenCollectionPredicate,this.dataFactory.namedNode(ir.RDF+"nil"),s.reifiedStatementId);else if(s.predicate){if(!s.hadChildren&&s.childrenParseType!==a.PROPERTY)this.emitTriple(s.subject,s.predicate,this.dataFactory.literal(s.text||"",s.datatype||s.language),s.reifiedStatementId);else if(!s.predicateEmitted){const d=this.dataFactory.blankNode();this.emitTriple(s.subject,s.predicate,d,s.reifiedStatementId);for(let l=0;l<s.predicateSubPredicates.length;l++)this.emitTriple(d,s.predicateSubPredicates[l],s.predicateSubObjects[l],null)}}}onDoctype(s){s.replace(/<!ENTITY\s+([^\s]+)\s+["']([^"']+)["']\s*>/g,(d,l,f)=>(this.saxParser.ENTITIES[l]=f,""))}};to.RdfXmlParser=r,r.MIME_TYPE="application/rdf+xml",r.RDF="http://www.w3.org/1999/02/22-rdf-syntax-ns#",r.XML="http://www.w3.org/XML/1998/namespace",r.FORBIDDEN_NODE_ELEMENTS=["RDF","ID","about","bagID","parseType","resource","nodeID","li","aboutEach","aboutEachPrefix"],r.FORBIDDEN_PROPERTY_ELEMENTS=["Description","RDF","ID","about","bagID","parseType","resource","nodeID","aboutEach","aboutEachPrefix"],r.NCNAME_MATCHER=/^([A-Za-z\xC0-\xD6\xD8-\xF6\u{F8}-\u{2FF}\u{370}-\u{37D}\u{37F}-\u{1FFF}\u{200C}-\u{200D}\u{2070}-\u{218F}\u{2C00}-\u{2FEF}\u{3001}-\u{D7FF}\u{F900}-\u{FDCF}\u{FDF0}-\u{FFFD}\u{10000}-\u{EFFFF}_])([A-Za-z\xC0-\xD6\xD8-\xF6\u{F8}-\u{2FF}\u{370}-\u{37D}\u{37F}-\u{1FFF}\u{200C}-\u{200D}\u{2070}-\u{218F}\u{2C00}-\u{2FEF}\u{3001}-\u{D7FF}\u{F900}-\u{FDCF}\u{FDF0}-\u{FFFD}\u{10000}-\u{EFFFF}_\-.0-9#xB7\u{0300}-\u{036F}\u{203F}-\u{2040}])*$/u;var a;return(function(c){c[c.RESOURCE=0]="RESOURCE",c[c.PROPERTY=1]="PROPERTY"})(a||(to.ParseType=a={})),to}var cj;function Vee(){return cj||(cj=1,(function(u){var n=eo&&eo.__createBinding||(Object.create?(function(i,t,e,r){r===void 0&&(r=e);var a=Object.getOwnPropertyDescriptor(t,e);(!a||("get"in a?!t.__esModule:a.writable||a.configurable))&&(a={enumerable:!0,get:function(){return t[e]}}),Object.defineProperty(i,r,a)}):(function(i,t,e,r){r===void 0&&(r=e),i[r]=t[e]})),o=eo&&eo.__exportStar||function(i,t){for(var e in i)e!=="default"&&!Object.prototype.hasOwnProperty.call(t,e)&&n(t,i,e)};Object.defineProperty(u,"__esModule",{value:!0}),o(Uee(),u)})(eo)),eo}var dj;function Qee(){if(dj)return T1;dj=1,Object.defineProperty(T1,"__esModule",{value:!0}),T1.ActorRdfParseRdfXml=void 0;const u=mf(),n=qe(),o=Vee();let i=class extends u.ActorRdfParseFixedMediaTypes{constructor(e){super(e)}async runHandle(e){var c;const r=e.context.getSafe(n.KeysInitQuery.dataFactory);e.data.on("error",s=>a.emit("error",s));const a=e.data.pipe(new o.RdfXmlParser({dataFactory:r,baseIRI:(c=e.metadata)==null?void 0:c.baseIRI}));return{data:a,metadata:{triples:!0}}}};return T1.ActorRdfParseRdfXml=i,T1}var lj;function Hee(){return lj||(lj=1,(function(u){var n=Zu&&Zu.__createBinding||(Object.create?(function(i,t,e,r){r===void 0&&(r=e);var a=Object.getOwnPropertyDescriptor(t,e);(!a||("get"in a?!t.__esModule:a.writable||a.configurable))&&(a={enumerable:!0,get:function(){return t[e]}}),Object.defineProperty(i,r,a)}):(function(i,t,e,r){r===void 0&&(r=e),i[r]=t[e]})),o=Zu&&Zu.__exportStar||function(i,t){for(var e in i)e!=="default"&&!Object.prototype.hasOwnProperty.call(t,e)&&n(t,i,e)};Object.defineProperty(u,"__esModule",{value:!0}),o(Qee(),u)})(Zu)),Zu}var io={},S1={},ao={},VA={},fj;function Gee(){return fj||(fj=1,Object.defineProperty(VA,"__esModule",{value:!0})),VA}var QA={},hj;function zee(){return hj||(hj=1,Object.defineProperty(QA,"__esModule",{value:!0})),QA}var HA={},pj;function Xee(){return pj||(pj=1,Object.defineProperty(HA,"__esModule",{value:!0})),HA}var O1={},Pn={},Dn={},GA={},Nn={},I3={},yj;function Jee(){return yj||(yj=1,Object.defineProperty(I3,"__esModule",{value:!0}),I3.default=new Uint16Array('<\0\0\0\0\0\0EMabcfglmnoprstu\\bfmsligP&cutereve;iyx}rc;r;ravepha;acr;d;gpon;f;plyFunction;ingcsr;ign;ildemlaceforsucrkslash;;ed;y;crtause;noullis;a;r;pf;eve;cmpeq;HOacdefhilorsucy;PYcpyute;;italDifferentialD;leys;aeioron;dilrc;nint;ot;dnilla;terDot;i;rcleDMPTot;inus;lus;imes;ocskwiseContourIntegral;eCurlyDQoubleQuote;uote;lnpuon;e;gitruent;nt;ourIntegral;fr;oduct;nterClockwiseContourIntegral;oss;cr;p;Cap;DJSZacefios;otrahd;cy;cy;cy;grsger;r;hv;ayron;;l;ta;r;afcmriticalADGTcute;o;bleAcute;rave;ilde;ond;ferentialD;\0\0\0\0f;;DEot;qual;bleCDLRUVontourIntegrao\0\0nArrow;eoftARTrrow;ightArrow;engLReftARrrow;ightArrow;ightArrow;ightATrrow;ee;p\0\0rrow;ownArrow;erticalBar;nABLRTarrow;BUar;pArrow;reve;eft\0\0ightVector;eeVector;ector;Bar;ight\0eeVector;ector;Bar;ee;Arrow;ctr;rok;NTacdfglmopqstuxG;Hcuteaiyron;rc;ot;r;raveement;apcr;ty\0\0mallSquare;erySmallSquare;gpon;f;silon;uail;Tilde;librium;cir;m;a;mlipsts;onentialE;cfiosy;r;lled\0\0mallSquare;erySmallSquare;\0\0\0f;All;riertrf;cJTabcdfgorstcy;>mma;d;reve;eiydil;rc;;ot;r;;pf;eaterEFGLSTqual;Less;ullEqual;reater;ess;lantEqual;ilde;cr;;AacfiosuRDcy;ctek;;irc;r;lbertSpace;\0f;izontalLine;ctrok;mpownHumqual;EJOacdfgmnostucy;lig;cy;cuteiyrc;ot;r;rave;apcgr;inaryI;lie\0;egrral;section;isibleCTomma;imes;gpton;f;a;cr;ilde;\0cy;lcfosuiyrc;;r;pf;\0r;rcy;kcy;HJacfoscy;cy;ppa;eydil;;r;pf;cr;JTaceflmostcy;<cmnprute;bda;g;lacetrf;r;aeyron;dil;;fstACDFRTUVarnrgleBracket;row;BRar;ightArrow;eiling;o\0bleBracket;n\0eeVector;ector;Bar;loor;ightAVrrow;ector;ere;AVrrow;ector;iangle;BEar;qual;pDTVownVector;eeVector;ector;Bar;ector;Bar;ightsEFGLSTqualGreater;ullEqual;reater;ess;lantEqual;ilde;r;;eftarrow;idot;npwgLRlreftARrrow;ightArrow;ightArrow;eftarightightf;erLReftArrow;ightArrow;cht;rok;;acefiosup;y;dliumSpace;lintrf;r;nusPlus;pf;c;Jacefostucy;cute;aeyron;dil;;gswativeMTVediumSpace;hicneryThitedGLreaterGreateessLesLine;r;Bnptreak;BreakingSpace;f;;CDEGHLNPRSTVoungruent;pCap;oubleVerticalBar;lqxement;ual;Tilde;ists;reater;EFGLSTqual;ullEqual;reater;ess;lantEqual;ilde;umpownHump;qual;efstTriangle;BEar;qual;s;EGLSTqual;reater;ess;lantEqual;ilde;estedGLreaterGreater;essLess;recedes;ESqual;lantEqual;eiverseElement;ghtTriangle;BEar;qual;quuareSubpset;Equal;erset;Equal;bcpset;Equal;ceeds;ESTqual;lantEqual;ilde;erset;Equal;ilde;EFTqual;ullEqual;ilde;erticalBar;cr;ilde;Eacdfgmoprstuvlig;cuteiyrc;blac;r;raveaeicr;ga;cron;pf;enCurlyDQoubleQuote;uote;;clr;ashidees;mlerBParr;acek;et;arenthesis;acfhilorsrtialD;y;r;i;;usMinus;ipncareplanf;;eiocedes;ESTqual;lantEqual;ilde;me;dpuct;ortion;al;cir;;UfosOT"r;pf;cr;BEacefhiorsuarr;Gcnrute;g;r;tl;aeyron;dil;;;verseEUlqement;uilibrium;pEquilibrium;ro;ghtACDFTUVanrgleBracket;row;BLar;eftArrow;eiling;o\0bleBracket;n\0eeVector;ector;Bar;loor;ere;AVrrow;ector;iangle;BEar;qual;pDTVownVector;eeVector;ector;Bar;ector;Bar;puf;ndImplies;ightarrow;chr;;leDelayed;HOacfhimoqstuCcHcy;y;FTcy;cute;;aeiyron;dil;rc;;r;ortDLRUownArroweftArrowightArrowpArrow;gma;allCircle;pf;\0\0t;are;ISUntersection;ubpset;Equal;erset;Equal;nion;cr;ar;bcmp;set;Equal;cheeds;ESTqual;lantEqual;ilde;Th;;esrset;Equal;etHRSacfhiorsORNADE;Hccy;y;bu;;aeyron;dil;;r;ei\0efore;a;cnkSpace;Space;lde;EFTqual;ullEqual;ilde;pf;ipleDot;ctr;rok;\0\0\0\0\0\0\0cruter;ocir;r\0y;ve;iyrc;blac;r;raveacr;dierBParr;acek;et;arenthesis;on;Plus;gpon;f;ADETadpsrrow;BDar;ownArrow;ownArrow;quilibrium;ee;Arrow;ownerLReftArrow;ightArrow;i;lon;ing;cr;ilde;mlDbcdefosvash;ar;y;ash;l;er;btyar;;icalBLSTar;ine;eparator;ilde;ThinSpace;r;pf;cr;dash;cefosirc;dge;r;pf;cr;fiosr;;pf;cr;AIUacfosucy;cy;cy;cuteiyrc;;r;pf;cr;ml;Hacdefoscy;cute;ayron;;ot;\0oWidta;r;pf;cr;\0\0\0\0\0\0\0cutereve;;Ediuy;;rcte;lig;r;raveepfpsym;ha;apcclr;g;\0\0;adsvnd;;lope;;;elmrsz;esd;a;;;;;;;;t;vb;d;pth;arr;gpon;f;;Eaeiop;cir;;d;s;rox;eingctyr;;mp;eildemlcioninnt;Nabcdefiklnoprsuot;crkcepsong;psilon;rime;im;eq;ee;ed;gerk;tbrk;oy;quo;cmprtaus;eptyv;snoahw;;een;r;gcostuvwaiurc;pdptot;lus;imes;\0\0cup;ar;riangleduown;p;plus;earow;akocnklstozenge;riangle;dlrown;eft;ight;k;\0\0;;4;ck;eo;q=uiv;t;ptwxf;;tomtie;DHUVbdhmptuvLRlr;;;;;DUdu;;;;LRlr;;;;;HLRhlr;;;;;;ox;LRlr;;;;;DUdu;;;;inus;lus;imes;LRlr;;;;;HLRhlr;;;;;;evbarceior;mi;m;el;bh;sub;l;etp;Ee;;q\0\0\0\0\0\0\0\0\0\0cprute;;abcdsnd;rcup;aup;p;ot;;eot;aeiu\0s;on;dilrc;ps;sm;ot;dmnilptyv;t;err;ceiy;ck;mark;r;Ecefms;;elq;e\0\0rrowlreft;ight;RSacd;st;irc;ash;nint;id;cir;ubs;uit\0on;e;q\0\0a;t;;flemxente\0;dot;nfry;o;sr;aorr;ss;cur;bp;e;;e;dot;delprvwarrlr;;\0\0r;c;arr;p;;bcdosrcap;aup;p;ot;r;;alrvrr;m;yevwq\0\0reuee;edge;enearrowlreftightecioninnt;lcty;AHabcdefhijlorstuwzrar;glrsger;eth;h;varow;aayron;;;aogrr;tseq;glmta;ptyv;irsht;;arlraegsvm;osnd;suit;amma;in;;iode;ontimes;ncy;c\0\0rn;op;lptuwlar;f;;empsq;dot;inus;lus;quare;blebarwedgnadhownarrowarpoonlrefighkaro\0\0rn;op;cotry;;l;rok;drot;i;fahraangle;ciy;grarr;DacdefglmnopqrstuxDoocsuteter;aioyron;r;clon;;ot;Drot;;;rsave;dot;;ilsnters;;;dot;apscr;ty;svetp1;;;gs;p;gpon;f;alsr;sl;us;i;lvon;csuviorc\0\0antgltressaeils;st;v;DD;parsl;Daot;rr;cdir;oah;mrlo;cipl;seoctationential\0\0\0\0\0\0\0llingdotsey;male;ilrlig;\0\0g;ig;;lig;lig;fjaltt;ig;ns;of;\0f;ak;v;artint;aocs\0\0;;;;\0;;\0\0;;5;\0;;8;l;wn;cr;Eabcdefgijlnorstv;l;cmpute;ma;d;reve;iyrc;;ot;;lqs;qslan;cdlc;ot;o;l;;es;r;;gmel;cy;;Eaj;;;Eaes;p;prox;q;qim;pf;cir;m;el;;>;cdlqrci;r;ot;Par;uest;adels\0pror;qlqlesienrtneqq;Aabcefkosyrilmrrsfildrcy;;cwir;;ar;irc;alrrts;uitlip;con;r;sewarow;arow;amoprrr;tht;klreftarrow;ightarrow;f;bar;cltr;asrok;bpull;hen\0\0\0\0\0\0cute;iyrc;cxy;clfr;rave;inoinnt;t;fin;ta;lig;aopcgtr;elpinarh;f;ed;;cfotare;in;tie;do;celpal;grerarhk;rod;cgpty;on;f;a;uestcir;n;Edsv;ot;;v;;ilde;\0cy;lcfmosuiyrc;;r;ath;pf;\0r;rcy;kcy;acfghjosppa;v;eydil;;r;reen;cy;cy;pf;cr;ABEHabcdefghjlmnoprstuvartrail;arr;;g;ar;\0\0\0\0\0\0\0\0\0ute;mptyv;rabda;g;dl;;uor;bfhlpst;fs;s;p;l;im;l;;aeil;;s;abrrr;rk;akcek;;es;ldu;;aeuyron;diil;;cqrsa;uo;rduhar;shar;h;;fgqstahlrtrrow;taarpoonduownpeftarrows;ightahsrrow;sarpoonquigarrohreetimes;;qslan;cdgsc;ot;o;r;;es;adegspproot;qgqgtiilrsht;;;E;rdu;l;lk;cy;;achtrorneard;ri;iodot;ust;acheEaes;p;prox;q;qim;abnoptwznrg;r;rglmreftarightapsto;ightparrowlrefight;aflr;;us;imes;st;;efngear;lt;achmtrornear;d;;ri;achiqtquo;r;m;eg;;buo;r;rok;<;cdhilqrci;r;remes;arr;uest;Piar;;efrdushar;har;enrtneqq;DacdefhilnopsuDot;clprret;;ese;sto;dluowefker;oymma;;ash;asuredangler;o;cdnro;acdsir;otus;bd;u;p;dpels;f;ctr;pos;lmtimap;GLRVabcdefghijlmoprstuvwgt;;veltftarrrow;ightarrow;;;vightarrow;Ddash;ash;bcnptlaute;g;;Eiop;d;s;rour;al;s\0pmp;eaeouy\0;on;dil;ng;dot;p;;ash;;Aadqsxrr;rhrk;;oot;uieiar;ist;sr;Eest;qs;qslani;rAaprrr;ar;;sv;d;cy;AEadestr;rr;r;;fqstarrroightarro;qslan;si;ri;eiptf;;inn;Edv;ot;;;i;v;;aorr;astllel;;lint;;ceu;c;eAaitrrr;cw;;ghtarrowri;echimpqu;ceru;ort\0\0arm;e;qsubpbcp;Ees;et;eq;qc;e;Ees;et;eq;qgilrldeianglelreft;eight;e;m;esro;p;DHadgilrsash;arr;p;ash;et;;>nfin;Aetrr;;;r<ie;Atrr;rie;im;Aanrr;rhrk;;oear;\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0csuteiyr;c;abioslac;v;old;lig;crir;;\0\0\0n;ave;bmar;acitrirr;oss;n;aeicr;ga;cdnron;;pf;aelr;rp;;adiosvr;efmr;ofgof;r;lope;;cloashl;idees;as;mlbar;\0\0\0\0\0\0\0\0\0r;ast;lle\0\0m;;y;rcimptnt;od;il;enk;r;imo;v;mane;;tvchfork;aunckk;h;s;abcdemstcir;ir;ou;;nim;wo;ipuntint;f;nd;Eaceinosu;p;u;c;acenspprourlyeaespprox;qq;im;ime;sEasdfpalslar;ine;urf;;trel;cir;;ncsp;fiopsur;pf;rime;cr;aeoteirnionnt;st;eABHabcdefhilmnoprstuxartrail;arar;cdenqrteu;te;imptyv;g;del;;uor;abcfhlpstwp;;fs;;s;l;im;l;;aiil;o;nalabrrrk;akcek;;es;ldu;;aeuyron;diil;;clqsa;dhar;uo;rh;acgl;ipsnart;ilrsht;;aordu;l;;v;gnshtahlrstrrow;taarpoonduowpeftahrrowarpoonightarrows;quigarrohreetimes;g;ingdotseahmra;oust;achemid;abptnrg;r;raflr;;us;imes;apr;gt;olint;arachqquo;r;buo;rhirremes;i;efltri;luhar;;\0\0\0\0\0\0\0cute;qu;Eaceinpsy;\0;on;u;dil;rc;Eas;p;im;olint;i;ot;be;Aacmstxrr;rhr;oti;war;minnut;r;oacoyrp;hycy;;rt\0\0iaragmma;fv;;deglnprot;;q;E;;E;e;lus;arr;araeitlslsetmhp;parsl;dle;;e;s;flptcy;;b;ar;f;adres;uitcsuaup;s;p;s;ubp;eset;e;eset;e;afrarcemtr;tmiararr;fanighteppsilohsbcmnp;Edemnprs;ot;;dot;ult;Ee;;lus;arr;eiut;enq;qeq;qm;bp;;c;acenspprourlyeaespproqg;123;Edehlmnps;ost;ub;;dot;soul;b;arr;ult;Ee;;lus;eiut;enq;qeq;qm;bp;;Aanrr;rhr;owar;lig\0\0\0\0\0\0\0\0\0\0\0\0get;;raeyron;dil;;lrec;r;eiko\0e4fa;svym;cnkaspproimsasrnes;bd;ar;;eps;bcfot;ir;;ork;rime;aipdadempstngle;dlqrowneft;e;ight;eot;inus;lus;b;ime;ezium;chtry;;cy;rok;ioxheadlreftarroightarrowAHabcdfghlmoprstuwrar;cruter\0y;ve;iyrc;abhrlac;airsht;;raverlrlk;ct\0\0rn;erop;ri;alcr;gpon;f;adhlsuownarpoonlrefighi;hlonparrows;cit\0\0rn;erop;ng;ri;cr;dirot;lde;i;famrlangle;ABDacdeflnoprszrar;v;asnrgrt;eknprstappothinhirop;hiugmbpsetneq;q;setneq;q;hretianglelreftighty;ashelr;bear;q;lip;btar;trsubppf;rotrcur;bpnEenEeigzag;cefoprsirc;dibgar;e;q;erp;r;pf;;eatcr;\0\0\0\0\0\0\0trr;Aarr;Aarrais;dptfl;imAarrcqr;ptracefiosucuyte;iyrc;;nr;cy;pf;cr;cmy;lacdefhioswcute;ayron;;ot;ettra;r;cy;grarr;pf;cr;jn;j;'.split("").map(function(u){return u.charCodeAt(0)}))),I3}var P3={},bj;function Kee(){return bj||(bj=1,Object.defineProperty(P3,"__esModule",{value:!0}),P3.default=new Uint16Array("aglq	\x1B\0\0p;os;t;t;uot;".split("").map(function(u){return u.charCodeAt(0)}))),P3}var zA={},_j;function gj(){return _j||(_j=1,(function(u){var n;Object.defineProperty(u,"__esModule",{value:!0}),u.replaceCodePoint=u.fromCodePoint=void 0;var o=new Map([[0,65533],[128,8364],[130,8218],[131,402],[132,8222],[133,8230],[134,8224],[135,8225],[136,710],[137,8240],[138,352],[139,8249],[140,338],[142,381],[145,8216],[146,8217],[147,8220],[148,8221],[149,8226],[150,8211],[151,8212],[152,732],[153,8482],[154,353],[155,8250],[156,339],[158,382],[159,376]]);u.fromCodePoint=(n=String.fromCodePoint)!==null&&n!==void 0?n:function(e){var r="";return e>65535&&(e-=65536,r+=String.fromCharCode(e>>>10&1023|55296),e=56320|e&1023),r+=String.fromCharCode(e),r};function i(e){var r;return e>=55296&&e<=57343||e>1114111?65533:(r=o.get(e))!==null&&r!==void 0?r:e}u.replaceCodePoint=i;function t(e){return(0,u.fromCodePoint)(i(e))}u.default=t})(zA)),zA}var mj;function D3(){return mj||(mj=1,(function(u){var n=Nn&&Nn.__createBinding||(Object.create?(function(E,R,D,B){B===void 0&&(B=D);var C=Object.getOwnPropertyDescriptor(R,D);(!C||("get"in C?!R.__esModule:C.writable||C.configurable))&&(C={enumerable:!0,get:function(){return R[D]}}),Object.defineProperty(E,B,C)}):(function(E,R,D,B){B===void 0&&(B=D),E[B]=R[D]})),o=Nn&&Nn.__setModuleDefault||(Object.create?(function(E,R){Object.defineProperty(E,"default",{enumerable:!0,value:R})}):function(E,R){E.default=R}),i=Nn&&Nn.__importStar||function(E){if(E&&E.__esModule)return E;var R={};if(E!=null)for(var D in E)D!=="default"&&Object.prototype.hasOwnProperty.call(E,D)&&n(R,E,D);return o(R,E),R},t=Nn&&Nn.__importDefault||function(E){return E&&E.__esModule?E:{default:E}};Object.defineProperty(u,"__esModule",{value:!0}),u.decodeXML=u.decodeHTMLStrict=u.decodeHTMLAttribute=u.decodeHTML=u.determineBranch=u.EntityDecoder=u.DecodingMode=u.BinTrieFlags=u.fromCodePoint=u.replaceCodePoint=u.decodeCodePoint=u.xmlDecodeTree=u.htmlDecodeTree=void 0;var e=t(Jee());u.htmlDecodeTree=e.default;var r=t(Kee());u.xmlDecodeTree=r.default;var a=i(gj());u.decodeCodePoint=a.default;var c=gj();Object.defineProperty(u,"replaceCodePoint",{enumerable:!0,get:function(){return c.replaceCodePoint}}),Object.defineProperty(u,"fromCodePoint",{enumerable:!0,get:function(){return c.fromCodePoint}});var s;(function(E){E[E.NUM=35]="NUM",E[E.SEMI=59]="SEMI",E[E.EQUALS=61]="EQUALS",E[E.ZERO=48]="ZERO",E[E.NINE=57]="NINE",E[E.LOWER_A=97]="LOWER_A",E[E.LOWER_F=102]="LOWER_F",E[E.LOWER_X=120]="LOWER_X",E[E.LOWER_Z=122]="LOWER_Z",E[E.UPPER_A=65]="UPPER_A",E[E.UPPER_F=70]="UPPER_F",E[E.UPPER_Z=90]="UPPER_Z"})(s||(s={}));var d=32,l;(function(E){E[E.VALUE_LENGTH=49152]="VALUE_LENGTH",E[E.BRANCH_LENGTH=16256]="BRANCH_LENGTH",E[E.JUMP_TABLE=127]="JUMP_TABLE"})(l=u.BinTrieFlags||(u.BinTrieFlags={}));function f(E){return E>=s.ZERO&&E<=s.NINE}function h(E){return E>=s.UPPER_A&&E<=s.UPPER_F||E>=s.LOWER_A&&E<=s.LOWER_F}function p(E){return E>=s.UPPER_A&&E<=s.UPPER_Z||E>=s.LOWER_A&&E<=s.LOWER_Z||f(E)}function y(E){return E===s.EQUALS||p(E)}var _;(function(E){E[E.EntityStart=0]="EntityStart",E[E.NumericStart=1]="NumericStart",E[E.NumericDecimal=2]="NumericDecimal",E[E.NumericHex=3]="NumericHex",E[E.NamedEntity=4]="NamedEntity"})(_||(_={}));var b;(function(E){E[E.Legacy=0]="Legacy",E[E.Strict=1]="Strict",E[E.Attribute=2]="Attribute"})(b=u.DecodingMode||(u.DecodingMode={}));var m=(function(){function E(R,D,B){this.decodeTree=R,this.emitCodePoint=D,this.errors=B,this.state=_.EntityStart,this.consumed=1,this.result=0,this.treeIndex=0,this.excess=1,this.decodeMode=b.Strict}return E.prototype.startEntity=function(R){this.decodeMode=R,this.state=_.EntityStart,this.result=0,this.treeIndex=0,this.excess=1,this.consumed=1},E.prototype.write=function(R,D){switch(this.state){case _.EntityStart:return R.charCodeAt(D)===s.NUM?(this.state=_.NumericStart,this.consumed+=1,this.stateNumericStart(R,D+1)):(this.state=_.NamedEntity,this.stateNamedEntity(R,D));case _.NumericStart:return this.stateNumericStart(R,D);case _.NumericDecimal:return this.stateNumericDecimal(R,D);case _.NumericHex:return this.stateNumericHex(R,D);case _.NamedEntity:return this.stateNamedEntity(R,D)}},E.prototype.stateNumericStart=function(R,D){return D>=R.length?-1:(R.charCodeAt(D)|d)===s.LOWER_X?(this.state=_.NumericHex,this.consumed+=1,this.stateNumericHex(R,D+1)):(this.state=_.NumericDecimal,this.stateNumericDecimal(R,D))},E.prototype.addToNumericResult=function(R,D,B,C){if(D!==B){var $=B-D;this.result=this.result*Math.pow(C,$)+parseInt(R.substr(D,$),C),this.consumed+=$}},E.prototype.stateNumericHex=function(R,D){for(var B=D;D<R.length;){var C=R.charCodeAt(D);if(f(C)||h(C))D+=1;else return this.addToNumericResult(R,B,D,16),this.emitNumericEntity(C,3)}return this.addToNumericResult(R,B,D,16),-1},E.prototype.stateNumericDecimal=function(R,D){for(var B=D;D<R.length;){var C=R.charCodeAt(D);if(f(C))D+=1;else return this.addToNumericResult(R,B,D,10),this.emitNumericEntity(C,2)}return this.addToNumericResult(R,B,D,10),-1},E.prototype.emitNumericEntity=function(R,D){var B;if(this.consumed<=D)return(B=this.errors)===null||B===void 0||B.absenceOfDigitsInNumericCharacterReference(this.consumed),0;if(R===s.SEMI)this.consumed+=1;else if(this.decodeMode===b.Strict)return 0;return this.emitCodePoint((0,a.replaceCodePoint)(this.result),this.consumed),this.errors&&(R!==s.SEMI&&this.errors.missingSemicolonAfterCharacterReference(),this.errors.validateNumericCharacterReference(this.result)),this.consumed},E.prototype.stateNamedEntity=function(R,D){for(var B=this.decodeTree,C=B[this.treeIndex],$=(C&l.VALUE_LENGTH)>>14;D<R.length;D++,this.excess++){var Z=R.charCodeAt(D);if(this.treeIndex=T(B,C,this.treeIndex+Math.max(1,$),Z),this.treeIndex<0)return this.result===0||this.decodeMode===b.Attribute&&($===0||y(Z))?0:this.emitNotTerminatedNamedEntity();if(C=B[this.treeIndex],$=(C&l.VALUE_LENGTH)>>14,$!==0){if(Z===s.SEMI)return this.emitNamedEntityData(this.treeIndex,$,this.consumed+this.excess);this.decodeMode!==b.Strict&&(this.result=this.treeIndex,this.consumed+=this.excess,this.excess=0)}}return-1},E.prototype.emitNotTerminatedNamedEntity=function(){var R,D=this,B=D.result,C=D.decodeTree,$=(C[B]&l.VALUE_LENGTH)>>14;return this.emitNamedEntityData(B,$,this.consumed),(R=this.errors)===null||R===void 0||R.missingSemicolonAfterCharacterReference(),this.consumed},E.prototype.emitNamedEntityData=function(R,D,B){var C=this.decodeTree;return this.emitCodePoint(D===1?C[R]&~l.VALUE_LENGTH:C[R+1],B),D===3&&this.emitCodePoint(C[R+2],B),B},E.prototype.end=function(){var R;switch(this.state){case _.NamedEntity:return this.result!==0&&(this.decodeMode!==b.Attribute||this.result===this.treeIndex)?this.emitNotTerminatedNamedEntity():0;case _.NumericDecimal:return this.emitNumericEntity(0,2);case _.NumericHex:return this.emitNumericEntity(0,3);case _.NumericStart:return(R=this.errors)===null||R===void 0||R.absenceOfDigitsInNumericCharacterReference(this.consumed),0;case _.EntityStart:return 0}},E})();u.EntityDecoder=m;function g(E){var R="",D=new m(E,function(B){return R+=(0,a.fromCodePoint)(B)});return function(C,$){for(var Z=0,ee=0;(ee=C.indexOf("&",ee))>=0;){R+=C.slice(Z,ee),D.startEntity($);var ce=D.write(C,ee+1);if(ce<0){Z=ee+D.end();break}Z=ee+ce,ee=ce===0?Z+1:Z}var G=R+C.slice(Z);return R="",G}}function T(E,R,D,B){var C=(R&l.BRANCH_LENGTH)>>7,$=R&l.JUMP_TABLE;if(C===0)return $!==0&&B===$?D:-1;if($){var Z=B-$;return Z<0||Z>=C?-1:E[D+Z]-1}for(var ee=D,ce=ee+C-1;ee<=ce;){var G=ee+ce>>>1,fe=E[G];if(fe<B)ee=G+1;else if(fe>B)ce=G-1;else return E[G+C]}return-1}u.determineBranch=T;var v=g(e.default),S=g(r.default);function F(E,R){return R===void 0&&(R=b.Legacy),v(E,R)}u.decodeHTML=F;function M(E){return v(E,b.Attribute)}u.decodeHTMLAttribute=M;function O(E){return v(E,b.Strict)}u.decodeHTMLStrict=O;function w(E){return S(E,b.Strict)}u.decodeXML=w})(Nn)),Nn}var vj;function Tj(){return vj||(vj=1,(function(u){Object.defineProperty(u,"__esModule",{value:!0}),u.QuoteType=void 0;var n=D3(),o;(function(f){f[f.Tab=9]="Tab",f[f.NewLine=10]="NewLine",f[f.FormFeed=12]="FormFeed",f[f.CarriageReturn=13]="CarriageReturn",f[f.Space=32]="Space",f[f.ExclamationMark=33]="ExclamationMark",f[f.Number=35]="Number",f[f.Amp=38]="Amp",f[f.SingleQuote=39]="SingleQuote",f[f.DoubleQuote=34]="DoubleQuote",f[f.Dash=45]="Dash",f[f.Slash=47]="Slash",f[f.Zero=48]="Zero",f[f.Nine=57]="Nine",f[f.Semi=59]="Semi",f[f.Lt=60]="Lt",f[f.Eq=61]="Eq",f[f.Gt=62]="Gt",f[f.Questionmark=63]="Questionmark",f[f.UpperA=65]="UpperA",f[f.LowerA=97]="LowerA",f[f.UpperF=70]="UpperF",f[f.LowerF=102]="LowerF",f[f.UpperZ=90]="UpperZ",f[f.LowerZ=122]="LowerZ",f[f.LowerX=120]="LowerX",f[f.OpeningSquareBracket=91]="OpeningSquareBracket"})(o||(o={}));var i;(function(f){f[f.Text=1]="Text",f[f.BeforeTagName=2]="BeforeTagName",f[f.InTagName=3]="InTagName",f[f.InSelfClosingTag=4]="InSelfClosingTag",f[f.BeforeClosingTagName=5]="BeforeClosingTagName",f[f.InClosingTagName=6]="InClosingTagName",f[f.AfterClosingTagName=7]="AfterClosingTagName",f[f.BeforeAttributeName=8]="BeforeAttributeName",f[f.InAttributeName=9]="InAttributeName",f[f.AfterAttributeName=10]="AfterAttributeName",f[f.BeforeAttributeValue=11]="BeforeAttributeValue",f[f.InAttributeValueDq=12]="InAttributeValueDq",f[f.InAttributeValueSq=13]="InAttributeValueSq",f[f.InAttributeValueNq=14]="InAttributeValueNq",f[f.BeforeDeclaration=15]="BeforeDeclaration",f[f.InDeclaration=16]="InDeclaration",f[f.InProcessingInstruction=17]="InProcessingInstruction",f[f.BeforeComment=18]="BeforeComment",f[f.CDATASequence=19]="CDATASequence",f[f.InSpecialComment=20]="InSpecialComment",f[f.InCommentLike=21]="InCommentLike",f[f.BeforeSpecialS=22]="BeforeSpecialS",f[f.SpecialStartSequence=23]="SpecialStartSequence",f[f.InSpecialTag=24]="InSpecialTag",f[f.BeforeEntity=25]="BeforeEntity",f[f.BeforeNumericEntity=26]="BeforeNumericEntity",f[f.InNamedEntity=27]="InNamedEntity",f[f.InNumericEntity=28]="InNumericEntity",f[f.InHexEntity=29]="InHexEntity"})(i||(i={}));function t(f){return f===o.Space||f===o.NewLine||f===o.Tab||f===o.FormFeed||f===o.CarriageReturn}function e(f){return f===o.Slash||f===o.Gt||t(f)}function r(f){return f>=o.Zero&&f<=o.Nine}function a(f){return f>=o.LowerA&&f<=o.LowerZ||f>=o.UpperA&&f<=o.UpperZ}function c(f){return f>=o.UpperA&&f<=o.UpperF||f>=o.LowerA&&f<=o.LowerF}var s;(function(f){f[f.NoValue=0]="NoValue",f[f.Unquoted=1]="Unquoted",f[f.Single=2]="Single",f[f.Double=3]="Double"})(s=u.QuoteType||(u.QuoteType={}));var d={Cdata:new Uint8Array([67,68,65,84,65,91]),CdataEnd:new Uint8Array([93,93,62]),CommentEnd:new Uint8Array([45,45,62]),ScriptEnd:new Uint8Array([60,47,115,99,114,105,112,116]),StyleEnd:new Uint8Array([60,47,115,116,121,108,101]),TitleEnd:new Uint8Array([60,47,116,105,116,108,101])},l=(function(){function f(h,p){var y=h.xmlMode,_=y===void 0?!1:y,b=h.decodeEntities,m=b===void 0?!0:b;this.cbs=p,this.state=i.Text,this.buffer="",this.sectionStart=0,this.index=0,this.baseState=i.Text,this.isSpecial=!1,this.running=!0,this.offset=0,this.currentSequence=void 0,this.sequenceIndex=0,this.trieIndex=0,this.trieCurrent=0,this.entityResult=0,this.entityExcess=0,this.xmlMode=_,this.decodeEntities=m,this.entityTrie=_?n.xmlDecodeTree:n.htmlDecodeTree}return f.prototype.reset=function(){this.state=i.Text,this.buffer="",this.sectionStart=0,this.index=0,this.baseState=i.Text,this.currentSequence=void 0,this.running=!0,this.offset=0},f.prototype.write=function(h){this.offset+=this.buffer.length,this.buffer=h,this.parse()},f.prototype.end=function(){this.running&&this.finish()},f.prototype.pause=function(){this.running=!1},f.prototype.resume=function(){this.running=!0,this.index<this.buffer.length+this.offset&&this.parse()},f.prototype.getIndex=function(){return this.index},f.prototype.getSectionStart=function(){return this.sectionStart},f.prototype.stateText=function(h){h===o.Lt||!this.decodeEntities&&this.fastForwardTo(o.Lt)?(this.index>this.sectionStart&&this.cbs.ontext(this.sectionStart,this.index),this.state=i.BeforeTagName,this.sectionStart=this.index):this.decodeEntities&&h===o.Amp&&(this.state=i.BeforeEntity)},f.prototype.stateSpecialStartSequence=function(h){var p=this.sequenceIndex===this.currentSequence.length,y=p?e(h):(h|32)===this.currentSequence[this.sequenceIndex];if(!y)this.isSpecial=!1;else if(!p){this.sequenceIndex++;return}this.sequenceIndex=0,this.state=i.InTagName,this.stateInTagName(h)},f.prototype.stateInSpecialTag=function(h){if(this.sequenceIndex===this.currentSequence.length){if(h===o.Gt||t(h)){var p=this.index-this.currentSequence.length;if(this.sectionStart<p){var y=this.index;this.index=p,this.cbs.ontext(this.sectionStart,p),this.index=y}this.isSpecial=!1,this.sectionStart=p+2,this.stateInClosingTagName(h);return}this.sequenceIndex=0}(h|32)===this.currentSequence[this.sequenceIndex]?this.sequenceIndex+=1:this.sequenceIndex===0?this.currentSequence===d.TitleEnd?this.decodeEntities&&h===o.Amp&&(this.state=i.BeforeEntity):this.fastForwardTo(o.Lt)&&(this.sequenceIndex=1):this.sequenceIndex=+(h===o.Lt)},f.prototype.stateCDATASequence=function(h){h===d.Cdata[this.sequenceIndex]?++this.sequenceIndex===d.Cdata.length&&(this.state=i.InCommentLike,this.currentSequence=d.CdataEnd,this.sequenceIndex=0,this.sectionStart=this.index+1):(this.sequenceIndex=0,this.state=i.InDeclaration,this.stateInDeclaration(h))},f.prototype.fastForwardTo=function(h){for(;++this.index<this.buffer.length+this.offset;)if(this.buffer.charCodeAt(this.index-this.offset)===h)return!0;return this.index=this.buffer.length+this.offset-1,!1},f.prototype.stateInCommentLike=function(h){h===this.currentSequence[this.sequenceIndex]?++this.sequenceIndex===this.currentSequence.length&&(this.currentSequence===d.CdataEnd?this.cbs.oncdata(this.sectionStart,this.index,2):this.cbs.oncomment(this.sectionStart,this.index,2),this.sequenceIndex=0,this.sectionStart=this.index+1,this.state=i.Text):this.sequenceIndex===0?this.fastForwardTo(this.currentSequence[0])&&(this.sequenceIndex=1):h!==this.currentSequence[this.sequenceIndex-1]&&(this.sequenceIndex=0)},f.prototype.isTagStartChar=function(h){return this.xmlMode?!e(h):a(h)},f.prototype.startSpecial=function(h,p){this.isSpecial=!0,this.currentSequence=h,this.sequenceIndex=p,this.state=i.SpecialStartSequence},f.prototype.stateBeforeTagName=function(h){if(h===o.ExclamationMark)this.state=i.BeforeDeclaration,this.sectionStart=this.index+1;else if(h===o.Questionmark)this.state=i.InProcessingInstruction,this.sectionStart=this.index+1;else if(this.isTagStartChar(h)){var p=h|32;this.sectionStart=this.index,!this.xmlMode&&p===d.TitleEnd[2]?this.startSpecial(d.TitleEnd,3):this.state=!this.xmlMode&&p===d.ScriptEnd[2]?i.BeforeSpecialS:i.InTagName}else h===o.Slash?this.state=i.BeforeClosingTagName:(this.state=i.Text,this.stateText(h))},f.prototype.stateInTagName=function(h){e(h)&&(this.cbs.onopentagname(this.sectionStart,this.index),this.sectionStart=-1,this.state=i.BeforeAttributeName,this.stateBeforeAttributeName(h))},f.prototype.stateBeforeClosingTagName=function(h){t(h)||(h===o.Gt?this.state=i.Text:(this.state=this.isTagStartChar(h)?i.InClosingTagName:i.InSpecialComment,this.sectionStart=this.index))},f.prototype.stateInClosingTagName=function(h){(h===o.Gt||t(h))&&(this.cbs.onclosetag(this.sectionStart,this.index),this.sectionStart=-1,this.state=i.AfterClosingTagName,this.stateAfterClosingTagName(h))},f.prototype.stateAfterClosingTagName=function(h){(h===o.Gt||this.fastForwardTo(o.Gt))&&(this.state=i.Text,this.baseState=i.Text,this.sectionStart=this.index+1)},f.prototype.stateBeforeAttributeName=function(h){h===o.Gt?(this.cbs.onopentagend(this.index),this.isSpecial?(this.state=i.InSpecialTag,this.sequenceIndex=0):this.state=i.Text,this.baseState=this.state,this.sectionStart=this.index+1):h===o.Slash?this.state=i.InSelfClosingTag:t(h)||(this.state=i.InAttributeName,this.sectionStart=this.index)},f.prototype.stateInSelfClosingTag=function(h){h===o.Gt?(this.cbs.onselfclosingtag(this.index),this.state=i.Text,this.baseState=i.Text,this.sectionStart=this.index+1,this.isSpecial=!1):t(h)||(this.state=i.BeforeAttributeName,this.stateBeforeAttributeName(h))},f.prototype.stateInAttributeName=function(h){(h===o.Eq||e(h))&&(this.cbs.onattribname(this.sectionStart,this.index),this.sectionStart=-1,this.state=i.AfterAttributeName,this.stateAfterAttributeName(h))},f.prototype.stateAfterAttributeName=function(h){h===o.Eq?this.state=i.BeforeAttributeValue:h===o.Slash||h===o.Gt?(this.cbs.onattribend(s.NoValue,this.index),this.state=i.BeforeAttributeName,this.stateBeforeAttributeName(h)):t(h)||(this.cbs.onattribend(s.NoValue,this.index),this.state=i.InAttributeName,this.sectionStart=this.index)},f.prototype.stateBeforeAttributeValue=function(h){h===o.DoubleQuote?(this.state=i.InAttributeValueDq,this.sectionStart=this.index+1):h===o.SingleQuote?(this.state=i.InAttributeValueSq,this.sectionStart=this.index+1):t(h)||(this.sectionStart=this.index,this.state=i.InAttributeValueNq,this.stateInAttributeValueNoQuotes(h))},f.prototype.handleInAttributeValue=function(h,p){h===p||!this.decodeEntities&&this.fastForwardTo(p)?(this.cbs.onattribdata(this.sectionStart,this.index),this.sectionStart=-1,this.cbs.onattribend(p===o.DoubleQuote?s.Double:s.Single,this.index),this.state=i.BeforeAttributeName):this.decodeEntities&&h===o.Amp&&(this.baseState=this.state,this.state=i.BeforeEntity)},f.prototype.stateInAttributeValueDoubleQuotes=function(h){this.handleInAttributeValue(h,o.DoubleQuote)},f.prototype.stateInAttributeValueSingleQuotes=function(h){this.handleInAttributeValue(h,o.SingleQuote)},f.prototype.stateInAttributeValueNoQuotes=function(h){t(h)||h===o.Gt?(this.cbs.onattribdata(this.sectionStart,this.index),this.sectionStart=-1,this.cbs.onattribend(s.Unquoted,this.index),this.state=i.BeforeAttributeName,this.stateBeforeAttributeName(h)):this.decodeEntities&&h===o.Amp&&(this.baseState=this.state,this.state=i.BeforeEntity)},f.prototype.stateBeforeDeclaration=function(h){h===o.OpeningSquareBracket?(this.state=i.CDATASequence,this.sequenceIndex=0):this.state=h===o.Dash?i.BeforeComment:i.InDeclaration},f.prototype.stateInDeclaration=function(h){(h===o.Gt||this.fastForwardTo(o.Gt))&&(this.cbs.ondeclaration(this.sectionStart,this.index),this.state=i.Text,this.sectionStart=this.index+1)},f.prototype.stateInProcessingInstruction=function(h){(h===o.Gt||this.fastForwardTo(o.Gt))&&(this.cbs.onprocessinginstruction(this.sectionStart,this.index),this.state=i.Text,this.sectionStart=this.index+1)},f.prototype.stateBeforeComment=function(h){h===o.Dash?(this.state=i.InCommentLike,this.currentSequence=d.CommentEnd,this.sequenceIndex=2,this.sectionStart=this.index+1):this.state=i.InDeclaration},f.prototype.stateInSpecialComment=function(h){(h===o.Gt||this.fastForwardTo(o.Gt))&&(this.cbs.oncomment(this.sectionStart,this.index,0),this.state=i.Text,this.sectionStart=this.index+1)},f.prototype.stateBeforeSpecialS=function(h){var p=h|32;p===d.ScriptEnd[3]?this.startSpecial(d.ScriptEnd,4):p===d.StyleEnd[3]?this.startSpecial(d.StyleEnd,4):(this.state=i.InTagName,this.stateInTagName(h))},f.prototype.stateBeforeEntity=function(h){this.entityExcess=1,this.entityResult=0,h===o.Number?this.state=i.BeforeNumericEntity:h===o.Amp||(this.trieIndex=0,this.trieCurrent=this.entityTrie[0],this.state=i.InNamedEntity,this.stateInNamedEntity(h))},f.prototype.stateInNamedEntity=function(h){if(this.entityExcess+=1,this.trieIndex=(0,n.determineBranch)(this.entityTrie,this.trieCurrent,this.trieIndex+1,h),this.trieIndex<0){this.emitNamedEntity(),this.index--;return}this.trieCurrent=this.entityTrie[this.trieIndex];var p=this.trieCurrent&n.BinTrieFlags.VALUE_LENGTH;if(p){var y=(p>>14)-1;if(!this.allowLegacyEntity()&&h!==o.Semi)this.trieIndex+=y;else{var _=this.index-this.entityExcess+1;_>this.sectionStart&&this.emitPartial(this.sectionStart,_),this.entityResult=this.trieIndex,this.trieIndex+=y,this.entityExcess=0,this.sectionStart=this.index+1,y===0&&this.emitNamedEntity()}}},f.prototype.emitNamedEntity=function(){if(this.state=this.baseState,this.entityResult!==0){var h=(this.entityTrie[this.entityResult]&n.BinTrieFlags.VALUE_LENGTH)>>14;switch(h){case 1:{this.emitCodePoint(this.entityTrie[this.entityResult]&~n.BinTrieFlags.VALUE_LENGTH);break}case 2:{this.emitCodePoint(this.entityTrie[this.entityResult+1]);break}case 3:this.emitCodePoint(this.entityTrie[this.entityResult+1]),this.emitCodePoint(this.entityTrie[this.entityResult+2])}}},f.prototype.stateBeforeNumericEntity=function(h){(h|32)===o.LowerX?(this.entityExcess++,this.state=i.InHexEntity):(this.state=i.InNumericEntity,this.stateInNumericEntity(h))},f.prototype.emitNumericEntity=function(h){var p=this.index-this.entityExcess-1,y=p+2+ +(this.state===i.InHexEntity);y!==this.index&&(p>this.sectionStart&&this.emitPartial(this.sectionStart,p),this.sectionStart=this.index+Number(h),this.emitCodePoint((0,n.replaceCodePoint)(this.entityResult))),this.state=this.baseState},f.prototype.stateInNumericEntity=function(h){h===o.Semi?this.emitNumericEntity(!0):r(h)?(this.entityResult=this.entityResult*10+(h-o.Zero),this.entityExcess++):(this.allowLegacyEntity()?this.emitNumericEntity(!1):this.state=this.baseState,this.index--)},f.prototype.stateInHexEntity=function(h){h===o.Semi?this.emitNumericEntity(!0):r(h)?(this.entityResult=this.entityResult*16+(h-o.Zero),this.entityExcess++):c(h)?(this.entityResult=this.entityResult*16+((h|32)-o.LowerA+10),this.entityExcess++):(this.allowLegacyEntity()?this.emitNumericEntity(!1):this.state=this.baseState,this.index--)},f.prototype.allowLegacyEntity=function(){return!this.xmlMode&&(this.baseState===i.Text||this.baseState===i.InSpecialTag)},f.prototype.cleanup=function(){this.running&&this.sectionStart!==this.index&&(this.state===i.Text||this.state===i.InSpecialTag&&this.sequenceIndex===0?(this.cbs.ontext(this.sectionStart,this.index),this.sectionStart=this.index):(this.state===i.InAttributeValueDq||this.state===i.InAttributeValueSq||this.state===i.InAttributeValueNq)&&(this.cbs.onattribdata(this.sectionStart,this.index),this.sectionStart=this.index))},f.prototype.shouldContinue=function(){return this.index<this.buffer.length+this.offset&&this.running},f.prototype.parse=function(){for(;this.shouldContinue();){var h=this.buffer.charCodeAt(this.index-this.offset);switch(this.state){case i.Text:{this.stateText(h);break}case i.SpecialStartSequence:{this.stateSpecialStartSequence(h);break}case i.InSpecialTag:{this.stateInSpecialTag(h);break}case i.CDATASequence:{this.stateCDATASequence(h);break}case i.InAttributeValueDq:{this.stateInAttributeValueDoubleQuotes(h);break}case i.InAttributeName:{this.stateInAttributeName(h);break}case i.InCommentLike:{this.stateInCommentLike(h);break}case i.InSpecialComment:{this.stateInSpecialComment(h);break}case i.BeforeAttributeName:{this.stateBeforeAttributeName(h);break}case i.InTagName:{this.stateInTagName(h);break}case i.InClosingTagName:{this.stateInClosingTagName(h);break}case i.BeforeTagName:{this.stateBeforeTagName(h);break}case i.AfterAttributeName:{this.stateAfterAttributeName(h);break}case i.InAttributeValueSq:{this.stateInAttributeValueSingleQuotes(h);break}case i.BeforeAttributeValue:{this.stateBeforeAttributeValue(h);break}case i.BeforeClosingTagName:{this.stateBeforeClosingTagName(h);break}case i.AfterClosingTagName:{this.stateAfterClosingTagName(h);break}case i.BeforeSpecialS:{this.stateBeforeSpecialS(h);break}case i.InAttributeValueNq:{this.stateInAttributeValueNoQuotes(h);break}case i.InSelfClosingTag:{this.stateInSelfClosingTag(h);break}case i.InDeclaration:{this.stateInDeclaration(h);break}case i.BeforeDeclaration:{this.stateBeforeDeclaration(h);break}case i.BeforeComment:{this.stateBeforeComment(h);break}case i.InProcessingInstruction:{this.stateInProcessingInstruction(h);break}case i.InNamedEntity:{this.stateInNamedEntity(h);break}case i.BeforeEntity:{this.stateBeforeEntity(h);break}case i.InHexEntity:{this.stateInHexEntity(h);break}case i.InNumericEntity:{this.stateInNumericEntity(h);break}default:this.stateBeforeNumericEntity(h)}this.index++}this.cleanup()},f.prototype.finish=function(){this.state===i.InNamedEntity&&this.emitNamedEntity(),this.sectionStart<this.index&&this.handleTrailingData(),this.cbs.onend()},f.prototype.handleTrailingData=function(){var h=this.buffer.length+this.offset;this.state===i.InCommentLike?this.currentSequence===d.CdataEnd?this.cbs.oncdata(this.sectionStart,h,0):this.cbs.oncomment(this.sectionStart,h,0):this.state===i.InNumericEntity&&this.allowLegacyEntity()?this.emitNumericEntity(!1):this.state===i.InHexEntity&&this.allowLegacyEntity()?this.emitNumericEntity(!1):this.state===i.InTagName||this.state===i.BeforeAttributeName||this.state===i.BeforeAttributeValue||this.state===i.AfterAttributeName||this.state===i.InAttributeName||this.state===i.InAttributeValueSq||this.state===i.InAttributeValueDq||this.state===i.InAttributeValueNq||this.state===i.InClosingTagName||this.cbs.ontext(this.sectionStart,h)},f.prototype.emitPartial=function(h,p){this.baseState!==i.Text&&this.baseState!==i.InSpecialTag?this.cbs.onattribdata(h,p):this.cbs.ontext(h,p)},f.prototype.emitCodePoint=function(h){this.baseState!==i.Text&&this.baseState!==i.InSpecialTag?this.cbs.onattribentity(h):this.cbs.ontextentity(h)},f})();u.default=l})(GA)),GA}var wj;function Sj(){if(wj)return Dn;wj=1;var u=Dn&&Dn.__createBinding||(Object.create?(function(_,b,m,g){g===void 0&&(g=m);var T=Object.getOwnPropertyDescriptor(b,m);(!T||("get"in T?!b.__esModule:T.writable||T.configurable))&&(T={enumerable:!0,get:function(){return b[m]}}),Object.defineProperty(_,g,T)}):(function(_,b,m,g){g===void 0&&(g=m),_[g]=b[m]})),n=Dn&&Dn.__setModuleDefault||(Object.create?(function(_,b){Object.defineProperty(_,"default",{enumerable:!0,value:b})}):function(_,b){_.default=b}),o=Dn&&Dn.__importStar||function(_){if(_&&_.__esModule)return _;var b={};if(_!=null)for(var m in _)m!=="default"&&Object.prototype.hasOwnProperty.call(_,m)&&u(b,_,m);return n(b,_),b};Object.defineProperty(Dn,"__esModule",{value:!0}),Dn.Parser=void 0;var i=o(Tj()),t=D3(),e=new Set(["input","option","optgroup","select","button","datalist","textarea"]),r=new Set(["p"]),a=new Set(["thead","tbody"]),c=new Set(["dd","dt"]),s=new Set(["rt","rp"]),d=new Map([["tr",new Set(["tr","th","td"])],["th",new Set(["th"])],["td",new Set(["thead","th","td"])],["body",new Set(["head","link","script"])],["li",new Set(["li"])],["p",r],["h1",r],["h2",r],["h3",r],["h4",r],["h5",r],["h6",r],["select",e],["input",e],["output",e],["button",e],["datalist",e],["textarea",e],["option",new Set(["option"])],["optgroup",new Set(["optgroup","option"])],["dd",c],["dt",c],["address",r],["article",r],["aside",r],["blockquote",r],["details",r],["div",r],["dl",r],["fieldset",r],["figcaption",r],["figure",r],["footer",r],["form",r],["header",r],["hr",r],["main",r],["nav",r],["ol",r],["pre",r],["section",r],["table",r],["ul",r],["rt",s],["rp",s],["tbody",a],["tfoot",a]]),l=new Set(["area","base","basefont","br","col","command","embed","frame","hr","img","input","isindex","keygen","link","meta","param","source","track","wbr"]),f=new Set(["math","svg"]),h=new Set(["mi","mo","mn","ms","mtext","annotation-xml","foreignobject","desc","title"]),p=/\s|\//,y=(function(){function _(b,m){m===void 0&&(m={});var g,T,v,S,F;this.options=m,this.startIndex=0,this.endIndex=0,this.openTagStart=0,this.tagname="",this.attribname="",this.attribvalue="",this.attribs=null,this.stack=[],this.foreignContext=[],this.buffers=[],this.bufferOffset=0,this.writeIndex=0,this.ended=!1,this.cbs=b??{},this.lowerCaseTagNames=(g=m.lowerCaseTags)!==null&&g!==void 0?g:!m.xmlMode,this.lowerCaseAttributeNames=(T=m.lowerCaseAttributeNames)!==null&&T!==void 0?T:!m.xmlMode,this.tokenizer=new((v=m.Tokenizer)!==null&&v!==void 0?v:i.default)(this.options,this),(F=(S=this.cbs).onparserinit)===null||F===void 0||F.call(S,this)}return _.prototype.ontext=function(b,m){var g,T,v=this.getSlice(b,m);this.endIndex=m-1,(T=(g=this.cbs).ontext)===null||T===void 0||T.call(g,v),this.startIndex=m},_.prototype.ontextentity=function(b){var m,g,T=this.tokenizer.getSectionStart();this.endIndex=T-1,(g=(m=this.cbs).ontext)===null||g===void 0||g.call(m,(0,t.fromCodePoint)(b)),this.startIndex=T},_.prototype.isVoidElement=function(b){return!this.options.xmlMode&&l.has(b)},_.prototype.onopentagname=function(b,m){this.endIndex=m;var g=this.getSlice(b,m);this.lowerCaseTagNames&&(g=g.toLowerCase()),this.emitOpenTag(g)},_.prototype.emitOpenTag=function(b){var m,g,T,v;this.openTagStart=this.startIndex,this.tagname=b;var S=!this.options.xmlMode&&d.get(b);if(S)for(;this.stack.length>0&&S.has(this.stack[this.stack.length-1]);){var F=this.stack.pop();(g=(m=this.cbs).onclosetag)===null||g===void 0||g.call(m,F,!0)}this.isVoidElement(b)||(this.stack.push(b),f.has(b)?this.foreignContext.push(!0):h.has(b)&&this.foreignContext.push(!1)),(v=(T=this.cbs).onopentagname)===null||v===void 0||v.call(T,b),this.cbs.onopentag&&(this.attribs={})},_.prototype.endOpenTag=function(b){var m,g;this.startIndex=this.openTagStart,this.attribs&&((g=(m=this.cbs).onopentag)===null||g===void 0||g.call(m,this.tagname,this.attribs,b),this.attribs=null),this.cbs.onclosetag&&this.isVoidElement(this.tagname)&&this.cbs.onclosetag(this.tagname,!0),this.tagname=""},_.prototype.onopentagend=function(b){this.endIndex=b,this.endOpenTag(!1),this.startIndex=b+1},_.prototype.onclosetag=function(b,m){var g,T,v,S,F,M;this.endIndex=m;var O=this.getSlice(b,m);if(this.lowerCaseTagNames&&(O=O.toLowerCase()),(f.has(O)||h.has(O))&&this.foreignContext.pop(),this.isVoidElement(O))!this.options.xmlMode&&O==="br"&&((T=(g=this.cbs).onopentagname)===null||T===void 0||T.call(g,"br"),(S=(v=this.cbs).onopentag)===null||S===void 0||S.call(v,"br",{},!0),(M=(F=this.cbs).onclosetag)===null||M===void 0||M.call(F,"br",!1));else{var w=this.stack.lastIndexOf(O);if(w!==-1)if(this.cbs.onclosetag)for(var E=this.stack.length-w;E--;)this.cbs.onclosetag(this.stack.pop(),E!==0);else this.stack.length=w;else!this.options.xmlMode&&O==="p"&&(this.emitOpenTag("p"),this.closeCurrentTag(!0))}this.startIndex=m+1},_.prototype.onselfclosingtag=function(b){this.endIndex=b,this.options.xmlMode||this.options.recognizeSelfClosing||this.foreignContext[this.foreignContext.length-1]?(this.closeCurrentTag(!1),this.startIndex=b+1):this.onopentagend(b)},_.prototype.closeCurrentTag=function(b){var m,g,T=this.tagname;this.endOpenTag(b),this.stack[this.stack.length-1]===T&&((g=(m=this.cbs).onclosetag)===null||g===void 0||g.call(m,T,!b),this.stack.pop())},_.prototype.onattribname=function(b,m){this.startIndex=b;var g=this.getSlice(b,m);this.attribname=this.lowerCaseAttributeNames?g.toLowerCase():g},_.prototype.onattribdata=function(b,m){this.attribvalue+=this.getSlice(b,m)},_.prototype.onattribentity=function(b){this.attribvalue+=(0,t.fromCodePoint)(b)},_.prototype.onattribend=function(b,m){var g,T;this.endIndex=m,(T=(g=this.cbs).onattribute)===null||T===void 0||T.call(g,this.attribname,this.attribvalue,b===i.QuoteType.Double?'"':b===i.QuoteType.Single?"'":b===i.QuoteType.NoValue?void 0:null),this.attribs&&!Object.prototype.hasOwnProperty.call(this.attribs,this.attribname)&&(this.attribs[this.attribname]=this.attribvalue),this.attribvalue=""},_.prototype.getInstructionName=function(b){var m=b.search(p),g=m<0?b:b.substr(0,m);return this.lowerCaseTagNames&&(g=g.toLowerCase()),g},_.prototype.ondeclaration=function(b,m){this.endIndex=m;var g=this.getSlice(b,m);if(this.cbs.onprocessinginstruction){var T=this.getInstructionName(g);this.cbs.onprocessinginstruction("!".concat(T),"!".concat(g))}this.startIndex=m+1},_.prototype.onprocessinginstruction=function(b,m){this.endIndex=m;var g=this.getSlice(b,m);if(this.cbs.onprocessinginstruction){var T=this.getInstructionName(g);this.cbs.onprocessinginstruction("?".concat(T),"?".concat(g))}this.startIndex=m+1},_.prototype.oncomment=function(b,m,g){var T,v,S,F;this.endIndex=m,(v=(T=this.cbs).oncomment)===null||v===void 0||v.call(T,this.getSlice(b,m-g)),(F=(S=this.cbs).oncommentend)===null||F===void 0||F.call(S),this.startIndex=m+1},_.prototype.oncdata=function(b,m,g){var T,v,S,F,M,O,w,E,R,D;this.endIndex=m;var B=this.getSlice(b,m-g);this.options.xmlMode||this.options.recognizeCDATA?((v=(T=this.cbs).oncdatastart)===null||v===void 0||v.call(T),(F=(S=this.cbs).ontext)===null||F===void 0||F.call(S,B),(O=(M=this.cbs).oncdataend)===null||O===void 0||O.call(M)):((E=(w=this.cbs).oncomment)===null||E===void 0||E.call(w,"[CDATA[".concat(B,"]]")),(D=(R=this.cbs).oncommentend)===null||D===void 0||D.call(R)),this.startIndex=m+1},_.prototype.onend=function(){var b,m;if(this.cbs.onclosetag){this.endIndex=this.startIndex;for(var g=this.stack.length;g>0;this.cbs.onclosetag(this.stack[--g],!0));}(m=(b=this.cbs).onend)===null||m===void 0||m.call(b)},_.prototype.reset=function(){var b,m,g,T;(m=(b=this.cbs).onreset)===null||m===void 0||m.call(b),this.tokenizer.reset(),this.tagname="",this.attribname="",this.attribs=null,this.stack.length=0,this.startIndex=0,this.endIndex=0,(T=(g=this.cbs).onparserinit)===null||T===void 0||T.call(g,this),this.buffers.length=0,this.bufferOffset=0,this.writeIndex=0,this.ended=!1},_.prototype.parseComplete=function(b){this.reset(),this.end(b)},_.prototype.getSlice=function(b,m){for(;b-this.bufferOffset>=this.buffers[0].length;)this.shiftBuffer();for(var g=this.buffers[0].slice(b-this.bufferOffset,m-this.bufferOffset);m-this.bufferOffset>this.buffers[0].length;)this.shiftBuffer(),g+=this.buffers[0].slice(0,m-this.bufferOffset);return g},_.prototype.shiftBuffer=function(){this.bufferOffset+=this.buffers[0].length,this.writeIndex--,this.buffers.shift()},_.prototype.write=function(b){var m,g;if(this.ended){(g=(m=this.cbs).onerror)===null||g===void 0||g.call(m,new Error(".write() after done!"));return}this.buffers.push(b),this.tokenizer.running&&(this.tokenizer.write(b),this.writeIndex++)},_.prototype.end=function(b){var m,g;if(this.ended){(g=(m=this.cbs).onerror)===null||g===void 0||g.call(m,new Error(".end() after done!"));return}b&&this.write(b),this.ended=!0,this.tokenizer.end()},_.prototype.pause=function(){this.tokenizer.pause()},_.prototype.resume=function(){for(this.tokenizer.resume();this.tokenizer.running&&this.writeIndex<this.buffers.length;)this.tokenizer.write(this.buffers[this.writeIndex++]);this.ended&&this.tokenizer.end()},_.prototype.parseChunk=function(b){this.write(b)},_.prototype.done=function(b){this.end(b)},_})();return Dn.Parser=y,Dn}var uo={},XA={},Oj;function Of(){return Oj||(Oj=1,(function(u){Object.defineProperty(u,"__esModule",{value:!0}),u.Doctype=u.CDATA=u.Tag=u.Style=u.Script=u.Comment=u.Directive=u.Text=u.Root=u.isTag=u.ElementType=void 0;var n;(function(i){i.Root="root",i.Text="text",i.Directive="directive",i.Comment="comment",i.Script="script",i.Style="style",i.Tag="tag",i.CDATA="cdata",i.Doctype="doctype"})(n=u.ElementType||(u.ElementType={}));function o(i){return i.type===n.Tag||i.type===n.Script||i.type===n.Style}u.isTag=o,u.Root=n.Root,u.Text=n.Text,u.Directive=n.Directive,u.Comment=n.Comment,u.Script=n.Script,u.Style=n.Style,u.Tag=n.Tag,u.CDATA=n.CDATA,u.Doctype=n.Doctype})(XA)),XA}var gt={},Aj;function Ej(){if(Aj)return gt;Aj=1;var u=gt&&gt.__extends||(function(){var v=function(S,F){return v=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(M,O){M.__proto__=O}||function(M,O){for(var w in O)Object.prototype.hasOwnProperty.call(O,w)&&(M[w]=O[w])},v(S,F)};return function(S,F){if(typeof F!="function"&&F!==null)throw new TypeError("Class extends value "+String(F)+" is not a constructor or null");v(S,F);function M(){this.constructor=S}S.prototype=F===null?Object.create(F):(M.prototype=F.prototype,new M)}})(),n=gt&&gt.__assign||function(){return n=Object.assign||function(v){for(var S,F=1,M=arguments.length;F<M;F++){S=arguments[F];for(var O in S)Object.prototype.hasOwnProperty.call(S,O)&&(v[O]=S[O])}return v},n.apply(this,arguments)};Object.defineProperty(gt,"__esModule",{value:!0}),gt.cloneNode=gt.hasChildren=gt.isDocument=gt.isDirective=gt.isComment=gt.isText=gt.isCDATA=gt.isTag=gt.Element=gt.Document=gt.CDATA=gt.NodeWithChildren=gt.ProcessingInstruction=gt.Comment=gt.Text=gt.DataNode=gt.Node=void 0;var o=Of(),i=(function(){function v(){this.parent=null,this.prev=null,this.next=null,this.startIndex=null,this.endIndex=null}return Object.defineProperty(v.prototype,"parentNode",{get:function(){return this.parent},set:function(S){this.parent=S},enumerable:!1,configurable:!0}),Object.defineProperty(v.prototype,"previousSibling",{get:function(){return this.prev},set:function(S){this.prev=S},enumerable:!1,configurable:!0}),Object.defineProperty(v.prototype,"nextSibling",{get:function(){return this.next},set:function(S){this.next=S},enumerable:!1,configurable:!0}),v.prototype.cloneNode=function(S){return S===void 0&&(S=!1),g(this,S)},v})();gt.Node=i;var t=(function(v){u(S,v);function S(F){var M=v.call(this)||this;return M.data=F,M}return Object.defineProperty(S.prototype,"nodeValue",{get:function(){return this.data},set:function(F){this.data=F},enumerable:!1,configurable:!0}),S})(i);gt.DataNode=t;var e=(function(v){u(S,v);function S(){var F=v!==null&&v.apply(this,arguments)||this;return F.type=o.ElementType.Text,F}return Object.defineProperty(S.prototype,"nodeType",{get:function(){return 3},enumerable:!1,configurable:!0}),S})(t);gt.Text=e;var r=(function(v){u(S,v);function S(){var F=v!==null&&v.apply(this,arguments)||this;return F.type=o.ElementType.Comment,F}return Object.defineProperty(S.prototype,"nodeType",{get:function(){return 8},enumerable:!1,configurable:!0}),S})(t);gt.Comment=r;var a=(function(v){u(S,v);function S(F,M){var O=v.call(this,M)||this;return O.name=F,O.type=o.ElementType.Directive,O}return Object.defineProperty(S.prototype,"nodeType",{get:function(){return 1},enumerable:!1,configurable:!0}),S})(t);gt.ProcessingInstruction=a;var c=(function(v){u(S,v);function S(F){var M=v.call(this)||this;return M.children=F,M}return Object.defineProperty(S.prototype,"firstChild",{get:function(){var F;return(F=this.children[0])!==null&&F!==void 0?F:null},enumerable:!1,configurable:!0}),Object.defineProperty(S.prototype,"lastChild",{get:function(){return this.children.length>0?this.children[this.children.length-1]:null},enumerable:!1,configurable:!0}),Object.defineProperty(S.prototype,"childNodes",{get:function(){return this.children},set:function(F){this.children=F},enumerable:!1,configurable:!0}),S})(i);gt.NodeWithChildren=c;var s=(function(v){u(S,v);function S(){var F=v!==null&&v.apply(this,arguments)||this;return F.type=o.ElementType.CDATA,F}return Object.defineProperty(S.prototype,"nodeType",{get:function(){return 4},enumerable:!1,configurable:!0}),S})(c);gt.CDATA=s;var d=(function(v){u(S,v);function S(){var F=v!==null&&v.apply(this,arguments)||this;return F.type=o.ElementType.Root,F}return Object.defineProperty(S.prototype,"nodeType",{get:function(){return 9},enumerable:!1,configurable:!0}),S})(c);gt.Document=d;var l=(function(v){u(S,v);function S(F,M,O,w){O===void 0&&(O=[]),w===void 0&&(w=F==="script"?o.ElementType.Script:F==="style"?o.ElementType.Style:o.ElementType.Tag);var E=v.call(this,O)||this;return E.name=F,E.attribs=M,E.type=w,E}return Object.defineProperty(S.prototype,"nodeType",{get:function(){return 1},enumerable:!1,configurable:!0}),Object.defineProperty(S.prototype,"tagName",{get:function(){return this.name},set:function(F){this.name=F},enumerable:!1,configurable:!0}),Object.defineProperty(S.prototype,"attributes",{get:function(){var F=this;return Object.keys(this.attribs).map(function(M){var O,w;return{name:M,value:F.attribs[M],namespace:(O=F["x-attribsNamespace"])===null||O===void 0?void 0:O[M],prefix:(w=F["x-attribsPrefix"])===null||w===void 0?void 0:w[M]}})},enumerable:!1,configurable:!0}),S})(c);gt.Element=l;function f(v){return(0,o.isTag)(v)}gt.isTag=f;function h(v){return v.type===o.ElementType.CDATA}gt.isCDATA=h;function p(v){return v.type===o.ElementType.Text}gt.isText=p;function y(v){return v.type===o.ElementType.Comment}gt.isComment=y;function _(v){return v.type===o.ElementType.Directive}gt.isDirective=_;function b(v){return v.type===o.ElementType.Root}gt.isDocument=b;function m(v){return Object.prototype.hasOwnProperty.call(v,"children")}gt.hasChildren=m;function g(v,S){S===void 0&&(S=!1);var F;if(p(v))F=new e(v.data);else if(y(v))F=new r(v.data);else if(f(v)){var M=S?T(v.children):[],O=new l(v.name,n({},v.attribs),M);M.forEach(function(D){return D.parent=O}),v.namespace!=null&&(O.namespace=v.namespace),v["x-attribsNamespace"]&&(O["x-attribsNamespace"]=n({},v["x-attribsNamespace"])),v["x-attribsPrefix"]&&(O["x-attribsPrefix"]=n({},v["x-attribsPrefix"])),F=O}else if(h(v)){var M=S?T(v.children):[],w=new s(M);M.forEach(function(B){return B.parent=w}),F=w}else if(b(v)){var M=S?T(v.children):[],E=new d(M);M.forEach(function(B){return B.parent=E}),v["x-mode"]&&(E["x-mode"]=v["x-mode"]),F=E}else if(_(v)){var R=new a(v.name,v.data);v["x-name"]!=null&&(R["x-name"]=v["x-name"],R["x-publicId"]=v["x-publicId"],R["x-systemId"]=v["x-systemId"]),F=R}else throw new Error("Not implemented yet: ".concat(v.type));return F.startIndex=v.startIndex,F.endIndex=v.endIndex,v.sourceCodeLocation!=null&&(F.sourceCodeLocation=v.sourceCodeLocation),F}gt.cloneNode=g;function T(v){for(var S=v.map(function(M){return g(M,!0)}),F=1;F<S.length;F++)S[F].prev=S[F-1],S[F-1].next=S[F];return S}return gt}var xj;function Yn(){return xj||(xj=1,(function(u){var n=uo&&uo.__createBinding||(Object.create?(function(a,c,s,d){d===void 0&&(d=s);var l=Object.getOwnPropertyDescriptor(c,s);(!l||("get"in l?!c.__esModule:l.writable||l.configurable))&&(l={enumerable:!0,get:function(){return c[s]}}),Object.defineProperty(a,d,l)}):(function(a,c,s,d){d===void 0&&(d=s),a[d]=c[s]})),o=uo&&uo.__exportStar||function(a,c){for(var s in a)s!=="default"&&!Object.prototype.hasOwnProperty.call(c,s)&&n(c,a,s)};Object.defineProperty(u,"__esModule",{value:!0}),u.DomHandler=void 0;var i=Of(),t=Ej();o(Ej(),u);var e={withStartIndices:!1,withEndIndices:!1,xmlMode:!1},r=(function(){function a(c,s,d){this.dom=[],this.root=new t.Document(this.dom),this.done=!1,this.tagStack=[this.root],this.lastNode=null,this.parser=null,typeof s=="function"&&(d=s,s=e),typeof c=="object"&&(s=c,c=void 0),this.callback=c??null,this.options=s??e,this.elementCB=d??null}return a.prototype.onparserinit=function(c){this.parser=c},a.prototype.onreset=function(){this.dom=[],this.root=new t.Document(this.dom),this.done=!1,this.tagStack=[this.root],this.lastNode=null,this.parser=null},a.prototype.onend=function(){this.done||(this.done=!0,this.parser=null,this.handleCallback(null))},a.prototype.onerror=function(c){this.handleCallback(c)},a.prototype.onclosetag=function(){this.lastNode=null;var c=this.tagStack.pop();this.options.withEndIndices&&(c.endIndex=this.parser.endIndex),this.elementCB&&this.elementCB(c)},a.prototype.onopentag=function(c,s){var d=this.options.xmlMode?i.ElementType.Tag:void 0,l=new t.Element(c,s,void 0,d);this.addNode(l),this.tagStack.push(l)},a.prototype.ontext=function(c){var s=this.lastNode;if(s&&s.type===i.ElementType.Text)s.data+=c,this.options.withEndIndices&&(s.endIndex=this.parser.endIndex);else{var d=new t.Text(c);this.addNode(d),this.lastNode=d}},a.prototype.oncomment=function(c){if(this.lastNode&&this.lastNode.type===i.ElementType.Comment){this.lastNode.data+=c;return}var s=new t.Comment(c);this.addNode(s),this.lastNode=s},a.prototype.oncommentend=function(){this.lastNode=null},a.prototype.oncdatastart=function(){var c=new t.Text(""),s=new t.CDATA([c]);this.addNode(s),c.parent=s,this.lastNode=c},a.prototype.oncdataend=function(){this.lastNode=null},a.prototype.onprocessinginstruction=function(c,s){var d=new t.ProcessingInstruction(c,s);this.addNode(d)},a.prototype.handleCallback=function(c){if(typeof this.callback=="function")this.callback(c,this.dom);else if(c)throw c},a.prototype.addNode=function(c){var s=this.tagStack[this.tagStack.length-1],d=s.children[s.children.length-1];this.options.withStartIndices&&(c.startIndex=this.parser.startIndex),this.options.withEndIndices&&(c.endIndex=this.parser.endIndex),s.children.push(c),d&&(c.prev=d,d.next=c),c.parent=s,this.lastNode=null},a})();u.DomHandler=r,u.default=r})(uo)),uo}var oo={},Zn={},kr={},JA={},pi={},N3={},Rj;function kee(){if(Rj)return N3;Rj=1,Object.defineProperty(N3,"__esModule",{value:!0});function u(n){for(var o=1;o<n.length;o++)n[o][0]+=n[o-1][0]+1;return n}return N3.default=new Map(u([[9,"&Tab;"],[0,"&NewLine;"],[22,"&excl;"],[0,"&quot;"],[0,"&num;"],[0,"&dollar;"],[0,"&percnt;"],[0,"&amp;"],[0,"&apos;"],[0,"&lpar;"],[0,"&rpar;"],[0,"&ast;"],[0,"&plus;"],[0,"&comma;"],[1,"&period;"],[0,"&sol;"],[10,"&colon;"],[0,"&semi;"],[0,{v:"&lt;",n:8402,o:"&nvlt;"}],[0,{v:"&equals;",n:8421,o:"&bne;"}],[0,{v:"&gt;",n:8402,o:"&nvgt;"}],[0,"&quest;"],[0,"&commat;"],[26,"&lbrack;"],[0,"&bsol;"],[0,"&rbrack;"],[0,"&Hat;"],[0,"&lowbar;"],[0,"&DiacriticalGrave;"],[5,{n:106,o:"&fjlig;"}],[20,"&lbrace;"],[0,"&verbar;"],[0,"&rbrace;"],[34,"&nbsp;"],[0,"&iexcl;"],[0,"&cent;"],[0,"&pound;"],[0,"&curren;"],[0,"&yen;"],[0,"&brvbar;"],[0,"&sect;"],[0,"&die;"],[0,"&copy;"],[0,"&ordf;"],[0,"&laquo;"],[0,"&not;"],[0,"&shy;"],[0,"&circledR;"],[0,"&macr;"],[0,"&deg;"],[0,"&PlusMinus;"],[0,"&sup2;"],[0,"&sup3;"],[0,"&acute;"],[0,"&micro;"],[0,"&para;"],[0,"&centerdot;"],[0,"&cedil;"],[0,"&sup1;"],[0,"&ordm;"],[0,"&raquo;"],[0,"&frac14;"],[0,"&frac12;"],[0,"&frac34;"],[0,"&iquest;"],[0,"&Agrave;"],[0,"&Aacute;"],[0,"&Acirc;"],[0,"&Atilde;"],[0,"&Auml;"],[0,"&angst;"],[0,"&AElig;"],[0,"&Ccedil;"],[0,"&Egrave;"],[0,"&Eacute;"],[0,"&Ecirc;"],[0,"&Euml;"],[0,"&Igrave;"],[0,"&Iacute;"],[0,"&Icirc;"],[0,"&Iuml;"],[0,"&ETH;"],[0,"&Ntilde;"],[0,"&Ograve;"],[0,"&Oacute;"],[0,"&Ocirc;"],[0,"&Otilde;"],[0,"&Ouml;"],[0,"&times;"],[0,"&Oslash;"],[0,"&Ugrave;"],[0,"&Uacute;"],[0,"&Ucirc;"],[0,"&Uuml;"],[0,"&Yacute;"],[0,"&THORN;"],[0,"&szlig;"],[0,"&agrave;"],[0,"&aacute;"],[0,"&acirc;"],[0,"&atilde;"],[0,"&auml;"],[0,"&aring;"],[0,"&aelig;"],[0,"&ccedil;"],[0,"&egrave;"],[0,"&eacute;"],[0,"&ecirc;"],[0,"&euml;"],[0,"&igrave;"],[0,"&iacute;"],[0,"&icirc;"],[0,"&iuml;"],[0,"&eth;"],[0,"&ntilde;"],[0,"&ograve;"],[0,"&oacute;"],[0,"&ocirc;"],[0,"&otilde;"],[0,"&ouml;"],[0,"&div;"],[0,"&oslash;"],[0,"&ugrave;"],[0,"&uacute;"],[0,"&ucirc;"],[0,"&uuml;"],[0,"&yacute;"],[0,"&thorn;"],[0,"&yuml;"],[0,"&Amacr;"],[0,"&amacr;"],[0,"&Abreve;"],[0,"&abreve;"],[0,"&Aogon;"],[0,"&aogon;"],[0,"&Cacute;"],[0,"&cacute;"],[0,"&Ccirc;"],[0,"&ccirc;"],[0,"&Cdot;"],[0,"&cdot;"],[0,"&Ccaron;"],[0,"&ccaron;"],[0,"&Dcaron;"],[0,"&dcaron;"],[0,"&Dstrok;"],[0,"&dstrok;"],[0,"&Emacr;"],[0,"&emacr;"],[2,"&Edot;"],[0,"&edot;"],[0,"&Eogon;"],[0,"&eogon;"],[0,"&Ecaron;"],[0,"&ecaron;"],[0,"&Gcirc;"],[0,"&gcirc;"],[0,"&Gbreve;"],[0,"&gbreve;"],[0,"&Gdot;"],[0,"&gdot;"],[0,"&Gcedil;"],[1,"&Hcirc;"],[0,"&hcirc;"],[0,"&Hstrok;"],[0,"&hstrok;"],[0,"&Itilde;"],[0,"&itilde;"],[0,"&Imacr;"],[0,"&imacr;"],[2,"&Iogon;"],[0,"&iogon;"],[0,"&Idot;"],[0,"&imath;"],[0,"&IJlig;"],[0,"&ijlig;"],[0,"&Jcirc;"],[0,"&jcirc;"],[0,"&Kcedil;"],[0,"&kcedil;"],[0,"&kgreen;"],[0,"&Lacute;"],[0,"&lacute;"],[0,"&Lcedil;"],[0,"&lcedil;"],[0,"&Lcaron;"],[0,"&lcaron;"],[0,"&Lmidot;"],[0,"&lmidot;"],[0,"&Lstrok;"],[0,"&lstrok;"],[0,"&Nacute;"],[0,"&nacute;"],[0,"&Ncedil;"],[0,"&ncedil;"],[0,"&Ncaron;"],[0,"&ncaron;"],[0,"&napos;"],[0,"&ENG;"],[0,"&eng;"],[0,"&Omacr;"],[0,"&omacr;"],[2,"&Odblac;"],[0,"&odblac;"],[0,"&OElig;"],[0,"&oelig;"],[0,"&Racute;"],[0,"&racute;"],[0,"&Rcedil;"],[0,"&rcedil;"],[0,"&Rcaron;"],[0,"&rcaron;"],[0,"&Sacute;"],[0,"&sacute;"],[0,"&Scirc;"],[0,"&scirc;"],[0,"&Scedil;"],[0,"&scedil;"],[0,"&Scaron;"],[0,"&scaron;"],[0,"&Tcedil;"],[0,"&tcedil;"],[0,"&Tcaron;"],[0,"&tcaron;"],[0,"&Tstrok;"],[0,"&tstrok;"],[0,"&Utilde;"],[0,"&utilde;"],[0,"&Umacr;"],[0,"&umacr;"],[0,"&Ubreve;"],[0,"&ubreve;"],[0,"&Uring;"],[0,"&uring;"],[0,"&Udblac;"],[0,"&udblac;"],[0,"&Uogon;"],[0,"&uogon;"],[0,"&Wcirc;"],[0,"&wcirc;"],[0,"&Ycirc;"],[0,"&ycirc;"],[0,"&Yuml;"],[0,"&Zacute;"],[0,"&zacute;"],[0,"&Zdot;"],[0,"&zdot;"],[0,"&Zcaron;"],[0,"&zcaron;"],[19,"&fnof;"],[34,"&imped;"],[63,"&gacute;"],[65,"&jmath;"],[142,"&circ;"],[0,"&caron;"],[16,"&breve;"],[0,"&DiacriticalDot;"],[0,"&ring;"],[0,"&ogon;"],[0,"&DiacriticalTilde;"],[0,"&dblac;"],[51,"&DownBreve;"],[127,"&Alpha;"],[0,"&Beta;"],[0,"&Gamma;"],[0,"&Delta;"],[0,"&Epsilon;"],[0,"&Zeta;"],[0,"&Eta;"],[0,"&Theta;"],[0,"&Iota;"],[0,"&Kappa;"],[0,"&Lambda;"],[0,"&Mu;"],[0,"&Nu;"],[0,"&Xi;"],[0,"&Omicron;"],[0,"&Pi;"],[0,"&Rho;"],[1,"&Sigma;"],[0,"&Tau;"],[0,"&Upsilon;"],[0,"&Phi;"],[0,"&Chi;"],[0,"&Psi;"],[0,"&ohm;"],[7,"&alpha;"],[0,"&beta;"],[0,"&gamma;"],[0,"&delta;"],[0,"&epsi;"],[0,"&zeta;"],[0,"&eta;"],[0,"&theta;"],[0,"&iota;"],[0,"&kappa;"],[0,"&lambda;"],[0,"&mu;"],[0,"&nu;"],[0,"&xi;"],[0,"&omicron;"],[0,"&pi;"],[0,"&rho;"],[0,"&sigmaf;"],[0,"&sigma;"],[0,"&tau;"],[0,"&upsi;"],[0,"&phi;"],[0,"&chi;"],[0,"&psi;"],[0,"&omega;"],[7,"&thetasym;"],[0,"&Upsi;"],[2,"&phiv;"],[0,"&piv;"],[5,"&Gammad;"],[0,"&digamma;"],[18,"&kappav;"],[0,"&rhov;"],[3,"&epsiv;"],[0,"&backepsilon;"],[10,"&IOcy;"],[0,"&DJcy;"],[0,"&GJcy;"],[0,"&Jukcy;"],[0,"&DScy;"],[0,"&Iukcy;"],[0,"&YIcy;"],[0,"&Jsercy;"],[0,"&LJcy;"],[0,"&NJcy;"],[0,"&TSHcy;"],[0,"&KJcy;"],[1,"&Ubrcy;"],[0,"&DZcy;"],[0,"&Acy;"],[0,"&Bcy;"],[0,"&Vcy;"],[0,"&Gcy;"],[0,"&Dcy;"],[0,"&IEcy;"],[0,"&ZHcy;"],[0,"&Zcy;"],[0,"&Icy;"],[0,"&Jcy;"],[0,"&Kcy;"],[0,"&Lcy;"],[0,"&Mcy;"],[0,"&Ncy;"],[0,"&Ocy;"],[0,"&Pcy;"],[0,"&Rcy;"],[0,"&Scy;"],[0,"&Tcy;"],[0,"&Ucy;"],[0,"&Fcy;"],[0,"&KHcy;"],[0,"&TScy;"],[0,"&CHcy;"],[0,"&SHcy;"],[0,"&SHCHcy;"],[0,"&HARDcy;"],[0,"&Ycy;"],[0,"&SOFTcy;"],[0,"&Ecy;"],[0,"&YUcy;"],[0,"&YAcy;"],[0,"&acy;"],[0,"&bcy;"],[0,"&vcy;"],[0,"&gcy;"],[0,"&dcy;"],[0,"&iecy;"],[0,"&zhcy;"],[0,"&zcy;"],[0,"&icy;"],[0,"&jcy;"],[0,"&kcy;"],[0,"&lcy;"],[0,"&mcy;"],[0,"&ncy;"],[0,"&ocy;"],[0,"&pcy;"],[0,"&rcy;"],[0,"&scy;"],[0,"&tcy;"],[0,"&ucy;"],[0,"&fcy;"],[0,"&khcy;"],[0,"&tscy;"],[0,"&chcy;"],[0,"&shcy;"],[0,"&shchcy;"],[0,"&hardcy;"],[0,"&ycy;"],[0,"&softcy;"],[0,"&ecy;"],[0,"&yucy;"],[0,"&yacy;"],[1,"&iocy;"],[0,"&djcy;"],[0,"&gjcy;"],[0,"&jukcy;"],[0,"&dscy;"],[0,"&iukcy;"],[0,"&yicy;"],[0,"&jsercy;"],[0,"&ljcy;"],[0,"&njcy;"],[0,"&tshcy;"],[0,"&kjcy;"],[1,"&ubrcy;"],[0,"&dzcy;"],[7074,"&ensp;"],[0,"&emsp;"],[0,"&emsp13;"],[0,"&emsp14;"],[1,"&numsp;"],[0,"&puncsp;"],[0,"&ThinSpace;"],[0,"&hairsp;"],[0,"&NegativeMediumSpace;"],[0,"&zwnj;"],[0,"&zwj;"],[0,"&lrm;"],[0,"&rlm;"],[0,"&dash;"],[2,"&ndash;"],[0,"&mdash;"],[0,"&horbar;"],[0,"&Verbar;"],[1,"&lsquo;"],[0,"&CloseCurlyQuote;"],[0,"&lsquor;"],[1,"&ldquo;"],[0,"&CloseCurlyDoubleQuote;"],[0,"&bdquo;"],[1,"&dagger;"],[0,"&Dagger;"],[0,"&bull;"],[2,"&nldr;"],[0,"&hellip;"],[9,"&permil;"],[0,"&pertenk;"],[0,"&prime;"],[0,"&Prime;"],[0,"&tprime;"],[0,"&backprime;"],[3,"&lsaquo;"],[0,"&rsaquo;"],[3,"&oline;"],[2,"&caret;"],[1,"&hybull;"],[0,"&frasl;"],[10,"&bsemi;"],[7,"&qprime;"],[7,{v:"&MediumSpace;",n:8202,o:"&ThickSpace;"}],[0,"&NoBreak;"],[0,"&af;"],[0,"&InvisibleTimes;"],[0,"&ic;"],[72,"&euro;"],[46,"&tdot;"],[0,"&DotDot;"],[37,"&complexes;"],[2,"&incare;"],[4,"&gscr;"],[0,"&hamilt;"],[0,"&Hfr;"],[0,"&Hopf;"],[0,"&planckh;"],[0,"&hbar;"],[0,"&imagline;"],[0,"&Ifr;"],[0,"&lagran;"],[0,"&ell;"],[1,"&naturals;"],[0,"&numero;"],[0,"&copysr;"],[0,"&weierp;"],[0,"&Popf;"],[0,"&Qopf;"],[0,"&realine;"],[0,"&real;"],[0,"&reals;"],[0,"&rx;"],[3,"&trade;"],[1,"&integers;"],[2,"&mho;"],[0,"&zeetrf;"],[0,"&iiota;"],[2,"&bernou;"],[0,"&Cayleys;"],[1,"&escr;"],[0,"&Escr;"],[0,"&Fouriertrf;"],[1,"&Mellintrf;"],[0,"&order;"],[0,"&alefsym;"],[0,"&beth;"],[0,"&gimel;"],[0,"&daleth;"],[12,"&CapitalDifferentialD;"],[0,"&dd;"],[0,"&ee;"],[0,"&ii;"],[10,"&frac13;"],[0,"&frac23;"],[0,"&frac15;"],[0,"&frac25;"],[0,"&frac35;"],[0,"&frac45;"],[0,"&frac16;"],[0,"&frac56;"],[0,"&frac18;"],[0,"&frac38;"],[0,"&frac58;"],[0,"&frac78;"],[49,"&larr;"],[0,"&ShortUpArrow;"],[0,"&rarr;"],[0,"&darr;"],[0,"&harr;"],[0,"&updownarrow;"],[0,"&nwarr;"],[0,"&nearr;"],[0,"&LowerRightArrow;"],[0,"&LowerLeftArrow;"],[0,"&nlarr;"],[0,"&nrarr;"],[1,{v:"&rarrw;",n:824,o:"&nrarrw;"}],[0,"&Larr;"],[0,"&Uarr;"],[0,"&Rarr;"],[0,"&Darr;"],[0,"&larrtl;"],[0,"&rarrtl;"],[0,"&LeftTeeArrow;"],[0,"&mapstoup;"],[0,"&map;"],[0,"&DownTeeArrow;"],[1,"&hookleftarrow;"],[0,"&hookrightarrow;"],[0,"&larrlp;"],[0,"&looparrowright;"],[0,"&harrw;"],[0,"&nharr;"],[1,"&lsh;"],[0,"&rsh;"],[0,"&ldsh;"],[0,"&rdsh;"],[1,"&crarr;"],[0,"&cularr;"],[0,"&curarr;"],[2,"&circlearrowleft;"],[0,"&circlearrowright;"],[0,"&leftharpoonup;"],[0,"&DownLeftVector;"],[0,"&RightUpVector;"],[0,"&LeftUpVector;"],[0,"&rharu;"],[0,"&DownRightVector;"],[0,"&dharr;"],[0,"&dharl;"],[0,"&RightArrowLeftArrow;"],[0,"&udarr;"],[0,"&LeftArrowRightArrow;"],[0,"&leftleftarrows;"],[0,"&upuparrows;"],[0,"&rightrightarrows;"],[0,"&ddarr;"],[0,"&leftrightharpoons;"],[0,"&Equilibrium;"],[0,"&nlArr;"],[0,"&nhArr;"],[0,"&nrArr;"],[0,"&DoubleLeftArrow;"],[0,"&DoubleUpArrow;"],[0,"&DoubleRightArrow;"],[0,"&dArr;"],[0,"&DoubleLeftRightArrow;"],[0,"&DoubleUpDownArrow;"],[0,"&nwArr;"],[0,"&neArr;"],[0,"&seArr;"],[0,"&swArr;"],[0,"&lAarr;"],[0,"&rAarr;"],[1,"&zigrarr;"],[6,"&larrb;"],[0,"&rarrb;"],[15,"&DownArrowUpArrow;"],[7,"&loarr;"],[0,"&roarr;"],[0,"&hoarr;"],[0,"&forall;"],[0,"&comp;"],[0,{v:"&part;",n:824,o:"&npart;"}],[0,"&exist;"],[0,"&nexist;"],[0,"&empty;"],[1,"&Del;"],[0,"&Element;"],[0,"&NotElement;"],[1,"&ni;"],[0,"&notni;"],[2,"&prod;"],[0,"&coprod;"],[0,"&sum;"],[0,"&minus;"],[0,"&MinusPlus;"],[0,"&dotplus;"],[1,"&Backslash;"],[0,"&lowast;"],[0,"&compfn;"],[1,"&radic;"],[2,"&prop;"],[0,"&infin;"],[0,"&angrt;"],[0,{v:"&ang;",n:8402,o:"&nang;"}],[0,"&angmsd;"],[0,"&angsph;"],[0,"&mid;"],[0,"&nmid;"],[0,"&DoubleVerticalBar;"],[0,"&NotDoubleVerticalBar;"],[0,"&and;"],[0,"&or;"],[0,{v:"&cap;",n:65024,o:"&caps;"}],[0,{v:"&cup;",n:65024,o:"&cups;"}],[0,"&int;"],[0,"&Int;"],[0,"&iiint;"],[0,"&conint;"],[0,"&Conint;"],[0,"&Cconint;"],[0,"&cwint;"],[0,"&ClockwiseContourIntegral;"],[0,"&awconint;"],[0,"&there4;"],[0,"&becaus;"],[0,"&ratio;"],[0,"&Colon;"],[0,"&dotminus;"],[1,"&mDDot;"],[0,"&homtht;"],[0,{v:"&sim;",n:8402,o:"&nvsim;"}],[0,{v:"&backsim;",n:817,o:"&race;"}],[0,{v:"&ac;",n:819,o:"&acE;"}],[0,"&acd;"],[0,"&VerticalTilde;"],[0,"&NotTilde;"],[0,{v:"&eqsim;",n:824,o:"&nesim;"}],[0,"&sime;"],[0,"&NotTildeEqual;"],[0,"&cong;"],[0,"&simne;"],[0,"&ncong;"],[0,"&ap;"],[0,"&nap;"],[0,"&ape;"],[0,{v:"&apid;",n:824,o:"&napid;"}],[0,"&backcong;"],[0,{v:"&asympeq;",n:8402,o:"&nvap;"}],[0,{v:"&bump;",n:824,o:"&nbump;"}],[0,{v:"&bumpe;",n:824,o:"&nbumpe;"}],[0,{v:"&doteq;",n:824,o:"&nedot;"}],[0,"&doteqdot;"],[0,"&efDot;"],[0,"&erDot;"],[0,"&Assign;"],[0,"&ecolon;"],[0,"&ecir;"],[0,"&circeq;"],[1,"&wedgeq;"],[0,"&veeeq;"],[1,"&triangleq;"],[2,"&equest;"],[0,"&ne;"],[0,{v:"&Congruent;",n:8421,o:"&bnequiv;"}],[0,"&nequiv;"],[1,{v:"&le;",n:8402,o:"&nvle;"}],[0,{v:"&ge;",n:8402,o:"&nvge;"}],[0,{v:"&lE;",n:824,o:"&nlE;"}],[0,{v:"&gE;",n:824,o:"&ngE;"}],[0,{v:"&lnE;",n:65024,o:"&lvertneqq;"}],[0,{v:"&gnE;",n:65024,o:"&gvertneqq;"}],[0,{v:"&ll;",n:new Map(u([[824,"&nLtv;"],[7577,"&nLt;"]]))}],[0,{v:"&gg;",n:new Map(u([[824,"&nGtv;"],[7577,"&nGt;"]]))}],[0,"&between;"],[0,"&NotCupCap;"],[0,"&nless;"],[0,"&ngt;"],[0,"&nle;"],[0,"&nge;"],[0,"&lesssim;"],[0,"&GreaterTilde;"],[0,"&nlsim;"],[0,"&ngsim;"],[0,"&LessGreater;"],[0,"&gl;"],[0,"&NotLessGreater;"],[0,"&NotGreaterLess;"],[0,"&pr;"],[0,"&sc;"],[0,"&prcue;"],[0,"&sccue;"],[0,"&PrecedesTilde;"],[0,{v:"&scsim;",n:824,o:"&NotSucceedsTilde;"}],[0,"&NotPrecedes;"],[0,"&NotSucceeds;"],[0,{v:"&sub;",n:8402,o:"&NotSubset;"}],[0,{v:"&sup;",n:8402,o:"&NotSuperset;"}],[0,"&nsub;"],[0,"&nsup;"],[0,"&sube;"],[0,"&supe;"],[0,"&NotSubsetEqual;"],[0,"&NotSupersetEqual;"],[0,{v:"&subne;",n:65024,o:"&varsubsetneq;"}],[0,{v:"&supne;",n:65024,o:"&varsupsetneq;"}],[1,"&cupdot;"],[0,"&UnionPlus;"],[0,{v:"&sqsub;",n:824,o:"&NotSquareSubset;"}],[0,{v:"&sqsup;",n:824,o:"&NotSquareSuperset;"}],[0,"&sqsube;"],[0,"&sqsupe;"],[0,{v:"&sqcap;",n:65024,o:"&sqcaps;"}],[0,{v:"&sqcup;",n:65024,o:"&sqcups;"}],[0,"&CirclePlus;"],[0,"&CircleMinus;"],[0,"&CircleTimes;"],[0,"&osol;"],[0,"&CircleDot;"],[0,"&circledcirc;"],[0,"&circledast;"],[1,"&circleddash;"],[0,"&boxplus;"],[0,"&boxminus;"],[0,"&boxtimes;"],[0,"&dotsquare;"],[0,"&RightTee;"],[0,"&dashv;"],[0,"&DownTee;"],[0,"&bot;"],[1,"&models;"],[0,"&DoubleRightTee;"],[0,"&Vdash;"],[0,"&Vvdash;"],[0,"&VDash;"],[0,"&nvdash;"],[0,"&nvDash;"],[0,"&nVdash;"],[0,"&nVDash;"],[0,"&prurel;"],[1,"&LeftTriangle;"],[0,"&RightTriangle;"],[0,{v:"&LeftTriangleEqual;",n:8402,o:"&nvltrie;"}],[0,{v:"&RightTriangleEqual;",n:8402,o:"&nvrtrie;"}],[0,"&origof;"],[0,"&imof;"],[0,"&multimap;"],[0,"&hercon;"],[0,"&intcal;"],[0,"&veebar;"],[1,"&barvee;"],[0,"&angrtvb;"],[0,"&lrtri;"],[0,"&bigwedge;"],[0,"&bigvee;"],[0,"&bigcap;"],[0,"&bigcup;"],[0,"&diam;"],[0,"&sdot;"],[0,"&sstarf;"],[0,"&divideontimes;"],[0,"&bowtie;"],[0,"&ltimes;"],[0,"&rtimes;"],[0,"&leftthreetimes;"],[0,"&rightthreetimes;"],[0,"&backsimeq;"],[0,"&curlyvee;"],[0,"&curlywedge;"],[0,"&Sub;"],[0,"&Sup;"],[0,"&Cap;"],[0,"&Cup;"],[0,"&fork;"],[0,"&epar;"],[0,"&lessdot;"],[0,"&gtdot;"],[0,{v:"&Ll;",n:824,o:"&nLl;"}],[0,{v:"&Gg;",n:824,o:"&nGg;"}],[0,{v:"&leg;",n:65024,o:"&lesg;"}],[0,{v:"&gel;",n:65024,o:"&gesl;"}],[2,"&cuepr;"],[0,"&cuesc;"],[0,"&NotPrecedesSlantEqual;"],[0,"&NotSucceedsSlantEqual;"],[0,"&NotSquareSubsetEqual;"],[0,"&NotSquareSupersetEqual;"],[2,"&lnsim;"],[0,"&gnsim;"],[0,"&precnsim;"],[0,"&scnsim;"],[0,"&nltri;"],[0,"&NotRightTriangle;"],[0,"&nltrie;"],[0,"&NotRightTriangleEqual;"],[0,"&vellip;"],[0,"&ctdot;"],[0,"&utdot;"],[0,"&dtdot;"],[0,"&disin;"],[0,"&isinsv;"],[0,"&isins;"],[0,{v:"&isindot;",n:824,o:"&notindot;"}],[0,"&notinvc;"],[0,"&notinvb;"],[1,{v:"&isinE;",n:824,o:"&notinE;"}],[0,"&nisd;"],[0,"&xnis;"],[0,"&nis;"],[0,"&notnivc;"],[0,"&notnivb;"],[6,"&barwed;"],[0,"&Barwed;"],[1,"&lceil;"],[0,"&rceil;"],[0,"&LeftFloor;"],[0,"&rfloor;"],[0,"&drcrop;"],[0,"&dlcrop;"],[0,"&urcrop;"],[0,"&ulcrop;"],[0,"&bnot;"],[1,"&profline;"],[0,"&profsurf;"],[1,"&telrec;"],[0,"&target;"],[5,"&ulcorn;"],[0,"&urcorn;"],[0,"&dlcorn;"],[0,"&drcorn;"],[2,"&frown;"],[0,"&smile;"],[9,"&cylcty;"],[0,"&profalar;"],[7,"&topbot;"],[6,"&ovbar;"],[1,"&solbar;"],[60,"&angzarr;"],[51,"&lmoustache;"],[0,"&rmoustache;"],[2,"&OverBracket;"],[0,"&bbrk;"],[0,"&bbrktbrk;"],[37,"&OverParenthesis;"],[0,"&UnderParenthesis;"],[0,"&OverBrace;"],[0,"&UnderBrace;"],[2,"&trpezium;"],[4,"&elinters;"],[59,"&blank;"],[164,"&circledS;"],[55,"&boxh;"],[1,"&boxv;"],[9,"&boxdr;"],[3,"&boxdl;"],[3,"&boxur;"],[3,"&boxul;"],[3,"&boxvr;"],[7,"&boxvl;"],[7,"&boxhd;"],[7,"&boxhu;"],[7,"&boxvh;"],[19,"&boxH;"],[0,"&boxV;"],[0,"&boxdR;"],[0,"&boxDr;"],[0,"&boxDR;"],[0,"&boxdL;"],[0,"&boxDl;"],[0,"&boxDL;"],[0,"&boxuR;"],[0,"&boxUr;"],[0,"&boxUR;"],[0,"&boxuL;"],[0,"&boxUl;"],[0,"&boxUL;"],[0,"&boxvR;"],[0,"&boxVr;"],[0,"&boxVR;"],[0,"&boxvL;"],[0,"&boxVl;"],[0,"&boxVL;"],[0,"&boxHd;"],[0,"&boxhD;"],[0,"&boxHD;"],[0,"&boxHu;"],[0,"&boxhU;"],[0,"&boxHU;"],[0,"&boxvH;"],[0,"&boxVh;"],[0,"&boxVH;"],[19,"&uhblk;"],[3,"&lhblk;"],[3,"&block;"],[8,"&blk14;"],[0,"&blk12;"],[0,"&blk34;"],[13,"&square;"],[8,"&blacksquare;"],[0,"&EmptyVerySmallSquare;"],[1,"&rect;"],[0,"&marker;"],[2,"&fltns;"],[1,"&bigtriangleup;"],[0,"&blacktriangle;"],[0,"&triangle;"],[2,"&blacktriangleright;"],[0,"&rtri;"],[3,"&bigtriangledown;"],[0,"&blacktriangledown;"],[0,"&dtri;"],[2,"&blacktriangleleft;"],[0,"&ltri;"],[6,"&loz;"],[0,"&cir;"],[32,"&tridot;"],[2,"&bigcirc;"],[8,"&ultri;"],[0,"&urtri;"],[0,"&lltri;"],[0,"&EmptySmallSquare;"],[0,"&FilledSmallSquare;"],[8,"&bigstar;"],[0,"&star;"],[7,"&phone;"],[49,"&female;"],[1,"&male;"],[29,"&spades;"],[2,"&clubs;"],[1,"&hearts;"],[0,"&diamondsuit;"],[3,"&sung;"],[2,"&flat;"],[0,"&natural;"],[0,"&sharp;"],[163,"&check;"],[3,"&cross;"],[8,"&malt;"],[21,"&sext;"],[33,"&VerticalSeparator;"],[25,"&lbbrk;"],[0,"&rbbrk;"],[84,"&bsolhsub;"],[0,"&suphsol;"],[28,"&LeftDoubleBracket;"],[0,"&RightDoubleBracket;"],[0,"&lang;"],[0,"&rang;"],[0,"&Lang;"],[0,"&Rang;"],[0,"&loang;"],[0,"&roang;"],[7,"&longleftarrow;"],[0,"&longrightarrow;"],[0,"&longleftrightarrow;"],[0,"&DoubleLongLeftArrow;"],[0,"&DoubleLongRightArrow;"],[0,"&DoubleLongLeftRightArrow;"],[1,"&longmapsto;"],[2,"&dzigrarr;"],[258,"&nvlArr;"],[0,"&nvrArr;"],[0,"&nvHarr;"],[0,"&Map;"],[6,"&lbarr;"],[0,"&bkarow;"],[0,"&lBarr;"],[0,"&dbkarow;"],[0,"&drbkarow;"],[0,"&DDotrahd;"],[0,"&UpArrowBar;"],[0,"&DownArrowBar;"],[2,"&Rarrtl;"],[2,"&latail;"],[0,"&ratail;"],[0,"&lAtail;"],[0,"&rAtail;"],[0,"&larrfs;"],[0,"&rarrfs;"],[0,"&larrbfs;"],[0,"&rarrbfs;"],[2,"&nwarhk;"],[0,"&nearhk;"],[0,"&hksearow;"],[0,"&hkswarow;"],[0,"&nwnear;"],[0,"&nesear;"],[0,"&seswar;"],[0,"&swnwar;"],[8,{v:"&rarrc;",n:824,o:"&nrarrc;"}],[1,"&cudarrr;"],[0,"&ldca;"],[0,"&rdca;"],[0,"&cudarrl;"],[0,"&larrpl;"],[2,"&curarrm;"],[0,"&cularrp;"],[7,"&rarrpl;"],[2,"&harrcir;"],[0,"&Uarrocir;"],[0,"&lurdshar;"],[0,"&ldrushar;"],[2,"&LeftRightVector;"],[0,"&RightUpDownVector;"],[0,"&DownLeftRightVector;"],[0,"&LeftUpDownVector;"],[0,"&LeftVectorBar;"],[0,"&RightVectorBar;"],[0,"&RightUpVectorBar;"],[0,"&RightDownVectorBar;"],[0,"&DownLeftVectorBar;"],[0,"&DownRightVectorBar;"],[0,"&LeftUpVectorBar;"],[0,"&LeftDownVectorBar;"],[0,"&LeftTeeVector;"],[0,"&RightTeeVector;"],[0,"&RightUpTeeVector;"],[0,"&RightDownTeeVector;"],[0,"&DownLeftTeeVector;"],[0,"&DownRightTeeVector;"],[0,"&LeftUpTeeVector;"],[0,"&LeftDownTeeVector;"],[0,"&lHar;"],[0,"&uHar;"],[0,"&rHar;"],[0,"&dHar;"],[0,"&luruhar;"],[0,"&ldrdhar;"],[0,"&ruluhar;"],[0,"&rdldhar;"],[0,"&lharul;"],[0,"&llhard;"],[0,"&rharul;"],[0,"&lrhard;"],[0,"&udhar;"],[0,"&duhar;"],[0,"&RoundImplies;"],[0,"&erarr;"],[0,"&simrarr;"],[0,"&larrsim;"],[0,"&rarrsim;"],[0,"&rarrap;"],[0,"&ltlarr;"],[1,"&gtrarr;"],[0,"&subrarr;"],[1,"&suplarr;"],[0,"&lfisht;"],[0,"&rfisht;"],[0,"&ufisht;"],[0,"&dfisht;"],[5,"&lopar;"],[0,"&ropar;"],[4,"&lbrke;"],[0,"&rbrke;"],[0,"&lbrkslu;"],[0,"&rbrksld;"],[0,"&lbrksld;"],[0,"&rbrkslu;"],[0,"&langd;"],[0,"&rangd;"],[0,"&lparlt;"],[0,"&rpargt;"],[0,"&gtlPar;"],[0,"&ltrPar;"],[3,"&vzigzag;"],[1,"&vangrt;"],[0,"&angrtvbd;"],[6,"&ange;"],[0,"&range;"],[0,"&dwangle;"],[0,"&uwangle;"],[0,"&angmsdaa;"],[0,"&angmsdab;"],[0,"&angmsdac;"],[0,"&angmsdad;"],[0,"&angmsdae;"],[0,"&angmsdaf;"],[0,"&angmsdag;"],[0,"&angmsdah;"],[0,"&bemptyv;"],[0,"&demptyv;"],[0,"&cemptyv;"],[0,"&raemptyv;"],[0,"&laemptyv;"],[0,"&ohbar;"],[0,"&omid;"],[0,"&opar;"],[1,"&operp;"],[1,"&olcross;"],[0,"&odsold;"],[1,"&olcir;"],[0,"&ofcir;"],[0,"&olt;"],[0,"&ogt;"],[0,"&cirscir;"],[0,"&cirE;"],[0,"&solb;"],[0,"&bsolb;"],[3,"&boxbox;"],[3,"&trisb;"],[0,"&rtriltri;"],[0,{v:"&LeftTriangleBar;",n:824,o:"&NotLeftTriangleBar;"}],[0,{v:"&RightTriangleBar;",n:824,o:"&NotRightTriangleBar;"}],[11,"&iinfin;"],[0,"&infintie;"],[0,"&nvinfin;"],[4,"&eparsl;"],[0,"&smeparsl;"],[0,"&eqvparsl;"],[5,"&blacklozenge;"],[8,"&RuleDelayed;"],[1,"&dsol;"],[9,"&bigodot;"],[0,"&bigoplus;"],[0,"&bigotimes;"],[1,"&biguplus;"],[1,"&bigsqcup;"],[5,"&iiiint;"],[0,"&fpartint;"],[2,"&cirfnint;"],[0,"&awint;"],[0,"&rppolint;"],[0,"&scpolint;"],[0,"&npolint;"],[0,"&pointint;"],[0,"&quatint;"],[0,"&intlarhk;"],[10,"&pluscir;"],[0,"&plusacir;"],[0,"&simplus;"],[0,"&plusdu;"],[0,"&plussim;"],[0,"&plustwo;"],[1,"&mcomma;"],[0,"&minusdu;"],[2,"&loplus;"],[0,"&roplus;"],[0,"&Cross;"],[0,"&timesd;"],[0,"&timesbar;"],[1,"&smashp;"],[0,"&lotimes;"],[0,"&rotimes;"],[0,"&otimesas;"],[0,"&Otimes;"],[0,"&odiv;"],[0,"&triplus;"],[0,"&triminus;"],[0,"&tritime;"],[0,"&intprod;"],[2,"&amalg;"],[0,"&capdot;"],[1,"&ncup;"],[0,"&ncap;"],[0,"&capand;"],[0,"&cupor;"],[0,"&cupcap;"],[0,"&capcup;"],[0,"&cupbrcap;"],[0,"&capbrcup;"],[0,"&cupcup;"],[0,"&capcap;"],[0,"&ccups;"],[0,"&ccaps;"],[2,"&ccupssm;"],[2,"&And;"],[0,"&Or;"],[0,"&andand;"],[0,"&oror;"],[0,"&orslope;"],[0,"&andslope;"],[1,"&andv;"],[0,"&orv;"],[0,"&andd;"],[0,"&ord;"],[1,"&wedbar;"],[6,"&sdote;"],[3,"&simdot;"],[2,{v:"&congdot;",n:824,o:"&ncongdot;"}],[0,"&easter;"],[0,"&apacir;"],[0,{v:"&apE;",n:824,o:"&napE;"}],[0,"&eplus;"],[0,"&pluse;"],[0,"&Esim;"],[0,"&Colone;"],[0,"&Equal;"],[1,"&ddotseq;"],[0,"&equivDD;"],[0,"&ltcir;"],[0,"&gtcir;"],[0,"&ltquest;"],[0,"&gtquest;"],[0,{v:"&leqslant;",n:824,o:"&nleqslant;"}],[0,{v:"&geqslant;",n:824,o:"&ngeqslant;"}],[0,"&lesdot;"],[0,"&gesdot;"],[0,"&lesdoto;"],[0,"&gesdoto;"],[0,"&lesdotor;"],[0,"&gesdotol;"],[0,"&lap;"],[0,"&gap;"],[0,"&lne;"],[0,"&gne;"],[0,"&lnap;"],[0,"&gnap;"],[0,"&lEg;"],[0,"&gEl;"],[0,"&lsime;"],[0,"&gsime;"],[0,"&lsimg;"],[0,"&gsiml;"],[0,"&lgE;"],[0,"&glE;"],[0,"&lesges;"],[0,"&gesles;"],[0,"&els;"],[0,"&egs;"],[0,"&elsdot;"],[0,"&egsdot;"],[0,"&el;"],[0,"&eg;"],[2,"&siml;"],[0,"&simg;"],[0,"&simlE;"],[0,"&simgE;"],[0,{v:"&LessLess;",n:824,o:"&NotNestedLessLess;"}],[0,{v:"&GreaterGreater;",n:824,o:"&NotNestedGreaterGreater;"}],[1,"&glj;"],[0,"&gla;"],[0,"&ltcc;"],[0,"&gtcc;"],[0,"&lescc;"],[0,"&gescc;"],[0,"&smt;"],[0,"&lat;"],[0,{v:"&smte;",n:65024,o:"&smtes;"}],[0,{v:"&late;",n:65024,o:"&lates;"}],[0,"&bumpE;"],[0,{v:"&PrecedesEqual;",n:824,o:"&NotPrecedesEqual;"}],[0,{v:"&sce;",n:824,o:"&NotSucceedsEqual;"}],[2,"&prE;"],[0,"&scE;"],[0,"&precneqq;"],[0,"&scnE;"],[0,"&prap;"],[0,"&scap;"],[0,"&precnapprox;"],[0,"&scnap;"],[0,"&Pr;"],[0,"&Sc;"],[0,"&subdot;"],[0,"&supdot;"],[0,"&subplus;"],[0,"&supplus;"],[0,"&submult;"],[0,"&supmult;"],[0,"&subedot;"],[0,"&supedot;"],[0,{v:"&subE;",n:824,o:"&nsubE;"}],[0,{v:"&supE;",n:824,o:"&nsupE;"}],[0,"&subsim;"],[0,"&supsim;"],[2,{v:"&subnE;",n:65024,o:"&varsubsetneqq;"}],[0,{v:"&supnE;",n:65024,o:"&varsupsetneqq;"}],[2,"&csub;"],[0,"&csup;"],[0,"&csube;"],[0,"&csupe;"],[0,"&subsup;"],[0,"&supsub;"],[0,"&subsub;"],[0,"&supsup;"],[0,"&suphsub;"],[0,"&supdsub;"],[0,"&forkv;"],[0,"&topfork;"],[0,"&mlcp;"],[8,"&Dashv;"],[1,"&Vdashl;"],[0,"&Barv;"],[0,"&vBar;"],[0,"&vBarv;"],[1,"&Vbar;"],[0,"&Not;"],[0,"&bNot;"],[0,"&rnmid;"],[0,"&cirmid;"],[0,"&midcir;"],[0,"&topcir;"],[0,"&nhpar;"],[0,"&parsim;"],[9,{v:"&parsl;",n:8421,o:"&nparsl;"}],[44343,{n:new Map(u([[56476,"&Ascr;"],[1,"&Cscr;"],[0,"&Dscr;"],[2,"&Gscr;"],[2,"&Jscr;"],[0,"&Kscr;"],[2,"&Nscr;"],[0,"&Oscr;"],[0,"&Pscr;"],[0,"&Qscr;"],[1,"&Sscr;"],[0,"&Tscr;"],[0,"&Uscr;"],[0,"&Vscr;"],[0,"&Wscr;"],[0,"&Xscr;"],[0,"&Yscr;"],[0,"&Zscr;"],[0,"&ascr;"],[0,"&bscr;"],[0,"&cscr;"],[0,"&dscr;"],[1,"&fscr;"],[1,"&hscr;"],[0,"&iscr;"],[0,"&jscr;"],[0,"&kscr;"],[0,"&lscr;"],[0,"&mscr;"],[0,"&nscr;"],[1,"&pscr;"],[0,"&qscr;"],[0,"&rscr;"],[0,"&sscr;"],[0,"&tscr;"],[0,"&uscr;"],[0,"&vscr;"],[0,"&wscr;"],[0,"&xscr;"],[0,"&yscr;"],[0,"&zscr;"],[52,"&Afr;"],[0,"&Bfr;"],[1,"&Dfr;"],[0,"&Efr;"],[0,"&Ffr;"],[0,"&Gfr;"],[2,"&Jfr;"],[0,"&Kfr;"],[0,"&Lfr;"],[0,"&Mfr;"],[0,"&Nfr;"],[0,"&Ofr;"],[0,"&Pfr;"],[0,"&Qfr;"],[1,"&Sfr;"],[0,"&Tfr;"],[0,"&Ufr;"],[0,"&Vfr;"],[0,"&Wfr;"],[0,"&Xfr;"],[0,"&Yfr;"],[1,"&afr;"],[0,"&bfr;"],[0,"&cfr;"],[0,"&dfr;"],[0,"&efr;"],[0,"&ffr;"],[0,"&gfr;"],[0,"&hfr;"],[0,"&ifr;"],[0,"&jfr;"],[0,"&kfr;"],[0,"&lfr;"],[0,"&mfr;"],[0,"&nfr;"],[0,"&ofr;"],[0,"&pfr;"],[0,"&qfr;"],[0,"&rfr;"],[0,"&sfr;"],[0,"&tfr;"],[0,"&ufr;"],[0,"&vfr;"],[0,"&wfr;"],[0,"&xfr;"],[0,"&yfr;"],[0,"&zfr;"],[0,"&Aopf;"],[0,"&Bopf;"],[1,"&Dopf;"],[0,"&Eopf;"],[0,"&Fopf;"],[0,"&Gopf;"],[1,"&Iopf;"],[0,"&Jopf;"],[0,"&Kopf;"],[0,"&Lopf;"],[0,"&Mopf;"],[1,"&Oopf;"],[3,"&Sopf;"],[0,"&Topf;"],[0,"&Uopf;"],[0,"&Vopf;"],[0,"&Wopf;"],[0,"&Xopf;"],[0,"&Yopf;"],[1,"&aopf;"],[0,"&bopf;"],[0,"&copf;"],[0,"&dopf;"],[0,"&eopf;"],[0,"&fopf;"],[0,"&gopf;"],[0,"&hopf;"],[0,"&iopf;"],[0,"&jopf;"],[0,"&kopf;"],[0,"&lopf;"],[0,"&mopf;"],[0,"&nopf;"],[0,"&oopf;"],[0,"&popf;"],[0,"&qopf;"],[0,"&ropf;"],[0,"&sopf;"],[0,"&topf;"],[0,"&uopf;"],[0,"&vopf;"],[0,"&wopf;"],[0,"&xopf;"],[0,"&yopf;"],[0,"&zopf;"]]))}],[8906,"&fflig;"],[0,"&filig;"],[0,"&fllig;"],[0,"&ffilig;"],[0,"&ffllig;"]])),N3}var KA={},Fj;function kA(){return Fj||(Fj=1,(function(u){Object.defineProperty(u,"__esModule",{value:!0}),u.escapeText=u.escapeAttribute=u.escapeUTF8=u.escape=u.encodeXML=u.getCodePoint=u.xmlReplacer=void 0,u.xmlReplacer=/["&'<>$\x80-\uFFFF]/g;var n=new Map([[34,"&quot;"],[38,"&amp;"],[39,"&apos;"],[60,"&lt;"],[62,"&gt;"]]);u.getCodePoint=String.prototype.codePointAt!=null?function(t,e){return t.codePointAt(e)}:function(t,e){return(t.charCodeAt(e)&64512)===55296?(t.charCodeAt(e)-55296)*1024+t.charCodeAt(e+1)-56320+65536:t.charCodeAt(e)};function o(t){for(var e="",r=0,a;(a=u.xmlReplacer.exec(t))!==null;){var c=a.index,s=t.charCodeAt(c),d=n.get(s);d!==void 0?(e+=t.substring(r,c)+d,r=c+1):(e+="".concat(t.substring(r,c),"&#x").concat((0,u.getCodePoint)(t,c).toString(16),";"),r=u.xmlReplacer.lastIndex+=+((s&64512)===55296))}return e+t.substr(r)}u.encodeXML=o,u.escape=o;function i(t,e){return function(a){for(var c,s=0,d="";c=t.exec(a);)s!==c.index&&(d+=a.substring(s,c.index)),d+=e.get(c[0].charCodeAt(0)),s=c.index+1;return d+a.substring(s)}}u.escapeUTF8=i(/[&<>'"]/g,n),u.escapeAttribute=i(/["&\u00A0]/g,new Map([[34,"&quot;"],[38,"&amp;"],[160,"&nbsp;"]])),u.escapeText=i(/[&<>\u00A0]/g,new Map([[38,"&amp;"],[60,"&lt;"],[62,"&gt;"],[160,"&nbsp;"]]))})(KA)),KA}var Ij;function Pj(){if(Ij)return pi;Ij=1;var u=pi&&pi.__importDefault||function(a){return a&&a.__esModule?a:{default:a}};Object.defineProperty(pi,"__esModule",{value:!0}),pi.encodeNonAsciiHTML=pi.encodeHTML=void 0;var n=u(kee()),o=kA(),i=/[\t\n!-,./:-@[-`\f{-}$\x80-\uFFFF]/g;function t(a){return r(i,a)}pi.encodeHTML=t;function e(a){return r(o.xmlReplacer,a)}pi.encodeNonAsciiHTML=e;function r(a,c){for(var s="",d=0,l;(l=a.exec(c))!==null;){var f=l.index;s+=c.substring(d,f);var h=c.charCodeAt(f),p=n.default.get(h);if(typeof p=="object"){if(f+1<c.length){var y=c.charCodeAt(f+1),_=typeof p.n=="number"?p.n===y?p.o:void 0:p.n.get(y);if(_!==void 0){s+=_,d=a.lastIndex+=1;continue}}p=p.v}if(p!==void 0)s+=p,d=f+1;else{var b=(0,o.getCodePoint)(c,f);s+="&#x".concat(b.toString(16),";"),d=a.lastIndex+=+(b!==h)}}return s+c.substr(d)}return pi}var Dj;function Wee(){return Dj||(Dj=1,(function(u){Object.defineProperty(u,"__esModule",{value:!0}),u.decodeXMLStrict=u.decodeHTML5Strict=u.decodeHTML4Strict=u.decodeHTML5=u.decodeHTML4=u.decodeHTMLAttribute=u.decodeHTMLStrict=u.decodeHTML=u.decodeXML=u.DecodingMode=u.EntityDecoder=u.encodeHTML5=u.encodeHTML4=u.encodeNonAsciiHTML=u.encodeHTML=u.escapeText=u.escapeAttribute=u.escapeUTF8=u.escape=u.encodeXML=u.encode=u.decodeStrict=u.decode=u.EncodingMode=u.EntityLevel=void 0;var n=D3(),o=Pj(),i=kA(),t;(function(f){f[f.XML=0]="XML",f[f.HTML=1]="HTML"})(t=u.EntityLevel||(u.EntityLevel={}));var e;(function(f){f[f.UTF8=0]="UTF8",f[f.ASCII=1]="ASCII",f[f.Extensive=2]="Extensive",f[f.Attribute=3]="Attribute",f[f.Text=4]="Text"})(e=u.EncodingMode||(u.EncodingMode={}));function r(f,h){h===void 0&&(h=t.XML);var p=typeof h=="number"?h:h.level;if(p===t.HTML){var y=typeof h=="object"?h.mode:void 0;return(0,n.decodeHTML)(f,y)}return(0,n.decodeXML)(f)}u.decode=r;function a(f,h){var p;h===void 0&&(h=t.XML);var y=typeof h=="number"?{level:h}:h;return(p=y.mode)!==null&&p!==void 0||(y.mode=n.DecodingMode.Strict),r(f,y)}u.decodeStrict=a;function c(f,h){h===void 0&&(h=t.XML);var p=typeof h=="number"?{level:h}:h;return p.mode===e.UTF8?(0,i.escapeUTF8)(f):p.mode===e.Attribute?(0,i.escapeAttribute)(f):p.mode===e.Text?(0,i.escapeText)(f):p.level===t.HTML?p.mode===e.ASCII?(0,o.encodeNonAsciiHTML)(f):(0,o.encodeHTML)(f):(0,i.encodeXML)(f)}u.encode=c;var s=kA();Object.defineProperty(u,"encodeXML",{enumerable:!0,get:function(){return s.encodeXML}}),Object.defineProperty(u,"escape",{enumerable:!0,get:function(){return s.escape}}),Object.defineProperty(u,"escapeUTF8",{enumerable:!0,get:function(){return s.escapeUTF8}}),Object.defineProperty(u,"escapeAttribute",{enumerable:!0,get:function(){return s.escapeAttribute}}),Object.defineProperty(u,"escapeText",{enumerable:!0,get:function(){return s.escapeText}});var d=Pj();Object.defineProperty(u,"encodeHTML",{enumerable:!0,get:function(){return d.encodeHTML}}),Object.defineProperty(u,"encodeNonAsciiHTML",{enumerable:!0,get:function(){return d.encodeNonAsciiHTML}}),Object.defineProperty(u,"encodeHTML4",{enumerable:!0,get:function(){return d.encodeHTML}}),Object.defineProperty(u,"encodeHTML5",{enumerable:!0,get:function(){return d.encodeHTML}});var l=D3();Object.defineProperty(u,"EntityDecoder",{enumerable:!0,get:function(){return l.EntityDecoder}}),Object.defineProperty(u,"DecodingMode",{enumerable:!0,get:function(){return l.DecodingMode}}),Object.defineProperty(u,"decodeXML",{enumerable:!0,get:function(){return l.decodeXML}}),Object.defineProperty(u,"decodeHTML",{enumerable:!0,get:function(){return l.decodeHTML}}),Object.defineProperty(u,"decodeHTMLStrict",{enumerable:!0,get:function(){return l.decodeHTMLStrict}}),Object.defineProperty(u,"decodeHTMLAttribute",{enumerable:!0,get:function(){return l.decodeHTMLAttribute}}),Object.defineProperty(u,"decodeHTML4",{enumerable:!0,get:function(){return l.decodeHTML}}),Object.defineProperty(u,"decodeHTML5",{enumerable:!0,get:function(){return l.decodeHTML}}),Object.defineProperty(u,"decodeHTML4Strict",{enumerable:!0,get:function(){return l.decodeHTMLStrict}}),Object.defineProperty(u,"decodeHTML5Strict",{enumerable:!0,get:function(){return l.decodeHTMLStrict}}),Object.defineProperty(u,"decodeXMLStrict",{enumerable:!0,get:function(){return l.decodeXML}})})(JA)),JA}var so={},Nj;function Yee(){return Nj||(Nj=1,Object.defineProperty(so,"__esModule",{value:!0}),so.attributeNames=so.elementNames=void 0,so.elementNames=new Map(["altGlyph","altGlyphDef","altGlyphItem","animateColor","animateMotion","animateTransform","clipPath","feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feDropShadow","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence","foreignObject","glyphRef","linearGradient","radialGradient","textPath"].map(function(u){return[u.toLowerCase(),u]})),so.attributeNames=new Map(["definitionURL","attributeName","attributeType","baseFrequency","baseProfile","calcMode","clipPathUnits","diffuseConstant","edgeMode","filterUnits","glyphRef","gradientTransform","gradientUnits","kernelMatrix","kernelUnitLength","keyPoints","keySplines","keyTimes","lengthAdjust","limitingConeAngle","markerHeight","markerUnits","markerWidth","maskContentUnits","maskUnits","numOctaves","pathLength","patternContentUnits","patternTransform","patternUnits","pointsAtX","pointsAtY","pointsAtZ","preserveAlpha","preserveAspectRatio","primitiveUnits","refX","refY","repeatCount","repeatDur","requiredExtensions","requiredFeatures","specularConstant","specularExponent","spreadMethod","startOffset","stdDeviation","stitchTiles","surfaceScale","systemLanguage","tableValues","targetX","targetY","textLength","viewBox","viewTarget","xChannelSelector","yChannelSelector","zoomAndPan"].map(function(u){return[u.toLowerCase(),u]}))),so}var jj;function Zee(){if(jj)return kr;jj=1;var u=kr&&kr.__assign||function(){return u=Object.assign||function(T){for(var v,S=1,F=arguments.length;S<F;S++){v=arguments[S];for(var M in v)Object.prototype.hasOwnProperty.call(v,M)&&(T[M]=v[M])}return T},u.apply(this,arguments)},n=kr&&kr.__createBinding||(Object.create?(function(T,v,S,F){F===void 0&&(F=S);var M=Object.getOwnPropertyDescriptor(v,S);(!M||("get"in M?!v.__esModule:M.writable||M.configurable))&&(M={enumerable:!0,get:function(){return v[S]}}),Object.defineProperty(T,F,M)}):(function(T,v,S,F){F===void 0&&(F=S),T[F]=v[S]})),o=kr&&kr.__setModuleDefault||(Object.create?(function(T,v){Object.defineProperty(T,"default",{enumerable:!0,value:v})}):function(T,v){T.default=v}),i=kr&&kr.__importStar||function(T){if(T&&T.__esModule)return T;var v={};if(T!=null)for(var S in T)S!=="default"&&Object.prototype.hasOwnProperty.call(T,S)&&n(v,T,S);return o(v,T),v};Object.defineProperty(kr,"__esModule",{value:!0}),kr.render=void 0;var t=i(Of()),e=Wee(),r=Yee(),a=new Set(["style","script","xmp","iframe","noembed","noframes","plaintext","noscript"]);function c(T){return T.replace(/"/g,"&quot;")}function s(T,v){var S;if(T){var F=((S=v.encodeEntities)!==null&&S!==void 0?S:v.decodeEntities)===!1?c:v.xmlMode||v.encodeEntities!=="utf8"?e.encodeXML:e.escapeAttribute;return Object.keys(T).map(function(M){var O,w,E=(O=T[M])!==null&&O!==void 0?O:"";return v.xmlMode==="foreign"&&(M=(w=r.attributeNames.get(M))!==null&&w!==void 0?w:M),!v.emptyAttrs&&!v.xmlMode&&E===""?M:"".concat(M,'="').concat(F(E),'"')}).join(" ")}}var d=new Set(["area","base","basefont","br","col","command","embed","frame","hr","img","input","isindex","keygen","link","meta","param","source","track","wbr"]);function l(T,v){v===void 0&&(v={});for(var S=("length"in T)?T:[T],F="",M=0;M<S.length;M++)F+=f(S[M],v);return F}kr.render=l,kr.default=l;function f(T,v){switch(T.type){case t.Root:return l(T.children,v);case t.Doctype:case t.Directive:return _(T);case t.Comment:return g(T);case t.CDATA:return m(T);case t.Script:case t.Style:case t.Tag:return y(T,v);case t.Text:return b(T,v)}}var h=new Set(["mi","mo","mn","ms","mtext","annotation-xml","foreignObject","desc","title"]),p=new Set(["svg","math"]);function y(T,v){var S;v.xmlMode==="foreign"&&(T.name=(S=r.elementNames.get(T.name))!==null&&S!==void 0?S:T.name,T.parent&&h.has(T.parent.name)&&(v=u(u({},v),{xmlMode:!1}))),!v.xmlMode&&p.has(T.name)&&(v=u(u({},v),{xmlMode:"foreign"}));var F="<".concat(T.name),M=s(T.attribs,v);return M&&(F+=" ".concat(M)),T.children.length===0&&(v.xmlMode?v.selfClosingTags!==!1:v.selfClosingTags&&d.has(T.name))?(v.xmlMode||(F+=" "),F+="/>"):(F+=">",T.children.length>0&&(F+=l(T.children,v)),(v.xmlMode||!d.has(T.name))&&(F+="</".concat(T.name,">"))),F}function _(T){return"<".concat(T.data,">")}function b(T,v){var S,F=T.data||"";return((S=v.encodeEntities)!==null&&S!==void 0?S:v.decodeEntities)!==!1&&!(!v.xmlMode&&T.parent&&a.has(T.parent.name))&&(F=v.xmlMode||v.encodeEntities!=="utf8"?(0,e.encodeXML)(F):(0,e.escapeText)(F)),F}function m(T){return"<![CDATA[".concat(T.children[0].data,"]]>")}function g(T){return"<!--".concat(T.data,"-->")}return kr}var Lj;function Mj(){if(Lj)return Zn;Lj=1;var u=Zn&&Zn.__importDefault||function(s){return s&&s.__esModule?s:{default:s}};Object.defineProperty(Zn,"__esModule",{value:!0}),Zn.getOuterHTML=t,Zn.getInnerHTML=e,Zn.getText=r,Zn.textContent=a,Zn.innerText=c;var n=Yn(),o=u(Zee()),i=Of();function t(s,d){return(0,o.default)(s,d)}function e(s,d){return(0,n.hasChildren)(s)?s.children.map(function(l){return t(l,d)}).join(""):""}function r(s){return Array.isArray(s)?s.map(r).join(""):(0,n.isTag)(s)?s.name==="br"?`
`:r(s.children):(0,n.isCDATA)(s)?r(s.children):(0,n.isText)(s)?s.data:""}function a(s){return Array.isArray(s)?s.map(a).join(""):(0,n.hasChildren)(s)&&!(0,n.isComment)(s)?a(s.children):(0,n.isText)(s)?s.data:""}function c(s){return Array.isArray(s)?s.map(c).join(""):(0,n.hasChildren)(s)&&(s.type===i.ElementType.Tag||(0,n.isCDATA)(s))?c(s.children):(0,n.isText)(s)?s.data:""}return Zn}var jn={},qj;function ete(){if(qj)return jn;qj=1,Object.defineProperty(jn,"__esModule",{value:!0}),jn.getChildren=n,jn.getParent=o,jn.getSiblings=i,jn.getAttributeValue=t,jn.hasAttrib=e,jn.getName=r,jn.nextElementSibling=a,jn.prevElementSibling=c;var u=Yn();function n(s){return(0,u.hasChildren)(s)?s.children:[]}function o(s){return s.parent||null}function i(s){var d,l,f=o(s);if(f!=null)return n(f);for(var h=[s],p=s.prev,y=s.next;p!=null;)h.unshift(p),d=p,p=d.prev;for(;y!=null;)h.push(y),l=y,y=l.next;return h}function t(s,d){var l;return(l=s.attribs)===null||l===void 0?void 0:l[d]}function e(s,d){return s.attribs!=null&&Object.prototype.hasOwnProperty.call(s.attribs,d)&&s.attribs[d]!=null}function r(s){return s.name}function a(s){for(var d,l=s.next;l!==null&&!(0,u.isTag)(l);)d=l,l=d.next;return l}function c(s){for(var d,l=s.prev;l!==null&&!(0,u.isTag)(l);)d=l,l=d.prev;return l}return jn}var yi={},Cj;function tte(){if(Cj)return yi;Cj=1,Object.defineProperty(yi,"__esModule",{value:!0}),yi.removeElement=u,yi.replaceElement=n,yi.appendChild=o,yi.append=i,yi.prependChild=t,yi.prepend=e;function u(r){if(r.prev&&(r.prev.next=r.next),r.next&&(r.next.prev=r.prev),r.parent){var a=r.parent.children,c=a.lastIndexOf(r);c>=0&&a.splice(c,1)}r.next=null,r.prev=null,r.parent=null}function n(r,a){var c=a.prev=r.prev;c&&(c.next=a);var s=a.next=r.next;s&&(s.prev=a);var d=a.parent=r.parent;if(d){var l=d.children;l[l.lastIndexOf(r)]=a,r.parent=null}}function o(r,a){if(u(a),a.next=null,a.parent=r,r.children.push(a)>1){var c=r.children[r.children.length-2];c.next=a,a.prev=c}else a.prev=null}function i(r,a){u(a);var c=r.parent,s=r.next;if(a.next=s,a.prev=r,r.next=a,a.parent=c,s){if(s.prev=a,c){var d=c.children;d.splice(d.lastIndexOf(s),0,a)}}else c&&c.children.push(a)}function t(r,a){if(u(a),a.parent=r,a.prev=null,r.children.unshift(a)!==1){var c=r.children[1];c.prev=a,a.next=c}else a.next=null}function e(r,a){u(a);var c=r.parent;if(c){var s=c.children;s.splice(s.indexOf(r),0,a)}r.prev&&(r.prev.next=a),a.parent=c,a.prev=r.prev,a.next=r,r.prev=a}return yi}var bi={},Bj;function $j(){if(Bj)return bi;Bj=1,Object.defineProperty(bi,"__esModule",{value:!0}),bi.filter=n,bi.find=o,bi.findOneChild=i,bi.findOne=t,bi.existsOne=e,bi.findAll=r;var u=Yn();function n(a,c,s,d){return s===void 0&&(s=!0),d===void 0&&(d=1/0),o(a,Array.isArray(c)?c:[c],s,d)}function o(a,c,s,d){for(var l=[],f=[Array.isArray(c)?c:[c]],h=[0];;){if(h[0]>=f[0].length){if(h.length===1)return l;f.shift(),h.shift();continue}var p=f[0][h[0]++];if(a(p)&&(l.push(p),--d<=0))return l;s&&(0,u.hasChildren)(p)&&p.children.length>0&&(h.unshift(0),f.unshift(p.children))}}function i(a,c){return c.find(a)}function t(a,c,s){s===void 0&&(s=!0);for(var d=Array.isArray(c)?c:[c],l=0;l<d.length;l++){var f=d[l];if((0,u.isTag)(f)&&a(f))return f;if(s&&(0,u.hasChildren)(f)&&f.children.length>0){var h=t(a,f.children,!0);if(h)return h}}return null}function e(a,c){return(Array.isArray(c)?c:[c]).some(function(s){return(0,u.isTag)(s)&&a(s)||(0,u.hasChildren)(s)&&e(a,s.children)})}function r(a,c){for(var s=[],d=[Array.isArray(c)?c:[c]],l=[0];;){if(l[0]>=d[0].length){if(d.length===1)return s;d.shift(),l.shift();continue}var f=d[0][l[0]++];(0,u.isTag)(f)&&a(f)&&s.push(f),(0,u.hasChildren)(f)&&f.children.length>0&&(l.unshift(0),d.unshift(f.children))}}return bi}var _i={},Uj;function Vj(){if(Uj)return _i;Uj=1,Object.defineProperty(_i,"__esModule",{value:!0}),_i.testElement=r,_i.getElements=a,_i.getElementById=c,_i.getElementsByTagName=s,_i.getElementsByClassName=d,_i.getElementsByTagType=l;var u=Yn(),n=$j(),o={tag_name:function(f){return typeof f=="function"?function(h){return(0,u.isTag)(h)&&f(h.name)}:f==="*"?u.isTag:function(h){return(0,u.isTag)(h)&&h.name===f}},tag_type:function(f){return typeof f=="function"?function(h){return f(h.type)}:function(h){return h.type===f}},tag_contains:function(f){return typeof f=="function"?function(h){return(0,u.isText)(h)&&f(h.data)}:function(h){return(0,u.isText)(h)&&h.data===f}}};function i(f,h){return typeof h=="function"?function(p){return(0,u.isTag)(p)&&h(p.attribs[f])}:function(p){return(0,u.isTag)(p)&&p.attribs[f]===h}}function t(f,h){return function(p){return f(p)||h(p)}}function e(f){var h=Object.keys(f).map(function(p){var y=f[p];return Object.prototype.hasOwnProperty.call(o,p)?o[p](y):i(p,y)});return h.length===0?null:h.reduce(t)}function r(f,h){var p=e(f);return p?p(h):!0}function a(f,h,p,y){y===void 0&&(y=1/0);var _=e(f);return _?(0,n.filter)(_,h,p,y):[]}function c(f,h,p){return p===void 0&&(p=!0),Array.isArray(h)||(h=[h]),(0,n.findOne)(i("id",f),h,p)}function s(f,h,p,y){return p===void 0&&(p=!0),y===void 0&&(y=1/0),(0,n.filter)(o.tag_name(f),h,p,y)}function d(f,h,p,y){return p===void 0&&(p=!0),y===void 0&&(y=1/0),(0,n.filter)(i("class",f),h,p,y)}function l(f,h,p,y){return p===void 0&&(p=!0),y===void 0&&(y=1/0),(0,n.filter)(o.tag_type(f),h,p,y)}return _i}var Ji={},Qj;function rte(){if(Qj)return Ji;Qj=1,Object.defineProperty(Ji,"__esModule",{value:!0}),Ji.DocumentPosition=void 0,Ji.removeSubsets=n,Ji.compareDocumentPosition=i,Ji.uniqueSort=t;var u=Yn();function n(e){for(var r=e.length;--r>=0;){var a=e[r];if(r>0&&e.lastIndexOf(a,r-1)>=0){e.splice(r,1);continue}for(var c=a.parent;c;c=c.parent)if(e.includes(c)){e.splice(r,1);break}}return e}var o;(function(e){e[e.DISCONNECTED=1]="DISCONNECTED",e[e.PRECEDING=2]="PRECEDING",e[e.FOLLOWING=4]="FOLLOWING",e[e.CONTAINS=8]="CONTAINS",e[e.CONTAINED_BY=16]="CONTAINED_BY"})(o||(Ji.DocumentPosition=o={}));function i(e,r){var a=[],c=[];if(e===r)return 0;for(var s=(0,u.hasChildren)(e)?e:e.parent;s;)a.unshift(s),s=s.parent;for(s=(0,u.hasChildren)(r)?r:r.parent;s;)c.unshift(s),s=s.parent;for(var d=Math.min(a.length,c.length),l=0;l<d&&a[l]===c[l];)l++;if(l===0)return o.DISCONNECTED;var f=a[l-1],h=f.children,p=a[l],y=c[l];return h.indexOf(p)>h.indexOf(y)?f===r?o.FOLLOWING|o.CONTAINED_BY:o.FOLLOWING:f===e?o.PRECEDING|o.CONTAINS:o.PRECEDING}function t(e){return e=e.filter(function(r,a,c){return!c.includes(r,a+1)}),e.sort(function(r,a){var c=i(r,a);return c&o.PRECEDING?-1:c&o.FOLLOWING?1:0}),e}return Ji}var j3={},Hj;function nte(){if(Hj)return j3;Hj=1,Object.defineProperty(j3,"__esModule",{value:!0}),j3.getFeed=o;var u=Mj(),n=Vj();function o(f){var h=c(l,f);return h?h.name==="feed"?i(h):t(h):null}function i(f){var h,p=f.children,y={type:"atom",items:(0,n.getElementsByTagName)("entry",p).map(function(m){var g,T=m.children,v={media:a(T)};d(v,"id","id",T),d(v,"title","title",T);var S=(g=c("link",T))===null||g===void 0?void 0:g.attribs.href;S&&(v.link=S);var F=s("summary",T)||s("content",T);F&&(v.description=F);var M=s("updated",T);return M&&(v.pubDate=new Date(M)),v})};d(y,"id","id",p),d(y,"title","title",p);var _=(h=c("link",p))===null||h===void 0?void 0:h.attribs.href;_&&(y.link=_),d(y,"description","subtitle",p);var b=s("updated",p);return b&&(y.updated=new Date(b)),d(y,"author","email",p,!0),y}function t(f){var h,p,y=(p=(h=c("channel",f.children))===null||h===void 0?void 0:h.children)!==null&&p!==void 0?p:[],_={type:f.name.substr(0,3),id:"",items:(0,n.getElementsByTagName)("item",f.children).map(function(m){var g=m.children,T={media:a(g)};d(T,"id","guid",g),d(T,"title","title",g),d(T,"link","link",g),d(T,"description","description",g);var v=s("pubDate",g)||s("dc:date",g);return v&&(T.pubDate=new Date(v)),T})};d(_,"title","title",y),d(_,"link","link",y),d(_,"description","description",y);var b=s("lastBuildDate",y);return b&&(_.updated=new Date(b)),d(_,"author","managingEditor",y,!0),_}var e=["url","type","lang"],r=["fileSize","bitrate","framerate","samplingrate","channels","duration","height","width"];function a(f){return(0,n.getElementsByTagName)("media:content",f).map(function(h){for(var p=h.attribs,y={medium:p.medium,isDefault:!!p.isDefault},_=0,b=e;_<b.length;_++){var m=b[_];p[m]&&(y[m]=p[m])}for(var g=0,T=r;g<T.length;g++){var m=T[g];p[m]&&(y[m]=parseInt(p[m],10))}return p.expression&&(y.expression=p.expression),y})}function c(f,h){return(0,n.getElementsByTagName)(f,h,!0,1)[0]}function s(f,h,p){return p===void 0&&(p=!1),(0,u.textContent)((0,n.getElementsByTagName)(f,h,p,1)).trim()}function d(f,h,p,y,_){_===void 0&&(_=!1);var b=s(p,y,_);b&&(f[h]=b)}function l(f){return f==="rss"||f==="feed"||f==="rdf:RDF"}return j3}var Gj;function Af(){return Gj||(Gj=1,(function(u){var n=oo&&oo.__createBinding||(Object.create?(function(t,e,r,a){a===void 0&&(a=r);var c=Object.getOwnPropertyDescriptor(e,r);(!c||("get"in c?!e.__esModule:c.writable||c.configurable))&&(c={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,a,c)}):(function(t,e,r,a){a===void 0&&(a=r),t[a]=e[r]})),o=oo&&oo.__exportStar||function(t,e){for(var r in t)r!=="default"&&!Object.prototype.hasOwnProperty.call(e,r)&&n(e,t,r)};Object.defineProperty(u,"__esModule",{value:!0}),u.hasChildren=u.isDocument=u.isComment=u.isText=u.isCDATA=u.isTag=void 0,o(Mj(),u),o(ete(),u),o(tte(),u),o($j(),u),o(Vj(),u),o(rte(),u),o(nte(),u);var i=Yn();Object.defineProperty(u,"isTag",{enumerable:!0,get:function(){return i.isTag}}),Object.defineProperty(u,"isCDATA",{enumerable:!0,get:function(){return i.isCDATA}}),Object.defineProperty(u,"isText",{enumerable:!0,get:function(){return i.isText}}),Object.defineProperty(u,"isComment",{enumerable:!0,get:function(){return i.isComment}}),Object.defineProperty(u,"isDocument",{enumerable:!0,get:function(){return i.isDocument}}),Object.defineProperty(u,"hasChildren",{enumerable:!0,get:function(){return i.hasChildren}})})(oo)),oo}var zj;function Xj(){return zj||(zj=1,(function(u){var n=Pn&&Pn.__createBinding||(Object.create?(function(b,m,g,T){T===void 0&&(T=g);var v=Object.getOwnPropertyDescriptor(m,g);(!v||("get"in v?!m.__esModule:v.writable||v.configurable))&&(v={enumerable:!0,get:function(){return m[g]}}),Object.defineProperty(b,T,v)}):(function(b,m,g,T){T===void 0&&(T=g),b[T]=m[g]})),o=Pn&&Pn.__setModuleDefault||(Object.create?(function(b,m){Object.defineProperty(b,"default",{enumerable:!0,value:m})}):function(b,m){b.default=m}),i=Pn&&Pn.__importStar||function(b){if(b&&b.__esModule)return b;var m={};if(b!=null)for(var g in b)g!=="default"&&Object.prototype.hasOwnProperty.call(b,g)&&n(m,b,g);return o(m,b),m},t=Pn&&Pn.__importDefault||function(b){return b&&b.__esModule?b:{default:b}};Object.defineProperty(u,"__esModule",{value:!0}),u.DomUtils=u.parseFeed=u.getFeed=u.ElementType=u.Tokenizer=u.createDomStream=u.parseDOM=u.parseDocument=u.DefaultHandler=u.DomHandler=u.Parser=void 0;var e=Sj(),r=Sj();Object.defineProperty(u,"Parser",{enumerable:!0,get:function(){return r.Parser}});var a=Yn(),c=Yn();Object.defineProperty(u,"DomHandler",{enumerable:!0,get:function(){return c.DomHandler}}),Object.defineProperty(u,"DefaultHandler",{enumerable:!0,get:function(){return c.DomHandler}});function s(b,m){var g=new a.DomHandler(void 0,m);return new e.Parser(g,m).end(b),g.root}u.parseDocument=s;function d(b,m){return s(b,m).children}u.parseDOM=d;function l(b,m,g){var T=new a.DomHandler(b,m,g);return new e.Parser(T,m)}u.createDomStream=l;var f=Tj();Object.defineProperty(u,"Tokenizer",{enumerable:!0,get:function(){return t(f).default}}),u.ElementType=i(Of());var h=Af(),p=Af();Object.defineProperty(u,"getFeed",{enumerable:!0,get:function(){return p.getFeed}});var y={xmlMode:!0};function _(b,m){return m===void 0&&(m=y),(0,h.getFeed)(d(b,m))}u.parseFeed=_,u.DomUtils=i(Af())})(Pn)),Pn}var ite={"@context":{alternate:"http://www.w3.org/1999/xhtml/vocab#alternate",appendix:"http://www.w3.org/1999/xhtml/vocab#appendix",cite:"http://www.w3.org/1999/xhtml/vocab#cite",bookmark:"http://www.w3.org/1999/xhtml/vocab#bookmark",contents:"http://www.w3.org/1999/xhtml/vocab#contents",chapter:"http://www.w3.org/1999/xhtml/vocab#chapter",copyright:"http://www.w3.org/1999/xhtml/vocab#copyright",first:"http://www.w3.org/1999/xhtml/vocab#first",glossary:"http://www.w3.org/1999/xhtml/vocab#glossary",help:"http://www.w3.org/1999/xhtml/vocab#help",icon:"http://www.w3.org/1999/xhtml/vocab#icon",index:"http://www.w3.org/1999/xhtml/vocab#index",last:"http://www.w3.org/1999/xhtml/vocab#last",license:"http://www.w3.org/1999/xhtml/vocab#license",meta:"http://www.w3.org/1999/xhtml/vocab#meta",next:"http://www.w3.org/1999/xhtml/vocab#next",prev:"http://www.w3.org/1999/xhtml/vocab#prev",previous:"http://www.w3.org/1999/xhtml/vocab#previous",section:"http://www.w3.org/1999/xhtml/vocab#section",start:"http://www.w3.org/1999/xhtml/vocab#start",stylesheet:"http://www.w3.org/1999/xhtml/vocab#stylesheet",subsection:"http://www.w3.org/1999/xhtml/vocab#subsection",top:"http://www.w3.org/1999/xhtml/vocab#top",up:"http://www.w3.org/1999/xhtml/vocab#up",p3pv1:"http://www.w3.org/1999/xhtml/vocab#p3pv1"}},ate={"@context":{as:"https://www.w3.org/ns/activitystreams#",cat:"http://www.w3.org/ns/dcat#",cc:"http://creativecommons.org/ns#",cnt:"http://www.w3.org/2008/content#",csvw:"http://www.w3.org/ns/csvw#",ctag:"http://commontag.org/ns#",dc:"http://purl.org/dc/terms/",dc11:"http://purl.org/dc/elements/1.1/",dcat:"http://www.w3.org/ns/dcat#",dcterms:"http://purl.org/dc/terms/",dqv:"http://www.w3.org/ns/dqv#",duv:"https://www.w3.org/TR/vocab-duv#",earl:"http://www.w3.org/ns/earl#",foaf:"http://xmlns.com/foaf/0.1/",gldp:"http://www.w3.org/ns/people#",gr:"http://purl.org/goodrelations/v1#",grddl:"http://www.w3.org/2003/g/data-view#",ht:"http://www.w3.org/2006/http#",ical:"http://www.w3.org/2002/12/cal/icaltzd#",ldp:"http://www.w3.org/ns/ldp#",ma:"http://www.w3.org/ns/ma-ont#",oa:"http://www.w3.org/ns/oa#",odrl:"http://www.w3.org/ns/odrl/2/",og:"http://ogp.me/ns#",org:"http://www.w3.org/ns/org#",owl:"http://www.w3.org/2002/07/owl#",prov:"http://www.w3.org/ns/prov#",ptr:"http://www.w3.org/2009/pointers#",qb:"http://purl.org/linked-data/cube#",rev:"http://purl.org/stuff/rev#",rdf:"http://www.w3.org/1999/02/22-rdf-syntax-ns#",rdfa:"http://www.w3.org/ns/rdfa#",rdfs:"http://www.w3.org/2000/01/rdf-schema#",rif:"http://www.w3.org/2007/rif#",rr:"http://www.w3.org/ns/r2rml#",schema:"http://schema.org/",sd:"http://www.w3.org/ns/sparql-service-description#",sioc:"http://rdfs.org/sioc/ns#",skos:"http://www.w3.org/2004/02/skos/core#",skosxl:"http://www.w3.org/2008/05/skos-xl#",ssn:"http://www.w3.org/ns/ssn/",sosa:"http://www.w3.org/ns/sosa/",time:"http://www.w3.org/2006/time#",v:"http://rdf.data-vocabulary.org/#",vcard:"http://www.w3.org/2006/vcard/ns#",void:"http://rdfs.org/ns/void#",wdr:"http://www.w3.org/2007/05/powder#",wdrs:"http://www.w3.org/2007/05/powder-s#",xhv:"http://www.w3.org/1999/xhtml/vocab#",xml:"http://www.w3.org/XML/1998/namespace",xsd:"http://www.w3.org/2001/XMLSchema#",describedby:"http://www.w3.org/2007/05/powder-s#describedby",license:"http://www.w3.org/1999/xhtml/vocab#license",role:"http://www.w3.org/1999/xhtml/vocab#role"}},co={},Jj;function WA(){return Jj||(Jj=1,Object.defineProperty(co,"__esModule",{value:!0}),co.RDFA_CONTENTTYPES=co.RDFA_FEATURES=void 0,co.RDFA_FEATURES={"":{baseTag:!0,xmlBase:!0,langAttribute:!0,onlyAllowUriRelRevIfProperty:!0,inheritSubjectInHeadBody:!0,datetimeAttribute:!0,timeTag:!0,htmlDatatype:!0,copyRdfaPatterns:!0,xmlnsPrefixMappings:!0,xhtmlInitialContext:!0,roleAttribute:!0},core:{baseTag:!1,xmlBase:!1,langAttribute:!0,onlyAllowUriRelRevIfProperty:!0,inheritSubjectInHeadBody:!1,datetimeAttribute:!1,timeTag:!1,htmlDatatype:!1,copyRdfaPatterns:!0,xmlnsPrefixMappings:!0,xhtmlInitialContext:!1,roleAttribute:!1},html:{baseTag:!0,xmlBase:!1,langAttribute:!0,onlyAllowUriRelRevIfProperty:!0,inheritSubjectInHeadBody:!0,datetimeAttribute:!0,timeTag:!0,htmlDatatype:!0,copyRdfaPatterns:!0,xmlnsPrefixMappings:!0,xhtmlInitialContext:!1,roleAttribute:!0},xhtml:{baseTag:!0,xmlBase:!1,langAttribute:!0,onlyAllowUriRelRevIfProperty:!0,inheritSubjectInHeadBody:!0,datetimeAttribute:!0,timeTag:!0,htmlDatatype:!0,copyRdfaPatterns:!0,xmlnsPrefixMappings:!0,xhtmlInitialContext:!0,roleAttribute:!0},xml:{baseTag:!1,xmlBase:!0,langAttribute:!0,onlyAllowUriRelRevIfProperty:!1,inheritSubjectInHeadBody:!1,datetimeAttribute:!0,timeTag:!0,htmlDatatype:!1,copyRdfaPatterns:!1,xmlnsPrefixMappings:!0,xhtmlInitialContext:!1,roleAttribute:!0}},co.RDFA_CONTENTTYPES={"text/html":"html","application/xhtml+xml":"xhtml","application/xml":"xml","text/xml":"xml","image/svg+xml":"xml"}),co}var A1={},Kj;function kj(){if(Kj)return A1;Kj=1,Object.defineProperty(A1,"__esModule",{value:!0}),A1.Util=void 0;const u=Jr(),n=WA(),o=hr();class i{constructor(e,r){this.dataFactory=e||new o.DataFactory,this.baseIRI=this.dataFactory.namedNode(r||""),this.baseIRIDocument=this.baseIRI}static parsePrefixes(e,r,a){const c={};if(a)for(const s in e)s.startsWith("xmlns")&&(c[s.substr(6)]=e[s]);if(e.prefix||Object.keys(c).length>0){const s=Object.assign(Object.assign({},r),c);if(e.prefix){let d;for(;d=i.PREFIX_REGEX.exec(e.prefix);)s[d[1]]=d[2]}return s}else return r}static expandPrefixedTerm(e,r){const a=e.indexOf(":");let c,s;if(a>=0&&(c=e.substr(0,a),s=e.substr(a+1)),c==="")return"http://www.w3.org/1999/xhtml/vocab#"+s;if(c){const d=r.prefixesAll[c];if(d)return d+s}if(e){const d=r.prefixesAll[e.toLocaleLowerCase()];if(d)return d}return e}static isValidIri(e){return i.IRI_REGEX.test(e)}static contentTypeToProfile(e){return n.RDFA_CONTENTTYPES[e]||""}getBaseIRI(e){let r=e;const a=r.indexOf("#");return a>=0&&(r=r.substr(0,a)),this.dataFactory.namedNode((0,u.resolve)(r,this.baseIRI.value))}getResourceOrBaseIri(e,r){return e===!0?this.getBaseIriTerm(r):e}getBaseIriTerm(e){return e.localBaseIRI||this.baseIRI}createVocabIris(e,r,a,c){return e.split(/\s+/).filter(s=>s&&(a||s.indexOf(":")>=0)).map(s=>this.createIri(s,r,!0,!0,c)).filter(s=>s!=null)}createLiteral(e,r){if(r.interpretObjectAsTime&&!r.datatype){for(const a of i.TIME_REGEXES)if(e.match(a.regex)){r.datatype=this.dataFactory.namedNode(i.XSD+a.type);break}}return this.dataFactory.literal(e,r.datatype||r.language)}createBlankNode(){return this.blankNodeFactory?this.blankNodeFactory():this.dataFactory.blankNode()}createIri(e,r,a,c,s){if(e=e||"",!c)return a||(e=(0,u.resolve)(e,this.getBaseIriTerm(r).value)),i.isValidIri(e)?this.dataFactory.namedNode(e):null;if(e.length>0&&e[0]==="["&&e[e.length-1]==="]"&&(e=e.substr(1,e.length-2),e.indexOf(":")<0))return null;if(e.startsWith("_:"))return s?this.dataFactory.blankNode(e.substr(2)||"b_identity"):null;if(a&&r.vocab&&e.indexOf(":")<0)return this.dataFactory.namedNode(r.vocab+e);let d=i.expandPrefixedTerm(e,r);return a?e!==d&&(d=(0,u.resolve)(d,this.baseIRIDocument.value)):d=(0,u.resolve)(d,this.getBaseIriTerm(r).value),i.isValidIri(d)?this.dataFactory.namedNode(d):null}}return A1.Util=i,i.RDF="http://www.w3.org/1999/02/22-rdf-syntax-ns#",i.XSD="http://www.w3.org/2001/XMLSchema#",i.RDFA="http://www.w3.org/ns/rdfa#",i.PREFIX_REGEX=/\s*([^:\s]*)*:\s*([^\s]*)*\s*/g,i.TIME_REGEXES=[{regex:/^-?P([0-9]+Y)?([0-9]+M)?([0-9]+D)?(T([0-9]+H)?([0-9]+M)?([0-9]+(\.[0-9])?S)?)?$/,type:"duration"},{regex:/^[0-9]+-[0-9][0-9]-[0-9][0-9]T[0-9][0-9]:[0-9][0-9]:[0-9][0-9]((Z?)|([\+-][0-9][0-9]:[0-9][0-9]))$/,type:"dateTime"},{regex:/^[0-9]+-[0-9][0-9]-[0-9][0-9]Z?$/,type:"date"},{regex:/^[0-9][0-9]:[0-9][0-9]:[0-9][0-9]((Z?)|([\+-][0-9][0-9]:[0-9][0-9]))$/,type:"time"},{regex:/^[0-9]+-[0-9][0-9]$/,type:"gYearMonth"},{regex:/^[0-9]+$/,type:"gYear"}],i.IRI_REGEX=/^([A-Za-z][A-Za-z0-9+-.]*|_):[^ "<>{}|\\\[\]`]*$/,A1}var Wj;function ute(){if(Wj)return O1;Wj=1,Object.defineProperty(O1,"__esModule",{value:!0}),O1.RdfaParser=void 0;const u=Xj(),n=Pt(),o=ite,i=ate,t=WA(),e=kj();let r=class oJ extends n.Transform{constructor(c){super({readableObjectMode:!0}),this.activeTagStack=[],c=c||{},this.options=c,this.util=new e.Util(c.dataFactory,c.baseIRI),this.defaultGraph=c.defaultGraph||this.util.dataFactory.defaultGraph();const s=c.contentType?e.Util.contentTypeToProfile(c.contentType):c.profile||"";this.features=c.features||t.RDFA_FEATURES[s],this.htmlParseListener=c.htmlParseListener,this.rdfaPatterns=this.features.copyRdfaPatterns?{}:null,this.pendingRdfaPatternCopies=this.features.copyRdfaPatterns?{}:null,this.parser=this.initializeParser(s==="xml"),this.activeTagStack.push({incompleteTriples:[],inlist:!1,language:c.language,listMapping:{},listMappingLocal:{},name:"",prefixesAll:Object.assign(Object.assign({},i["@context"]),this.features.xhtmlInitialContext?o["@context"]:{}),prefixesCustom:{},skipElement:!1,vocab:c.vocab})}import(c){const s=new n.PassThrough({readableObjectMode:!0});c.on("error",l=>d.emit("error",l)),c.on("data",l=>s.push(l)),c.on("end",()=>s.push(null));const d=s.pipe(new oJ(this.options));return d}_transform(c,s,d){this.parser.write(c.toString()),d()}_flush(c){this.parser.end(),c()}onTagOpen(c,s){let d=this.activeTagStack.length-1;for(;d>0&&this.activeTagStack[d].skipElement;)d--;let l=this.activeTagStack[d];d!==this.activeTagStack.length-1&&(l=Object.assign(Object.assign({},l),{language:this.activeTagStack[this.activeTagStack.length-1].language,prefixesAll:this.activeTagStack[this.activeTagStack.length-1].prefixesAll,prefixesCustom:this.activeTagStack[this.activeTagStack.length-1].prefixesCustom,vocab:this.activeTagStack[this.activeTagStack.length-1].vocab}));const f={collectChildTags:l.collectChildTags,incompleteTriples:[],inlist:"inlist"in s,listMapping:[],listMappingLocal:l.listMapping,localBaseIRI:l.localBaseIRI,name:c,prefixesAll:null,prefixesCustom:null,skipElement:!1};if(this.activeTagStack.push(f),f.collectChildTags){for(const v of Object.keys(l.prefixesCustom).sort()){const S=l.prefixesCustom[v],F=v===""?"xmlns":"xmlns:"+v;F in s||(s[F]=S)}const T=Object.keys(s).map(v=>`${v}="${s[v]}"`).join(" ");if(f.text=[`<${c}${T?" "+T:""}>`],this.features.skipHandlingXmlLiteralChildren)return}let h=!0,p=!0;if(this.features.onlyAllowUriRelRevIfProperty&&("property"in s&&"rel"in s&&(h=!1,s.rel.indexOf(":")<0&&delete s.rel),"property"in s&&"rev"in s&&(p=!1,s.rev.indexOf(":")<0&&delete s.rev)),this.features.copyRdfaPatterns){if(l.collectedPatternTag){const T={attributes:s,children:[],name:c,referenced:!1,rootPattern:!1,text:[]};l.collectedPatternTag.children.push(T),f.collectedPatternTag=T;return}if(s.typeof==="rdfa:Pattern"){f.collectedPatternTag={attributes:s,children:[],name:c,parentTag:l,referenced:!1,rootPattern:!0,text:[]};return}if(s.property==="rdfa:copy"){const T=s.resource||s.href||s.src;this.rdfaPatterns[T]?this.emitPatternCopy(l,this.rdfaPatterns[T],T):(this.pendingRdfaPatternCopies[T]||(this.pendingRdfaPatternCopies[T]=[]),this.pendingRdfaPatternCopies[T].push(l));return}}this.features.baseTag&&c==="base"&&s.href&&(this.util.baseIRI=this.util.getBaseIRI(s.href)),this.features.xmlBase&&s["xml:base"]&&(f.localBaseIRI=this.util.getBaseIRI(s["xml:base"])),this.features.timeTag&&c==="time"&&!s.datatype&&(f.interpretObjectAsTime=!0);let y,_,b;if("vocab"in s?s.vocab?(f.vocab=s.vocab,this.emitTriple(this.util.getBaseIriTerm(f),this.util.dataFactory.namedNode(e.Util.RDFA+"usesVocabulary"),this.util.dataFactory.namedNode(f.vocab))):f.vocab=this.activeTagStack[0].vocab:f.vocab=l.vocab,f.prefixesCustom=e.Util.parsePrefixes(s,l.prefixesCustom,this.features.xmlnsPrefixMappings),f.prefixesAll=Object.keys(f.prefixesCustom).length>0?Object.assign(Object.assign({},l.prefixesAll),f.prefixesCustom):l.prefixesAll,this.features.roleAttribute&&s.role){const T=s.id?this.util.createIri("#"+s.id,f,!1,!1,!1):this.util.createBlankNode(),v=f.vocab;f.vocab="http://www.w3.org/1999/xhtml/vocab#";for(const S of this.util.createVocabIris(s.role,f,!0,!1))this.emitTriple(T,this.util.dataFactory.namedNode("http://www.w3.org/1999/xhtml/vocab#role"),S);f.vocab=v}"xml:lang"in s||this.features.langAttribute&&"lang"in s?f.language=s["xml:lang"]||s.lang:f.language=l.language;const m=this.activeTagStack.length===2;if(!("rel"in s)&&!("rev"in s)?"property"in s&&!("content"in s)&&!("datatype"in s)?("about"in s?(y=this.util.createIri(s.about,f,!1,!0,!0),f.explicitNewSubject=!!y):m?y=!0:l.object&&(y=l.object),"typeof"in s&&("about"in s&&(b=this.util.createIri(s.about,f,!1,!0,!0)),!b&&m&&(b=!0),!b&&"resource"in s&&(b=this.util.createIri(s.resource,f,!1,!0,!0)),!b&&("href"in s||"src"in s)&&(b=this.util.createIri(s.href||s.src,f,!1,!1,!0)),!b&&this.isInheritSubjectInHeadBody(c)&&(b=y),b||(b=this.util.createBlankNode()),_=b)):(("about"in s||"resource"in s)&&(y=this.util.createIri(s.about||s.resource,f,!1,!0,!0),f.explicitNewSubject=!!y),!y&&("href"in s||"src"in s)&&(y=this.util.createIri(s.href||s.src,f,!1,!1,!0),f.explicitNewSubject=!!y),y||(m?y=!0:this.isInheritSubjectInHeadBody(c)?y=l.object:"typeof"in s?(y=this.util.createBlankNode(),f.explicitNewSubject=!0):l.object&&(y=l.object,"property"in s||(f.skipElement=!0))),"typeof"in s&&(b=y)):("about"in s?(y=this.util.createIri(s.about,f,!1,!0,!0),f.explicitNewSubject=!!y,"typeof"in s&&(b=y)):m?y=!0:l.object&&(y=l.object),"resource"in s&&(_=this.util.createIri(s.resource,f,!1,!0,!0)),_||("href"in s||"src"in s?_=this.util.createIri(s.href||s.src,f,!1,!1,!0):"typeof"in s&&!("about"in s)&&!this.isInheritSubjectInHeadBody(c)&&(_=this.util.createBlankNode())),"typeof"in s&&!("about"in s)&&(this.isInheritSubjectInHeadBody(c)?b=y:b=_)),b)for(const T of this.util.createVocabIris(s.typeof,f,!0,!0))this.emitTriple(this.util.getResourceOrBaseIri(b,f),this.util.dataFactory.namedNode(e.Util.RDF+"type"),T);if(y&&(f.listMapping={}),_){if("rel"in s&&"inlist"in s)for(const T of this.util.createVocabIris(s.rel,f,h,!1))this.addListMapping(f,y,T,_);if(!("rel"in s&&"inlist"in s)){if("rel"in s)for(const T of this.util.createVocabIris(s.rel,f,h,!1))this.emitTriple(this.util.getResourceOrBaseIri(y,f),T,this.util.getResourceOrBaseIri(_,f));if("rev"in s)for(const T of this.util.createVocabIris(s.rev,f,p,!1))this.emitTriple(this.util.getResourceOrBaseIri(_,f),T,this.util.getResourceOrBaseIri(y,f))}}if(!_){if("rel"in s)if("inlist"in s)for(const T of this.util.createVocabIris(s.rel,f,h,!1))this.addListMapping(f,y,T,null),f.incompleteTriples.push({predicate:T,reverse:!1,list:!0});else for(const T of this.util.createVocabIris(s.rel,f,h,!1))f.incompleteTriples.push({predicate:T,reverse:!1});if("rev"in s)for(const T of this.util.createVocabIris(s.rev,f,p,!1))f.incompleteTriples.push({predicate:T,reverse:!0});f.incompleteTriples.length>0&&(_=this.util.createBlankNode())}if("property"in s){f.predicates=this.util.createVocabIris(s.property,f,!0,!1);let T;if("datatype"in s?(f.datatype=this.util.createIri(s.datatype,f,!0,!0,!1),f.datatype&&(f.datatype.value===e.Util.RDF+"XMLLiteral"||this.features.htmlDatatype&&f.datatype.value===e.Util.RDF+"HTML")&&(f.collectChildTags=!0)):(!("rev"in s)&&!("rel"in s)&&!("content"in s)&&("resource"in s&&(T=this.util.createIri(s.resource,f,!1,!0,!0)),!T&&"href"in s&&(T=this.util.createIri(s.href,f,!1,!1,!0)),!T&&"src"in s&&(T=this.util.createIri(s.src,f,!1,!1,!0))),"typeof"in s&&!("about"in s)&&(T=b)),"content"in s){const v=this.util.createLiteral(s.content,f);if("inlist"in s)for(const S of f.predicates)this.addListMapping(f,y,S,v);else{const S=this.util.getResourceOrBaseIri(y,f);for(const F of f.predicates)this.emitTriple(S,F,v)}f.predicates=null}else if(this.features.datetimeAttribute&&"datetime"in s){f.interpretObjectAsTime=!0;const v=this.util.createLiteral(s.datetime,f);if("inlist"in s)for(const S of f.predicates)this.addListMapping(f,y,S,v);else{const S=this.util.getResourceOrBaseIri(y,f);for(const F of f.predicates)this.emitTriple(S,F,v)}f.predicates=null}else if(T){const v=this.util.getResourceOrBaseIri(T,f);if("inlist"in s)for(const S of f.predicates)this.addListMapping(f,y,S,v);else{const S=this.util.getResourceOrBaseIri(y,f);for(const F of f.predicates)this.emitTriple(S,F,v)}f.predicates=null}}let g=!1;if(!f.skipElement&&y&&l.incompleteTriples.length>0){g=!0;const T=this.util.getResourceOrBaseIri(l.subject,f),v=this.util.getResourceOrBaseIri(y,f);for(const S of l.incompleteTriples)if(S.reverse)this.emitTriple(v,S.predicate,T);else if(S.list){let F=null;for(let M=this.activeTagStack.length-1;M>=0;M--)if(this.activeTagStack[M].inlist){F=this.activeTagStack[M];break}this.addListMapping(F,y,S.predicate,v)}else this.emitTriple(T,S.predicate,v)}!g&&l.incompleteTriples.length>0&&(f.incompleteTriples=f.incompleteTriples.concat(l.incompleteTriples)),f.subject=y||l.subject,f.object=_||y}onText(c){const s=this.activeTagStack[this.activeTagStack.length-1];if(this.features.copyRdfaPatterns&&s.collectedPatternTag){s.collectedPatternTag.text.push(c);return}s.text||(s.text=[]),s.text.push(c)}onTagClose(){const c=this.activeTagStack[this.activeTagStack.length-1],s=this.activeTagStack[this.activeTagStack.length-2];if(!(c.collectChildTags&&s.collectChildTags&&this.features.skipHandlingXmlLiteralChildren)){if(this.features.copyRdfaPatterns&&c.collectedPatternTag&&c.collectedPatternTag.rootPattern){const d=c.collectedPatternTag.attributes.resource;if(delete c.collectedPatternTag.attributes.resource,delete c.collectedPatternTag.attributes.typeof,this.rdfaPatterns[d]=c.collectedPatternTag,this.pendingRdfaPatternCopies[d]){for(const l of this.pendingRdfaPatternCopies[d])this.emitPatternCopy(l,c.collectedPatternTag,d);delete this.pendingRdfaPatternCopies[d]}this.activeTagStack.pop();return}if(c.predicates){const d=this.util.getResourceOrBaseIri(c.subject,c);let l=c.text||[];c.collectChildTags&&s.collectChildTags&&(l=l.slice(1));const f=this.util.createLiteral(l.join(""),c);if(c.inlist)for(const h of c.predicates)this.addListMapping(c,d,h,f);else for(const h of c.predicates)this.emitTriple(d,h,f);s.predicates||(c.text=null)}if(c.object&&Object.keys(c.listMapping).length>0){const d=this.util.getResourceOrBaseIri(c.object,c);for(const l in c.listMapping){const f=this.util.dataFactory.namedNode(l),h=c.listMapping[l];if(h.length>0){const p=h.map(()=>this.util.createBlankNode());for(let y=0;y<h.length;y++){const _=this.util.getResourceOrBaseIri(h[y],c);this.emitTriple(p[y],this.util.dataFactory.namedNode(e.Util.RDF+"first"),_),this.emitTriple(p[y],this.util.dataFactory.namedNode(e.Util.RDF+"rest"),y<h.length-1?p[y+1]:this.util.dataFactory.namedNode(e.Util.RDF+"nil"))}this.emitTriple(d,f,p[0])}else this.emitTriple(d,f,this.util.dataFactory.namedNode(e.Util.RDF+"nil"))}}}this.activeTagStack.pop(),c.collectChildTags&&c.text&&c.text.push(`</${c.name}>`),c.text&&s&&(s.text?s.text=s.text.concat(c.text):s.text=c.text)}onEnd(){if(this.features.copyRdfaPatterns){this.features.copyRdfaPatterns=!1;for(const c in this.rdfaPatterns){const s=this.rdfaPatterns[c];s.referenced||(s.attributes.typeof="rdfa:Pattern",s.attributes.resource=c,this.emitPatternCopy(s.parentTag,s,c),s.referenced=!1,delete s.attributes.typeof,delete s.attributes.resource)}for(const c in this.pendingRdfaPatternCopies)for(const s of this.pendingRdfaPatternCopies[c])this.activeTagStack.push(s),this.onTagOpen("link",{property:"rdfa:copy",href:c}),this.onTagClose(),this.activeTagStack.pop();this.features.copyRdfaPatterns=!0}}isInheritSubjectInHeadBody(c){return this.features.inheritSubjectInHeadBody&&(c==="head"||c==="body")}addListMapping(c,s,d,l){if(c.explicitNewSubject){const f=this.util.createBlankNode();this.emitTriple(this.util.getResourceOrBaseIri(s,c),d,f),this.emitTriple(f,this.util.dataFactory.namedNode(e.Util.RDF+"first"),this.util.getResourceOrBaseIri(l,c)),this.emitTriple(f,this.util.dataFactory.namedNode(e.Util.RDF+"rest"),this.util.dataFactory.namedNode(e.Util.RDF+"nil"))}else{let f=c.listMappingLocal[d.value];f||(c.listMappingLocal[d.value]=f=[]),l&&f.push(l)}}emitTriple(c,s,d){c.termType==="NamedNode"&&c.value.indexOf(":")<0||s.termType==="NamedNode"&&s.value.indexOf(":")<0||d.termType==="NamedNode"&&d.value.indexOf(":")<0||this.push(this.util.dataFactory.quad(c,s,d,this.defaultGraph))}emitPatternCopy(c,s,d){if(this.activeTagStack.push(c),s.referenced=!0,!s.constructedBlankNodes)s.constructedBlankNodes=[],this.util.blankNodeFactory=()=>{const l=this.util.dataFactory.blankNode();return s.constructedBlankNodes.push(l),l};else{let l=0;this.util.blankNodeFactory=()=>s.constructedBlankNodes[l++]}this.emitPatternCopyAbsolute(s,!0,d),this.util.blankNodeFactory=null,this.activeTagStack.pop()}emitPatternCopyAbsolute(c,s,d){if(!(!s&&c.attributes.property==="rdfa:copy"&&c.attributes.href===d)){this.onTagOpen(c.name,c.attributes);for(const l of c.text)this.onText(l);for(const l of c.children)this.emitPatternCopyAbsolute(l,!1,d);this.onTagClose()}}initializeParser(c){return new u.Parser({onclosetag:()=>{try{this.onTagClose(),this.htmlParseListener&&this.htmlParseListener.onTagClose()}catch(s){this.emit("error",s)}},onend:()=>{try{this.onEnd(),this.htmlParseListener&&this.htmlParseListener.onEnd()}catch(s){this.emit("error",s)}},onopentag:(s,d)=>{try{this.onTagOpen(s,d),this.htmlParseListener&&this.htmlParseListener.onTagOpen(s,d)}catch(l){this.emit("error",l)}},ontext:s=>{try{this.onText(s),this.htmlParseListener&&this.htmlParseListener.onText(s)}catch(d){this.emit("error",d)}}},{decodeEntities:!0,recognizeSelfClosing:!0,xmlMode:c})}};return O1.RdfaParser=r,O1}var Yj;function Zj(){return Yj||(Yj=1,(function(u){var n=ao&&ao.__createBinding||(Object.create?(function(i,t,e,r){r===void 0&&(r=e);var a=Object.getOwnPropertyDescriptor(t,e);(!a||("get"in a?!t.__esModule:a.writable||a.configurable))&&(a={enumerable:!0,get:function(){return t[e]}}),Object.defineProperty(i,r,a)}):(function(i,t,e,r){r===void 0&&(r=e),i[r]=t[e]})),o=ao&&ao.__exportStar||function(i,t){for(var e in i)e!=="default"&&!Object.prototype.hasOwnProperty.call(t,e)&&n(t,i,e)};Object.defineProperty(u,"__esModule",{value:!0}),o(Gee(),u),o(zee(),u),o(Xee(),u),o(ute(),u),o(WA(),u),o(kj(),u)})(ao)),ao}var e5;function ote(){if(e5)return S1;e5=1,Object.defineProperty(S1,"__esModule",{value:!0}),S1.ActorRdfParseXmlRdfa=void 0;const u=mf(),n=qe(),o=Zj();let i=class extends u.ActorRdfParseFixedMediaTypes{constructor(e){super(e)}async runHandle(e,r,a){var l;const c=e.context.getSafe(n.KeysInitQuery.dataFactory),s=(e.headers&&e.headers.get("content-language"))??void 0;e.data.on("error",f=>d.emit("error",f));const d=e.data.pipe(new o.RdfaParser({dataFactory:c,baseIRI:(l=e.metadata)==null?void 0:l.baseIRI,profile:"xml",language:s}));return{data:d,metadata:{triples:!0}}}};return S1.ActorRdfParseXmlRdfa=i,S1}var t5;function ste(){return t5||(t5=1,(function(u){var n=io&&io.__createBinding||(Object.create?(function(i,t,e,r){r===void 0&&(r=e);var a=Object.getOwnPropertyDescriptor(t,e);(!a||("get"in a?!t.__esModule:a.writable||a.configurable))&&(a={enumerable:!0,get:function(){return t[e]}}),Object.defineProperty(i,r,a)}):(function(i,t,e,r){r===void 0&&(r=e),i[r]=t[e]})),o=io&&io.__exportStar||function(i,t){for(var e in i)e!=="default"&&!Object.prototype.hasOwnProperty.call(t,e)&&n(t,i,e)};Object.defineProperty(u,"__esModule",{value:!0}),o(ote(),u)})(io)),io}var lo={},E1={},Ef={},x1={},r5;function n5(){if(r5)return x1;r5=1,Object.defineProperty(x1,"__esModule",{value:!0}),x1.promisifyEventEmitter=void 0;function u(n,o){return new Promise((i,t)=>{n.on("end",()=>i(o)),n.on("error",t)})}return x1.promisifyEventEmitter=u,x1}var i5;function xf(){if(i5)return Ef;i5=1;var u=Ef&&Ef.__awaiter||function(i,t,e,r){function a(c){return c instanceof e?c:new e(function(s){s(c)})}return new(e||(e=Promise))(function(c,s){function d(h){try{f(r.next(h))}catch(p){s(p)}}function l(h){try{f(r.throw(h))}catch(p){s(p)}}function f(h){h.done?c(h.value):a(h.value).then(d,l)}f((r=r.apply(i,t||[])).next())})};Object.defineProperty(Ef,"__esModule",{value:!0}),Ef.stringify=o;const n=n5();function o(i){return u(this,void 0,void 0,function*(){let t="";return i.on("data",e=>{t+=e}),yield(0,n.promisifyEventEmitter)(i),t})}return Ef}var L3={},YA,a5;function cte(){if(a5)return YA;a5=1;var u=(function(){var n=function(ht,He,Je,tt){for(Je=Je||{},tt=ht.length;tt--;Je[ht[tt]]=He);return Je},o=[7,12,13,14,15,16,20,25,115,130],i=[7,13,16,20,25,115,130],t=[7,13,16,115,130],e=[1,25],r=[1,29],a=[1,27],c=[1,28],s=[13,16,115,130],d=[13,16,28,38,40,42,44,46,48,53,56,61,67,85,87,92,93,95,96,102,110,111,115,119,120,126,128,129,130,131,132,133,134,135,136],l=[28,56],f=[1,42],h=[46,48,53,56],p=[1,54],y=[1,60],_=[1,56],b=[1,57],m=[1,58],g=[1,63],T=[1,64],v=[1,65],S=[1,66],F=[1,67],M=[1,68],O=[1,75],w=[28,46,48,53,56],E=[28,42,46,48,53,56],R=[13,16,28,38,40,42,44,46,48,53,56,92,115,119,120,130,131,132,133,134,135,136],D=[13,16,28,38,40,42,44,46,48,53,56,67,85,87,92,95,96,115,119,120,126,128,129,130,131,132,133,134,135,136],B=[13,16,38,40,44,92,115,119,120,130,131,132,133,134,135,136],C=[13,16,28,38,40,42,44,46,48,53,56,67,85,87,92,95,96,115,117,118,119,120,126,128,129,130,131,132,133,134,135,136],$=[13,16,28,56,115,130],Z=[13,16,38,58,87,96,109,115,126,130],ee=[1,116],ce=[1,112],G=[1,108],fe=[1,114],me=[1,111],ye=[7,13,16,20,25,44,48,53,56,67,85,87,95,96,115,128,129,130],re=[48,53],xe=[48,53,87,96,126],Re=[13,16,44,48,53,56,85,87,95,96,115,128,129,130],Ie=[1,126],he=[13,16,40,44,48,53,56,85,87,95,96,115,128,129,130],be=[1,129],V=[48,53,67,87,96,126],P=[13,16,40,44,48,53,56,67,85,87,95,96,115,128,129,130],N=[1,133],A=[13,16,40,44,48,53,56,67,85,87,95,96,102,115,128,129,130],I=[13,16,40,44,48,53,56,67,85,87,93,95,96,102,110,111,115,128,129,130],q=[1,151],H=[1,153],U=[1,156],X=[1,157],Q=[1,158],k=[1,167],oe=[1,175],se=[13,16,44,48,53,56,67,85,87,95,96,115,128,129,130],Se=[13,16,44,48,53,56,67,85,87,95,96,115,126,128,129,130],Me=[13,16,46,92,115,119,120,130,131,132,133,134,135,136],Oe={trace:function(){},yy:{},symbols_:{error:2,shaclDoc:3,shaclDoc_repetition0:4,shaclDoc_repetition1:5,ttlSection:6,EOF:7,directive:8,baseDecl:9,importsDecl:10,prefixDecl:11,KW_BASE:12,IRIREF:13,KW_IMPORTS:14,KW_PREFIX:15,PNAME_NS:16,nodeShapeIri:17,iri:18,nodeShape:19,KW_SHAPE:20,nodeShape_option0:21,nodeShape_option1:22,nodeShapeBody:23,shapeClass:24,KW_SHAPE_CLASS:25,shapeClass_option0:26,turtleAnnotation:27,";":28,turtleAnnotation2:29,predicate:30,turtleAnnotation2_option0:31,objectList:32,object:33,objectList_repetition0:34,iriOrLiteral:35,blankNodeSection:36,list:37,"(":38,list_repetition0:39,")":40,objectTail:41,",":42,LB:43,"[":44,RB:45,"]":46,LP:47,"%":48,RP:49,pcSection:50,iriHead:51,ttlStatement:52,".":53,ttlSection_repetition0:54,startNodeShape:55,"{":56,endNodeShape:57,"}":58,nodeShapeBody_repetition0:59,targetClass:60,"->":61,targetClass_repetition_plus0:62,constraint:63,constraint_group0:64,constraint_option0:65,orNotComponent:66,"|":67,nodeNot:68,nodeOrEmit:69,nodeOr:70,nodeOr_repetition_plus0:71,nodeValue:72,negation:73,nodeValue_group0:74,"=":75,iriOrLiteralOrArray:76,propertyShape:77,path:78,propertyShape_repetition0:79,propertyOrComponent:80,propertyNot:81,propertyOr:82,propertyOr_repetition_plus0:83,propertyAtom:84,NODEKIND:85,shapeRef:86,PARAM:87,propertyCount:88,propertyMinCount:89,"..":90,propertyMaxCount:91,INTEGER:92,"*":93,shapeRef_group0:94,"@":95,"!":96,pathAlternative:97,additionalAlternative:98,pathSequence:99,pathAlternative_repetition_plus0:100,additionalSequence:101,"/":102,pathEltOrInverse:103,pathSequence_repetition_plus0:104,pathElt:105,pathPrimary:106,pathMod:107,pathInverse:108,"^":109,"?":110,"+":111,iriOrLiteralOrArray_repetition0:112,literal:113,iri_group0:114,a:115,string:116,LANGTAG:117,"^^":118,DECIMAL:119,DOUBLE:120,literal_group0:121,string_group0:122,string_group1:123,shaclDoc_repetition1_group0:124,constraint_group0_repetition_plus0:125,TARGET:126,propertyShape_repetition0_group0:127,ATPNAME_LN:128,ATPNAME_NS:129,PNAME_LN:130,KW_TRUE:131,KW_FALSE:132,STRING_LITERAL1:133,STRING_LITERAL2:134,STRING_LITERAL_LONG1:135,STRING_LITERAL_LONG2:136,$accept:0,$end:1},terminals_:{2:"error",7:"EOF",12:"KW_BASE",13:"IRIREF",14:"KW_IMPORTS",15:"KW_PREFIX",16:"PNAME_NS",20:"KW_SHAPE",25:"KW_SHAPE_CLASS",28:";",38:"(",40:")",42:",",44:"[",46:"]",48:"%",53:".",56:"{",58:"}",61:"->",67:"|",75:"=",85:"NODEKIND",87:"PARAM",90:"..",92:"INTEGER",93:"*",95:"@",96:"!",102:"/",109:"^",110:"?",111:"+",115:"a",117:"LANGTAG",118:"^^",119:"DECIMAL",120:"DOUBLE",126:"TARGET",128:"ATPNAME_LN",129:"ATPNAME_NS",130:"PNAME_LN",131:"KW_TRUE",132:"KW_FALSE",133:"STRING_LITERAL1",134:"STRING_LITERAL2",135:"STRING_LITERAL_LONG1",136:"STRING_LITERAL_LONG2"},productions_:[0,[3,4],[8,1],[8,1],[8,1],[9,2],[10,2],[11,3],[17,1],[19,5],[24,4],[27,2],[29,2],[30,2],[32,2],[33,1],[33,1],[33,1],[37,3],[41,2],[43,1],[45,1],[36,3],[47,1],[49,1],[50,3],[51,1],[52,3],[6,1],[55,1],[57,1],[23,3],[60,2],[63,3],[66,2],[69,1],[70,1],[70,2],[68,1],[68,2],[72,3],[77,2],[80,2],[82,1],[82,2],[81,1],[81,2],[84,1],[84,1],[84,1],[84,3],[84,1],[88,5],[89,1],[91,1],[91,1],[86,1],[86,2],[73,1],[78,1],[98,2],[97,1],[97,2],[101,2],[99,1],[99,2],[105,1],[105,2],[103,1],[103,2],[108,1],[107,1],[107,1],[107,1],[106,1],[106,3],[76,1],[76,3],[35,1],[35,1],[18,1],[18,1],[18,1],[113,1],[113,2],[113,3],[113,1],[113,1],[113,1],[113,1],[116,1],[116,1],[4,0],[4,2],[124,1],[124,1],[5,0],[5,2],[21,0],[21,1],[22,0],[22,1],[26,0],[26,1],[31,0],[31,1],[34,0],[34,2],[39,0],[39,2],[54,0],[54,2],[59,0],[59,2],[62,1],[62,2],[125,1],[125,2],[64,1],[64,1],[65,0],[65,1],[71,1],[71,2],[74,1],[74,1],[127,1],[127,1],[79,0],[79,2],[83,1],[83,2],[94,1],[94,1],[100,1],[100,2],[104,1],[104,2],[112,0],[112,2],[114,1],[114,1],[121,1],[121,1],[122,1],[122,1],[123,1],[123,1]],performAction:function(He,Je,tt,wt,at,Xe,Lr){var Ge=Xe.length-1;switch(at){case 1:this.$=ne(Ue.factory.namedNode($e("")),Ue.factory.namedNode(L),Ue.factory.namedNode(Ze+"Ontology"));break;case 5:Ue.base=Ue.factory.namedNode(Xe[Ge].slice(1,-1)),Ue.n3Parser._setBase($e(Ue.base.value));break;case 6:this.$=ne(Ue.base,Ue.factory.namedNode(Ze+"imports"),Ue.factory.namedNode(Xe[Ge].slice(1,-1)));break;case 7:this.$=Ue.prefixes[Xe[Ge-1].substr(0,Xe[Ge-1].length-1)]=$e(Xe[Ge]);break;case 8:Ue.nodeShapeStack=!1,ne(Ue.currentNodeShape=Xe[Ge],Ue.factory.namedNode(L),Ue.factory.namedNode(Be+"NodeShape"));break;case 10:this.$=ne(Ue.currentNodeShape,Ue.factory.namedNode(L),Ue.factory.namedNode(J+"Class"));break;case 11:this.$=Qe();break;case 13:this.$=Xe[Ge].forEach(ve=>ne(Ue.currentNodeShape,Xe[Ge-1],ve));break;case 14:this.$=[Xe[Ge-1],...Xe[Ge]];break;case 18:this.$=Ee(Xe[Ge-1],!0);break;case 19:case 34:case 42:case 60:case 63:this.$=Xe[Ge];break;case 20:Ue.tempCurrentNodeShape=Ue.currentNodeShape,this.$=Ue.currentNodeShape=ke();break;case 21:Ue.currentNodeShape=Ue.tempCurrentNodeShape;break;case 22:case 31:this.$=Xe[Ge-2];break;case 23:Ue.tempCurrentNodeShape=Ue.currentNodeShape,Ue.currentNodeShape=Ue.currentPropertyNode;break;case 24:Ue.currentNodeShape=Ue.tempCurrentNodeShape;break;case 26:Ue.currentNodeShape=Xe[Ge];break;case 29:Ue.nodeShapeStack?(Ue.nodeShapeStack.push(Ue.currentNodeShape),ne(Ue.currentPropertyNode,Ue.factory.namedNode(Be+"node"),Ue.currentNodeShape=ke())):Ue.nodeShapeStack=[],this.$=Ue.currentNodeShape;break;case 30:Ue.nodeShapeStack.length>0&&(Ue.currentNodeShape=Ue.nodeShapeStack.pop());break;case 32:this.$=Xe[Ge].forEach(ve=>{ne(Ue.currentNodeShape,Ue.factory.namedNode(Be+"targetClass"),ve)});break;case 35:this.$=ne(Ue.currentNodeShape,Ue.factory.namedNode(Be+Xe[Ge][0]),Xe[Ge][1]);break;case 36:break;case 37:const ie=Ee([Xe[Ge-1],...Xe[Ge]].map(ve=>{const We=ke();return ne(We,Ue.factory.namedNode(Be+ve[0]),ve[1]),We}));this.$=["or",ie];break;case 39:case 46:this.$=Ce("not",...Xe[Ge]);break;case 40:case 50:this.$=[Xe[Ge-2],Xe[Ge]];break;case 43:this.$=Xe[Ge]&&Ne(...Xe[Ge]);break;case 44:this.$=Ne("or",Ee([Xe[Ge-1],...Xe[Ge]].map(ve=>{const We=ke();return ne(We,Ue.factory.namedNode(Be+ve[0]),ve[1]),We})));break;case 47:this.$=[we[Xe[Ge].value]?"datatype":"class",Xe[Ge]];break;case 48:this.$=["nodeKind",Ue.factory.namedNode(Be+Xe[Ge])];break;case 49:this.$=["node",Ue.factory.namedNode(Xe[Ge])];break;case 51:this.$=void 0;break;case 53:this.$=Xe[Ge]>0&&Ne("minCount",et(Xe[Ge],le));break;case 54:this.$=Ne("maxCount",et(Xe[Ge],le));break;case 56:this.$=Pe(Xe[Ge].slice(1));break;case 57:this.$=$e(Xe[Ge]);break;case 59:ne(Ue.currentNodeShape,Ue.factory.namedNode(Be+"property"),Ue.currentPropertyNode=ke()),Ne("path",Xe[Ge]);break;case 62:const _e=ke();ne(_e,Ue.factory.namedNode(Be+"alternativePath"),Ee([Xe[Ge-1],...Xe[Ge]])),this.$=_e;break;case 65:this.$=Ee([Xe[Ge-1],...Xe[Ge]]);break;case 67:ne(this.$=ke(),Ue.factory.namedNode(Be+Xe[Ge]),Xe[Ge-1]);break;case 69:ne(this.$=ke(),Ue.factory.namedNode(Be+"inversePath"),Xe[Ge]);break;case 71:this.$="zeroOrOnePath";break;case 72:this.$="zeroOrMorePath";break;case 73:this.$="oneOrMorePath";break;case 75:this.$=Xe[Ge-1];break;case 77:this.$=Ee(Xe[Ge-1]);break;case 80:this.$=Ue.factory.namedNode($e(Xe[Ge]));break;case 81:this.$=Ue.factory.namedNode(Pe(Xe[Ge]));break;case 82:this.$=Qe(Ue.factory.namedNode(L));break;case 83:this.$=et(Xe[Ge]);break;case 84:this.$=rt(Xe[Ge-1],Xe[Ge].substr(1).toLowerCase());break;case 85:this.$=et(Xe[Ge-2],Xe[Ge]);break;case 86:this.$=et(Xe[Ge],le);break;case 87:this.$=et(Xe[Ge],ae);break;case 88:this.$=et(Xe[Ge].toLowerCase(),De);break;case 89:this.$=et(Xe[Ge].toLowerCase(),Ve);break;case 90:this.$=te(Xe[Ge],1);break;case 91:this.$=te(Xe[Ge],3);break;case 92:case 96:case 106:case 108:case 110:case 112:case 128:case 138:this.$=[];break;case 93:case 97:case 107:case 109:case 111:case 113:case 115:case 117:case 123:case 129:case 131:case 135:case 137:case 139:Xe[Ge-1].push(Xe[Ge]);break;case 114:case 116:case 122:case 130:case 134:case 136:this.$=[Xe[Ge]];break}},table:[n(o,[2,92],{3:1,4:2}),{1:[3]},n(i,[2,96],{5:3,8:4,9:5,10:6,11:7,12:[1,8],14:[1,9],15:[1,10]}),n(t,[2,110],{6:11,124:12,54:13,19:14,24:15,20:[1,16],25:[1,17]}),n(o,[2,93]),n(o,[2,2]),n(o,[2,3]),n(o,[2,4]),{13:[1,18]},{13:[1,19]},{16:[1,20]},{7:[1,21]},n(i,[2,97]),{7:[2,28],13:e,16:r,18:24,51:23,52:22,114:26,115:a,130:c},n(i,[2,94]),n(i,[2,95]),{13:e,16:r,17:30,18:31,114:26,115:a,130:c},{13:e,16:r,17:32,18:31,114:26,115:a,130:c},n(o,[2,5]),n(o,[2,6]),{13:[1,33]},{1:[2,1]},n(t,[2,111]),{13:e,16:r,18:36,29:34,30:35,114:26,115:a,130:c},n(s,[2,26]),n(d,[2,80]),n(d,[2,81]),n(d,[2,82]),n(d,[2,140]),n(d,[2,141]),n(l,[2,98],{21:37,60:38,61:[1,39]}),n([28,56,61],[2,8]),{26:40,27:41,28:f,56:[2,102]},n(o,[2,7]),{53:[1,43]},n(h,[2,104],{31:44,27:45,28:f}),{13:e,16:r,18:51,32:46,33:47,35:48,36:49,37:50,38:p,43:53,44:y,92:_,113:52,114:26,115:a,116:55,119:b,120:m,121:59,122:61,123:62,130:c,131:g,132:T,133:v,134:S,135:F,136:M},{22:69,27:70,28:f,56:[2,100]},n(l,[2,99]),{13:e,16:r,18:72,62:71,114:26,115:a,130:c},{23:73,55:74,56:O},{56:[2,103]},{13:e,16:r,18:36,29:76,30:35,114:26,115:a,130:c},n(t,[2,27]),n(h,[2,12]),n(h,[2,105]),n(w,[2,13]),n(E,[2,106],{34:77}),n(R,[2,15]),n(R,[2,16]),n(R,[2,17]),n(D,[2,78]),n(D,[2,79]),{13:e,16:r,18:36,29:78,30:35,114:26,115:a,130:c},n(B,[2,108],{39:79}),n(D,[2,83],{117:[1,80],118:[1,81]}),n(D,[2,86]),n(D,[2,87]),n(D,[2,88]),n(D,[2,89]),n(s,[2,20]),n(C,[2,90]),n(C,[2,91]),n(D,[2,142]),n(D,[2,143]),n(C,[2,144]),n(C,[2,145]),n(C,[2,146]),n(C,[2,147]),{23:82,55:74,56:O},{56:[2,101]},n(l,[2,32],{114:26,18:83,13:e,16:r,115:a,130:c}),n($,[2,114]),n(i,[2,10]),n(Z,[2,112],{59:84}),n(Z,[2,29]),n(h,[2,11]),n(w,[2,14],{41:85,42:[1,86]}),{45:87,46:[1,88]},{13:e,16:r,18:51,33:90,35:48,36:49,37:50,38:p,40:[1,89],43:53,44:y,92:_,113:52,114:26,115:a,116:55,119:b,120:m,121:59,122:61,123:62,130:c,131:g,132:T,133:v,134:S,135:F,136:M},n(D,[2,84]),{13:e,16:r,18:91,114:26,115:a,130:c},n(i,[2,9]),n($,[2,115]),{13:e,16:r,18:115,38:ee,57:92,58:[1,94],63:93,64:95,68:102,69:98,70:100,72:104,73:105,74:107,77:97,78:99,87:ce,96:G,97:101,99:103,103:106,105:109,106:113,108:110,109:fe,114:26,115:a,125:96,126:me,130:c},n(E,[2,107]),{13:e,16:r,18:51,33:117,35:48,36:49,37:50,38:p,43:53,44:y,92:_,113:52,114:26,115:a,116:55,119:b,120:m,121:59,122:61,123:62,130:c,131:g,132:T,133:v,134:S,135:F,136:M},n(R,[2,22]),n(R,[2,21]),n(R,[2,18]),n(B,[2,109]),n(D,[2,85]),n(ye,[2,31]),n(Z,[2,113]),n(ye,[2,30]),{47:120,48:[1,121],50:119,53:[2,120],65:118},n(re,[2,118],{70:100,68:102,72:104,73:105,74:107,69:122,87:ce,96:G,126:me}),n(re,[2,119]),n(xe,[2,116]),n(Re,[2,128],{79:123}),n(xe,[2,35]),n(Re,[2,59]),n(xe,[2,36],{71:124,66:125,67:Ie}),n(he,[2,61],{100:127,98:128,67:be}),n(V,[2,38]),{72:130,74:107,87:ce,126:me},n(P,[2,64],{104:131,101:132,102:N}),{75:[1,134]},n([13,16,56,85,87,95,115,126,128,129,130],[2,58]),n(A,[2,68]),{13:e,16:r,18:115,38:ee,105:135,106:113,114:26,115:a,130:c},{75:[2,124]},{75:[2,125]},n(A,[2,66],{107:136,93:[1,138],110:[1,137],111:[1,139]}),n([13,16,38,115,130],[2,70]),n(I,[2,74]),{13:e,16:r,18:115,38:ee,97:140,99:103,103:106,105:109,106:113,108:110,109:fe,114:26,115:a,130:c},n(E,[2,19]),{53:[1,141]},{53:[2,121]},{13:e,16:r,18:36,29:142,30:35,114:26,115:a,130:c},n(s,[2,23]),n(xe,[2,117]),n(re,[2,41],{114:26,55:74,127:143,88:144,82:145,81:147,84:148,73:149,18:150,86:152,23:154,94:155,13:e,16:r,44:[1,146],56:O,85:q,87:H,95:U,96:G,115:a,128:X,129:Q,130:c}),n(xe,[2,37],{66:159,67:Ie}),n(V,[2,122]),{68:160,72:104,73:105,74:107,87:ce,96:G,126:me},n(he,[2,62],{98:161,67:be}),n(P,[2,134]),{13:e,16:r,18:115,38:ee,99:162,103:106,105:109,106:113,108:110,109:fe,114:26,115:a,130:c},n(V,[2,39]),n(P,[2,65],{101:163,102:N}),n(A,[2,136]),{13:e,16:r,18:115,38:ee,103:164,105:109,106:113,108:110,109:fe,114:26,115:a,130:c},{13:e,16:r,18:51,35:166,44:k,76:165,92:_,113:52,114:26,115:a,116:55,119:b,120:m,121:59,122:61,123:62,130:c,131:g,132:T,133:v,134:S,135:F,136:M},n(A,[2,69]),n(A,[2,67]),n(A,[2,71]),n(A,[2,72]),n(A,[2,73]),{40:[1,168]},n(Z,[2,33]),{48:[1,170],49:169},n(Re,[2,129]),n(Re,[2,126]),n(Re,[2,127]),{89:171,92:[1,172]},n(Re,[2,43],{83:173,80:174,67:oe}),n(se,[2,45]),{13:e,16:r,18:150,23:154,55:74,56:O,84:176,85:q,86:152,87:H,94:155,95:U,114:26,115:a,128:X,129:Q,130:c},n(se,[2,47]),n(se,[2,48]),n(se,[2,49]),{75:[1,177]},n(se,[2,51]),n(se,[2,56]),{13:[1,178]},n(se,[2,132]),n(se,[2,133]),n(V,[2,123]),n(V,[2,34]),n(P,[2,135]),n(P,[2,60]),n(A,[2,137]),n(A,[2,63]),n(V,[2,40]),n(Se,[2,76]),n(Me,[2,138],{112:179}),n(I,[2,75]),{53:[2,25]},{53:[2,24]},{90:[1,180]},{90:[2,53]},n(Re,[2,44],{80:181,67:oe}),n(se,[2,130]),{13:e,16:r,18:150,23:154,55:74,56:O,73:149,81:182,84:148,85:q,86:152,87:H,94:155,95:U,96:G,114:26,115:a,128:X,129:Q,130:c},n(se,[2,46]),{13:e,16:r,18:51,35:166,44:k,76:183,92:_,113:52,114:26,115:a,116:55,119:b,120:m,121:59,122:61,123:62,130:c,131:g,132:T,133:v,134:S,135:F,136:M},n(se,[2,57]),{13:e,16:r,18:51,35:185,46:[1,184],92:_,113:52,114:26,115:a,116:55,119:b,120:m,121:59,122:61,123:62,130:c,131:g,132:T,133:v,134:S,135:F,136:M},{91:186,92:[1,187],93:[1,188]},n(se,[2,131]),n(se,[2,42]),n(se,[2,50]),n(Se,[2,77]),n(Me,[2,139]),{46:[1,189]},{46:[2,54]},{46:[2,55]},n(Re,[2,52])],defaultActions:{21:[2,1],41:[2,103],70:[2,101],111:[2,124],112:[2,125],119:[2,121],169:[2,25],170:[2,24],172:[2,53],187:[2,54],188:[2,55]},parseError:function(He,Je){if(Je.recoverable)this.trace(He);else{var tt=new Error(He);throw tt.hash=Je,tt}},parse:function(He){var Je=this,tt=[0],wt=[null],at=[],Xe=this.table,Lr="",Ge=0,ie=0,_e=2,ve=1,We=at.slice.call(arguments,1),Ye=Object.create(this.lexer),mt={yy:{}};for(var nr in this.yy)Object.prototype.hasOwnProperty.call(this.yy,nr)&&(mt.yy[nr]=this.yy[nr]);Ye.setInput(He,mt.yy),mt.yy.lexer=Ye,mt.yy.parser=this,typeof Ye.yylloc>"u"&&(Ye.yylloc={});var Qt=Ye.yylloc;at.push(Qt);var wi=Ye.options&&Ye.options.ranges;typeof mt.yy.parseError=="function"?this.parseError=mt.yy.parseError:this.parseError=Object.getPrototypeOf(this).parseError;for(var sn=function(){var Wr;return Wr=Ye.lex()||ve,typeof Wr!="number"&&(Wr=Je.symbols_[Wr]||Wr),Wr},Kt,mn,Ar,Un,Er={},Il,Mr,Nf,Pl;;){if(mn=tt[tt.length-1],this.defaultActions[mn]?Ar=this.defaultActions[mn]:((Kt===null||typeof Kt>"u")&&(Kt=sn()),Ar=Xe[mn]&&Xe[mn][Kt]),typeof Ar>"u"||!Ar.length||!Ar[0]){var cn="";Pl=[];for(Il in Xe[mn])this.terminals_[Il]&&Il>_e&&Pl.push("'"+this.terminals_[Il]+"'");Ye.showPosition?cn="Parse error on line "+(Ge+1)+`:
`+Ye.showPosition()+`
Expecting `+Pl.join(", ")+", got '"+(this.terminals_[Kt]||Kt)+"'":cn="Parse error on line "+(Ge+1)+": Unexpected "+(Kt==ve?"end of input":"'"+(this.terminals_[Kt]||Kt)+"'"),this.parseError(cn,{text:Ye.match,token:this.terminals_[Kt]||Kt,line:Ye.yylineno,loc:Qt,expected:Pl})}if(Ar[0]instanceof Array&&Ar.length>1)throw new Error("Parse Error: multiple actions possible at state: "+mn+", token: "+Kt);switch(Ar[0]){case 1:tt.push(Kt),wt.push(Ye.yytext),at.push(Ye.yylloc),tt.push(Ar[1]),Kt=null,ie=Ye.yyleng,Lr=Ye.yytext,Ge=Ye.yylineno,Qt=Ye.yylloc;break;case 2:if(Mr=this.productions_[Ar[1]][1],Er.$=wt[wt.length-Mr],Er._$={first_line:at[at.length-(Mr||1)].first_line,last_line:at[at.length-1].last_line,first_column:at[at.length-(Mr||1)].first_column,last_column:at[at.length-1].last_column},wi&&(Er._$.range=[at[at.length-(Mr||1)].range[0],at[at.length-1].range[1]]),Un=this.performAction.apply(Er,[Lr,ie,Ge,mt.yy,Ar[1],wt,at].concat(We)),typeof Un<"u")return Un;Mr&&(tt=tt.slice(0,-1*Mr*2),wt=wt.slice(0,-1*Mr),at=at.slice(0,-1*Mr)),tt.push(this.productions_[Ar[1]][0]),wt.push(Er.$),at.push(Er._$),Nf=Xe[tt[tt.length-2]][tt[tt.length-1]],tt.push(Nf);break;case 3:return!0}}return!0}};const ue="http://www.w3.org/1999/02/22-rdf-syntax-ns#",L=ue+"type",x=ue+"first",j=ue+"rest",z=ue+"nil",W="http://www.w3.org/2001/XMLSchema#",le=W+"integer",ae=W+"decimal",De=W+"double",Ve=W+"boolean",Be="http://www.w3.org/ns/shacl#",Ze="http://www.w3.org/2002/07/owl#",J="http://www.w3.org/2000/01/rdf-schema#",we={[le]:!0,[ae]:!0,[W+"float"]:!0,[De]:!0,[W+"string"]:!0,[Ve]:!0,[W+"dateTime"]:!0,[W+"nonPositiveInteger"]:!0,[W+"negativeInteger"]:!0,[W+"long"]:!0,[W+"int"]:!0,[W+"short"]:!0,[W+"byte"]:!0,[W+"nonNegativeInteger"]:!0,[W+"unsignedLong"]:!0,[W+"unsignedShort"]:!0,[W+"unsignedByte"]:!0,[W+"positiveInteger"]:!0,[ue+"langString"]:!0};function Ee(ht,He=!1){let Je=0,tt=ht.length;if(He&&tt===0)return Ue.factory.namedNode(z);const wt=head=ke();return tt===0&&ne(head,Ue.factory.namedNode(j),Ue.factory.namedNode(z)),ht.forEach(at=>{if(at===void 0)throw new Error("b");ne(head,Ue.factory.namedNode(x),at),ne(head,Ue.factory.namedNode(j),head=++Je<tt?ke():Ue.factory.namedNode(z))}),wt}function $e(ht){return Ue.n3Parser._resolveIRI(ht[0]==="<"?ht.substring(1,ht.length-1):ht)}function Pe(ht){const He=ht.indexOf(":"),Je=ht.substr(0,He),tt=Ue.prefixes[Je];if(!tt)throw new Error("Unknown prefix: "+Je);return $e(tt+ht.substr(He+1))}function et(ht,He){return He&&He.termType!=="NamedNode"&&(He=Ue.factory.namedNode(He)),Ue.factory.literal(ht,He)}function rt(ht,He){return Ue.factory.literal(ht,He)}function ke(ht){return Ue.factory.blankNode("g_"+ft++)}var ft=0;Ue._resetBlanks=function(){ft=0};function te(ht,He){return Ue.n3Parser._lexer._unescape(ht.substring(He,ht.length-He))}function ne(ht,He,Je){if(!ht.termType||!He.termType||He.value.includes(",")||!Je.termType)throw new Error(`boo ${ht.value} ${He.value} ${Je.value}`);Ue.onQuad(Ue.factory.quad(ht,He,Je))}function Ne(ht,He){ne(Ue.currentPropertyNode,Ue.factory.namedNode(Be+ht),He)}function Ce(ht,He,Je){const tt=ke();return ne(tt,Ue.factory.namedNode(Be+He),Je),[ht,tt]}function Qe(ht){if(!Ue.extended)throw new Error("Encountered extended SHACLC syntax; but extended parsing is disabled");return ht}var Tt=(function(){var ht={EOF:1,parseError:function(Je,tt){if(this.yy.parser)this.yy.parser.parseError(Je,tt);else throw new Error(Je)},setInput:function(He,Je){return this.yy=Je||this.yy||{},this._input=He,this._more=this._backtrack=this.done=!1,this.yylineno=this.yyleng=0,this.yytext=this.matched=this.match="",this.conditionStack=["INITIAL"],this.yylloc={first_line:1,first_column:0,last_line:1,last_column:0},this.options.ranges&&(this.yylloc.range=[0,0]),this.offset=0,this},input:function(){var He=this._input[0];this.yytext+=He,this.yyleng++,this.offset++,this.match+=He,this.matched+=He;var Je=He.match(/(?:\r\n?|\n).*/g);return Je?(this.yylineno++,this.yylloc.last_line++):this.yylloc.last_column++,this.options.ranges&&this.yylloc.range[1]++,this._input=this._input.slice(1),He},unput:function(He){var Je=He.length,tt=He.split(/(?:\r\n?|\n)/g);this._input=He+this._input,this.yytext=this.yytext.substr(0,this.yytext.length-Je),this.offset-=Je;var wt=this.match.split(/(?:\r\n?|\n)/g);this.match=this.match.substr(0,this.match.length-1),this.matched=this.matched.substr(0,this.matched.length-1),tt.length-1&&(this.yylineno-=tt.length-1);var at=this.yylloc.range;return this.yylloc={first_line:this.yylloc.first_line,last_line:this.yylineno+1,first_column:this.yylloc.first_column,last_column:tt?(tt.length===wt.length?this.yylloc.first_column:0)+wt[wt.length-tt.length].length-tt[0].length:this.yylloc.first_column-Je},this.options.ranges&&(this.yylloc.range=[at[0],at[0]+this.yyleng-Je]),this.yyleng=this.yytext.length,this},more:function(){return this._more=!0,this},reject:function(){if(this.options.backtrack_lexer)this._backtrack=!0;else return this.parseError("Lexical error on line "+(this.yylineno+1)+`. You can only invoke reject() in the lexer when the lexer is of the backtracking persuasion (options.backtrack_lexer = true).
`+this.showPosition(),{text:"",token:null,line:this.yylineno});return this},less:function(He){this.unput(this.match.slice(He))},pastInput:function(){var He=this.matched.substr(0,this.matched.length-this.match.length);return(He.length>20?"...":"")+He.substr(-20).replace(/\n/g,"")},upcomingInput:function(){var He=this.match;return He.length<20&&(He+=this._input.substr(0,20-He.length)),(He.substr(0,20)+(He.length>20?"...":"")).replace(/\n/g,"")},showPosition:function(){var He=this.pastInput(),Je=new Array(He.length+1).join("-");return He+this.upcomingInput()+`
`+Je+"^"},test_match:function(He,Je){var tt,wt,at;if(this.options.backtrack_lexer&&(at={yylineno:this.yylineno,yylloc:{first_line:this.yylloc.first_line,last_line:this.last_line,first_column:this.yylloc.first_column,last_column:this.yylloc.last_column},yytext:this.yytext,match:this.match,matches:this.matches,matched:this.matched,yyleng:this.yyleng,offset:this.offset,_more:this._more,_input:this._input,yy:this.yy,conditionStack:this.conditionStack.slice(0),done:this.done},this.options.ranges&&(at.yylloc.range=this.yylloc.range.slice(0))),wt=He[0].match(/(?:\r\n?|\n).*/g),wt&&(this.yylineno+=wt.length),this.yylloc={first_line:this.yylloc.last_line,last_line:this.yylineno+1,first_column:this.yylloc.last_column,last_column:wt?wt[wt.length-1].length-wt[wt.length-1].match(/\r?\n?/)[0].length:this.yylloc.last_column+He[0].length},this.yytext+=He[0],this.match+=He[0],this.matches=He,this.yyleng=this.yytext.length,this.options.ranges&&(this.yylloc.range=[this.offset,this.offset+=this.yyleng]),this._more=!1,this._backtrack=!1,this._input=this._input.slice(He[0].length),this.matched+=He[0],tt=this.performAction.call(this,this.yy,this,Je,this.conditionStack[this.conditionStack.length-1]),this.done&&this._input&&(this.done=!1),tt)return tt;if(this._backtrack){for(var Xe in at)this[Xe]=at[Xe];return!1}return!1},next:function(){if(this.done)return this.EOF;this._input||(this.done=!0);var He,Je,tt,wt;this._more||(this.yytext="",this.match="");for(var at=this._currentRules(),Xe=0;Xe<at.length;Xe++)if(tt=this._input.match(this.rules[at[Xe]]),tt&&(!Je||tt[0].length>Je[0].length)){if(Je=tt,wt=Xe,this.options.backtrack_lexer){if(He=this.test_match(tt,at[Xe]),He!==!1)return He;if(this._backtrack){Je=!1;continue}else return!1}else if(!this.options.flex)break}return Je?(He=this.test_match(Je,at[wt]),He!==!1?He:!1):this._input===""?this.EOF:this.parseError("Lexical error on line "+(this.yylineno+1)+`. Unrecognized text.
`+this.showPosition(),{text:"",token:null,line:this.yylineno})},lex:function(){var Je=this.next();return Je||this.lex()},begin:function(Je){this.conditionStack.push(Je)},popState:function(){var Je=this.conditionStack.length-1;return Je>0?this.conditionStack.pop():this.conditionStack[0]},_currentRules:function(){return this.conditionStack.length&&this.conditionStack[this.conditionStack.length-1]?this.conditions[this.conditionStack[this.conditionStack.length-1]].rules:this.conditions.INITIAL.rules},topState:function(Je){return Je=this.conditionStack.length-1-Math.abs(Je||0),Je>=0?this.conditionStack[Je]:"INITIAL"},pushState:function(Je){this.begin(Je)},stateStackSize:function(){return this.conditionStack.length},options:{flex:!0,"case-insensitive":!0},performAction:function(Je,tt,wt,at){switch(wt){case 0:break;case 1:return 12;case 2:return 14;case 3:return 15;case 4:return 25;case 5:return 20;case 6:return 131;case 7:return 132;case 8:return 85;case 9:return 126;case 10:return 87;case 11:return"PASS";case 12:return"COMMENT";case 13:return 13;case 14:return 16;case 15:return 130;case 16:return 129;case 17:return 128;case 18:return 117;case 19:return 92;case 20:return 119;case 21:return 120;case 22:return"EXPONENT";case 23:return 133;case 24:return 134;case 25:return 135;case 26:return 136;case 27:return 61;case 28:return 90;case 29:return 58;case 30:return 56;case 31:return 38;case 32:return 40;case 33:return 44;case 34:return 46;case 35:return 110;case 36:return 93;case 37:return 111;case 38:return 67;case 39:return 118;case 40:return 53;case 41:return 96;case 42:return 102;case 43:return 75;case 44:return 95;case 45:return 109;case 46:return 28;case 47:return 42;case 48:return 48;case 49:return 115;case 50:return 7;case 51:console.log(tt.yytext);break}},rules:[/^(?:\s+|#[^\n\r]*)/i,/^(?:BASE)/i,/^(?:IMPORTS)/i,/^(?:PREFIX)/i,/^(?:shapeClass)/i,/^(?:shape)/i,/^(?:true)/i,/^(?:false)/i,/^(?:(BlankNode|IRI|Literal|BlankNodeOrIRI|BlankNodeOrLiteral|IRIOrLiteral\b))/i,/^(?:(targetNode|targetObjectsOf|targetSubjectsOf\b))/i,/^(?:(deactivated|severity|message|class|datatype|nodeKind|minExclusive|minInclusive|maxExclusive|maxInclusive|minLength|maxLength|pattern|flags|languageIn|uniqueLang|equals|disjoint|lessThan|lessThanOrEquals|qualifiedValueShape|qualifiedMinCount|qualifiedMaxCount|qualifiedValueShapesDisjoint|closed|ignoredProperties|hasValue|in))/i,/^(?:([ \t\r\n]+))/i,/^(?:(#[\r\n]*))/i,/^(?:(<([^=<>\"\{\}\|\^`\\\u0000-\u0020]|(\\u([0-9]|[A-F]|[a-f])([0-9]|[A-F]|[a-f])([0-9]|[A-F]|[a-f])([0-9]|[A-F]|[a-f])|\\U([0-9]|[A-F]|[a-f])([0-9]|[A-F]|[a-f])([0-9]|[A-F]|[a-f])([0-9]|[A-F]|[a-f])([0-9]|[A-F]|[a-f])([0-9]|[A-F]|[a-f])([0-9]|[A-F]|[a-f])([0-9]|[A-F]|[a-f])))*>))/i,/^(?:((([A-Z]|[a-z]|[\u00C0-\u00D6]|[\u00D8-\u00F6]|[\u00F8-\u02FF]|[\u0370-\u037D]|[\u037F-\u1FFF]|[\u200C-\u200D]|[\u2070-\u218F]|[\u2C00-\u2FEF]|[\u3001-\uD7FF]|[\uF900-\uFDCF]|[\uFDF0-\uFFFD])((((([A-Z]|[a-z]|[\u00C0-\u00D6]|[\u00D8-\u00F6]|[\u00F8-\u02FF]|[\u0370-\u037D]|[\u037F-\u1FFF]|[\u200C-\u200D]|[\u2070-\u218F]|[\u2C00-\u2FEF]|[\u3001-\uD7FF]|[\uF900-\uFDCF]|[\uFDF0-\uFFFD])|_\b)|-|[0-9]|[\u00B7]|[\u0300-\u036F]|[\u203F-\u2040])|\.)*((([A-Z]|[a-z]|[\u00C0-\u00D6]|[\u00D8-\u00F6]|[\u00F8-\u02FF]|[\u0370-\u037D]|[\u037F-\u1FFF]|[\u200C-\u200D]|[\u2070-\u218F]|[\u2C00-\u2FEF]|[\u3001-\uD7FF]|[\uF900-\uFDCF]|[\uFDF0-\uFFFD])|_\b)|-|[0-9]|[\u00B7]|[\u0300-\u036F]|[\u203F-\u2040]))?)?:))/i,/^(?:(((([A-Z]|[a-z]|[\u00C0-\u00D6]|[\u00D8-\u00F6]|[\u00F8-\u02FF]|[\u0370-\u037D]|[\u037F-\u1FFF]|[\u200C-\u200D]|[\u2070-\u218F]|[\u2C00-\u2FEF]|[\u3001-\uD7FF]|[\uF900-\uFDCF]|[\uFDF0-\uFFFD])((((([A-Z]|[a-z]|[\u00C0-\u00D6]|[\u00D8-\u00F6]|[\u00F8-\u02FF]|[\u0370-\u037D]|[\u037F-\u1FFF]|[\u200C-\u200D]|[\u2070-\u218F]|[\u2C00-\u2FEF]|[\u3001-\uD7FF]|[\uF900-\uFDCF]|[\uFDF0-\uFFFD])|_\b)|-|[0-9]|[\u00B7]|[\u0300-\u036F]|[\u203F-\u2040])|\.)*((([A-Z]|[a-z]|[\u00C0-\u00D6]|[\u00D8-\u00F6]|[\u00F8-\u02FF]|[\u0370-\u037D]|[\u037F-\u1FFF]|[\u200C-\u200D]|[\u2070-\u218F]|[\u2C00-\u2FEF]|[\u3001-\uD7FF]|[\uF900-\uFDCF]|[\uFDF0-\uFFFD])|_\b)|-|[0-9]|[\u00B7]|[\u0300-\u036F]|[\u203F-\u2040]))?)?:)(((([A-Z]|[a-z]|[\u00C0-\u00D6]|[\u00D8-\u00F6]|[\u00F8-\u02FF]|[\u0370-\u037D]|[\u037F-\u1FFF]|[\u200C-\u200D]|[\u2070-\u218F]|[\u2C00-\u2FEF]|[\u3001-\uD7FF]|[\uF900-\uFDCF]|[\uFDF0-\uFFFD])|_\b)|:|[0-9]|((%([0-9]|[A-F]|[a-f])([0-9]|[A-F]|[a-f]))|(\\(_|~|\.|-|!|\$|&|'|\(|\)|\*|\+|,|;|=|\/|\?|#|@|%))))((((([A-Z]|[a-z]|[\u00C0-\u00D6]|[\u00D8-\u00F6]|[\u00F8-\u02FF]|[\u0370-\u037D]|[\u037F-\u1FFF]|[\u200C-\u200D]|[\u2070-\u218F]|[\u2C00-\u2FEF]|[\u3001-\uD7FF]|[\uF900-\uFDCF]|[\uFDF0-\uFFFD])|_\b)|-|[0-9]|[\u00B7]|[\u0300-\u036F]|[\u203F-\u2040])|\.|:|((%([0-9]|[A-F]|[a-f])([0-9]|[A-F]|[a-f]))|(\\(_|~|\.|-|!|\$|&|'|\(|\)|\*|\+|,|;|=|\/|\?|#|@|%))))*(((([A-Z]|[a-z]|[\u00C0-\u00D6]|[\u00D8-\u00F6]|[\u00F8-\u02FF]|[\u0370-\u037D]|[\u037F-\u1FFF]|[\u200C-\u200D]|[\u2070-\u218F]|[\u2C00-\u2FEF]|[\u3001-\uD7FF]|[\uF900-\uFDCF]|[\uFDF0-\uFFFD])|_\b)|-|[0-9]|[\u00B7]|[\u0300-\u036F]|[\u203F-\u2040])|:|((%([0-9]|[A-F]|[a-f])([0-9]|[A-F]|[a-f]))|(\\(_|~|\.|-|!|\$|&|'|\(|\)|\*|\+|,|;|=|\/|\?|#|@|%)))))?)))/i,/^(?:(@(([A-Z]|[a-z]|[\u00C0-\u00D6]|[\u00D8-\u00F6]|[\u00F8-\u02FF]|[\u0370-\u037D]|[\u037F-\u1FFF]|[\u200C-\u200D]|[\u2070-\u218F]|[\u2C00-\u2FEF]|[\u3001-\uD7FF]|[\uF900-\uFDCF]|[\uFDF0-\uFFFD])((((([A-Z]|[a-z]|[\u00C0-\u00D6]|[\u00D8-\u00F6]|[\u00F8-\u02FF]|[\u0370-\u037D]|[\u037F-\u1FFF]|[\u200C-\u200D]|[\u2070-\u218F]|[\u2C00-\u2FEF]|[\u3001-\uD7FF]|[\uF900-\uFDCF]|[\uFDF0-\uFFFD])|_\b)|-|[0-9]|[\u00B7]|[\u0300-\u036F]|[\u203F-\u2040])|\.)*((([A-Z]|[a-z]|[\u00C0-\u00D6]|[\u00D8-\u00F6]|[\u00F8-\u02FF]|[\u0370-\u037D]|[\u037F-\u1FFF]|[\u200C-\u200D]|[\u2070-\u218F]|[\u2C00-\u2FEF]|[\u3001-\uD7FF]|[\uF900-\uFDCF]|[\uFDF0-\uFFFD])|_\b)|-|[0-9]|[\u00B7]|[\u0300-\u036F]|[\u203F-\u2040]))?)?:))/i,/^(?:(@((([A-Z]|[a-z]|[\u00C0-\u00D6]|[\u00D8-\u00F6]|[\u00F8-\u02FF]|[\u0370-\u037D]|[\u037F-\u1FFF]|[\u200C-\u200D]|[\u2070-\u218F]|[\u2C00-\u2FEF]|[\u3001-\uD7FF]|[\uF900-\uFDCF]|[\uFDF0-\uFFFD])((((([A-Z]|[a-z]|[\u00C0-\u00D6]|[\u00D8-\u00F6]|[\u00F8-\u02FF]|[\u0370-\u037D]|[\u037F-\u1FFF]|[\u200C-\u200D]|[\u2070-\u218F]|[\u2C00-\u2FEF]|[\u3001-\uD7FF]|[\uF900-\uFDCF]|[\uFDF0-\uFFFD])|_\b)|-|[0-9]|[\u00B7]|[\u0300-\u036F]|[\u203F-\u2040])|\.)*((([A-Z]|[a-z]|[\u00C0-\u00D6]|[\u00D8-\u00F6]|[\u00F8-\u02FF]|[\u0370-\u037D]|[\u037F-\u1FFF]|[\u200C-\u200D]|[\u2070-\u218F]|[\u2C00-\u2FEF]|[\u3001-\uD7FF]|[\uF900-\uFDCF]|[\uFDF0-\uFFFD])|_\b)|-|[0-9]|[\u00B7]|[\u0300-\u036F]|[\u203F-\u2040]))?)?:)(((([A-Z]|[a-z]|[\u00C0-\u00D6]|[\u00D8-\u00F6]|[\u00F8-\u02FF]|[\u0370-\u037D]|[\u037F-\u1FFF]|[\u200C-\u200D]|[\u2070-\u218F]|[\u2C00-\u2FEF]|[\u3001-\uD7FF]|[\uF900-\uFDCF]|[\uFDF0-\uFFFD])|_\b)|:|[0-9]|((%([0-9]|[A-F]|[a-f])([0-9]|[A-F]|[a-f]))|(\\(_|~|\.|-|!|\$|&|'|\(|\)|\*|\+|,|;|=|\/|\?|#|@|%))))((((([A-Z]|[a-z]|[\u00C0-\u00D6]|[\u00D8-\u00F6]|[\u00F8-\u02FF]|[\u0370-\u037D]|[\u037F-\u1FFF]|[\u200C-\u200D]|[\u2070-\u218F]|[\u2C00-\u2FEF]|[\u3001-\uD7FF]|[\uF900-\uFDCF]|[\uFDF0-\uFFFD])|_\b)|-|[0-9]|[\u00B7]|[\u0300-\u036F]|[\u203F-\u2040])|\.|:|((%([0-9]|[A-F]|[a-f])([0-9]|[A-F]|[a-f]))|(\\(_|~|\.|-|!|\$|&|'|\(|\)|\*|\+|,|;|=|\/|\?|#|@|%))))*(((([A-Z]|[a-z]|[\u00C0-\u00D6]|[\u00D8-\u00F6]|[\u00F8-\u02FF]|[\u0370-\u037D]|[\u037F-\u1FFF]|[\u200C-\u200D]|[\u2070-\u218F]|[\u2C00-\u2FEF]|[\u3001-\uD7FF]|[\uF900-\uFDCF]|[\uFDF0-\uFFFD])|_\b)|-|[0-9]|[\u00B7]|[\u0300-\u036F]|[\u203F-\u2040])|:|((%([0-9]|[A-F]|[a-f])([0-9]|[A-F]|[a-f]))|(\\(_|~|\.|-|!|\$|&|'|\(|\)|\*|\+|,|;|=|\/|\?|#|@|%)))))?)))/i,/^(?:(@[a-zA-Z]+(-[a-zA-Z0-9]+)*))/i,/^(?:([+-]?[0-9]+))/i,/^(?:([+-]?[0-9]*\.[0-9]+))/i,/^(?:([+-]?([0-9]+\.[0-9]*([eE][+-]?[0-9]+)|\.?[0-9]+([eE][+-]?[0-9]+))))/i,/^(?:([eE][+-]?[0-9]+))/i,/^(?:('(?:(?:[^\u0027\u005C\u000A\u000D])|(\\[tbnrf\\\"\']))*'))/i,/^(?:("(?:(?:[^\u0022\u005C\u000A\u000D])|(\\[tbnrf\\\"\']))*"))/i,/^(?:('''(?:(?:'|'')?(?:[^'\\]|(\\[tbnrf\\\"\'])))*'''))/i,/^(?:("""(?:(?:"|"")?(?:[^\"\\]|(\\[tbnrf\\\"\'])))*"""))/i,/^(?:->)/i,/^(?:\.\.)/i,/^(?:\})/i,/^(?:\{)/i,/^(?:\()/i,/^(?:\))/i,/^(?:\[)/i,/^(?:\])/i,/^(?:\?)/i,/^(?:\*)/i,/^(?:\+)/i,/^(?:\|)/i,/^(?:\^\^)/i,/^(?:\.)/i,/^(?:!)/i,/^(?:\/)/i,/^(?:=)/i,/^(?:@)/i,/^(?:\^)/i,/^(?:;)/i,/^(?:,)/i,/^(?:%)/i,/^(?:a)/i,/^(?:$)/i,/^(?:.)/i],conditions:{INITIAL:{rules:[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51],inclusive:!0}}};return ht})();Oe.lexer=Tt;function Ue(){this.yy={}}return Ue.prototype=Oe,Oe.Parser=Ue,new Ue})();return YA=u,YA}var u5;function dte(){if(u5)return L3;u5=1;const u=cte().Parser,n=Xi;class o{constructor(){}parse(t,{extendedSyntax:e,baseIRI:r}={}){this._parser=new u,this._parser.Parser.factory=n.DataFactory,this._parser.Parser.base=n.DataFactory.namedNode(r||"urn:x-base:default"),this._parser.Parser.extended=e===!0,this._parser.Parser.prefixes={rdf:"http://www.w3.org/1999/02/22-rdf-syntax-ns#",rdfs:"http://www.w3.org/2000/01/rdf-schema#",sh:"http://www.w3.org/ns/shacl#",xsd:"http://www.w3.org/2001/XMLSchema#",owl:"http://www.w3.org/2002/07/owl#"},this._parser.Parser.currentNodeShape=void 0,this._parser.Parser.currentPropertyNode=void 0,this._parser.Parser.nodeShapeStack=[],this._parser.Parser.tempCurrentNodeShape=void 0,this._parser.Parser.n3Parser=new n.Parser({baseIRI:r||"urn:x-base:default"});const a=[];return this._parser.Parser.onQuad=c=>{a.push(c)},this._parser.parse(t),a.prefixes=this._parser.Parser.prefixes,a}}return L3.Parser=o,L3.parse=function(t,e){return new o().parse(t,e)},L3}var R1={},o5;function lte(){if(o5)return R1;o5=1,Object.defineProperty(R1,"__esModule",{value:!0}),R1.PrefixWrappingIterator=void 0;const u=pt();let n=class extends u.WrappingIterator{constructor(i){super(i==null?void 0:i.then(t=>(this.prefixes=t.prefixes,t)))}read(){if(this.prefixes){for(const i of Object.entries(this.prefixes))this.emit("prefix",...i);delete this.prefixes}return super.read()}};return R1.PrefixWrappingIterator=n,R1}var s5;function fte(){if(s5)return E1;s5=1,Object.defineProperty(E1,"__esModule",{value:!0}),E1.ActorRdfParseShaclc=void 0;const u=mf(),n=xf(),o=Pt(),i=dte(),t=lte();let e=class extends u.ActorRdfParseFixedMediaTypes{constructor(a){super(a)}async runHandle(a,c,s){const d=new t.PrefixWrappingIterator((0,n.stringify)(a.data).then(f=>{var h;return(0,i.parse)(f,{extendedSyntax:c==="text/shaclc-ext",baseIRI:(h=a.metadata)==null?void 0:h.baseIRI})})),l=new o.Readable({objectMode:!0});return d.on("prefix",(...f)=>l.emit("prefix",...f)),{data:l.wrap(d),metadata:{triples:!0}}}};return E1.ActorRdfParseShaclc=e,E1}var c5;function hte(){return c5||(c5=1,(function(u){var n=lo&&lo.__createBinding||(Object.create?(function(i,t,e,r){r===void 0&&(r=e);var a=Object.getOwnPropertyDescriptor(t,e);(!a||("get"in a?!t.__esModule:a.writable||a.configurable))&&(a={enumerable:!0,get:function(){return t[e]}}),Object.defineProperty(i,r,a)}):(function(i,t,e,r){r===void 0&&(r=e),i[r]=t[e]})),o=lo&&lo.__exportStar||function(i,t){for(var e in i)e!=="default"&&!Object.prototype.hasOwnProperty.call(t,e)&&n(t,i,e)};Object.defineProperty(u,"__esModule",{value:!0}),o(fte(),u)})(lo)),lo}var fo={},F1={},Ln={},Mn={},Rf={},ZA={},I1={},d5;function l5(){return d5||(d5=1,Object.defineProperty(I1,"__esModule",{value:!0}),I1.htmlDecodeTree=void 0,I1.htmlDecodeTree=new Uint16Array('<\0\0\0\0\0\0EMabcfglmnoprstu\\bfmsligP&cutereve;iyx}rc;r;ravepha;acr;d;gpon;f;plyFunction;ingcsr;ign;ildemlaceforsucrkslash;;ed;y;crtause;noullis;a;r;pf;eve;cmpeq;HOacdefhilorsucy;PYcpyute;;italDifferentialD;leys;aeioron;dilrc;nint;ot;dnilla;terDot;i;rcleDMPTot;inus;lus;imes;ocskwiseContourIntegral;eCurlyDQoubleQuote;uote;lnpuon;e;gitruent;nt;ourIntegral;fr;oduct;nterClockwiseContourIntegral;oss;cr;p;Cap;DJSZacefios;otrahd;cy;cy;cy;grsger;r;hv;ayron;;l;ta;r;afcmriticalADGTcute;o;bleAcute;rave;ilde;ond;ferentialD;\0\0\0\0f;;DEot;qual;bleCDLRUVontourIntegrao\0\0nArrow;eoftARTrrow;ightArrow;engLReftARrrow;ightArrow;ightArrow;ightATrrow;ee;p\0\0rrow;ownArrow;erticalBar;nABLRTarrow;BUar;pArrow;reve;eft\0\0ightVector;eeVector;ector;Bar;ight\0eeVector;ector;Bar;ee;Arrow;ctr;rok;NTacdfglmopqstuxG;Hcuteaiyron;rc;ot;r;raveement;apcr;ty\0\0mallSquare;erySmallSquare;gpon;f;silon;uail;Tilde;librium;cir;m;a;mlipsts;onentialE;cfiosy;r;lled\0\0mallSquare;erySmallSquare;\0\0\0f;All;riertrf;cJTabcdfgorstcy;>mma;d;reve;eiydil;rc;;ot;r;;pf;eaterEFGLSTqual;Less;ullEqual;reater;ess;lantEqual;ilde;cr;;AacfiosuRDcy;ctek;;irc;r;lbertSpace;\0f;izontalLine;ctrok;mpownHumqual;EJOacdfgmnostucy;lig;cy;cuteiyrc;ot;r;rave;apcgr;inaryI;lie\0;egrral;section;isibleCTomma;imes;gpton;f;a;cr;ilde;\0cy;lcfosuiyrc;;r;pf;\0r;rcy;kcy;HJacfoscy;cy;ppa;eydil;;r;pf;cr;JTaceflmostcy;<cmnprute;bda;g;lacetrf;r;aeyron;dil;;fstACDFRTUVarnrgleBracket;row;BRar;ightArrow;eiling;o\0bleBracket;n\0eeVector;ector;Bar;loor;ightAVrrow;ector;ere;AVrrow;ector;iangle;BEar;qual;pDTVownVector;eeVector;ector;Bar;ector;Bar;ightsEFGLSTqualGreater;ullEqual;reater;ess;lantEqual;ilde;r;;eftarrow;idot;npwgLRlreftARrrow;ightArrow;ightArrow;eftarightightf;erLReftArrow;ightArrow;cht;rok;;acefiosup;y;dliumSpace;lintrf;r;nusPlus;pf;c;Jacefostucy;cute;aeyron;dil;;gswativeMTVediumSpace;hicneryThitedGLreaterGreateessLesLine;r;Bnptreak;BreakingSpace;f;;CDEGHLNPRSTVoungruent;pCap;oubleVerticalBar;lqxement;ual;Tilde;ists;reater;EFGLSTqual;ullEqual;reater;ess;lantEqual;ilde;umpownHump;qual;efstTriangle;BEar;qual;s;EGLSTqual;reater;ess;lantEqual;ilde;estedGLreaterGreater;essLess;recedes;ESqual;lantEqual;eiverseElement;ghtTriangle;BEar;qual;quuareSubpset;Equal;erset;Equal;bcpset;Equal;ceeds;ESTqual;lantEqual;ilde;erset;Equal;ilde;EFTqual;ullEqual;ilde;erticalBar;cr;ilde;Eacdfgmoprstuvlig;cuteiyrc;blac;r;raveaeicr;ga;cron;pf;enCurlyDQoubleQuote;uote;;clr;ashidees;mlerBParr;acek;et;arenthesis;acfhilorsrtialD;y;r;i;;usMinus;ipncareplanf;;eiocedes;ESTqual;lantEqual;ilde;me;dpuct;ortion;al;cir;;UfosOT"r;pf;cr;BEacefhiorsuarr;Gcnrute;g;r;tl;aeyron;dil;;;verseEUlqement;uilibrium;pEquilibrium;ro;ghtACDFTUVanrgleBracket;row;BLar;eftArrow;eiling;o\0bleBracket;n\0eeVector;ector;Bar;loor;ere;AVrrow;ector;iangle;BEar;qual;pDTVownVector;eeVector;ector;Bar;ector;Bar;puf;ndImplies;ightarrow;chr;;leDelayed;HOacfhimoqstuCcHcy;y;FTcy;cute;;aeiyron;dil;rc;;r;ortDLRUownArroweftArrowightArrowpArrow;gma;allCircle;pf;\0\0t;are;ISUntersection;ubpset;Equal;erset;Equal;nion;cr;ar;bcmp;set;Equal;cheeds;ESTqual;lantEqual;ilde;Th;;esrset;Equal;etHRSacfhiorsORNADE;Hccy;y;bu;;aeyron;dil;;r;ei\0efore;a;cnkSpace;Space;lde;EFTqual;ullEqual;ilde;pf;ipleDot;ctr;rok;\0\0\0\0\0\0\0cruter;ocir;r\0y;ve;iyrc;blac;r;raveacr;dierBParr;acek;et;arenthesis;on;Plus;gpon;f;ADETadpsrrow;BDar;ownArrow;ownArrow;quilibrium;ee;Arrow;ownerLReftArrow;ightArrow;i;lon;ing;cr;ilde;mlDbcdefosvash;ar;y;ash;l;er;btyar;;icalBLSTar;ine;eparator;ilde;ThinSpace;r;pf;cr;dash;cefosirc;dge;r;pf;cr;fiosr;;pf;cr;AIUacfosucy;cy;cy;cuteiyrc;;r;pf;cr;ml;Hacdefoscy;cute;ayron;;ot;\0oWidta;r;pf;cr;\0\0\0\0\0\0\0cutereve;;Ediuy;;rcte;lig;r;raveepfpsym;ha;apcclr;g;\0\0;adsvnd;;lope;;;elmrsz;esd;a;;;;;;;;t;vb;d;pth;arr;gpon;f;;Eaeiop;cir;;d;s;rox;eingctyr;;mp;eildemlcioninnt;Nabcdefiklnoprsuot;crkcepsong;psilon;rime;im;eq;ee;ed;gerk;tbrk;oy;quo;cmprtaus;eptyv;snoahw;;een;r;gcostuvwaiurc;pdptot;lus;imes;\0\0cup;ar;riangleduown;p;plus;earow;akocnklstozenge;riangle;dlrown;eft;ight;k;\0\0;;4;ck;eo;q=uiv;t;ptwxf;;tomtie;DHUVbdhmptuvLRlr;;;;;DUdu;;;;LRlr;;;;;HLRhlr;;;;;;ox;LRlr;;;;;DUdu;;;;inus;lus;imes;LRlr;;;;;HLRhlr;;;;;;evbarceior;mi;m;el;bh;sub;l;etp;Ee;;q\0\0\0\0\0\0\0\0\0\0cprute;;abcdsnd;rcup;aup;p;ot;;eot;aeiu\0s;on;dilrc;ps;sm;ot;dmnilptyv;t;err;ceiy;ck;mark;r;Ecefms;;elq;e\0\0rrowlreft;ight;RSacd;st;irc;ash;nint;id;cir;ubs;uit\0on;e;q\0\0a;t;;flemxente\0;dot;nfry;o;sr;aorr;ss;cur;bp;e;;e;dot;delprvwarrlr;;\0\0r;c;arr;p;;bcdosrcap;aup;p;ot;r;;alrvrr;m;yevwq\0\0reuee;edge;enearrowlreftightecioninnt;lcty;AHabcdefhijlorstuwzrar;glrsger;eth;h;varow;aayron;;;aogrr;tseq;glmta;ptyv;irsht;;arlraegsvm;osnd;suit;amma;in;;iode;ontimes;ncy;c\0\0rn;op;lptuwlar;f;;empsq;dot;inus;lus;quare;blebarwedgnadhownarrowarpoonlrefighkaro\0\0rn;op;cotry;;l;rok;drot;i;fahraangle;ciy;grarr;DacdefglmnopqrstuxDoocsuteter;aioyron;r;clon;;ot;Drot;;;rsave;dot;;ilsnters;;;dot;apscr;ty;svetp1;;;gs;p;gpon;f;alsr;sl;us;i;lvon;csuviorc\0\0antgltressaeils;st;v;DD;parsl;Daot;rr;cdir;oah;mrlo;cipl;seoctationential\0\0\0\0\0\0\0llingdotsey;male;ilrlig;\0\0g;ig;;lig;lig;fjaltt;ig;ns;of;\0f;ak;v;artint;aocs\0\0;;;;\0;;\0\0;;5;\0;;8;l;wn;cr;Eabcdefgijlnorstv;l;cmpute;ma;d;reve;iyrc;;ot;;lqs;qslan;cdlc;ot;o;l;;es;r;;gmel;cy;;Eaj;;;Eaes;p;prox;q;qim;pf;cir;m;el;;>;cdlqrci;r;ot;Par;uest;adels\0pror;qlqlesienrtneqq;Aabcefkosyrilmrrsfildrcy;;cwir;;ar;irc;alrrts;uitlip;con;r;sewarow;arow;amoprrr;tht;klreftarrow;ightarrow;f;bar;cltr;asrok;bpull;hen\0\0\0\0\0\0cute;iyrc;cxy;clfr;rave;inoinnt;t;fin;ta;lig;aopcgtr;elpinarh;f;ed;;cfotare;in;tie;do;celpal;grerarhk;rod;cgpty;on;f;a;uestcir;n;Edsv;ot;;v;;ilde;\0cy;lcfmosuiyrc;;r;ath;pf;\0r;rcy;kcy;acfghjosppa;v;eydil;;r;reen;cy;cy;pf;cr;ABEHabcdefghjlmnoprstuvartrail;arr;;g;ar;\0\0\0\0\0\0\0\0\0ute;mptyv;rabda;g;dl;;uor;bfhlpst;fs;s;p;l;im;l;;aeil;;s;abrrr;rk;akcek;;es;ldu;;aeuyron;diil;;cqrsa;uo;rduhar;shar;h;;fgqstahlrtrrow;taarpoonduownpeftarrows;ightahsrrow;sarpoonquigarrohreetimes;;qslan;cdgsc;ot;o;r;;es;adegspproot;qgqgtiilrsht;;;E;rdu;l;lk;cy;;achtrorneard;ri;iodot;ust;acheEaes;p;prox;q;qim;abnoptwznrg;r;rglmreftarightapsto;ightparrowlrefight;aflr;;us;imes;st;;efngear;lt;achmtrornear;d;;ri;achiqtquo;r;m;eg;;buo;r;rok;<;cdhilqrci;r;remes;arr;uest;Piar;;efrdushar;har;enrtneqq;DacdefhilnopsuDot;clprret;;ese;sto;dluowefker;oymma;;ash;asuredangler;o;cdnro;acdsir;otus;bd;u;p;dpels;f;ctr;pos;lmtimap;GLRVabcdefghijlmoprstuvwgt;;veltftarrrow;ightarrow;;;vightarrow;Ddash;ash;bcnptlaute;g;;Eiop;d;s;rour;al;s\0pmp;eaeouy\0;on;dil;ng;dot;p;;ash;;Aadqsxrr;rhrk;;oot;uieiar;ist;sr;Eest;qs;qslani;rAaprrr;ar;;sv;d;cy;AEadestr;rr;r;;fqstarrroightarro;qslan;si;ri;eiptf;;inn;Edv;ot;;;i;v;;aorr;astllel;;lint;;ceu;c;eAaitrrr;cw;;ghtarrowri;echimpqu;ceru;ort\0\0arm;e;qsubpbcp;Ees;et;eq;qc;e;Ees;et;eq;qgilrldeianglelreft;eight;e;m;esro;p;DHadgilrsash;arr;p;ash;et;;>nfin;Aetrr;;;r<ie;Atrr;rie;im;Aanrr;rhrk;;oear;\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0csuteiyr;c;abioslac;v;old;lig;crir;;\0\0\0n;ave;bmar;acitrirr;oss;n;aeicr;ga;cdnron;;pf;aelr;rp;;adiosvr;efmr;ofgof;r;lope;;cloashl;idees;as;mlbar;\0\0\0\0\0\0\0\0\0r;ast;lle\0\0m;;y;rcimptnt;od;il;enk;r;imo;v;mane;;tvchfork;aunckk;h;s;abcdemstcir;ir;ou;;nim;wo;ipuntint;f;nd;Eaceinosu;p;u;c;acenspprourlyeaespprox;qq;im;ime;sEasdfpalslar;ine;urf;;trel;cir;;ncsp;fiopsur;pf;rime;cr;aeoteirnionnt;st;eABHabcdefhilmnoprstuxartrail;arar;cdenqrteu;te;imptyv;g;del;;uor;abcfhlpstwp;;fs;;s;l;im;l;;aiil;o;nalabrrrk;akcek;;es;ldu;;aeuyron;diil;;clqsa;dhar;uo;rh;acgl;ipsnart;ilrsht;;aordu;l;;v;gnshtahlrstrrow;taarpoonduowpeftahrrowarpoonightarrows;quigarrohreetimes;g;ingdotseahmra;oust;achemid;abptnrg;r;raflr;;us;imes;apr;gt;olint;arachqquo;r;buo;rhirremes;i;efltri;luhar;;\0\0\0\0\0\0\0cute;qu;Eaceinpsy;\0;on;u;dil;rc;Eas;p;im;olint;i;ot;be;Aacmstxrr;rhr;oti;war;minnut;r;oacoyrp;hycy;;rt\0\0iaragmma;fv;;deglnprot;;q;E;;E;e;lus;arr;araeitlslsetmhp;parsl;dle;;e;s;flptcy;;b;ar;f;adres;uitcsuaup;s;p;s;ubp;eset;e;eset;e;afrarcemtr;tmiararr;fanighteppsilohsbcmnp;Edemnprs;ot;;dot;ult;Ee;;lus;arr;eiut;enq;qeq;qm;bp;;c;acenspprourlyeaespproqg;123;Edehlmnps;ost;ub;;dot;soul;b;arr;ult;Ee;;lus;eiut;enq;qeq;qm;bp;;Aanrr;rhr;owar;lig\0\0\0\0\0\0\0\0\0\0\0\0get;;raeyron;dil;;lrec;r;eiko\0e4fa;svym;cnkaspproimsasrnes;bd;ar;;eps;bcfot;ir;;ork;rime;aipdadempstngle;dlqrowneft;e;ight;eot;inus;lus;b;ime;ezium;chtry;;cy;rok;ioxheadlreftarroightarrowAHabcdfghlmoprstuwrar;cruter\0y;ve;iyrc;abhrlac;airsht;;raverlrlk;ct\0\0rn;erop;ri;alcr;gpon;f;adhlsuownarpoonlrefighi;hlonparrows;cit\0\0rn;erop;ng;ri;cr;dirot;lde;i;famrlangle;ABDacdeflnoprszrar;v;asnrgrt;eknprstappothinhirop;hiugmbpsetneq;q;setneq;q;hretianglelreftighty;ashelr;bear;q;lip;btar;trsubppf;rotrcur;bpnEenEeigzag;cefoprsirc;dibgar;e;q;erp;r;pf;;eatcr;\0\0\0\0\0\0\0trr;Aarr;Aarrais;dptfl;imAarrcqr;ptracefiosucuyte;iyrc;;nr;cy;pf;cr;cmy;lacdefhioswcute;ayron;;ot;ettra;r;cy;grarr;pf;cr;jn;j;'.split("").map(u=>u.charCodeAt(0)))),I1}var P1={},f5;function h5(){return f5||(f5=1,Object.defineProperty(P1,"__esModule",{value:!0}),P1.xmlDecodeTree=void 0,P1.xmlDecodeTree=new Uint16Array("aglq	\x1B\0\0p;os;t;t;uot;".split("").map(u=>u.charCodeAt(0)))),P1}var eE={},p5;function y5(){return p5||(p5=1,(function(u){var n;Object.defineProperty(u,"__esModule",{value:!0}),u.fromCodePoint=void 0,u.replaceCodePoint=i,u.decodeCodePoint=t;const o=new Map([[0,65533],[128,8364],[130,8218],[131,402],[132,8222],[133,8230],[134,8224],[135,8225],[136,710],[137,8240],[138,352],[139,8249],[140,338],[142,381],[145,8216],[146,8217],[147,8220],[148,8221],[149,8226],[150,8211],[151,8212],[152,732],[153,8482],[154,353],[155,8250],[156,339],[158,382],[159,376]]);u.fromCodePoint=(n=String.fromCodePoint)!==null&&n!==void 0?n:function(e){let r="";return e>65535&&(e-=65536,r+=String.fromCharCode(e>>>10&1023|55296),e=56320|e&1023),r+=String.fromCharCode(e),r};function i(e){var r;return e>=55296&&e<=57343||e>1114111?65533:(r=o.get(e))!==null&&r!==void 0?r:e}function t(e){return(0,u.fromCodePoint)(i(e))}})(eE)),eE}var b5;function _5(){return b5||(b5=1,(function(u){Object.defineProperty(u,"__esModule",{value:!0}),u.fromCodePoint=u.replaceCodePoint=u.decodeCodePoint=u.xmlDecodeTree=u.htmlDecodeTree=u.EntityDecoder=u.DecodingMode=u.BinTrieFlags=void 0,u.determineBranch=y,u.decodeHTML=m,u.decodeHTMLAttribute=g,u.decodeHTMLStrict=T,u.decodeXML=v;const n=l5(),o=h5(),i=y5();var t;(function(O){O[O.NUM=35]="NUM",O[O.SEMI=59]="SEMI",O[O.EQUALS=61]="EQUALS",O[O.ZERO=48]="ZERO",O[O.NINE=57]="NINE",O[O.LOWER_A=97]="LOWER_A",O[O.LOWER_F=102]="LOWER_F",O[O.LOWER_X=120]="LOWER_X",O[O.LOWER_Z=122]="LOWER_Z",O[O.UPPER_A=65]="UPPER_A",O[O.UPPER_F=70]="UPPER_F",O[O.UPPER_Z=90]="UPPER_Z"})(t||(t={}));const e=32;var r;(function(O){O[O.VALUE_LENGTH=49152]="VALUE_LENGTH",O[O.BRANCH_LENGTH=16256]="BRANCH_LENGTH",O[O.JUMP_TABLE=127]="JUMP_TABLE"})(r||(u.BinTrieFlags=r={}));function a(O){return O>=t.ZERO&&O<=t.NINE}function c(O){return O>=t.UPPER_A&&O<=t.UPPER_F||O>=t.LOWER_A&&O<=t.LOWER_F}function s(O){return O>=t.UPPER_A&&O<=t.UPPER_Z||O>=t.LOWER_A&&O<=t.LOWER_Z||a(O)}function d(O){return O===t.EQUALS||s(O)}var l;(function(O){O[O.EntityStart=0]="EntityStart",O[O.NumericStart=1]="NumericStart",O[O.NumericDecimal=2]="NumericDecimal",O[O.NumericHex=3]="NumericHex",O[O.NamedEntity=4]="NamedEntity"})(l||(l={}));var f;(function(O){O[O.Legacy=0]="Legacy",O[O.Strict=1]="Strict",O[O.Attribute=2]="Attribute"})(f||(u.DecodingMode=f={}));class h{constructor(w,E,R){this.decodeTree=w,this.emitCodePoint=E,this.errors=R,this.state=l.EntityStart,this.consumed=1,this.result=0,this.treeIndex=0,this.excess=1,this.decodeMode=f.Strict}startEntity(w){this.decodeMode=w,this.state=l.EntityStart,this.result=0,this.treeIndex=0,this.excess=1,this.consumed=1}write(w,E){switch(this.state){case l.EntityStart:return w.charCodeAt(E)===t.NUM?(this.state=l.NumericStart,this.consumed+=1,this.stateNumericStart(w,E+1)):(this.state=l.NamedEntity,this.stateNamedEntity(w,E));case l.NumericStart:return this.stateNumericStart(w,E);case l.NumericDecimal:return this.stateNumericDecimal(w,E);case l.NumericHex:return this.stateNumericHex(w,E);case l.NamedEntity:return this.stateNamedEntity(w,E)}}stateNumericStart(w,E){return E>=w.length?-1:(w.charCodeAt(E)|e)===t.LOWER_X?(this.state=l.NumericHex,this.consumed+=1,this.stateNumericHex(w,E+1)):(this.state=l.NumericDecimal,this.stateNumericDecimal(w,E))}addToNumericResult(w,E,R,D){if(E!==R){const B=R-E;this.result=this.result*Math.pow(D,B)+Number.parseInt(w.substr(E,B),D),this.consumed+=B}}stateNumericHex(w,E){const R=E;for(;E<w.length;){const D=w.charCodeAt(E);if(a(D)||c(D))E+=1;else return this.addToNumericResult(w,R,E,16),this.emitNumericEntity(D,3)}return this.addToNumericResult(w,R,E,16),-1}stateNumericDecimal(w,E){const R=E;for(;E<w.length;){const D=w.charCodeAt(E);if(a(D))E+=1;else return this.addToNumericResult(w,R,E,10),this.emitNumericEntity(D,2)}return this.addToNumericResult(w,R,E,10),-1}emitNumericEntity(w,E){var R;if(this.consumed<=E)return(R=this.errors)===null||R===void 0||R.absenceOfDigitsInNumericCharacterReference(this.consumed),0;if(w===t.SEMI)this.consumed+=1;else if(this.decodeMode===f.Strict)return 0;return this.emitCodePoint((0,i.replaceCodePoint)(this.result),this.consumed),this.errors&&(w!==t.SEMI&&this.errors.missingSemicolonAfterCharacterReference(),this.errors.validateNumericCharacterReference(this.result)),this.consumed}stateNamedEntity(w,E){const{decodeTree:R}=this;let D=R[this.treeIndex],B=(D&r.VALUE_LENGTH)>>14;for(;E<w.length;E++,this.excess++){const C=w.charCodeAt(E);if(this.treeIndex=y(R,D,this.treeIndex+Math.max(1,B),C),this.treeIndex<0)return this.result===0||this.decodeMode===f.Attribute&&(B===0||d(C))?0:this.emitNotTerminatedNamedEntity();if(D=R[this.treeIndex],B=(D&r.VALUE_LENGTH)>>14,B!==0){if(C===t.SEMI)return this.emitNamedEntityData(this.treeIndex,B,this.consumed+this.excess);this.decodeMode!==f.Strict&&(this.result=this.treeIndex,this.consumed+=this.excess,this.excess=0)}}return-1}emitNotTerminatedNamedEntity(){var w;const{result:E,decodeTree:R}=this,D=(R[E]&r.VALUE_LENGTH)>>14;return this.emitNamedEntityData(E,D,this.consumed),(w=this.errors)===null||w===void 0||w.missingSemicolonAfterCharacterReference(),this.consumed}emitNamedEntityData(w,E,R){const{decodeTree:D}=this;return this.emitCodePoint(E===1?D[w]&~r.VALUE_LENGTH:D[w+1],R),E===3&&this.emitCodePoint(D[w+2],R),R}end(){var w;switch(this.state){case l.NamedEntity:return this.result!==0&&(this.decodeMode!==f.Attribute||this.result===this.treeIndex)?this.emitNotTerminatedNamedEntity():0;case l.NumericDecimal:return this.emitNumericEntity(0,2);case l.NumericHex:return this.emitNumericEntity(0,3);case l.NumericStart:return(w=this.errors)===null||w===void 0||w.absenceOfDigitsInNumericCharacterReference(this.consumed),0;case l.EntityStart:return 0}}}u.EntityDecoder=h;function p(O){let w="";const E=new h(O,R=>w+=(0,i.fromCodePoint)(R));return function(D,B){let C=0,$=0;for(;($=D.indexOf("&",$))>=0;){w+=D.slice(C,$),E.startEntity(B);const ee=E.write(D,$+1);if(ee<0){C=$+E.end();break}C=$+ee,$=ee===0?C+1:C}const Z=w+D.slice(C);return w="",Z}}function y(O,w,E,R){const D=(w&r.BRANCH_LENGTH)>>7,B=w&r.JUMP_TABLE;if(D===0)return B!==0&&R===B?E:-1;if(B){const Z=R-B;return Z<0||Z>=D?-1:O[E+Z]-1}let C=E,$=C+D-1;for(;C<=$;){const Z=C+$>>>1,ee=O[Z];if(ee<R)C=Z+1;else if(ee>R)$=Z-1;else return O[Z+D]}return-1}const _=p(n.htmlDecodeTree),b=p(o.xmlDecodeTree);function m(O,w=f.Legacy){return _(O,w)}function g(O){return _(O,f.Attribute)}function T(O){return _(O,f.Strict)}function v(O){return b(O,f.Strict)}var S=l5();Object.defineProperty(u,"htmlDecodeTree",{enumerable:!0,get:function(){return S.htmlDecodeTree}});var F=h5();Object.defineProperty(u,"xmlDecodeTree",{enumerable:!0,get:function(){return F.xmlDecodeTree}});var M=y5();Object.defineProperty(u,"decodeCodePoint",{enumerable:!0,get:function(){return M.decodeCodePoint}}),Object.defineProperty(u,"replaceCodePoint",{enumerable:!0,get:function(){return M.replaceCodePoint}}),Object.defineProperty(u,"fromCodePoint",{enumerable:!0,get:function(){return M.fromCodePoint}})})(ZA)),ZA}var g5;function m5(){if(g5)return Rf;g5=1,Object.defineProperty(Rf,"__esModule",{value:!0}),Rf.QuoteType=void 0;const u=_5();var n;(function(s){s[s.Tab=9]="Tab",s[s.NewLine=10]="NewLine",s[s.FormFeed=12]="FormFeed",s[s.CarriageReturn=13]="CarriageReturn",s[s.Space=32]="Space",s[s.ExclamationMark=33]="ExclamationMark",s[s.Number=35]="Number",s[s.Amp=38]="Amp",s[s.SingleQuote=39]="SingleQuote",s[s.DoubleQuote=34]="DoubleQuote",s[s.Dash=45]="Dash",s[s.Slash=47]="Slash",s[s.Zero=48]="Zero",s[s.Nine=57]="Nine",s[s.Semi=59]="Semi",s[s.Lt=60]="Lt",s[s.Eq=61]="Eq",s[s.Gt=62]="Gt",s[s.Questionmark=63]="Questionmark",s[s.UpperA=65]="UpperA",s[s.LowerA=97]="LowerA",s[s.UpperF=70]="UpperF",s[s.LowerF=102]="LowerF",s[s.UpperZ=90]="UpperZ",s[s.LowerZ=122]="LowerZ",s[s.LowerX=120]="LowerX",s[s.OpeningSquareBracket=91]="OpeningSquareBracket"})(n||(n={}));var o;(function(s){s[s.Text=1]="Text",s[s.BeforeTagName=2]="BeforeTagName",s[s.InTagName=3]="InTagName",s[s.InSelfClosingTag=4]="InSelfClosingTag",s[s.BeforeClosingTagName=5]="BeforeClosingTagName",s[s.InClosingTagName=6]="InClosingTagName",s[s.AfterClosingTagName=7]="AfterClosingTagName",s[s.BeforeAttributeName=8]="BeforeAttributeName",s[s.InAttributeName=9]="InAttributeName",s[s.AfterAttributeName=10]="AfterAttributeName",s[s.BeforeAttributeValue=11]="BeforeAttributeValue",s[s.InAttributeValueDq=12]="InAttributeValueDq",s[s.InAttributeValueSq=13]="InAttributeValueSq",s[s.InAttributeValueNq=14]="InAttributeValueNq",s[s.BeforeDeclaration=15]="BeforeDeclaration",s[s.InDeclaration=16]="InDeclaration",s[s.InProcessingInstruction=17]="InProcessingInstruction",s[s.BeforeComment=18]="BeforeComment",s[s.CDATASequence=19]="CDATASequence",s[s.InSpecialComment=20]="InSpecialComment",s[s.InCommentLike=21]="InCommentLike",s[s.BeforeSpecialS=22]="BeforeSpecialS",s[s.BeforeSpecialT=23]="BeforeSpecialT",s[s.SpecialStartSequence=24]="SpecialStartSequence",s[s.InSpecialTag=25]="InSpecialTag",s[s.InEntity=26]="InEntity"})(o||(o={}));function i(s){return s===n.Space||s===n.NewLine||s===n.Tab||s===n.FormFeed||s===n.CarriageReturn}function t(s){return s===n.Slash||s===n.Gt||i(s)}function e(s){return s>=n.LowerA&&s<=n.LowerZ||s>=n.UpperA&&s<=n.UpperZ}var r;(function(s){s[s.NoValue=0]="NoValue",s[s.Unquoted=1]="Unquoted",s[s.Single=2]="Single",s[s.Double=3]="Double"})(r||(Rf.QuoteType=r={}));const a={Cdata:new Uint8Array([67,68,65,84,65,91]),CdataEnd:new Uint8Array([93,93,62]),CommentEnd:new Uint8Array([45,45,62]),ScriptEnd:new Uint8Array([60,47,115,99,114,105,112,116]),StyleEnd:new Uint8Array([60,47,115,116,121,108,101]),TitleEnd:new Uint8Array([60,47,116,105,116,108,101]),TextareaEnd:new Uint8Array([60,47,116,101,120,116,97,114,101,97]),XmpEnd:new Uint8Array([60,47,120,109,112])};let c=class{constructor({xmlMode:d=!1,decodeEntities:l=!0},f){this.cbs=f,this.state=o.Text,this.buffer="",this.sectionStart=0,this.index=0,this.entityStart=0,this.baseState=o.Text,this.isSpecial=!1,this.running=!0,this.offset=0,this.currentSequence=void 0,this.sequenceIndex=0,this.xmlMode=d,this.decodeEntities=l,this.entityDecoder=new u.EntityDecoder(d?u.xmlDecodeTree:u.htmlDecodeTree,(h,p)=>this.emitCodePoint(h,p))}reset(){this.state=o.Text,this.buffer="",this.sectionStart=0,this.index=0,this.baseState=o.Text,this.currentSequence=void 0,this.running=!0,this.offset=0}write(d){this.offset+=this.buffer.length,this.buffer=d,this.parse()}end(){this.running&&this.finish()}pause(){this.running=!1}resume(){this.running=!0,this.index<this.buffer.length+this.offset&&this.parse()}stateText(d){d===n.Lt||!this.decodeEntities&&this.fastForwardTo(n.Lt)?(this.index>this.sectionStart&&this.cbs.ontext(this.sectionStart,this.index),this.state=o.BeforeTagName,this.sectionStart=this.index):this.decodeEntities&&d===n.Amp&&this.startEntity()}stateSpecialStartSequence(d){const l=this.sequenceIndex===this.currentSequence.length;if(!(l?t(d):(d|32)===this.currentSequence[this.sequenceIndex]))this.isSpecial=!1;else if(!l){this.sequenceIndex++;return}this.sequenceIndex=0,this.state=o.InTagName,this.stateInTagName(d)}stateInSpecialTag(d){if(this.sequenceIndex===this.currentSequence.length){if(d===n.Gt||i(d)){const l=this.index-this.currentSequence.length;if(this.sectionStart<l){const f=this.index;this.index=l,this.cbs.ontext(this.sectionStart,l),this.index=f}this.isSpecial=!1,this.sectionStart=l+2,this.stateInClosingTagName(d);return}this.sequenceIndex=0}(d|32)===this.currentSequence[this.sequenceIndex]?this.sequenceIndex+=1:this.sequenceIndex===0?this.currentSequence===a.TitleEnd?this.decodeEntities&&d===n.Amp&&this.startEntity():this.fastForwardTo(n.Lt)&&(this.sequenceIndex=1):this.sequenceIndex=+(d===n.Lt)}stateCDATASequence(d){d===a.Cdata[this.sequenceIndex]?++this.sequenceIndex===a.Cdata.length&&(this.state=o.InCommentLike,this.currentSequence=a.CdataEnd,this.sequenceIndex=0,this.sectionStart=this.index+1):(this.sequenceIndex=0,this.state=o.InDeclaration,this.stateInDeclaration(d))}fastForwardTo(d){for(;++this.index<this.buffer.length+this.offset;)if(this.buffer.charCodeAt(this.index-this.offset)===d)return!0;return this.index=this.buffer.length+this.offset-1,!1}stateInCommentLike(d){d===this.currentSequence[this.sequenceIndex]?++this.sequenceIndex===this.currentSequence.length&&(this.currentSequence===a.CdataEnd?this.cbs.oncdata(this.sectionStart,this.index,2):this.cbs.oncomment(this.sectionStart,this.index,2),this.sequenceIndex=0,this.sectionStart=this.index+1,this.state=o.Text):this.sequenceIndex===0?this.fastForwardTo(this.currentSequence[0])&&(this.sequenceIndex=1):d!==this.currentSequence[this.sequenceIndex-1]&&(this.sequenceIndex=0)}isTagStartChar(d){return this.xmlMode?!t(d):e(d)}startSpecial(d,l){this.isSpecial=!0,this.currentSequence=d,this.sequenceIndex=l,this.state=o.SpecialStartSequence}stateBeforeTagName(d){if(d===n.ExclamationMark)this.state=o.BeforeDeclaration,this.sectionStart=this.index+1;else if(d===n.Questionmark)this.state=o.InProcessingInstruction,this.sectionStart=this.index+1;else if(this.isTagStartChar(d)){const l=d|32;this.sectionStart=this.index,this.xmlMode?this.state=o.InTagName:l===a.ScriptEnd[2]?this.state=o.BeforeSpecialS:l===a.TitleEnd[2]||l===a.XmpEnd[2]?this.state=o.BeforeSpecialT:this.state=o.InTagName}else d===n.Slash?this.state=o.BeforeClosingTagName:(this.state=o.Text,this.stateText(d))}stateInTagName(d){t(d)&&(this.cbs.onopentagname(this.sectionStart,this.index),this.sectionStart=-1,this.state=o.BeforeAttributeName,this.stateBeforeAttributeName(d))}stateBeforeClosingTagName(d){i(d)||(d===n.Gt?this.state=o.Text:(this.state=this.isTagStartChar(d)?o.InClosingTagName:o.InSpecialComment,this.sectionStart=this.index))}stateInClosingTagName(d){(d===n.Gt||i(d))&&(this.cbs.onclosetag(this.sectionStart,this.index),this.sectionStart=-1,this.state=o.AfterClosingTagName,this.stateAfterClosingTagName(d))}stateAfterClosingTagName(d){(d===n.Gt||this.fastForwardTo(n.Gt))&&(this.state=o.Text,this.sectionStart=this.index+1)}stateBeforeAttributeName(d){d===n.Gt?(this.cbs.onopentagend(this.index),this.isSpecial?(this.state=o.InSpecialTag,this.sequenceIndex=0):this.state=o.Text,this.sectionStart=this.index+1):d===n.Slash?this.state=o.InSelfClosingTag:i(d)||(this.state=o.InAttributeName,this.sectionStart=this.index)}stateInSelfClosingTag(d){d===n.Gt?(this.cbs.onselfclosingtag(this.index),this.state=o.Text,this.sectionStart=this.index+1,this.isSpecial=!1):i(d)||(this.state=o.BeforeAttributeName,this.stateBeforeAttributeName(d))}stateInAttributeName(d){(d===n.Eq||t(d))&&(this.cbs.onattribname(this.sectionStart,this.index),this.sectionStart=this.index,this.state=o.AfterAttributeName,this.stateAfterAttributeName(d))}stateAfterAttributeName(d){d===n.Eq?this.state=o.BeforeAttributeValue:d===n.Slash||d===n.Gt?(this.cbs.onattribend(r.NoValue,this.sectionStart),this.sectionStart=-1,this.state=o.BeforeAttributeName,this.stateBeforeAttributeName(d)):i(d)||(this.cbs.onattribend(r.NoValue,this.sectionStart),this.state=o.InAttributeName,this.sectionStart=this.index)}stateBeforeAttributeValue(d){d===n.DoubleQuote?(this.state=o.InAttributeValueDq,this.sectionStart=this.index+1):d===n.SingleQuote?(this.state=o.InAttributeValueSq,this.sectionStart=this.index+1):i(d)||(this.sectionStart=this.index,this.state=o.InAttributeValueNq,this.stateInAttributeValueNoQuotes(d))}handleInAttributeValue(d,l){d===l||!this.decodeEntities&&this.fastForwardTo(l)?(this.cbs.onattribdata(this.sectionStart,this.index),this.sectionStart=-1,this.cbs.onattribend(l===n.DoubleQuote?r.Double:r.Single,this.index+1),this.state=o.BeforeAttributeName):this.decodeEntities&&d===n.Amp&&this.startEntity()}stateInAttributeValueDoubleQuotes(d){this.handleInAttributeValue(d,n.DoubleQuote)}stateInAttributeValueSingleQuotes(d){this.handleInAttributeValue(d,n.SingleQuote)}stateInAttributeValueNoQuotes(d){i(d)||d===n.Gt?(this.cbs.onattribdata(this.sectionStart,this.index),this.sectionStart=-1,this.cbs.onattribend(r.Unquoted,this.index),this.state=o.BeforeAttributeName,this.stateBeforeAttributeName(d)):this.decodeEntities&&d===n.Amp&&this.startEntity()}stateBeforeDeclaration(d){d===n.OpeningSquareBracket?(this.state=o.CDATASequence,this.sequenceIndex=0):this.state=d===n.Dash?o.BeforeComment:o.InDeclaration}stateInDeclaration(d){(d===n.Gt||this.fastForwardTo(n.Gt))&&(this.cbs.ondeclaration(this.sectionStart,this.index),this.state=o.Text,this.sectionStart=this.index+1)}stateInProcessingInstruction(d){(d===n.Gt||this.fastForwardTo(n.Gt))&&(this.cbs.onprocessinginstruction(this.sectionStart,this.index),this.state=o.Text,this.sectionStart=this.index+1)}stateBeforeComment(d){d===n.Dash?(this.state=o.InCommentLike,this.currentSequence=a.CommentEnd,this.sequenceIndex=2,this.sectionStart=this.index+1):this.state=o.InDeclaration}stateInSpecialComment(d){(d===n.Gt||this.fastForwardTo(n.Gt))&&(this.cbs.oncomment(this.sectionStart,this.index,0),this.state=o.Text,this.sectionStart=this.index+1)}stateBeforeSpecialS(d){const l=d|32;l===a.ScriptEnd[3]?this.startSpecial(a.ScriptEnd,4):l===a.StyleEnd[3]?this.startSpecial(a.StyleEnd,4):(this.state=o.InTagName,this.stateInTagName(d))}stateBeforeSpecialT(d){switch(d|32){case a.TitleEnd[3]:{this.startSpecial(a.TitleEnd,4);break}case a.TextareaEnd[3]:{this.startSpecial(a.TextareaEnd,4);break}case a.XmpEnd[3]:{this.startSpecial(a.XmpEnd,4);break}default:this.state=o.InTagName,this.stateInTagName(d)}}startEntity(){this.baseState=this.state,this.state=o.InEntity,this.entityStart=this.index,this.entityDecoder.startEntity(this.xmlMode?u.DecodingMode.Strict:this.baseState===o.Text||this.baseState===o.InSpecialTag?u.DecodingMode.Legacy:u.DecodingMode.Attribute)}stateInEntity(){const d=this.entityDecoder.write(this.buffer,this.index-this.offset);d>=0?(this.state=this.baseState,d===0&&(this.index=this.entityStart)):this.index=this.offset+this.buffer.length-1}cleanup(){this.running&&this.sectionStart!==this.index&&(this.state===o.Text||this.state===o.InSpecialTag&&this.sequenceIndex===0?(this.cbs.ontext(this.sectionStart,this.index),this.sectionStart=this.index):(this.state===o.InAttributeValueDq||this.state===o.InAttributeValueSq||this.state===o.InAttributeValueNq)&&(this.cbs.onattribdata(this.sectionStart,this.index),this.sectionStart=this.index))}shouldContinue(){return this.index<this.buffer.length+this.offset&&this.running}parse(){for(;this.shouldContinue();){const d=this.buffer.charCodeAt(this.index-this.offset);switch(this.state){case o.Text:{this.stateText(d);break}case o.SpecialStartSequence:{this.stateSpecialStartSequence(d);break}case o.InSpecialTag:{this.stateInSpecialTag(d);break}case o.CDATASequence:{this.stateCDATASequence(d);break}case o.InAttributeValueDq:{this.stateInAttributeValueDoubleQuotes(d);break}case o.InAttributeName:{this.stateInAttributeName(d);break}case o.InCommentLike:{this.stateInCommentLike(d);break}case o.InSpecialComment:{this.stateInSpecialComment(d);break}case o.BeforeAttributeName:{this.stateBeforeAttributeName(d);break}case o.InTagName:{this.stateInTagName(d);break}case o.InClosingTagName:{this.stateInClosingTagName(d);break}case o.BeforeTagName:{this.stateBeforeTagName(d);break}case o.AfterAttributeName:{this.stateAfterAttributeName(d);break}case o.InAttributeValueSq:{this.stateInAttributeValueSingleQuotes(d);break}case o.BeforeAttributeValue:{this.stateBeforeAttributeValue(d);break}case o.BeforeClosingTagName:{this.stateBeforeClosingTagName(d);break}case o.AfterClosingTagName:{this.stateAfterClosingTagName(d);break}case o.BeforeSpecialS:{this.stateBeforeSpecialS(d);break}case o.BeforeSpecialT:{this.stateBeforeSpecialT(d);break}case o.InAttributeValueNq:{this.stateInAttributeValueNoQuotes(d);break}case o.InSelfClosingTag:{this.stateInSelfClosingTag(d);break}case o.InDeclaration:{this.stateInDeclaration(d);break}case o.BeforeDeclaration:{this.stateBeforeDeclaration(d);break}case o.BeforeComment:{this.stateBeforeComment(d);break}case o.InProcessingInstruction:{this.stateInProcessingInstruction(d);break}case o.InEntity:{this.stateInEntity();break}}this.index++}this.cleanup()}finish(){this.state===o.InEntity&&(this.entityDecoder.end(),this.state=this.baseState),this.handleTrailingData(),this.cbs.onend()}handleTrailingData(){const d=this.buffer.length+this.offset;this.sectionStart>=d||(this.state===o.InCommentLike?this.currentSequence===a.CdataEnd?this.cbs.oncdata(this.sectionStart,d,0):this.cbs.oncomment(this.sectionStart,d,0):this.state===o.InTagName||this.state===o.BeforeAttributeName||this.state===o.BeforeAttributeValue||this.state===o.AfterAttributeName||this.state===o.InAttributeName||this.state===o.InAttributeValueSq||this.state===o.InAttributeValueDq||this.state===o.InAttributeValueNq||this.state===o.InClosingTagName||this.cbs.ontext(this.sectionStart,d))}emitCodePoint(d,l){this.baseState!==o.Text&&this.baseState!==o.InSpecialTag?(this.sectionStart<this.entityStart&&this.cbs.onattribdata(this.sectionStart,this.entityStart),this.sectionStart=this.entityStart+l,this.index=this.sectionStart-1,this.cbs.onattribentity(d)):(this.sectionStart<this.entityStart&&this.cbs.ontext(this.sectionStart,this.entityStart),this.sectionStart=this.entityStart+l,this.index=this.sectionStart-1,this.cbs.ontextentity(d,this.sectionStart))}};return Rf.default=c,Rf}var v5;function T5(){if(v5)return Mn;v5=1;var u=Mn&&Mn.__createBinding||(Object.create?(function(_,b,m,g){g===void 0&&(g=m);var T=Object.getOwnPropertyDescriptor(b,m);(!T||("get"in T?!b.__esModule:T.writable||T.configurable))&&(T={enumerable:!0,get:function(){return b[m]}}),Object.defineProperty(_,g,T)}):(function(_,b,m,g){g===void 0&&(g=m),_[g]=b[m]})),n=Mn&&Mn.__setModuleDefault||(Object.create?(function(_,b){Object.defineProperty(_,"default",{enumerable:!0,value:b})}):function(_,b){_.default=b}),o=Mn&&Mn.__importStar||(function(){var _=function(b){return _=Object.getOwnPropertyNames||function(m){var g=[];for(var T in m)Object.prototype.hasOwnProperty.call(m,T)&&(g[g.length]=T);return g},_(b)};return function(b){if(b&&b.__esModule)return b;var m={};if(b!=null)for(var g=_(b),T=0;T<g.length;T++)g[T]!=="default"&&u(m,b,g[T]);return n(m,b),m}})();Object.defineProperty(Mn,"__esModule",{value:!0}),Mn.Parser=void 0;const i=o(m5()),t=_5(),e=new Set(["input","option","optgroup","select","button","datalist","textarea"]),r=new Set(["p"]),a=new Set(["thead","tbody"]),c=new Set(["dd","dt"]),s=new Set(["rt","rp"]),d=new Map([["tr",new Set(["tr","th","td"])],["th",new Set(["th"])],["td",new Set(["thead","th","td"])],["body",new Set(["head","link","script"])],["li",new Set(["li"])],["p",r],["h1",r],["h2",r],["h3",r],["h4",r],["h5",r],["h6",r],["select",e],["input",e],["output",e],["button",e],["datalist",e],["textarea",e],["option",new Set(["option"])],["optgroup",new Set(["optgroup","option"])],["dd",c],["dt",c],["address",r],["article",r],["aside",r],["blockquote",r],["details",r],["div",r],["dl",r],["fieldset",r],["figcaption",r],["figure",r],["footer",r],["form",r],["header",r],["hr",r],["main",r],["nav",r],["ol",r],["pre",r],["section",r],["table",r],["ul",r],["rt",s],["rp",s],["tbody",a],["tfoot",a]]),l=new Set(["area","base","basefont","br","col","command","embed","frame","hr","img","input","isindex","keygen","link","meta","param","source","track","wbr"]),f=new Set(["math","svg"]),h=new Set(["mi","mo","mn","ms","mtext","annotation-xml","foreignobject","desc","title"]),p=/\s|\//;let y=class{constructor(b,m={}){var g,T,v,S,F,M;this.options=m,this.startIndex=0,this.endIndex=0,this.openTagStart=0,this.tagname="",this.attribname="",this.attribvalue="",this.attribs=null,this.stack=[],this.buffers=[],this.bufferOffset=0,this.writeIndex=0,this.ended=!1,this.cbs=b??{},this.htmlMode=!this.options.xmlMode,this.lowerCaseTagNames=(g=m.lowerCaseTags)!==null&&g!==void 0?g:this.htmlMode,this.lowerCaseAttributeNames=(T=m.lowerCaseAttributeNames)!==null&&T!==void 0?T:this.htmlMode,this.recognizeSelfClosing=(v=m.recognizeSelfClosing)!==null&&v!==void 0?v:!this.htmlMode,this.tokenizer=new((S=m.Tokenizer)!==null&&S!==void 0?S:i.default)(this.options,this),this.foreignContext=[!this.htmlMode],(M=(F=this.cbs).onparserinit)===null||M===void 0||M.call(F,this)}ontext(b,m){var g,T;const v=this.getSlice(b,m);this.endIndex=m-1,(T=(g=this.cbs).ontext)===null||T===void 0||T.call(g,v),this.startIndex=m}ontextentity(b,m){var g,T;this.endIndex=m-1,(T=(g=this.cbs).ontext)===null||T===void 0||T.call(g,(0,t.fromCodePoint)(b)),this.startIndex=m}isVoidElement(b){return this.htmlMode&&l.has(b)}onopentagname(b,m){this.endIndex=m;let g=this.getSlice(b,m);this.lowerCaseTagNames&&(g=g.toLowerCase()),this.emitOpenTag(g)}emitOpenTag(b){var m,g,T,v;this.openTagStart=this.startIndex,this.tagname=b;const S=this.htmlMode&&d.get(b);if(S)for(;this.stack.length>0&&S.has(this.stack[0]);){const F=this.stack.shift();(g=(m=this.cbs).onclosetag)===null||g===void 0||g.call(m,F,!0)}this.isVoidElement(b)||(this.stack.unshift(b),this.htmlMode&&(f.has(b)?this.foreignContext.unshift(!0):h.has(b)&&this.foreignContext.unshift(!1))),(v=(T=this.cbs).onopentagname)===null||v===void 0||v.call(T,b),this.cbs.onopentag&&(this.attribs={})}endOpenTag(b){var m,g;this.startIndex=this.openTagStart,this.attribs&&((g=(m=this.cbs).onopentag)===null||g===void 0||g.call(m,this.tagname,this.attribs,b),this.attribs=null),this.cbs.onclosetag&&this.isVoidElement(this.tagname)&&this.cbs.onclosetag(this.tagname,!0),this.tagname=""}onopentagend(b){this.endIndex=b,this.endOpenTag(!1),this.startIndex=b+1}onclosetag(b,m){var g,T,v,S,F,M,O,w;this.endIndex=m;let E=this.getSlice(b,m);if(this.lowerCaseTagNames&&(E=E.toLowerCase()),this.htmlMode&&(f.has(E)||h.has(E))&&this.foreignContext.shift(),this.isVoidElement(E))this.htmlMode&&E==="br"&&((S=(v=this.cbs).onopentagname)===null||S===void 0||S.call(v,"br"),(M=(F=this.cbs).onopentag)===null||M===void 0||M.call(F,"br",{},!0),(w=(O=this.cbs).onclosetag)===null||w===void 0||w.call(O,"br",!1));else{const R=this.stack.indexOf(E);if(R!==-1)for(let D=0;D<=R;D++){const B=this.stack.shift();(T=(g=this.cbs).onclosetag)===null||T===void 0||T.call(g,B,D!==R)}else this.htmlMode&&E==="p"&&(this.emitOpenTag("p"),this.closeCurrentTag(!0))}this.startIndex=m+1}onselfclosingtag(b){this.endIndex=b,this.recognizeSelfClosing||this.foreignContext[0]?(this.closeCurrentTag(!1),this.startIndex=b+1):this.onopentagend(b)}closeCurrentTag(b){var m,g;const T=this.tagname;this.endOpenTag(b),this.stack[0]===T&&((g=(m=this.cbs).onclosetag)===null||g===void 0||g.call(m,T,!b),this.stack.shift())}onattribname(b,m){this.startIndex=b;const g=this.getSlice(b,m);this.attribname=this.lowerCaseAttributeNames?g.toLowerCase():g}onattribdata(b,m){this.attribvalue+=this.getSlice(b,m)}onattribentity(b){this.attribvalue+=(0,t.fromCodePoint)(b)}onattribend(b,m){var g,T;this.endIndex=m,(T=(g=this.cbs).onattribute)===null||T===void 0||T.call(g,this.attribname,this.attribvalue,b===i.QuoteType.Double?'"':b===i.QuoteType.Single?"'":b===i.QuoteType.NoValue?void 0:null),this.attribs&&!Object.prototype.hasOwnProperty.call(this.attribs,this.attribname)&&(this.attribs[this.attribname]=this.attribvalue),this.attribvalue=""}getInstructionName(b){const m=b.search(p);let g=m<0?b:b.substr(0,m);return this.lowerCaseTagNames&&(g=g.toLowerCase()),g}ondeclaration(b,m){this.endIndex=m;const g=this.getSlice(b,m);if(this.cbs.onprocessinginstruction){const T=this.getInstructionName(g);this.cbs.onprocessinginstruction(`!${T}`,`!${g}`)}this.startIndex=m+1}onprocessinginstruction(b,m){this.endIndex=m;const g=this.getSlice(b,m);if(this.cbs.onprocessinginstruction){const T=this.getInstructionName(g);this.cbs.onprocessinginstruction(`?${T}`,`?${g}`)}this.startIndex=m+1}oncomment(b,m,g){var T,v,S,F;this.endIndex=m,(v=(T=this.cbs).oncomment)===null||v===void 0||v.call(T,this.getSlice(b,m-g)),(F=(S=this.cbs).oncommentend)===null||F===void 0||F.call(S),this.startIndex=m+1}oncdata(b,m,g){var T,v,S,F,M,O,w,E,R,D;this.endIndex=m;const B=this.getSlice(b,m-g);!this.htmlMode||this.options.recognizeCDATA?((v=(T=this.cbs).oncdatastart)===null||v===void 0||v.call(T),(F=(S=this.cbs).ontext)===null||F===void 0||F.call(S,B),(O=(M=this.cbs).oncdataend)===null||O===void 0||O.call(M)):((E=(w=this.cbs).oncomment)===null||E===void 0||E.call(w,`[CDATA[${B}]]`),(D=(R=this.cbs).oncommentend)===null||D===void 0||D.call(R)),this.startIndex=m+1}onend(){var b,m;if(this.cbs.onclosetag){this.endIndex=this.startIndex;for(let g=0;g<this.stack.length;g++)this.cbs.onclosetag(this.stack[g],!0)}(m=(b=this.cbs).onend)===null||m===void 0||m.call(b)}reset(){var b,m,g,T;(m=(b=this.cbs).onreset)===null||m===void 0||m.call(b),this.tokenizer.reset(),this.tagname="",this.attribname="",this.attribs=null,this.stack.length=0,this.startIndex=0,this.endIndex=0,(T=(g=this.cbs).onparserinit)===null||T===void 0||T.call(g,this),this.buffers.length=0,this.foreignContext.length=0,this.foreignContext.unshift(!this.htmlMode),this.bufferOffset=0,this.writeIndex=0,this.ended=!1}parseComplete(b){this.reset(),this.end(b)}getSlice(b,m){for(;b-this.bufferOffset>=this.buffers[0].length;)this.shiftBuffer();let g=this.buffers[0].slice(b-this.bufferOffset,m-this.bufferOffset);for(;m-this.bufferOffset>this.buffers[0].length;)this.shiftBuffer(),g+=this.buffers[0].slice(0,m-this.bufferOffset);return g}shiftBuffer(){this.bufferOffset+=this.buffers[0].length,this.writeIndex--,this.buffers.shift()}write(b){var m,g;if(this.ended){(g=(m=this.cbs).onerror)===null||g===void 0||g.call(m,new Error(".write() after done!"));return}this.buffers.push(b),this.tokenizer.running&&(this.tokenizer.write(b),this.writeIndex++)}end(b){var m,g;if(this.ended){(g=(m=this.cbs).onerror)===null||g===void 0||g.call(m,new Error(".end() after done!"));return}b&&this.write(b),this.ended=!0,this.tokenizer.end()}pause(){this.tokenizer.pause()}resume(){for(this.tokenizer.resume();this.tokenizer.running&&this.writeIndex<this.buffers.length;)this.tokenizer.write(this.buffers[this.writeIndex++]);this.ended&&this.tokenizer.end()}parseChunk(b){this.write(b)}done(b){this.end(b)}};return Mn.Parser=y,Mn}var w5;function pte(){return w5||(w5=1,(function(u){var n=Ln&&Ln.__createBinding||(Object.create?(function(m,g,T,v){v===void 0&&(v=T);var S=Object.getOwnPropertyDescriptor(g,T);(!S||("get"in S?!g.__esModule:S.writable||S.configurable))&&(S={enumerable:!0,get:function(){return g[T]}}),Object.defineProperty(m,v,S)}):(function(m,g,T,v){v===void 0&&(v=T),m[v]=g[T]})),o=Ln&&Ln.__setModuleDefault||(Object.create?(function(m,g){Object.defineProperty(m,"default",{enumerable:!0,value:g})}):function(m,g){m.default=g}),i=Ln&&Ln.__importStar||(function(){var m=function(g){return m=Object.getOwnPropertyNames||function(T){var v=[];for(var S in T)Object.prototype.hasOwnProperty.call(T,S)&&(v[v.length]=S);return v},m(g)};return function(g){if(g&&g.__esModule)return g;var T={};if(g!=null)for(var v=m(g),S=0;S<v.length;S++)v[S]!=="default"&&n(T,g,v[S]);return o(T,g),T}})(),t=Ln&&Ln.__importDefault||function(m){return m&&m.__esModule?m:{default:m}};Object.defineProperty(u,"__esModule",{value:!0}),u.DomUtils=u.getFeed=u.ElementType=u.QuoteType=u.Tokenizer=u.DefaultHandler=u.DomHandler=u.Parser=void 0,u.parseDocument=s,u.parseDOM=d,u.createDocumentStream=l,u.createDomStream=f,u.parseFeed=b;const e=T5();var r=T5();Object.defineProperty(u,"Parser",{enumerable:!0,get:function(){return r.Parser}});const a=Yn();var c=Yn();Object.defineProperty(u,"DomHandler",{enumerable:!0,get:function(){return c.DomHandler}}),Object.defineProperty(u,"DefaultHandler",{enumerable:!0,get:function(){return c.DomHandler}});function s(m,g){const T=new a.DomHandler(void 0,g);return new e.Parser(T,g).end(m),T.root}function d(m,g){return s(m,g).children}function l(m,g,T){const v=new a.DomHandler(S=>m(S,v.root),g,T);return new e.Parser(v,g)}function f(m,g,T){const v=new a.DomHandler(m,g,T);return new e.Parser(v,g)}var h=m5();Object.defineProperty(u,"Tokenizer",{enumerable:!0,get:function(){return t(h).default}}),Object.defineProperty(u,"QuoteType",{enumerable:!0,get:function(){return h.QuoteType}}),u.ElementType=i(Of());const p=Af();var y=Af();Object.defineProperty(u,"getFeed",{enumerable:!0,get:function(){return y.getFeed}});const _={xmlMode:!0};function b(m,g=_){return(0,p.getFeed)(d(m,g))}u.DomUtils=i(Af())})(Ln)),Ln}var S5;function yte(){if(S5)return F1;S5=1,Object.defineProperty(F1,"__esModule",{value:!0}),F1.ActorRdfParseHtml=void 0;const u=mf(),n=pte(),o=Pt();class i extends u.ActorRdfParseFixedMediaTypes{constructor(e){super(e)}async runHandle(e,r,a){var p;const c=new o.Readable({objectMode:!0});c._read=()=>{};let s=0,d=1;function l(y){c.emit("error",y)}function f(){--d===0&&c.push(null)}const h={baseIRI:((p=e.metadata)==null?void 0:p.baseIRI)??"",context:a,emit:y=>{s--,c.push(y)},end:f,error:l,headers:e.headers};try{const y=await Promise.all(this.busRdfParseHtml.publish(h));d+=y.length;const _=[];for(const g of y){const{htmlParseListener:T}=await g.actor.run(h,void 0);_.push(T)}const b=new n.Parser({onclosetag(){try{for(const g of _)g.onTagClose()}catch(g){l(g)}},onend(){try{for(const g of _)g.onEnd()}catch(g){l(g)}f()},onopentag(g,T){try{for(const v of _)v.onTagOpen(g,T)}catch(v){l(v)}},ontext(g){try{for(const T of _)T.onText(g)}catch(T){l(T)}}},{decodeEntities:!0,recognizeSelfClosing:!0,xmlMode:!1}),m=c._read=g=>{for(s=Math.max(g,s);s>0;){const T=e.data.read();if(T===null){e.data.once("readable",()=>m(0));return}b.write(T.toString())}};e.data.on("error",l).on("end",()=>b.end())}catch(y){setTimeout(()=>{c.emit("error",y)})}return{data:c}}}return F1.ActorRdfParseHtml=i,F1}var O5;function bte(){return O5||(O5=1,(function(u){var n=fo&&fo.__createBinding||(Object.create?(function(i,t,e,r){r===void 0&&(r=e);var a=Object.getOwnPropertyDescriptor(t,e);(!a||("get"in a?!t.__esModule:a.writable||a.configurable))&&(a={enumerable:!0,get:function(){return t[e]}}),Object.defineProperty(i,r,a)}):(function(i,t,e,r){r===void 0&&(r=e),i[r]=t[e]})),o=fo&&fo.__exportStar||function(i,t){for(var e in i)e!=="default"&&!Object.prototype.hasOwnProperty.call(t,e)&&n(t,i,e)};Object.defineProperty(u,"__esModule",{value:!0}),o(yte(),u)})(fo)),fo}var ho={},D1={},po={},N1={},A5;function _te(){if(A5)return N1;A5=1,Object.defineProperty(N1,"__esModule",{value:!0}),N1.ActorRdfParseHtml=void 0;const u=pe();class n extends u.Actor{constructor(i){super(i)}}return N1.ActorRdfParseHtml=n,N1}var E5;function gte(){return E5||(E5=1,(function(u){var n=po&&po.__createBinding||(Object.create?(function(i,t,e,r){r===void 0&&(r=e);var a=Object.getOwnPropertyDescriptor(t,e);(!a||("get"in a?!t.__esModule:a.writable||a.configurable))&&(a={enumerable:!0,get:function(){return t[e]}}),Object.defineProperty(i,r,a)}):(function(i,t,e,r){r===void 0&&(r=e),i[r]=t[e]})),o=po&&po.__exportStar||function(i,t){for(var e in i)e!=="default"&&!Object.prototype.hasOwnProperty.call(t,e)&&n(t,i,e)};Object.defineProperty(u,"__esModule",{value:!0}),o(_te(),u)})(po)),po}var yo={},tE={},x5;function mte(){return x5||(x5=1,Object.defineProperty(tE,"__esModule",{value:!0})),tE}var j1={},R5;function F5(){if(R5)return j1;R5=1,Object.defineProperty(j1,"__esModule",{value:!0}),j1.ItemPropertyHandlerContent=void 0;let u=class{canHandle(o,i){return"content"in i}getObject(o,i,t){return i.createLiteral(o.content,t)}};return j1.ItemPropertyHandlerContent=u,j1}var L1={},M1={},I5;function M3(){if(I5)return M1;I5=1,Object.defineProperty(M1,"__esModule",{value:!0}),M1.Util=void 0;const u=hr(),n=Jr();class o{constructor(t,e){this.dataFactory=t||new u.DataFactory,this.baseIRI=e||""}static isValidIri(t){return o.IRI_REGEX.test(t)}createVocabIris(t,e,r){return t.split(/\s+/u).filter(a=>!!a).map(a=>{if(!o.isValidIri(a)){if(!r)return;a=`${e.vocab||`${this.baseIRI}#`}${a}`}return this.dataFactory.namedNode(a)}).filter(a=>!!a)}getVocabularyExpansionType(t,e,r){const a=t.split(/\s+/u);if(a.includes("subPropertyOf")||a.includes("equivalentProperty"))return[this.dataFactory.namedNode(`${o.RDF}type`)];if(e.vocab&&e.vocab in r&&r[e.vocab].properties){let c=[];for(const[s,d]of Object.entries(r[e.vocab].properties))a.includes(s)&&(c=[...Object.values(d).map(l=>this.dataFactory.namedNode(l))]);return c}return[]}createSubject(t){if(!o.isValidIri(t))try{t=(0,n.resolve)(t,this.baseIRI)}catch{return}return this.dataFactory.namedNode(t)}createLiteral(t,e){return this.dataFactory.literal(t,e.language)}deriveVocab(t,e){let r;for(const a in e)if(t.startsWith(a)){r=a,r.endsWith("/")||(r+="#");break}if(!r){const a=t.indexOf("#");a>0?r=t.slice(0,a+1):r=(0,n.resolve)(".",t)}return r}}return M1.Util=o,o.RDF="http://www.w3.org/1999/02/22-rdf-syntax-ns#",o.XSD="http://www.w3.org/2001/XMLSchema#",o.RDFA="http://www.w3.org/ns/rdfa#",o.IRI_REGEX=/^([A-Za-z][\d+-.A-Za-z]*|_):[^ "<>[\\\]`{|}]*$/u,M1}var P5;function D5(){if(P5)return L1;P5=1,Object.defineProperty(L1,"__esModule",{value:!0}),L1.ItemPropertyHandlerNumber=void 0;const u=M3();let n=class{constructor(i,t){this.tagName=i,this.attributeName=t}canHandle(i,t){return this.tagName===i&&this.attributeName in t}getObject(i,t,e){const r=i[this.attributeName];let a;return!Number.isNaN(Number.parseInt(r,10))&&!r.includes(".")?a=`${u.Util.XSD}integer`:Number.isNaN(Number.parseFloat(r))||(a=`${u.Util.XSD}double`),t.dataFactory.literal(r,a&&t.dataFactory.namedNode(a))}};return L1.ItemPropertyHandlerNumber=n,L1}var q1={},N5;function j5(){if(N5)return q1;N5=1,Object.defineProperty(q1,"__esModule",{value:!0}),q1.ItemPropertyHandlerTime=void 0;const u=M3();let n=class sJ{canHandle(i,t){return i==="time"&&"datetime"in t}getObject(i,t,e){const r=i.datetime;let a;for(const c of sJ.TIME_REGEXES)if(c.regex.test(r)){a=t.dataFactory.namedNode(u.Util.XSD+c.type);break}return t.dataFactory.literal(r,a)}};return q1.ItemPropertyHandlerTime=n,n.TIME_REGEXES=[{regex:/^-?P(\d+Y)?(\d+M)?(\d+D)?(T(\d+H)?(\d+M)?(\d+(\.\d)?S)?)?$/u,type:"duration"},{regex:/^\d+-\d\d-\d\dT\d\d:\d\d:\d\d((Z?)|([+-]\d\d:\d\d))$/u,type:"dateTime"},{regex:/^\d+-\d\d-\d\dZ?$/u,type:"date"},{regex:/^\d\d:\d\d:\d\d((Z?)|([+-]\d\d:\d\d))$/u,type:"time"},{regex:/^\d+-\d\d$/u,type:"gYearMonth"},{regex:/^\d+$/u,type:"gYear"}],q1}var C1={},L5;function M5(){if(L5)return C1;L5=1,Object.defineProperty(C1,"__esModule",{value:!0}),C1.ItemPropertyHandlerUrl=void 0;const u=Jr();let n=class{constructor(i,t){this.tagName=i,this.attributeName=t}canHandle(i,t){return this.tagName===i&&this.attributeName in t}getObject(i,t,e){return t.dataFactory.namedNode((0,u.resolve)(i[this.attributeName],t.baseIRI))}};return C1.ItemPropertyHandlerUrl=n,C1}var rE={},q5;function vte(){return q5||(q5=1,Object.defineProperty(rE,"__esModule",{value:!0})),rE}var nE={},C5;function Tte(){return C5||(C5=1,Object.defineProperty(nE,"__esModule",{value:!0})),nE}var iE={},B5;function wte(){return B5||(B5=1,Object.defineProperty(iE,"__esModule",{value:!0})),iE}var B1={},Ste={"http://schema.org/":{properties:{additionalType:{subPropertyOf:"http://www.w3.org/1999/02/22-rdf-syntax-ns#type"}}},"http://microformats.org/profile/hcard":{}},$5;function Ote(){if($5)return B1;$5=1,Object.defineProperty(B1,"__esModule",{value:!0}),B1.MicrodataRdfParser=void 0;const u=Xj(),n=Pt(),o=F5(),i=D5(),t=j5(),e=M5(),r=M3(),a=Ste;let c=class Rx extends n.Transform{constructor(d){super({readableObjectMode:!0}),this.itemScopeStack=[],this.textBufferStack=[],this.isEmittingReferences=!1,this.pendingItemRefsDomain={},this.pendingItemRefsRangeFinalized={},this.pendingItemRefsRangeCollecting={},d=d||{},this.options=d,this.util=new r.Util(d.dataFactory,d.baseIRI),this.defaultGraph=d.defaultGraph||this.util.dataFactory.defaultGraph(),this.htmlParseListener=d.htmlParseListener,this.vocabRegistry=d.vocabRegistry||a,this.parser=this.initializeParser(!!d.xmlMode)}import(d){const l=new n.PassThrough({readableObjectMode:!0});d.on("error",h=>f.emit("error",h)),d.on("data",h=>l.push(h)),d.on("end",()=>l.push(null));const f=l.pipe(new Rx(this.options));return f}_transform(d,l,f){this.parser.write(d.toString()),f()}_flush(d){this.parser.end(),d()}getItemScope(d){let l=this.itemScopeStack.length-(d?2:1);for(;l>0&&!this.itemScopeStack[l];)l--;return this.itemScopeStack[l]}getDepth(){return this.itemScopeStack.length}onTagOpen(d,l){if(!this.isEmittingReferences){if("id"in l){const h=l.id;this.pendingItemRefsRangeCollecting[h]={events:[],counter:0,ids:[]}}for(const h of Object.values(this.pendingItemRefsRangeCollecting))h.counter++,h.events.push({type:"open",name:d,attributes:l})}this.textBufferStack.push(void 0);let f;if("itemscope"in l){let h;if(this.emittingReferencesItemScopeIdGenerator)h=this.emittingReferencesItemScopeIdGenerator();else{h="itemid"in l&&this.util.createSubject(l.itemid)||this.util.dataFactory.blankNode();for(const y of Object.values(this.pendingItemRefsRangeCollecting))y.ids.push(h)}f={subject:h},this.isEmittingReferences&&(f.blockEmission=!0);const p=this.getItemScope();p&&p.vocab&&(f.vocab=p.vocab),this.itemScopeStack.push(f)}else f=this.getItemScope(),this.itemScopeStack.push(void 0);if(f){if("itemtype"in l)for(const h of this.util.createVocabIris(l.itemtype,f,!1))f.vocab||(f.vocab=this.util.deriveVocab(h.value,this.vocabRegistry)),f.blockEmission||this.emitTriple(f.subject,this.util.dataFactory.namedNode(`${r.Util.RDF}type`),h);if("lang"in l&&(f.language=l.lang),"xml:lang"in l&&(f.language=l["xml:lang"]),"itemscope"in l&&!this.isEmittingReferences&&"itemref"in l)for(const h of l.itemref.split(/\s+/u))h in this.pendingItemRefsDomain||(this.pendingItemRefsDomain[h]=[]),this.pendingItemRefsDomain[h].push(f),this.tryToEmitReferences(h,f)}"itemprop"in l&&this.handleItemProperties(l.itemprop,!1,f,d,l),"itemprop-reverse"in l&&this.handleItemProperties(l["itemprop-reverse"],!0,f,d,l)}onText(d){if(!this.isEmittingReferences)for(const l of Object.values(this.pendingItemRefsRangeCollecting))l.events.push({type:"text",data:d});for(const l of this.textBufferStack)l&&l.push(d)}onTagClose(){if(!this.isEmittingReferences)for(const[l,f]of Object.entries(this.pendingItemRefsRangeCollecting))f.counter--,f.events.push({type:"close"}),f.counter===0&&(this.pendingItemRefsRangeFinalized[l]=f,delete this.pendingItemRefsRangeCollecting[l],this.tryToEmitReferences(l));const d=this.getItemScope(!0);if(d){const l=this.getDepth();if(d.predicates&&l in d.predicates)for(const[f,h]of Object.entries(d.predicates[l])){const p=this.util.createLiteral(this.textBufferStack[l].join(""),d);this.emitPredicateTriples(d,h,p,f==="reverse"),delete d.predicates[l][f]}}this.itemScopeStack.pop(),this.textBufferStack.pop()}onEnd(){}initializeParser(d){return new u.Parser({onclosetag:()=>{try{this.onTagClose(),this.htmlParseListener&&this.htmlParseListener.onTagClose()}catch(l){this.emit("error",l)}},onend:()=>{try{this.onEnd(),this.htmlParseListener&&this.htmlParseListener.onEnd()}catch(l){this.emit("error",l)}},onopentag:(l,f)=>{try{this.onTagOpen(l,f),this.htmlParseListener&&this.htmlParseListener.onTagOpen(l,f)}catch(h){this.emit("error",h)}},ontext:l=>{try{this.onText(l),this.htmlParseListener&&this.htmlParseListener.onText(l)}catch(f){this.emit("error",f)}}},{decodeEntities:!0,recognizeSelfClosing:!0,xmlMode:d})}handleItemProperties(d,l,f,h,p){const y=this.getItemScope(!0);if(y){const _=this.getDepth(),b=this.util.createVocabIris(d,y,!0);y.predicates||(y.predicates={}),y.predicates[_]||(y.predicates[_]={});const m=l?"reverse":"forward";y.predicates[_][m]=b;for(const g of this.util.getVocabularyExpansionType(d,y,this.vocabRegistry))b.push(g);if(f&&"itemscope"in p)this.emitPredicateTriples(y,b,f.subject,l),delete y.predicates[_][m];else for(const g of Rx.ITEM_PROPERTY_HANDLERS)if(g.canHandle(h,p)){const T=g.getObject(p,this.util,y);this.emitPredicateTriples(y,b,T,l),delete y.predicates[_][m]}y.predicates[_][m]&&(this.textBufferStack[_]=[])}}emitPredicateTriples(d,l,f,h){if(!d.blockEmission)for(const p of l)h?f.termType!=="Literal"&&this.emitTriple(f,p,d.subject):this.emitTriple(d.subject,p,f)}emitTriple(d,l,f){this.push(this.util.dataFactory.quad(d,l,f,this.defaultGraph))}tryToEmitReferences(d,l){const f=this.pendingItemRefsRangeFinalized[d];if(f){let h;if(l){h=[l];const p=this.pendingItemRefsDomain[d].indexOf(l);this.pendingItemRefsDomain[d].splice(p,1)}else h=this.pendingItemRefsDomain[d],delete this.pendingItemRefsDomain[d];if(h){const p=this.itemScopeStack,y=this.textBufferStack;this.isEmittingReferences=!0;for(const _ of h){this.itemScopeStack=[_],this.textBufferStack=[void 0];const b=[...f.ids];this.emittingReferencesItemScopeIdGenerator=()=>b.shift();for(const m of f.events)switch(m.type){case"open":this.onTagOpen(m.name,m.attributes);break;case"text":this.onText(m.data);break;case"close":this.onTagClose();break}}this.emittingReferencesItemScopeIdGenerator=void 0,this.itemScopeStack=p,this.textBufferStack=y,this.isEmittingReferences=!1}}}};return B1.MicrodataRdfParser=c,c.ITEM_PROPERTY_HANDLERS=[new o.ItemPropertyHandlerContent,new e.ItemPropertyHandlerUrl("a","href"),new e.ItemPropertyHandlerUrl("area","href"),new e.ItemPropertyHandlerUrl("audio","src"),new e.ItemPropertyHandlerUrl("embed","src"),new e.ItemPropertyHandlerUrl("iframe","src"),new e.ItemPropertyHandlerUrl("img","src"),new e.ItemPropertyHandlerUrl("link","href"),new e.ItemPropertyHandlerUrl("object","data"),new e.ItemPropertyHandlerUrl("source","src"),new e.ItemPropertyHandlerUrl("track","src"),new e.ItemPropertyHandlerUrl("video","src"),new i.ItemPropertyHandlerNumber("data","value"),new i.ItemPropertyHandlerNumber("meter","value"),new t.ItemPropertyHandlerTime],B1}var U5;function Ate(){return U5||(U5=1,(function(u){var n=yo&&yo.__createBinding||(Object.create?(function(i,t,e,r){r===void 0&&(r=e);var a=Object.getOwnPropertyDescriptor(t,e);(!a||("get"in a?!t.__esModule:a.writable||a.configurable))&&(a={enumerable:!0,get:function(){return t[e]}}),Object.defineProperty(i,r,a)}):(function(i,t,e,r){r===void 0&&(r=e),i[r]=t[e]})),o=yo&&yo.__exportStar||function(i,t){for(var e in i)e!=="default"&&!Object.prototype.hasOwnProperty.call(t,e)&&n(t,i,e)};Object.defineProperty(u,"__esModule",{value:!0}),o(mte(),u),o(F5(),u),o(D5(),u),o(j5(),u),o(M5(),u),o(vte(),u),o(Tte(),u),o(wte(),u),o(Ote(),u),o(M3(),u)})(yo)),yo}var V5;function Ete(){if(V5)return D1;V5=1,Object.defineProperty(D1,"__esModule",{value:!0}),D1.ActorRdfParseHtmlMicrodata=void 0;const u=gte(),n=qe(),o=pe(),i=Ate();let t=class extends u.ActorRdfParseHtml{constructor(r){super(r)}async test(r){return(0,o.passTestVoid)()}async run(r){const a=r.context.getSafe(n.KeysInitQuery.dataFactory),c=r.headers?r.headers.get("content-type"):null,s=c==null?void 0:c.includes("xml"),d=new i.MicrodataRdfParser({dataFactory:a,baseIRI:r.baseIRI,xmlMode:s});d.on("error",r.error),d.on("data",r.emit);const l=d.onEnd;return d.onEnd=()=>{l.call(d),r.end()},{htmlParseListener:d}}};return D1.ActorRdfParseHtmlMicrodata=t,D1}var Q5;function xte(){return Q5||(Q5=1,(function(u){var n=ho&&ho.__createBinding||(Object.create?(function(i,t,e,r){r===void 0&&(r=e);var a=Object.getOwnPropertyDescriptor(t,e);(!a||("get"in a?!t.__esModule:a.writable||a.configurable))&&(a={enumerable:!0,get:function(){return t[e]}}),Object.defineProperty(i,r,a)}):(function(i,t,e,r){r===void 0&&(r=e),i[r]=t[e]})),o=ho&&ho.__exportStar||function(i,t){for(var e in i)e!=="default"&&!Object.prototype.hasOwnProperty.call(t,e)&&n(t,i,e)};Object.defineProperty(u,"__esModule",{value:!0}),o(Ete(),u)})(ho)),ho}var bo={},$1={},_o={},U1={},H5;function Rte(){if(H5)return U1;H5=1,Object.defineProperty(U1,"__esModule",{value:!0}),U1.ActorRdfParseHtml=void 0;const u=pe();class n extends u.Actor{constructor(i){super(i)}}return U1.ActorRdfParseHtml=n,U1}var G5;function Fte(){return G5||(G5=1,(function(u){var n=_o&&_o.__createBinding||(Object.create?(function(i,t,e,r){r===void 0&&(r=e);var a=Object.getOwnPropertyDescriptor(t,e);(!a||("get"in a?!t.__esModule:a.writable||a.configurable))&&(a={enumerable:!0,get:function(){return t[e]}}),Object.defineProperty(i,r,a)}):(function(i,t,e,r){r===void 0&&(r=e),i[r]=t[e]})),o=_o&&_o.__exportStar||function(i,t){for(var e in i)e!=="default"&&!Object.prototype.hasOwnProperty.call(t,e)&&n(t,i,e)};Object.defineProperty(u,"__esModule",{value:!0}),o(Rte(),u)})(_o)),_o}var z5;function Ite(){if(z5)return $1;z5=1,Object.defineProperty($1,"__esModule",{value:!0}),$1.ActorRdfParseHtmlRdfa=void 0;const u=Fte(),n=qe(),o=pe(),i=Zj();let t=class extends u.ActorRdfParseHtml{constructor(r){super(r)}async test(r){return(0,o.passTestVoid)()}async run(r){const a=r.context.getSafe(n.KeysInitQuery.dataFactory),c=r.headers?r.headers.get("content-type"):null,s=(r.headers&&r.headers.get("content-language"))??void 0,d=c&&c.includes("xml")?"xhtml":"html",l=new i.RdfaParser({dataFactory:a,baseIRI:r.baseIRI,profile:d,language:s});l.on("error",r.error),l.on("data",r.emit);const f=l.onEnd;return l.onEnd=()=>{f.call(l),r.end()},{htmlParseListener:l}}};return $1.ActorRdfParseHtmlRdfa=t,$1}var X5;function Pte(){return X5||(X5=1,(function(u){var n=bo&&bo.__createBinding||(Object.create?(function(i,t,e,r){r===void 0&&(r=e);var a=Object.getOwnPropertyDescriptor(t,e);(!a||("get"in a?!t.__esModule:a.writable||a.configurable))&&(a={enumerable:!0,get:function(){return t[e]}}),Object.defineProperty(i,r,a)}):(function(i,t,e,r){r===void 0&&(r=e),i[r]=t[e]})),o=bo&&bo.__exportStar||function(i,t){for(var e in i)e!=="default"&&!Object.prototype.hasOwnProperty.call(t,e)&&n(t,i,e)};Object.defineProperty(u,"__esModule",{value:!0}),o(Ite(),u)})(bo)),bo}var go={},V1={},mo={},Q1={},J5;function Dte(){if(J5)return Q1;J5=1,Object.defineProperty(Q1,"__esModule",{value:!0}),Q1.ActorRdfResolveHypermediaLinks=void 0;const u=pe();let n=class extends u.Actor{constructor(i){super(i)}};return Q1.ActorRdfResolveHypermediaLinks=n,Q1}var K5;function Nte(){return K5||(K5=1,(function(u){var n=mo&&mo.__createBinding||(Object.create?(function(i,t,e,r){r===void 0&&(r=e);var a=Object.getOwnPropertyDescriptor(t,e);(!a||("get"in a?!t.__esModule:a.writable||a.configurable))&&(a={enumerable:!0,get:function(){return t[e]}}),Object.defineProperty(i,r,a)}):(function(i,t,e,r){r===void 0&&(r=e),i[r]=t[e]})),o=mo&&mo.__exportStar||function(i,t){for(var e in i)e!=="default"&&!Object.prototype.hasOwnProperty.call(t,e)&&n(t,i,e)};Object.defineProperty(u,"__esModule",{value:!0}),o(Dte(),u)})(mo)),mo}var k5;function jte(){if(k5)return V1;k5=1,Object.defineProperty(V1,"__esModule",{value:!0}),V1.ActorRdfResolveHypermediaLinksNext=void 0;const u=Nte(),n=pe();let o=class extends u.ActorRdfResolveHypermediaLinks{constructor(t){super(t)}async test(t){return!t.metadata.next||t.metadata.next.length===0?(0,n.failTest)(`Actor ${this.name} requires a 'next' metadata entry.`):(0,n.passTestVoid)()}async run(t){return{links:t.metadata.next.map(e=>({url:e}))}}};return V1.ActorRdfResolveHypermediaLinksNext=o,V1}var W5;function Lte(){return W5||(W5=1,(function(u){var n=go&&go.__createBinding||(Object.create?(function(i,t,e,r){r===void 0&&(r=e);var a=Object.getOwnPropertyDescriptor(t,e);(!a||("get"in a?!t.__esModule:a.writable||a.configurable))&&(a={enumerable:!0,get:function(){return t[e]}}),Object.defineProperty(i,r,a)}):(function(i,t,e,r){r===void 0&&(r=e),i[r]=t[e]})),o=go&&go.__exportStar||function(i,t){for(var e in i)e!=="default"&&!Object.prototype.hasOwnProperty.call(t,e)&&n(t,i,e)};Object.defineProperty(u,"__esModule",{value:!0}),o(jte(),u)})(go)),go}var vo={},H1={},To={},G1={},Y5;function Mte(){if(Y5)return G1;Y5=1,Object.defineProperty(G1,"__esModule",{value:!0}),G1.ActorRdfResolveHypermediaLinksQueue=void 0;const u=pe();let n=class extends u.Actor{constructor(i){super(i)}};return G1.ActorRdfResolveHypermediaLinksQueue=n,G1}var aE={},Z5;function qte(){return Z5||(Z5=1,Object.defineProperty(aE,"__esModule",{value:!0})),aE}var z1={},e9;function Cte(){if(e9)return z1;e9=1,Object.defineProperty(z1,"__esModule",{value:!0}),z1.LinkQueueWrapper=void 0;let u=class{constructor(o){this.linkQueue=o}push(o,i){return this.linkQueue.push(o,i)}getSize(){return this.linkQueue.getSize()}isEmpty(){return this.linkQueue.isEmpty()}pop(){return this.linkQueue.pop()}peek(){return this.linkQueue.peek()}};return z1.LinkQueueWrapper=u,z1}var t9;function Bte(){return t9||(t9=1,(function(u){var n=To&&To.__createBinding||(Object.create?(function(i,t,e,r){r===void 0&&(r=e);var a=Object.getOwnPropertyDescriptor(t,e);(!a||("get"in a?!t.__esModule:a.writable||a.configurable))&&(a={enumerable:!0,get:function(){return t[e]}}),Object.defineProperty(i,r,a)}):(function(i,t,e,r){r===void 0&&(r=e),i[r]=t[e]})),o=To&&To.__exportStar||function(i,t){for(var e in i)e!=="default"&&!Object.prototype.hasOwnProperty.call(t,e)&&n(t,i,e)};Object.defineProperty(u,"__esModule",{value:!0}),o(Mte(),u),o(qte(),u),o(Cte(),u)})(To)),To}var X1={},r9;function n9(){if(r9)return X1;r9=1,Object.defineProperty(X1,"__esModule",{value:!0}),X1.LinkQueueFifo=void 0;let u=class{constructor(){this.links=[]}push(o){return this.links.push(o),!0}getSize(){return this.links.length}isEmpty(){return this.links.length===0}pop(){return this.links.shift()}peek(){return this.links[0]}};return X1.LinkQueueFifo=u,X1}var i9;function $te(){if(i9)return H1;i9=1,Object.defineProperty(H1,"__esModule",{value:!0}),H1.ActorRdfResolveHypermediaLinksQueueFifo=void 0;const u=Bte(),n=pe(),o=n9();let i=class extends u.ActorRdfResolveHypermediaLinksQueue{constructor(e){super(e)}async test(e){return(0,n.passTestVoid)()}async run(e){return{linkQueue:new o.LinkQueueFifo}}};return H1.ActorRdfResolveHypermediaLinksQueueFifo=i,H1}var a9;function Ute(){return a9||(a9=1,(function(u){var n=vo&&vo.__createBinding||(Object.create?(function(i,t,e,r){r===void 0&&(r=e);var a=Object.getOwnPropertyDescriptor(t,e);(!a||("get"in a?!t.__esModule:a.writable||a.configurable))&&(a={enumerable:!0,get:function(){return t[e]}}),Object.defineProperty(i,r,a)}):(function(i,t,e,r){r===void 0&&(r=e),i[r]=t[e]})),o=vo&&vo.__exportStar||function(i,t){for(var e in i)e!=="default"&&!Object.prototype.hasOwnProperty.call(t,e)&&n(t,i,e)};Object.defineProperty(u,"__esModule",{value:!0}),o($te(),u),o(n9(),u)})(vo)),vo}var wo={},J1={},So={},K1={},u9;function Vte(){if(u9)return K1;u9=1,Object.defineProperty(K1,"__esModule",{value:!0}),K1.ActorRdfSerialize=void 0;const u=yf();let n=class extends u.ActorAbstractMediaTyped{constructor(i){super(i)}};return K1.ActorRdfSerialize=n,K1}var k1={},o9;function Qte(){if(o9)return k1;o9=1,Object.defineProperty(k1,"__esModule",{value:!0}),k1.ActorRdfSerializeFixedMediaTypes=void 0;const u=yf(),n=pe();let o=class extends u.ActorAbstractMediaTypedFixed{constructor(t){super(t)}async testHandleChecked(){return(0,n.passTestVoid)()}};return k1.ActorRdfSerializeFixedMediaTypes=o,k1}var s9;function uE(){return s9||(s9=1,(function(u){var n=So&&So.__createBinding||(Object.create?(function(i,t,e,r){r===void 0&&(r=e);var a=Object.getOwnPropertyDescriptor(t,e);(!a||("get"in a?!t.__esModule:a.writable||a.configurable))&&(a={enumerable:!0,get:function(){return t[e]}}),Object.defineProperty(i,r,a)}):(function(i,t,e,r){r===void 0&&(r=e),i[r]=t[e]})),o=So&&So.__exportStar||function(i,t){for(var e in i)e!=="default"&&!Object.prototype.hasOwnProperty.call(t,e)&&n(t,i,e)};Object.defineProperty(u,"__esModule",{value:!0}),o(Vte(),u),o(Qte(),u)})(So)),So}var c9;function Hte(){if(c9)return J1;c9=1,Object.defineProperty(J1,"__esModule",{value:!0}),J1.ActorRdfSerializeN3=void 0;const u=uE(),n=Xi;let o=class extends u.ActorRdfSerializeFixedMediaTypes{constructor(t){super(t)}async runHandle(t,e){const r=new n.StreamWriter({format:e});let a;return"pipe"in t.quadStream?(t.quadStream.on("error",c=>r.emit("error",c)),a=t.quadStream.pipe(r)):a=r.import(t.quadStream),{data:a,triples:e==="text/turtle"||e==="application/n-triples"||e==="text/n3"}}};return J1.ActorRdfSerializeN3=o,J1}var d9;function Gte(){return d9||(d9=1,(function(u){var n=wo&&wo.__createBinding||(Object.create?(function(i,t,e,r){r===void 0&&(r=e);var a=Object.getOwnPropertyDescriptor(t,e);(!a||("get"in a?!t.__esModule:a.writable||a.configurable))&&(a={enumerable:!0,get:function(){return t[e]}}),Object.defineProperty(i,r,a)}):(function(i,t,e,r){r===void 0&&(r=e),i[r]=t[e]})),o=wo&&wo.__exportStar||function(i,t){for(var e in i)e!=="default"&&!Object.prototype.hasOwnProperty.call(t,e)&&n(t,i,e)};Object.defineProperty(u,"__esModule",{value:!0}),o(Hte(),u)})(wo)),wo}var Oo={},W1={},Ao={},Y1={},Z1={},l9;function zte(){if(l9)return Z1;l9=1,Object.defineProperty(Z1,"__esModule",{value:!0}),Z1.SeparatorType=void 0;let u=class{constructor(o){this.label=o}};return Z1.SeparatorType=u,u.COMMA=new u(","),u.OBJECT_START=new u("{"),u.OBJECT_END=new u("}"),u.OBJECT_END_COMMA=new u("},"),u.ARRAY_START=new u("["),u.ARRAY_END=new u("]"),u.ARRAY_END_COMMA=new u("],"),u.GRAPH_FIELD_NONCOMPACT=new u('"@graph": ['),u.GRAPH_FIELD_COMPACT=new u('"@graph":['),u.CONTEXT_FIELD=new u('"@context":'),Z1}var ey={},f9;function h9(){if(f9)return ey;f9=1,Object.defineProperty(ey,"__esModule",{value:!0}),ey.Util=void 0;const u=wr();class n{static termToValue(i,t,e={compactIds:!1,useNativeTypes:!1}){switch(i.termType){case"NamedNode":const r=t.compactIri(i.value,e.vocab);return e.compactIds?r:{"@id":r};case"DefaultGraph":return e.compactIds?i.value:{"@id":i.value};case"BlankNode":const a=`_:${i.value}`;return e.compactIds?a:{"@id":a};case"Literal":if(i.datatype.value===n.RDF_JSON){let d;try{d=JSON.parse(i.value)}catch(l){throw new u.ErrorCoded("Invalid JSON literal: "+l.message,u.ERROR_CODES.INVALID_JSON_LITERAL)}return{"@value":d,"@type":"@json"}}if(e.rdfDirection==="i18n-datatype"&&i.datatype.value.startsWith(n.I18N)){const[d,l]=i.datatype.value.substr(n.I18N.length,i.datatype.value.length).split("_");return Object.assign(Object.assign({"@value":i.value},d?{"@language":d}:{}),l?{"@direction":l}:{})}const c=i.datatype.value===n.XSD_STRING,s={"@value":!c&&e.useNativeTypes?n.stringToNativeType(i.value,i.datatype.value):i.value};return i.language?Object.assign(Object.assign({},s),{"@language":i.language}):!c&&typeof s["@value"]=="string"?Object.assign(Object.assign({},s),{"@type":i.datatype.value}):s}}static stringToNativeType(i,t){if(t.startsWith(n.XSD))switch(t.substr(n.XSD.length)){case"boolean":if(i==="true")return!0;if(i==="false")return!1;throw new Error(`Invalid xsd:boolean value '${i}'`);case"integer":case"number":case"int":case"byte":case"long":const r=parseInt(i,10);if(isNaN(r))throw new Error(`Invalid xsd:integer value '${i}'`);return r;case"float":case"double":const a=parseFloat(i);if(isNaN(a))throw new Error(`Invalid xsd:float value '${i}'`);return a}return i}}return ey.Util=n,n.XSD="http://www.w3.org/2001/XMLSchema#",n.XSD_STRING=n.XSD+"string",n.RDF="http://www.w3.org/1999/02/22-rdf-syntax-ns#",n.RDF_TYPE=n.RDF+"type",n.RDF_JSON=n.RDF+"JSON",n.I18N="https://www.w3.org/ns/i18n#",ey}var p9;function Xte(){if(p9)return Y1;p9=1,Object.defineProperty(Y1,"__esModule",{value:!0}),Y1.JsonLdSerializer=void 0;const u=wr(),n=zte(),o=h9(),i=Pt();let t=class cJ extends i.Transform{constructor(r={}){super({objectMode:!0}),this.indentation=0,this.options=r,this.options.baseIRI&&!this.options.context&&(this.options.context={"@base":this.options.baseIRI}),this.options.context?(this.originalContext=this.options.context,this.context=new u.ContextParser().parse(this.options.context,{baseIRI:this.options.baseIRI})):this.context=Promise.resolve(new u.JsonLdContextNormalized({}))}import(r){const a=new i.PassThrough({objectMode:!0});r.on("error",s=>c.emit("error",s)),r.on("data",s=>a.push(s)),r.on("end",()=>a.push(null));const c=a.pipe(new cJ(this.options));return c}_transform(r,a,c){this.context.then(s=>{this.transformQuad(r,s),c()}).catch(c)}async list(r){const a=await this.context;return{"@list":r.map(c=>o.Util.termToValue(c,a,this.options))}}_flush(r){return this.opened||this.pushDocumentStart(),this.lastPredicate&&this.endPredicate(),this.lastSubject&&this.endSubject(),this.lastGraph&&this.lastGraph.termType!=="DefaultGraph"&&this.endGraph(),this.endDocument(),r(null,null)}transformQuad(r,a){this.opened||this.pushDocumentStart();const c=this.lastGraph&&this.lastGraph.termType!=="DefaultGraph"&&this.lastGraph.equals(r.subject);if(!c&&(!this.lastGraph||!r.graph.equals(this.lastGraph))){let s=r.graph.termType!=="DefaultGraph"&&this.lastSubject&&this.lastSubject.equals(r.graph);this.lastGraph&&(this.lastGraph.termType!=="DefaultGraph"?(this.endPredicate(),this.endSubject(),this.endGraph(!0),s=!1):s?(this.endPredicate(!0),this.lastSubject=null):(this.endPredicate(),this.endSubject(!0))),r.graph.termType!=="DefaultGraph"&&(s||this.pushId(r.graph,!0,a),this.pushSeparator(this.options.space?n.SeparatorType.GRAPH_FIELD_NONCOMPACT:n.SeparatorType.GRAPH_FIELD_COMPACT),this.indentation++),this.lastGraph=r.graph}(!this.lastSubject||!r.subject.equals(this.lastSubject))&&(c?(this.endPredicate(),this.endSubject(),this.indentation--,this.pushSeparator(n.SeparatorType.ARRAY_END_COMMA),this.lastGraph=r.graph):(this.lastSubject&&(this.endPredicate(),this.endSubject(!0)),this.pushId(r.subject,!0,a)),this.lastSubject=r.subject),(!this.lastPredicate||!r.predicate.equals(this.lastPredicate))&&(this.lastPredicate&&this.endPredicate(!0),this.pushPredicate(r.predicate,a)),this.pushObject(r.object,a)}pushDocumentStart(){this.opened=!0,this.originalContext&&!this.options.excludeContext?(this.pushSeparator(n.SeparatorType.OBJECT_START),this.indentation++,this.pushSeparator(n.SeparatorType.CONTEXT_FIELD),this.pushIndented(JSON.stringify(this.originalContext,null,this.options.space)+","),this.pushSeparator(this.options.space?n.SeparatorType.GRAPH_FIELD_NONCOMPACT:n.SeparatorType.GRAPH_FIELD_COMPACT),this.indentation++):(this.pushSeparator(n.SeparatorType.ARRAY_START),this.indentation++)}pushId(r,a,c){if(r.termType==="Quad")this.pushNestedQuad(r,!0,c);else{const s=r.termType==="BlankNode"?"_:"+r.value:c.compactIri(r.value,!1);a?this.pushSeparator(n.SeparatorType.OBJECT_START):(this.push(n.SeparatorType.OBJECT_START.label),this.options.space&&this.push(`
`)),this.indentation++,this.pushIndented(this.options.space?`"@id": "${s}",`:`"@id":"${s}",`)}}pushPredicate(r,a){let c=r.value;!this.options.useRdfType&&c===o.Util.RDF_TYPE&&(c="@type",this.objectOptions=Object.assign(Object.assign({},this.options),{compactIds:!0,vocab:!0}));const s=a.compactIri(c,!0);this.pushIndented(this.options.space?`"${s}": [`:`"${s}":[`),this.indentation++,this.lastPredicate=r}pushObject(r,a){if(this.hadObjectForPredicate?this.pushSeparator(n.SeparatorType.COMMA):this.hadObjectForPredicate=!0,r.termType==="Quad"){const s=this.lastSubject,d=this.lastPredicate;this.hadObjectForPredicate=!1,this.pushNestedQuad(r,!1,a),this.endSubject(!1),this.hadObjectForPredicate=!0,this.lastPredicate=d,this.lastSubject=s;return}let c;try{r["@list"]?c=r:c=o.Util.termToValue(r,a,this.objectOptions||this.options)}catch(s){return this.emit("error",s)}this.pushIndented(JSON.stringify(c,null,this.options.space))}pushNestedQuad(r,a,c){this.pushSeparator(n.SeparatorType.OBJECT_START),this.indentation++,this.pushIndented(this.options.space?'"@id": ':'"@id":',!1),r.graph.termType!=="DefaultGraph"&&this.emit("error",new Error(`Found a nested quad with the non-default graph: ${r.graph.value}`)),this.pushId(r.subject,!1,c),this.pushPredicate(r.predicate,c),this.pushObject(r.object,c),this.endPredicate(!1),this.endSubject(a)}endDocument(){this.opened=!1,this.originalContext&&!this.options.excludeContext?(this.indentation--,this.pushSeparator(n.SeparatorType.ARRAY_END),this.indentation--,this.pushSeparator(n.SeparatorType.OBJECT_END)):(this.indentation--,this.pushSeparator(n.SeparatorType.ARRAY_END))}endPredicate(r){this.indentation--,this.pushSeparator(r?n.SeparatorType.ARRAY_END_COMMA:n.SeparatorType.ARRAY_END),this.hadObjectForPredicate=!1,this.objectOptions=null,this.lastPredicate=null}endSubject(r){this.indentation--,this.pushSeparator(r?n.SeparatorType.OBJECT_END_COMMA:n.SeparatorType.OBJECT_END),this.lastSubject=null}endGraph(r){this.indentation--,this.pushSeparator(n.SeparatorType.ARRAY_END),this.indentation--,this.pushSeparator(r?n.SeparatorType.OBJECT_END_COMMA:n.SeparatorType.OBJECT_END),this.lastGraph=null}pushSeparator(r){this.pushIndented(r.label)}pushIndented(r,a=!0){const c=this.getIndentPrefix(),s=r.split(`
`).map(d=>c+d).join(`
`);this.push(s),this.options.space&&a&&this.push(`
`)}getIndentPrefix(){return this.options.space?this.options.space.repeat(this.indentation):""}};return Y1.JsonLdSerializer=t,Y1}var y9;function Jte(){return y9||(y9=1,(function(u){var n=Ao&&Ao.__createBinding||(Object.create?(function(i,t,e,r){r===void 0&&(r=e);var a=Object.getOwnPropertyDescriptor(t,e);(!a||("get"in a?!t.__esModule:a.writable||a.configurable))&&(a={enumerable:!0,get:function(){return t[e]}}),Object.defineProperty(i,r,a)}):(function(i,t,e,r){r===void 0&&(r=e),i[r]=t[e]})),o=Ao&&Ao.__exportStar||function(i,t){for(var e in i)e!=="default"&&!Object.prototype.hasOwnProperty.call(t,e)&&n(t,i,e)};Object.defineProperty(u,"__esModule",{value:!0}),o(Xte(),u),o(h9(),u)})(Ao)),Ao}var b9;function Kte(){if(b9)return W1;b9=1,Object.defineProperty(W1,"__esModule",{value:!0}),W1.ActorRdfSerializeJsonLd=void 0;const u=uE(),n=Jte();let o=class extends u.ActorRdfSerializeFixedMediaTypes{constructor(t){super(t)}async runHandle(t,e,r){const a=new n.JsonLdSerializer({space:" ".repeat(this.jsonStringifyIndentSpaces)});let c;return"pipe"in t.quadStream?(t.quadStream.on("error",s=>a.emit("error",s)),c=t.quadStream.pipe(a)):c=a.import(t.quadStream),{data:c}}};return W1.ActorRdfSerializeJsonLd=o,W1}var _9;function kte(){return _9||(_9=1,(function(u){var n=Oo&&Oo.__createBinding||(Object.create?(function(i,t,e,r){r===void 0&&(r=e);var a=Object.getOwnPropertyDescriptor(t,e);(!a||("get"in a?!t.__esModule:a.writable||a.configurable))&&(a={enumerable:!0,get:function(){return t[e]}}),Object.defineProperty(i,r,a)}):(function(i,t,e,r){r===void 0&&(r=e),i[r]=t[e]})),o=Oo&&Oo.__exportStar||function(i,t){for(var e in i)e!=="default"&&!Object.prototype.hasOwnProperty.call(t,e)&&n(t,i,e)};Object.defineProperty(u,"__esModule",{value:!0}),o(Kte(),u)})(Oo)),Oo}var Eo={},ty={},q3={},g9;function Wte(){if(g9)return q3;g9=1,Object.defineProperty(q3,"__esModule",{value:!0});function u(o,i){return new Promise((t,e)=>{o.on("end",()=>t(i)),o.on("error",e)})}function n(o){const i=[];return u(o.on("data",t=>i.push(t)),i)}return q3.default=n,q3}var gi={},Ki={},ry={},ny={},m9;function Yte(){if(m9)return ny;m9=1,Object.defineProperty(ny,"__esModule",{value:!0}),ny.fragment=void 0;function u(i){let t=i;(t.endsWith("/")||t.endsWith("#"))&&(t=t.slice(0,t.length-1));const e=[];t.lastIndexOf("/")>0&&e.push(t.lastIndexOf("/")),t.lastIndexOf("#")>0&&e.push(t.lastIndexOf("#"));const r=Math.max(...e);return t.slice(r+1)}function n(i){var t;const e=(t=i.split(/[^a-z0-9]+/ig).filter(r=>r!=="").map(r=>r[0].toUpperCase()+r.slice(1)).join("").match(/[a-z][a-z0-9]+/ig))===null||t===void 0?void 0:t[0];return typeof e>"u"?void 0:e[0].toLowerCase()+e.slice(1)}function o(i){let t=u(i);return t=t?n(t):void 0,t||"v"}return ny.fragment=o,ny}var xo={},Ro={},mi={},C3={exports:{}},v9;function Zte(){return v9||(v9=1,(function(u,n){var o=typeof globalThis<"u"&&globalThis||typeof self<"u"&&self||typeof Et<"u"&&Et,i=(function(){function e(){this.fetch=!1,this.DOMException=o.DOMException}return e.prototype=o,new e})();(function(e){(function(r){var a=typeof e<"u"&&e||typeof self<"u"&&self||typeof Et<"u"&&Et||{},c={searchParams:"URLSearchParams"in a,iterable:"Symbol"in a&&"iterator"in Symbol,blob:"FileReader"in a&&"Blob"in a&&(function(){try{return new Blob,!0}catch{return!1}})(),formData:"FormData"in a,arrayBuffer:"ArrayBuffer"in a};function s(C){return C&&DataView.prototype.isPrototypeOf(C)}if(c.arrayBuffer)var d=["[object Int8Array]","[object Uint8Array]","[object Uint8ClampedArray]","[object Int16Array]","[object Uint16Array]","[object Int32Array]","[object Uint32Array]","[object Float32Array]","[object Float64Array]"],l=ArrayBuffer.isView||function(C){return C&&d.indexOf(Object.prototype.toString.call(C))>-1};function f(C){if(typeof C!="string"&&(C=String(C)),/[^a-z0-9\-#$%&'*+.^_`|~!]/i.test(C)||C==="")throw new TypeError('Invalid character in header field name: "'+C+'"');return C.toLowerCase()}function h(C){return typeof C!="string"&&(C=String(C)),C}function p(C){var $={next:function(){var Z=C.shift();return{done:Z===void 0,value:Z}}};return c.iterable&&($[Symbol.iterator]=function(){return $}),$}function y(C){this.map={},C instanceof y?C.forEach(function($,Z){this.append(Z,$)},this):Array.isArray(C)?C.forEach(function($){if($.length!=2)throw new TypeError("Headers constructor: expected name/value pair to be length 2, found"+$.length);this.append($[0],$[1])},this):C&&Object.getOwnPropertyNames(C).forEach(function($){this.append($,C[$])},this)}y.prototype.append=function(C,$){C=f(C),$=h($);var Z=this.map[C];this.map[C]=Z?Z+", "+$:$},y.prototype.delete=function(C){delete this.map[f(C)]},y.prototype.get=function(C){return C=f(C),this.has(C)?this.map[C]:null},y.prototype.has=function(C){return this.map.hasOwnProperty(f(C))},y.prototype.set=function(C,$){this.map[f(C)]=h($)},y.prototype.forEach=function(C,$){for(var Z in this.map)this.map.hasOwnProperty(Z)&&C.call($,this.map[Z],Z,this)},y.prototype.keys=function(){var C=[];return this.forEach(function($,Z){C.push(Z)}),p(C)},y.prototype.values=function(){var C=[];return this.forEach(function($){C.push($)}),p(C)},y.prototype.entries=function(){var C=[];return this.forEach(function($,Z){C.push([Z,$])}),p(C)},c.iterable&&(y.prototype[Symbol.iterator]=y.prototype.entries);function _(C){if(!C._noBody){if(C.bodyUsed)return Promise.reject(new TypeError("Already read"));C.bodyUsed=!0}}function b(C){return new Promise(function($,Z){C.onload=function(){$(C.result)},C.onerror=function(){Z(C.error)}})}function m(C){var $=new FileReader,Z=b($);return $.readAsArrayBuffer(C),Z}function g(C){var $=new FileReader,Z=b($),ee=/charset=([A-Za-z0-9_-]+)/.exec(C.type),ce=ee?ee[1]:"utf-8";return $.readAsText(C,ce),Z}function T(C){for(var $=new Uint8Array(C),Z=new Array($.length),ee=0;ee<$.length;ee++)Z[ee]=String.fromCharCode($[ee]);return Z.join("")}function v(C){if(C.slice)return C.slice(0);var $=new Uint8Array(C.byteLength);return $.set(new Uint8Array(C)),$.buffer}function S(){return this.bodyUsed=!1,this._initBody=function(C){this.bodyUsed=this.bodyUsed,this._bodyInit=C,C?typeof C=="string"?this._bodyText=C:c.blob&&Blob.prototype.isPrototypeOf(C)?this._bodyBlob=C:c.formData&&FormData.prototype.isPrototypeOf(C)?this._bodyFormData=C:c.searchParams&&URLSearchParams.prototype.isPrototypeOf(C)?this._bodyText=C.toString():c.arrayBuffer&&c.blob&&s(C)?(this._bodyArrayBuffer=v(C.buffer),this._bodyInit=new Blob([this._bodyArrayBuffer])):c.arrayBuffer&&(ArrayBuffer.prototype.isPrototypeOf(C)||l(C))?this._bodyArrayBuffer=v(C):this._bodyText=C=Object.prototype.toString.call(C):(this._noBody=!0,this._bodyText=""),this.headers.get("content-type")||(typeof C=="string"?this.headers.set("content-type","text/plain;charset=UTF-8"):this._bodyBlob&&this._bodyBlob.type?this.headers.set("content-type",this._bodyBlob.type):c.searchParams&&URLSearchParams.prototype.isPrototypeOf(C)&&this.headers.set("content-type","application/x-www-form-urlencoded;charset=UTF-8"))},c.blob&&(this.blob=function(){var C=_(this);if(C)return C;if(this._bodyBlob)return Promise.resolve(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(new Blob([this._bodyArrayBuffer]));if(this._bodyFormData)throw new Error("could not read FormData body as blob");return Promise.resolve(new Blob([this._bodyText]))}),this.arrayBuffer=function(){if(this._bodyArrayBuffer){var C=_(this);return C||(ArrayBuffer.isView(this._bodyArrayBuffer)?Promise.resolve(this._bodyArrayBuffer.buffer.slice(this._bodyArrayBuffer.byteOffset,this._bodyArrayBuffer.byteOffset+this._bodyArrayBuffer.byteLength)):Promise.resolve(this._bodyArrayBuffer))}else{if(c.blob)return this.blob().then(m);throw new Error("could not read as ArrayBuffer")}},this.text=function(){var C=_(this);if(C)return C;if(this._bodyBlob)return g(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(T(this._bodyArrayBuffer));if(this._bodyFormData)throw new Error("could not read FormData body as text");return Promise.resolve(this._bodyText)},c.formData&&(this.formData=function(){return this.text().then(w)}),this.json=function(){return this.text().then(JSON.parse)},this}var F=["CONNECT","DELETE","GET","HEAD","OPTIONS","PATCH","POST","PUT","TRACE"];function M(C){var $=C.toUpperCase();return F.indexOf($)>-1?$:C}function O(C,$){if(!(this instanceof O))throw new TypeError('Please use the "new" operator, this DOM object constructor cannot be called as a function.');$=$||{};var Z=$.body;if(C instanceof O){if(C.bodyUsed)throw new TypeError("Already read");this.url=C.url,this.credentials=C.credentials,$.headers||(this.headers=new y(C.headers)),this.method=C.method,this.mode=C.mode,this.signal=C.signal,!Z&&C._bodyInit!=null&&(Z=C._bodyInit,C.bodyUsed=!0)}else this.url=String(C);if(this.credentials=$.credentials||this.credentials||"same-origin",($.headers||!this.headers)&&(this.headers=new y($.headers)),this.method=M($.method||this.method||"GET"),this.mode=$.mode||this.mode||null,this.signal=$.signal||this.signal||(function(){if("AbortController"in a){var G=new AbortController;return G.signal}})(),this.referrer=null,(this.method==="GET"||this.method==="HEAD")&&Z)throw new TypeError("Body not allowed for GET or HEAD requests");if(this._initBody(Z),(this.method==="GET"||this.method==="HEAD")&&($.cache==="no-store"||$.cache==="no-cache")){var ee=/([?&])_=[^&]*/;if(ee.test(this.url))this.url=this.url.replace(ee,"$1_="+new Date().getTime());else{var ce=/\?/;this.url+=(ce.test(this.url)?"&":"?")+"_="+new Date().getTime()}}}O.prototype.clone=function(){return new O(this,{body:this._bodyInit})};function w(C){var $=new FormData;return C.trim().split("&").forEach(function(Z){if(Z){var ee=Z.split("="),ce=ee.shift().replace(/\+/g," "),G=ee.join("=").replace(/\+/g," ");$.append(decodeURIComponent(ce),decodeURIComponent(G))}}),$}function E(C){var $=new y,Z=C.replace(/\r?\n[\t ]+/g," ");return Z.split("\r").map(function(ee){return ee.indexOf(`
`)===0?ee.substr(1,ee.length):ee}).forEach(function(ee){var ce=ee.split(":"),G=ce.shift().trim();if(G){var fe=ce.join(":").trim();try{$.append(G,fe)}catch(me){console.warn("Response "+me.message)}}}),$}S.call(O.prototype);function R(C,$){if(!(this instanceof R))throw new TypeError('Please use the "new" operator, this DOM object constructor cannot be called as a function.');if($||($={}),this.type="default",this.status=$.status===void 0?200:$.status,this.status<200||this.status>599)throw new RangeError("Failed to construct 'Response': The status provided (0) is outside the range [200, 599].");this.ok=this.status>=200&&this.status<300,this.statusText=$.statusText===void 0?"":""+$.statusText,this.headers=new y($.headers),this.url=$.url||"",this._initBody(C)}S.call(R.prototype),R.prototype.clone=function(){return new R(this._bodyInit,{status:this.status,statusText:this.statusText,headers:new y(this.headers),url:this.url})},R.error=function(){var C=new R(null,{status:200,statusText:""});return C.ok=!1,C.status=0,C.type="error",C};var D=[301,302,303,307,308];R.redirect=function(C,$){if(D.indexOf($)===-1)throw new RangeError("Invalid status code");return new R(null,{status:$,headers:{location:C}})},r.DOMException=a.DOMException;try{new r.DOMException}catch{r.DOMException=function($,Z){this.message=$,this.name=Z;var ee=Error($);this.stack=ee.stack},r.DOMException.prototype=Object.create(Error.prototype),r.DOMException.prototype.constructor=r.DOMException}function B(C,$){return new Promise(function(Z,ee){var ce=new O(C,$);if(ce.signal&&ce.signal.aborted)return ee(new r.DOMException("Aborted","AbortError"));var G=new XMLHttpRequest;function fe(){G.abort()}G.onload=function(){var re={statusText:G.statusText,headers:E(G.getAllResponseHeaders()||"")};ce.url.indexOf("file://")===0&&(G.status<200||G.status>599)?re.status=200:re.status=G.status,re.url="responseURL"in G?G.responseURL:re.headers.get("X-Request-URL");var xe="response"in G?G.response:G.responseText;setTimeout(function(){Z(new R(xe,re))},0)},G.onerror=function(){setTimeout(function(){ee(new TypeError("Network request failed"))},0)},G.ontimeout=function(){setTimeout(function(){ee(new TypeError("Network request timed out"))},0)},G.onabort=function(){setTimeout(function(){ee(new r.DOMException("Aborted","AbortError"))},0)};function me(re){try{return re===""&&a.location.href?a.location.href:re}catch{return re}}if(G.open(ce.method,me(ce.url),!0),ce.credentials==="include"?G.withCredentials=!0:ce.credentials==="omit"&&(G.withCredentials=!1),"responseType"in G&&(c.blob?G.responseType="blob":c.arrayBuffer&&(G.responseType="arraybuffer")),$&&typeof $.headers=="object"&&!($.headers instanceof y||a.Headers&&$.headers instanceof a.Headers)){var ye=[];Object.getOwnPropertyNames($.headers).forEach(function(re){ye.push(f(re)),G.setRequestHeader(re,h($.headers[re]))}),ce.headers.forEach(function(re,xe){ye.indexOf(xe)===-1&&G.setRequestHeader(xe,re)})}else ce.headers.forEach(function(re,xe){G.setRequestHeader(xe,re)});ce.signal&&(ce.signal.addEventListener("abort",fe),G.onreadystatechange=function(){G.readyState===4&&ce.signal.removeEventListener("abort",fe)}),G.send(typeof ce._bodyInit>"u"?null:ce._bodyInit)})}return B.polyfill=!0,a.fetch||(a.fetch=B,a.Headers=y,a.Request=O,a.Response=R),r.Headers=y,r.Request=O,r.Response=R,r.fetch=B,Object.defineProperty(r,"__esModule",{value:!0}),r})({})})(i),i.fetch.ponyfill=!0,delete i.fetch.polyfill;var t=o.fetch?o:i;n=t.fetch,n.default=t.fetch,n.fetch=t.fetch,n.Headers=t.Headers,n.Request=t.Request,n.Response=t.Response,u.exports=n})(C3,C3.exports)),C3.exports}var T9;function oE(){if(T9)return mi;T9=1;var u=mi&&mi.__awaiter||function(t,e,r,a){function c(s){return s instanceof r?s:new r(function(d){d(s)})}return new(r||(r=Promise))(function(s,d){function l(p){try{h(a.next(p))}catch(y){d(y)}}function f(p){try{h(a.throw(p))}catch(y){d(y)}}function h(p){p.done?s(p.value):c(p.value).then(l,f)}h((a=a.apply(t,e||[])).next())})};Object.defineProperty(mi,"__esModule",{value:!0}),mi.fetchContext=mi.fetchJson=void 0;const n=Zte();function o(t,e){var r;return u(this,void 0,void 0,function*(){return(yield((r=e==null?void 0:e.fetch)!==null&&r!==void 0?r:n.fetch)(t)).json()})}mi.fetchJson=o;function i(t,e){return u(this,void 0,void 0,function*(){return(yield o(t,e))["@context"]})}return mi.fetchContext=i,mi}var w9;function ere(){if(w9)return Ro;w9=1;var u=Ro&&Ro.__awaiter||function(i,t,e,r){function a(c){return c instanceof e?c:new e(function(s){s(c)})}return new(e||(e=Promise))(function(c,s){function d(h){try{f(r.next(h))}catch(p){s(p)}}function l(h){try{f(r.throw(h))}catch(p){s(p)}}function f(h){h.done?c(h.value):a(h.value).then(d,l)}f((r=r.apply(i,t||[])).next())})};Object.defineProperty(Ro,"__esModule",{value:!0}),Ro.lookupUri=void 0;const n=oE();function o(i,t){return u(this,void 0,void 0,function*(){const e=(yield(0,n.fetchContext)(`https://prefix.cc/${i}.file.jsonld`,t))[i];if(typeof e!="string")throw new Error(`Expected uri to be a string, received: ${e} of type ${typeof e}`);return e})}return Ro.lookupUri=o,Ro}var Fo={},S9;function tre(){if(S9)return Fo;S9=1;var u=Fo&&Fo.__awaiter||function(i,t,e,r){function a(c){return c instanceof e?c:new e(function(s){s(c)})}return new(e||(e=Promise))(function(c,s){function d(h){try{f(r.next(h))}catch(p){s(p)}}function l(h){try{f(r.throw(h))}catch(p){s(p)}}function f(h){h.done?c(h.value):a(h.value).then(d,l)}f((r=r.apply(i,t||[])).next())})};Object.defineProperty(Fo,"__esModule",{value:!0}),Fo.lookupPrefix=void 0;const n=oE();function o(i,t){return u(this,void 0,void 0,function*(){const e=new URL("https://prefix.cc/reverse");e.searchParams.append("uri",i),e.searchParams.append("format","jsonld");const r=Object.keys(yield(0,n.fetchContext)(e,t));if(r.length===0)throw new Error("No prefixes returned");return r[0]})}return Fo.lookupPrefix=o,Fo}var Io={},O9;function rre(){if(O9)return Io;O9=1;var u=Io&&Io.__awaiter||function(i,t,e,r){function a(c){return c instanceof e?c:new e(function(s){s(c)})}return new(e||(e=Promise))(function(c,s){function d(h){try{f(r.next(h))}catch(p){s(p)}}function l(h){try{f(r.throw(h))}catch(p){s(p)}}function f(h){h.done?c(h.value):a(h.value).then(d,l)}f((r=r.apply(i,t||[])).next())})};Object.defineProperty(Io,"__esModule",{value:!0}),Io.lookupAllPrefixes=void 0;const n=oE();function o(i){return u(this,void 0,void 0,function*(){return(0,n.fetchContext)("https://prefix.cc/context",i)})}return Io.lookupAllPrefixes=o,Io}var A9;function E9(){return A9||(A9=1,(function(u){var n=xo&&xo.__createBinding||(Object.create?(function(i,t,e,r){r===void 0&&(r=e);var a=Object.getOwnPropertyDescriptor(t,e);(!a||("get"in a?!t.__esModule:a.writable||a.configurable))&&(a={enumerable:!0,get:function(){return t[e]}}),Object.defineProperty(i,r,a)}):(function(i,t,e,r){r===void 0&&(r=e),i[r]=t[e]})),o=xo&&xo.__exportStar||function(i,t){for(var e in i)e!=="default"&&!Object.prototype.hasOwnProperty.call(t,e)&&n(t,i,e)};Object.defineProperty(u,"__esModule",{value:!0}),o(ere(),u),o(tre(),u),o(rre(),u)})(xo)),xo}var x9;function nre(){return x9||(x9=1,(function(u){var n=ry&&ry.__awaiter||function(a,c,s,d){function l(f){return f instanceof s?f:new s(function(h){h(f)})}return new(s||(s=Promise))(function(f,h){function p(b){try{_(d.next(b))}catch(m){h(m)}}function y(b){try{_(d.throw(b))}catch(m){h(m)}}function _(b){b.done?f(b.value):l(b.value).then(p,y)}_((d=d.apply(a,c||[])).next())})};Object.defineProperty(u,"__esModule",{value:!0}),u.lookupAllPrefixes=u.prefixToUri=u.uriToPrefix=void 0;const o=Yte(),i=E9();function t(a,c){return n(this,void 0,void 0,function*(){let s;try{s=yield(0,i.lookupPrefix)(a,c)}catch{c!=null&&c.mintOnUnknown&&(s=(0,o.fragment)(a).slice(0,4))}if(typeof s<"u"&&typeof(c==null?void 0:c.existingPrefixes)=="object"&&s in c.existingPrefixes){let d=0;for(;`${s}${d}`in c.existingPrefixes;)d+=1;s=`${s}${d}`}return s})}u.uriToPrefix=t;function e(a,c){return n(this,void 0,void 0,function*(){try{return yield(0,i.lookupUri)(a,c)}catch{return}})}u.prefixToUri=e;var r=E9();Object.defineProperty(u,"lookupAllPrefixes",{enumerable:!0,get:function(){return r.lookupAllPrefixes}})})(ry)),ry}var iy={},R9;function ire(){if(R9)return iy;R9=1,Object.defineProperty(iy,"__esModule",{value:!0}),iy.getShaclName=void 0;function u(n){if(n.termType!=="NamedNode"||!n.value.startsWith("http://www.w3.org/ns/shacl#"))throw new Error(`Term ${n.value} is not part of the SHACL namespace`);return n.value.slice(27)}return iy.getShaclName=u,iy}var B3={},F9;function are(){return F9||(F9=1,Object.defineProperty(B3,"__esModule",{value:!0}),B3.default={deactivated:!0,severity:!0,message:!0,class:!0,datatype:!0,nodeKind:!0,minExclusive:!0,minInclusive:!0,maxExclusive:!0,maxInclusive:!0,minLength:!0,maxLength:!0,pattern:!0,flags:!0,languageIn:!0,uniqueLang:!0,equals:!0,disjoint:!0,lessThan:!0,lessThanOrEquals:!0,qualifiedValueShape:!0,qualifiedMinCount:!0,qualifiedMaxCount:!0,qualifiedValueShapesDisjoint:!0,closed:!0,ignoredProperties:!0,hasValue:!0,in:!0,node:!0}),B3}var $3={},I9;function ure(){return I9||(I9=1,Object.defineProperty($3,"__esModule",{value:!0}),$3.default={owl:"http://www.w3.org/2002/07/owl#",rdf:"http://www.w3.org/1999/02/22-rdf-syntax-ns#",rdfs:"http://www.w3.org/2000/01/rdf-schema#",sh:"http://www.w3.org/ns/shacl#",xsd:"http://www.w3.org/2001/XMLSchema#"}),$3}var U3={},P9;function ore(){return P9||(P9=1,Object.defineProperty(U3,"__esModule",{value:!0}),U3.default={targetNode:!0,targetObjectsOf:!0,targetSubjectsOf:!0,deactivated:!0,severity:!0,message:!0,class:!0,datatype:!0,nodeKind:!0,minExclusive:!0,minInclusive:!0,maxExclusive:!0,maxInclusive:!0,minLength:!0,maxLength:!0,pattern:!0,flags:!0,languageIn:!0,equals:!0,disjoint:!0,closed:!0,ignoredProperties:!0,hasValue:!0,in:!0}),U3}var D9;function sre(){if(D9)return Ki;D9=1;var u=Ki&&Ki.__awaiter||function(h,p,y,_){function b(m){return m instanceof y?m:new y(function(g){g(m)})}return new(y||(y=Promise))(function(m,g){function T(F){try{S(_.next(F))}catch(M){g(M)}}function v(F){try{S(_.throw(F))}catch(M){g(M)}}function S(F){F.done?m(F.value):b(F.value).then(T,v)}S((_=_.apply(h,p||[])).next())})},n=Ki&&Ki.__importDefault||function(h){return h&&h.__esModule?h:{default:h}};Object.defineProperty(Ki,"__esModule",{value:!0});const o=Xi,i=nre(),t=E0(),e=ire(),r=n(are()),a=n(ure()),c=n(ore());function s(h){var p;return(p=/^[^]*[#/]/.exec(h))===null||p===void 0?void 0:p[0]}const d={"http://www.w3.org/1999/02/22-rdf-syntax-ns#":"rdf","http://www.w3.org/2000/01/rdf-schema#":"rdfs","http://www.w3.org/ns/shacl#":"sh","http://www.w3.org/2001/XMLSchema#":"xsd"},l={rdf:"http://www.w3.org/1999/02/22-rdf-syntax-ns#",rdfs:"http://www.w3.org/2000/01/rdf-schema#",sh:"http://www.w3.org/ns/shacl#",xsd:"http://www.w3.org/2001/XMLSchema#"};class f{constructor(p,y,_={},b=void 0,m=!0,g=!1,T,v=!1,S=!0){this.store=p,this.base=b,this.errorOnExtraQuads=m,this.mintUnspecifiedPrefixes=g,this.fetch=T,this.extendedSyntax=v,this.requireBase=S,this.prefixes={},this.prefixRev={};for(const F of Object.keys(_)){const M=_[F],O=typeof M=="string"?M:M.value;!(O in d)&&!(F in l)&&(this.prefixRev[O]=F,this.prefixes[F]=O)}this.writer=y,this.requireBase=S}write(){return u(this,void 0,void 0,function*(){const p=this.store.getQuads(null,"http://www.w3.org/1999/02/22-rdf-syntax-ns#type","http://www.w3.org/2002/07/owl#Ontology",null);if(p.length===1&&p[0].subject.termType==="NamedNode"){const _=p[0].subject;this.store.removeQuads(p),_.equals(new o.NamedNode("urn:x-base:default"))||this.writer.add(`BASE ${(0,t.termToString)(_)}`),yield this.writeImports(_)}else if(this.requireBase)throw new Error("Base expected");if(this.mintUnspecifiedPrefixes){const _=new Set;for(const m of[...this.store.getSubjects(null,null,null),...this.store.getPredicates(null,null,null),...this.store.getObjects(null,null,null)])if(m.termType==="NamedNode"){const g=s(m.value);g&&!(g in this.prefixRev)&&!(g in d)&&_.add(g)}const b=Object.assign(Object.assign({},this.prefixes),l);yield Promise.all([..._].map(m=>(0,i.uriToPrefix)(m,{fetch:this.fetch,mintOnUnknown:!0,existingPrefixes:b}).then(g=>{this.prefixes[g]=m,b[g]=m,this.prefixRev[m]=g})))}const y=new Set([...this.store.getSubjects(null,null,null),...this.store.getPredicates(null,null,null),...this.store.getObjects(null,null,null)].filter(_=>_.termType==="NamedNode").map(_=>s(_.value)).filter(_=>typeof _=="string"));for(const _ in this.prefixRev)y.has(_)||(delete this.prefixes[this.prefixRev[_]],delete this.prefixRev[_]);if(yield this.writePrefixes(),this.prefixes=Object.assign(Object.assign({},this.prefixes),l),this.prefixRev=Object.assign(Object.assign({},this.prefixRev),d),this.writer.newLine(),yield this.writeShapes(),this.extendedSyntax){const _=this.store.getSubjects(null,null,null);_.length>0&&this.writer.newLine(1);for(const b of _)this.writer.add(yield this.termToString(b,!0,!0)),this.writer.add(" "),this.writer.indent(),yield this.writeTurtlePredicates(b),this.writer.deindent();_.length>0&&(this.writer.add(" ."),this.writer.newLine())}if(this.errorOnExtraQuads&&this.store.size>0)throw new Error(`Dataset contains quads that cannot be written in SHACLC [
${new o.Writer({prefixes:this.prefixes}).quadsToString(this.store.getQuads(null,null,null,null))}]`);this.writer.end()})}writeImports(p){return u(this,void 0,void 0,function*(){const y=this.store.getObjectsOnce(p,new o.NamedNode("http://www.w3.org/2002/07/owl#imports"),null);if(y.length>0)for(const _ of y)this.writer.add(`IMPORTS <${_.value}>`,!0)})}writePrefixes(){return u(this,void 0,void 0,function*(){const p=Object.keys(this.prefixes).filter(y=>!(y in a.default)).sort();if(p.length>0)for(const y of p)this.writer.add(`PREFIX ${y}: <${this.prefixes[y]}>`,!0)})}termToString(p,y=!1,_=!1){return u(this,void 0,void 0,function*(){try{if(y)throw new Error("Shacl name disabled");return(0,e.getShaclName)(p)}catch{}if(p.termType==="NamedNode"){const b=s(p.value);return b&&b in this.prefixRev&&b in this.prefixRev?`${this.prefixRev[b]}:${p.value.slice(b.length)}`:(0,t.termToString)(p)}if(p.termType==="Literal")return p.datatypeString==="http://www.w3.org/2001/XMLSchema#integer"||p.datatypeString==="http://www.w3.org/2001/XMLSchema#boolean"?p.value:(0,t.termToString)(p);throw p.termType==="BlankNode"&&_&&(0,t.termToString)(p),new Error(`Invalid term type for extra statement ${p.value} (${p.termType})`)})}writeShapes(){return u(this,void 0,void 0,function*(){for(const p of this.store.getSubjectsOnce(new o.NamedNode("http://www.w3.org/1999/02/22-rdf-syntax-ns#type"),new o.NamedNode("http://www.w3.org/ns/shacl#NodeShape"),null)){this.store.getQuadsOnce(p,new o.NamedNode("http://www.w3.org/1999/02/22-rdf-syntax-ns#type"),new o.NamedNode("http://www.w3.org/2000/01/rdf-schema#Class"),null).length>0?this.writer.add("shapeClass "):this.writer.add("shape "),this.writer.add(yield this.termToString(p)),this.writer.add(" ");const y=this.store.getObjectsOnce(p,new o.NamedNode("http://www.w3.org/ns/shacl#targetClass"),null);if(y.length>0){this.writer.add("-> ");for(const b of y)b.termType==="NamedNode"?this.writer.add(yield this.termToString(b)):(this.writer.add("!"),this.writer.add(yield this.termToString(this.singleObject(b,new o.NamedNode("http://www.w3.org/ns/shacl#not"),!0)))),this.writer.add(" ")}const _=this.store.getPredicates(p,null,null).filter(b=>[new o.NamedNode("http://www.w3.org/ns/shacl#targetClass"),new o.NamedNode("http://www.w3.org/ns/shacl#property"),new o.NamedNode("http://www.w3.org/ns/shacl#or"),...Object.keys(c.default).map(m=>new o.NamedNode("http://www.w3.org/ns/shacl#"+m))].every(m=>!b.equals(m)));_.length>0&&(this.writer.add(";"),this.writer.indent(),this.writer.newLine(1)),this.extendedSyntax&&(yield this.writeGivenTurtlePredicates(p,_)),_.length>0&&(this.writer.add(" "),this.writer.deindent()),yield this.writeShapeBody(p,!1)}})}getSingleProperty(p,y){let _=[p];try{let b=(0,e.getShaclName)(p.predicate),m="pred";if(b==="not"){const g=this.store.getQuadsOnce(p.object,null,null,null);if(_=_.concat(g),g.length!==1)throw new Error("Can only handle having one predicate of 'not'");[p]=g,b=(0,e.getShaclName)(p.predicate),m="not"}if(!(b in y))throw new Error(`${b} is not allowed`);return{name:b,type:m,object:p.object}}catch{this.store.addQuads(_)}}singleLayerPropertiesList(p,y){const _=[];for(const b of this.store.getQuadsOnce(p,null,null,null)){const m=this.getSingleProperty(b,y);m&&_.push(m)}return _}expectOneProperty(p,y){const _=this.store.getQuadsOnce(p,null,null,null);if(_.length===1){const b=this.getSingleProperty(_[0],y);if(b)return b}this.store.addQuads(_)}orProperties(p,y){const _=[];for(const b of this.store.getQuadsOnce(p,new o.NamedNode("http://www.w3.org/ns/shacl#or"),null,null)){const m=[];for(const g of this.getList(b.object)){const T=this.expectOneProperty(g,y);if(!T)throw this.store.addQuad(b),new Error("Each entry of the 'or' statement must declare exactly one property");m.push(T)}_.push(m)}return _}getList(p){let y=p;const _=[];for(;!y.equals(new o.NamedNode("http://www.w3.org/1999/02/22-rdf-syntax-ns#nil"));)_.push(this.singleObject(y,new o.NamedNode("http://www.w3.org/1999/02/22-rdf-syntax-ns#first"),!0)),y=this.singleObject(y,new o.NamedNode("http://www.w3.org/1999/02/22-rdf-syntax-ns#rest"),!0);return _}writeIriLiteralOrArray(p){return u(this,void 0,void 0,function*(){if(p.termType==="BlankNode"){this.writer.add("[");let y=!0;for(const _ of this.getList(p))y?y=!1:this.writer.add(" "),this.writer.add(yield this.termToString(_));this.writer.add("]")}else this.writer.add(yield this.termToString(p))})}singleObject(p,y,_){var b;return(b=this.singleQuad(p,y,_))===null||b===void 0?void 0:b.object}singleQuad(p,y,_=!1){const b=this.store.getQuadsOnce(p,y,null,null);if(_&&b.length!==1)throw this.store.addQuads(b),new Error(`The subject and predicate ${p==null?void 0:p.value} ${y==null?void 0:y.value} must have exactly one object. Instead has ${b.length}`);if(b.length>1)throw this.store.addQuads(b),new Error(`The subject and predicate ${p==null?void 0:p.value} ${y==null?void 0:y.value} can have at most one object. Instead has ${b.length}`);return b.length===1?b[0]:void 0}writeAssigment({name:p,type:y,object:_}){return u(this,void 0,void 0,function*(){y==="not"&&this.writer.add("!"),this.writer.add(p),this.writer.add("="),yield this.writeIriLiteralOrArray(_)})}writeAtom({name:p,type:y,object:_}){return u(this,void 0,void 0,function*(){switch(y==="not"&&this.writer.add("!"),p){case"node":{if(_.termType==="NamedNode")this.writer.add(`@${yield this.termToString(_)}`);else if(_.termType==="BlankNode")yield this.writeShapeBody(_);else throw new Error("Invalid nested shape, must be blank node or IRI");return}case"nodeKind":{this.writer.add((0,e.getShaclName)(_));return}case"class":{this.writer.add(yield this.termToString(_));return}case"datatype":{this.writer.add(yield this.termToString(_));return}default:this.writer.add(p),this.writer.add("="),yield this.writeIriLiteralOrArray(_)}})}writeAssigments(p,y=" ",_=!0,b){return u(this,void 0,void 0,function*(){for(const m of p)_?_=!1:this.writer.add(y),b?yield this.writeAtom(m):yield this.writeAssigment(m)})}writeParams(p,y=!0,_,b=!1,m=!1){return u(this,void 0,void 0,function*(){const g=this.orProperties(p,_),T=this.singleLayerPropertiesList(p,_);m&&(g.length>0||T.length>0)&&this.writer.newLine(1);for(const v of g)y?y=!1:this.writer.add(" "),yield this.writeAssigments(v,"|",!0,b);yield this.writeAssigments(T," ",y,b),m&&(g.length>0||T.length>0)&&this.writer.add(" .")})}writeShapeBody(p,y=!0){return u(this,void 0,void 0,function*(){this.writer.add("{").indent();const _=this.store.getObjectsOnce(p,new o.NamedNode("http://www.w3.org/ns/shacl#property"),null);yield this.writeParams(p,!0,c.default,!1,!0);for(const b of _)this.writer.newLine(1),yield this.writeProperty(b);this.writer.deindent().newLine(1),y?this.writer.add("} ."):this.writer.add("}").newLine(1)})}writeProperty(p){return u(this,void 0,void 0,function*(){yield this.writePath(this.singleObject(p,new o.NamedNode("http://www.w3.org/ns/shacl#path"),!0));const y=this.singleObject(p,new o.NamedNode("http://www.w3.org/ns/shacl#minCount")),_=this.singleObject(p,new o.NamedNode("http://www.w3.org/ns/shacl#maxCount")),b=this.singleObject(p,new o.NamedNode("http://www.w3.org/ns/shacl#nodeKind")),m=this.singleObject(p,new o.NamedNode("http://www.w3.org/ns/shacl#class")),g=this.singleObject(p,new o.NamedNode("http://www.w3.org/ns/shacl#datatype")),T=this.store.getObjectsOnce(p,new o.NamedNode("http://www.w3.org/ns/shacl#node"),null);if(b&&(this.writer.add(" "),this.writer.add((0,e.getShaclName)(b))),m&&(this.writer.add(" "),this.writer.add(yield this.termToString(m))),g&&(this.writer.add(" "),this.writer.add(yield this.termToString(g))),y!==void 0||_!==void 0){if(this.writer.add(" ["),y){if(y.termType!=="Literal"||y.datatypeString!=="http://www.w3.org/2001/XMLSchema#integer")throw new Error("Invalid min value, must me an integer literal");this.writer.add(y.value)}else this.writer.add("0");if(this.writer.add(".."),_){if(_.termType!=="Literal"||_.datatypeString!=="http://www.w3.org/2001/XMLSchema#integer")throw new Error("Invalid max value, must me an integer literal");this.store.removeMatches(p,new o.NamedNode("http://www.w3.org/ns/shacl#maxCount"),void 0,void 0),this.writer.add(_.value)}else this.writer.add("*");this.writer.add("]")}yield this.writeParams(p,!1,r.default,!0);const v=[];for(const S of T)if(S.termType==="NamedNode")this.writer.add(" "),this.writer.add(`@${yield this.termToString(S)}`);else if(S.termType==="BlankNode")v.push(S);else throw new Error("Invalid nested shape, must be blank node or IRI");for(const S of v)this.writer.add(" "),yield this.writeShapeBody(S);this.extendedSyntax&&this.store.getQuads(p,null,null,null).length>0&&(this.writer.add(" %"),this.writer.indent(),this.writer.newLine(1),yield this.writeTurtlePredicates(p),this.writer.deindent(),this.writer.newLine(1),this.writer.add("%")),v.length===0&&this.writer.add(" .")})}writeTurtlePredicates(p){return u(this,void 0,void 0,function*(){return this.writeGivenTurtlePredicates(p,this.store.getPredicates(p,null,null))})}writeGivenTurtlePredicates(p,y){return u(this,void 0,void 0,function*(){let _=!1;if(y.some(b=>b.equals(o.DataFactory.namedNode("http://www.w3.org/1999/02/22-rdf-syntax-ns#type")))){const b=this.store.getObjectsOnce(p,o.DataFactory.namedNode("http://www.w3.org/1999/02/22-rdf-syntax-ns#type"),null);b.length>0&&(_=!0,this.writer.add("a "),yield this.writeTurtleObjects(b))}for(const b of y)b.equals(o.DataFactory.namedNode("http://www.w3.org/1999/02/22-rdf-syntax-ns#type"))||(_?(this.writer.add(" ;"),this.writer.newLine(1)):_=!0,this.writer.add(yield this.termToString(b,!0)),this.writer.add(" "),yield this.writeTurtleObjects(this.store.getObjectsOnce(p,b,null)))})}writeTurtleObjects(p){return u(this,void 0,void 0,function*(){const y=[],_=[];for(const m of p)m.termType==="BlankNode"&&[...this.store.match(null,null,m),...this.store.match(null,m,null)].length===0?y.push(m):_.push(m);this.writer.add((yield Promise.all(_.map(m=>this.termToString(m,!0,!0)))).join(", "));let b=_.length>0;if(y.length>0)for(const m of y)b?this.writer.add(", "):b=!0,(yield this.writeList(m))||(this.writer.add("["),this.writer.indent(),this.writer.newLine(1),yield this.writeTurtlePredicates(m),this.writer.deindent(),this.writer.newLine(1),this.writer.add("]"))})}writeList(p){return u(this,void 0,void 0,function*(){let y=p;const _=[],b=[];for(;!y.equals(o.DataFactory.namedNode("http://www.w3.org/1999/02/22-rdf-syntax-ns#nil"));){const g=this.store.getQuadsOnce(y,o.DataFactory.namedNode("http://www.w3.org/1999/02/22-rdf-syntax-ns#first"),null,null),T=this.store.getQuadsOnce(y,o.DataFactory.namedNode("http://www.w3.org/1999/02/22-rdf-syntax-ns#rest"),null,null);if(b.push(...g,...T),g.length!==1||T.length!==1||this.store.getQuads(y,null,null,null).length!==0)return this.store.addQuads(b),!1;_.push(g[0].object),y=T[0].object}let m=!1;this.writer.add("(");for(const g of _)m?this.writer.add(" "):m=!0,yield this.writeTurtleObjects([g]);return this.writer.add(")"),!0})}writePath(p,y=!1){return u(this,void 0,void 0,function*(){if(p.termType==="NamedNode")this.writer.add(yield this.termToString(p));else if(p.termType==="BlankNode"){const _=this.store.getQuadsOnce(p,null,null,null);if(_.length===1){const{predicate:b,object:m}=_[0];switch(b.value){case"http://www.w3.org/ns/shacl#inversePath":this.writer.add("^"),yield this.writePath(m,!0);return;case"http://www.w3.org/ns/shacl#alternativePath":{const g=this.getList(m);if(g.length===0)throw new Error("Invalid Alternative Path - no options");if(g.length===1)yield this.writePath(g[0]);else{y&&this.writer.add("(");let T=!0;for(const v of g)T?T=!1:this.writer.add("|"),yield this.writePath(v,!0);y&&this.writer.add(")")}return}case"http://www.w3.org/ns/shacl#zeroOrMorePath":yield this.writePath(m,!0),this.writer.add("*");return;case"http://www.w3.org/ns/shacl#oneOrMorePath":yield this.writePath(m,!0),this.writer.add("+");return;case"http://www.w3.org/ns/shacl#zeroOrOnePath":yield this.writePath(m,!0),this.writer.add("?");return;default:throw new Error(`Invalid path type ${p.value}`)}}else{this.store.addQuads(_);const b=this.getList(p);if(b.length===0)throw new Error("Invalid Path");{y&&this.writer.add("(");let m=!0;for(const g of b)m?m=!1:this.writer.add("/"),yield this.writePath(g,!0);y&&this.writer.add(")")}}}else throw new Error("Path should be named node or blank node")})}}return Ki.default=f,Ki}var V3={},N9;function cre(){if(N9)return V3;N9=1,Object.defineProperty(V3,"__esModule",{value:!0});class u{constructor(o){this.indents=0,this.write=o.write,this.end=o.end}indent(){return this.indents+=1,this}deindent(){if(this.indents<1)throw new Error(`Trying to deindent when indent is only ${this.indents}`);return this.indents-=1,this}add(o,i=!1){return this.write(i?`
${"	".repeat(this.indents)}${o}`:o,"utf-8"),this}newLine(o=2){return this.write(`
`.repeat(o)+"	".repeat(this.indents),"utf-8"),this}}return V3.default=u,V3}var Q3={},j9;function dre(){if(j9)return Q3;j9=1,Object.defineProperty(Q3,"__esModule",{value:!0});const u=Xi;class n extends u.Store{getQuadsOnce(i,t,e,r){const a=this.getQuads(i,t,e,r);return this.removeQuads(a),a}getSubjectsOnce(i,t,e){return this.getQuadsOnce(null,i,t,e).map(r=>r.subject)}getObjectsOnce(i,t,e){return this.getQuadsOnce(i,t,null,e).map(r=>r.object)}}return Q3.default=n,Q3}var L9;function lre(){if(L9)return gi;L9=1;var u=gi&&gi.__awaiter||function(a,c,s,d){function l(f){return f instanceof s?f:new s(function(h){h(f)})}return new(s||(s=Promise))(function(f,h){function p(b){try{_(d.next(b))}catch(m){h(m)}}function y(b){try{_(d.throw(b))}catch(m){h(m)}}function _(b){b.done?f(b.value):l(b.value).then(p,y)}_((d=d.apply(a,c||[])).next())})},n=gi&&gi.__importDefault||function(a){return a&&a.__esModule?a:{default:a}};Object.defineProperty(gi,"__esModule",{value:!0}),gi.write=void 0;const o=Xi,i=n(sre()),t=n(cre()),e=n(dre());function r(a,c){return u(this,void 0,void 0,function*(){return new Promise((s,d)=>u(this,void 0,void 0,function*(){try{let l="";const f=new e.default(a),h=f.getGraphs(null,null,null);if(h.length>1)throw new Error("More than one graph found - can serialize in the default graph");if(h.length===1&&!h[0].equals(o.DataFactory.defaultGraph()))throw new Error(`Expected all triples to be in the default graph, instead triples were in ${h[0].value}`);const p=new t.default({write:_=>{l+=_},end:()=>{let _=f.getQuads(null,null,null,null);_.length===0&&(_=void 0),s({text:l,extraQuads:_})}});yield new i.default(f,p,c==null?void 0:c.prefixes,void 0,(c==null?void 0:c.errorOnUnused)!==!1,c==null?void 0:c.mintPrefixes,c==null?void 0:c.fetch,c==null?void 0:c.extendedSyntax,(c==null?void 0:c.requireBase)!==!1).write()}catch(l){d(l)}}))})}return gi.write=r,gi}var M9;function fre(){if(M9)return ty;M9=1,Object.defineProperty(ty,"__esModule",{value:!0}),ty.ActorRdfSerializeShaclc=void 0;const u=uE(),n=Wte(),o=Pt(),i=lre();let t=class extends u.ActorRdfSerializeFixedMediaTypes{constructor(r){super(r)}async runHandle(r,a){const c=new o.Readable;c._read=()=>{};try{const s={};r.quadStream.on("prefix",(l,f)=>{s[l]=f});const{text:d}=await(0,i.write)(await(0,n.default)(r.quadStream),{errorOnUnused:!0,extendedSyntax:a==="text/shaclc-ext",prefixes:s});c.push(d),c.push(null)}catch(s){c._read=()=>{c.emit("error",s)}}return{data:c,triples:!0}}};return ty.ActorRdfSerializeShaclc=t,ty}var q9;function hre(){return q9||(q9=1,(function(u){var n=Eo&&Eo.__createBinding||(Object.create?(function(i,t,e,r){r===void 0&&(r=e);var a=Object.getOwnPropertyDescriptor(t,e);(!a||("get"in a?!t.__esModule:a.writable||a.configurable))&&(a={enumerable:!0,get:function(){return t[e]}}),Object.defineProperty(i,r,a)}):(function(i,t,e,r){r===void 0&&(r=e),i[r]=t[e]})),o=Eo&&Eo.__exportStar||function(i,t){for(var e in i)e!=="default"&&!Object.prototype.hasOwnProperty.call(t,e)&&n(t,i,e)};Object.defineProperty(u,"__esModule",{value:!0}),o(fre(),u)})(Eo)),Eo}var Po={},ay={},Do={},uy={},C9;function B9(){if(C9)return uy;C9=1,Object.defineProperty(uy,"__esModule",{value:!0}),uy.ActorRdfUpdateQuads=void 0;const u=pe();let n=class extends u.Actor{constructor(i){super(i)}};return uy.ActorRdfUpdateQuads=n,uy}var vi={},$9;function pre(){if($9)return vi;$9=1,Object.defineProperty(vi,"__esModule",{value:!0}),vi.ActorRdfUpdateQuadsDestination=vi.deskolemize=vi.deskolemizeStream=void 0;const u=XI(),n=qe(),o=pe(),i=B9();function t(a,c,s){return c==null?void 0:c.map(d=>(0,u.deskolemizeQuad)(a,d,s))}vi.deskolemizeStream=t;function e(a){var l;const c=a.context.getSafe(n.KeysInitQuery.dataFactory),s=a.context.get(n.KeysRdfUpdateQuads.destination),d=(l=a.context.get(n.KeysQuerySourceIdentify.sourceIds))==null?void 0:l.get(s);return d?{...a,quadStreamInsert:t(c,a.quadStreamInsert,d),quadStreamDelete:t(c,a.quadStreamDelete,d)}:a}vi.deskolemize=e;let r=class extends i.ActorRdfUpdateQuads{async test(c){return(0,o.passTestVoid)()}async run(c){const s=await this.getDestination(c.context);return await this.getOutput(s,e(c))}async getOutput(c,s){return{execute:async()=>{await c.update({insert:s.quadStreamInsert,delete:s.quadStreamDelete}),await(s.deleteGraphs?c.deleteGraphs(s.deleteGraphs.graphs,s.deleteGraphs.requireExistence,s.deleteGraphs.dropGraphs):Promise.resolve()),await(s.createGraphs?c.createGraphs(s.createGraphs.graphs,s.createGraphs.requireNonExistence):Promise.resolve())}}}};return vi.ActorRdfUpdateQuadsDestination=r,vi}var sE={},U9;function yre(){return U9||(U9=1,Object.defineProperty(sE,"__esModule",{value:!0})),sE}var Gr={},V9;function bre(){if(V9)return Gr;V9=1,Object.defineProperty(Gr,"__esModule",{value:!0}),Gr.getContextDestinationUrl=Gr.getContextDestination=Gr.getDataDestinationContext=Gr.getDataDestinationValue=Gr.getDataDestinationType=Gr.isDataDestinationRawType=void 0;const u=qe();function n(a){return typeof a=="string"||"remove"in a}Gr.isDataDestinationRawType=n;function o(a){return typeof a=="string"?"":"remove"in a?"rdfjsStore":a.type}Gr.getDataDestinationType=o;function i(a){return n(a)?a:a.value}Gr.getDataDestinationValue=i;function t(a,c){return typeof a=="string"||"remove"in a||!a.context?c:c.merge(a.context)}Gr.getDataDestinationContext=t;function e(a){return a.get(u.KeysRdfUpdateQuads.destination)}Gr.getContextDestination=e;function r(a){if(a){let c=i(a);if(typeof c=="string"){const s=c.indexOf("#");return s>=0&&(c=c.slice(0,s)),c}}}return Gr.getContextDestinationUrl=r,Gr}var Q9;function cE(){return Q9||(Q9=1,(function(u){var n=Do&&Do.__createBinding||(Object.create?(function(i,t,e,r){r===void 0&&(r=e);var a=Object.getOwnPropertyDescriptor(t,e);(!a||("get"in a?!t.__esModule:a.writable||a.configurable))&&(a={enumerable:!0,get:function(){return t[e]}}),Object.defineProperty(i,r,a)}):(function(i,t,e,r){r===void 0&&(r=e),i[r]=t[e]})),o=Do&&Do.__exportStar||function(i,t){for(var e in i)e!=="default"&&!Object.prototype.hasOwnProperty.call(t,e)&&n(t,i,e)};Object.defineProperty(u,"__esModule",{value:!0}),o(B9(),u),o(pre(),u),o(yre(),u),o(bre(),u)})(Do)),Do}var oy={},H9;function _re(){if(H9)return oy;H9=1,Object.defineProperty(oy,"__esModule",{value:!0}),oy.RdfJsQuadDestination=void 0;const u=n5(),n=Yt();let o=class{constructor(t,e){this.dataFactory=t,this.store=e}async update(t){t.delete&&await(0,u.promisifyEventEmitter)(this.store.remove(t.delete)),t.insert&&await(0,u.promisifyEventEmitter)(this.store.import(t.insert))}async deleteGraphs(t,e,r){switch(t){case"ALL":await(0,u.promisifyEventEmitter)(this.store.deleteGraph(this.dataFactory.defaultGraph()));case"NAMED":const a=this.store.match(),c={};a.on("data",s=>{s.graph.termType!=="DefaultGraph"&&(c[(0,n.termToString)(s.graph)]=!0)}),await(0,u.promisifyEventEmitter)(a),await Promise.all(Object.keys(c).map(s=>(0,u.promisifyEventEmitter)(this.store.deleteGraph((0,n.stringToTerm)(s,this.dataFactory)))));break;default:for(const s of Array.isArray(t)?t:[t])await(0,u.promisifyEventEmitter)(this.store.deleteGraph(s))}}async createGraphs(t,e){if(e)for(const r of t){const a=this.store.match(void 0,void 0,void 0,r);await new Promise((c,s)=>{a.once("data",()=>{s(new Error(`Unable to create graph ${r.value} as it already exists`))}),a.on("end",c),a.on("error",s)})}}};return oy.RdfJsQuadDestination=o,oy}var G9;function gre(){if(G9)return ay;G9=1,Object.defineProperty(ay,"__esModule",{value:!0}),ay.ActorRdfUpdateQuadsRdfJsStore=void 0;const u=cE(),n=qe(),o=pe(),i=_re();let t=class extends u.ActorRdfUpdateQuadsDestination{constructor(r){super(r)}async test(r){var c;const a=(0,u.getContextDestination)(r.context);return!a||typeof a=="string"||!("remove"in a)&&"value"in a&&!((c=a.value)!=null&&c.remove)?(0,o.failTest)(`${this.name} received an invalid rdfjsStore.`):(0,o.passTestVoid)()}async getDestination(r){const a=(0,u.getContextDestination)(r);return new i.RdfJsQuadDestination(r.getSafe(n.KeysInitQuery.dataFactory),"remove"in a?a:a.value)}};return ay.ActorRdfUpdateQuadsRdfJsStore=t,ay}var z9;function mre(){return z9||(z9=1,(function(u){var n=Po&&Po.__createBinding||(Object.create?(function(i,t,e,r){r===void 0&&(r=e);var a=Object.getOwnPropertyDescriptor(t,e);(!a||("get"in a?!t.__esModule:a.writable||a.configurable))&&(a={enumerable:!0,get:function(){return t[e]}}),Object.defineProperty(i,r,a)}):(function(i,t,e,r){r===void 0&&(r=e),i[r]=t[e]})),o=Po&&Po.__exportStar||function(i,t){for(var e in i)e!=="default"&&!Object.prototype.hasOwnProperty.call(t,e)&&n(t,i,e)};Object.defineProperty(u,"__esModule",{value:!0}),o(gre(),u)})(Po)),Po}var No={},sy={},cy={},X9;function vre(){if(X9)return cy;X9=1,Object.defineProperty(cy,"__esModule",{value:!0}),cy.ExpressionFunctionBnode=void 0;const u=Te(),n=qe(),o=EO(),i=ge();let t=class Fx extends u.ExpressionFunctionBase{constructor(){super({arity:Number.POSITIVE_INFINITY,operator:i.SparqlOperator.BNODE,apply:async r=>{const{args:a,mapping:c,exprEval:s}=r,d=a.length===1?await s.evaluatorExpressionEvaluation(a[0],c):void 0;let l;if(d){const h=Fx.bnodeTree.search([d],s.context.getSafe(n.KeysExpressionEvaluator.superTypeProvider),s.context.getSafe(n.KeysInitQuery.functionArgumentsCache));if(!h)throw new i.InvalidArgumentTypes(a,i.SparqlOperator.BNODE);l=h(s)([d]).str()}const f=new o.BlankNodeBindingsScoped(l??`BNODE_${Fx.bnodeCounter++}`);return new i.BlankNode(f)}})}checkArity(r){return r.length===0||r.length===1}};return cy.ExpressionFunctionBnode=t,t.bnodeTree=(0,i.declare)(i.SparqlOperator.BNODE).onString1(()=>e=>e).collect(),t.bnodeCounter=0,cy}var J9;function Tre(){if(J9)return sy;J9=1,Object.defineProperty(sy,"__esModule",{value:!0}),sy.ActorFunctionFactoryExpressionBnode=void 0;const u=Te(),n=ge(),o=vre();let i=class extends u.ActorFunctionFactoryDedicated{constructor(e){super({...e,functionNames:[n.SparqlOperator.BNODE],termFunction:!1})}async run(e){return new o.ExpressionFunctionBnode}};return sy.ActorFunctionFactoryExpressionBnode=i,sy}var K9;function wre(){return K9||(K9=1,(function(u){var n=No&&No.__createBinding||(Object.create?(function(i,t,e,r){r===void 0&&(r=e);var a=Object.getOwnPropertyDescriptor(t,e);(!a||("get"in a?!t.__esModule:a.writable||a.configurable))&&(a={enumerable:!0,get:function(){return t[e]}}),Object.defineProperty(i,r,a)}):(function(i,t,e,r){r===void 0&&(r=e),i[r]=t[e]})),o=No&&No.__exportStar||function(i,t){for(var e in i)e!=="default"&&!Object.prototype.hasOwnProperty.call(t,e)&&n(t,i,e)};Object.defineProperty(u,"__esModule",{value:!0}),o(Tre(),u)})(No)),No}var jo={},dy={},ly={},k9;function Sre(){if(k9)return ly;k9=1,Object.defineProperty(ly,"__esModule",{value:!0}),ly.ExpressionFunctionBound=void 0;const u=Te(),n=qe(),o=Vi(),i=ge();let t=class extends u.ExpressionFunctionBase{constructor(){super({arity:1,operator:i.SparqlOperator.BOUND,apply:async({args:r,mapping:a,exprEval:c})=>{const s=r[0];if(s.expressionType!==o.ExpressionType.Variable)throw new i.InvalidArgumentTypes(r,i.SparqlOperator.BOUND);const d=a.has((0,i.expressionToVar)(c.context.getSafe(n.KeysInitQuery.dataFactory),s));return(0,i.bool)(d)}})}};return ly.ExpressionFunctionBound=t,ly}var W9;function Ore(){if(W9)return dy;W9=1,Object.defineProperty(dy,"__esModule",{value:!0}),dy.ActorFunctionFactoryExpressionBound=void 0;const u=Te(),n=ge(),o=Sre();let i=class extends u.ActorFunctionFactoryDedicated{constructor(e){super({...e,functionNames:[n.SparqlOperator.BOUND],termFunction:!1})}async run(e){return new o.ExpressionFunctionBound}};return dy.ActorFunctionFactoryExpressionBound=i,dy}var Y9;function Are(){return Y9||(Y9=1,(function(u){var n=jo&&jo.__createBinding||(Object.create?(function(i,t,e,r){r===void 0&&(r=e);var a=Object.getOwnPropertyDescriptor(t,e);(!a||("get"in a?!t.__esModule:a.writable||a.configurable))&&(a={enumerable:!0,get:function(){return t[e]}}),Object.defineProperty(i,r,a)}):(function(i,t,e,r){r===void 0&&(r=e),i[r]=t[e]})),o=jo&&jo.__exportStar||function(i,t){for(var e in i)e!=="default"&&!Object.prototype.hasOwnProperty.call(t,e)&&n(t,i,e)};Object.defineProperty(u,"__esModule",{value:!0}),o(Ore(),u)})(jo)),jo}var Lo={},fy={},hy={},Z9;function Ere(){if(Z9)return hy;Z9=1,Object.defineProperty(hy,"__esModule",{value:!0}),hy.ExpressionFunctionCoalesce=void 0;const u=Te(),n=ge();let o=class extends u.ExpressionFunctionBase{constructor(){super({arity:Number.POSITIVE_INFINITY,operator:n.SparqlOperator.COALESCE,apply:async({args:t,mapping:e,exprEval:r})=>{const a=[];for(const c of t)try{return await r.evaluatorExpressionEvaluation(c,e)}catch(s){a.push(s)}throw new n.CoalesceError(a)}})}};return hy.ExpressionFunctionCoalesce=o,hy}var eL;function xre(){if(eL)return fy;eL=1,Object.defineProperty(fy,"__esModule",{value:!0}),fy.ActorFunctionFactoryExpressionCoalesce=void 0;const u=Te(),n=ge(),o=Ere();let i=class extends u.ActorFunctionFactoryDedicated{constructor(e){super({...e,functionNames:[n.SparqlOperator.COALESCE],termFunction:!1})}async run(e){return new o.ExpressionFunctionCoalesce}};return fy.ActorFunctionFactoryExpressionCoalesce=i,fy}var tL;function Rre(){return tL||(tL=1,(function(u){var n=Lo&&Lo.__createBinding||(Object.create?(function(i,t,e,r){r===void 0&&(r=e);var a=Object.getOwnPropertyDescriptor(t,e);(!a||("get"in a?!t.__esModule:a.writable||a.configurable))&&(a={enumerable:!0,get:function(){return t[e]}}),Object.defineProperty(i,r,a)}):(function(i,t,e,r){r===void 0&&(r=e),i[r]=t[e]})),o=Lo&&Lo.__exportStar||function(i,t){for(var e in i)e!=="default"&&!Object.prototype.hasOwnProperty.call(t,e)&&n(t,i,e)};Object.defineProperty(u,"__esModule",{value:!0}),o(xre(),u)})(Lo)),Lo}var Mo={},py={},yy={},rL;function Fre(){if(rL)return yy;rL=1,Object.defineProperty(yy,"__esModule",{value:!0}),yy.ExpressionFunctionConcat=void 0;const u=Te(),n=qe(),o=ge();let i=class Ix extends u.ExpressionFunctionBase{constructor(){super({arity:Number.POSITIVE_INFINITY,operator:o.SparqlOperator.CONCAT,apply:async e=>{const{args:r,mapping:a,exprEval:c}=e,s=r.map(async p=>c.evaluatorExpressionEvaluation(p,a)).map(async p=>{const y=Ix.concatTree.search([await p],c.context.getSafe(n.KeysExpressionEvaluator.superTypeProvider),c.context.getSafe(n.KeysInitQuery.functionArgumentsCache));if(!y)throw new o.InvalidArgumentTypes(r,o.SparqlOperator.CONCAT);return y(c)([await p])}),d=await Promise.all(s),f=d.map(p=>p.typedValue).join(""),h=Ix.langAllEqual(d)?d[0].language:void 0;return h?(0,o.langString)(f,h):(0,o.string)(f)}})}static langAllEqual(e){return e.length>0&&e.every(r=>r.language===e[0].language)}};return yy.ExpressionFunctionConcat=i,i.concatTree=(0,o.declare)(o.SparqlOperator.CONCAT).onStringly1(()=>t=>t).collect(),yy}var nL;function Ire(){if(nL)return py;nL=1,Object.defineProperty(py,"__esModule",{value:!0}),py.ActorFunctionFactoryExpressionConcat=void 0;const u=Te(),n=ge(),o=Fre();let i=class extends u.ActorFunctionFactoryDedicated{constructor(e){super({...e,functionNames:[n.SparqlOperator.CONCAT],termFunction:!1})}async run(e){return new o.ExpressionFunctionConcat}};return py.ActorFunctionFactoryExpressionConcat=i,py}var iL;function Pre(){return iL||(iL=1,(function(u){var n=Mo&&Mo.__createBinding||(Object.create?(function(i,t,e,r){r===void 0&&(r=e);var a=Object.getOwnPropertyDescriptor(t,e);(!a||("get"in a?!t.__esModule:a.writable||a.configurable))&&(a={enumerable:!0,get:function(){return t[e]}}),Object.defineProperty(i,r,a)}):(function(i,t,e,r){r===void 0&&(r=e),i[r]=t[e]})),o=Mo&&Mo.__exportStar||function(i,t){for(var e in i)e!=="default"&&!Object.prototype.hasOwnProperty.call(t,e)&&n(t,i,e)};Object.defineProperty(u,"__esModule",{value:!0}),o(Ire(),u)})(Mo)),Mo}var qo={},by={},_y={},aL;function Dre(){if(aL)return _y;aL=1,Object.defineProperty(_y,"__esModule",{value:!0}),_y.NamedExtension=void 0;const u=yI(),n=qe(),o=ge();let i=class extends u.ExpressionFunctionBase{constructor({operator:e,functionDefinition:r}){super({arity:Number.POSITIVE_INFINITY,operator:e,apply:async({args:a,exprEval:c,mapping:s})=>{const d=await Promise.all(a.map(l=>c.evaluatorExpressionEvaluation(l,s)));try{return new o.TermTransformer(c.context.getSafe(n.KeysExpressionEvaluator.superTypeProvider)).transformRDFTermUnsafe(await r(d.map(l=>l.toRDF(c.context.getSafe(n.KeysInitQuery.dataFactory)))))}catch(l){throw new o.ExtensionFunctionError(this.operator,l)}}})}};return _y.NamedExtension=i,_y}var uL;function Nre(){if(uL)return by;uL=1,Object.defineProperty(by,"__esModule",{value:!0}),by.ActorFunctionFactoryExpressionExtensions=void 0;const u=Te(),n=qe(),o=pe(),i=hr(),t=Dre();let e=class extends u.ActorFunctionFactory{constructor(a){super(a)}async test({context:a,functionName:c}){return await a.getSafe(n.KeysExpressionEvaluator.extensionFunctionCreator)(new i.DataFactory().namedNode(c))?(0,o.passTestVoid)():(0,o.failTest)(`Actor ${this.name} can only provide non-termExpression implementations for functions that are provided through config entries like: ${n.KeysInitQuery.extensionFunctionCreator.name} or ${n.KeysInitQuery.extensionFunctions.name}`)}async run({context:a,functionName:c}){const d=await a.getSafe(n.KeysExpressionEvaluator.extensionFunctionCreator)(new i.DataFactory().namedNode(c));return new t.NamedExtension({operator:c,functionDefinition:d})}};return by.ActorFunctionFactoryExpressionExtensions=e,by}var oL;function jre(){return oL||(oL=1,(function(u){var n=qo&&qo.__createBinding||(Object.create?(function(i,t,e,r){r===void 0&&(r=e);var a=Object.getOwnPropertyDescriptor(t,e);(!a||("get"in a?!t.__esModule:a.writable||a.configurable))&&(a={enumerable:!0,get:function(){return t[e]}}),Object.defineProperty(i,r,a)}):(function(i,t,e,r){r===void 0&&(r=e),i[r]=t[e]})),o=qo&&qo.__exportStar||function(i,t){for(var e in i)e!=="default"&&!Object.prototype.hasOwnProperty.call(t,e)&&n(t,i,e)};Object.defineProperty(u,"__esModule",{value:!0}),o(Nre(),u)})(qo)),qo}var Co={},gy={},my={},sL;function Lre(){if(sL)return my;sL=1,Object.defineProperty(my,"__esModule",{value:!0}),my.ExpressionFunctionIf=void 0;const u=Te(),n=ge();let o=class extends u.ExpressionFunctionBase{constructor(){super({arity:3,operator:n.SparqlOperator.IF,apply:async({args:t,mapping:e,exprEval:r})=>(await r.evaluatorExpressionEvaluation(t[0],e)).coerceEBV()?r.evaluatorExpressionEvaluation(t[1],e):r.evaluatorExpressionEvaluation(t[2],e)})}};return my.ExpressionFunctionIf=o,my}var cL;function Mre(){if(cL)return gy;cL=1,Object.defineProperty(gy,"__esModule",{value:!0}),gy.ActorFunctionFactoryExpressionIf=void 0;const u=Te(),n=ge(),o=Lre();let i=class extends u.ActorFunctionFactoryDedicated{constructor(e){super({...e,functionNames:[n.SparqlOperator.IF],termFunction:!1})}async run(e){return new o.ExpressionFunctionIf}};return gy.ActorFunctionFactoryExpressionIf=i,gy}var dL;function qre(){return dL||(dL=1,(function(u){var n=Co&&Co.__createBinding||(Object.create?(function(i,t,e,r){r===void 0&&(r=e);var a=Object.getOwnPropertyDescriptor(t,e);(!a||("get"in a?!t.__esModule:a.writable||a.configurable))&&(a={enumerable:!0,get:function(){return t[e]}}),Object.defineProperty(i,r,a)}):(function(i,t,e,r){r===void 0&&(r=e),i[r]=t[e]})),o=Co&&Co.__exportStar||function(i,t){for(var e in i)e!=="default"&&!Object.prototype.hasOwnProperty.call(t,e)&&n(t,i,e)};Object.defineProperty(u,"__esModule",{value:!0}),o(Mre(),u)})(Co)),Co}var Bo={},vy={},Ty={},lL;function Cre(){if(lL)return Ty;lL=1,Object.defineProperty(Ty,"__esModule",{value:!0}),Ty.ExpressionFunctionLogicalAnd=void 0;const u=Te(),n=ge();let o=class extends u.ExpressionFunctionBase{constructor(){super({arity:2,operator:n.SparqlOperator.LOGICAL_AND,apply:async({args:t,mapping:e,exprEval:r})=>{const[a,c]=t;try{if(!(await r.evaluatorExpressionEvaluation(a,e)).coerceEBV())return(0,n.bool)(!1);const f=(await r.evaluatorExpressionEvaluation(c,e)).coerceEBV();return(0,n.bool)(f)}catch(s){if((await r.evaluatorExpressionEvaluation(c,e)).coerceEBV())throw s;return(0,n.bool)(!1)}}})}};return Ty.ExpressionFunctionLogicalAnd=o,Ty}var fL;function Bre(){if(fL)return vy;fL=1,Object.defineProperty(vy,"__esModule",{value:!0}),vy.ActorFunctionFactoryExpressionLogicalAnd=void 0;const u=Te(),n=ge(),o=Cre();let i=class extends u.ActorFunctionFactoryDedicated{constructor(e){super({...e,functionNames:[n.SparqlOperator.LOGICAL_AND],termFunction:!1})}async run(e){return new o.ExpressionFunctionLogicalAnd}};return vy.ActorFunctionFactoryExpressionLogicalAnd=i,vy}var hL;function $re(){return hL||(hL=1,(function(u){var n=Bo&&Bo.__createBinding||(Object.create?(function(i,t,e,r){r===void 0&&(r=e);var a=Object.getOwnPropertyDescriptor(t,e);(!a||("get"in a?!t.__esModule:a.writable||a.configurable))&&(a={enumerable:!0,get:function(){return t[e]}}),Object.defineProperty(i,r,a)}):(function(i,t,e,r){r===void 0&&(r=e),i[r]=t[e]})),o=Bo&&Bo.__exportStar||function(i,t){for(var e in i)e!=="default"&&!Object.prototype.hasOwnProperty.call(t,e)&&n(t,i,e)};Object.defineProperty(u,"__esModule",{value:!0}),o(Bre(),u)})(Bo)),Bo}var $o={},wy={},Sy={},pL;function Ure(){if(pL)return Sy;pL=1,Object.defineProperty(Sy,"__esModule",{value:!0}),Sy.ExpressionFunctionLogicalOr=void 0;const u=Te(),n=ge();let o=class extends u.ExpressionFunctionBase{constructor(){super({arity:2,operator:n.SparqlOperator.LOGICAL_OR,apply:async({args:t,mapping:e,exprEval:r})=>{const[a,c]=t;try{if((await r.evaluatorExpressionEvaluation(a,e)).coerceEBV())return(0,n.bool)(!0);const f=(await r.evaluatorExpressionEvaluation(c,e)).coerceEBV();return(0,n.bool)(f)}catch(s){if(!(await r.evaluatorExpressionEvaluation(c,e)).coerceEBV())throw s;return(0,n.bool)(!0)}}})}};return Sy.ExpressionFunctionLogicalOr=o,Sy}var yL;function Vre(){if(yL)return wy;yL=1,Object.defineProperty(wy,"__esModule",{value:!0}),wy.ActorFunctionFactoryExpressionLogicalOr=void 0;const u=Te(),n=ge(),o=Ure();let i=class extends u.ActorFunctionFactoryDedicated{constructor(e){super({...e,functionNames:[n.SparqlOperator.LOGICAL_OR],termFunction:!1})}async run(e){return new o.ExpressionFunctionLogicalOr}};return wy.ActorFunctionFactoryExpressionLogicalOr=i,wy}var bL;function Qre(){return bL||(bL=1,(function(u){var n=$o&&$o.__createBinding||(Object.create?(function(i,t,e,r){r===void 0&&(r=e);var a=Object.getOwnPropertyDescriptor(t,e);(!a||("get"in a?!t.__esModule:a.writable||a.configurable))&&(a={enumerable:!0,get:function(){return t[e]}}),Object.defineProperty(i,r,a)}):(function(i,t,e,r){r===void 0&&(r=e),i[r]=t[e]})),o=$o&&$o.__exportStar||function(i,t){for(var e in i)e!=="default"&&!Object.prototype.hasOwnProperty.call(t,e)&&n(t,i,e)};Object.defineProperty(u,"__esModule",{value:!0}),o(Vre(),u)})($o)),$o}var Uo={},Oy={},Ay={},_L;function Hre(){if(_L)return Ay;_L=1,Object.defineProperty(Ay,"__esModule",{value:!0}),Ay.ExpressionFunctionSameTerm=void 0;const u=Te(),n=qe(),o=ge();let i=class extends u.ExpressionFunctionBase{constructor(){super({arity:2,operator:o.SparqlOperator.SAME_TERM,apply:async({args:e,mapping:r,exprEval:a})=>{const c=a.context.getSafe(n.KeysInitQuery.dataFactory),[s,d]=e.map(h=>a.evaluatorExpressionEvaluation(h,r)),[l,f]=await Promise.all([s,d]);return(0,o.bool)(l.toRDF(c).equals(f.toRDF(c)))}})}};return Ay.ExpressionFunctionSameTerm=i,Ay}var gL;function Gre(){if(gL)return Oy;gL=1,Object.defineProperty(Oy,"__esModule",{value:!0}),Oy.ActorFunctionFactoryExpressionSameTerm=void 0;const u=Te(),n=ge(),o=Hre();let i=class extends u.ActorFunctionFactoryDedicated{constructor(e){super({...e,functionNames:[n.SparqlOperator.SAME_TERM],termFunction:!1})}async run(e){return new o.ExpressionFunctionSameTerm}};return Oy.ActorFunctionFactoryExpressionSameTerm=i,Oy}var mL;function zre(){return mL||(mL=1,(function(u){var n=Uo&&Uo.__createBinding||(Object.create?(function(i,t,e,r){r===void 0&&(r=e);var a=Object.getOwnPropertyDescriptor(t,e);(!a||("get"in a?!t.__esModule:a.writable||a.configurable))&&(a={enumerable:!0,get:function(){return t[e]}}),Object.defineProperty(i,r,a)}):(function(i,t,e,r){r===void 0&&(r=e),i[r]=t[e]})),o=Uo&&Uo.__exportStar||function(i,t){for(var e in i)e!=="default"&&!Object.prototype.hasOwnProperty.call(t,e)&&n(t,i,e)};Object.defineProperty(u,"__esModule",{value:!0}),o(Gre(),u)})(Uo)),Uo}var Vo={},Ey={},xy={},vL;function Xre(){if(vL)return xy;vL=1,Object.defineProperty(xy,"__esModule",{value:!0}),xy.TermFunctionAbs=void 0;const u=Te(),n=ge();let o=class extends u.TermFunctionBase{constructor(){super({arity:1,operator:n.SparqlOperator.ABS,overloads:(0,n.declare)(n.SparqlOperator.ABS).numericConverter(()=>t=>Math.abs(t)).collect()})}};return xy.TermFunctionAbs=o,xy}var TL;function Jre(){if(TL)return Ey;TL=1,Object.defineProperty(Ey,"__esModule",{value:!0}),Ey.ActorFunctionFactoryTermAbs=void 0;const u=Te(),n=ge(),o=Xre();let i=class extends u.ActorFunctionFactoryDedicated{constructor(e){super({...e,functionNames:[n.SparqlOperator.ABS],termFunction:!0})}async run(e){return new o.TermFunctionAbs}};return Ey.ActorFunctionFactoryTermAbs=i,Ey}var wL;function Kre(){return wL||(wL=1,(function(u){var n=Vo&&Vo.__createBinding||(Object.create?(function(i,t,e,r){r===void 0&&(r=e);var a=Object.getOwnPropertyDescriptor(t,e);(!a||("get"in a?!t.__esModule:a.writable||a.configurable))&&(a={enumerable:!0,get:function(){return t[e]}}),Object.defineProperty(i,r,a)}):(function(i,t,e,r){r===void 0&&(r=e),i[r]=t[e]})),o=Vo&&Vo.__exportStar||function(i,t){for(var e in i)e!=="default"&&!Object.prototype.hasOwnProperty.call(t,e)&&n(t,i,e)};Object.defineProperty(u,"__esModule",{value:!0}),o(Jre(),u)})(Vo)),Vo}var Qo={},Ry={},Fy={},H3={exports:{}},kre=H3.exports,SL;function G3(){return SL||(SL=1,(function(u){(function(n){var o,i=/^-?(?:\d+(?:\.\d*)?|\.\d+)(?:e[+-]?\d+)?$/i,t=Math.ceil,e=Math.floor,r="[BigNumber Error] ",a=r+"Number primitive has more than 15 significant digits: ",c=1e14,s=14,d=9007199254740991,l=[1,10,100,1e3,1e4,1e5,1e6,1e7,1e8,1e9,1e10,1e11,1e12,1e13],f=1e7,h=1e9;function p(S){var F,M,O,w=re.prototype={constructor:re,toString:null,valueOf:null},E=new re(1),R=20,D=4,B=-7,C=21,$=-1e7,Z=1e7,ee=!1,ce=1,G=0,fe={prefix:"",groupSize:3,secondaryGroupSize:0,groupSeparator:",",decimalSeparator:".",fractionGroupSize:0,fractionGroupSeparator:"",suffix:""},me="0123456789abcdefghijklmnopqrstuvwxyz",ye=!0;function re(V,P){var N,A,I,q,H,U,X,Q,k=this;if(!(k instanceof re))return new re(V,P);if(P==null){if(V&&V._isBigNumber===!0){k.s=V.s,!V.c||V.e>Z?k.c=k.e=null:V.e<$?k.c=[k.e=0]:(k.e=V.e,k.c=V.c.slice());return}if((U=typeof V=="number")&&V*0==0){if(k.s=1/V<0?(V=-V,-1):1,V===~~V){for(q=0,H=V;H>=10;H/=10,q++);q>Z?k.c=k.e=null:(k.e=q,k.c=[V]);return}Q=String(V)}else{if(!i.test(Q=String(V)))return O(k,Q,U);k.s=Q.charCodeAt(0)==45?(Q=Q.slice(1),-1):1}(q=Q.indexOf("."))>-1&&(Q=Q.replace(".","")),(H=Q.search(/e/i))>0?(q<0&&(q=H),q+=+Q.slice(H+1),Q=Q.substring(0,H)):q<0&&(q=Q.length)}else{if(m(P,2,me.length,"Base"),P==10&&ye)return k=new re(V),he(k,R+k.e+1,D);if(Q=String(V),U=typeof V=="number"){if(V*0!=0)return O(k,Q,U,P);if(k.s=1/V<0?(Q=Q.slice(1),-1):1,re.DEBUG&&Q.replace(/^0\.0*|\./,"").length>15)throw Error(a+V)}else k.s=Q.charCodeAt(0)===45?(Q=Q.slice(1),-1):1;for(N=me.slice(0,P),q=H=0,X=Q.length;H<X;H++)if(N.indexOf(A=Q.charAt(H))<0){if(A=="."){if(H>q){q=X;continue}}else if(!I&&(Q==Q.toUpperCase()&&(Q=Q.toLowerCase())||Q==Q.toLowerCase()&&(Q=Q.toUpperCase()))){I=!0,H=-1,q=0;continue}return O(k,String(V),U,P)}U=!1,Q=M(Q,P,10,k.s),(q=Q.indexOf("."))>-1?Q=Q.replace(".",""):q=Q.length}for(H=0;Q.charCodeAt(H)===48;H++);for(X=Q.length;Q.charCodeAt(--X)===48;);if(Q=Q.slice(H,++X)){if(X-=H,U&&re.DEBUG&&X>15&&(V>d||V!==e(V)))throw Error(a+k.s*V);if((q=q-H-1)>Z)k.c=k.e=null;else if(q<$)k.c=[k.e=0];else{if(k.e=q,k.c=[],H=(q+1)%s,q<0&&(H+=s),H<X){for(H&&k.c.push(+Q.slice(0,H)),X-=s;H<X;)k.c.push(+Q.slice(H,H+=s));H=s-(Q=Q.slice(H)).length}else H-=X;for(;H--;Q+="0");k.c.push(+Q)}}else k.c=[k.e=0]}re.clone=p,re.ROUND_UP=0,re.ROUND_DOWN=1,re.ROUND_CEIL=2,re.ROUND_FLOOR=3,re.ROUND_HALF_UP=4,re.ROUND_HALF_DOWN=5,re.ROUND_HALF_EVEN=6,re.ROUND_HALF_CEIL=7,re.ROUND_HALF_FLOOR=8,re.EUCLID=9,re.config=re.set=function(V){var P,N;if(V!=null)if(typeof V=="object"){if(V.hasOwnProperty(P="DECIMAL_PLACES")&&(N=V[P],m(N,0,h,P),R=N),V.hasOwnProperty(P="ROUNDING_MODE")&&(N=V[P],m(N,0,8,P),D=N),V.hasOwnProperty(P="EXPONENTIAL_AT")&&(N=V[P],N&&N.pop?(m(N[0],-h,0,P),m(N[1],0,h,P),B=N[0],C=N[1]):(m(N,-h,h,P),B=-(C=N<0?-N:N))),V.hasOwnProperty(P="RANGE"))if(N=V[P],N&&N.pop)m(N[0],-h,-1,P),m(N[1],1,h,P),$=N[0],Z=N[1];else if(m(N,-h,h,P),N)$=-(Z=N<0?-N:N);else throw Error(r+P+" cannot be zero: "+N);if(V.hasOwnProperty(P="CRYPTO"))if(N=V[P],N===!!N)if(N)if(typeof crypto<"u"&&crypto&&(crypto.getRandomValues||crypto.randomBytes))ee=N;else throw ee=!N,Error(r+"crypto unavailable");else ee=N;else throw Error(r+P+" not true or false: "+N);if(V.hasOwnProperty(P="MODULO_MODE")&&(N=V[P],m(N,0,9,P),ce=N),V.hasOwnProperty(P="POW_PRECISION")&&(N=V[P],m(N,0,h,P),G=N),V.hasOwnProperty(P="FORMAT"))if(N=V[P],typeof N=="object")fe=N;else throw Error(r+P+" not an object: "+N);if(V.hasOwnProperty(P="ALPHABET"))if(N=V[P],typeof N=="string"&&!/^.?$|[+\-.\s]|(.).*\1/.test(N))ye=N.slice(0,10)=="0123456789",me=N;else throw Error(r+P+" invalid: "+N)}else throw Error(r+"Object expected: "+V);return{DECIMAL_PLACES:R,ROUNDING_MODE:D,EXPONENTIAL_AT:[B,C],RANGE:[$,Z],CRYPTO:ee,MODULO_MODE:ce,POW_PRECISION:G,FORMAT:fe,ALPHABET:me}},re.isBigNumber=function(V){if(!V||V._isBigNumber!==!0)return!1;if(!re.DEBUG)return!0;var P,N,A=V.c,I=V.e,q=V.s;e:if({}.toString.call(A)=="[object Array]"){if((q===1||q===-1)&&I>=-h&&I<=h&&I===e(I)){if(A[0]===0){if(I===0&&A.length===1)return!0;break e}if(P=(I+1)%s,P<1&&(P+=s),String(A[0]).length==P){for(P=0;P<A.length;P++)if(N=A[P],N<0||N>=c||N!==e(N))break e;if(N!==0)return!0}}}else if(A===null&&I===null&&(q===null||q===1||q===-1))return!0;throw Error(r+"Invalid BigNumber: "+V)},re.maximum=re.max=function(){return Re(arguments,-1)},re.minimum=re.min=function(){return Re(arguments,1)},re.random=(function(){var V=9007199254740992,P=Math.random()*V&2097151?function(){return e(Math.random()*V)}:function(){return(Math.random()*1073741824|0)*8388608+(Math.random()*8388608|0)};return function(N){var A,I,q,H,U,X=0,Q=[],k=new re(E);if(N==null?N=R:m(N,0,h),H=t(N/s),ee)if(crypto.getRandomValues){for(A=crypto.getRandomValues(new Uint32Array(H*=2));X<H;)U=A[X]*131072+(A[X+1]>>>11),U>=9e15?(I=crypto.getRandomValues(new Uint32Array(2)),A[X]=I[0],A[X+1]=I[1]):(Q.push(U%1e14),X+=2);X=H/2}else if(crypto.randomBytes){for(A=crypto.randomBytes(H*=7);X<H;)U=(A[X]&31)*281474976710656+A[X+1]*1099511627776+A[X+2]*4294967296+A[X+3]*16777216+(A[X+4]<<16)+(A[X+5]<<8)+A[X+6],U>=9e15?crypto.randomBytes(7).copy(A,X):(Q.push(U%1e14),X+=7);X=H/7}else throw ee=!1,Error(r+"crypto unavailable");if(!ee)for(;X<H;)U=P(),U<9e15&&(Q[X++]=U%1e14);for(H=Q[--X],N%=s,H&&N&&(U=l[s-N],Q[X]=e(H/U)*U);Q[X]===0;Q.pop(),X--);if(X<0)Q=[q=0];else{for(q=-1;Q[0]===0;Q.splice(0,1),q-=s);for(X=1,U=Q[0];U>=10;U/=10,X++);X<s&&(q-=s-X)}return k.e=q,k.c=Q,k}})(),re.sum=function(){for(var V=1,P=arguments,N=new re(P[0]);V<P.length;)N=N.plus(P[V++]);return N},M=(function(){var V="0123456789";function P(N,A,I,q){for(var H,U=[0],X,Q=0,k=N.length;Q<k;){for(X=U.length;X--;U[X]*=A);for(U[0]+=q.indexOf(N.charAt(Q++)),H=0;H<U.length;H++)U[H]>I-1&&(U[H+1]==null&&(U[H+1]=0),U[H+1]+=U[H]/I|0,U[H]%=I)}return U.reverse()}return function(N,A,I,q,H){var U,X,Q,k,oe,se,Se,Me,Oe=N.indexOf("."),ue=R,L=D;for(Oe>=0&&(k=G,G=0,N=N.replace(".",""),Me=new re(A),se=Me.pow(N.length-Oe),G=k,Me.c=P(v(_(se.c),se.e,"0"),10,I,V),Me.e=Me.c.length),Se=P(N,A,I,H?(U=me,V):(U=V,me)),Q=k=Se.length;Se[--k]==0;Se.pop());if(!Se[0])return U.charAt(0);if(Oe<0?--Q:(se.c=Se,se.e=Q,se.s=q,se=F(se,Me,ue,L,I),Se=se.c,oe=se.r,Q=se.e),X=Q+ue+1,Oe=Se[X],k=I/2,oe=oe||X<0||Se[X+1]!=null,oe=L<4?(Oe!=null||oe)&&(L==0||L==(se.s<0?3:2)):Oe>k||Oe==k&&(L==4||oe||L==6&&Se[X-1]&1||L==(se.s<0?8:7)),X<1||!Se[0])N=oe?v(U.charAt(1),-ue,U.charAt(0)):U.charAt(0);else{if(Se.length=X,oe)for(--I;++Se[--X]>I;)Se[X]=0,X||(++Q,Se=[1].concat(Se));for(k=Se.length;!Se[--k];);for(Oe=0,N="";Oe<=k;N+=U.charAt(Se[Oe++]));N=v(N,Q,U.charAt(0))}return N}})(),F=(function(){function V(A,I,q){var H,U,X,Q,k=0,oe=A.length,se=I%f,Se=I/f|0;for(A=A.slice();oe--;)X=A[oe]%f,Q=A[oe]/f|0,H=Se*X+Q*se,U=se*X+H%f*f+k,k=(U/q|0)+(H/f|0)+Se*Q,A[oe]=U%q;return k&&(A=[k].concat(A)),A}function P(A,I,q,H){var U,X;if(q!=H)X=q>H?1:-1;else for(U=X=0;U<q;U++)if(A[U]!=I[U]){X=A[U]>I[U]?1:-1;break}return X}function N(A,I,q,H){for(var U=0;q--;)A[q]-=U,U=A[q]<I[q]?1:0,A[q]=U*H+A[q]-I[q];for(;!A[0]&&A.length>1;A.splice(0,1));}return function(A,I,q,H,U){var X,Q,k,oe,se,Se,Me,Oe,ue,L,x,j,z,W,le,ae,De,Ve=A.s==I.s?1:-1,Be=A.c,Ze=I.c;if(!Be||!Be[0]||!Ze||!Ze[0])return new re(!A.s||!I.s||(Be?Ze&&Be[0]==Ze[0]:!Ze)?NaN:Be&&Be[0]==0||!Ze?Ve*0:Ve/0);for(Oe=new re(Ve),ue=Oe.c=[],Q=A.e-I.e,Ve=q+Q+1,U||(U=c,Q=y(A.e/s)-y(I.e/s),Ve=Ve/s|0),k=0;Ze[k]==(Be[k]||0);k++);if(Ze[k]>(Be[k]||0)&&Q--,Ve<0)ue.push(1),oe=!0;else{for(W=Be.length,ae=Ze.length,k=0,Ve+=2,se=e(U/(Ze[0]+1)),se>1&&(Ze=V(Ze,se,U),Be=V(Be,se,U),ae=Ze.length,W=Be.length),z=ae,L=Be.slice(0,ae),x=L.length;x<ae;L[x++]=0);De=Ze.slice(),De=[0].concat(De),le=Ze[0],Ze[1]>=U/2&&le++;do{if(se=0,X=P(Ze,L,ae,x),X<0){if(j=L[0],ae!=x&&(j=j*U+(L[1]||0)),se=e(j/le),se>1)for(se>=U&&(se=U-1),Se=V(Ze,se,U),Me=Se.length,x=L.length;P(Se,L,Me,x)==1;)se--,N(Se,ae<Me?De:Ze,Me,U),Me=Se.length,X=1;else se==0&&(X=se=1),Se=Ze.slice(),Me=Se.length;if(Me<x&&(Se=[0].concat(Se)),N(L,Se,x,U),x=L.length,X==-1)for(;P(Ze,L,ae,x)<1;)se++,N(L,ae<x?De:Ze,x,U),x=L.length}else X===0&&(se++,L=[0]);ue[k++]=se,L[0]?L[x++]=Be[z]||0:(L=[Be[z]],x=1)}while((z++<W||L[0]!=null)&&Ve--);oe=L[0]!=null,ue[0]||ue.splice(0,1)}if(U==c){for(k=1,Ve=ue[0];Ve>=10;Ve/=10,k++);he(Oe,q+(Oe.e=k+Q*s-1)+1,H,oe)}else Oe.e=Q,Oe.r=+oe;return Oe}})();function xe(V,P,N,A){var I,q,H,U,X;if(N==null?N=D:m(N,0,8),!V.c)return V.toString();if(I=V.c[0],H=V.e,P==null)X=_(V.c),X=A==1||A==2&&(H<=B||H>=C)?T(X,H):v(X,H,"0");else if(V=he(new re(V),P,N),q=V.e,X=_(V.c),U=X.length,A==1||A==2&&(P<=q||q<=B)){for(;U<P;X+="0",U++);X=T(X,q)}else if(P-=H+(A===2&&q>H),X=v(X,q,"0"),q+1>U){if(--P>0)for(X+=".";P--;X+="0");}else if(P+=q-U,P>0)for(q+1==U&&(X+=".");P--;X+="0");return V.s<0&&I?"-"+X:X}function Re(V,P){for(var N,A,I=1,q=new re(V[0]);I<V.length;I++)A=new re(V[I]),(!A.s||(N=b(q,A))===P||N===0&&q.s===P)&&(q=A);return q}function Ie(V,P,N){for(var A=1,I=P.length;!P[--I];P.pop());for(I=P[0];I>=10;I/=10,A++);return(N=A+N*s-1)>Z?V.c=V.e=null:N<$?V.c=[V.e=0]:(V.e=N,V.c=P),V}O=(function(){var V=/^(-?)0([xbo])(?=\w[\w.]*$)/i,P=/^([^.]+)\.$/,N=/^\.([^.]+)$/,A=/^-?(Infinity|NaN)$/,I=/^\s*\+(?=[\w.])|^\s+|\s+$/g;return function(q,H,U,X){var Q,k=U?H:H.replace(I,"");if(A.test(k))q.s=isNaN(k)?null:k<0?-1:1;else{if(!U&&(k=k.replace(V,function(oe,se,Se){return Q=(Se=Se.toLowerCase())=="x"?16:Se=="b"?2:8,!X||X==Q?se:oe}),X&&(Q=X,k=k.replace(P,"$1").replace(N,"0.$1")),H!=k))return new re(k,Q);if(re.DEBUG)throw Error(r+"Not a"+(X?" base "+X:"")+" number: "+H);q.s=null}q.c=q.e=null}})();function he(V,P,N,A){var I,q,H,U,X,Q,k,oe=V.c,se=l;if(oe){e:{for(I=1,U=oe[0];U>=10;U/=10,I++);if(q=P-I,q<0)q+=s,H=P,X=oe[Q=0],k=e(X/se[I-H-1]%10);else if(Q=t((q+1)/s),Q>=oe.length)if(A){for(;oe.length<=Q;oe.push(0));X=k=0,I=1,q%=s,H=q-s+1}else break e;else{for(X=U=oe[Q],I=1;U>=10;U/=10,I++);q%=s,H=q-s+I,k=H<0?0:e(X/se[I-H-1]%10)}if(A=A||P<0||oe[Q+1]!=null||(H<0?X:X%se[I-H-1]),A=N<4?(k||A)&&(N==0||N==(V.s<0?3:2)):k>5||k==5&&(N==4||A||N==6&&(q>0?H>0?X/se[I-H]:0:oe[Q-1])%10&1||N==(V.s<0?8:7)),P<1||!oe[0])return oe.length=0,A?(P-=V.e+1,oe[0]=se[(s-P%s)%s],V.e=-P||0):oe[0]=V.e=0,V;if(q==0?(oe.length=Q,U=1,Q--):(oe.length=Q+1,U=se[s-q],oe[Q]=H>0?e(X/se[I-H]%se[H])*U:0),A)for(;;)if(Q==0){for(q=1,H=oe[0];H>=10;H/=10,q++);for(H=oe[0]+=U,U=1;H>=10;H/=10,U++);q!=U&&(V.e++,oe[0]==c&&(oe[0]=1));break}else{if(oe[Q]+=U,oe[Q]!=c)break;oe[Q--]=0,U=1}for(q=oe.length;oe[--q]===0;oe.pop());}V.e>Z?V.c=V.e=null:V.e<$&&(V.c=[V.e=0])}return V}function be(V){var P,N=V.e;return N===null?V.toString():(P=_(V.c),P=N<=B||N>=C?T(P,N):v(P,N,"0"),V.s<0?"-"+P:P)}return w.absoluteValue=w.abs=function(){var V=new re(this);return V.s<0&&(V.s=1),V},w.comparedTo=function(V,P){return b(this,new re(V,P))},w.decimalPlaces=w.dp=function(V,P){var N,A,I,q=this;if(V!=null)return m(V,0,h),P==null?P=D:m(P,0,8),he(new re(q),V+q.e+1,P);if(!(N=q.c))return null;if(A=((I=N.length-1)-y(this.e/s))*s,I=N[I])for(;I%10==0;I/=10,A--);return A<0&&(A=0),A},w.dividedBy=w.div=function(V,P){return F(this,new re(V,P),R,D)},w.dividedToIntegerBy=w.idiv=function(V,P){return F(this,new re(V,P),0,1)},w.exponentiatedBy=w.pow=function(V,P){var N,A,I,q,H,U,X,Q,k,oe=this;if(V=new re(V),V.c&&!V.isInteger())throw Error(r+"Exponent not an integer: "+be(V));if(P!=null&&(P=new re(P)),U=V.e>14,!oe.c||!oe.c[0]||oe.c[0]==1&&!oe.e&&oe.c.length==1||!V.c||!V.c[0])return k=new re(Math.pow(+be(oe),U?V.s*(2-g(V)):+be(V))),P?k.mod(P):k;if(X=V.s<0,P){if(P.c?!P.c[0]:!P.s)return new re(NaN);A=!X&&oe.isInteger()&&P.isInteger(),A&&(oe=oe.mod(P))}else{if(V.e>9&&(oe.e>0||oe.e<-1||(oe.e==0?oe.c[0]>1||U&&oe.c[1]>=24e7:oe.c[0]<8e13||U&&oe.c[0]<=9999975e7)))return q=oe.s<0&&g(V)?-0:0,oe.e>-1&&(q=1/q),new re(X?1/q:q);G&&(q=t(G/s+2))}for(U?(N=new re(.5),X&&(V.s=1),Q=g(V)):(I=Math.abs(+be(V)),Q=I%2),k=new re(E);;){if(Q){if(k=k.times(oe),!k.c)break;q?k.c.length>q&&(k.c.length=q):A&&(k=k.mod(P))}if(I){if(I=e(I/2),I===0)break;Q=I%2}else if(V=V.times(N),he(V,V.e+1,1),V.e>14)Q=g(V);else{if(I=+be(V),I===0)break;Q=I%2}oe=oe.times(oe),q?oe.c&&oe.c.length>q&&(oe.c.length=q):A&&(oe=oe.mod(P))}return A?k:(X&&(k=E.div(k)),P?k.mod(P):q?he(k,G,D,H):k)},w.integerValue=function(V){var P=new re(this);return V==null?V=D:m(V,0,8),he(P,P.e+1,V)},w.isEqualTo=w.eq=function(V,P){return b(this,new re(V,P))===0},w.isFinite=function(){return!!this.c},w.isGreaterThan=w.gt=function(V,P){return b(this,new re(V,P))>0},w.isGreaterThanOrEqualTo=w.gte=function(V,P){return(P=b(this,new re(V,P)))===1||P===0},w.isInteger=function(){return!!this.c&&y(this.e/s)>this.c.length-2},w.isLessThan=w.lt=function(V,P){return b(this,new re(V,P))<0},w.isLessThanOrEqualTo=w.lte=function(V,P){return(P=b(this,new re(V,P)))===-1||P===0},w.isNaN=function(){return!this.s},w.isNegative=function(){return this.s<0},w.isPositive=function(){return this.s>0},w.isZero=function(){return!!this.c&&this.c[0]==0},w.minus=function(V,P){var N,A,I,q,H=this,U=H.s;if(V=new re(V,P),P=V.s,!U||!P)return new re(NaN);if(U!=P)return V.s=-P,H.plus(V);var X=H.e/s,Q=V.e/s,k=H.c,oe=V.c;if(!X||!Q){if(!k||!oe)return k?(V.s=-P,V):new re(oe?H:NaN);if(!k[0]||!oe[0])return oe[0]?(V.s=-P,V):new re(k[0]?H:D==3?-0:0)}if(X=y(X),Q=y(Q),k=k.slice(),U=X-Q){for((q=U<0)?(U=-U,I=k):(Q=X,I=oe),I.reverse(),P=U;P--;I.push(0));I.reverse()}else for(A=(q=(U=k.length)<(P=oe.length))?U:P,U=P=0;P<A;P++)if(k[P]!=oe[P]){q=k[P]<oe[P];break}if(q&&(I=k,k=oe,oe=I,V.s=-V.s),P=(A=oe.length)-(N=k.length),P>0)for(;P--;k[N++]=0);for(P=c-1;A>U;){if(k[--A]<oe[A]){for(N=A;N&&!k[--N];k[N]=P);--k[N],k[A]+=c}k[A]-=oe[A]}for(;k[0]==0;k.splice(0,1),--Q);return k[0]?Ie(V,k,Q):(V.s=D==3?-1:1,V.c=[V.e=0],V)},w.modulo=w.mod=function(V,P){var N,A,I=this;return V=new re(V,P),!I.c||!V.s||V.c&&!V.c[0]?new re(NaN):!V.c||I.c&&!I.c[0]?new re(I):(ce==9?(A=V.s,V.s=1,N=F(I,V,0,3),V.s=A,N.s*=A):N=F(I,V,0,ce),V=I.minus(N.times(V)),!V.c[0]&&ce==1&&(V.s=I.s),V)},w.multipliedBy=w.times=function(V,P){var N,A,I,q,H,U,X,Q,k,oe,se,Se,Me,Oe,ue,L=this,x=L.c,j=(V=new re(V,P)).c;if(!x||!j||!x[0]||!j[0])return!L.s||!V.s||x&&!x[0]&&!j||j&&!j[0]&&!x?V.c=V.e=V.s=null:(V.s*=L.s,!x||!j?V.c=V.e=null:(V.c=[0],V.e=0)),V;for(A=y(L.e/s)+y(V.e/s),V.s*=L.s,X=x.length,oe=j.length,X<oe&&(Me=x,x=j,j=Me,I=X,X=oe,oe=I),I=X+oe,Me=[];I--;Me.push(0));for(Oe=c,ue=f,I=oe;--I>=0;){for(N=0,se=j[I]%ue,Se=j[I]/ue|0,H=X,q=I+H;q>I;)Q=x[--H]%ue,k=x[H]/ue|0,U=Se*Q+k*se,Q=se*Q+U%ue*ue+Me[q]+N,N=(Q/Oe|0)+(U/ue|0)+Se*k,Me[q--]=Q%Oe;Me[q]=N}return N?++A:Me.splice(0,1),Ie(V,Me,A)},w.negated=function(){var V=new re(this);return V.s=-V.s||null,V},w.plus=function(V,P){var N,A=this,I=A.s;if(V=new re(V,P),P=V.s,!I||!P)return new re(NaN);if(I!=P)return V.s=-P,A.minus(V);var q=A.e/s,H=V.e/s,U=A.c,X=V.c;if(!q||!H){if(!U||!X)return new re(I/0);if(!U[0]||!X[0])return X[0]?V:new re(U[0]?A:I*0)}if(q=y(q),H=y(H),U=U.slice(),I=q-H){for(I>0?(H=q,N=X):(I=-I,N=U),N.reverse();I--;N.push(0));N.reverse()}for(I=U.length,P=X.length,I-P<0&&(N=X,X=U,U=N,P=I),I=0;P;)I=(U[--P]=U[P]+X[P]+I)/c|0,U[P]=c===U[P]?0:U[P]%c;return I&&(U=[I].concat(U),++H),Ie(V,U,H)},w.precision=w.sd=function(V,P){var N,A,I,q=this;if(V!=null&&V!==!!V)return m(V,1,h),P==null?P=D:m(P,0,8),he(new re(q),V,P);if(!(N=q.c))return null;if(I=N.length-1,A=I*s+1,I=N[I]){for(;I%10==0;I/=10,A--);for(I=N[0];I>=10;I/=10,A++);}return V&&q.e+1>A&&(A=q.e+1),A},w.shiftedBy=function(V){return m(V,-d,d),this.times("1e"+V)},w.squareRoot=w.sqrt=function(){var V,P,N,A,I,q=this,H=q.c,U=q.s,X=q.e,Q=R+4,k=new re("0.5");if(U!==1||!H||!H[0])return new re(!U||U<0&&(!H||H[0])?NaN:H?q:1/0);if(U=Math.sqrt(+be(q)),U==0||U==1/0?(P=_(H),(P.length+X)%2==0&&(P+="0"),U=Math.sqrt(+P),X=y((X+1)/2)-(X<0||X%2),U==1/0?P="5e"+X:(P=U.toExponential(),P=P.slice(0,P.indexOf("e")+1)+X),N=new re(P)):N=new re(U+""),N.c[0]){for(X=N.e,U=X+Q,U<3&&(U=0);;)if(I=N,N=k.times(I.plus(F(q,I,Q,1))),_(I.c).slice(0,U)===(P=_(N.c)).slice(0,U))if(N.e<X&&--U,P=P.slice(U-3,U+1),P=="9999"||!A&&P=="4999"){if(!A&&(he(I,I.e+R+2,0),I.times(I).eq(q))){N=I;break}Q+=4,U+=4,A=1}else{(!+P||!+P.slice(1)&&P.charAt(0)=="5")&&(he(N,N.e+R+2,1),V=!N.times(N).eq(q));break}}return he(N,N.e+R+1,D,V)},w.toExponential=function(V,P){return V!=null&&(m(V,0,h),V++),xe(this,V,P,1)},w.toFixed=function(V,P){return V!=null&&(m(V,0,h),V=V+this.e+1),xe(this,V,P)},w.toFormat=function(V,P,N){var A,I=this;if(N==null)V!=null&&P&&typeof P=="object"?(N=P,P=null):V&&typeof V=="object"?(N=V,V=P=null):N=fe;else if(typeof N!="object")throw Error(r+"Argument not an object: "+N);if(A=I.toFixed(V,P),I.c){var q,H=A.split("."),U=+N.groupSize,X=+N.secondaryGroupSize,Q=N.groupSeparator||"",k=H[0],oe=H[1],se=I.s<0,Se=se?k.slice(1):k,Me=Se.length;if(X&&(q=U,U=X,X=q,Me-=q),U>0&&Me>0){for(q=Me%U||U,k=Se.substr(0,q);q<Me;q+=U)k+=Q+Se.substr(q,U);X>0&&(k+=Q+Se.slice(q)),se&&(k="-"+k)}A=oe?k+(N.decimalSeparator||"")+((X=+N.fractionGroupSize)?oe.replace(new RegExp("\\d{"+X+"}\\B","g"),"$&"+(N.fractionGroupSeparator||"")):oe):k}return(N.prefix||"")+A+(N.suffix||"")},w.toFraction=function(V){var P,N,A,I,q,H,U,X,Q,k,oe,se,Se=this,Me=Se.c;if(V!=null&&(U=new re(V),!U.isInteger()&&(U.c||U.s!==1)||U.lt(E)))throw Error(r+"Argument "+(U.isInteger()?"out of range: ":"not an integer: ")+be(U));if(!Me)return new re(Se);for(P=new re(E),Q=N=new re(E),A=X=new re(E),se=_(Me),q=P.e=se.length-Se.e-1,P.c[0]=l[(H=q%s)<0?s+H:H],V=!V||U.comparedTo(P)>0?q>0?P:Q:U,H=Z,Z=1/0,U=new re(se),X.c[0]=0;k=F(U,P,0,1),I=N.plus(k.times(A)),I.comparedTo(V)!=1;)N=A,A=I,Q=X.plus(k.times(I=Q)),X=I,P=U.minus(k.times(I=P)),U=I;return I=F(V.minus(N),A,0,1),X=X.plus(I.times(Q)),N=N.plus(I.times(A)),X.s=Q.s=Se.s,q=q*2,oe=F(Q,A,q,D).minus(Se).abs().comparedTo(F(X,N,q,D).minus(Se).abs())<1?[Q,A]:[X,N],Z=H,oe},w.toNumber=function(){return+be(this)},w.toPrecision=function(V,P){return V!=null&&m(V,1,h),xe(this,V,P,2)},w.toString=function(V){var P,N=this,A=N.s,I=N.e;return I===null?A?(P="Infinity",A<0&&(P="-"+P)):P="NaN":(V==null?P=I<=B||I>=C?T(_(N.c),I):v(_(N.c),I,"0"):V===10&&ye?(N=he(new re(N),R+I+1,D),P=v(_(N.c),N.e,"0")):(m(V,2,me.length,"Base"),P=M(v(_(N.c),I,"0"),10,V,A,!0)),A<0&&N.c[0]&&(P="-"+P)),P},w.valueOf=w.toJSON=function(){return be(this)},w._isBigNumber=!0,S!=null&&re.set(S),re}function y(S){var F=S|0;return S>0||S===F?F:F-1}function _(S){for(var F,M,O=1,w=S.length,E=S[0]+"";O<w;){for(F=S[O++]+"",M=s-F.length;M--;F="0"+F);E+=F}for(w=E.length;E.charCodeAt(--w)===48;);return E.slice(0,w+1||1)}function b(S,F){var M,O,w=S.c,E=F.c,R=S.s,D=F.s,B=S.e,C=F.e;if(!R||!D)return null;if(M=w&&!w[0],O=E&&!E[0],M||O)return M?O?0:-D:R;if(R!=D)return R;if(M=R<0,O=B==C,!w||!E)return O?0:!w^M?1:-1;if(!O)return B>C^M?1:-1;for(D=(B=w.length)<(C=E.length)?B:C,R=0;R<D;R++)if(w[R]!=E[R])return w[R]>E[R]^M?1:-1;return B==C?0:B>C^M?1:-1}function m(S,F,M,O){if(S<F||S>M||S!==e(S))throw Error(r+(O||"Argument")+(typeof S=="number"?S<F||S>M?" out of range: ":" not an integer: ":" not a primitive number: ")+String(S))}function g(S){var F=S.c.length-1;return y(S.e/s)==F&&S.c[F]%2!=0}function T(S,F){return(S.length>1?S.charAt(0)+"."+S.slice(1):S)+(F<0?"e":"e+")+F}function v(S,F,M){var O,w;if(F<0){for(w=M+".";++F;w+=M);S=w+S}else if(O=S.length,++F>O){for(w=M,F-=O;--F;w+=M);S+=w}else F<O&&(S=S.slice(0,F)+"."+S.slice(F));return S}o=p(),o.default=o.BigNumber=o,u.exports?u.exports=o:(n||(n=typeof self<"u"&&self?self:window),n.BigNumber=o)})(kre)})(H3)),H3.exports}var OL;function Wre(){if(OL)return Fy;OL=1,Object.defineProperty(Fy,"__esModule",{value:!0}),Fy.TermFunctionAddition=void 0;const u=Te(),n=ge(),o=G3();let i=class extends u.TermFunctionBase{constructor(){super({arity:2,operator:n.SparqlOperator.ADDITION,overloads:(0,n.declare)(n.SparqlOperator.ADDITION).arithmetic(()=>(e,r)=>new o.BigNumber(e).plus(r).toNumber()).set([n.TypeURL.XSD_DATE_TIME,n.TypeURL.XSD_DAY_TIME_DURATION],()=>([e,r])=>new n.DateTimeLiteral((0,n.addDurationToDateTime)(e.typedValue,(0,n.defaultedDurationRepresentation)(r.typedValue)))).copy({from:[n.TypeURL.XSD_DATE_TIME,n.TypeURL.XSD_DAY_TIME_DURATION],to:[n.TypeURL.XSD_DATE_TIME,n.TypeURL.XSD_YEAR_MONTH_DURATION]}).set([n.TypeURL.XSD_DATE,n.TypeURL.XSD_DAY_TIME_DURATION],()=>([e,r])=>new n.DateLiteral((0,n.addDurationToDateTime)((0,n.defaultedDateTimeRepresentation)(e.typedValue),(0,n.defaultedDurationRepresentation)(r.typedValue)))).copy({from:[n.TypeURL.XSD_DATE,n.TypeURL.XSD_DAY_TIME_DURATION],to:[n.TypeURL.XSD_DATE,n.TypeURL.XSD_YEAR_MONTH_DURATION]}).set([n.TypeURL.XSD_TIME,n.TypeURL.XSD_DAY_TIME_DURATION],()=>([e,r])=>new n.TimeLiteral((0,n.addDurationToDateTime)((0,n.defaultedDateTimeRepresentation)(e.typedValue),(0,n.defaultedDurationRepresentation)(r.typedValue)))).copy({from:[n.TypeURL.XSD_TIME,n.TypeURL.XSD_DAY_TIME_DURATION],to:[n.TypeURL.XSD_TIME,n.TypeURL.XSD_YEAR_MONTH_DURATION]}).collect()})}};return Fy.TermFunctionAddition=i,Fy}var AL;function Yre(){if(AL)return Ry;AL=1,Object.defineProperty(Ry,"__esModule",{value:!0}),Ry.ActorFunctionFactoryTermAddition=void 0;const u=Te(),n=ge(),o=Wre();let i=class extends u.ActorFunctionFactoryDedicated{constructor(e){super({...e,functionNames:[n.SparqlOperator.ADDITION],termFunction:!0})}async run(e){return new o.TermFunctionAddition}};return Ry.ActorFunctionFactoryTermAddition=i,Ry}var EL;function Zre(){return EL||(EL=1,(function(u){var n=Qo&&Qo.__createBinding||(Object.create?(function(i,t,e,r){r===void 0&&(r=e);var a=Object.getOwnPropertyDescriptor(t,e);(!a||("get"in a?!t.__esModule:a.writable||a.configurable))&&(a={enumerable:!0,get:function(){return t[e]}}),Object.defineProperty(i,r,a)}):(function(i,t,e,r){r===void 0&&(r=e),i[r]=t[e]})),o=Qo&&Qo.__exportStar||function(i,t){for(var e in i)e!=="default"&&!Object.prototype.hasOwnProperty.call(t,e)&&n(t,i,e)};Object.defineProperty(u,"__esModule",{value:!0}),o(Yre(),u)})(Qo)),Qo}var Ho={},Iy={},Py={},xL;function ene(){if(xL)return Py;xL=1,Object.defineProperty(Py,"__esModule",{value:!0}),Py.TermFunctionCeil=void 0;const u=Te(),n=ge();let o=class extends u.TermFunctionBase{constructor(){super({arity:1,operator:n.SparqlOperator.CEIL,overloads:(0,n.declare)(n.SparqlOperator.CEIL).numericConverter(()=>t=>Math.ceil(t)).collect()})}};return Py.TermFunctionCeil=o,Py}var RL;function tne(){if(RL)return Iy;RL=1,Object.defineProperty(Iy,"__esModule",{value:!0}),Iy.ActorFunctionFactoryTermCeil=void 0;const u=Te(),n=ge(),o=ene();let i=class extends u.ActorFunctionFactoryDedicated{constructor(e){super({...e,functionNames:[n.SparqlOperator.CEIL],termFunction:!0})}async run(e){return new o.TermFunctionCeil}};return Iy.ActorFunctionFactoryTermCeil=i,Iy}var FL;function rne(){return FL||(FL=1,(function(u){var n=Ho&&Ho.__createBinding||(Object.create?(function(i,t,e,r){r===void 0&&(r=e);var a=Object.getOwnPropertyDescriptor(t,e);(!a||("get"in a?!t.__esModule:a.writable||a.configurable))&&(a={enumerable:!0,get:function(){return t[e]}}),Object.defineProperty(i,r,a)}):(function(i,t,e,r){r===void 0&&(r=e),i[r]=t[e]})),o=Ho&&Ho.__exportStar||function(i,t){for(var e in i)e!=="default"&&!Object.prototype.hasOwnProperty.call(t,e)&&n(t,i,e)};Object.defineProperty(u,"__esModule",{value:!0}),o(tne(),u)})(Ho)),Ho}var Go={},Dy={},Ny={},IL;function nne(){if(IL)return Ny;IL=1,Object.defineProperty(Ny,"__esModule",{value:!0}),Ny.TermFunctionContains=void 0;const u=Te(),n=ge();let o=class extends u.TermFunctionBase{constructor(){super({arity:2,operator:n.SparqlOperator.CONTAINS,overloads:(0,n.declare)(n.SparqlOperator.CONTAINS).onBinaryTyped([n.TypeAlias.SPARQL_STRINGLY,n.TypeURL.XSD_STRING],()=>(t,e)=>(0,n.bool)(t.includes(e))).onBinary([n.TypeURL.RDF_LANG_STRING,n.TypeURL.RDF_LANG_STRING],()=>(t,e)=>{if(t.language!==e.language)throw new n.IncompatibleLanguageOperation(t,e);return(0,n.bool)(t.typedValue.includes(e.typedValue))}).collect()})}};return Ny.TermFunctionContains=o,Ny}var PL;function ine(){if(PL)return Dy;PL=1,Object.defineProperty(Dy,"__esModule",{value:!0}),Dy.ActorFunctionFactoryTermContains=void 0;const u=Te(),n=ge(),o=nne();let i=class extends u.ActorFunctionFactoryDedicated{constructor(e){super({...e,functionNames:[n.SparqlOperator.CONTAINS],termFunction:!0})}async run(e){return new o.TermFunctionContains}};return Dy.ActorFunctionFactoryTermContains=i,Dy}var DL;function ane(){return DL||(DL=1,(function(u){var n=Go&&Go.__createBinding||(Object.create?(function(i,t,e,r){r===void 0&&(r=e);var a=Object.getOwnPropertyDescriptor(t,e);(!a||("get"in a?!t.__esModule:a.writable||a.configurable))&&(a={enumerable:!0,get:function(){return t[e]}}),Object.defineProperty(i,r,a)}):(function(i,t,e,r){r===void 0&&(r=e),i[r]=t[e]})),o=Go&&Go.__exportStar||function(i,t){for(var e in i)e!=="default"&&!Object.prototype.hasOwnProperty.call(t,e)&&n(t,i,e)};Object.defineProperty(u,"__esModule",{value:!0}),o(ine(),u)})(Go)),Go}var zo={},jy={},Ly={},NL;function une(){if(NL)return Ly;NL=1,Object.defineProperty(Ly,"__esModule",{value:!0}),Ly.TermFunctionDatatype=void 0;const u=Te(),n=ge();let o=class extends u.TermFunctionBase{constructor(){super({arity:1,operator:n.SparqlOperator.DATATYPE,overloads:(0,n.declare)(n.SparqlOperator.DATATYPE).onLiteral1(()=>t=>new n.NamedNode(t.dataType)).collect()})}};return Ly.TermFunctionDatatype=o,Ly}var jL;function one(){if(jL)return jy;jL=1,Object.defineProperty(jy,"__esModule",{value:!0}),jy.ActorFunctionFactoryTermDatatype=void 0;const u=Te(),n=ge(),o=une();let i=class extends u.ActorFunctionFactoryDedicated{constructor(e){super({...e,functionNames:[n.SparqlOperator.DATATYPE],termFunction:!0})}async run(e){return new o.TermFunctionDatatype}};return jy.ActorFunctionFactoryTermDatatype=i,jy}var LL;function sne(){return LL||(LL=1,(function(u){var n=zo&&zo.__createBinding||(Object.create?(function(i,t,e,r){r===void 0&&(r=e);var a=Object.getOwnPropertyDescriptor(t,e);(!a||("get"in a?!t.__esModule:a.writable||a.configurable))&&(a={enumerable:!0,get:function(){return t[e]}}),Object.defineProperty(i,r,a)}):(function(i,t,e,r){r===void 0&&(r=e),i[r]=t[e]})),o=zo&&zo.__exportStar||function(i,t){for(var e in i)e!=="default"&&!Object.prototype.hasOwnProperty.call(t,e)&&n(t,i,e)};Object.defineProperty(u,"__esModule",{value:!0}),o(one(),u)})(zo)),zo}var Xo={},My={},qy={},ML;function cne(){if(ML)return qy;ML=1,Object.defineProperty(qy,"__esModule",{value:!0}),qy.TermFunctionDay=void 0;const u=Te(),n=ge();let o=class extends u.TermFunctionBase{constructor(){super({arity:1,operator:n.SparqlOperator.DAY,overloads:(0,n.declare)(n.SparqlOperator.DAY).onDateTime1(()=>t=>(0,n.integer)(t.typedValue.day)).set([n.TypeURL.XSD_DATE],()=>([t])=>(0,n.integer)(t.typedValue.day)).collect()})}};return qy.TermFunctionDay=o,qy}var qL;function dne(){if(qL)return My;qL=1,Object.defineProperty(My,"__esModule",{value:!0}),My.ActorFunctionFactoryTermDay=void 0;const u=Te(),n=ge(),o=cne();let i=class extends u.ActorFunctionFactoryDedicated{constructor(e){super({...e,functionNames:[n.SparqlOperator.DAY],termFunction:!0})}async run(e){return new o.TermFunctionDay}};return My.ActorFunctionFactoryTermDay=i,My}var CL;function lne(){return CL||(CL=1,(function(u){var n=Xo&&Xo.__createBinding||(Object.create?(function(i,t,e,r){r===void 0&&(r=e);var a=Object.getOwnPropertyDescriptor(t,e);(!a||("get"in a?!t.__esModule:a.writable||a.configurable))&&(a={enumerable:!0,get:function(){return t[e]}}),Object.defineProperty(i,r,a)}):(function(i,t,e,r){r===void 0&&(r=e),i[r]=t[e]})),o=Xo&&Xo.__exportStar||function(i,t){for(var e in i)e!=="default"&&!Object.prototype.hasOwnProperty.call(t,e)&&n(t,i,e)};Object.defineProperty(u,"__esModule",{value:!0}),o(dne(),u)})(Xo)),Xo}var Jo={},Cy={},By={},BL;function fne(){if(BL)return By;BL=1,Object.defineProperty(By,"__esModule",{value:!0}),By.TermFunctionDivision=void 0;const u=Te(),n=ge(),o=G3();let i=class extends u.TermFunctionBase{constructor(){super({arity:2,operator:n.SparqlOperator.DIVISION,overloads:(0,n.declare)(n.SparqlOperator.DIVISION).arithmetic(()=>(e,r)=>new o.BigNumber(e).div(r).toNumber()).onBinaryTyped([n.TypeURL.XSD_INTEGER,n.TypeURL.XSD_INTEGER],()=>(e,r)=>{if(r===0)throw new n.ExpressionError("Integer division by 0");return(0,n.decimal)(new o.BigNumber(e).div(r).toNumber())}).collect()})}};return By.TermFunctionDivision=i,By}var $L;function hne(){if($L)return Cy;$L=1,Object.defineProperty(Cy,"__esModule",{value:!0}),Cy.ActorFunctionFactoryTermDivision=void 0;const u=Te(),n=ge(),o=fne();let i=class extends u.ActorFunctionFactoryDedicated{constructor(e){super({...e,functionNames:[n.SparqlOperator.DIVISION],termFunction:!0})}async run(e){return new o.TermFunctionDivision}};return Cy.ActorFunctionFactoryTermDivision=i,Cy}var UL;function pne(){return UL||(UL=1,(function(u){var n=Jo&&Jo.__createBinding||(Object.create?(function(i,t,e,r){r===void 0&&(r=e);var a=Object.getOwnPropertyDescriptor(t,e);(!a||("get"in a?!t.__esModule:a.writable||a.configurable))&&(a={enumerable:!0,get:function(){return t[e]}}),Object.defineProperty(i,r,a)}):(function(i,t,e,r){r===void 0&&(r=e),i[r]=t[e]})),o=Jo&&Jo.__exportStar||function(i,t){for(var e in i)e!=="default"&&!Object.prototype.hasOwnProperty.call(t,e)&&n(t,i,e)};Object.defineProperty(u,"__esModule",{value:!0}),o(hne(),u)})(Jo)),Jo}var Ko={},$y={},Uy={},VL;function yne(){if(VL)return Uy;VL=1,Object.defineProperty(Uy,"__esModule",{value:!0}),Uy.TermFunctionEncodeForUri=void 0;const u=Te(),n=ge();let o=class extends u.TermFunctionBase{constructor(){super({arity:1,operator:n.SparqlOperator.ENCODE_FOR_URI,overloads:(0,n.declare)(n.SparqlOperator.ENCODE_FOR_URI).onStringly1Typed(()=>t=>(0,n.string)(encodeURI(t))).collect()})}};return Uy.TermFunctionEncodeForUri=o,Uy}var QL;function bne(){if(QL)return $y;QL=1,Object.defineProperty($y,"__esModule",{value:!0}),$y.ActorFunctionFactoryTermEncodeForUri=void 0;const u=Te(),n=ge(),o=yne();let i=class extends u.ActorFunctionFactoryDedicated{constructor(e){super({...e,functionNames:[n.SparqlOperator.ENCODE_FOR_URI],termFunction:!0})}async run(e){return new o.TermFunctionEncodeForUri}};return $y.ActorFunctionFactoryTermEncodeForUri=i,$y}var HL;function _ne(){return HL||(HL=1,(function(u){var n=Ko&&Ko.__createBinding||(Object.create?(function(i,t,e,r){r===void 0&&(r=e);var a=Object.getOwnPropertyDescriptor(t,e);(!a||("get"in a?!t.__esModule:a.writable||a.configurable))&&(a={enumerable:!0,get:function(){return t[e]}}),Object.defineProperty(i,r,a)}):(function(i,t,e,r){r===void 0&&(r=e),i[r]=t[e]})),o=Ko&&Ko.__exportStar||function(i,t){for(var e in i)e!=="default"&&!Object.prototype.hasOwnProperty.call(t,e)&&n(t,i,e)};Object.defineProperty(u,"__esModule",{value:!0}),o(bne(),u)})(Ko)),Ko}var ko={},Vy={},Qy={},GL;function gne(){if(GL)return Qy;GL=1,Object.defineProperty(Qy,"__esModule",{value:!0}),Qy.TermFunctionEquality=void 0;const u=Te(),n=qe(),o=ge();let i=class extends u.TermFunctionBase{constructor(){super({arity:2,operator:o.SparqlOperator.EQUAL,overloads:(0,o.declare)(o.SparqlOperator.EQUAL).numberTest(()=>(e,r)=>e===r).stringTest(()=>(e,r)=>e.localeCompare(r)===0).set([o.TypeURL.RDF_LANG_STRING,o.TypeURL.RDF_LANG_STRING],()=>([e,r])=>(0,o.bool)(e.str()===r.str()&&e.language===r.language)).set([o.TypeAlias.SPARQL_STRINGLY,o.TypeAlias.SPARQL_STRINGLY],()=>()=>(0,o.bool)(!1)).booleanTest(()=>(e,r)=>e===r).dateTimeTest(e=>(r,a)=>(0,o.toUTCDate)(r,e.context.getSafe(n.KeysExpressionEvaluator.defaultTimeZone)).getTime()===(0,o.toUTCDate)(a,e.context.getSafe(n.KeysExpressionEvaluator.defaultTimeZone)).getTime()).copy({from:[o.TypeURL.XSD_DATE_TIME,o.TypeURL.XSD_DATE_TIME],to:[o.TypeURL.XSD_DATE,o.TypeURL.XSD_DATE]}).set(["quad","quad"],e=>([r,a])=>(0,o.bool)(this.applyOnTerms([r.subject,a.subject],e).coerceEBV()&&this.applyOnTerms([r.predicate,a.predicate],e).coerceEBV()&&this.applyOnTerms([r.object,a.object],e).coerceEBV()&&this.applyOnTerms([r.graph,a.graph],e).coerceEBV()),!1).set(["term","term"],e=>([r,a])=>{const c=r.toRDF(e.context.getSafe(n.KeysInitQuery.dataFactory)),s=a.toRDF(e.context.getSafe(n.KeysInitQuery.dataFactory)),d=c.equals(s);if(!d&&c.termType==="Literal"&&s.termType==="Literal")throw new o.RDFEqualTypeError([r,a]);return(0,o.bool)(d)},!1).set([o.TypeURL.XSD_DURATION,o.TypeURL.XSD_DURATION],()=>([e,r])=>(0,o.bool)((0,o.yearMonthDurationsToMonths)((0,o.defaultedYearMonthDurationRepresentation)(e.typedValue))===(0,o.yearMonthDurationsToMonths)((0,o.defaultedYearMonthDurationRepresentation)(r.typedValue))&&(0,o.dayTimeDurationsToSeconds)((0,o.defaultedDayTimeDurationRepresentation)(e.typedValue))===(0,o.dayTimeDurationsToSeconds)((0,o.defaultedDayTimeDurationRepresentation)(r.typedValue)))).set([o.TypeURL.XSD_TIME,o.TypeURL.XSD_TIME],e=>([r,a])=>(0,o.bool)((0,o.toUTCDate)((0,o.defaultedDateTimeRepresentation)(r.typedValue),e.context.getSafe(n.KeysExpressionEvaluator.defaultTimeZone)).getTime()===(0,o.toUTCDate)((0,o.defaultedDateTimeRepresentation)(a.typedValue),e.context.getSafe(n.KeysExpressionEvaluator.defaultTimeZone)).getTime())).collect()})}};return Qy.TermFunctionEquality=i,Qy}var zL;function mne(){if(zL)return Vy;zL=1,Object.defineProperty(Vy,"__esModule",{value:!0}),Vy.ActorFunctionFactoryTermEquality=void 0;const u=Te(),n=ge(),o=gne();let i=class extends u.ActorFunctionFactoryDedicated{constructor(e){super({...e,functionNames:[n.SparqlOperator.EQUAL],termFunction:!0})}async run(e){return new o.TermFunctionEquality}};return Vy.ActorFunctionFactoryTermEquality=i,Vy}var XL;function vne(){return XL||(XL=1,(function(u){var n=ko&&ko.__createBinding||(Object.create?(function(i,t,e,r){r===void 0&&(r=e);var a=Object.getOwnPropertyDescriptor(t,e);(!a||("get"in a?!t.__esModule:a.writable||a.configurable))&&(a={enumerable:!0,get:function(){return t[e]}}),Object.defineProperty(i,r,a)}):(function(i,t,e,r){r===void 0&&(r=e),i[r]=t[e]})),o=ko&&ko.__exportStar||function(i,t){for(var e in i)e!=="default"&&!Object.prototype.hasOwnProperty.call(t,e)&&n(t,i,e)};Object.defineProperty(u,"__esModule",{value:!0}),o(mne(),u)})(ko)),ko}var Wo={},Hy={},Gy={},JL;function Tne(){if(JL)return Gy;JL=1,Object.defineProperty(Gy,"__esModule",{value:!0}),Gy.TermFunctionFloor=void 0;const u=Te(),n=ge();let o=class extends u.TermFunctionBase{constructor(){super({arity:1,operator:n.SparqlOperator.FLOOR,overloads:(0,n.declare)(n.SparqlOperator.FLOOR).numericConverter(()=>t=>Math.floor(t)).collect()})}};return Gy.TermFunctionFloor=o,Gy}var KL;function wne(){if(KL)return Hy;KL=1,Object.defineProperty(Hy,"__esModule",{value:!0}),Hy.ActorFunctionFactoryTermFloor=void 0;const u=Te(),n=ge(),o=Tne();let i=class extends u.ActorFunctionFactoryDedicated{constructor(e){super({...e,functionNames:[n.SparqlOperator.FLOOR],termFunction:!0})}async run(e){return new o.TermFunctionFloor}};return Hy.ActorFunctionFactoryTermFloor=i,Hy}var kL;function Sne(){return kL||(kL=1,(function(u){var n=Wo&&Wo.__createBinding||(Object.create?(function(i,t,e,r){r===void 0&&(r=e);var a=Object.getOwnPropertyDescriptor(t,e);(!a||("get"in a?!t.__esModule:a.writable||a.configurable))&&(a={enumerable:!0,get:function(){return t[e]}}),Object.defineProperty(i,r,a)}):(function(i,t,e,r){r===void 0&&(r=e),i[r]=t[e]})),o=Wo&&Wo.__exportStar||function(i,t){for(var e in i)e!=="default"&&!Object.prototype.hasOwnProperty.call(t,e)&&n(t,i,e)};Object.defineProperty(u,"__esModule",{value:!0}),o(wne(),u)})(Wo)),Wo}var Yo={},zy={},Xy={},WL;function One(){if(WL)return Xy;WL=1,Object.defineProperty(Xy,"__esModule",{value:!0}),Xy.TermFunctionHours=void 0;const u=Te(),n=ge();let o=class extends u.TermFunctionBase{constructor(){super({arity:1,operator:n.SparqlOperator.HOURS,overloads:(0,n.declare)(n.SparqlOperator.HOURS).onDateTime1(()=>t=>(0,n.integer)(t.typedValue.hours)).set([n.TypeURL.XSD_TIME],()=>([t])=>(0,n.integer)(t.typedValue.hours)).collect()})}};return Xy.TermFunctionHours=o,Xy}var YL;function Ane(){if(YL)return zy;YL=1,Object.defineProperty(zy,"__esModule",{value:!0}),zy.ActorFunctionFactoryTermHours=void 0;const u=Te(),n=ge(),o=One();let i=class extends u.ActorFunctionFactoryDedicated{constructor(e){super({...e,functionNames:[n.SparqlOperator.HOURS],termFunction:!0})}async run(e){return new o.TermFunctionHours}};return zy.ActorFunctionFactoryTermHours=i,zy}var ZL;function Ene(){return ZL||(ZL=1,(function(u){var n=Yo&&Yo.__createBinding||(Object.create?(function(i,t,e,r){r===void 0&&(r=e);var a=Object.getOwnPropertyDescriptor(t,e);(!a||("get"in a?!t.__esModule:a.writable||a.configurable))&&(a={enumerable:!0,get:function(){return t[e]}}),Object.defineProperty(i,r,a)}):(function(i,t,e,r){r===void 0&&(r=e),i[r]=t[e]})),o=Yo&&Yo.__exportStar||function(i,t){for(var e in i)e!=="default"&&!Object.prototype.hasOwnProperty.call(t,e)&&n(t,i,e)};Object.defineProperty(u,"__esModule",{value:!0}),o(Ane(),u)})(Yo)),Yo}var Zo={},Jy={},Ky={},eM;function xne(){if(eM)return Ky;eM=1,Object.defineProperty(Ky,"__esModule",{value:!0}),Ky.TermFunctionIri=void 0;const u=Te(),n=qe(),o=ge(),i=Jr();let t=class extends u.TermFunctionBase{constructor(){super({arity:1,operator:o.SparqlOperator.IRI,overloads:(0,o.declare)(o.SparqlOperator.IRI).set(["namedNode"],r=>a=>{const c=a[0],s=(0,i.resolve)(c.str(),r.context.get(n.KeysInitQuery.baseIRI)??"");return new o.NamedNode(s)}).onString1(r=>a=>{const c=(0,i.resolve)(a.str(),r.context.get(n.KeysInitQuery.baseIRI)??"");return new o.NamedNode(c)}).collect()})}};return Ky.TermFunctionIri=t,Ky}var tM;function Rne(){if(tM)return Jy;tM=1,Object.defineProperty(Jy,"__esModule",{value:!0}),Jy.ActorFunctionFactoryTermIri=void 0;const u=Te(),n=ge(),o=xne();let i=class extends u.ActorFunctionFactoryDedicated{constructor(e){super({...e,functionNames:[n.SparqlOperator.IRI,n.SparqlOperator.URI],termFunction:!0})}async run(e){return new o.TermFunctionIri}};return Jy.ActorFunctionFactoryTermIri=i,Jy}var rM;function Fne(){return rM||(rM=1,(function(u){var n=Zo&&Zo.__createBinding||(Object.create?(function(i,t,e,r){r===void 0&&(r=e);var a=Object.getOwnPropertyDescriptor(t,e);(!a||("get"in a?!t.__esModule:a.writable||a.configurable))&&(a={enumerable:!0,get:function(){return t[e]}}),Object.defineProperty(i,r,a)}):(function(i,t,e,r){r===void 0&&(r=e),i[r]=t[e]})),o=Zo&&Zo.__exportStar||function(i,t){for(var e in i)e!=="default"&&!Object.prototype.hasOwnProperty.call(t,e)&&n(t,i,e)};Object.defineProperty(u,"__esModule",{value:!0}),o(Rne(),u)})(Zo)),Zo}var es={},ky={},Wy={},nM;function Ine(){if(nM)return Wy;nM=1,Object.defineProperty(Wy,"__esModule",{value:!0}),Wy.TermFunctionIsBlank=void 0;const u=Te(),n=ge();let o=class extends u.TermFunctionBase{constructor(){super({arity:1,operator:n.SparqlOperator.IS_BLANK,overloads:(0,n.declare)(n.SparqlOperator.IS_BLANK).onTerm1(()=>t=>(0,n.bool)(t.termType==="blankNode")).collect()})}};return Wy.TermFunctionIsBlank=o,Wy}var iM;function Pne(){if(iM)return ky;iM=1,Object.defineProperty(ky,"__esModule",{value:!0}),ky.ActorFunctionFactoryTermIsBlank=void 0;const u=Te(),n=ge(),o=Ine();let i=class extends u.ActorFunctionFactoryDedicated{constructor(e){super({...e,functionNames:[n.SparqlOperator.IS_BLANK],termFunction:!0})}async run(e){return new o.TermFunctionIsBlank}};return ky.ActorFunctionFactoryTermIsBlank=i,ky}var aM;function Dne(){return aM||(aM=1,(function(u){var n=es&&es.__createBinding||(Object.create?(function(i,t,e,r){r===void 0&&(r=e);var a=Object.getOwnPropertyDescriptor(t,e);(!a||("get"in a?!t.__esModule:a.writable||a.configurable))&&(a={enumerable:!0,get:function(){return t[e]}}),Object.defineProperty(i,r,a)}):(function(i,t,e,r){r===void 0&&(r=e),i[r]=t[e]})),o=es&&es.__exportStar||function(i,t){for(var e in i)e!=="default"&&!Object.prototype.hasOwnProperty.call(t,e)&&n(t,i,e)};Object.defineProperty(u,"__esModule",{value:!0}),o(Pne(),u)})(es)),es}var ts={},Yy={},Zy={},uM;function Nne(){if(uM)return Zy;uM=1,Object.defineProperty(Zy,"__esModule",{value:!0}),Zy.TermFunctionIsIri=void 0;const u=Te(),n=ge();let o=class extends u.TermFunctionBase{constructor(){super({arity:1,operator:n.SparqlOperator.IS_IRI,overloads:(0,n.declare)(n.SparqlOperator.IS_IRI).onTerm1(()=>t=>(0,n.bool)(t.termType==="namedNode")).collect()})}};return Zy.TermFunctionIsIri=o,Zy}var oM;function jne(){if(oM)return Yy;oM=1,Object.defineProperty(Yy,"__esModule",{value:!0}),Yy.ActorFunctionFactoryTermIsIri=void 0;const u=Te(),n=ge(),o=Nne();let i=class extends u.ActorFunctionFactoryDedicated{constructor(e){super({...e,functionNames:[n.SparqlOperator.IS_IRI,n.SparqlOperator.IS_URI],termFunction:!0})}async run(e){return new o.TermFunctionIsIri}};return Yy.ActorFunctionFactoryTermIsIri=i,Yy}var sM;function Lne(){return sM||(sM=1,(function(u){var n=ts&&ts.__createBinding||(Object.create?(function(i,t,e,r){r===void 0&&(r=e);var a=Object.getOwnPropertyDescriptor(t,e);(!a||("get"in a?!t.__esModule:a.writable||a.configurable))&&(a={enumerable:!0,get:function(){return t[e]}}),Object.defineProperty(i,r,a)}):(function(i,t,e,r){r===void 0&&(r=e),i[r]=t[e]})),o=ts&&ts.__exportStar||function(i,t){for(var e in i)e!=="default"&&!Object.prototype.hasOwnProperty.call(t,e)&&n(t,i,e)};Object.defineProperty(u,"__esModule",{value:!0}),o(jne(),u)})(ts)),ts}var rs={},eb={},tb={},cM;function Mne(){if(cM)return tb;cM=1,Object.defineProperty(tb,"__esModule",{value:!0}),tb.TermFunctionIsLiteral=void 0;const u=Te(),n=ge();let o=class extends u.TermFunctionBase{constructor(){super({arity:1,operator:n.SparqlOperator.IS_LITERAL,overloads:(0,n.declare)(n.SparqlOperator.IS_LITERAL).onTerm1(()=>t=>(0,n.bool)(t.termType==="literal")).collect()})}};return tb.TermFunctionIsLiteral=o,tb}var dM;function qne(){if(dM)return eb;dM=1,Object.defineProperty(eb,"__esModule",{value:!0}),eb.ActorFunctionFactoryTermIsLiteral=void 0;const u=Te(),n=ge(),o=Mne();let i=class extends u.ActorFunctionFactoryDedicated{constructor(e){super({...e,functionNames:[n.SparqlOperator.IS_LITERAL],termFunction:!0})}async run(e){return new o.TermFunctionIsLiteral}};return eb.ActorFunctionFactoryTermIsLiteral=i,eb}var lM;function Cne(){return lM||(lM=1,(function(u){var n=rs&&rs.__createBinding||(Object.create?(function(i,t,e,r){r===void 0&&(r=e);var a=Object.getOwnPropertyDescriptor(t,e);(!a||("get"in a?!t.__esModule:a.writable||a.configurable))&&(a={enumerable:!0,get:function(){return t[e]}}),Object.defineProperty(i,r,a)}):(function(i,t,e,r){r===void 0&&(r=e),i[r]=t[e]})),o=rs&&rs.__exportStar||function(i,t){for(var e in i)e!=="default"&&!Object.prototype.hasOwnProperty.call(t,e)&&n(t,i,e)};Object.defineProperty(u,"__esModule",{value:!0}),o(qne(),u)})(rs)),rs}var ns={},rb={},nb={},fM;function Bne(){if(fM)return nb;fM=1,Object.defineProperty(nb,"__esModule",{value:!0}),nb.TermFunctionIsNumeric=void 0;const u=Te(),n=ge();let o=class extends u.TermFunctionBase{constructor(){super({arity:1,operator:n.SparqlOperator.IS_NUMERIC,overloads:(0,n.declare)(n.SparqlOperator.IS_NUMERIC).onNumeric1(()=>()=>(0,n.bool)(!0)).onTerm1(()=>()=>(0,n.bool)(!1)).collect()})}};return nb.TermFunctionIsNumeric=o,nb}var hM;function $ne(){if(hM)return rb;hM=1,Object.defineProperty(rb,"__esModule",{value:!0}),rb.ActorFunctionFactoryTermIsNumeric=void 0;const u=Te(),n=ge(),o=Bne();let i=class extends u.ActorFunctionFactoryDedicated{constructor(e){super({...e,functionNames:[n.SparqlOperator.IS_NUMERIC],termFunction:!0})}async run(e){return new o.TermFunctionIsNumeric}};return rb.ActorFunctionFactoryTermIsNumeric=i,rb}var pM;function Une(){return pM||(pM=1,(function(u){var n=ns&&ns.__createBinding||(Object.create?(function(i,t,e,r){r===void 0&&(r=e);var a=Object.getOwnPropertyDescriptor(t,e);(!a||("get"in a?!t.__esModule:a.writable||a.configurable))&&(a={enumerable:!0,get:function(){return t[e]}}),Object.defineProperty(i,r,a)}):(function(i,t,e,r){r===void 0&&(r=e),i[r]=t[e]})),o=ns&&ns.__exportStar||function(i,t){for(var e in i)e!=="default"&&!Object.prototype.hasOwnProperty.call(t,e)&&n(t,i,e)};Object.defineProperty(u,"__esModule",{value:!0}),o($ne(),u)})(ns)),ns}var is={},ib={},ab={},yM;function Vne(){if(yM)return ab;yM=1,Object.defineProperty(ab,"__esModule",{value:!0}),ab.TermFunctionIsTriple=void 0;const u=Te(),n=ge();let o=class extends u.TermFunctionBase{constructor(){super({arity:1,operator:n.SparqlOperator.IS_TRIPLE,overloads:(0,n.declare)(n.SparqlOperator.IS_TRIPLE).onTerm1(()=>t=>(0,n.bool)(t.termType==="quad")).collect()})}};return ab.TermFunctionIsTriple=o,ab}var bM;function Qne(){if(bM)return ib;bM=1,Object.defineProperty(ib,"__esModule",{value:!0}),ib.ActorFunctionFactoryTermIsTriple=void 0;const u=Te(),n=ge(),o=Vne();let i=class extends u.ActorFunctionFactoryDedicated{constructor(e){super({...e,functionNames:[n.SparqlOperator.IS_TRIPLE],termFunction:!0})}async run(e){return new o.TermFunctionIsTriple}};return ib.ActorFunctionFactoryTermIsTriple=i,ib}var _M;function Hne(){return _M||(_M=1,(function(u){var n=is&&is.__createBinding||(Object.create?(function(i,t,e,r){r===void 0&&(r=e);var a=Object.getOwnPropertyDescriptor(t,e);(!a||("get"in a?!t.__esModule:a.writable||a.configurable))&&(a={enumerable:!0,get:function(){return t[e]}}),Object.defineProperty(i,r,a)}):(function(i,t,e,r){r===void 0&&(r=e),i[r]=t[e]})),o=is&&is.__exportStar||function(i,t){for(var e in i)e!=="default"&&!Object.prototype.hasOwnProperty.call(t,e)&&n(t,i,e)};Object.defineProperty(u,"__esModule",{value:!0}),o(Qne(),u)})(is)),is}var as={},ub={},ob={},gM;function Gne(){if(gM)return ob;gM=1,Object.defineProperty(ob,"__esModule",{value:!0}),ob.TermFunctionLang=void 0;const u=Te(),n=ge();let o=class extends u.TermFunctionBase{constructor(){super({arity:1,operator:n.SparqlOperator.LANG,overloads:(0,n.declare)(n.SparqlOperator.LANG).onLiteral1(()=>t=>(0,n.string)(t.language??"")).collect()})}};return ob.TermFunctionLang=o,ob}var mM;function zne(){if(mM)return ub;mM=1,Object.defineProperty(ub,"__esModule",{value:!0}),ub.ActorFunctionFactoryTermLang=void 0;const u=Te(),n=ge(),o=Gne();let i=class extends u.ActorFunctionFactoryDedicated{constructor(e){super({...e,functionNames:[n.SparqlOperator.LANG],termFunction:!0})}async run(e){return new o.TermFunctionLang}};return ub.ActorFunctionFactoryTermLang=i,ub}var vM;function Xne(){return vM||(vM=1,(function(u){var n=as&&as.__createBinding||(Object.create?(function(i,t,e,r){r===void 0&&(r=e);var a=Object.getOwnPropertyDescriptor(t,e);(!a||("get"in a?!t.__esModule:a.writable||a.configurable))&&(a={enumerable:!0,get:function(){return t[e]}}),Object.defineProperty(i,r,a)}):(function(i,t,e,r){r===void 0&&(r=e),i[r]=t[e]})),o=as&&as.__exportStar||function(i,t){for(var e in i)e!=="default"&&!Object.prototype.hasOwnProperty.call(t,e)&&n(t,i,e)};Object.defineProperty(u,"__esModule",{value:!0}),o(zne(),u)})(as)),as}var us={},sb={},cb={},TM;function Jne(){if(TM)return cb;TM=1,Object.defineProperty(cb,"__esModule",{value:!0}),cb.TermFunctionLangmatches=void 0;const u=Te(),n=ge();let o=class Hf extends u.TermFunctionBase{constructor(){super({arity:2,operator:n.SparqlOperator.LANG_MATCHES,overloads:(0,n.declare)(n.SparqlOperator.LANG_MATCHES).onBinaryTyped([n.TypeURL.XSD_STRING,n.TypeURL.XSD_STRING],()=>(t,e)=>(0,n.bool)(Hf.langMatches(t,e))).collect()})}static langMatches(t,e){const r=t.split("-"),a=e.split("-");if(!Hf.matchLangTag(a[0],r[0])&&!Hf.isWildCard(r[0]))return!1;let c=1,s=1;for(;s<a.length;){if(Hf.isWildCard(a[s])){s++;continue}if(c===r.length)return!1;if(Hf.matchLangTag(a[s],r[c])){c++,s++;continue}if(r[c].length===1)return!1;c++}return!0}static isWildCard(t){return t==="*"}static matchLangTag(t,e){return new RegExp(`/${t}/`,"iu").test(`/${e}/`)}};return cb.TermFunctionLangmatches=o,cb}var wM;function Kne(){if(wM)return sb;wM=1,Object.defineProperty(sb,"__esModule",{value:!0}),sb.ActorFunctionFactoryTermLangmatches=void 0;const u=Te(),n=ge(),o=Jne();let i=class extends u.ActorFunctionFactoryDedicated{constructor(e){super({...e,functionNames:[n.SparqlOperator.LANG_MATCHES],termFunction:!0})}async run(e){return new o.TermFunctionLangmatches}};return sb.ActorFunctionFactoryTermLangmatches=i,sb}var SM;function kne(){return SM||(SM=1,(function(u){var n=us&&us.__createBinding||(Object.create?(function(i,t,e,r){r===void 0&&(r=e);var a=Object.getOwnPropertyDescriptor(t,e);(!a||("get"in a?!t.__esModule:a.writable||a.configurable))&&(a={enumerable:!0,get:function(){return t[e]}}),Object.defineProperty(i,r,a)}):(function(i,t,e,r){r===void 0&&(r=e),i[r]=t[e]})),o=us&&us.__exportStar||function(i,t){for(var e in i)e!=="default"&&!Object.prototype.hasOwnProperty.call(t,e)&&n(t,i,e)};Object.defineProperty(u,"__esModule",{value:!0}),o(Kne(),u)})(us)),us}var os={},db={},lb={},OM;function Wne(){if(OM)return lb;OM=1,Object.defineProperty(lb,"__esModule",{value:!0}),lb.TermFunctionLcase=void 0;const u=Te(),n=ge();let o=class extends u.TermFunctionBase{constructor(){super({arity:1,operator:n.SparqlOperator.LCASE,overloads:(0,n.declare)(n.SparqlOperator.LCASE).onString1Typed(()=>t=>(0,n.string)(t.toLowerCase())).onLangString1(()=>t=>(0,n.langString)(t.typedValue.toLowerCase(),t.language)).collect()})}};return lb.TermFunctionLcase=o,lb}var AM;function Yne(){if(AM)return db;AM=1,Object.defineProperty(db,"__esModule",{value:!0}),db.ActorFunctionFactoryTermLcase=void 0;const u=Te(),n=ge(),o=Wne();let i=class extends u.ActorFunctionFactoryDedicated{constructor(e){super({...e,functionNames:[n.SparqlOperator.LCASE],termFunction:!0})}async run(e){return new o.TermFunctionLcase}};return db.ActorFunctionFactoryTermLcase=i,db}var EM;function Zne(){return EM||(EM=1,(function(u){var n=os&&os.__createBinding||(Object.create?(function(i,t,e,r){r===void 0&&(r=e);var a=Object.getOwnPropertyDescriptor(t,e);(!a||("get"in a?!t.__esModule:a.writable||a.configurable))&&(a={enumerable:!0,get:function(){return t[e]}}),Object.defineProperty(i,r,a)}):(function(i,t,e,r){r===void 0&&(r=e),i[r]=t[e]})),o=os&&os.__exportStar||function(i,t){for(var e in i)e!=="default"&&!Object.prototype.hasOwnProperty.call(t,e)&&n(t,i,e)};Object.defineProperty(u,"__esModule",{value:!0}),o(Yne(),u)})(os)),os}var ss={},fb={},hb={},dE={exports:{}},xM;function eie(){return xM||(xM=1,(function(u,n){(function(o){u.exports=o()})(function(o){var i=["0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f"];function t(b,m){var g=b[0],T=b[1],v=b[2],S=b[3];g+=(T&v|~T&S)+m[0]-680876936|0,g=(g<<7|g>>>25)+T|0,S+=(g&T|~g&v)+m[1]-389564586|0,S=(S<<12|S>>>20)+g|0,v+=(S&g|~S&T)+m[2]+606105819|0,v=(v<<17|v>>>15)+S|0,T+=(v&S|~v&g)+m[3]-1044525330|0,T=(T<<22|T>>>10)+v|0,g+=(T&v|~T&S)+m[4]-176418897|0,g=(g<<7|g>>>25)+T|0,S+=(g&T|~g&v)+m[5]+1200080426|0,S=(S<<12|S>>>20)+g|0,v+=(S&g|~S&T)+m[6]-1473231341|0,v=(v<<17|v>>>15)+S|0,T+=(v&S|~v&g)+m[7]-45705983|0,T=(T<<22|T>>>10)+v|0,g+=(T&v|~T&S)+m[8]+1770035416|0,g=(g<<7|g>>>25)+T|0,S+=(g&T|~g&v)+m[9]-1958414417|0,S=(S<<12|S>>>20)+g|0,v+=(S&g|~S&T)+m[10]-42063|0,v=(v<<17|v>>>15)+S|0,T+=(v&S|~v&g)+m[11]-1990404162|0,T=(T<<22|T>>>10)+v|0,g+=(T&v|~T&S)+m[12]+1804603682|0,g=(g<<7|g>>>25)+T|0,S+=(g&T|~g&v)+m[13]-40341101|0,S=(S<<12|S>>>20)+g|0,v+=(S&g|~S&T)+m[14]-1502002290|0,v=(v<<17|v>>>15)+S|0,T+=(v&S|~v&g)+m[15]+1236535329|0,T=(T<<22|T>>>10)+v|0,g+=(T&S|v&~S)+m[1]-165796510|0,g=(g<<5|g>>>27)+T|0,S+=(g&v|T&~v)+m[6]-1069501632|0,S=(S<<9|S>>>23)+g|0,v+=(S&T|g&~T)+m[11]+643717713|0,v=(v<<14|v>>>18)+S|0,T+=(v&g|S&~g)+m[0]-373897302|0,T=(T<<20|T>>>12)+v|0,g+=(T&S|v&~S)+m[5]-701558691|0,g=(g<<5|g>>>27)+T|0,S+=(g&v|T&~v)+m[10]+38016083|0,S=(S<<9|S>>>23)+g|0,v+=(S&T|g&~T)+m[15]-660478335|0,v=(v<<14|v>>>18)+S|0,T+=(v&g|S&~g)+m[4]-405537848|0,T=(T<<20|T>>>12)+v|0,g+=(T&S|v&~S)+m[9]+568446438|0,g=(g<<5|g>>>27)+T|0,S+=(g&v|T&~v)+m[14]-1019803690|0,S=(S<<9|S>>>23)+g|0,v+=(S&T|g&~T)+m[3]-187363961|0,v=(v<<14|v>>>18)+S|0,T+=(v&g|S&~g)+m[8]+1163531501|0,T=(T<<20|T>>>12)+v|0,g+=(T&S|v&~S)+m[13]-1444681467|0,g=(g<<5|g>>>27)+T|0,S+=(g&v|T&~v)+m[2]-51403784|0,S=(S<<9|S>>>23)+g|0,v+=(S&T|g&~T)+m[7]+1735328473|0,v=(v<<14|v>>>18)+S|0,T+=(v&g|S&~g)+m[12]-1926607734|0,T=(T<<20|T>>>12)+v|0,g+=(T^v^S)+m[5]-378558|0,g=(g<<4|g>>>28)+T|0,S+=(g^T^v)+m[8]-2022574463|0,S=(S<<11|S>>>21)+g|0,v+=(S^g^T)+m[11]+1839030562|0,v=(v<<16|v>>>16)+S|0,T+=(v^S^g)+m[14]-35309556|0,T=(T<<23|T>>>9)+v|0,g+=(T^v^S)+m[1]-1530992060|0,g=(g<<4|g>>>28)+T|0,S+=(g^T^v)+m[4]+1272893353|0,S=(S<<11|S>>>21)+g|0,v+=(S^g^T)+m[7]-155497632|0,v=(v<<16|v>>>16)+S|0,T+=(v^S^g)+m[10]-1094730640|0,T=(T<<23|T>>>9)+v|0,g+=(T^v^S)+m[13]+681279174|0,g=(g<<4|g>>>28)+T|0,S+=(g^T^v)+m[0]-358537222|0,S=(S<<11|S>>>21)+g|0,v+=(S^g^T)+m[3]-722521979|0,v=(v<<16|v>>>16)+S|0,T+=(v^S^g)+m[6]+76029189|0,T=(T<<23|T>>>9)+v|0,g+=(T^v^S)+m[9]-640364487|0,g=(g<<4|g>>>28)+T|0,S+=(g^T^v)+m[12]-421815835|0,S=(S<<11|S>>>21)+g|0,v+=(S^g^T)+m[15]+530742520|0,v=(v<<16|v>>>16)+S|0,T+=(v^S^g)+m[2]-995338651|0,T=(T<<23|T>>>9)+v|0,g+=(v^(T|~S))+m[0]-198630844|0,g=(g<<6|g>>>26)+T|0,S+=(T^(g|~v))+m[7]+1126891415|0,S=(S<<10|S>>>22)+g|0,v+=(g^(S|~T))+m[14]-1416354905|0,v=(v<<15|v>>>17)+S|0,T+=(S^(v|~g))+m[5]-57434055|0,T=(T<<21|T>>>11)+v|0,g+=(v^(T|~S))+m[12]+1700485571|0,g=(g<<6|g>>>26)+T|0,S+=(T^(g|~v))+m[3]-1894986606|0,S=(S<<10|S>>>22)+g|0,v+=(g^(S|~T))+m[10]-1051523|0,v=(v<<15|v>>>17)+S|0,T+=(S^(v|~g))+m[1]-2054922799|0,T=(T<<21|T>>>11)+v|0,g+=(v^(T|~S))+m[8]+1873313359|0,g=(g<<6|g>>>26)+T|0,S+=(T^(g|~v))+m[15]-30611744|0,S=(S<<10|S>>>22)+g|0,v+=(g^(S|~T))+m[6]-1560198380|0,v=(v<<15|v>>>17)+S|0,T+=(S^(v|~g))+m[13]+1309151649|0,T=(T<<21|T>>>11)+v|0,g+=(v^(T|~S))+m[4]-145523070|0,g=(g<<6|g>>>26)+T|0,S+=(T^(g|~v))+m[11]-1120210379|0,S=(S<<10|S>>>22)+g|0,v+=(g^(S|~T))+m[2]+718787259|0,v=(v<<15|v>>>17)+S|0,T+=(S^(v|~g))+m[9]-343485551|0,T=(T<<21|T>>>11)+v|0,b[0]=g+b[0]|0,b[1]=T+b[1]|0,b[2]=v+b[2]|0,b[3]=S+b[3]|0}function e(b){var m=[],g;for(g=0;g<64;g+=4)m[g>>2]=b.charCodeAt(g)+(b.charCodeAt(g+1)<<8)+(b.charCodeAt(g+2)<<16)+(b.charCodeAt(g+3)<<24);return m}function r(b){var m=[],g;for(g=0;g<64;g+=4)m[g>>2]=b[g]+(b[g+1]<<8)+(b[g+2]<<16)+(b[g+3]<<24);return m}function a(b){var m=b.length,g=[1732584193,-271733879,-1732584194,271733878],T,v,S,F,M,O;for(T=64;T<=m;T+=64)t(g,e(b.substring(T-64,T)));for(b=b.substring(T-64),v=b.length,S=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],T=0;T<v;T+=1)S[T>>2]|=b.charCodeAt(T)<<(T%4<<3);if(S[T>>2]|=128<<(T%4<<3),T>55)for(t(g,S),T=0;T<16;T+=1)S[T]=0;return F=m*8,F=F.toString(16).match(/(.*?)(.{0,8})$/),M=parseInt(F[2],16),O=parseInt(F[1],16)||0,S[14]=M,S[15]=O,t(g,S),g}function c(b){var m=b.length,g=[1732584193,-271733879,-1732584194,271733878],T,v,S,F,M,O;for(T=64;T<=m;T+=64)t(g,r(b.subarray(T-64,T)));for(b=T-64<m?b.subarray(T-64):new Uint8Array(0),v=b.length,S=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],T=0;T<v;T+=1)S[T>>2]|=b[T]<<(T%4<<3);if(S[T>>2]|=128<<(T%4<<3),T>55)for(t(g,S),T=0;T<16;T+=1)S[T]=0;return F=m*8,F=F.toString(16).match(/(.*?)(.{0,8})$/),M=parseInt(F[2],16),O=parseInt(F[1],16)||0,S[14]=M,S[15]=O,t(g,S),g}function s(b){var m="",g;for(g=0;g<4;g+=1)m+=i[b>>g*8+4&15]+i[b>>g*8&15];return m}function d(b){var m;for(m=0;m<b.length;m+=1)b[m]=s(b[m]);return b.join("")}d(a("hello")),typeof ArrayBuffer<"u"&&!ArrayBuffer.prototype.slice&&(function(){function b(m,g){return m=m|0||0,m<0?Math.max(m+g,0):Math.min(m,g)}ArrayBuffer.prototype.slice=function(m,g){var T=this.byteLength,v=b(m,T),S=T,F,M,O,w;return g!==o&&(S=b(g,T)),v>S?new ArrayBuffer(0):(F=S-v,M=new ArrayBuffer(F),O=new Uint8Array(M),w=new Uint8Array(this,v,F),O.set(w),M)}})();function l(b){return/[\u0080-\uFFFF]/.test(b)&&(b=unescape(encodeURIComponent(b))),b}function f(b,m){var g=b.length,T=new ArrayBuffer(g),v=new Uint8Array(T),S;for(S=0;S<g;S+=1)v[S]=b.charCodeAt(S);return m?v:T}function h(b){return String.fromCharCode.apply(null,new Uint8Array(b))}function p(b,m,g){var T=new Uint8Array(b.byteLength+m.byteLength);return T.set(new Uint8Array(b)),T.set(new Uint8Array(m),b.byteLength),T}function y(b){var m=[],g=b.length,T;for(T=0;T<g-1;T+=2)m.push(parseInt(b.substr(T,2),16));return String.fromCharCode.apply(String,m)}function _(){this.reset()}return _.prototype.append=function(b){return this.appendBinary(l(b)),this},_.prototype.appendBinary=function(b){this._buff+=b,this._length+=b.length;var m=this._buff.length,g;for(g=64;g<=m;g+=64)t(this._hash,e(this._buff.substring(g-64,g)));return this._buff=this._buff.substring(g-64),this},_.prototype.end=function(b){var m=this._buff,g=m.length,T,v=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],S;for(T=0;T<g;T+=1)v[T>>2]|=m.charCodeAt(T)<<(T%4<<3);return this._finish(v,g),S=d(this._hash),b&&(S=y(S)),this.reset(),S},_.prototype.reset=function(){return this._buff="",this._length=0,this._hash=[1732584193,-271733879,-1732584194,271733878],this},_.prototype.getState=function(){return{buff:this._buff,length:this._length,hash:this._hash.slice()}},_.prototype.setState=function(b){return this._buff=b.buff,this._length=b.length,this._hash=b.hash,this},_.prototype.destroy=function(){delete this._hash,delete this._buff,delete this._length},_.prototype._finish=function(b,m){var g=m,T,v,S;if(b[g>>2]|=128<<(g%4<<3),g>55)for(t(this._hash,b),g=0;g<16;g+=1)b[g]=0;T=this._length*8,T=T.toString(16).match(/(.*?)(.{0,8})$/),v=parseInt(T[2],16),S=parseInt(T[1],16)||0,b[14]=v,b[15]=S,t(this._hash,b)},_.hash=function(b,m){return _.hashBinary(l(b),m)},_.hashBinary=function(b,m){var g=a(b),T=d(g);return m?y(T):T},_.ArrayBuffer=function(){this.reset()},_.ArrayBuffer.prototype.append=function(b){var m=p(this._buff.buffer,b),g=m.length,T;for(this._length+=b.byteLength,T=64;T<=g;T+=64)t(this._hash,r(m.subarray(T-64,T)));return this._buff=T-64<g?new Uint8Array(m.buffer.slice(T-64)):new Uint8Array(0),this},_.ArrayBuffer.prototype.end=function(b){var m=this._buff,g=m.length,T=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],v,S;for(v=0;v<g;v+=1)T[v>>2]|=m[v]<<(v%4<<3);return this._finish(T,g),S=d(this._hash),b&&(S=y(S)),this.reset(),S},_.ArrayBuffer.prototype.reset=function(){return this._buff=new Uint8Array(0),this._length=0,this._hash=[1732584193,-271733879,-1732584194,271733878],this},_.ArrayBuffer.prototype.getState=function(){var b=_.prototype.getState.call(this);return b.buff=h(b.buff),b},_.ArrayBuffer.prototype.setState=function(b){return b.buff=f(b.buff,!0),_.prototype.setState.call(this,b)},_.ArrayBuffer.prototype.destroy=_.prototype.destroy,_.ArrayBuffer.prototype._finish=_.prototype._finish,_.ArrayBuffer.hash=function(b,m){var g=c(new Uint8Array(b)),T=d(g);return m?y(T):T},_})})(dE)),dE.exports}var RM;function tie(){if(RM)return hb;RM=1,Object.defineProperty(hb,"__esModule",{value:!0}),hb.TermFunctionMd5=void 0;const u=Te(),n=ge(),o=eie();let i=class extends u.TermFunctionBase{constructor(){super({arity:1,operator:n.SparqlOperator.MD5,overloads:(0,n.declare)(n.SparqlOperator.MD5).onString1Typed(()=>e=>(0,n.string)((0,o.hash)(e))).collect()})}};return hb.TermFunctionMd5=i,hb}var FM;function rie(){if(FM)return fb;FM=1,Object.defineProperty(fb,"__esModule",{value:!0}),fb.ActorFunctionFactoryTermMd5=void 0;const u=Te(),n=ge(),o=tie();let i=class extends u.ActorFunctionFactoryDedicated{constructor(e){super({...e,functionNames:[n.SparqlOperator.MD5],termFunction:!0})}async run(e){return new o.TermFunctionMd5}};return fb.ActorFunctionFactoryTermMd5=i,fb}var IM;function nie(){return IM||(IM=1,(function(u){var n=ss&&ss.__createBinding||(Object.create?(function(i,t,e,r){r===void 0&&(r=e);var a=Object.getOwnPropertyDescriptor(t,e);(!a||("get"in a?!t.__esModule:a.writable||a.configurable))&&(a={enumerable:!0,get:function(){return t[e]}}),Object.defineProperty(i,r,a)}):(function(i,t,e,r){r===void 0&&(r=e),i[r]=t[e]})),o=ss&&ss.__exportStar||function(i,t){for(var e in i)e!=="default"&&!Object.prototype.hasOwnProperty.call(t,e)&&n(t,i,e)};Object.defineProperty(u,"__esModule",{value:!0}),o(rie(),u)})(ss)),ss}var cs={},pb={},yb={},PM;function iie(){if(PM)return yb;PM=1,Object.defineProperty(yb,"__esModule",{value:!0}),yb.TermFunctionMinutes=void 0;const u=Te(),n=ge();let o=class extends u.TermFunctionBase{constructor(){super({arity:1,operator:n.SparqlOperator.MINUTES,overloads:(0,n.declare)(n.SparqlOperator.MINUTES).onDateTime1(()=>t=>(0,n.integer)(t.typedValue.minutes)).set([n.TypeURL.XSD_TIME],()=>([t])=>(0,n.integer)(t.typedValue.minutes)).collect()})}};return yb.TermFunctionMinutes=o,yb}var DM;function aie(){if(DM)return pb;DM=1,Object.defineProperty(pb,"__esModule",{value:!0}),pb.ActorFunctionFactoryTermMinutes=void 0;const u=Te(),n=ge(),o=iie();let i=class extends u.ActorFunctionFactoryDedicated{constructor(e){super({...e,functionNames:[n.SparqlOperator.MINUTES],termFunction:!0})}async run(e){return new o.TermFunctionMinutes}};return pb.ActorFunctionFactoryTermMinutes=i,pb}var NM;function uie(){return NM||(NM=1,(function(u){var n=cs&&cs.__createBinding||(Object.create?(function(i,t,e,r){r===void 0&&(r=e);var a=Object.getOwnPropertyDescriptor(t,e);(!a||("get"in a?!t.__esModule:a.writable||a.configurable))&&(a={enumerable:!0,get:function(){return t[e]}}),Object.defineProperty(i,r,a)}):(function(i,t,e,r){r===void 0&&(r=e),i[r]=t[e]})),o=cs&&cs.__exportStar||function(i,t){for(var e in i)e!=="default"&&!Object.prototype.hasOwnProperty.call(t,e)&&n(t,i,e)};Object.defineProperty(u,"__esModule",{value:!0}),o(aie(),u)})(cs)),cs}var ds={},bb={},_b={},jM;function oie(){if(jM)return _b;jM=1,Object.defineProperty(_b,"__esModule",{value:!0}),_b.TermFunctionMonth=void 0;const u=Te(),n=ge();let o=class extends u.TermFunctionBase{constructor(){super({arity:1,operator:n.SparqlOperator.MONTH,overloads:(0,n.declare)(n.SparqlOperator.MONTH).onDateTime1(()=>t=>(0,n.integer)(t.typedValue.month)).set([n.TypeURL.XSD_DATE],()=>([t])=>(0,n.integer)(t.typedValue.month)).collect()})}};return _b.TermFunctionMonth=o,_b}var LM;function sie(){if(LM)return bb;LM=1,Object.defineProperty(bb,"__esModule",{value:!0}),bb.ActorFunctionFactoryTermMonth=void 0;const u=Te(),n=ge(),o=oie();let i=class extends u.ActorFunctionFactoryDedicated{constructor(e){super({...e,functionNames:[n.SparqlOperator.MONTH],termFunction:!0})}async run(e){return new o.TermFunctionMonth}};return bb.ActorFunctionFactoryTermMonth=i,bb}var MM;function cie(){return MM||(MM=1,(function(u){var n=ds&&ds.__createBinding||(Object.create?(function(i,t,e,r){r===void 0&&(r=e);var a=Object.getOwnPropertyDescriptor(t,e);(!a||("get"in a?!t.__esModule:a.writable||a.configurable))&&(a={enumerable:!0,get:function(){return t[e]}}),Object.defineProperty(i,r,a)}):(function(i,t,e,r){r===void 0&&(r=e),i[r]=t[e]})),o=ds&&ds.__exportStar||function(i,t){for(var e in i)e!=="default"&&!Object.prototype.hasOwnProperty.call(t,e)&&n(t,i,e)};Object.defineProperty(u,"__esModule",{value:!0}),o(sie(),u)})(ds)),ds}var ls={},gb={},mb={},qM;function die(){if(qM)return mb;qM=1,Object.defineProperty(mb,"__esModule",{value:!0}),mb.TermFunctionMultiplication=void 0;const u=Te(),n=ge(),o=G3();let i=class extends u.TermFunctionBase{constructor(){super({arity:2,operator:n.SparqlOperator.MULTIPLICATION,overloads:(0,n.declare)(n.SparqlOperator.MULTIPLICATION).arithmetic(()=>(e,r)=>new o.BigNumber(e).times(r).toNumber()).collect()})}};return mb.TermFunctionMultiplication=i,mb}var CM;function lie(){if(CM)return gb;CM=1,Object.defineProperty(gb,"__esModule",{value:!0}),gb.ActorFunctionFactoryTermMultiplication=void 0;const u=Te(),n=ge(),o=die();let i=class extends u.ActorFunctionFactoryDedicated{constructor(e){super({...e,functionNames:[n.SparqlOperator.MULTIPLICATION],termFunction:!0})}async run(e){return new o.TermFunctionMultiplication}};return gb.ActorFunctionFactoryTermMultiplication=i,gb}var BM;function fie(){return BM||(BM=1,(function(u){var n=ls&&ls.__createBinding||(Object.create?(function(i,t,e,r){r===void 0&&(r=e);var a=Object.getOwnPropertyDescriptor(t,e);(!a||("get"in a?!t.__esModule:a.writable||a.configurable))&&(a={enumerable:!0,get:function(){return t[e]}}),Object.defineProperty(i,r,a)}):(function(i,t,e,r){r===void 0&&(r=e),i[r]=t[e]})),o=ls&&ls.__exportStar||function(i,t){for(var e in i)e!=="default"&&!Object.prototype.hasOwnProperty.call(t,e)&&n(t,i,e)};Object.defineProperty(u,"__esModule",{value:!0}),o(lie(),u)})(ls)),ls}var fs={},vb={},Tb={},$M;function hie(){if($M)return Tb;$M=1,Object.defineProperty(Tb,"__esModule",{value:!0}),Tb.TermFunctionNot=void 0;const u=Te(),n=ge();let o=class extends u.TermFunctionBase{constructor(){super({arity:1,operator:n.SparqlOperator.NOT,overloads:(0,n.declare)(n.SparqlOperator.NOT).onTerm1(()=>t=>(0,n.bool)(!t.coerceEBV())).collect()})}};return Tb.TermFunctionNot=o,Tb}var UM;function pie(){if(UM)return vb;UM=1,Object.defineProperty(vb,"__esModule",{value:!0}),vb.ActorFunctionFactoryTermNot=void 0;const u=Te(),n=ge(),o=hie();let i=class extends u.ActorFunctionFactoryDedicated{constructor(e){super({...e,functionNames:[n.SparqlOperator.NOT],termFunction:!0})}async run(e){return new o.TermFunctionNot}};return vb.ActorFunctionFactoryTermNot=i,vb}var VM;function yie(){return VM||(VM=1,(function(u){var n=fs&&fs.__createBinding||(Object.create?(function(i,t,e,r){r===void 0&&(r=e);var a=Object.getOwnPropertyDescriptor(t,e);(!a||("get"in a?!t.__esModule:a.writable||a.configurable))&&(a={enumerable:!0,get:function(){return t[e]}}),Object.defineProperty(i,r,a)}):(function(i,t,e,r){r===void 0&&(r=e),i[r]=t[e]})),o=fs&&fs.__exportStar||function(i,t){for(var e in i)e!=="default"&&!Object.prototype.hasOwnProperty.call(t,e)&&n(t,i,e)};Object.defineProperty(u,"__esModule",{value:!0}),o(pie(),u)})(fs)),fs}var hs={},wb={},Sb={},QM;function bie(){if(QM)return Sb;QM=1,Object.defineProperty(Sb,"__esModule",{value:!0}),Sb.TermFunctionNow=void 0;const u=Te(),n=qe(),o=ge();let i=class extends u.TermFunctionBase{constructor(){super({arity:0,operator:o.SparqlOperator.NOW,overloads:(0,o.declare)(o.SparqlOperator.NOW).set([],e=>()=>new o.DateTimeLiteral((0,o.toDateTimeRepresentation)({date:e.context.getSafe(n.KeysInitQuery.queryTimestamp),timeZone:e.context.getSafe(n.KeysExpressionEvaluator.defaultTimeZone)}))).collect()})}};return Sb.TermFunctionNow=i,Sb}var HM;function _ie(){if(HM)return wb;HM=1,Object.defineProperty(wb,"__esModule",{value:!0}),wb.ActorFunctionFactoryTermNow=void 0;const u=Te(),n=ge(),o=bie();let i=class extends u.ActorFunctionFactoryDedicated{constructor(e){super({...e,functionNames:[n.SparqlOperator.NOW],termFunction:!0})}async run(e){return new o.TermFunctionNow}};return wb.ActorFunctionFactoryTermNow=i,wb}var GM;function gie(){return GM||(GM=1,(function(u){var n=hs&&hs.__createBinding||(Object.create?(function(i,t,e,r){r===void 0&&(r=e);var a=Object.getOwnPropertyDescriptor(t,e);(!a||("get"in a?!t.__esModule:a.writable||a.configurable))&&(a={enumerable:!0,get:function(){return t[e]}}),Object.defineProperty(i,r,a)}):(function(i,t,e,r){r===void 0&&(r=e),i[r]=t[e]})),o=hs&&hs.__exportStar||function(i,t){for(var e in i)e!=="default"&&!Object.prototype.hasOwnProperty.call(t,e)&&n(t,i,e)};Object.defineProperty(u,"__esModule",{value:!0}),o(_ie(),u)})(hs)),hs}var ps={},Ob={},Ab={},zM;function mie(){if(zM)return Ab;zM=1,Object.defineProperty(Ab,"__esModule",{value:!0}),Ab.TermFunctionObject=void 0;const u=Te(),n=ge();let o=class extends u.TermFunctionBase{constructor(){super({arity:1,operator:n.SparqlOperator.OBJECT,overloads:(0,n.declare)(n.SparqlOperator.OBJECT).onQuad1(()=>t=>t.object).collect()})}};return Ab.TermFunctionObject=o,Ab}var XM;function vie(){if(XM)return Ob;XM=1,Object.defineProperty(Ob,"__esModule",{value:!0}),Ob.ActorFunctionFactoryTermObject=void 0;const u=Te(),n=ge(),o=mie();let i=class extends u.ActorFunctionFactoryDedicated{constructor(e){super({...e,functionNames:[n.SparqlOperator.OBJECT],termFunction:!0})}async run(e){return new o.TermFunctionObject}};return Ob.ActorFunctionFactoryTermObject=i,Ob}var JM;function Tie(){return JM||(JM=1,(function(u){var n=ps&&ps.__createBinding||(Object.create?(function(i,t,e,r){r===void 0&&(r=e);var a=Object.getOwnPropertyDescriptor(t,e);(!a||("get"in a?!t.__esModule:a.writable||a.configurable))&&(a={enumerable:!0,get:function(){return t[e]}}),Object.defineProperty(i,r,a)}):(function(i,t,e,r){r===void 0&&(r=e),i[r]=t[e]})),o=ps&&ps.__exportStar||function(i,t){for(var e in i)e!=="default"&&!Object.prototype.hasOwnProperty.call(t,e)&&n(t,i,e)};Object.defineProperty(u,"__esModule",{value:!0}),o(vie(),u)})(ps)),ps}var ys={},Eb={},xb={},KM;function wie(){if(KM)return xb;KM=1,Object.defineProperty(xb,"__esModule",{value:!0}),xb.TermFunctionPredicate=void 0;const u=Te(),n=ge();let o=class extends u.TermFunctionBase{constructor(){super({arity:1,operator:n.SparqlOperator.PREDICATE,overloads:(0,n.declare)(n.SparqlOperator.PREDICATE).onQuad1(()=>t=>t.predicate).collect()})}};return xb.TermFunctionPredicate=o,xb}var kM;function Sie(){if(kM)return Eb;kM=1,Object.defineProperty(Eb,"__esModule",{value:!0}),Eb.ActorFunctionFactoryTermPredicate=void 0;const u=Te(),n=ge(),o=wie();let i=class extends u.ActorFunctionFactoryDedicated{constructor(e){super({...e,functionNames:[n.SparqlOperator.PREDICATE],termFunction:!0})}async run(e){return new o.TermFunctionPredicate}};return Eb.ActorFunctionFactoryTermPredicate=i,Eb}var WM;function Oie(){return WM||(WM=1,(function(u){var n=ys&&ys.__createBinding||(Object.create?(function(i,t,e,r){r===void 0&&(r=e);var a=Object.getOwnPropertyDescriptor(t,e);(!a||("get"in a?!t.__esModule:a.writable||a.configurable))&&(a={enumerable:!0,get:function(){return t[e]}}),Object.defineProperty(i,r,a)}):(function(i,t,e,r){r===void 0&&(r=e),i[r]=t[e]})),o=ys&&ys.__exportStar||function(i,t){for(var e in i)e!=="default"&&!Object.prototype.hasOwnProperty.call(t,e)&&n(t,i,e)};Object.defineProperty(u,"__esModule",{value:!0}),o(Sie(),u)})(ys)),ys}var bs={},Rb={},Fb={},YM;function Aie(){if(YM)return Fb;YM=1,Object.defineProperty(Fb,"__esModule",{value:!0}),Fb.TermFunctionRand=void 0;const u=Te(),n=ge();let o=class extends u.TermFunctionBase{constructor(){super({arity:0,operator:n.SparqlOperator.RAND,overloads:(0,n.declare)(n.SparqlOperator.RAND).set([],()=>()=>(0,n.double)(Math.random())).collect()})}};return Fb.TermFunctionRand=o,Fb}var ZM;function Eie(){if(ZM)return Rb;ZM=1,Object.defineProperty(Rb,"__esModule",{value:!0}),Rb.ActorFunctionFactoryTermRand=void 0;const u=Te(),n=ge(),o=Aie();let i=class extends u.ActorFunctionFactoryDedicated{constructor(e){super({...e,functionNames:[n.SparqlOperator.RAND],termFunction:!0})}async run(e){return new o.TermFunctionRand}};return Rb.ActorFunctionFactoryTermRand=i,Rb}var e7;function xie(){return e7||(e7=1,(function(u){var n=bs&&bs.__createBinding||(Object.create?(function(i,t,e,r){r===void 0&&(r=e);var a=Object.getOwnPropertyDescriptor(t,e);(!a||("get"in a?!t.__esModule:a.writable||a.configurable))&&(a={enumerable:!0,get:function(){return t[e]}}),Object.defineProperty(i,r,a)}):(function(i,t,e,r){r===void 0&&(r=e),i[r]=t[e]})),o=bs&&bs.__exportStar||function(i,t){for(var e in i)e!=="default"&&!Object.prototype.hasOwnProperty.call(t,e)&&n(t,i,e)};Object.defineProperty(u,"__esModule",{value:!0}),o(Eie(),u)})(bs)),bs}var _s={},Ib={},Pb={},t7;function r7(){if(t7)return Pb;t7=1,Object.defineProperty(Pb,"__esModule",{value:!0}),Pb.TermFunctionRegex=void 0;const u=Te(),n=ge();let o=class ua extends u.TermFunctionBase{constructor(){super({arity:[2,3],operator:n.SparqlOperator.REGEX,overloads:(0,n.declare)(n.SparqlOperator.REGEX).onBinaryTyped([n.TypeAlias.SPARQL_STRINGLY,n.TypeURL.XSD_STRING],ua.regex2).onTernaryTyped([n.TypeAlias.SPARQL_STRINGLY,n.TypeURL.XSD_STRING,n.TypeURL.XSD_STRING],ua.regex3).collect()})}static regex2(){return(t,e)=>(0,n.bool)(ua.matches(t,e))}static regex3(){return(t,e,r)=>(0,n.bool)(ua.matches(t,e,r))}static matches(t,e,r=""){return r=ua.cleanFlags(r),r.includes("x")&&(e=ua.flagX(e)),r.includes("q")&&(e=ua.flagQ(e)),new RegExp(e,r.replaceAll(/[qx]/gu,"")).test(t)}static cleanFlags(t){if(!/^[imsxq]*$/u.test(t))throw new Error("Invalid flags");const e=[...t].find((r,a,c)=>c.indexOf(r)!==a);if(e)throw new Error(`Duplicate flag: ${e}`);return t!=null&&t.includes("q")&&(t=t.replaceAll(/[msx]/gu,"")),`${t}u`}static flagX(t){if(!t)return t;let e=t[0];for(;["	",`
`,"\r"," "].includes(e);)t=t.slice(1),e=t[0];let r=e==="[";for(let a=1;a<t.length;a++){const c=t[a];["	",`
`,"\r"," "].includes(c)&&!r?(t=t.slice(0,a)+t.slice(a+1),a--):c==="["&&e!=="\\"?r=!0:c==="]"&&e!=="\\"&&(r=!1),e=c}return t}static flagQ(t){return t.replaceAll(/([?+*.{}()[\]\\|])/gu,"\\$1").replaceAll(/^\^/gu,"\\^").replaceAll(/\$$/gu,"\\$")}};return Pb.TermFunctionRegex=o,Pb}var n7;function Rie(){if(n7)return Ib;n7=1,Object.defineProperty(Ib,"__esModule",{value:!0}),Ib.ActorFunctionFactoryTermRegex=void 0;const u=Te(),n=ge(),o=r7();let i=class extends u.ActorFunctionFactoryDedicated{constructor(e){super({...e,functionNames:[n.SparqlOperator.REGEX],termFunction:!0})}async run(e){return new o.TermFunctionRegex}};return Ib.ActorFunctionFactoryTermRegex=i,Ib}var i7;function a7(){return i7||(i7=1,(function(u){var n=_s&&_s.__createBinding||(Object.create?(function(i,t,e,r){r===void 0&&(r=e);var a=Object.getOwnPropertyDescriptor(t,e);(!a||("get"in a?!t.__esModule:a.writable||a.configurable))&&(a={enumerable:!0,get:function(){return t[e]}}),Object.defineProperty(i,r,a)}):(function(i,t,e,r){r===void 0&&(r=e),i[r]=t[e]})),o=_s&&_s.__exportStar||function(i,t){for(var e in i)e!=="default"&&!Object.prototype.hasOwnProperty.call(t,e)&&n(t,i,e)};Object.defineProperty(u,"__esModule",{value:!0}),o(Rie(),u),o(r7(),u)})(_s)),_s}var gs={},Db={},Nb={},u7;function Fie(){if(u7)return Nb;u7=1,Object.defineProperty(Nb,"__esModule",{value:!0}),Nb.TermFunctionReplace=void 0;const u=a7(),n=Te(),o=ge();let i=class xT extends n.TermFunctionBase{constructor(){super({arity:[3,4],operator:o.SparqlOperator.REPLACE,overloads:(0,o.declare)(o.SparqlOperator.REPLACE).onTernaryTyped([o.TypeURL.XSD_STRING,o.TypeURL.XSD_STRING,o.TypeURL.XSD_STRING],()=>(e,r,a)=>(0,o.string)(xT.replace(e,r,a))).set([o.TypeURL.RDF_LANG_STRING,o.TypeURL.XSD_STRING,o.TypeURL.XSD_STRING],()=>([e,r,a])=>{const c=xT.replace(e.typedValue,r.typedValue,a.typedValue);return(0,o.langString)(c,e.language)}).onQuaternaryTyped([o.TypeURL.XSD_STRING,o.TypeURL.XSD_STRING,o.TypeURL.XSD_STRING,o.TypeURL.XSD_STRING],()=>(e,r,a,c)=>(0,o.string)(xT.replace(e,r,a,c))).set([o.TypeURL.RDF_LANG_STRING,o.TypeURL.XSD_STRING,o.TypeURL.XSD_STRING,o.TypeURL.XSD_STRING],()=>([e,r,a,c])=>{const s=xT.replace(e.typedValue,r.typedValue,a.typedValue,c.typedValue);return(0,o.langString)(s,e.language)}).collect()})}static replace(e,r,a,c=""){return c=u.TermFunctionRegex.cleanFlags(c),c.includes("x")&&(r=u.TermFunctionRegex.flagX(r)),c.includes("q")?r=u.TermFunctionRegex.flagQ(r):a=a.replaceAll("$0",()=>"$&"),c=`${c.replaceAll(/[qx]/gu,"")}g`,e.replaceAll(new RegExp(r,c),a)}};return Nb.TermFunctionReplace=i,Nb}var o7;function Iie(){if(o7)return Db;o7=1,Object.defineProperty(Db,"__esModule",{value:!0}),Db.ActorFunctionFactoryTermReplace=void 0;const u=Te(),n=ge(),o=Fie();let i=class extends u.ActorFunctionFactoryDedicated{constructor(e){super({...e,functionNames:[n.SparqlOperator.REPLACE],termFunction:!0})}async run(e){return new o.TermFunctionReplace}};return Db.ActorFunctionFactoryTermReplace=i,Db}var s7;function Pie(){return s7||(s7=1,(function(u){var n=gs&&gs.__createBinding||(Object.create?(function(i,t,e,r){r===void 0&&(r=e);var a=Object.getOwnPropertyDescriptor(t,e);(!a||("get"in a?!t.__esModule:a.writable||a.configurable))&&(a={enumerable:!0,get:function(){return t[e]}}),Object.defineProperty(i,r,a)}):(function(i,t,e,r){r===void 0&&(r=e),i[r]=t[e]})),o=gs&&gs.__exportStar||function(i,t){for(var e in i)e!=="default"&&!Object.prototype.hasOwnProperty.call(t,e)&&n(t,i,e)};Object.defineProperty(u,"__esModule",{value:!0}),o(Iie(),u)})(gs)),gs}var ms={},jb={},Lb={},c7;function Die(){if(c7)return Lb;c7=1,Object.defineProperty(Lb,"__esModule",{value:!0}),Lb.TermFunctionRound=void 0;const u=Te(),n=ge();let o=class extends u.TermFunctionBase{constructor(){super({arity:1,operator:n.SparqlOperator.ROUND,overloads:(0,n.declare)(n.SparqlOperator.ROUND).numericConverter(()=>t=>Math.round(t)).collect()})}};return Lb.TermFunctionRound=o,Lb}var d7;function Nie(){if(d7)return jb;d7=1,Object.defineProperty(jb,"__esModule",{value:!0}),jb.ActorFunctionFactoryTermRound=void 0;const u=Te(),n=ge(),o=Die();let i=class extends u.ActorFunctionFactoryDedicated{constructor(e){super({...e,functionNames:[n.SparqlOperator.ROUND],termFunction:!0})}async run(e){return new o.TermFunctionRound}};return jb.ActorFunctionFactoryTermRound=i,jb}var l7;function jie(){return l7||(l7=1,(function(u){var n=ms&&ms.__createBinding||(Object.create?(function(i,t,e,r){r===void 0&&(r=e);var a=Object.getOwnPropertyDescriptor(t,e);(!a||("get"in a?!t.__esModule:a.writable||a.configurable))&&(a={enumerable:!0,get:function(){return t[e]}}),Object.defineProperty(i,r,a)}):(function(i,t,e,r){r===void 0&&(r=e),i[r]=t[e]})),o=ms&&ms.__exportStar||function(i,t){for(var e in i)e!=="default"&&!Object.prototype.hasOwnProperty.call(t,e)&&n(t,i,e)};Object.defineProperty(u,"__esModule",{value:!0}),o(Nie(),u)})(ms)),ms}var vs={},Mb={},qb={},f7;function Lie(){if(f7)return qb;f7=1,Object.defineProperty(qb,"__esModule",{value:!0}),qb.TermFunctionSeconds=void 0;const u=Te(),n=ge();let o=class extends u.TermFunctionBase{constructor(){super({arity:1,operator:n.SparqlOperator.SECONDS,overloads:(0,n.declare)(n.SparqlOperator.SECONDS).onDateTime1(()=>t=>(0,n.decimal)(t.typedValue.seconds)).set([n.TypeURL.XSD_TIME],()=>([t])=>(0,n.integer)(t.typedValue.seconds)).collect()})}};return qb.TermFunctionSeconds=o,qb}var h7;function Mie(){if(h7)return Mb;h7=1,Object.defineProperty(Mb,"__esModule",{value:!0}),Mb.ActorFunctionFactoryTermSeconds=void 0;const u=Te(),n=ge(),o=Lie();let i=class extends u.ActorFunctionFactoryDedicated{constructor(e){super({...e,functionNames:[n.SparqlOperator.SECONDS],termFunction:!0})}async run(e){return new o.TermFunctionSeconds}};return Mb.ActorFunctionFactoryTermSeconds=i,Mb}var p7;function qie(){return p7||(p7=1,(function(u){var n=vs&&vs.__createBinding||(Object.create?(function(i,t,e,r){r===void 0&&(r=e);var a=Object.getOwnPropertyDescriptor(t,e);(!a||("get"in a?!t.__esModule:a.writable||a.configurable))&&(a={enumerable:!0,get:function(){return t[e]}}),Object.defineProperty(i,r,a)}):(function(i,t,e,r){r===void 0&&(r=e),i[r]=t[e]})),o=vs&&vs.__exportStar||function(i,t){for(var e in i)e!=="default"&&!Object.prototype.hasOwnProperty.call(t,e)&&n(t,i,e)};Object.defineProperty(u,"__esModule",{value:!0}),o(Mie(),u)})(vs)),vs}var Ts={},Cb={},Bb={},y7;function Cie(){if(y7)return Bb;y7=1,Object.defineProperty(Bb,"__esModule",{value:!0}),Bb.TermFunctionSha1=void 0;const u=Te(),n=ge(),o=Gh();let i=class extends u.TermFunctionBase{constructor(){super({arity:1,operator:n.SparqlOperator.SHA1,overloads:(0,n.declare)(n.SparqlOperator.SHA1).onString1Typed(()=>e=>(0,n.string)((0,o.sha1)().update(e).digest("hex"))).collect()})}};return Bb.TermFunctionSha1=i,Bb}var b7;function Bie(){if(b7)return Cb;b7=1,Object.defineProperty(Cb,"__esModule",{value:!0}),Cb.ActorFunctionFactoryTermSha1=void 0;const u=Te(),n=ge(),o=Cie();let i=class extends u.ActorFunctionFactoryDedicated{constructor(e){super({...e,functionNames:[n.SparqlOperator.SHA1],termFunction:!0})}async run(e){return new o.TermFunctionSha1}};return Cb.ActorFunctionFactoryTermSha1=i,Cb}var _7;function $ie(){return _7||(_7=1,(function(u){var n=Ts&&Ts.__createBinding||(Object.create?(function(i,t,e,r){r===void 0&&(r=e);var a=Object.getOwnPropertyDescriptor(t,e);(!a||("get"in a?!t.__esModule:a.writable||a.configurable))&&(a={enumerable:!0,get:function(){return t[e]}}),Object.defineProperty(i,r,a)}):(function(i,t,e,r){r===void 0&&(r=e),i[r]=t[e]})),o=Ts&&Ts.__exportStar||function(i,t){for(var e in i)e!=="default"&&!Object.prototype.hasOwnProperty.call(t,e)&&n(t,i,e)};Object.defineProperty(u,"__esModule",{value:!0}),o(Bie(),u)})(Ts)),Ts}var ws={},$b={},Ub={},g7;function Uie(){if(g7)return Ub;g7=1,Object.defineProperty(Ub,"__esModule",{value:!0}),Ub.TermFunctionSha256=void 0;const u=Te(),n=ge(),o=Gh();let i=class extends u.TermFunctionBase{constructor(){super({arity:1,operator:n.SparqlOperator.SHA256,overloads:(0,n.declare)(n.SparqlOperator.SHA256).onString1Typed(()=>e=>(0,n.string)((0,o.sha256)().update(e).digest("hex"))).collect()})}};return Ub.TermFunctionSha256=i,Ub}var m7;function Vie(){if(m7)return $b;m7=1,Object.defineProperty($b,"__esModule",{value:!0}),$b.ActorFunctionFactoryTermSha256=void 0;const u=Te(),n=ge(),o=Uie();let i=class extends u.ActorFunctionFactoryDedicated{constructor(e){super({...e,functionNames:[n.SparqlOperator.SHA256],termFunction:!0})}async run(e){return new o.TermFunctionSha256}};return $b.ActorFunctionFactoryTermSha256=i,$b}var v7;function Qie(){return v7||(v7=1,(function(u){var n=ws&&ws.__createBinding||(Object.create?(function(i,t,e,r){r===void 0&&(r=e);var a=Object.getOwnPropertyDescriptor(t,e);(!a||("get"in a?!t.__esModule:a.writable||a.configurable))&&(a={enumerable:!0,get:function(){return t[e]}}),Object.defineProperty(i,r,a)}):(function(i,t,e,r){r===void 0&&(r=e),i[r]=t[e]})),o=ws&&ws.__exportStar||function(i,t){for(var e in i)e!=="default"&&!Object.prototype.hasOwnProperty.call(t,e)&&n(t,i,e)};Object.defineProperty(u,"__esModule",{value:!0}),o(Vie(),u)})(ws)),ws}var Ss={},Vb={},Qb={},T7;function Hie(){if(T7)return Qb;T7=1,Object.defineProperty(Qb,"__esModule",{value:!0}),Qb.TermFunctionSha384=void 0;const u=Te(),n=ge(),o=Gh();let i=class extends u.TermFunctionBase{constructor(){super({arity:1,operator:n.SparqlOperator.SHA384,overloads:(0,n.declare)(n.SparqlOperator.SHA384).onString1Typed(()=>e=>(0,n.string)((0,o.sha384)().update(e).digest("hex"))).collect()})}};return Qb.TermFunctionSha384=i,Qb}var w7;function Gie(){if(w7)return Vb;w7=1,Object.defineProperty(Vb,"__esModule",{value:!0}),Vb.ActorFunctionFactoryTermSha384=void 0;const u=Te(),n=ge(),o=Hie();let i=class extends u.ActorFunctionFactoryDedicated{constructor(e){super({...e,functionNames:[n.SparqlOperator.SHA384],termFunction:!0})}async run(e){return new o.TermFunctionSha384}};return Vb.ActorFunctionFactoryTermSha384=i,Vb}var S7;function zie(){return S7||(S7=1,(function(u){var n=Ss&&Ss.__createBinding||(Object.create?(function(i,t,e,r){r===void 0&&(r=e);var a=Object.getOwnPropertyDescriptor(t,e);(!a||("get"in a?!t.__esModule:a.writable||a.configurable))&&(a={enumerable:!0,get:function(){return t[e]}}),Object.defineProperty(i,r,a)}):(function(i,t,e,r){r===void 0&&(r=e),i[r]=t[e]})),o=Ss&&Ss.__exportStar||function(i,t){for(var e in i)e!=="default"&&!Object.prototype.hasOwnProperty.call(t,e)&&n(t,i,e)};Object.defineProperty(u,"__esModule",{value:!0}),o(Gie(),u)})(Ss)),Ss}var Os={},Hb={},Gb={},O7;function Xie(){if(O7)return Gb;O7=1,Object.defineProperty(Gb,"__esModule",{value:!0}),Gb.TermFunctionSha512=void 0;const u=Te(),n=ge(),o=Gh();let i=class extends u.TermFunctionBase{constructor(){super({arity:1,operator:n.SparqlOperator.SHA512,overloads:(0,n.declare)(n.SparqlOperator.SHA512).onString1Typed(()=>e=>(0,n.string)((0,o.sha512)().update(e).digest("hex"))).collect()})}};return Gb.TermFunctionSha512=i,Gb}var A7;function Jie(){if(A7)return Hb;A7=1,Object.defineProperty(Hb,"__esModule",{value:!0}),Hb.ActorFunctionFactoryTermSha512=void 0;const u=Te(),n=ge(),o=Xie();let i=class extends u.ActorFunctionFactoryDedicated{constructor(e){super({...e,functionNames:[n.SparqlOperator.SHA512],termFunction:!0})}async run(e){return new o.TermFunctionSha512}};return Hb.ActorFunctionFactoryTermSha512=i,Hb}var E7;function Kie(){return E7||(E7=1,(function(u){var n=Os&&Os.__createBinding||(Object.create?(function(i,t,e,r){r===void 0&&(r=e);var a=Object.getOwnPropertyDescriptor(t,e);(!a||("get"in a?!t.__esModule:a.writable||a.configurable))&&(a={enumerable:!0,get:function(){return t[e]}}),Object.defineProperty(i,r,a)}):(function(i,t,e,r){r===void 0&&(r=e),i[r]=t[e]})),o=Os&&Os.__exportStar||function(i,t){for(var e in i)e!=="default"&&!Object.prototype.hasOwnProperty.call(t,e)&&n(t,i,e)};Object.defineProperty(u,"__esModule",{value:!0}),o(Jie(),u)})(Os)),Os}var As={},zb={},Xb={},x7;function kie(){if(x7)return Xb;x7=1,Object.defineProperty(Xb,"__esModule",{value:!0}),Xb.TermFunctionStrAfter=void 0;const u=Te(),n=ge();let o=class extends u.TermFunctionBase{constructor(){super({arity:2,operator:n.SparqlOperator.STRAFTER,overloads:(0,n.declare)(n.SparqlOperator.STRAFTER).onBinaryTyped([n.TypeURL.XSD_STRING,n.TypeURL.XSD_STRING],()=>(t,e)=>(0,n.string)(t.slice(t.indexOf(e)).slice(e.length))).onBinary([n.TypeURL.RDF_LANG_STRING,n.TypeURL.XSD_STRING],()=>(t,e)=>{const[r,a]=[t.typedValue,e.typedValue],c=r.slice(r.indexOf(a)).slice(a.length);return c||!a?(0,n.langString)(c,t.language):(0,n.string)(c)}).onBinary([n.TypeURL.RDF_LANG_STRING,n.TypeURL.RDF_LANG_STRING],()=>(t,e)=>{if(t.language!==e.language)throw new n.IncompatibleLanguageOperation(t,e);const[r,a]=[t.typedValue,e.typedValue],c=r.slice(r.indexOf(a)).slice(a.length);return c||!a?(0,n.langString)(c,t.language):(0,n.string)(c)}).collect()})}};return Xb.TermFunctionStrAfter=o,Xb}var R7;function Wie(){if(R7)return zb;R7=1,Object.defineProperty(zb,"__esModule",{value:!0}),zb.ActorFunctionFactoryTermStrAfter=void 0;const u=Te(),n=ge(),o=kie();let i=class extends u.ActorFunctionFactoryDedicated{constructor(e){super({...e,functionNames:[n.SparqlOperator.STRAFTER],termFunction:!0})}async run(e){return new o.TermFunctionStrAfter}};return zb.ActorFunctionFactoryTermStrAfter=i,zb}var F7;function Yie(){return F7||(F7=1,(function(u){var n=As&&As.__createBinding||(Object.create?(function(i,t,e,r){r===void 0&&(r=e);var a=Object.getOwnPropertyDescriptor(t,e);(!a||("get"in a?!t.__esModule:a.writable||a.configurable))&&(a={enumerable:!0,get:function(){return t[e]}}),Object.defineProperty(i,r,a)}):(function(i,t,e,r){r===void 0&&(r=e),i[r]=t[e]})),o=As&&As.__exportStar||function(i,t){for(var e in i)e!=="default"&&!Object.prototype.hasOwnProperty.call(t,e)&&n(t,i,e)};Object.defineProperty(u,"__esModule",{value:!0}),o(Wie(),u)})(As)),As}var Es={},Jb={},Kb={},I7;function Zie(){if(I7)return Kb;I7=1,Object.defineProperty(Kb,"__esModule",{value:!0}),Kb.TermFunctionStrBefore=void 0;const u=Te(),n=ge();let o=class extends u.TermFunctionBase{constructor(){super({arity:2,operator:n.SparqlOperator.STRBEFORE,overloads:(0,n.declare)(n.SparqlOperator.STRBEFORE).onBinaryTyped([n.TypeURL.XSD_STRING,n.TypeURL.XSD_STRING],()=>(t,e)=>(0,n.string)(t.slice(0,Math.max(0,t.indexOf(e))))).onBinary([n.TypeURL.RDF_LANG_STRING,n.TypeURL.XSD_STRING],()=>(t,e)=>{const[r,a]=[t.typedValue,e.typedValue],c=t.typedValue.slice(0,Math.max(0,r.indexOf(a)));return c||!a?(0,n.langString)(c,t.language):(0,n.string)(c)}).onBinary([n.TypeURL.RDF_LANG_STRING,n.TypeURL.RDF_LANG_STRING],()=>(t,e)=>{if(t.language!==e.language)throw new n.IncompatibleLanguageOperation(t,e);const[r,a]=[t.typedValue,e.typedValue],c=t.typedValue.slice(0,Math.max(0,r.indexOf(a)));return c||!a?(0,n.langString)(c,t.language):(0,n.string)(c)}).collect()})}};return Kb.TermFunctionStrBefore=o,Kb}var P7;function eae(){if(P7)return Jb;P7=1,Object.defineProperty(Jb,"__esModule",{value:!0}),Jb.ActorFunctionFactoryTermStrBefore=void 0;const u=Te(),n=ge(),o=Zie();let i=class extends u.ActorFunctionFactoryDedicated{constructor(e){super({...e,functionNames:[n.SparqlOperator.STRBEFORE],termFunction:!0})}async run(e){return new o.TermFunctionStrBefore}};return Jb.ActorFunctionFactoryTermStrBefore=i,Jb}var D7;function tae(){return D7||(D7=1,(function(u){var n=Es&&Es.__createBinding||(Object.create?(function(i,t,e,r){r===void 0&&(r=e);var a=Object.getOwnPropertyDescriptor(t,e);(!a||("get"in a?!t.__esModule:a.writable||a.configurable))&&(a={enumerable:!0,get:function(){return t[e]}}),Object.defineProperty(i,r,a)}):(function(i,t,e,r){r===void 0&&(r=e),i[r]=t[e]})),o=Es&&Es.__exportStar||function(i,t){for(var e in i)e!=="default"&&!Object.prototype.hasOwnProperty.call(t,e)&&n(t,i,e)};Object.defineProperty(u,"__esModule",{value:!0}),o(eae(),u)})(Es)),Es}var xs={},kb={},Wb={},N7;function rae(){if(N7)return Wb;N7=1,Object.defineProperty(Wb,"__esModule",{value:!0}),Wb.TermFunctionStrDt=void 0;const u=Te(),n=qe(),o=ge();let i=class extends u.TermFunctionBase{constructor(){super({arity:2,operator:o.SparqlOperator.STRDT,overloads:(0,o.declare)(o.SparqlOperator.STRDT).set([o.TypeURL.XSD_STRING,"namedNode"],e=>([r,a])=>{const c=e.context.getSafe(n.KeysInitQuery.dataFactory),s=c.literal(r.typedValue,c.namedNode(a.value));return new o.TermTransformer(e.context.getSafe(n.KeysExpressionEvaluator.superTypeProvider)).transformLiteral(s)}).collect()})}};return Wb.TermFunctionStrDt=i,Wb}var j7;function nae(){if(j7)return kb;j7=1,Object.defineProperty(kb,"__esModule",{value:!0}),kb.ActorFunctionFactoryTermStrDt=void 0;const u=Te(),n=ge(),o=rae();let i=class extends u.ActorFunctionFactoryDedicated{constructor(e){super({...e,functionNames:[n.SparqlOperator.STRDT],termFunction:!0})}async run(e){return new o.TermFunctionStrDt}};return kb.ActorFunctionFactoryTermStrDt=i,kb}var L7;function iae(){return L7||(L7=1,(function(u){var n=xs&&xs.__createBinding||(Object.create?(function(i,t,e,r){r===void 0&&(r=e);var a=Object.getOwnPropertyDescriptor(t,e);(!a||("get"in a?!t.__esModule:a.writable||a.configurable))&&(a={enumerable:!0,get:function(){return t[e]}}),Object.defineProperty(i,r,a)}):(function(i,t,e,r){r===void 0&&(r=e),i[r]=t[e]})),o=xs&&xs.__exportStar||function(i,t){for(var e in i)e!=="default"&&!Object.prototype.hasOwnProperty.call(t,e)&&n(t,i,e)};Object.defineProperty(u,"__esModule",{value:!0}),o(nae(),u)})(xs)),xs}var Rs={},Yb={},Zb={},M7;function aae(){if(M7)return Zb;M7=1,Object.defineProperty(Zb,"__esModule",{value:!0}),Zb.TermFunctionStrEnds=void 0;const u=Te(),n=ge();let o=class extends u.TermFunctionBase{constructor(){super({arity:2,operator:n.SparqlOperator.STRENDS,overloads:(0,n.declare)(n.SparqlOperator.STRENDS).onBinaryTyped([n.TypeAlias.SPARQL_STRINGLY,n.TypeURL.XSD_STRING],()=>(t,e)=>(0,n.bool)(t.endsWith(e))).onBinary([n.TypeURL.RDF_LANG_STRING,n.TypeURL.RDF_LANG_STRING],()=>(t,e)=>{if(t.language!==e.language)throw new n.IncompatibleLanguageOperation(t,e);return(0,n.bool)(t.typedValue.endsWith(e.typedValue))}).collect()})}};return Zb.TermFunctionStrEnds=o,Zb}var q7;function uae(){if(q7)return Yb;q7=1,Object.defineProperty(Yb,"__esModule",{value:!0}),Yb.ActorFunctionFactoryTermStrEnds=void 0;const u=Te(),n=ge(),o=aae();let i=class extends u.ActorFunctionFactoryDedicated{constructor(e){super({...e,functionNames:[n.SparqlOperator.STRENDS],termFunction:!0})}async run(e){return new o.TermFunctionStrEnds}};return Yb.ActorFunctionFactoryTermStrEnds=i,Yb}var C7;function oae(){return C7||(C7=1,(function(u){var n=Rs&&Rs.__createBinding||(Object.create?(function(i,t,e,r){r===void 0&&(r=e);var a=Object.getOwnPropertyDescriptor(t,e);(!a||("get"in a?!t.__esModule:a.writable||a.configurable))&&(a={enumerable:!0,get:function(){return t[e]}}),Object.defineProperty(i,r,a)}):(function(i,t,e,r){r===void 0&&(r=e),i[r]=t[e]})),o=Rs&&Rs.__exportStar||function(i,t){for(var e in i)e!=="default"&&!Object.prototype.hasOwnProperty.call(t,e)&&n(t,i,e)};Object.defineProperty(u,"__esModule",{value:!0}),o(uae(),u)})(Rs)),Rs}var Fs={},e_={},t_={},B7;function sae(){if(B7)return t_;B7=1,Object.defineProperty(t_,"__esModule",{value:!0}),t_.TermFunctionStrLang=void 0;const u=Te(),n=ge();let o=class extends u.TermFunctionBase{constructor(){super({arity:2,operator:n.SparqlOperator.STRLANG,overloads:(0,n.declare)(n.SparqlOperator.STRLANG).onBinaryTyped([n.TypeURL.XSD_STRING,n.TypeURL.XSD_STRING],()=>(t,e)=>new n.LangStringLiteral(t,e.toLowerCase())).collect()})}};return t_.TermFunctionStrLang=o,t_}var $7;function cae(){if($7)return e_;$7=1,Object.defineProperty(e_,"__esModule",{value:!0}),e_.ActorFunctionFactoryTermStrLang=void 0;const u=Te(),n=ge(),o=sae();let i=class extends u.ActorFunctionFactoryDedicated{constructor(e){super({...e,functionNames:[n.SparqlOperator.STRLANG],termFunction:!0})}async run(e){return new o.TermFunctionStrLang}};return e_.ActorFunctionFactoryTermStrLang=i,e_}var U7;function dae(){return U7||(U7=1,(function(u){var n=Fs&&Fs.__createBinding||(Object.create?(function(i,t,e,r){r===void 0&&(r=e);var a=Object.getOwnPropertyDescriptor(t,e);(!a||("get"in a?!t.__esModule:a.writable||a.configurable))&&(a={enumerable:!0,get:function(){return t[e]}}),Object.defineProperty(i,r,a)}):(function(i,t,e,r){r===void 0&&(r=e),i[r]=t[e]})),o=Fs&&Fs.__exportStar||function(i,t){for(var e in i)e!=="default"&&!Object.prototype.hasOwnProperty.call(t,e)&&n(t,i,e)};Object.defineProperty(u,"__esModule",{value:!0}),o(cae(),u)})(Fs)),Fs}var Is={},r_={},n_={},V7;function lae(){if(V7)return n_;V7=1,Object.defineProperty(n_,"__esModule",{value:!0}),n_.TermFunctionStrLen=void 0;const u=Te(),n=ge();let o=class extends u.TermFunctionBase{constructor(){super({arity:1,operator:n.SparqlOperator.STRLEN,overloads:(0,n.declare)(n.SparqlOperator.STRLEN).onStringly1(()=>t=>(0,n.integer)([...t.typedValue].length)).collect()})}};return n_.TermFunctionStrLen=o,n_}var Q7;function fae(){if(Q7)return r_;Q7=1,Object.defineProperty(r_,"__esModule",{value:!0}),r_.ActorFunctionFactoryTermStrLen=void 0;const u=Te(),n=ge(),o=lae();let i=class extends u.ActorFunctionFactoryDedicated{constructor(e){super({...e,functionNames:[n.SparqlOperator.STRLEN],termFunction:!0})}async run(e){return new o.TermFunctionStrLen}};return r_.ActorFunctionFactoryTermStrLen=i,r_}var H7;function hae(){return H7||(H7=1,(function(u){var n=Is&&Is.__createBinding||(Object.create?(function(i,t,e,r){r===void 0&&(r=e);var a=Object.getOwnPropertyDescriptor(t,e);(!a||("get"in a?!t.__esModule:a.writable||a.configurable))&&(a={enumerable:!0,get:function(){return t[e]}}),Object.defineProperty(i,r,a)}):(function(i,t,e,r){r===void 0&&(r=e),i[r]=t[e]})),o=Is&&Is.__exportStar||function(i,t){for(var e in i)e!=="default"&&!Object.prototype.hasOwnProperty.call(t,e)&&n(t,i,e)};Object.defineProperty(u,"__esModule",{value:!0}),o(fae(),u)})(Is)),Is}var Ps={},i_={},a_={},G7;function pae(){if(G7)return a_;G7=1,Object.defineProperty(a_,"__esModule",{value:!0}),a_.TermFunctionStrStarts=void 0;const u=Te(),n=ge();let o=class extends u.TermFunctionBase{constructor(){super({arity:2,operator:n.SparqlOperator.STRSTARTS,overloads:(0,n.declare)(n.SparqlOperator.STRSTARTS).onBinaryTyped([n.TypeAlias.SPARQL_STRINGLY,n.TypeURL.XSD_STRING],()=>(t,e)=>(0,n.bool)(t.startsWith(e))).onBinary([n.TypeURL.RDF_LANG_STRING,n.TypeURL.RDF_LANG_STRING],()=>(t,e)=>{if(t.language!==e.language)throw new n.IncompatibleLanguageOperation(t,e);return(0,n.bool)(t.typedValue.startsWith(e.typedValue))}).collect()})}};return a_.TermFunctionStrStarts=o,a_}var z7;function yae(){if(z7)return i_;z7=1,Object.defineProperty(i_,"__esModule",{value:!0}),i_.ActorFunctionFactoryTermStrStarts=void 0;const u=Te(),n=ge(),o=pae();let i=class extends u.ActorFunctionFactoryDedicated{constructor(e){super({...e,functionNames:[n.SparqlOperator.STRSTARTS],termFunction:!0})}async run(e){return new o.TermFunctionStrStarts}};return i_.ActorFunctionFactoryTermStrStarts=i,i_}var X7;function bae(){return X7||(X7=1,(function(u){var n=Ps&&Ps.__createBinding||(Object.create?(function(i,t,e,r){r===void 0&&(r=e);var a=Object.getOwnPropertyDescriptor(t,e);(!a||("get"in a?!t.__esModule:a.writable||a.configurable))&&(a={enumerable:!0,get:function(){return t[e]}}),Object.defineProperty(i,r,a)}):(function(i,t,e,r){r===void 0&&(r=e),i[r]=t[e]})),o=Ps&&Ps.__exportStar||function(i,t){for(var e in i)e!=="default"&&!Object.prototype.hasOwnProperty.call(t,e)&&n(t,i,e)};Object.defineProperty(u,"__esModule",{value:!0}),o(yae(),u)})(Ps)),Ps}var Ds={},u_={},o_={},lE={},z3={},J7;function _ae(){return J7||(J7=1,Object.defineProperty(z3,"__esModule",{value:!0}),z3.default="ffffffff-ffff-ffff-ffff-ffffffffffff"),z3}var X3={},K7;function gae(){return K7||(K7=1,Object.defineProperty(X3,"__esModule",{value:!0}),X3.default="00000000-0000-0000-0000-000000000000"),X3}var J3={},K3={},k3={},k7;function mae(){return k7||(k7=1,Object.defineProperty(k3,"__esModule",{value:!0}),k3.default=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-8][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000|ffffffff-ffff-ffff-ffff-ffffffffffff)$/i),k3}var W7;function W3(){if(W7)return K3;W7=1,Object.defineProperty(K3,"__esModule",{value:!0});const u=mae();function n(o){return typeof o=="string"&&u.default.test(o)}return K3.default=n,K3}var Y7;function Y3(){if(Y7)return J3;Y7=1,Object.defineProperty(J3,"__esModule",{value:!0});const u=W3();function n(o){if(!(0,u.default)(o))throw TypeError("Invalid UUID");let i;return Uint8Array.of((i=parseInt(o.slice(0,8),16))>>>24,i>>>16&255,i>>>8&255,i&255,(i=parseInt(o.slice(9,13),16))>>>8,i&255,(i=parseInt(o.slice(14,18),16))>>>8,i&255,(i=parseInt(o.slice(19,23),16))>>>8,i&255,(i=parseInt(o.slice(24,36),16))/1099511627776&255,i/4294967296&255,i>>>24&255,i>>>16&255,i>>>8&255,i&255)}return J3.default=n,J3}var Ff={},Z7;function ki(){if(Z7)return Ff;Z7=1,Object.defineProperty(Ff,"__esModule",{value:!0}),Ff.unsafeStringify=void 0;const u=W3(),n=[];for(let t=0;t<256;++t)n.push((t+256).toString(16).slice(1));function o(t,e=0){return(n[t[e+0]]+n[t[e+1]]+n[t[e+2]]+n[t[e+3]]+"-"+n[t[e+4]]+n[t[e+5]]+"-"+n[t[e+6]]+n[t[e+7]]+"-"+n[t[e+8]]+n[t[e+9]]+"-"+n[t[e+10]]+n[t[e+11]]+n[t[e+12]]+n[t[e+13]]+n[t[e+14]]+n[t[e+15]]).toLowerCase()}Ff.unsafeStringify=o;function i(t,e=0){const r=o(t,e);if(!(0,u.default)(r))throw TypeError("Stringified UUID is invalid");return r}return Ff.default=i,Ff}var If={},Z3={},eq;function fE(){if(eq)return Z3;eq=1,Object.defineProperty(Z3,"__esModule",{value:!0});let u;const n=new Uint8Array(16);function o(){if(!u){if(typeof crypto>"u"||!crypto.getRandomValues)throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");u=crypto.getRandomValues.bind(crypto)}return u(n)}return Z3.default=o,Z3}var tq;function rq(){if(tq)return If;tq=1,Object.defineProperty(If,"__esModule",{value:!0}),If.updateV1State=void 0;const u=fE(),n=ki(),o={};function i(r,a,c){var l;let s;const d=(r==null?void 0:r._v6)??!1;if(r){const f=Object.keys(r);f.length===1&&f[0]==="_v6"&&(r=void 0)}if(r)s=e(r.random??((l=r.rng)==null?void 0:l.call(r))??(0,u.default)(),r.msecs,r.nsecs,r.clockseq,r.node,a,c);else{const f=Date.now(),h=(0,u.default)();t(o,f,h),s=e(h,o.msecs,o.nsecs,d?void 0:o.clockseq,d?void 0:o.node,a,c)}return a??(0,n.unsafeStringify)(s)}function t(r,a,c){return r.msecs??(r.msecs=-1/0),r.nsecs??(r.nsecs=0),a===r.msecs?(r.nsecs++,r.nsecs>=1e4&&(r.node=void 0,r.nsecs=0)):a>r.msecs?r.nsecs=0:a<r.msecs&&(r.node=void 0),r.node||(r.node=c.slice(10,16),r.node[0]|=1,r.clockseq=(c[8]<<8|c[9])&16383),r.msecs=a,r}If.updateV1State=t;function e(r,a,c,s,d,l,f=0){if(r.length<16)throw new Error("Random bytes length must be >= 16");if(!l)l=new Uint8Array(16),f=0;else if(f<0||f+16>l.length)throw new RangeError(`UUID byte range ${f}:${f+15} is out of buffer bounds`);a??(a=Date.now()),c??(c=0),s??(s=(r[8]<<8|r[9])&16383),d??(d=r.slice(10,16)),a+=122192928e5;const h=((a&268435455)*1e4+c)%4294967296;l[f++]=h>>>24&255,l[f++]=h>>>16&255,l[f++]=h>>>8&255,l[f++]=h&255;const p=a/4294967296*1e4&268435455;l[f++]=p>>>8&255,l[f++]=p&255,l[f++]=p>>>24&15|16,l[f++]=p>>>16&255,l[f++]=s>>>8|128,l[f++]=s&255;for(let y=0;y<6;++y)l[f++]=d[y];return l}return If.default=i,If}var ew={},nq;function iq(){if(nq)return ew;nq=1,Object.defineProperty(ew,"__esModule",{value:!0});const u=Y3(),n=ki();function o(t){const e=typeof t=="string"?(0,u.default)(t):t,r=i(e);return typeof t=="string"?(0,n.unsafeStringify)(r):r}ew.default=o;function i(t){return Uint8Array.of((t[6]&15)<<4|t[7]>>4&15,(t[7]&15)<<4|(t[4]&240)>>4,(t[4]&15)<<4|(t[5]&240)>>4,(t[5]&15)<<4|(t[0]&240)>>4,(t[0]&15)<<4|(t[1]&240)>>4,(t[1]&15)<<4|(t[2]&240)>>4,96|t[2]&15,t[3],t[8],t[9],t[10],t[11],t[12],t[13],t[14],t[15])}return ew}var hE={},tw={},aq;function vae(){if(aq)return tw;aq=1,Object.defineProperty(tw,"__esModule",{value:!0});function u(f){const h=t(f),p=i(h,f.length*8);return n(p)}function n(f){const h=new Uint8Array(f.length*4);for(let p=0;p<f.length*4;p++)h[p]=f[p>>2]>>>p%4*8&255;return h}function o(f){return(f+64>>>9<<4)+14+1}function i(f,h){const p=new Uint32Array(o(h)).fill(0);p.set(f),p[h>>5]|=128<<h%32,p[p.length-1]=h,f=p;let y=1732584193,_=-271733879,b=-1732584194,m=271733878;for(let g=0;g<f.length;g+=16){const T=y,v=_,S=b,F=m;y=c(y,_,b,m,f[g],7,-680876936),m=c(m,y,_,b,f[g+1],12,-389564586),b=c(b,m,y,_,f[g+2],17,606105819),_=c(_,b,m,y,f[g+3],22,-1044525330),y=c(y,_,b,m,f[g+4],7,-176418897),m=c(m,y,_,b,f[g+5],12,1200080426),b=c(b,m,y,_,f[g+6],17,-1473231341),_=c(_,b,m,y,f[g+7],22,-45705983),y=c(y,_,b,m,f[g+8],7,1770035416),m=c(m,y,_,b,f[g+9],12,-1958414417),b=c(b,m,y,_,f[g+10],17,-42063),_=c(_,b,m,y,f[g+11],22,-1990404162),y=c(y,_,b,m,f[g+12],7,1804603682),m=c(m,y,_,b,f[g+13],12,-40341101),b=c(b,m,y,_,f[g+14],17,-1502002290),_=c(_,b,m,y,f[g+15],22,1236535329),y=s(y,_,b,m,f[g+1],5,-165796510),m=s(m,y,_,b,f[g+6],9,-1069501632),b=s(b,m,y,_,f[g+11],14,643717713),_=s(_,b,m,y,f[g],20,-373897302),y=s(y,_,b,m,f[g+5],5,-701558691),m=s(m,y,_,b,f[g+10],9,38016083),b=s(b,m,y,_,f[g+15],14,-660478335),_=s(_,b,m,y,f[g+4],20,-405537848),y=s(y,_,b,m,f[g+9],5,568446438),m=s(m,y,_,b,f[g+14],9,-1019803690),b=s(b,m,y,_,f[g+3],14,-187363961),_=s(_,b,m,y,f[g+8],20,1163531501),y=s(y,_,b,m,f[g+13],5,-1444681467),m=s(m,y,_,b,f[g+2],9,-51403784),b=s(b,m,y,_,f[g+7],14,1735328473),_=s(_,b,m,y,f[g+12],20,-1926607734),y=d(y,_,b,m,f[g+5],4,-378558),m=d(m,y,_,b,f[g+8],11,-2022574463),b=d(b,m,y,_,f[g+11],16,1839030562),_=d(_,b,m,y,f[g+14],23,-35309556),y=d(y,_,b,m,f[g+1],4,-1530992060),m=d(m,y,_,b,f[g+4],11,1272893353),b=d(b,m,y,_,f[g+7],16,-155497632),_=d(_,b,m,y,f[g+10],23,-1094730640),y=d(y,_,b,m,f[g+13],4,681279174),m=d(m,y,_,b,f[g],11,-358537222),b=d(b,m,y,_,f[g+3],16,-722521979),_=d(_,b,m,y,f[g+6],23,76029189),y=d(y,_,b,m,f[g+9],4,-640364487),m=d(m,y,_,b,f[g+12],11,-421815835),b=d(b,m,y,_,f[g+15],16,530742520),_=d(_,b,m,y,f[g+2],23,-995338651),y=l(y,_,b,m,f[g],6,-198630844),m=l(m,y,_,b,f[g+7],10,1126891415),b=l(b,m,y,_,f[g+14],15,-1416354905),_=l(_,b,m,y,f[g+5],21,-57434055),y=l(y,_,b,m,f[g+12],6,1700485571),m=l(m,y,_,b,f[g+3],10,-1894986606),b=l(b,m,y,_,f[g+10],15,-1051523),_=l(_,b,m,y,f[g+1],21,-2054922799),y=l(y,_,b,m,f[g+8],6,1873313359),m=l(m,y,_,b,f[g+15],10,-30611744),b=l(b,m,y,_,f[g+6],15,-1560198380),_=l(_,b,m,y,f[g+13],21,1309151649),y=l(y,_,b,m,f[g+4],6,-145523070),m=l(m,y,_,b,f[g+11],10,-1120210379),b=l(b,m,y,_,f[g+2],15,718787259),_=l(_,b,m,y,f[g+9],21,-343485551),y=e(y,T),_=e(_,v),b=e(b,S),m=e(m,F)}return Uint32Array.of(y,_,b,m)}function t(f){if(f.length===0)return new Uint32Array;const h=new Uint32Array(o(f.length*8)).fill(0);for(let p=0;p<f.length;p++)h[p>>2]|=(f[p]&255)<<p%4*8;return h}function e(f,h){const p=(f&65535)+(h&65535);return(f>>16)+(h>>16)+(p>>16)<<16|p&65535}function r(f,h){return f<<h|f>>>32-h}function a(f,h,p,y,_,b){return e(r(e(e(h,f),e(y,b)),_),p)}function c(f,h,p,y,_,b,m){return a(h&p|~h&y,f,h,_,b,m)}function s(f,h,p,y,_,b,m){return a(h&y|p&~y,f,h,_,b,m)}function d(f,h,p,y,_,b,m){return a(h^p^y,f,h,_,b,m)}function l(f,h,p,y,_,b,m){return a(p^(h|~y),f,h,_,b,m)}return tw.default=u,tw}var ei={},uq;function rw(){if(uq)return ei;uq=1,Object.defineProperty(ei,"__esModule",{value:!0}),ei.URL=ei.DNS=ei.stringToBytes=void 0;const u=Y3(),n=ki();function o(t){t=unescape(encodeURIComponent(t));const e=new Uint8Array(t.length);for(let r=0;r<t.length;++r)e[r]=t.charCodeAt(r);return e}ei.stringToBytes=o,ei.DNS="6ba7b810-9dad-11d1-80b4-00c04fd430c8",ei.URL="6ba7b811-9dad-11d1-80b4-00c04fd430c8";function i(t,e,r,a,c,s){const d=typeof r=="string"?o(r):r,l=typeof a=="string"?(0,u.default)(a):a;if(typeof a=="string"&&(a=(0,u.default)(a)),(a==null?void 0:a.length)!==16)throw TypeError("Namespace must be array-like (16 iterable integer values, 0-255)");let f=new Uint8Array(16+d.length);if(f.set(l),f.set(d,l.length),f=e(f),f[6]=f[6]&15|t,f[8]=f[8]&63|128,c){s=s||0;for(let h=0;h<16;++h)c[s+h]=f[h];return c}return(0,n.unsafeStringify)(f)}return ei.default=i,ei}var oq;function Tae(){return oq||(oq=1,(function(u){Object.defineProperty(u,"__esModule",{value:!0}),u.URL=u.DNS=void 0;const n=vae(),o=rw();var i=rw();Object.defineProperty(u,"DNS",{enumerable:!0,get:function(){return i.DNS}}),Object.defineProperty(u,"URL",{enumerable:!0,get:function(){return i.URL}});function t(e,r,a,c){return(0,o.default)(48,n.default,e,r,a,c)}t.DNS=o.DNS,t.URL=o.URL,u.default=t})(hE)),hE}var nw={},iw={},sq;function wae(){if(sq)return iw;sq=1,Object.defineProperty(iw,"__esModule",{value:!0});const u=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto);return iw.default={randomUUID:u},iw}var cq;function Sae(){if(cq)return nw;cq=1,Object.defineProperty(nw,"__esModule",{value:!0});const u=wae(),n=fE(),o=ki();function i(t,e,r){var c;if(u.default.randomUUID&&!e&&!t)return u.default.randomUUID();t=t||{};const a=t.random??((c=t.rng)==null?void 0:c.call(t))??(0,n.default)();if(a.length<16)throw new Error("Random bytes length must be >= 16");if(a[6]=a[6]&15|64,a[8]=a[8]&63|128,e){if(r=r||0,r<0||r+16>e.length)throw new RangeError(`UUID byte range ${r}:${r+15} is out of buffer bounds`);for(let s=0;s<16;++s)e[r+s]=a[s];return e}return(0,o.unsafeStringify)(a)}return nw.default=i,nw}var pE={},aw={},dq;function Oae(){if(dq)return aw;dq=1,Object.defineProperty(aw,"__esModule",{value:!0});function u(i,t,e,r){switch(i){case 0:return t&e^~t&r;case 1:return t^e^r;case 2:return t&e^t&r^e&r;case 3:return t^e^r}}function n(i,t){return i<<t|i>>>32-t}function o(i){const t=[1518500249,1859775393,2400959708,3395469782],e=[1732584193,4023233417,2562383102,271733878,3285377520],r=new Uint8Array(i.length+1);r.set(i),r[i.length]=128,i=r;const a=i.length/4+2,c=Math.ceil(a/16),s=new Array(c);for(let d=0;d<c;++d){const l=new Uint32Array(16);for(let f=0;f<16;++f)l[f]=i[d*64+f*4]<<24|i[d*64+f*4+1]<<16|i[d*64+f*4+2]<<8|i[d*64+f*4+3];s[d]=l}s[c-1][14]=(i.length-1)*8/Math.pow(2,32),s[c-1][14]=Math.floor(s[c-1][14]),s[c-1][15]=(i.length-1)*8&4294967295;for(let d=0;d<c;++d){const l=new Uint32Array(80);for(let b=0;b<16;++b)l[b]=s[d][b];for(let b=16;b<80;++b)l[b]=n(l[b-3]^l[b-8]^l[b-14]^l[b-16],1);let f=e[0],h=e[1],p=e[2],y=e[3],_=e[4];for(let b=0;b<80;++b){const m=Math.floor(b/20),g=n(f,5)+u(m,h,p,y)+_+t[m]+l[b]>>>0;_=y,y=p,p=n(h,30)>>>0,h=f,f=g}e[0]=e[0]+f>>>0,e[1]=e[1]+h>>>0,e[2]=e[2]+p>>>0,e[3]=e[3]+y>>>0,e[4]=e[4]+_>>>0}return Uint8Array.of(e[0]>>24,e[0]>>16,e[0]>>8,e[0],e[1]>>24,e[1]>>16,e[1]>>8,e[1],e[2]>>24,e[2]>>16,e[2]>>8,e[2],e[3]>>24,e[3]>>16,e[3]>>8,e[3],e[4]>>24,e[4]>>16,e[4]>>8,e[4])}return aw.default=o,aw}var lq;function Aae(){return lq||(lq=1,(function(u){Object.defineProperty(u,"__esModule",{value:!0}),u.URL=u.DNS=void 0;const n=Oae(),o=rw();var i=rw();Object.defineProperty(u,"DNS",{enumerable:!0,get:function(){return i.DNS}}),Object.defineProperty(u,"URL",{enumerable:!0,get:function(){return i.URL}});function t(e,r,a,c){return(0,o.default)(80,n.default,e,r,a,c)}t.DNS=o.DNS,t.URL=o.URL,u.default=t})(pE)),pE}var uw={},fq;function Eae(){if(fq)return uw;fq=1,Object.defineProperty(uw,"__esModule",{value:!0});const u=ki(),n=rq(),o=iq();function i(t,e,r){t??(t={}),r??(r=0);let a=(0,n.default)({...t,_v6:!0},new Uint8Array(16));if(a=(0,o.default)(a),e){for(let c=0;c<16;c++)e[r+c]=a[c];return e}return(0,u.unsafeStringify)(a)}return uw.default=i,uw}var ow={},hq;function xae(){if(hq)return ow;hq=1,Object.defineProperty(ow,"__esModule",{value:!0});const u=Y3(),n=ki();function o(t){const e=typeof t=="string"?(0,u.default)(t):t,r=i(e);return typeof t=="string"?(0,n.unsafeStringify)(r):r}ow.default=o;function i(t){return Uint8Array.of((t[3]&15)<<4|t[4]>>4&15,(t[4]&15)<<4|(t[5]&240)>>4,(t[5]&15)<<4|t[6]&15,t[7],(t[1]&15)<<4|(t[2]&240)>>4,(t[2]&15)<<4|(t[3]&240)>>4,16|(t[0]&240)>>4,(t[0]&15)<<4|(t[1]&240)>>4,t[8],t[9],t[10],t[11],t[12],t[13],t[14],t[15])}return ow}var Pf={},pq;function Rae(){if(pq)return Pf;pq=1,Object.defineProperty(Pf,"__esModule",{value:!0}),Pf.updateV7State=void 0;const u=fE(),n=ki(),o={};function i(r,a,c){var d;let s;if(r)s=e(r.random??((d=r.rng)==null?void 0:d.call(r))??(0,u.default)(),r.msecs,r.seq,a,c);else{const l=Date.now(),f=(0,u.default)();t(o,l,f),s=e(f,o.msecs,o.seq,a,c)}return a??(0,n.unsafeStringify)(s)}function t(r,a,c){return r.msecs??(r.msecs=-1/0),r.seq??(r.seq=0),a>r.msecs?(r.seq=c[6]<<23|c[7]<<16|c[8]<<8|c[9],r.msecs=a):(r.seq=r.seq+1|0,r.seq===0&&r.msecs++),r}Pf.updateV7State=t;function e(r,a,c,s,d=0){if(r.length<16)throw new Error("Random bytes length must be >= 16");if(!s)s=new Uint8Array(16),d=0;else if(d<0||d+16>s.length)throw new RangeError(`UUID byte range ${d}:${d+15} is out of buffer bounds`);return a??(a=Date.now()),c??(c=r[6]*127<<24|r[7]<<16|r[8]<<8|r[9]),s[d++]=a/1099511627776&255,s[d++]=a/4294967296&255,s[d++]=a/16777216&255,s[d++]=a/65536&255,s[d++]=a/256&255,s[d++]=a&255,s[d++]=112|c>>>28&15,s[d++]=c>>>20&255,s[d++]=128|c>>>14&63,s[d++]=c>>>6&255,s[d++]=c<<2&255|r[10]&3,s[d++]=r[11],s[d++]=r[12],s[d++]=r[13],s[d++]=r[14],s[d++]=r[15],s}return Pf.default=i,Pf}var sw={},yq;function Fae(){if(yq)return sw;yq=1,Object.defineProperty(sw,"__esModule",{value:!0});const u=W3();function n(o){if(!(0,u.default)(o))throw TypeError("Invalid UUID");return parseInt(o.slice(14,15),16)}return sw.default=n,sw}var bq;function _q(){return bq||(bq=1,(function(u){Object.defineProperty(u,"__esModule",{value:!0}),u.version=u.validate=u.v7=u.v6ToV1=u.v6=u.v5=u.v4=u.v3=u.v1ToV6=u.v1=u.stringify=u.parse=u.NIL=u.MAX=void 0;var n=_ae();Object.defineProperty(u,"MAX",{enumerable:!0,get:function(){return n.default}});var o=gae();Object.defineProperty(u,"NIL",{enumerable:!0,get:function(){return o.default}});var i=Y3();Object.defineProperty(u,"parse",{enumerable:!0,get:function(){return i.default}});var t=ki();Object.defineProperty(u,"stringify",{enumerable:!0,get:function(){return t.default}});var e=rq();Object.defineProperty(u,"v1",{enumerable:!0,get:function(){return e.default}});var r=iq();Object.defineProperty(u,"v1ToV6",{enumerable:!0,get:function(){return r.default}});var a=Tae();Object.defineProperty(u,"v3",{enumerable:!0,get:function(){return a.default}});var c=Sae();Object.defineProperty(u,"v4",{enumerable:!0,get:function(){return c.default}});var s=Aae();Object.defineProperty(u,"v5",{enumerable:!0,get:function(){return s.default}});var d=Eae();Object.defineProperty(u,"v6",{enumerable:!0,get:function(){return d.default}});var l=xae();Object.defineProperty(u,"v6ToV1",{enumerable:!0,get:function(){return l.default}});var f=Rae();Object.defineProperty(u,"v7",{enumerable:!0,get:function(){return f.default}});var h=W3();Object.defineProperty(u,"validate",{enumerable:!0,get:function(){return h.default}});var p=Fae();Object.defineProperty(u,"version",{enumerable:!0,get:function(){return p.default}})})(lE)),lE}var gq;function Iae(){if(gq)return o_;gq=1,Object.defineProperty(o_,"__esModule",{value:!0}),o_.TermFunctionStrUuid=void 0;const u=Te(),n=ge(),o=_q();let i=class extends u.TermFunctionBase{constructor(){super({arity:0,operator:n.SparqlOperator.STRUUID,overloads:(0,n.declare)(n.SparqlOperator.STRUUID).set([],()=>()=>(0,n.string)(o.v4())).collect()})}};return o_.TermFunctionStrUuid=i,o_}var mq;function Pae(){if(mq)return u_;mq=1,Object.defineProperty(u_,"__esModule",{value:!0}),u_.ActorFunctionFactoryTermStrUuid=void 0;const u=Te(),n=ge(),o=Iae();let i=class extends u.ActorFunctionFactoryDedicated{constructor(e){super({...e,functionNames:[n.SparqlOperator.STRUUID],termFunction:!0})}async run(e){return new o.TermFunctionStrUuid}};return u_.ActorFunctionFactoryTermStrUuid=i,u_}var vq;function Dae(){return vq||(vq=1,(function(u){var n=Ds&&Ds.__createBinding||(Object.create?(function(i,t,e,r){r===void 0&&(r=e);var a=Object.getOwnPropertyDescriptor(t,e);(!a||("get"in a?!t.__esModule:a.writable||a.configurable))&&(a={enumerable:!0,get:function(){return t[e]}}),Object.defineProperty(i,r,a)}):(function(i,t,e,r){r===void 0&&(r=e),i[r]=t[e]})),o=Ds&&Ds.__exportStar||function(i,t){for(var e in i)e!=="default"&&!Object.prototype.hasOwnProperty.call(t,e)&&n(t,i,e)};Object.defineProperty(u,"__esModule",{value:!0}),o(Pae(),u)})(Ds)),Ds}var Ns={},s_={},c_={},Tq;function Nae(){if(Tq)return c_;Tq=1,Object.defineProperty(c_,"__esModule",{value:!0}),c_.TermFunctionStr=void 0;const u=Te(),n=ge();let o=class extends u.TermFunctionBase{constructor(){super({arity:1,operator:n.SparqlOperator.STR,overloads:(0,n.declare)(n.SparqlOperator.STR).onTerm1(()=>t=>(0,n.string)(t.str())).collect()})}};return c_.TermFunctionStr=o,c_}var wq;function jae(){if(wq)return s_;wq=1,Object.defineProperty(s_,"__esModule",{value:!0}),s_.ActorFunctionFactoryTermStr=void 0;const u=Te(),n=ge(),o=Nae();let i=class extends u.ActorFunctionFactoryDedicated{constructor(e){super({...e,functionNames:[n.SparqlOperator.STR],termFunction:!0})}async run(e){return new o.TermFunctionStr}};return s_.ActorFunctionFactoryTermStr=i,s_}var Sq;function Lae(){return Sq||(Sq=1,(function(u){var n=Ns&&Ns.__createBinding||(Object.create?(function(i,t,e,r){r===void 0&&(r=e);var a=Object.getOwnPropertyDescriptor(t,e);(!a||("get"in a?!t.__esModule:a.writable||a.configurable))&&(a={enumerable:!0,get:function(){return t[e]}}),Object.defineProperty(i,r,a)}):(function(i,t,e,r){r===void 0&&(r=e),i[r]=t[e]})),o=Ns&&Ns.__exportStar||function(i,t){for(var e in i)e!=="default"&&!Object.prototype.hasOwnProperty.call(t,e)&&n(t,i,e)};Object.defineProperty(u,"__esModule",{value:!0}),o(jae(),u)})(Ns)),Ns}var js={},d_={},l_={},Oq;function Mae(){if(Oq)return l_;Oq=1,Object.defineProperty(l_,"__esModule",{value:!0}),l_.TermFunctionSubStr=void 0;const u=Te(),n=ge();let o=class extends u.TermFunctionBase{constructor(){super({arity:[2,3],operator:n.SparqlOperator.SUBSTR,overloads:(0,n.declare)(n.SparqlOperator.SUBSTR).onBinaryTyped([n.TypeURL.XSD_STRING,n.TypeURL.XSD_INTEGER],()=>(t,e)=>(0,n.string)([...t].slice(e-1).join(""))).onBinary([n.TypeURL.RDF_LANG_STRING,n.TypeURL.XSD_INTEGER],()=>(t,e)=>{const r=[...t.typedValue].slice(e.typedValue-1).join("");return(0,n.langString)(r,t.language)}).onTernaryTyped([n.TypeURL.XSD_STRING,n.TypeURL.XSD_INTEGER,n.TypeURL.XSD_INTEGER],()=>(t,e,r)=>(0,n.string)([...t].slice(e-1,r+e-1).join(""))).onTernary([n.TypeURL.RDF_LANG_STRING,n.TypeURL.XSD_INTEGER,n.TypeURL.XSD_INTEGER],()=>(t,e,r)=>{const a=[...t.typedValue].slice(e.typedValue-1,r.typedValue+e.typedValue-1).join("");return(0,n.langString)(a,t.language)}).collect()})}};return l_.TermFunctionSubStr=o,l_}var Aq;function qae(){if(Aq)return d_;Aq=1,Object.defineProperty(d_,"__esModule",{value:!0}),d_.ActorFunctionFactoryTermSubStr=void 0;const u=Te(),n=ge(),o=Mae();let i=class extends u.ActorFunctionFactoryDedicated{constructor(e){super({...e,functionNames:[n.SparqlOperator.SUBSTR],termFunction:!0})}async run(e){return new o.TermFunctionSubStr}};return d_.ActorFunctionFactoryTermSubStr=i,d_}var Eq;function Cae(){return Eq||(Eq=1,(function(u){var n=js&&js.__createBinding||(Object.create?(function(i,t,e,r){r===void 0&&(r=e);var a=Object.getOwnPropertyDescriptor(t,e);(!a||("get"in a?!t.__esModule:a.writable||a.configurable))&&(a={enumerable:!0,get:function(){return t[e]}}),Object.defineProperty(i,r,a)}):(function(i,t,e,r){r===void 0&&(r=e),i[r]=t[e]})),o=js&&js.__exportStar||function(i,t){for(var e in i)e!=="default"&&!Object.prototype.hasOwnProperty.call(t,e)&&n(t,i,e)};Object.defineProperty(u,"__esModule",{value:!0}),o(qae(),u)})(js)),js}var Ls={},f_={},h_={},xq;function Bae(){if(xq)return h_;xq=1,Object.defineProperty(h_,"__esModule",{value:!0}),h_.TermFunctionSubject=void 0;const u=Te(),n=ge();let o=class extends u.TermFunctionBase{constructor(){super({arity:1,operator:n.SparqlOperator.SUBJECT,overloads:(0,n.declare)(n.SparqlOperator.SUBJECT).onQuad1(()=>t=>t.subject).collect()})}};return h_.TermFunctionSubject=o,h_}var Rq;function $ae(){if(Rq)return f_;Rq=1,Object.defineProperty(f_,"__esModule",{value:!0}),f_.ActorFunctionFactoryTermSubject=void 0;const u=Te(),n=ge(),o=Bae();let i=class extends u.ActorFunctionFactoryDedicated{constructor(e){super({...e,functionNames:[n.SparqlOperator.SUBJECT],termFunction:!0})}async run(e){return new o.TermFunctionSubject}};return f_.ActorFunctionFactoryTermSubject=i,f_}var Fq;function Uae(){return Fq||(Fq=1,(function(u){var n=Ls&&Ls.__createBinding||(Object.create?(function(i,t,e,r){r===void 0&&(r=e);var a=Object.getOwnPropertyDescriptor(t,e);(!a||("get"in a?!t.__esModule:a.writable||a.configurable))&&(a={enumerable:!0,get:function(){return t[e]}}),Object.defineProperty(i,r,a)}):(function(i,t,e,r){r===void 0&&(r=e),i[r]=t[e]})),o=Ls&&Ls.__exportStar||function(i,t){for(var e in i)e!=="default"&&!Object.prototype.hasOwnProperty.call(t,e)&&n(t,i,e)};Object.defineProperty(u,"__esModule",{value:!0}),o($ae(),u)})(Ls)),Ls}var Ms={},p_={},y_={},Iq;function Vae(){if(Iq)return y_;Iq=1,Object.defineProperty(y_,"__esModule",{value:!0}),y_.TermFunctionSubtraction=void 0;const u=Te(),n=qe(),o=ge(),i=G3();let t=class extends u.TermFunctionBase{constructor(){super({arity:2,operator:o.SparqlOperator.SUBTRACTION,overloads:(0,o.declare)(o.SparqlOperator.SUBTRACTION).arithmetic(()=>(r,a)=>new i.BigNumber(r).minus(a).toNumber()).set([o.TypeURL.XSD_DATE_TIME,o.TypeURL.XSD_DATE_TIME],r=>([a,c])=>new o.DayTimeDurationLiteral((0,o.elapsedDuration)(a.typedValue,c.typedValue,r.context.getSafe(n.KeysExpressionEvaluator.defaultTimeZone)))).copy({from:[o.TypeURL.XSD_DATE_TIME,o.TypeURL.XSD_DATE_TIME],to:[o.TypeURL.XSD_DATE,o.TypeURL.XSD_DATE]}).copy({from:[o.TypeURL.XSD_DATE_TIME,o.TypeURL.XSD_DATE_TIME],to:[o.TypeURL.XSD_TIME,o.TypeURL.XSD_TIME]}).set([o.TypeURL.XSD_DATE_TIME,o.TypeURL.XSD_DAY_TIME_DURATION],()=>([r,a])=>new o.DateTimeLiteral((0,o.addDurationToDateTime)(r.typedValue,(0,o.defaultedDurationRepresentation)((0,o.negateDuration)(a.typedValue))))).copy({from:[o.TypeURL.XSD_DATE_TIME,o.TypeURL.XSD_DAY_TIME_DURATION],to:[o.TypeURL.XSD_DATE_TIME,o.TypeURL.XSD_YEAR_MONTH_DURATION]}).set([o.TypeURL.XSD_DATE,o.TypeURL.XSD_DAY_TIME_DURATION],()=>([r,a])=>new o.DateLiteral((0,o.addDurationToDateTime)((0,o.defaultedDateTimeRepresentation)(r.typedValue),(0,o.defaultedDurationRepresentation)((0,o.negateDuration)(a.typedValue))))).copy({from:[o.TypeURL.XSD_DATE,o.TypeURL.XSD_DAY_TIME_DURATION],to:[o.TypeURL.XSD_DATE,o.TypeURL.XSD_YEAR_MONTH_DURATION]}).set([o.TypeURL.XSD_TIME,o.TypeURL.XSD_DAY_TIME_DURATION],()=>([r,a])=>new o.TimeLiteral((0,o.addDurationToDateTime)((0,o.defaultedDateTimeRepresentation)(r.typedValue),(0,o.defaultedDurationRepresentation)((0,o.negateDuration)(a.typedValue))))).collect()})}};return y_.TermFunctionSubtraction=t,y_}var Pq;function Qae(){if(Pq)return p_;Pq=1,Object.defineProperty(p_,"__esModule",{value:!0}),p_.ActorFunctionFactoryTermSubtraction=void 0;const u=Te(),n=ge(),o=Vae();let i=class extends u.ActorFunctionFactoryDedicated{constructor(e){super({...e,functionNames:[n.SparqlOperator.SUBTRACTION],termFunction:!0})}async run(e){return new o.TermFunctionSubtraction}};return p_.ActorFunctionFactoryTermSubtraction=i,p_}var Dq;function Hae(){return Dq||(Dq=1,(function(u){var n=Ms&&Ms.__createBinding||(Object.create?(function(i,t,e,r){r===void 0&&(r=e);var a=Object.getOwnPropertyDescriptor(t,e);(!a||("get"in a?!t.__esModule:a.writable||a.configurable))&&(a={enumerable:!0,get:function(){return t[e]}}),Object.defineProperty(i,r,a)}):(function(i,t,e,r){r===void 0&&(r=e),i[r]=t[e]})),o=Ms&&Ms.__exportStar||function(i,t){for(var e in i)e!=="default"&&!Object.prototype.hasOwnProperty.call(t,e)&&n(t,i,e)};Object.defineProperty(u,"__esModule",{value:!0}),o(Qae(),u)})(Ms)),Ms}var qs={},b_={},__={},Nq;function Gae(){if(Nq)return __;Nq=1,Object.defineProperty(__,"__esModule",{value:!0}),__.TermFunctionTimezone=void 0;const u=Te(),n=ge();let o=class extends u.TermFunctionBase{constructor(){super({arity:1,operator:n.SparqlOperator.TIMEZONE,overloads:(0,n.declare)(n.SparqlOperator.TIMEZONE).onDateTime1(()=>t=>{const e={hours:t.typedValue.zoneHours,minutes:t.typedValue.zoneMinutes};if(e.hours===void 0&&e.minutes===void 0)throw new n.InvalidTimezoneCall(t.str());return new n.DayTimeDurationLiteral(e)}).copy({from:[n.TypeURL.XSD_DATE_TIME],to:[n.TypeURL.XSD_DATE]}).copy({from:[n.TypeURL.XSD_DATE_TIME],to:[n.TypeURL.XSD_TIME]}).collect()})}};return __.TermFunctionTimezone=o,__}var jq;function zae(){if(jq)return b_;jq=1,Object.defineProperty(b_,"__esModule",{value:!0}),b_.ActorFunctionFactoryTermTimezone=void 0;const u=Te(),n=ge(),o=Gae();let i=class extends u.ActorFunctionFactoryDedicated{constructor(e){super({...e,functionNames:[n.SparqlOperator.TIMEZONE],termFunction:!0})}async run(e){return new o.TermFunctionTimezone}};return b_.ActorFunctionFactoryTermTimezone=i,b_}var Lq;function Xae(){return Lq||(Lq=1,(function(u){var n=qs&&qs.__createBinding||(Object.create?(function(i,t,e,r){r===void 0&&(r=e);var a=Object.getOwnPropertyDescriptor(t,e);(!a||("get"in a?!t.__esModule:a.writable||a.configurable))&&(a={enumerable:!0,get:function(){return t[e]}}),Object.defineProperty(i,r,a)}):(function(i,t,e,r){r===void 0&&(r=e),i[r]=t[e]})),o=qs&&qs.__exportStar||function(i,t){for(var e in i)e!=="default"&&!Object.prototype.hasOwnProperty.call(t,e)&&n(t,i,e)};Object.defineProperty(u,"__esModule",{value:!0}),o(zae(),u)})(qs)),qs}var Cs={},g_={},m_={},Mq;function Jae(){if(Mq)return m_;Mq=1,Object.defineProperty(m_,"__esModule",{value:!0}),m_.TermFunctionTriple=void 0;const u=Te(),n=ge();let o=class extends u.TermFunctionBase{constructor(){super({arity:3,operator:n.SparqlOperator.TRIPLE,overloads:(0,n.declare)(n.SparqlOperator.TRIPLE).onTerm3(t=>(...e)=>new n.Quad(e[0],e[1],e[2],new n.DefaultGraph)).collect()})}};return m_.TermFunctionTriple=o,m_}var qq;function Kae(){if(qq)return g_;qq=1,Object.defineProperty(g_,"__esModule",{value:!0}),g_.ActorFunctionFactoryTermTriple=void 0;const u=Te(),n=ge(),o=Jae();let i=class extends u.ActorFunctionFactoryDedicated{constructor(e){super({...e,functionNames:[n.SparqlOperator.TRIPLE],termFunction:!0})}async run(e){return new o.TermFunctionTriple}};return g_.ActorFunctionFactoryTermTriple=i,g_}var Cq;function kae(){return Cq||(Cq=1,(function(u){var n=Cs&&Cs.__createBinding||(Object.create?(function(i,t,e,r){r===void 0&&(r=e);var a=Object.getOwnPropertyDescriptor(t,e);(!a||("get"in a?!t.__esModule:a.writable||a.configurable))&&(a={enumerable:!0,get:function(){return t[e]}}),Object.defineProperty(i,r,a)}):(function(i,t,e,r){r===void 0&&(r=e),i[r]=t[e]})),o=Cs&&Cs.__exportStar||function(i,t){for(var e in i)e!=="default"&&!Object.prototype.hasOwnProperty.call(t,e)&&n(t,i,e)};Object.defineProperty(u,"__esModule",{value:!0}),o(Kae(),u)})(Cs)),Cs}var Bs={},v_={},T_={},Bq;function Wae(){if(Bq)return T_;Bq=1,Object.defineProperty(T_,"__esModule",{value:!0}),T_.TermFunctionTz=void 0;const u=Te(),n=ge();let o=class extends u.TermFunctionBase{constructor(){super({arity:1,operator:n.SparqlOperator.TZ,overloads:(0,n.declare)(n.SparqlOperator.TZ).onDateTime1(()=>t=>(0,n.string)((0,n.extractRawTimeZone)(t.str()))).copy({from:[n.TypeURL.XSD_DATE_TIME],to:[n.TypeURL.XSD_DATE]}).copy({from:[n.TypeURL.XSD_DATE_TIME],to:[n.TypeURL.XSD_TIME]}).collect()})}};return T_.TermFunctionTz=o,T_}var $q;function Yae(){if($q)return v_;$q=1,Object.defineProperty(v_,"__esModule",{value:!0}),v_.ActorFunctionFactoryTermTz=void 0;const u=Te(),n=ge(),o=Wae();let i=class extends u.ActorFunctionFactoryDedicated{constructor(e){super({...e,functionNames:[n.SparqlOperator.TZ],termFunction:!0})}async run(e){return new o.TermFunctionTz}};return v_.ActorFunctionFactoryTermTz=i,v_}var Uq;function Zae(){return Uq||(Uq=1,(function(u){var n=Bs&&Bs.__createBinding||(Object.create?(function(i,t,e,r){r===void 0&&(r=e);var a=Object.getOwnPropertyDescriptor(t,e);(!a||("get"in a?!t.__esModule:a.writable||a.configurable))&&(a={enumerable:!0,get:function(){return t[e]}}),Object.defineProperty(i,r,a)}):(function(i,t,e,r){r===void 0&&(r=e),i[r]=t[e]})),o=Bs&&Bs.__exportStar||function(i,t){for(var e in i)e!=="default"&&!Object.prototype.hasOwnProperty.call(t,e)&&n(t,i,e)};Object.defineProperty(u,"__esModule",{value:!0}),o(Yae(),u)})(Bs)),Bs}var $s={},w_={},S_={},Vq;function eue(){if(Vq)return S_;Vq=1,Object.defineProperty(S_,"__esModule",{value:!0}),S_.TermFunctionUcase=void 0;const u=Te(),n=ge();let o=class extends u.TermFunctionBase{constructor(){super({arity:1,operator:n.SparqlOperator.UCASE,overloads:(0,n.declare)(n.SparqlOperator.UCASE).onString1Typed(()=>t=>(0,n.string)(t.toUpperCase())).onLangString1(()=>t=>(0,n.langString)(t.typedValue.toUpperCase(),t.language)).collect()})}};return S_.TermFunctionUcase=o,S_}var Qq;function tue(){if(Qq)return w_;Qq=1,Object.defineProperty(w_,"__esModule",{value:!0}),w_.ActorFunctionFactoryTermUcase=void 0;const u=Te(),n=ge(),o=eue();let i=class extends u.ActorFunctionFactoryDedicated{constructor(e){super({...e,functionNames:[n.SparqlOperator.UCASE],termFunction:!0})}async run(e){return new o.TermFunctionUcase}};return w_.ActorFunctionFactoryTermUcase=i,w_}var Hq;function rue(){return Hq||(Hq=1,(function(u){var n=$s&&$s.__createBinding||(Object.create?(function(i,t,e,r){r===void 0&&(r=e);var a=Object.getOwnPropertyDescriptor(t,e);(!a||("get"in a?!t.__esModule:a.writable||a.configurable))&&(a={enumerable:!0,get:function(){return t[e]}}),Object.defineProperty(i,r,a)}):(function(i,t,e,r){r===void 0&&(r=e),i[r]=t[e]})),o=$s&&$s.__exportStar||function(i,t){for(var e in i)e!=="default"&&!Object.prototype.hasOwnProperty.call(t,e)&&n(t,i,e)};Object.defineProperty(u,"__esModule",{value:!0}),o(tue(),u)})($s)),$s}var Us={},O_={},A_={},Gq;function nue(){if(Gq)return A_;Gq=1,Object.defineProperty(A_,"__esModule",{value:!0}),A_.TermFunctionUnaryMinus=void 0;const u=Te(),n=ge();let o=class extends u.TermFunctionBase{constructor(){super({arity:1,operator:n.SparqlOperator.UMINUS,overloads:(0,n.declare)(n.SparqlOperator.UMINUS).numericConverter(()=>t=>-t).collect()})}};return A_.TermFunctionUnaryMinus=o,A_}var zq;function iue(){if(zq)return O_;zq=1,Object.defineProperty(O_,"__esModule",{value:!0}),O_.ActorFunctionFactoryTermUnaryMinus=void 0;const u=Te(),n=ge(),o=nue();let i=class extends u.ActorFunctionFactoryDedicated{constructor(e){super({...e,functionNames:[n.SparqlOperator.UMINUS],termFunction:!0})}async run(e){return new o.TermFunctionUnaryMinus}};return O_.ActorFunctionFactoryTermUnaryMinus=i,O_}var Xq;function aue(){return Xq||(Xq=1,(function(u){var n=Us&&Us.__createBinding||(Object.create?(function(i,t,e,r){r===void 0&&(r=e);var a=Object.getOwnPropertyDescriptor(t,e);(!a||("get"in a?!t.__esModule:a.writable||a.configurable))&&(a={enumerable:!0,get:function(){return t[e]}}),Object.defineProperty(i,r,a)}):(function(i,t,e,r){r===void 0&&(r=e),i[r]=t[e]})),o=Us&&Us.__exportStar||function(i,t){for(var e in i)e!=="default"&&!Object.prototype.hasOwnProperty.call(t,e)&&n(t,i,e)};Object.defineProperty(u,"__esModule",{value:!0}),o(iue(),u)})(Us)),Us}var Vs={},E_={},x_={},Jq;function uue(){if(Jq)return x_;Jq=1,Object.defineProperty(x_,"__esModule",{value:!0}),x_.TermFunctionUnaryPlus=void 0;const u=Te(),n=ge();let o=class extends u.TermFunctionBase{constructor(){super({arity:1,operator:n.SparqlOperator.UPLUS,overloads:(0,n.declare)(n.SparqlOperator.UPLUS).numericConverter(()=>t=>t).collect()})}};return x_.TermFunctionUnaryPlus=o,x_}var Kq;function oue(){if(Kq)return E_;Kq=1,Object.defineProperty(E_,"__esModule",{value:!0}),E_.ActorFunctionFactoryTermUnaryPlus=void 0;const u=Te(),n=ge(),o=uue();let i=class extends u.ActorFunctionFactoryDedicated{constructor(e){super({...e,functionNames:[n.SparqlOperator.UPLUS],termFunction:!0})}async run(e){return new o.TermFunctionUnaryPlus}};return E_.ActorFunctionFactoryTermUnaryPlus=i,E_}var kq;function sue(){return kq||(kq=1,(function(u){var n=Vs&&Vs.__createBinding||(Object.create?(function(i,t,e,r){r===void 0&&(r=e);var a=Object.getOwnPropertyDescriptor(t,e);(!a||("get"in a?!t.__esModule:a.writable||a.configurable))&&(a={enumerable:!0,get:function(){return t[e]}}),Object.defineProperty(i,r,a)}):(function(i,t,e,r){r===void 0&&(r=e),i[r]=t[e]})),o=Vs&&Vs.__exportStar||function(i,t){for(var e in i)e!=="default"&&!Object.prototype.hasOwnProperty.call(t,e)&&n(t,i,e)};Object.defineProperty(u,"__esModule",{value:!0}),o(oue(),u)})(Vs)),Vs}var Qs={},R_={},F_={},Wq;function cue(){if(Wq)return F_;Wq=1,Object.defineProperty(F_,"__esModule",{value:!0}),F_.TermFunctionUuid=void 0;const u=Te(),n=ge(),o=_q();let i=class extends u.TermFunctionBase{constructor(){super({arity:0,operator:n.SparqlOperator.UUID,overloads:(0,n.declare)(n.SparqlOperator.UUID).set([],()=>()=>new n.NamedNode(`urn:uuid:${o.v4()}`)).collect()})}};return F_.TermFunctionUuid=i,F_}var Yq;function due(){if(Yq)return R_;Yq=1,Object.defineProperty(R_,"__esModule",{value:!0}),R_.ActorFunctionFactoryTermUuid=void 0;const u=Te(),n=ge(),o=cue();let i=class extends u.ActorFunctionFactoryDedicated{constructor(e){super({...e,functionNames:[n.SparqlOperator.UUID],termFunction:!0})}async run(e){return new o.TermFunctionUuid}};return R_.ActorFunctionFactoryTermUuid=i,R_}var Zq;function lue(){return Zq||(Zq=1,(function(u){var n=Qs&&Qs.__createBinding||(Object.create?(function(i,t,e,r){r===void 0&&(r=e);var a=Object.getOwnPropertyDescriptor(t,e);(!a||("get"in a?!t.__esModule:a.writable||a.configurable))&&(a={enumerable:!0,get:function(){return t[e]}}),Object.defineProperty(i,r,a)}):(function(i,t,e,r){r===void 0&&(r=e),i[r]=t[e]})),o=Qs&&Qs.__exportStar||function(i,t){for(var e in i)e!=="default"&&!Object.prototype.hasOwnProperty.call(t,e)&&n(t,i,e)};Object.defineProperty(u,"__esModule",{value:!0}),o(due(),u)})(Qs)),Qs}var Hs={},I_={},P_={},eC;function fue(){if(eC)return P_;eC=1,Object.defineProperty(P_,"__esModule",{value:!0}),P_.TermFunctionXsdToBoolean=void 0;const u=Te(),n=ge();let o=class extends u.TermFunctionBase{constructor(){super({arity:1,operator:n.TypeURL.XSD_BOOLEAN,overloads:(0,n.declare)(n.TypeURL.XSD_BOOLEAN).onNumeric1(()=>t=>(0,n.bool)(t.coerceEBV()),!0).onUnary(n.TypeURL.XSD_BOOLEAN,()=>t=>(0,n.bool)(t.coerceEBV()),!0).onUnary(n.TypeURL.XSD_STRING,()=>t=>{switch(t.str()){case"true":return(0,n.bool)(!0);case"false":return(0,n.bool)(!1);case"1":return(0,n.bool)(!0);case"0":return(0,n.bool)(!1);default:throw new n.CastError(t,n.TypeURL.XSD_BOOLEAN)}},!1).collect()})}};return P_.TermFunctionXsdToBoolean=o,P_}var tC;function hue(){if(tC)return I_;tC=1,Object.defineProperty(I_,"__esModule",{value:!0}),I_.ActorFunctionFactoryTermXsdToBoolean=void 0;const u=Te(),n=ge(),o=fue();let i=class extends u.ActorFunctionFactoryDedicated{constructor(e){super({...e,functionNames:[n.TypeURL.XSD_BOOLEAN],termFunction:!0})}async run(e){return new o.TermFunctionXsdToBoolean}};return I_.ActorFunctionFactoryTermXsdToBoolean=i,I_}var rC;function pue(){return rC||(rC=1,(function(u){var n=Hs&&Hs.__createBinding||(Object.create?(function(i,t,e,r){r===void 0&&(r=e);var a=Object.getOwnPropertyDescriptor(t,e);(!a||("get"in a?!t.__esModule:a.writable||a.configurable))&&(a={enumerable:!0,get:function(){return t[e]}}),Object.defineProperty(i,r,a)}):(function(i,t,e,r){r===void 0&&(r=e),i[r]=t[e]})),o=Hs&&Hs.__exportStar||function(i,t){for(var e in i)e!=="default"&&!Object.prototype.hasOwnProperty.call(t,e)&&n(t,i,e)};Object.defineProperty(u,"__esModule",{value:!0}),o(hue(),u)})(Hs)),Hs}var Gs={},D_={},N_={},nC;function yue(){if(nC)return N_;nC=1,Object.defineProperty(N_,"__esModule",{value:!0}),N_.TermFunctionXsdToDate=void 0;const u=Te(),n=ge();let o=class extends u.TermFunctionBase{constructor(){super({arity:1,operator:n.TypeURL.XSD_DATE,overloads:(0,n.declare)(n.TypeURL.XSD_DATE).onUnary(n.TypeURL.XSD_DATE,()=>t=>new n.DateLiteral(t.typedValue,t.strValue)).onUnary(n.TypeURL.XSD_DATE_TIME,()=>t=>new n.DateLiteral(t.typedValue)).onStringly1(()=>t=>new n.DateLiteral((0,n.parseDate)(t.str()))).collect()})}};return N_.TermFunctionXsdToDate=o,N_}var iC;function bue(){if(iC)return D_;iC=1,Object.defineProperty(D_,"__esModule",{value:!0}),D_.ActorFunctionFactoryTermXsdToDate=void 0;const u=Te(),n=ge(),o=yue();let i=class extends u.ActorFunctionFactoryDedicated{constructor(e){super({...e,functionNames:[n.TypeURL.XSD_DATE],termFunction:!0})}async run(e){return new o.TermFunctionXsdToDate}};return D_.ActorFunctionFactoryTermXsdToDate=i,D_}var aC;function _ue(){return aC||(aC=1,(function(u){var n=Gs&&Gs.__createBinding||(Object.create?(function(i,t,e,r){r===void 0&&(r=e);var a=Object.getOwnPropertyDescriptor(t,e);(!a||("get"in a?!t.__esModule:a.writable||a.configurable))&&(a={enumerable:!0,get:function(){return t[e]}}),Object.defineProperty(i,r,a)}):(function(i,t,e,r){r===void 0&&(r=e),i[r]=t[e]})),o=Gs&&Gs.__exportStar||function(i,t){for(var e in i)e!=="default"&&!Object.prototype.hasOwnProperty.call(t,e)&&n(t,i,e)};Object.defineProperty(u,"__esModule",{value:!0}),o(bue(),u)})(Gs)),Gs}var zs={},j_={},L_={},uC;function gue(){if(uC)return L_;uC=1,Object.defineProperty(L_,"__esModule",{value:!0}),L_.TermFunctionXsdToDatetime=void 0;const u=Te(),n=ge();let o=class extends u.TermFunctionBase{constructor(){super({arity:1,operator:n.TypeURL.XSD_DATE_TIME,overloads:(0,n.declare)(n.TypeURL.XSD_DATE_TIME).onUnary(n.TypeURL.XSD_DATE_TIME,()=>t=>t).onUnary(n.TypeURL.XSD_STRING,()=>t=>(0,n.dateTime)((0,n.parseDateTime)(t.str()),t.str()),!1).onUnary(n.TypeURL.XSD_DATE,()=>t=>new n.DateTimeLiteral({...t.typedValue,hours:0,minutes:0,seconds:0})).collect()})}};return L_.TermFunctionXsdToDatetime=o,L_}var oC;function mue(){if(oC)return j_;oC=1,Object.defineProperty(j_,"__esModule",{value:!0}),j_.ActorFunctionFactoryTermXsdToDatetime=void 0;const u=Te(),n=ge(),o=gue();let i=class extends u.ActorFunctionFactoryDedicated{constructor(e){super({...e,functionNames:[n.TypeURL.XSD_DATE_TIME],termFunction:!0})}async run(e){return new o.TermFunctionXsdToDatetime}};return j_.ActorFunctionFactoryTermXsdToDatetime=i,j_}var sC;function vue(){return sC||(sC=1,(function(u){var n=zs&&zs.__createBinding||(Object.create?(function(i,t,e,r){r===void 0&&(r=e);var a=Object.getOwnPropertyDescriptor(t,e);(!a||("get"in a?!t.__esModule:a.writable||a.configurable))&&(a={enumerable:!0,get:function(){return t[e]}}),Object.defineProperty(i,r,a)}):(function(i,t,e,r){r===void 0&&(r=e),i[r]=t[e]})),o=zs&&zs.__exportStar||function(i,t){for(var e in i)e!=="default"&&!Object.prototype.hasOwnProperty.call(t,e)&&n(t,i,e)};Object.defineProperty(u,"__esModule",{value:!0}),o(mue(),u)})(zs)),zs}var Xs={},M_={},q_={},cC;function Tue(){if(cC)return q_;cC=1,Object.defineProperty(q_,"__esModule",{value:!0}),q_.TermFunctionXsdToDayTimeDuration=void 0;const u=Te(),n=ge();let o=class extends u.TermFunctionBase{constructor(){super({arity:1,operator:n.TypeURL.XSD_DAY_TIME_DURATION,overloads:(0,n.declare)(n.TypeURL.XSD_DAY_TIME_DURATION).onUnary(n.TypeURL.XSD_DURATION,()=>t=>new n.DayTimeDurationLiteral((0,n.trimToDayTimeDuration)(t.typedValue))).onStringly1(()=>t=>new n.DayTimeDurationLiteral((0,n.parseDayTimeDuration)(t.str()))).collect()})}};return q_.TermFunctionXsdToDayTimeDuration=o,q_}var dC;function wue(){if(dC)return M_;dC=1,Object.defineProperty(M_,"__esModule",{value:!0}),M_.ActorFunctionFactoryTermXsdToDayTimeDuration=void 0;const u=Te(),n=ge(),o=Tue();let i=class extends u.ActorFunctionFactoryDedicated{constructor(e){super({...e,functionNames:[n.TypeURL.XSD_DAY_TIME_DURATION],termFunction:!0})}async run(e){return new o.TermFunctionXsdToDayTimeDuration}};return M_.ActorFunctionFactoryTermXsdToDayTimeDuration=i,M_}var lC;function Sue(){return lC||(lC=1,(function(u){var n=Xs&&Xs.__createBinding||(Object.create?(function(i,t,e,r){r===void 0&&(r=e);var a=Object.getOwnPropertyDescriptor(t,e);(!a||("get"in a?!t.__esModule:a.writable||a.configurable))&&(a={enumerable:!0,get:function(){return t[e]}}),Object.defineProperty(i,r,a)}):(function(i,t,e,r){r===void 0&&(r=e),i[r]=t[e]})),o=Xs&&Xs.__exportStar||function(i,t){for(var e in i)e!=="default"&&!Object.prototype.hasOwnProperty.call(t,e)&&n(t,i,e)};Object.defineProperty(u,"__esModule",{value:!0}),o(wue(),u)})(Xs)),Xs}var Js={},C_={},B_={},fC;function Oue(){if(fC)return B_;fC=1,Object.defineProperty(B_,"__esModule",{value:!0}),B_.TermFunctionXsdToDecimal=void 0;const u=Te(),n=ge();let o=class extends u.TermFunctionBase{constructor(){super({arity:1,operator:n.TypeURL.XSD_DECIMAL,overloads:(0,n.declare)(n.TypeURL.XSD_DECIMAL).onNumeric1(()=>t=>{const e=(0,n.parseXSDDecimal)(t.str());if(e===void 0)throw new n.CastError(t,n.TypeURL.XSD_DECIMAL);return(0,n.decimal)(e)}).onString1(()=>t=>{const e=t.str(),r=/^([+-])?(\d+(\.\d+)?)$/u.test(e)?(0,n.parseXSDDecimal)(e):void 0;if(r===void 0)throw new n.CastError(t,n.TypeURL.XSD_DECIMAL);return(0,n.decimal)(r)},!1).onBoolean1Typed(()=>t=>(0,n.decimal)(t?1:0)).collect()})}};return B_.TermFunctionXsdToDecimal=o,B_}var hC;function Aue(){if(hC)return C_;hC=1,Object.defineProperty(C_,"__esModule",{value:!0}),C_.ActorFunctionFactoryTermXsdToDecimal=void 0;const u=Te(),n=ge(),o=Oue();let i=class extends u.ActorFunctionFactoryDedicated{constructor(e){super({...e,functionNames:[n.TypeURL.XSD_DECIMAL],termFunction:!0})}async run(e){return new o.TermFunctionXsdToDecimal}};return C_.ActorFunctionFactoryTermXsdToDecimal=i,C_}var pC;function Eue(){return pC||(pC=1,(function(u){var n=Js&&Js.__createBinding||(Object.create?(function(i,t,e,r){r===void 0&&(r=e);var a=Object.getOwnPropertyDescriptor(t,e);(!a||("get"in a?!t.__esModule:a.writable||a.configurable))&&(a={enumerable:!0,get:function(){return t[e]}}),Object.defineProperty(i,r,a)}):(function(i,t,e,r){r===void 0&&(r=e),i[r]=t[e]})),o=Js&&Js.__exportStar||function(i,t){for(var e in i)e!=="default"&&!Object.prototype.hasOwnProperty.call(t,e)&&n(t,i,e)};Object.defineProperty(u,"__esModule",{value:!0}),o(Aue(),u)})(Js)),Js}var Ks={},$_={},U_={},yC;function xue(){if(yC)return U_;yC=1,Object.defineProperty(U_,"__esModule",{value:!0}),U_.TermFunctionXsdToDouble=void 0;const u=Te(),n=ge();let o=class extends u.TermFunctionBase{constructor(){super({arity:1,operator:n.TypeURL.XSD_DOUBLE,overloads:(0,n.declare)(n.TypeURL.XSD_DOUBLE).onNumeric1(()=>t=>(0,n.double)(t.typedValue)).onBoolean1Typed(()=>t=>(0,n.double)(t?1:0)).onUnary(n.TypeURL.XSD_STRING,()=>t=>{const e=(0,n.parseXSDFloat)(t.str());if(e===void 0)throw new n.CastError(t,n.TypeURL.XSD_DOUBLE);return(0,n.double)(e)},!1).collect()})}};return U_.TermFunctionXsdToDouble=o,U_}var bC;function Rue(){if(bC)return $_;bC=1,Object.defineProperty($_,"__esModule",{value:!0}),$_.ActorFunctionFactoryTermXsdToDouble=void 0;const u=Te(),n=ge(),o=xue();let i=class extends u.ActorFunctionFactoryDedicated{constructor(e){super({...e,functionNames:[n.TypeURL.XSD_DOUBLE],termFunction:!0})}async run(e){return new o.TermFunctionXsdToDouble}};return $_.ActorFunctionFactoryTermXsdToDouble=i,$_}var _C;function Fue(){return _C||(_C=1,(function(u){var n=Ks&&Ks.__createBinding||(Object.create?(function(i,t,e,r){r===void 0&&(r=e);var a=Object.getOwnPropertyDescriptor(t,e);(!a||("get"in a?!t.__esModule:a.writable||a.configurable))&&(a={enumerable:!0,get:function(){return t[e]}}),Object.defineProperty(i,r,a)}):(function(i,t,e,r){r===void 0&&(r=e),i[r]=t[e]})),o=Ks&&Ks.__exportStar||function(i,t){for(var e in i)e!=="default"&&!Object.prototype.hasOwnProperty.call(t,e)&&n(t,i,e)};Object.defineProperty(u,"__esModule",{value:!0}),o(Rue(),u)})(Ks)),Ks}var ks={},V_={},Q_={},gC;function Iue(){if(gC)return Q_;gC=1,Object.defineProperty(Q_,"__esModule",{value:!0}),Q_.TermFunctionXsdToDuration=void 0;const u=Te(),n=ge();let o=class extends u.TermFunctionBase{constructor(){super({arity:1,operator:n.TypeURL.XSD_DAY_TIME_DURATION,overloads:(0,n.declare)(n.TypeURL.XSD_DURATION).onUnary(n.TypeURL.XSD_DURATION,()=>t=>new n.DurationLiteral(t.typedValue,t.strValue)).onStringly1(()=>t=>new n.DurationLiteral((0,n.parseDuration)(t.str()))).collect()})}};return Q_.TermFunctionXsdToDuration=o,Q_}var mC;function Pue(){if(mC)return V_;mC=1,Object.defineProperty(V_,"__esModule",{value:!0}),V_.ActorFunctionFactoryTermXsdToDuration=void 0;const u=Te(),n=ge(),o=Iue();let i=class extends u.ActorFunctionFactoryDedicated{constructor(e){super({...e,functionNames:[n.TypeURL.XSD_DURATION],termFunction:!0})}async run(e){return new o.TermFunctionXsdToDuration}};return V_.ActorFunctionFactoryTermXsdToDuration=i,V_}var vC;function Due(){return vC||(vC=1,(function(u){var n=ks&&ks.__createBinding||(Object.create?(function(i,t,e,r){r===void 0&&(r=e);var a=Object.getOwnPropertyDescriptor(t,e);(!a||("get"in a?!t.__esModule:a.writable||a.configurable))&&(a={enumerable:!0,get:function(){return t[e]}}),Object.defineProperty(i,r,a)}):(function(i,t,e,r){r===void 0&&(r=e),i[r]=t[e]})),o=ks&&ks.__exportStar||function(i,t){for(var e in i)e!=="default"&&!Object.prototype.hasOwnProperty.call(t,e)&&n(t,i,e)};Object.defineProperty(u,"__esModule",{value:!0}),o(Pue(),u)})(ks)),ks}var Ws={},H_={},G_={},TC;function Nue(){if(TC)return G_;TC=1,Object.defineProperty(G_,"__esModule",{value:!0}),G_.TermFunctionXsdToFloat=void 0;const u=Te(),n=ge();let o=class extends u.TermFunctionBase{constructor(){super({arity:1,operator:n.TypeURL.XSD_FLOAT,overloads:(0,n.declare)(n.TypeURL.XSD_FLOAT).onNumeric1(()=>t=>(0,n.float)(t.typedValue)).onBoolean1Typed(()=>t=>(0,n.float)(t?1:0)).onUnary(n.TypeURL.XSD_STRING,()=>t=>{const e=(0,n.parseXSDFloat)(t.str());if(e===void 0)throw new n.CastError(t,n.TypeURL.XSD_FLOAT);return(0,n.float)(e)},!1).collect()})}};return G_.TermFunctionXsdToFloat=o,G_}var wC;function jue(){if(wC)return H_;wC=1,Object.defineProperty(H_,"__esModule",{value:!0}),H_.ActorFunctionFactoryTermXsdToFloat=void 0;const u=Te(),n=ge(),o=Nue();let i=class extends u.ActorFunctionFactoryDedicated{constructor(e){super({...e,functionNames:[n.TypeURL.XSD_FLOAT],termFunction:!0})}async run(e){return new o.TermFunctionXsdToFloat}};return H_.ActorFunctionFactoryTermXsdToFloat=i,H_}var SC;function Lue(){return SC||(SC=1,(function(u){var n=Ws&&Ws.__createBinding||(Object.create?(function(i,t,e,r){r===void 0&&(r=e);var a=Object.getOwnPropertyDescriptor(t,e);(!a||("get"in a?!t.__esModule:a.writable||a.configurable))&&(a={enumerable:!0,get:function(){return t[e]}}),Object.defineProperty(i,r,a)}):(function(i,t,e,r){r===void 0&&(r=e),i[r]=t[e]})),o=Ws&&Ws.__exportStar||function(i,t){for(var e in i)e!=="default"&&!Object.prototype.hasOwnProperty.call(t,e)&&n(t,i,e)};Object.defineProperty(u,"__esModule",{value:!0}),o(jue(),u)})(Ws)),Ws}var Ys={},z_={},X_={},OC;function Mue(){if(OC)return X_;OC=1,Object.defineProperty(X_,"__esModule",{value:!0}),X_.TermFunctionXsdToInteger=void 0;const u=Te(),n=ge();let o=class extends u.TermFunctionBase{constructor(){super({arity:1,operator:n.TypeURL.XSD_INTEGER,overloads:(0,n.declare)(n.TypeURL.XSD_INTEGER).onBoolean1Typed(()=>t=>(0,n.integer)(t?1:0)).onNumeric1(()=>t=>{if(!Number.isFinite(t.typedValue))throw new n.CastError(t,n.TypeURL.XSD_INTEGER);return(0,n.integer)(Math.trunc(t.typedValue))}).onString1(()=>t=>{const e=t.str(),r=/^\d+$/u.test(e)?Number.parseInt(e,10):void 0;if(r===void 0)throw new n.CastError(t,n.TypeURL.XSD_INTEGER);return(0,n.integer)(r)}).collect()})}};return X_.TermFunctionXsdToInteger=o,X_}var AC;function que(){if(AC)return z_;AC=1,Object.defineProperty(z_,"__esModule",{value:!0}),z_.ActorFunctionFactoryTermXsdToInteger=void 0;const u=Te(),n=ge(),o=Mue();let i=class extends u.ActorFunctionFactoryDedicated{constructor(e){super({...e,functionNames:[n.TypeURL.XSD_INTEGER],termFunction:!0})}async run(e){return new o.TermFunctionXsdToInteger}};return z_.ActorFunctionFactoryTermXsdToInteger=i,z_}var EC;function Cue(){return EC||(EC=1,(function(u){var n=Ys&&Ys.__createBinding||(Object.create?(function(i,t,e,r){r===void 0&&(r=e);var a=Object.getOwnPropertyDescriptor(t,e);(!a||("get"in a?!t.__esModule:a.writable||a.configurable))&&(a={enumerable:!0,get:function(){return t[e]}}),Object.defineProperty(i,r,a)}):(function(i,t,e,r){r===void 0&&(r=e),i[r]=t[e]})),o=Ys&&Ys.__exportStar||function(i,t){for(var e in i)e!=="default"&&!Object.prototype.hasOwnProperty.call(t,e)&&n(t,i,e)};Object.defineProperty(u,"__esModule",{value:!0}),o(que(),u)})(Ys)),Ys}var Zs={},J_={},K_={},xC;function Bue(){if(xC)return K_;xC=1,Object.defineProperty(K_,"__esModule",{value:!0}),K_.TermFunctionXsdToString=void 0;const u=Te(),n=ge();let o=class extends u.TermFunctionBase{constructor(){super({arity:1,operator:n.TypeURL.XSD_STRING,overloads:(0,n.declare)(n.TypeURL.XSD_STRING).onNumeric1(()=>t=>(0,n.string)((0,n.float)(t.typedValue).str())).onBoolean1Typed(()=>t=>(0,n.string)((0,n.bool)(t).str())).onTerm1(()=>t=>(0,n.string)(t.str())).collect()})}};return K_.TermFunctionXsdToString=o,K_}var RC;function $ue(){if(RC)return J_;RC=1,Object.defineProperty(J_,"__esModule",{value:!0}),J_.ActorFunctionFactoryTermXsdToString=void 0;const u=Te(),n=ge(),o=Bue();let i=class extends u.ActorFunctionFactoryDedicated{constructor(e){super({...e,functionNames:[n.TypeURL.XSD_STRING],termFunction:!0})}async run(e){return new o.TermFunctionXsdToString}};return J_.ActorFunctionFactoryTermXsdToString=i,J_}var FC;function Uue(){return FC||(FC=1,(function(u){var n=Zs&&Zs.__createBinding||(Object.create?(function(i,t,e,r){r===void 0&&(r=e);var a=Object.getOwnPropertyDescriptor(t,e);(!a||("get"in a?!t.__esModule:a.writable||a.configurable))&&(a={enumerable:!0,get:function(){return t[e]}}),Object.defineProperty(i,r,a)}):(function(i,t,e,r){r===void 0&&(r=e),i[r]=t[e]})),o=Zs&&Zs.__exportStar||function(i,t){for(var e in i)e!=="default"&&!Object.prototype.hasOwnProperty.call(t,e)&&n(t,i,e)};Object.defineProperty(u,"__esModule",{value:!0}),o($ue(),u)})(Zs)),Zs}var ec={},k_={},W_={},IC;function Vue(){if(IC)return W_;IC=1,Object.defineProperty(W_,"__esModule",{value:!0}),W_.TermFunctionXsdToTime=void 0;const u=Te(),n=ge();let o=class extends u.TermFunctionBase{constructor(){super({arity:1,operator:n.TypeURL.XSD_TIME,overloads:(0,n.declare)(n.TypeURL.XSD_TIME).onUnary(n.TypeURL.XSD_TIME,()=>t=>new n.TimeLiteral(t.typedValue,t.strValue)).onUnary(n.TypeURL.XSD_DATE_TIME,()=>t=>new n.TimeLiteral(t.typedValue)).onStringly1(()=>t=>new n.TimeLiteral((0,n.parseTime)(t.str()))).collect()})}};return W_.TermFunctionXsdToTime=o,W_}var PC;function Que(){if(PC)return k_;PC=1,Object.defineProperty(k_,"__esModule",{value:!0}),k_.ActorFunctionFactoryTermXsdToTime=void 0;const u=Te(),n=ge(),o=Vue();let i=class extends u.ActorFunctionFactoryDedicated{constructor(e){super({...e,functionNames:[n.TypeURL.XSD_TIME],termFunction:!0})}async run(e){return new o.TermFunctionXsdToTime}};return k_.ActorFunctionFactoryTermXsdToTime=i,k_}var DC;function Hue(){return DC||(DC=1,(function(u){var n=ec&&ec.__createBinding||(Object.create?(function(i,t,e,r){r===void 0&&(r=e);var a=Object.getOwnPropertyDescriptor(t,e);(!a||("get"in a?!t.__esModule:a.writable||a.configurable))&&(a={enumerable:!0,get:function(){return t[e]}}),Object.defineProperty(i,r,a)}):(function(i,t,e,r){r===void 0&&(r=e),i[r]=t[e]})),o=ec&&ec.__exportStar||function(i,t){for(var e in i)e!=="default"&&!Object.prototype.hasOwnProperty.call(t,e)&&n(t,i,e)};Object.defineProperty(u,"__esModule",{value:!0}),o(Que(),u)})(ec)),ec}var tc={},Y_={},Z_={},NC;function Gue(){if(NC)return Z_;NC=1,Object.defineProperty(Z_,"__esModule",{value:!0}),Z_.TermFunctionXsdToYearMonthDuration=void 0;const u=Te(),n=ge();let o=class extends u.TermFunctionBase{constructor(){super({arity:1,operator:n.TypeURL.XSD_YEAR_MONTH_DURATION,overloads:(0,n.declare)(n.TypeURL.XSD_YEAR_MONTH_DURATION).onUnary(n.TypeURL.XSD_DURATION,()=>t=>new n.YearMonthDurationLiteral((0,n.trimToYearMonthDuration)(t.typedValue))).onStringly1(()=>t=>new n.YearMonthDurationLiteral((0,n.parseYearMonthDuration)(t.str()))).collect()})}};return Z_.TermFunctionXsdToYearMonthDuration=o,Z_}var jC;function zue(){if(jC)return Y_;jC=1,Object.defineProperty(Y_,"__esModule",{value:!0}),Y_.ActorFunctionFactoryTermXsdToYearMonthDuration=void 0;const u=Te(),n=ge(),o=Gue();let i=class extends u.ActorFunctionFactoryDedicated{constructor(e){super({...e,functionNames:[n.TypeURL.XSD_YEAR_MONTH_DURATION],termFunction:!0})}async run(e){return new o.TermFunctionXsdToYearMonthDuration}};return Y_.ActorFunctionFactoryTermXsdToYearMonthDuration=i,Y_}var LC;function Xue(){return LC||(LC=1,(function(u){var n=tc&&tc.__createBinding||(Object.create?(function(i,t,e,r){r===void 0&&(r=e);var a=Object.getOwnPropertyDescriptor(t,e);(!a||("get"in a?!t.__esModule:a.writable||a.configurable))&&(a={enumerable:!0,get:function(){return t[e]}}),Object.defineProperty(i,r,a)}):(function(i,t,e,r){r===void 0&&(r=e),i[r]=t[e]})),o=tc&&tc.__exportStar||function(i,t){for(var e in i)e!=="default"&&!Object.prototype.hasOwnProperty.call(t,e)&&n(t,i,e)};Object.defineProperty(u,"__esModule",{value:!0}),o(zue(),u)})(tc)),tc}var rc={},eg={},tg={},MC;function Jue(){if(MC)return tg;MC=1,Object.defineProperty(tg,"__esModule",{value:!0}),tg.TermFunctionYear=void 0;const u=Te(),n=ge();let o=class extends u.TermFunctionBase{constructor(){super({arity:1,operator:n.SparqlOperator.YEAR,overloads:(0,n.declare)(n.SparqlOperator.YEAR).onDateTime1(()=>t=>(0,n.integer)(t.typedValue.year)).set([n.TypeURL.XSD_DATE],()=>([t])=>(0,n.integer)(t.typedValue.year)).collect()})}};return tg.TermFunctionYear=o,tg}var qC;function Kue(){if(qC)return eg;qC=1,Object.defineProperty(eg,"__esModule",{value:!0}),eg.ActorFunctionFactoryTermYear=void 0;const u=Te(),n=ge(),o=Jue();let i=class extends u.ActorFunctionFactoryDedicated{constructor(e){super({...e,functionNames:[n.SparqlOperator.YEAR],termFunction:!0})}async run(e){return new o.TermFunctionYear}};return eg.ActorFunctionFactoryTermYear=i,eg}var CC;function kue(){return CC||(CC=1,(function(u){var n=rc&&rc.__createBinding||(Object.create?(function(i,t,e,r){r===void 0&&(r=e);var a=Object.getOwnPropertyDescriptor(t,e);(!a||("get"in a?!t.__esModule:a.writable||a.configurable))&&(a={enumerable:!0,get:function(){return t[e]}}),Object.defineProperty(i,r,a)}):(function(i,t,e,r){r===void 0&&(r=e),i[r]=t[e]})),o=rc&&rc.__exportStar||function(i,t){for(var e in i)e!=="default"&&!Object.prototype.hasOwnProperty.call(t,e)&&n(t,i,e)};Object.defineProperty(u,"__esModule",{value:!0}),o(Kue(),u)})(rc)),rc}var nc={},rg={},ic={},ng={},yE={},ac={},BC;function Wue(){if(BC)return ac;BC=1,Object.defineProperty(ac,"__esModule",{value:!0}),ac.readableFromWeb=ac.ReadableFromWeb=void 0;const u=Pt();let n=class extends u.Readable{constructor(t,e){super(e),this.reader=t.getReader(),this.readerClosed=!1,this.reader.closed.then(()=>{this.readerClosed=!0}).catch(r=>{this.readerClosed=!0,this.destroy(r)})}_read(){this.reader.read().then(t=>this.push(t.done?null:t.value)).catch(t=>this.destroy(t))}destroy(t){return this.readerClosed||this.reader.cancel(t).then().catch(()=>{}),super.destroy(t)}};ac.ReadableFromWeb=n;function o(i,t){return new n(i,t)}return ac.readableFromWeb=o,ac}var $C;function UC(){return $C||($C=1,(function(u){Object.defineProperty(u,"__esModule",{value:!0}),u.readableFromWeb=void 0;var n=Wue();Object.defineProperty(u,"readableFromWeb",{enumerable:!0,get:function(){return n.readableFromWeb}})})(yE)),yE}var bE,VC;function QC(){if(VC)return bE;VC=1;const u=n=>n!==null&&typeof n=="object"&&typeof n.pipe=="function";return u.writable=n=>u(n)&&n.writable!==!1&&typeof n._write=="function"&&typeof n._writableState=="object",u.readable=n=>u(n)&&n.readable!==!1&&typeof n._read=="function"&&typeof n._readableState=="object",u.duplex=n=>u.writable(n)&&u.readable(n),u.transform=n=>u.duplex(n)&&typeof n._transform=="function",bE=u,bE}var _E={exports:{}},HC;function Yue(){return HC||(HC=1,(function(u){u.exports=n,u.exports.WEBSTREAM_SUPPORT=typeof ReadableStream<"u";function n(o){if(!u.exports.WEBSTREAM_SUPPORT)throw new Error("No web ReadableStream support");var i=!1,t={};function e(c){t.data=d,t.end=d,t.end=l,t.close=l,t.error=l;for(var s in t)o.on(s,t[s]);o.pause();function d(f){i||(c.enqueue(f),o.pause())}function l(f){if(!i){i=!0;for(var h in t)o.removeListener(h,t[h]);f?c.error(f):c.close()}}}function r(){i||o.resume()}function a(){i=!0;for(var c in t)o.removeListener(c,t[c]);o.push(null),o.pause(),o.destroy?o.destroy():o.close&&o.close()}return new ReadableStream({start:e,pull:r,cancel:a})}})(_E)),_E.exports}var GC;function zC(){if(GC)return ng;GC=1,Object.defineProperty(ng,"__esModule",{value:!0}),ng.ActorHttp=void 0;const u=pe(),n=UC(),o=QC(),i=Yue();let t=class dJ extends u.Actor{constructor(r){super(r)}static toNodeReadable(r){return o(r)||r===null?r:(0,n.readableFromWeb)(r)}static toWebReadableStream(r){return i(r)}static headersToHash(r){const a={};return r.forEach((c,s)=>{a[s]=c}),a}static getInputUrl(r){return new URL(r instanceof Request?r.url:r)}static createUserAgent(r,a){if(!dJ.isBrowser()){const c=[`Comunica/${a.split(".")[0]}.0`,`${r}/${a}`];return typeof globalThis.navigator=="object"&&typeof globalThis.navigator.userAgent=="string"?c.push(globalThis.navigator.userAgent):typeof globalThis.process=="object"&&typeof globalThis.process.versions=="object"&&typeof globalThis.process.versions.node=="string"&&c.push(`Node.js/${globalThis.process.versions.node.split(".")[0]}`),typeof globalThis.process=="object"&&typeof globalThis.process.platform=="string"&&typeof globalThis.process.arch=="string"&&c.splice(1,0,`(${globalThis.process.platform}; ${globalThis.process.arch})`),c.join(" ")}}static isBrowser(){return typeof globalThis.window=="object"&&typeof globalThis.window.document=="object"||typeof globalThis.importScripts=="function"}};return ng.ActorHttp=t,ng}var ig={},XC;function Zue(){if(XC)return ig;XC=1,Object.defineProperty(ig,"__esModule",{value:!0}),ig.validateAndCloseHttpResponse=void 0;const u=xf(),n=zC();async function o(i,t){var e;if(t.status>=400){let r="empty response";if(t.body){const a=n.ActorHttp.toNodeReadable(t.body);r=await(0,u.stringify)(a)}throw new Error(`Could not update ${i} (HTTP status ${t.status}):
${r}`)}await((e=t.body)==null?void 0:e.cancel())}return ig.validateAndCloseHttpResponse=o,ig}var JC;function Ti(){return JC||(JC=1,(function(u){var n=ic&&ic.__createBinding||(Object.create?(function(i,t,e,r){r===void 0&&(r=e);var a=Object.getOwnPropertyDescriptor(t,e);(!a||("get"in a?!t.__esModule:a.writable||a.configurable))&&(a={enumerable:!0,get:function(){return t[e]}}),Object.defineProperty(i,r,a)}):(function(i,t,e,r){r===void 0&&(r=e),i[r]=t[e]})),o=ic&&ic.__exportStar||function(i,t){for(var e in i)e!=="default"&&!Object.prototype.hasOwnProperty.call(t,e)&&n(t,i,e)};Object.defineProperty(u,"__esModule",{value:!0}),o(zC(),u),o(Zue(),u)})(ic)),ic}var eoe={version:"4.2.0"},ag={},KC;function toe(){if(KC)return ag;KC=1,Object.defineProperty(ag,"__esModule",{value:!0}),ag.FetchInitPreprocessor=void 0;class u{async handle(o){if(o.body&&typeof o.body!="string"&&"getReader"in o.body){const i=o.body.getReader(),t=[];for(;;){const{done:e,value:r}=await i.read();if(e)break;t.push(r)}o.body=t.join("")}return{...o,keepalive:!o.body}}}return ag.FetchInitPreprocessor=u,ag}var kC;function roe(){if(kC)return rg;kC=1,Object.defineProperty(rg,"__esModule",{value:!0}),rg.ActorHttpFetch=void 0;const u=Ti(),n=qe(),o=pe(),i=eoe,t=toe();let e=class Px extends u.ActorHttp{constructor(a){super(a),this.fetchInitPreprocessor=new t.FetchInitPreprocessor(a.agentOptions)}async test(a){return(0,o.passTest)({time:Number.POSITIVE_INFINITY})}async run(a){const c=this.prepareRequestHeaders(a),s={method:"GET",...a.init,headers:c};this.logInfo(a.context,`Requesting ${u.ActorHttp.getInputUrl(a.input).href}`,()=>({headers:u.ActorHttp.headersToHash(c),method:s.method})),a.context.has(n.KeysHttp.fetch)&&(s.headers=u.ActorHttp.headersToHash(c)),a.context.get(n.KeysHttp.includeCredentials)&&(s.credentials="include");const d=a.context.get(n.KeysHttp.httpTimeout),l=a.context.get(n.KeysHttp.httpBodyTimeout),f=a.context.get(n.KeysHttp.fetch)??fetch,h=await this.fetchInitPreprocessor.handle(s);let p,y;if(d){const b=new AbortController;h.signal=b.signal,p=()=>b.abort(new Error(`Fetch timed out for ${u.ActorHttp.getInputUrl(a.input).href} after ${d} ms`)),y=setTimeout(()=>p(),d)}const _=await f(a.input,h);return d&&(!l||!_.body)&&clearTimeout(y),_}prepareRequestHeaders(a){var d;const c=new Headers((d=a.init)==null?void 0:d.headers);u.ActorHttp.isBrowser()?c.delete("user-agent"):c.has("user-agent")||c.set("user-agent",Px.userAgent);const s=a.context.get(n.KeysHttp.auth);return s&&c.set("Authorization",`Basic ${Px.stringToBase64(s)}`),c}static stringToBase64(a){const c=new TextEncoder().encode(a),s=Array.from(c,d=>String.fromCodePoint(d)).join("");return btoa(s)}};return rg.ActorHttpFetch=e,e.userAgent=u.ActorHttp.createUserAgent("ActorHttpFetch",i.version),rg}var WC;function noe(){return WC||(WC=1,(function(u){var n=nc&&nc.__createBinding||(Object.create?(function(i,t,e,r){r===void 0&&(r=e);var a=Object.getOwnPropertyDescriptor(t,e);(!a||("get"in a?!t.__esModule:a.writable||a.configurable))&&(a={enumerable:!0,get:function(){return t[e]}}),Object.defineProperty(i,r,a)}):(function(i,t,e,r){r===void 0&&(r=e),i[r]=t[e]})),o=nc&&nc.__exportStar||function(i,t){for(var e in i)e!=="default"&&!Object.prototype.hasOwnProperty.call(t,e)&&n(t,i,e)};Object.defineProperty(u,"__esModule",{value:!0}),o(roe(),u)})(nc)),nc}var uc={},ug={},YC;function ioe(){if(YC)return ug;YC=1,Object.defineProperty(ug,"__esModule",{value:!0}),ug.ActorQueryOperationSource=void 0;const u=qt(),n=qe(),o=pe(),i=br(),t=_t(),e=st();let r=class extends u.ActorQueryOperation{constructor(c){super(c)}async test(c){return(0,t.getOperationSource)(c.operation)?(0,o.passTest)({httpRequests:1}):(0,o.failTest)(`Actor ${this.name} requires an operation with source annotation.`)}async run(c){const s=c.context.get(n.KeysInitQuery.physicalQueryPlanLogger);s&&(s.logOperation(c.operation.type,void 0,c.operation,c.context.get(n.KeysInitQuery.physicalQueryPlanNode),this.name,{}),c.context=c.context.set(n.KeysInitQuery.physicalQueryPlanNode,c.operation));const d=(0,t.getOperationSource)(c.operation),l=d.context?c.context.merge(d.context):c.context;let f=!1;if(e.Util.recurseOperation(c.operation,{construct(){return f=!0,!1}}),f){const y=d.source.queryQuads(c.operation,l),_=(0,i.getMetadataQuads)(y);return{type:"quads",quadStream:y,metadata:_}}switch(c.operation.type){case e.Algebra.types.ASK:return{type:"boolean",execute:()=>d.source.queryBoolean(c.operation,l)};case e.Algebra.types.COMPOSITE_UPDATE:case e.Algebra.types.DELETE_INSERT:case e.Algebra.types.LOAD:case e.Algebra.types.CLEAR:case e.Algebra.types.CREATE:case e.Algebra.types.DROP:case e.Algebra.types.ADD:case e.Algebra.types.MOVE:case e.Algebra.types.COPY:return{type:"void",execute:()=>d.source.queryVoid(c.operation,l)}}const h=d.source.queryBindings(c.operation,l),p=(0,i.getMetadataBindings)(h);return{type:"bindings",bindingsStream:h,metadata:p}}};return ug.ActorQueryOperationSource=r,ug}var ZC;function aoe(){return ZC||(ZC=1,(function(u){var n=uc&&uc.__createBinding||(Object.create?(function(i,t,e,r){r===void 0&&(r=e);var a=Object.getOwnPropertyDescriptor(t,e);(!a||("get"in a?!t.__esModule:a.writable||a.configurable))&&(a={enumerable:!0,get:function(){return t[e]}}),Object.defineProperty(i,r,a)}):(function(i,t,e,r){r===void 0&&(r=e),i[r]=t[e]})),o=uc&&uc.__exportStar||function(i,t){for(var e in i)e!=="default"&&!Object.prototype.hasOwnProperty.call(t,e)&&n(t,i,e)};Object.defineProperty(u,"__esModule",{value:!0}),o(ioe(),u)})(uc)),uc}var oc={},og={},eB;function uoe(){if(eB)return og;eB=1,Object.defineProperty(og,"__esModule",{value:!0}),og.MediatorJoinCoefficientsFixed=void 0;const u=qe(),n=pe();let o=class extends n.Mediator{constructor(t){super(t)}async mediateWith(t,e){var y;const r=[],a=e.map(({reply:_})=>_),c=(await Promise.all(a)).map(_=>{if(_.isFailed()){r.push(_.getFailMessage());return}return{value:_.get(),sideData:_.getSideData()}});let s=c.map(_=>{if(_)return _.value.iterations*this.cpuWeight+_.value.persistedItems*this.memoryWeight+_.value.blockingItems*this.timeWeight+_.value.requestTime*this.ioWeight});const d=Math.max(...s.filter(_=>_!==void 0)),l=t.context.get(u.KeysQueryOperation.limitIndicator);l&&(s=s.map((_,b)=>{var m,g;return _!==void 0&&((m=c[b])==null?void 0:m.value).blockingItems>0&&((g=c[b])==null?void 0:g.value).iterations>l?_+d:_}));let f=-1,h=Number.POSITIVE_INFINITY;for(const[_,b]of s.entries())b!==void 0&&(f===-1||b<h)&&(f=_,h=b);if(f<0)return(0,n.failTest)(this.constructFailureMessage(t,r));const p=e[f].actor;return p.includeInLogs&&((y=n.Actor.getContextLogger(t.context))==null||y.debug(`Determined physical join operator '${p.logicalType}-${p.physicalName}'`,{entries:t.entries.length,variables:await Promise.all(t.entries.map(async _=>(await _.output.metadata()).variables.map(b=>b.variable.value))),costs:Object.fromEntries(s.map((_,b)=>[`${e[b].actor.logicalType}-${e[b].actor.physicalName}`,_]).filter(_=>_[1]!==void 0)),coefficients:Object.fromEntries(c.map((_,b)=>[`${e[b].actor.logicalType}-${e[b].actor.physicalName}`,_==null?void 0:_.value]).filter(_=>_[1]!==void 0))})),(0,n.passTestWithSideData)(p,c[f].sideData)}};return og.MediatorJoinCoefficientsFixed=o,og}var tB;function ooe(){return tB||(tB=1,(function(u){var n=oc&&oc.__createBinding||(Object.create?(function(i,t,e,r){r===void 0&&(r=e);var a=Object.getOwnPropertyDescriptor(t,e);(!a||("get"in a?!t.__esModule:a.writable||a.configurable))&&(a={enumerable:!0,get:function(){return t[e]}}),Object.defineProperty(i,r,a)}):(function(i,t,e,r){r===void 0&&(r=e),i[r]=t[e]})),o=oc&&oc.__exportStar||function(i,t){for(var e in i)e!=="default"&&!Object.prototype.hasOwnProperty.call(t,e)&&n(t,i,e)};Object.defineProperty(u,"__esModule",{value:!0}),o(uoe(),u)})(oc)),oc}var sc={},sg={},rB;function nB(){if(rB)return sg;rB=1,Object.defineProperty(sg,"__esModule",{value:!0}),sg.ActorHttpInvalidate=void 0;const u=pe();let n=class extends u.Actor{constructor(i){super(i)}};return sg.ActorHttpInvalidate=n,sg}var cg={},iB;function soe(){if(iB)return cg;iB=1,Object.defineProperty(cg,"__esModule",{value:!0}),cg.ActorHttpInvalidateListenable=void 0;const u=pe(),n=nB();let o=class extends n.ActorHttpInvalidate{constructor(t){super(t),this.invalidateListeners=[],this.invalidateListeners=[]}addInvalidateListener(t){this.invalidateListeners.push(t)}async test(t){return(0,u.passTestVoid)()}async run(t){for(const e of this.invalidateListeners)e(t);return{}}};return cg.ActorHttpInvalidateListenable=o,cg}var aB;function Df(){return aB||(aB=1,(function(u){var n=sc&&sc.__createBinding||(Object.create?(function(i,t,e,r){r===void 0&&(r=e);var a=Object.getOwnPropertyDescriptor(t,e);(!a||("get"in a?!t.__esModule:a.writable||a.configurable))&&(a={enumerable:!0,get:function(){return t[e]}}),Object.defineProperty(i,r,a)}):(function(i,t,e,r){r===void 0&&(r=e),i[r]=t[e]})),o=sc&&sc.__exportStar||function(i,t){for(var e in i)e!=="default"&&!Object.prototype.hasOwnProperty.call(t,e)&&n(t,i,e)};Object.defineProperty(u,"__esModule",{value:!0}),o(nB(),u),o(soe(),u)})(sc)),sc}var cc={},dg={},uB;function coe(){if(uB)return dg;uB=1,Object.defineProperty(dg,"__esModule",{value:!0}),dg.MediatorAll=void 0;const u=pe();let n=class extends u.Mediator{constructor(i){super(i)}async mediate(i){const t=[];let e;try{e=this.publish(i)}catch{e=[]}for(const a of e){const c=await a.reply;c.isPassed()&&t.push({actor:a.actor,sideData:c.getSideData()})}return(await Promise.all(t.map(a=>a.actor.runObservable(i,a.sideData))))[0]}async mediateWith(){throw new Error("Unsupported operation: MediatorAll#mediateWith")}};return dg.MediatorAll=n,dg}var oB;function doe(){return oB||(oB=1,(function(u){var n=cc&&cc.__createBinding||(Object.create?(function(i,t,e,r){r===void 0&&(r=e);var a=Object.getOwnPropertyDescriptor(t,e);(!a||("get"in a?!t.__esModule:a.writable||a.configurable))&&(a={enumerable:!0,get:function(){return t[e]}}),Object.defineProperty(i,r,a)}):(function(i,t,e,r){r===void 0&&(r=e),i[r]=t[e]})),o=cc&&cc.__exportStar||function(i,t){for(var e in i)e!=="default"&&!Object.prototype.hasOwnProperty.call(t,e)&&n(t,i,e)};Object.defineProperty(u,"__esModule",{value:!0}),o(coe(),u)})(cc)),cc}var dc={},lg={},sB;function loe(){if(sB)return lg;sB=1,Object.defineProperty(lg,"__esModule",{value:!0}),lg.ActorRdfJoinEntriesSortSelectivity=void 0;const u=jN(),n=pe();let o=class extends u.ActorRdfJoinEntriesSort{constructor(t){super(t)}async test(t){return(0,n.passTest)({accuracy:.501})}async run(t){const e=[...t.entries],r=[];for(;e.length>0;){let a=Number.MAX_VALUE,c=-1;for(const[s,d]of e.entries()){const{selectivity:l}=await this.mediatorJoinSelectivity.mediate({entries:[d,...r],context:t.context});l<a&&(a=l,c=s)}r.push(e[c]),e.splice(c,1)}return{entries:r}}};return lg.ActorRdfJoinEntriesSortSelectivity=o,lg}var cB;function foe(){return cB||(cB=1,(function(u){var n=dc&&dc.__createBinding||(Object.create?(function(i,t,e,r){r===void 0&&(r=e);var a=Object.getOwnPropertyDescriptor(t,e);(!a||("get"in a?!t.__esModule:a.writable||a.configurable))&&(a={enumerable:!0,get:function(){return t[e]}}),Object.defineProperty(i,r,a)}):(function(i,t,e,r){r===void 0&&(r=e),i[r]=t[e]})),o=dc&&dc.__exportStar||function(i,t){for(var e in i)e!=="default"&&!Object.prototype.hasOwnProperty.call(t,e)&&n(t,i,e)};Object.defineProperty(u,"__esModule",{value:!0}),o(loe(),u)})(dc)),dc}var lc={},fg={},fc={},hg={},hc={},pg={},dB;function hoe(){if(dB)return pg;dB=1,Object.defineProperty(pg,"__esModule",{value:!0}),pg.ChunkedIterator=void 0;const u=pt();let n=class extends u.TransformIterator{constructor(i,t,e){super(i,e),this.chunk=[],this.blockSize=t}consumeChunkAsIterator(){const i=new u.ArrayIterator(this.chunk,{autoStart:!1});return this.chunk=[],i}_transform(i,t,e){this.chunk.push(i),this.chunk.length>=this.blockSize&&e(this.consumeChunkAsIterator()),t()}_flush(i){this.chunk.length>0&&this._push(this.consumeChunkAsIterator()),super._flush(i)}};return pg.ChunkedIterator=n,pg}var yg={},lB;function poe(){if(lB)return yg;lB=1,Object.defineProperty(yg,"__esModule",{value:!0}),yg.ClosableIterator=void 0;const u=pt();let n=class extends u.AsyncIterator{constructor(r,a){super(),this.onClose=a.onClose,this._source=r,this._source[u.DESTINATION]=this,this._source.on("end",t),this._source.on("error",i),this._source.on("readable",o),this.readable=this._source.readable}read(){const r=this._source.read();return r||(this.readable=!1,this._source.done&&this.close()),r}_end(r){this.onClose(),this._source.removeListener("end",t),this._source.removeListener("error",i),this._source.removeListener("readable",o),delete this._source[u.DESTINATION],this._source.destroy(),super._end(r)}};yg.ClosableIterator=n;function o(){this[u.DESTINATION].readable=!0}function i(e){this[u.DESTINATION].emit("error",e)}function t(){this[u.DESTINATION].close()}return yg}var bg={},fB;function yoe(){if(fB)return bg;fB=1,Object.defineProperty(bg,"__esModule",{value:!0}),bg.ClosableTransformIterator=void 0;const u=pt();let n=class extends u.TransformIterator{constructor(i,t){super(i,t),this.onClose=t.onClose}_end(i){this.onClose(),super._end(i)}};return bg.ClosableTransformIterator=n,bg}var _g={},hB;function boe(){if(hB)return _g;hB=1,Object.defineProperty(_g,"__esModule",{value:!0}),_g.instrumentIterator=void 0;function u(o){const i={count:0,timeSelf:0,timeLife:0};return n(o,i,!0),new Promise(t=>{o.on("end",()=>{t(i)})})}_g.instrumentIterator=u;function n(o,i,t){if(!("_profileInstrumented"in o)){if(o._profileInstrumented=!0,"_read"in o){const e=o._read;o._read=(r,a)=>{const c=performance.now();e.call(o,r,()=>{i.timeSelf+=performance.now()-c,a()})}}if("read"in o){const e=o.read;o.read=()=>{const r=performance.now(),a=e.call(o);return t&&a&&i.count++,i.timeSelf+=performance.now()-r,a}}if(t){const e=performance.now();o.on("end",()=>{i.timeLife=performance.now()-e})}"_source"in o&&n(o._source,i,!1)}}return _g}var pB;function Wi(){return pB||(pB=1,(function(u){var n=hc&&hc.__createBinding||(Object.create?(function(i,t,e,r){r===void 0&&(r=e);var a=Object.getOwnPropertyDescriptor(t,e);(!a||("get"in a?!t.__esModule:a.writable||a.configurable))&&(a={enumerable:!0,get:function(){return t[e]}}),Object.defineProperty(i,r,a)}):(function(i,t,e,r){r===void 0&&(r=e),i[r]=t[e]})),o=hc&&hc.__exportStar||function(i,t){for(var e in i)e!=="default"&&!Object.prototype.hasOwnProperty.call(t,e)&&n(t,i,e)};Object.defineProperty(u,"__esModule",{value:!0}),o(hoe(),u),o(poe(),u),o(yoe(),u),o(boe(),u)})(hc)),hc}var yB;function _oe(){if(yB)return hg;yB=1,Object.defineProperty(hg,"__esModule",{value:!0}),hg.ActorRdfJoin=void 0;const u=qe(),n=pe(),o=Wi(),i=br();let t=class oa extends n.Actor{constructor(r,a){super(r),this.includeInLogs=!0,this.logicalType=a.logicalType,this.physicalName=a.physicalName,this.limitEntries=a.limitEntries??Number.POSITIVE_INFINITY,this.limitEntriesMin=a.limitEntriesMin??!1,this.canHandleUndefs=a.canHandleUndefs??!1,this.isLeaf=a.isLeaf??!0,this.requiresVariableOverlap=a.requiresVariableOverlap??!1}static overlappingVariables(r){const a={};for(const c of r)for(const s of c.variables){a[s.variable.value]||(a[s.variable.value]={variable:s.variable,canBeUndef:s.canBeUndef,occurrences:0});const d=a[s.variable.value];d.canBeUndef=d.canBeUndef||s.canBeUndef,d.occurrences++}return Object.values(a).filter(c=>c.occurrences===r.length).map(c=>({variable:c.variable,canBeUndef:c.canBeUndef}))}static joinVariables(r,a,c=!1){const s={};let d=!0;for(const l of a){for(const f of l.variables)s[f.variable.value]=s[f.variable.value]||f.canBeUndef||!d&&c&&!(f.variable.value in s);d=!1}return Object.entries(s).map(([l,f])=>({variable:r.variable(l),canBeUndef:f}))}static joinBindings(...r){if(r.length===0)return null;if(r.length===1)return r[0];let a=r[0];for(const c of r.slice(1)){const s=a.merge(c);if(!s)return null;a=s}return a}static getCardinality(r){return r.cardinality}static async getMetadatas(r){return await Promise.all(r.map(a=>a.output.metadata()))}static async getEntriesWithMetadatas(r){const a=await oa.getMetadatas(r);return r.map((c,s)=>({...c,metadata:a[s]}))}static getRequestInitialTimes(r){return r.map(a=>a.pageSize?0:a.requestTime??0)}static getRequestItemTimes(r){return r.map(a=>a.pageSize?(a.requestTime??0)/a.pageSize:0)}constructState(r){const a=new i.MetadataValidationState,c=()=>a.invalidate();for(const s of r)s.state.addInvalidateListener(c);return a}async constructResultMetadata(r,a,c,s={},d=!1){let l;if(s.cardinality)l=s.cardinality;else{let f=!1;l=a.reduce((h,p)=>{const y=oa.getCardinality(p);return y.value===0&&(f=!0),{type:y.type==="estimate"?"estimate":h.type,value:h.value*(d?Math.max(1,y.value):y.value)}},{type:"exact",value:1}),(!f||d)&&(l.value*=(await this.mediatorJoinSelectivity.mediate({entries:r,context:c})).selectivity,l.value===0&&(l.value=Number.MIN_VALUE))}return{state:this.constructState(a),...s,cardinality:{type:l.type,value:l.value},variables:oa.joinVariables(c.getSafe(u.KeysInitQuery.dataFactory),a,d)}}static async sortJoinEntries(r,a,c){if(a.some(f=>f.metadata.variables.some(h=>h.canBeUndef)))return(0,n.passTest)(a);const d={};for(const f of a)for(const h of f.metadata.variables){let p=d[h.variable.value];p||(p=0),d[h.variable.value]=++p}const l=[];for(const[f,h]of Object.entries(d))h>=2&&l.push(f);return l.length===0?(0,n.failTest)("Bind join can only join entries with at least one common variable"):(0,n.passTest)((await r.mediate({entries:a,context:c})).entries)}async test(r){if(r.type!==this.logicalType)return(0,n.failTest)(`${this.name} can only handle logical joins of type '${this.logicalType}', while '${r.type}' was given.`);if(r.entries.length<=1)return(0,n.failTest)(`${this.name} requires at least two join entries.`);if(this.limitEntriesMin?r.entries.length<this.limitEntries:r.entries.length>this.limitEntries)return(0,n.failTest)(`${this.name} requires ${this.limitEntries} join entries at ${this.limitEntriesMin?"least":"most"}. The input contained ${r.entries.length}.`);for(const s of r.entries)if(s.output.type!=="bindings")return(0,n.failTest)(`Invalid type of a join entry: Expected 'bindings' but got '${s.output.type}'`);const a=await oa.getMetadatas(r.entries);let c;return!this.canHandleUndefs&&(c=oa.overlappingVariables(a),c.some(s=>s.canBeUndef))?(0,n.failTest)(`Actor ${this.name} can not join streams containing undefs`):this.requiresVariableOverlap&&(c??oa.overlappingVariables(a)).length===0?(0,n.failTest)(`Actor ${this.name} can only join entries with at least one common variable`):await this.getJoinCoefficients(r,{metadatas:a})}async run(r,a){let c;r.context.has(u.KeysInitQuery.physicalQueryPlanLogger)&&(c=r.context.get(u.KeysInitQuery.physicalQueryPlanNode),r.context=r.context.set(u.KeysInitQuery.physicalQueryPlanNode,r));const s=r.context.get(u.KeysInitQuery.physicalQueryPlanLogger);let d;this.includeInLogs&&s&&(d={},s.stashChildren(c,h=>h.logicalOperator.startsWith("join")),s.logOperation(`join-${this.logicalType}`,this.physicalName,r,c,this.name,d));const{result:l,physicalPlanMetadata:f}=await this.getOutput(r,a);if(d){(0,o.instrumentIterator)(l.bindingsStream).then(p=>{s.appendMetadata(r,{cardinalityReal:p.count,timeSelf:p.timeSelf,timeLife:p.timeLife})}),Object.assign(d,f);const h=a.metadatas.map(oa.getCardinality);if(d.cardinalities=h,d.joinCoefficients=(await this.getJoinCoefficients(r,a)).getOrThrow(),this.isLeaf)for(let p=0;p<r.entries.length;p++){const y=r.entries[p];s.unstashChild(y.operation,r),s.appendMetadata(y.operation,{cardinality:h[p]})}}return l.metadata=(0,i.cachifyMetadata)(l.metadata),l}};return hg.ActorRdfJoin=t,hg}var bB;function zr(){return bB||(bB=1,(function(u){var n=fc&&fc.__createBinding||(Object.create?(function(i,t,e,r){r===void 0&&(r=e);var a=Object.getOwnPropertyDescriptor(t,e);(!a||("get"in a?!t.__esModule:a.writable||a.configurable))&&(a={enumerable:!0,get:function(){return t[e]}}),Object.defineProperty(i,r,a)}):(function(i,t,e,r){r===void 0&&(r=e),i[r]=t[e]})),o=fc&&fc.__exportStar||function(i,t){for(var e in i)e!=="default"&&!Object.prototype.hasOwnProperty.call(t,e)&&n(t,i,e)};Object.defineProperty(u,"__esModule",{value:!0}),o(_oe(),u)})(fc)),fc}var _B;function goe(){if(_B)return fg;_B=1,Object.defineProperty(fg,"__esModule",{value:!0}),fg.ActorRdfJoinSingle=void 0;const u=zr(),n=pe();let o=class extends u.ActorRdfJoin{constructor(t){super(t,{logicalType:"inner",physicalName:"single",limitEntries:1}),this.includeInLogs=!1}async test(t){return t.entries.length!==1?(0,n.failTest)(`Actor ${this.name} can only join a single entry`):await this.getJoinCoefficients(t,void 0)}async getOutput(t){return{result:t.entries[0].output}}async getJoinCoefficients(t,e){return(0,n.passTestWithSideData)({iterations:0,persistedItems:0,blockingItems:0,requestTime:0},e)}};return fg.ActorRdfJoinSingle=o,fg}var gB;function moe(){return gB||(gB=1,(function(u){var n=lc&&lc.__createBinding||(Object.create?(function(i,t,e,r){r===void 0&&(r=e);var a=Object.getOwnPropertyDescriptor(t,e);(!a||("get"in a?!t.__esModule:a.writable||a.configurable))&&(a={enumerable:!0,get:function(){return t[e]}}),Object.defineProperty(i,r,a)}):(function(i,t,e,r){r===void 0&&(r=e),i[r]=t[e]})),o=lc&&lc.__exportStar||function(i,t){for(var e in i)e!=="default"&&!Object.prototype.hasOwnProperty.call(t,e)&&n(t,i,e)};Object.defineProperty(u,"__esModule",{value:!0}),o(goe(),u)})(lc)),lc}var pc={},gg={},mB;function voe(){if(mB)return gg;mB=1,Object.defineProperty(gg,"__esModule",{value:!0}),gg.ActorRdfJoinMultiEmpty=void 0;const u=zr(),n=qe(),o=pe(),i=br(),t=pt();let e=class extends u.ActorRdfJoin{constructor(a){super(a,{logicalType:"inner",physicalName:"multi-empty",canHandleUndefs:!0})}async test(a){return(await u.ActorRdfJoin.getMetadatas(a.entries)).every(c=>u.ActorRdfJoin.getCardinality(c).value>0)?(0,o.failTest)(`Actor ${this.name} can only join entries where at least one is empty`):super.test(a)}async getOutput(a){for(const s of a.entries)s.output.bindingsStream.close();const c=a.context.getSafe(n.KeysInitQuery.dataFactory);return{result:{bindingsStream:new t.ArrayIterator([],{autoStart:!1}),metadata:async()=>({state:new i.MetadataValidationState,cardinality:{type:"exact",value:0},variables:u.ActorRdfJoin.joinVariables(c,await u.ActorRdfJoin.getMetadatas(a.entries))}),type:"bindings"}}}async getJoinCoefficients(a,c){return(0,o.passTestWithSideData)({iterations:0,persistedItems:0,blockingItems:0,requestTime:0},c)}};return gg.ActorRdfJoinMultiEmpty=e,gg}var vB;function Toe(){return vB||(vB=1,(function(u){var n=pc&&pc.__createBinding||(Object.create?(function(i,t,e,r){r===void 0&&(r=e);var a=Object.getOwnPropertyDescriptor(t,e);(!a||("get"in a?!t.__esModule:a.writable||a.configurable))&&(a={enumerable:!0,get:function(){return t[e]}}),Object.defineProperty(i,r,a)}):(function(i,t,e,r){r===void 0&&(r=e),i[r]=t[e]})),o=pc&&pc.__exportStar||function(i,t){for(var e in i)e!=="default"&&!Object.prototype.hasOwnProperty.call(t,e)&&n(t,i,e)};Object.defineProperty(u,"__esModule",{value:!0}),o(voe(),u)})(pc)),pc}var yc={},mg={},bc={},vg={},TB;function woe(){if(TB)return vg;TB=1,Object.defineProperty(vg,"__esModule",{value:!0}),vg.BindingsIndexDef=void 0;let u=class{constructor(o,i){this.keys=o.map(t=>t.variable),this.hashFn=i,this.index={}}put(o,i){return this.index[this.hashFn(o,this.keys)]=i}get(o){const i=this.getFirst(o);return i?[i]:[]}getFirst(o){return this.index[this.hashFn(o,this.keys)]}values(){return Object.values(this.index)}};return vg.BindingsIndexDef=u,vg}var Tg={},wB;function Soe(){if(wB)return Tg;wB=1,Object.defineProperty(Tg,"__esModule",{value:!0}),Tg.BindingsIndexUndef=void 0;let u=class{constructor(o,i,t){this.data={},this.keys=o.map(e=>e.variable),this.hashFn=i,this.allowDisjointDomains=t&&this.keys.length>0}put(o,i){if(this.allowDisjointDomains||this.isBindingsValid(o)){let t=this.data;for(let e=0;e<this.keys.length;e++){const r=this.keys[e],a=this.hashFn(o.get(r));let c=t[a];c||(c=t[a]=e===this.keys.length-1?i:{}),t=c}}return i}isBindingsValid(o){let i=!1;for(const t of this.keys)if(o.has(t)){i=!0;break}return i}get(o){return this.allowDisjointDomains||this.isBindingsValid(o)?this.getRecursive(o,this.keys,[this.data]):[]}getRecursive(o,i,t){if(i.length===0)return t;let e;[e,...i]=i;const r=[];for(const a of t){const c=this.hashFn(o==null?void 0:o.get(e));if(c){const s=[a[c],a[""]].filter(Boolean);if(s.length===0)continue;r.push(this.getRecursive(o,i,s))}else{const s=Object.values(a);if(s.length===0)continue;r.push(this.getRecursive(o,i,s))}}return r.flat()}getFirst(o,i=!0){if(this.allowDisjointDomains||this.isBindingsValid(o))return this.getRecursiveFirst(o,this.keys,[this.data],i)}getRecursiveFirst(o,i,t,e){if(i.length===0)return t[0];let r;[r,...i]=i;for(const a of t){const c=this.hashFn(o.get(r));if(c||!e){const s=[a[c],a[""]].filter(Boolean);if(s.length===0)continue;const d=this.getRecursiveFirst(o,i,s,e);if(d)return d}else{const s=Object.values(a);if(s.length===0)continue;const d=this.getRecursiveFirst(o,i,s,e);if(d)return d}}}values(){return this.keys.length===0?[]:this.getRecursive(void 0,this.keys,[this.data])}};return Tg.BindingsIndexUndef=u,Tg}var gE={},SB;function Ooe(){return SB||(SB=1,Object.defineProperty(gE,"__esModule",{value:!0})),gE}var OB;function mE(){return OB||(OB=1,(function(u){var n=bc&&bc.__createBinding||(Object.create?(function(i,t,e,r){r===void 0&&(r=e);var a=Object.getOwnPropertyDescriptor(t,e);(!a||("get"in a?!t.__esModule:a.writable||a.configurable))&&(a={enumerable:!0,get:function(){return t[e]}}),Object.defineProperty(i,r,a)}):(function(i,t,e,r){r===void 0&&(r=e),i[r]=t[e]})),o=bc&&bc.__exportStar||function(i,t){for(var e in i)e!=="default"&&!Object.prototype.hasOwnProperty.call(t,e)&&n(t,i,e)};Object.defineProperty(u,"__esModule",{value:!0}),o(woe(),u),o(Soe(),u),o(Ooe(),u)})(bc)),bc}var vE,AB;function Aoe(){if(AB)return vE;AB=1;let u=pt(),n=u.MultiTransformIterator,o=u.SimpleTransformIterator;class i extends n{constructor(e,r,a,c){super(e,c),this.funRight=r,this.funJoin=a}_createTransformer(e){return new o(this.funRight(e),{transform:(r,a,c)=>{let s=this.funJoin(e,r);s!==null&&c(s),a()}})}}return vE=i,vE}var TE,EB;function Eoe(){if(EB)return TE;EB=1;let u=pt().AsyncIterator;class n extends u{constructor(i,t,e,r){super(),this.addedDataListener=!1,this.left=i,this.right=t,this.funHash=e,this.funJoin=r,this.leftMap=new Map,this.match=null,this.matches=[],this.matchIdx=0,this.left.on("error",c=>this.destroy(c)),this.right.on("error",c=>this.destroy(c)),this.readable=!1,this.left.on("end",a.bind(this));function a(){this.readable=!0,this.right.on("readable",()=>this.readable=!0),this.right.on("end",()=>{this.hasResults()||this._end()})}this.on("newListener",c=>{c==="data"&&this._addDataListenerIfNeeded()}),this.left.readable&&this._addDataListenerIfNeeded(),this.left.on("readable",()=>this._addDataListenerIfNeeded())}hasResults(){return!this.right.ended||this.matchIdx<this.matches.length}_end(){super._end(),this.left.destroy(),this.right.destroy()}read(){for(this._addDataListenerIfNeeded();;){if(this.ended||!this.readable)return null;for(;this.matchIdx<this.matches.length;){let t=this.matches[this.matchIdx++],e=this.funJoin(t,this.match);if(e!==null)return e}if(this.hasResults()||this._end(),this.match=this.right.read(),this.match===null)return this.readable=!1,null;let i=this.funHash(this.match);this.matches=this.leftMap.get(i)||[],this.matchIdx=0}}_addDataListenerIfNeeded(){this.addedDataListener||(this.addedDataListener=!0,this._addDataListener())}_addDataListener(){this.left.on("data",i.bind(this));function i(t){let e=this.funHash(t),r=this.leftMap.get(e);r||(r=[],this.leftMap.set(e,r)),r.push(t)}}}return TE=n,TE}var wE,xB;function xoe(){if(xB)return wE;xB=1;const{MultiTransformIterator:u,SimpleTransformIterator:n,scheduleTask:o}=pt();class i extends u{constructor(e,r,a,c){super(e,c),this.right=r,this.funJoin=a,this.on("end",()=>this.right.close())}_end(){super._end(),o(()=>this.right.destroy())}_createTransformer(e){return new n(this.right.clone(),{transform:(r,a,c)=>{let s=this.funJoin(e,r);s!==null&&c(s),a()}})}}return wE=i,wE}var SE,RB;function Roe(){if(RB)return SE;RB=1;let u=pt().AsyncIterator;class n extends u{constructor(i,t,e,r){super(),this.left=i,this.right=t,this.funHash=e,this.funJoin=r,this.usedLeft=!1,this.leftMap=new Map,this.rightMap=new Map,this.on("end",()=>this._cleanup()),this.match=null,this.matches=[],this.matchIdx=0,(this.left.readable||this.right.readable)&&(this.readable=!0),this.left.on("error",a=>this.destroy(a)),this.right.on("error",a=>this.destroy(a)),this.left.on("readable",()=>this.readable=!0),this.right.on("readable",()=>this.readable=!0),this.left.on("end",()=>{this.hasResults()||this._end()}),this.right.on("end",()=>{this.hasResults()||this._end()})}hasResults(){return!this.left.ended||!this.right.ended||!!this.matches&&this.matchIdx<this.matches.length}_cleanup(){this.leftMap=null,this.rightMap=null,this.matches=null}_end(){super._end(),this.left.destroy(),this.right.destroy()}read(){for(;;){if(this.ended)return null;for(;this.matchIdx<this.matches.length;){let e=this.matches[this.matchIdx++],r=this.usedLeft?this.funJoin(this.match,e):this.funJoin(e,this.match);if(r!==null)return r}this.hasResults()||this._end();let i=null;for(let e=0;e<2&&(i=this.usedLeft?this.right.read():this.left.read(),this.usedLeft=!this.usedLeft,i===null);++e);if(this.done||i===null)return this.readable=!1,null;let t=this.funHash(i);if(this.usedLeft&&this.right.done)this.leftMap=null;else if(this.left.done)this.rightMap=null;else{let e=this.usedLeft?this.leftMap:this.rightMap;e.has(t)||e.set(t,[]);let r=e.get(t);r||(r=[],e.set(t,r)),r.push(i)}this.match=i,this.matches=(this.usedLeft?this.rightMap:this.leftMap).get(t)||[],this.matchIdx=0}}}return SE=n,SE}var OE,FB;function Foe(){if(FB)return OE;FB=1;let u=pt().AsyncIterator;class n extends u{constructor(i){super(),Array.isArray(i)||(i=Array.prototype.slice.call(arguments)),this.streams=i;for(let t of i)t.on("readable",()=>this.emit("readable")),t.on("end",()=>this._removeStream(t));this.streams.length===0&&this.close(),this.idx=this.streams.length-1}_removeStream(i){let t=this.streams.indexOf(i);t<0||(this.streams.splice(t,1),this.idx>=this.streams.length&&--this.idx,this.streams.length===0&&this._end())}close(){super.close();for(let i of this.streams)i.close()}read(){for(let i=0;i<this.streams.length;++i){this.idx=(this.idx+1)%this.streams.length;let t=this.streams[this.idx].read();if(t!==null)return t}return null}}return OE=n,OE}var AE,IB;function cw(){if(IB)return AE;IB=1;const u=Aoe(),n=Eoe(),o=xoe(),i=Roe(),t=Foe();return AE={DynamicNestedLoopJoin:u,HashJoin:n,NestedLoopJoin:o,SymmetricHashJoin:i,MergeStream:t},AE}var PB;function Ioe(){if(PB)return mg;PB=1,Object.defineProperty(mg,"__esModule",{value:!0}),mg.ActorRdfJoinHash=void 0;const u=zr(),n=pe(),o=mE(),i=Wi(),t=pt(),e=cw(),r=Yt();let a=class extends u.ActorRdfJoin{constructor(s){super(s,{logicalType:"inner",physicalName:`hash-${s.canHandleUndefs?"undef":"def"}`,limitEntries:2,requiresVariableOverlap:!0,canHandleUndefs:s.canHandleUndefs})}async getOutput(s,d){const l=d.metadatas;let f;const h=u.ActorRdfJoin.overlappingVariables(l);if(this.canHandleUndefs){const p=d.entriesSorted[0].output,y=d.entriesSorted[1].output;f=new i.ClosableTransformIterator(async()=>{const _=new o.BindingsIndexUndef(h,b=>b&&b.termType!=="Variable"?(0,r.termToString)(b):"",!0);return await new Promise(b=>{p.bindingsStream.on("data",m=>{(_.getFirst(m,!1)??_.put(m,[])).push(m)}),p.bindingsStream.on("end",b),p.bindingsStream.on("error",m=>{f.emit("error",m)})}),new t.MultiTransformIterator(y.bindingsStream,{multiTransform:b=>new t.ArrayIterator(_.get(b).flat().map(m=>u.ActorRdfJoin.joinBindings(b,m)).filter(m=>m!==null),{autoStart:!1}),autoStart:!1})},{autoStart:!1,onClose(){p.bindingsStream.destroy(),y.bindingsStream.destroy()}})}else{const{hashFunction:p}=await this.mediatorHashBindings.mediate({context:s.context}),y=h.map(_=>_.variable);f=new e.HashJoin(d.entriesSorted[0].output.bindingsStream,d.entriesSorted[1].output.bindingsStream,_=>p(_,y),u.ActorRdfJoin.joinBindings)}return{result:{type:"bindings",bindingsStream:f,metadata:async()=>await this.constructResultMetadata(d.entriesSorted,l,s.context)}}}async getJoinCoefficients(s,d){let l=s.entries;d.metadatas[1].cardinality.value<d.metadatas[0].cardinality.value&&(d.metadatas=[d.metadatas[1],d.metadatas[0]],l=[s.entries[1],s.entries[0]]);const{metadatas:f}=d,h=u.ActorRdfJoin.getRequestInitialTimes(f),p=u.ActorRdfJoin.getRequestItemTimes(f);let y=f[0].cardinality.value+f[1].cardinality.value;return this.canHandleUndefs||(y*=.8),(0,n.passTestWithSideData)({iterations:y,persistedItems:f[0].cardinality.value,blockingItems:f[0].cardinality.value,requestTime:h[0]+f[0].cardinality.value*p[0]+h[1]+f[1].cardinality.value*p[1]},{...d,entriesSorted:l})}};return mg.ActorRdfJoinHash=a,mg}var DB;function NB(){return DB||(DB=1,(function(u){var n=yc&&yc.__createBinding||(Object.create?(function(i,t,e,r){r===void 0&&(r=e);var a=Object.getOwnPropertyDescriptor(t,e);(!a||("get"in a?!t.__esModule:a.writable||a.configurable))&&(a={enumerable:!0,get:function(){return t[e]}}),Object.defineProperty(i,r,a)}):(function(i,t,e,r){r===void 0&&(r=e),i[r]=t[e]})),o=yc&&yc.__exportStar||function(i,t){for(var e in i)e!=="default"&&!Object.prototype.hasOwnProperty.call(t,e)&&n(t,i,e)};Object.defineProperty(u,"__esModule",{value:!0}),o(Ioe(),u)})(yc)),yc}var _c={},wg={},jB;function Poe(){if(jB)return wg;jB=1,Object.defineProperty(wg,"__esModule",{value:!0}),wg.ActorRdfJoinSymmetricHash=void 0;const u=zr(),n=pe(),o=cw();let i=class extends u.ActorRdfJoin{constructor(e){super(e,{logicalType:"inner",physicalName:"symmetric-hash",limitEntries:2,requiresVariableOverlap:!0})}async getOutput(e){const r=await u.ActorRdfJoin.getMetadatas(e.entries),a=u.ActorRdfJoin.overlappingVariables(r),{hashFunction:c}=await this.mediatorHashBindings.mediate({context:e.context}),s=a.map(l=>l.variable);return{result:{type:"bindings",bindingsStream:new o.SymmetricHashJoin(e.entries[0].output.bindingsStream,e.entries[1].output.bindingsStream,l=>c(l,s),u.ActorRdfJoin.joinBindings),metadata:async()=>await this.constructResultMetadata(e.entries,r,e.context)}}}async getJoinCoefficients(e,r){const{metadatas:a}=r,c=u.ActorRdfJoin.getRequestInitialTimes(a),s=u.ActorRdfJoin.getRequestItemTimes(a);return(0,n.passTestWithSideData)({iterations:a[0].cardinality.value+a[1].cardinality.value,persistedItems:a[0].cardinality.value+a[1].cardinality.value,blockingItems:0,requestTime:c[0]+a[0].cardinality.value*s[0]+c[1]+a[1].cardinality.value*s[1]},r)}};return wg.ActorRdfJoinSymmetricHash=i,wg}var LB;function Doe(){return LB||(LB=1,(function(u){var n=_c&&_c.__createBinding||(Object.create?(function(i,t,e,r){r===void 0&&(r=e);var a=Object.getOwnPropertyDescriptor(t,e);(!a||("get"in a?!t.__esModule:a.writable||a.configurable))&&(a={enumerable:!0,get:function(){return t[e]}}),Object.defineProperty(i,r,a)}):(function(i,t,e,r){r===void 0&&(r=e),i[r]=t[e]})),o=_c&&_c.__exportStar||function(i,t){for(var e in i)e!=="default"&&!Object.prototype.hasOwnProperty.call(t,e)&&n(t,i,e)};Object.defineProperty(u,"__esModule",{value:!0}),o(Poe(),u)})(_c)),_c}var gc={},Sg={},MB;function Noe(){if(MB)return Sg;MB=1,Object.defineProperty(Sg,"__esModule",{value:!0}),Sg.ActorRdfJoinNestedLoop=void 0;const u=zr(),n=pe(),o=cw();let i=class extends u.ActorRdfJoin{constructor(e){super(e,{logicalType:"inner",physicalName:"nested-loop",limitEntries:2,canHandleUndefs:!0})}async getOutput(e){return{result:{type:"bindings",bindingsStream:new o.NestedLoopJoin(e.entries[0].output.bindingsStream,e.entries[1].output.bindingsStream,u.ActorRdfJoin.joinBindings,{autoStart:!1}),metadata:async()=>await this.constructResultMetadata(e.entries,await u.ActorRdfJoin.getMetadatas(e.entries),e.context)}}}async getJoinCoefficients(e,r){const{metadatas:a}=r,c=u.ActorRdfJoin.getRequestInitialTimes(a),s=u.ActorRdfJoin.getRequestItemTimes(a);return(0,n.passTestWithSideData)({iterations:a[0].cardinality.value*a[1].cardinality.value,persistedItems:0,blockingItems:0,requestTime:c[0]+a[0].cardinality.value*s[0]+c[1]+a[1].cardinality.value*s[1]},r)}};return Sg.ActorRdfJoinNestedLoop=i,Sg}var qB;function joe(){return qB||(qB=1,(function(u){var n=gc&&gc.__createBinding||(Object.create?(function(i,t,e,r){r===void 0&&(r=e);var a=Object.getOwnPropertyDescriptor(t,e);(!a||("get"in a?!t.__esModule:a.writable||a.configurable))&&(a={enumerable:!0,get:function(){return t[e]}}),Object.defineProperty(i,r,a)}):(function(i,t,e,r){r===void 0&&(r=e),i[r]=t[e]})),o=gc&&gc.__exportStar||function(i,t){for(var e in i)e!=="default"&&!Object.prototype.hasOwnProperty.call(t,e)&&n(t,i,e)};Object.defineProperty(u,"__esModule",{value:!0}),o(Noe(),u)})(gc)),gc}var mc={},Og={},vc={},Ag={},Tc={},CB;function BB(){if(CB)return Tc;CB=1,Object.defineProperty(Tc,"__esModule",{value:!0}),Tc.bindingsToCompactString=Tc.bindingsToString=void 0;const u=Yt();function n(i){const t={};for(const e of i.keys())t[e.value]=(0,u.termToString)(i.get(e));return JSON.stringify(t,null,"  ")}Tc.bindingsToString=n;function o(i,t){return t.map(e=>{const r=i.get(e);return r?(0,u.termToString)(r):""}).join("")}return Tc.bindingsToCompactString=o,Tc}var $B;function UB(){if($B)return Ag;$B=1,Object.defineProperty(Ag,"__esModule",{value:!0}),Ag.Bindings=void 0;const u=pe(),n=LS,o=BB();let i=class qr{constructor(e,r,a){this.type="bindings",this.dataFactory=e,this.entries=r,this.contextHolder=a}has(e){return this.entries.has(typeof e=="string"?e:e.value)}get(e){return this.entries.get(typeof e=="string"?e:e.value)}set(e,r){return new qr(this.dataFactory,this.entries.set(typeof e=="string"?e:e.value,r),this.contextHolder)}delete(e){return new qr(this.dataFactory,this.entries.delete(typeof e=="string"?e:e.value),this.contextHolder)}keys(){return this.mapIterable(this.iteratorToIterable(this.entries.keys()),e=>this.dataFactory.variable(e))}values(){return this.iteratorToIterable(this.entries.values())}forEach(e){for(const[r,a]of this.entries.entries())e(a,this.dataFactory.variable(r))}get size(){return this.entries.size}[Symbol.iterator](){return this.mapIterable(this.iteratorToIterable(this.entries.entries()),([e,r])=>[this.dataFactory.variable(e),r])[Symbol.iterator]()}equals(e){var r;if(!e)return!1;if(this===e)return!0;if(this.size!==e.size)return!1;for(const a of this.keys())if(!((r=this.get(a))!=null&&r.equals(e.get(a))))return!1;return!0}filter(e){return new qr(this.dataFactory,(0,n.Map)(this.entries.filter((r,a)=>e(r,this.dataFactory.variable(a)))),this.contextHolder)}map(e){return new qr(this.dataFactory,(0,n.Map)(this.entries.map((r,a)=>e(r,this.dataFactory.variable(a)))),this.contextHolder)}merge(e){if(this.size<e.size&&e instanceof qr)return e.merge(this);let r=this.entries;if(e instanceof qr)for(const[a,c]of e.entries){const s=this.entries.get(a);if(s&&!s.equals(c))return;r=r.set(a,c)}else for(const[a,c]of e){const s=this.entries.get(a.value);if(s&&!s.equals(c))return;r=r.set(a.value,c)}return this.createBindingsWithContexts(r,e)}mergeWith(e,r){if(this.size<r.size&&r instanceof qr)return r.mergeWith(e,this);let a=this.entries;if(r instanceof qr)for(const[c,s]of r.entries){const d=this.entries.get(c);let l;d&&!d.equals(s)?l=e(d,s,this.dataFactory.variable(c)):l=s,a=a.set(c,l)}else for(const[c,s]of r){const d=this.entries.get(c.value);let l;d&&!d.equals(s)?l=e(d,s,c):l=s,a=a.set(c.value,l)}return this.createBindingsWithContexts(a,r)}createBindingsWithContexts(e,r){if(this.contextHolder&&this.contextHolder.context){let a=this.contextHolder.context;return"contextHolder"in r&&r.contextHolder&&r.contextHolder.context&&(a=qr.mergeContext(this.contextHolder.contextMergeHandlers,a,r.contextHolder.context)),new qr(this.dataFactory,e,{contextMergeHandlers:this.contextHolder.contextMergeHandlers,context:a})}return new qr(this.dataFactory,e,r.contextHolder)}static mergeContext(e,r,a){const c=[...r.keys(),...a.keys()],s={},d={},l=new Set(a.keys().map(h=>h.name)),f=r.keys().filter(h=>l.has(h.name));for(const h of c){if(d[h.name]===1)continue;d[h.name]=1;const p=f.some(y=>y.name===h.name);if(e[h.name]&&p){s[h.name]=e[h.name].run(r.get(h),a.get(h));continue}if(!(!e[h.name]&&p)){if(!r.get(h)){s[h.name]=a.get(h);continue}a.get(h)||(s[h.name]=r.get(h))}}return new u.ActionContext(s)}setContextEntry(e,r){return this.setContextEntryRaw(e,r)}setContextEntryRaw(e,r){var a;return this.contextHolder&&this.contextHolder.context?new qr(this.dataFactory,this.entries,{contextMergeHandlers:this.contextHolder.contextMergeHandlers,context:this.contextHolder.context.set(e,r)}):new qr(this.dataFactory,this.entries,{contextMergeHandlers:((a=this.contextHolder)==null?void 0:a.contextMergeHandlers)??{},context:new u.ActionContext().set(e,r)})}deleteContextEntry(e){return this.deleteContextEntryRaw(e)}deleteContextEntryRaw(e){var r;return this.contextHolder?new qr(this.dataFactory,this.entries,{contextMergeHandlers:this.contextHolder.contextMergeHandlers,context:(r=this.contextHolder.context)==null?void 0:r.delete(e)}):new qr(this.dataFactory,this.entries)}getContext(){var e;return(e=this.contextHolder)==null?void 0:e.context}getContextEntry(e){var r;return(r=this.getContext())==null?void 0:r.get(e)}toString(){return(0,o.bindingsToString)(this)}*mapIterable(e,r){for(const a of e)yield r(a)}iteratorToIterable(e){return{[Symbol.iterator]:()=>e}}};return Ag.Bindings=i,Ag}var Eg={},VB;function Loe(){if(VB)return Eg;VB=1,Object.defineProperty(Eg,"__esModule",{value:!0}),Eg.BindingsFactory=void 0;const u=LS,n=UB();let o=class lJ{constructor(t,e){this.dataFactory=t,this.contextMergeHandlers=e}static async create(t,e,r){return new lJ(r,(await t.mediate({context:e})).mergeHandlers)}bindings(t=[]){return new n.Bindings(this.dataFactory,(0,u.Map)(t.map(([e,r])=>[e.value,r])),this.contextMergeHandlers?{contextMergeHandlers:this.contextMergeHandlers}:void 0)}fromBindings(t){return this.bindings([...t])}fromRecord(t){return this.bindings(Object.entries(t).map(([e,r])=>[this.dataFactory.variable(e),r]))}};return Eg.BindingsFactory=o,Eg}var QB;function Vt(){return QB||(QB=1,(function(u){var n=vc&&vc.__createBinding||(Object.create?(function(i,t,e,r){r===void 0&&(r=e);var a=Object.getOwnPropertyDescriptor(t,e);(!a||("get"in a?!t.__esModule:a.writable||a.configurable))&&(a={enumerable:!0,get:function(){return t[e]}}),Object.defineProperty(i,r,a)}):(function(i,t,e,r){r===void 0&&(r=e),i[r]=t[e]})),o=vc&&vc.__exportStar||function(i,t){for(var e in i)e!=="default"&&!Object.prototype.hasOwnProperty.call(t,e)&&n(t,i,e)};Object.defineProperty(u,"__esModule",{value:!0}),o(UB(),u),o(Loe(),u),o(BB(),u)})(vc)),vc}var HB;function Moe(){if(HB)return Og;HB=1,Object.defineProperty(Og,"__esModule",{value:!0}),Og.ActorRdfJoinOptionalHash=void 0;const u=zr(),n=pe(),o=Vt(),i=mE(),t=Wi(),e=pt(),r=Yt();let a=class Dx extends u.ActorRdfJoin{constructor(s){super(s,{logicalType:"optional",physicalName:`hash-${s.canHandleUndefs?"undef":"def"}-${s.blocking?"blocking":"nonblocking"}`,limitEntries:2,canHandleUndefs:s.canHandleUndefs,requiresVariableOverlap:!0})}static constructIndex(s,d){return s?new i.BindingsIndexUndef(d,l=>l&&l.termType!=="Variable"?(0,r.termToString)(l):"",!0):new i.BindingsIndexDef(d,o.bindingsToCompactString)}async getOutput(s){const d=s.entries[1].output,l=s.entries[0].output,f=await u.ActorRdfJoin.getMetadatas(s.entries),h=u.ActorRdfJoin.overlappingVariables(f);let p;return this.blocking?p=new t.ClosableTransformIterator(async()=>{const y=Dx.constructIndex(this.canHandleUndefs,h);return await new Promise(_=>{d.bindingsStream.on("data",b=>{(y.getFirst(b,!0)??y.put(b,[])).push(b)}),d.bindingsStream.on("end",_),d.bindingsStream.on("error",b=>{p.emit("error",b)})}),new e.MultiTransformIterator(l.bindingsStream,{multiTransform:_=>new e.ArrayIterator(y.get(_).flat().map(b=>u.ActorRdfJoin.joinBindings(_,b)).filter(b=>b!==null),{autoStart:!1}),optional:!0,autoStart:!1})},{autoStart:!1,onClose(){d.bindingsStream.destroy(),l.bindingsStream.destroy()}}):p=new t.ClosableTransformIterator(async()=>{const y=Dx.constructIndex(this.canHandleUndefs,h);let _=!0;return d.bindingsStream.on("data",b=>{(y.getFirst(b,!0)??y.put(b,new e.BufferedIterator({autoStart:!1})))._push(b)}),d.bindingsStream.on("end",()=>{for(const b of y.values())b.close();_=!1}),d.bindingsStream.on("error",b=>{p.emit("error",b)}),new e.MultiTransformIterator(l.bindingsStream,{multiTransform:b=>{let m=y.get(b);return m.length===0&&(_?m=[y.put(b,new e.BufferedIterator({autoStart:!1}))]:m=[]),new e.UnionIterator(m.map(T=>T.clone()),{autoStart:!1}).map(T=>u.ActorRdfJoin.joinBindings(b,T))},optional:!0,autoStart:!1})},{autoStart:!1,onClose(){d.bindingsStream.destroy(),l.bindingsStream.destroy()}}),{result:{type:"bindings",bindingsStream:p,metadata:async()=>await this.constructResultMetadata(s.entries,f,s.context,{},!0)}}}async getJoinCoefficients(s,d){const{metadatas:l}=d,f=u.ActorRdfJoin.getRequestInitialTimes(l),h=u.ActorRdfJoin.getRequestItemTimes(l);let p=l[0].cardinality.value+l[1].cardinality.value;return this.canHandleUndefs||(p*=.8),this.blocking&&(p*=.9),(0,n.passTestWithSideData)({iterations:p,persistedItems:l[0].cardinality.value,blockingItems:this.blocking?l[0].cardinality.value:0,requestTime:f[0]+l[0].cardinality.value*h[0]+f[1]+l[1].cardinality.value*h[1]},d)}};return Og.ActorRdfJoinOptionalHash=a,Og}var GB;function dw(){return GB||(GB=1,(function(u){var n=mc&&mc.__createBinding||(Object.create?(function(i,t,e,r){r===void 0&&(r=e);var a=Object.getOwnPropertyDescriptor(t,e);(!a||("get"in a?!t.__esModule:a.writable||a.configurable))&&(a={enumerable:!0,get:function(){return t[e]}}),Object.defineProperty(i,r,a)}):(function(i,t,e,r){r===void 0&&(r=e),i[r]=t[e]})),o=mc&&mc.__exportStar||function(i,t){for(var e in i)e!=="default"&&!Object.prototype.hasOwnProperty.call(t,e)&&n(t,i,e)};Object.defineProperty(u,"__esModule",{value:!0}),o(Moe(),u)})(mc)),mc}var wc={},xg={},zB;function qoe(){if(zB)return xg;zB=1,Object.defineProperty(xg,"__esModule",{value:!0}),xg.ActorRdfJoinOptionalNestedLoop=void 0;const u=zr(),n=pe(),o=cw();let i=class extends u.ActorRdfJoin{constructor(e){super(e,{logicalType:"optional",physicalName:"nested-loop",limitEntries:2,canHandleUndefs:!0})}async getOutput(e){return{result:{type:"bindings",bindingsStream:new o.NestedLoopJoin(e.entries[0].output.bindingsStream,e.entries[1].output.bindingsStream,u.ActorRdfJoin.joinBindings,{optional:!0,autoStart:!1}),metadata:async()=>await this.constructResultMetadata(e.entries,await u.ActorRdfJoin.getMetadatas(e.entries),e.context,{},!0)}}}async getJoinCoefficients(e,r){const{metadatas:a}=r,c=u.ActorRdfJoin.getRequestInitialTimes(a),s=u.ActorRdfJoin.getRequestItemTimes(a);return(0,n.passTestWithSideData)({iterations:a[0].cardinality.value*a[1].cardinality.value,persistedItems:0,blockingItems:0,requestTime:c[0]+a[0].cardinality.value*s[0]+c[1]+a[1].cardinality.value*s[1]},r)}};return xg.ActorRdfJoinOptionalNestedLoop=i,xg}var XB;function Coe(){return XB||(XB=1,(function(u){var n=wc&&wc.__createBinding||(Object.create?(function(i,t,e,r){r===void 0&&(r=e);var a=Object.getOwnPropertyDescriptor(t,e);(!a||("get"in a?!t.__esModule:a.writable||a.configurable))&&(a={enumerable:!0,get:function(){return t[e]}}),Object.defineProperty(i,r,a)}):(function(i,t,e,r){r===void 0&&(r=e),i[r]=t[e]})),o=wc&&wc.__exportStar||function(i,t){for(var e in i)e!=="default"&&!Object.prototype.hasOwnProperty.call(t,e)&&n(t,i,e)};Object.defineProperty(u,"__esModule",{value:!0}),o(qoe(),u)})(wc)),wc}var Sc={},Rg={},JB;function Boe(){if(JB)return Rg;JB=1,Object.defineProperty(Rg,"__esModule",{value:!0}),Rg.ActorRdfJoinMinusHash=void 0;const u=zr(),n=pe(),o=Vt(),i=mE(),t=Wi(),e=Yt();let r=class fJ extends u.ActorRdfJoin{constructor(c){super(c,{logicalType:"minus",physicalName:`hash-${c.canHandleUndefs?"undef":"def"}`,limitEntries:2,canHandleUndefs:c.canHandleUndefs})}static constructIndex(c,s){return c?new i.BindingsIndexUndef(s,d=>d&&d.termType!=="Variable"?(0,e.termToString)(d):"",!1):new i.BindingsIndexDef(s,o.bindingsToCompactString)}async getOutput(c){const s=c.entries[1].output,d=c.entries[0].output,l=await u.ActorRdfJoin.getMetadatas(c.entries),f=u.ActorRdfJoin.overlappingVariables(l);if(f.length===0)return s.bindingsStream.destroy(),{result:d};const h=new t.ClosableTransformIterator(async()=>{const p=fJ.constructIndex(this.canHandleUndefs,f);return await new Promise(y=>{s.bindingsStream.on("data",_=>p.put(_,!0)),s.bindingsStream.on("end",y),s.bindingsStream.on("error",_=>h.emit("error",_))}),d.bindingsStream.filter(y=>!p.getFirst(y,!0))},{autoStart:!1,onClose(){s.bindingsStream.destroy(),d.bindingsStream.destroy()}});return{result:{type:"bindings",bindingsStream:h,metadata:d.metadata}}}async getJoinCoefficients(c,s){const{metadatas:d}=s,l=u.ActorRdfJoin.getRequestInitialTimes(d),f=u.ActorRdfJoin.getRequestItemTimes(d);let h=d[0].cardinality.value+d[1].cardinality.value;return this.canHandleUndefs||(h*=.8),(0,n.passTestWithSideData)({iterations:h,persistedItems:d[0].cardinality.value,blockingItems:d[0].cardinality.value,requestTime:l[0]+d[0].cardinality.value*f[0]+l[1]+d[1].cardinality.value*f[1]},s)}};return Rg.ActorRdfJoinMinusHash=r,Rg}var KB;function kB(){return KB||(KB=1,(function(u){var n=Sc&&Sc.__createBinding||(Object.create?(function(i,t,e,r){r===void 0&&(r=e);var a=Object.getOwnPropertyDescriptor(t,e);(!a||("get"in a?!t.__esModule:a.writable||a.configurable))&&(a={enumerable:!0,get:function(){return t[e]}}),Object.defineProperty(i,r,a)}):(function(i,t,e,r){r===void 0&&(r=e),i[r]=t[e]})),o=Sc&&Sc.__exportStar||function(i,t){for(var e in i)e!=="default"&&!Object.prototype.hasOwnProperty.call(t,e)&&n(t,i,e)};Object.defineProperty(u,"__esModule",{value:!0}),o(Boe(),u)})(Sc)),Sc}var Oc={},Fg={},Ac={},Ig={},WB;function $oe(){if(WB)return Ig;WB=1,Object.defineProperty(Ig,"__esModule",{value:!0}),Ig.ActorDereferenceRdf=void 0;const u=AA();let n=class extends u.ActorDereferenceParse{constructor(i){super(i)}};return Ig.ActorDereferenceRdf=n,Ig}var YB;function Uoe(){return YB||(YB=1,(function(u){var n=Ac&&Ac.__createBinding||(Object.create?(function(i,t,e,r){r===void 0&&(r=e);var a=Object.getOwnPropertyDescriptor(t,e);(!a||("get"in a?!t.__esModule:a.writable||a.configurable))&&(a={enumerable:!0,get:function(){return t[e]}}),Object.defineProperty(i,r,a)}):(function(i,t,e,r){r===void 0&&(r=e),i[r]=t[e]})),o=Ac&&Ac.__exportStar||function(i,t){for(var e in i)e!=="default"&&!Object.prototype.hasOwnProperty.call(t,e)&&n(t,i,e)};Object.defineProperty(u,"__esModule",{value:!0}),o($oe(),u)})(Ac)),Ac}var ZB;function Voe(){if(ZB)return Fg;ZB=1,Object.defineProperty(Fg,"__esModule",{value:!0}),Fg.ActorDereferenceRdfParse=void 0;const u=Uoe();let n=class extends u.ActorDereferenceRdf{constructor(i){super(i)}async getMetadata(i){return{baseIRI:i.url}}};return Fg.ActorDereferenceRdfParse=n,Fg}var e$;function Qoe(){return e$||(e$=1,(function(u){var n=Oc&&Oc.__createBinding||(Object.create?(function(i,t,e,r){r===void 0&&(r=e);var a=Object.getOwnPropertyDescriptor(t,e);(!a||("get"in a?!t.__esModule:a.writable||a.configurable))&&(a={enumerable:!0,get:function(){return t[e]}}),Object.defineProperty(i,r,a)}):(function(i,t,e,r){r===void 0&&(r=e),i[r]=t[e]})),o=Oc&&Oc.__exportStar||function(i,t){for(var e in i)e!=="default"&&!Object.prototype.hasOwnProperty.call(t,e)&&n(t,i,e)};Object.defineProperty(u,"__esModule",{value:!0}),o(Voe(),u)})(Oc)),Oc}var Ec={},Pg={},xc={},Dg={},t$;function Hoe(){if(t$)return Dg;t$=1,Object.defineProperty(Dg,"__esModule",{value:!0}),Dg.ActorRdfParseHtml=void 0;const u=pe();let n=class extends u.Actor{constructor(i){super(i)}};return Dg.ActorRdfParseHtml=n,Dg}var r$;function Goe(){return r$||(r$=1,(function(u){var n=xc&&xc.__createBinding||(Object.create?(function(i,t,e,r){r===void 0&&(r=e);var a=Object.getOwnPropertyDescriptor(t,e);(!a||("get"in a?!t.__esModule:a.writable||a.configurable))&&(a={enumerable:!0,get:function(){return t[e]}}),Object.defineProperty(i,r,a)}):(function(i,t,e,r){r===void 0&&(r=e),i[r]=t[e]})),o=xc&&xc.__exportStar||function(i,t){for(var e in i)e!=="default"&&!Object.prototype.hasOwnProperty.call(t,e)&&n(t,i,e)};Object.defineProperty(u,"__esModule",{value:!0}),o(Hoe(),u)})(xc)),xc}var Ng={},n$;function zoe(){if(n$)return Ng;n$=1,Object.defineProperty(Ng,"__esModule",{value:!0}),Ng.HtmlScriptListener=void 0;const u=qe(),n=Pt(),o=Jr();let i=class RT{constructor(e,r,a,c,s,d,l,f){this.textChunksJsonLd=[],this.endBarrier=1,this.passedScripts=0,this.isFinalJsonLdProcessing=!1,this.mediatorRdfParseHandle=e,this.cbQuad=r,this.cbError=a,this.cbEnd=c,this.supportedTypes=s,this.context=d.set(u.KeysRdfParseHtmlScript.processingHtmlScript,!0),this.baseIRI=l,this.headers=f,this.onlyFirstScript=d.get(u.KeysRdfParseHtmlScript.extractAllScripts)===!1;const h=this.baseIRI.indexOf("#");this.targetScriptId=h>0?this.baseIRI.slice(h+1,this.baseIRI.length):null}static newErrorCoded(e,r){const a=new Error(e);return a.code=r,a}onEnd(){--this.endBarrier===0&&(this.textChunksJsonLd.length>0?(this.handleMediaType="application/ld+json",this.textChunks=this.textChunksJsonLd,this.textChunks.push("]"),this.textChunksJsonLd=[],this.isFinalJsonLdProcessing=!0,this.endBarrier++,this.onTagClose()):(this.passedScripts===0&&this.targetScriptId&&this.cbError(RT.newErrorCoded(`Failed to find targeted script id "${this.targetScriptId}"`,"loading document failed")),this.cbEnd()),this.isFinalJsonLdProcessing=!1)}onTagClose(){if(this.handleMediaType)if(this.requiresCustomJsonLdHandling(this.handleMediaType)&&!this.isFinalJsonLdProcessing)this.handleMediaType=void 0,this.textChunks=void 0,this.onEnd();else{const e=new n.Readable({objectMode:!0});e._read=()=>{};const r=this.textChunks,a={context:this.context,handle:{metadata:{baseIRI:this.baseIRI},data:e,headers:this.headers,context:this.context},handleMediaType:this.handleMediaType};this.mediatorRdfParseHandle.mediate(a).then(({handle:c})=>{c.data.on("error",s=>this.cbError(RT.newErrorCoded(s.message,"invalid script element"))).on("data",this.cbQuad).on("end",()=>this.onEnd());for(const s of r)e.push(s);e.push(null)}).catch(c=>{this.targetScriptId?this.cbError(RT.newErrorCoded(c.message,"loading document failed")):this.onEnd()}),this.handleMediaType=void 0,this.textChunks=void 0}}onTagOpen(e,r){e==="base"&&r.href&&(this.baseIRI=(0,o.resolve)(r.href,this.baseIRI)),e==="script"&&(!this.targetScriptId||r.id===this.targetScriptId)?this.supportedTypes[r.type]?this.onlyFirstScript&&this.passedScripts>0?this.handleMediaType=void 0:(this.passedScripts++,this.handleMediaType=r.type,this.endBarrier++,this.requiresCustomJsonLdHandling(this.handleMediaType)?(this.textChunks=this.textChunksJsonLd,this.textChunks.push(this.textChunks.length===0?"[":",")):this.textChunks=[]):this.targetScriptId&&this.cbError(RT.newErrorCoded(`Targeted script "${this.targetScriptId}" does not have a supported type`,"loading document failed")):this.handleMediaType=void 0}onText(e){this.handleMediaType&&this.textChunks.push(e)}requiresCustomJsonLdHandling(e){return!this.onlyFirstScript&&!this.targetScriptId&&e==="application/ld+json"}};return Ng.HtmlScriptListener=i,Ng}var i$;function Xoe(){if(i$)return Pg;i$=1,Object.defineProperty(Pg,"__esModule",{value:!0}),Pg.ActorRdfParseHtmlScript=void 0;const u=Goe(),n=pe(),o=zoe();let i=class extends u.ActorRdfParseHtml{constructor(e){super(e)}async test(e){return(0,n.passTestVoid)()}async run(e){const r=(await this.mediatorRdfParseMediatypes.mediate({context:e.context,mediaTypes:!0})).mediaTypes;return{htmlParseListener:new o.HtmlScriptListener(this.mediatorRdfParseHandle,e.emit,e.error,e.end,r,e.context,e.baseIRI,e.headers)}}};return Pg.ActorRdfParseHtmlScript=i,Pg}var a$;function Joe(){return a$||(a$=1,(function(u){var n=Ec&&Ec.__createBinding||(Object.create?(function(i,t,e,r){r===void 0&&(r=e);var a=Object.getOwnPropertyDescriptor(t,e);(!a||("get"in a?!t.__esModule:a.writable||a.configurable))&&(a={enumerable:!0,get:function(){return t[e]}}),Object.defineProperty(i,r,a)}):(function(i,t,e,r){r===void 0&&(r=e),i[r]=t[e]})),o=Ec&&Ec.__exportStar||function(i,t){for(var e in i)e!=="default"&&!Object.prototype.hasOwnProperty.call(t,e)&&n(t,i,e)};Object.defineProperty(u,"__esModule",{value:!0}),o(Xoe(),u)})(Ec)),Ec}var Rc={},jg={},u$;function Koe(){if(u$)return jg;u$=1,Object.defineProperty(jg,"__esModule",{value:!0}),jg.ActorQueryResultSerializeRdf=void 0;const u=Kn(),n=pe();let o=class extends u.ActorQueryResultSerialize{constructor(t){super(t)}async testHandle(t,e,r){if(t.type!=="quads")return(0,n.failTest)(`Actor ${this.name} can only handle quad streams`);const{mediaTypes:a}=await this.mediatorMediaTypeCombiner.mediate({context:r,mediaTypes:!0});return e in a?(0,n.passTestVoid)():(0,n.failTest)(`Actor ${this.name} can not handle media type ${e}. All available types: ${Object.keys(a)}`)}async runHandle(t,e,r){return(await this.mediatorRdfSerialize.mediate({context:r,handle:{context:r,quadStream:t.quadStream},handleMediaType:e})).handle}async testMediaType(t){return(0,n.passTestVoid)()}async getMediaTypes(t){return(await this.mediatorMediaTypeCombiner.mediate({context:t,mediaTypes:!0})).mediaTypes}async testMediaTypeFormats(t){return(0,n.passTestVoid)()}async getMediaTypeFormats(t){return(await this.mediatorMediaTypeFormatCombiner.mediate({context:t,mediaTypeFormats:!0})).mediaTypeFormats}};return jg.ActorQueryResultSerializeRdf=o,jg}var o$;function koe(){return o$||(o$=1,(function(u){var n=Rc&&Rc.__createBinding||(Object.create?(function(i,t,e,r){r===void 0&&(r=e);var a=Object.getOwnPropertyDescriptor(t,e);(!a||("get"in a?!t.__esModule:a.writable||a.configurable))&&(a={enumerable:!0,get:function(){return t[e]}}),Object.defineProperty(i,r,a)}):(function(i,t,e,r){r===void 0&&(r=e),i[r]=t[e]})),o=Rc&&Rc.__exportStar||function(i,t){for(var e in i)e!=="default"&&!Object.prototype.hasOwnProperty.call(t,e)&&n(t,i,e)};Object.defineProperty(u,"__esModule",{value:!0}),o(Koe(),u)})(Rc)),Rc}var Fc={},Lg={},Ic={},Mg={},s$;function Woe(){if(s$)return Mg;s$=1,Object.defineProperty(Mg,"__esModule",{value:!0}),Mg.ActorBindingsAggregatorFactory=void 0;const u=pe();let n=class extends u.Actor{constructor(i){super(i),this.mediatorExpressionEvaluatorFactory=i.mediatorExpressionEvaluatorFactory}};return Mg.ActorBindingsAggregatorFactory=n,Mg}var qg={},c$;function Yoe(){if(c$)return qg;c$=1,Object.defineProperty(qg,"__esModule",{value:!0}),qg.AggregateEvaluator=void 0;const u=qe(),n=ge(),o=Yt();let i=class{constructor(e,r,a=!1){this.evaluator=e,this.distinct=r,this.throwError=a,this.errorOccurred=!1,this.errorOccurred=!1,this.superTypeProvider=e.context.getSafe(u.KeysExpressionEvaluator.superTypeProvider),this.termTransformer=new n.TermTransformer(this.superTypeProvider),this.variableValues=new Set}emptyValueTerm(){}emptyValue(){const e=this.emptyValueTerm();if(e===void 0&&this.throwError)throw new n.EmptyAggregateError;return e}async putBindings(e){if(!this.errorOccurred)try{const r=await this.evaluator.evaluate(e);if(!r||this.errorOccurred)return;(!this.distinct||!this.variableValues.has(o.termToString(r)))&&(this.putTerm(r),this.distinct&&this.variableValues.add(o.termToString(r)))}catch(r){this.safeThrow(r)}}async result(){if(!this.errorOccurred)return this.termResult()}safeThrow(e){if(this.throwError)throw e;this.errorOccurred=!0}termToNumericOrError(e){if(e.termType!=="Literal")throw new Error(`Term with value ${e.value} has type ${e.termType} and is not a numeric literal`);if(!n.isSubTypeOf(e.datatype.value,n.TypeAlias.SPARQL_NUMERIC,this.superTypeProvider))throw new Error(`Term datatype ${e.datatype.value} with value ${e.value} has type ${e.termType} and is not a numeric literal`);return this.termTransformer.transformLiteral(e)}};return qg.AggregateEvaluator=i,qg}var d$;function jr(){return d$||(d$=1,(function(u){var n=Ic&&Ic.__createBinding||(Object.create?(function(i,t,e,r){r===void 0&&(r=e);var a=Object.getOwnPropertyDescriptor(t,e);(!a||("get"in a?!t.__esModule:a.writable||a.configurable))&&(a={enumerable:!0,get:function(){return t[e]}}),Object.defineProperty(i,r,a)}):(function(i,t,e,r){r===void 0&&(r=e),i[r]=t[e]})),o=Ic&&Ic.__exportStar||function(i,t){for(var e in i)e!=="default"&&!Object.prototype.hasOwnProperty.call(t,e)&&n(t,i,e)};Object.defineProperty(u,"__esModule",{value:!0}),o(Woe(),u),o(Yoe(),u)})(Ic)),Ic}var Cg={},l$;function f$(){if(l$)return Cg;l$=1,Object.defineProperty(Cg,"__esModule",{value:!0}),Cg.GroupConcatAggregator=void 0;const u=jr(),n=ge();let o=class extends u.AggregateEvaluator{constructor(t,e,r,a,c){super(t,e,c),this.dataFactory=r,this.state=void 0,this.lastLanguageValid=!0,this.lastLanguage=void 0,this.separator=a??" "}emptyValueTerm(){return n.typedLiteral("",n.TypeURL.XSD_STRING)}putTerm(t){this.state===void 0?(this.state=t.value,t.termType==="Literal"&&(this.lastLanguage=t.language)):(this.state+=this.separator+t.value,this.lastLanguageValid&&t.termType==="Literal"&&this.lastLanguage!==t.language&&(this.lastLanguageValid=!1,this.lastLanguage=void 0))}termResult(){return this.state===void 0?this.emptyValue():this.lastLanguageValid&&this.lastLanguage?n.langString(this.state,this.lastLanguage).toRDF(this.dataFactory):n.typedLiteral(this.state,n.TypeURL.XSD_STRING)}};return Cg.GroupConcatAggregator=o,Cg}var h$;function Zoe(){if(h$)return Lg;h$=1,Object.defineProperty(Lg,"__esModule",{value:!0}),Lg.ActorBindingsAggregatorFactoryGroupConcat=void 0;const u=jr(),n=qe(),o=pe(),i=f$();let t=class extends u.ActorBindingsAggregatorFactory{constructor(r){super(r)}async test(r){return r.expr.aggregator!=="group_concat"?(0,o.failTest)("This actor only supports the 'group_concat' aggregator."):(0,o.passTestVoid)()}async run({context:r,expr:a}){return new i.GroupConcatAggregator(await this.mediatorExpressionEvaluatorFactory.mediate({algExpr:a.expression,context:r}),a.distinct,r.getSafe(n.KeysInitQuery.dataFactory),a.separator)}};return Lg.ActorBindingsAggregatorFactoryGroupConcat=t,Lg}var p$;function ese(){return p$||(p$=1,(function(u){var n=Fc&&Fc.__createBinding||(Object.create?(function(i,t,e,r){r===void 0&&(r=e);var a=Object.getOwnPropertyDescriptor(t,e);(!a||("get"in a?!t.__esModule:a.writable||a.configurable))&&(a={enumerable:!0,get:function(){return t[e]}}),Object.defineProperty(i,r,a)}):(function(i,t,e,r){r===void 0&&(r=e),i[r]=t[e]})),o=Fc&&Fc.__exportStar||function(i,t){for(var e in i)e!=="default"&&!Object.prototype.hasOwnProperty.call(t,e)&&n(t,i,e)};Object.defineProperty(u,"__esModule",{value:!0}),o(Zoe(),u),o(f$(),u)})(Fc)),Fc}var Pc={},Bg={},$g={},y$;function b$(){if(y$)return $g;y$=1,Object.defineProperty($g,"__esModule",{value:!0}),$g.CountAggregator=void 0;const u=jr(),n=ge();let o=class extends u.AggregateEvaluator{constructor(t,e,r){super(t,e,r),this.state=void 0}emptyValueTerm(){return(0,n.typedLiteral)("0",n.TypeURL.XSD_INTEGER)}putTerm(t){this.state===void 0&&(this.state=0),this.state++}termResult(){return this.state===void 0?this.emptyValue():(0,n.typedLiteral)(String(this.state),n.TypeURL.XSD_INTEGER)}};return $g.CountAggregator=o,$g}var _$;function tse(){if(_$)return Bg;_$=1,Object.defineProperty(Bg,"__esModule",{value:!0}),Bg.ActorBindingsAggregatorFactoryCount=void 0;const u=jr(),n=pe(),o=st(),i=b$();let t=class extends u.ActorBindingsAggregatorFactory{constructor(r){super(r)}async test(r){return r.expr.aggregator!=="count"||r.expr.expression.expressionType===o.Algebra.expressionTypes.WILDCARD?(0,n.failTest)("This actor only supports the 'count' aggregator without wildcard."):(0,n.passTestVoid)()}async run({context:r,expr:a}){return new i.CountAggregator(await this.mediatorExpressionEvaluatorFactory.mediate({algExpr:a.expression,context:r}),a.distinct)}};return Bg.ActorBindingsAggregatorFactoryCount=t,Bg}var g$;function rse(){return g$||(g$=1,(function(u){var n=Pc&&Pc.__createBinding||(Object.create?(function(i,t,e,r){r===void 0&&(r=e);var a=Object.getOwnPropertyDescriptor(t,e);(!a||("get"in a?!t.__esModule:a.writable||a.configurable))&&(a={enumerable:!0,get:function(){return t[e]}}),Object.defineProperty(i,r,a)}):(function(i,t,e,r){r===void 0&&(r=e),i[r]=t[e]})),o=Pc&&Pc.__exportStar||function(i,t){for(var e in i)e!=="default"&&!Object.prototype.hasOwnProperty.call(t,e)&&n(t,i,e)};Object.defineProperty(u,"__esModule",{value:!0}),o(tse(),u),o(b$(),u)})(Pc)),Pc}var Dc={},Ug={},Vg={},m$;function v$(){if(m$)return Vg;m$=1,Object.defineProperty(Vg,"__esModule",{value:!0}),Vg.SampleAggregator=void 0;const u=jr();let n=class extends u.AggregateEvaluator{constructor(i,t,e){super(i,t,e),this.state=void 0}putTerm(i){this.state===void 0&&(this.state=i)}termResult(){return this.state===void 0?this.emptyValue():this.state}};return Vg.SampleAggregator=n,Vg}var T$;function nse(){if(T$)return Ug;T$=1,Object.defineProperty(Ug,"__esModule",{value:!0}),Ug.ActorBindingsAggregatorFactorySample=void 0;const u=jr(),n=pe(),o=v$();let i=class extends u.ActorBindingsAggregatorFactory{constructor(e){super(e)}async test(e){return e.expr.aggregator!=="sample"?(0,n.failTest)("This actor only supports the 'sample' aggregator."):(0,n.passTestVoid)()}async run({context:e,expr:r}){return new o.SampleAggregator(await this.mediatorExpressionEvaluatorFactory.mediate({algExpr:r.expression,context:e}),r.distinct)}};return Ug.ActorBindingsAggregatorFactorySample=i,Ug}var w$;function ise(){return w$||(w$=1,(function(u){var n=Dc&&Dc.__createBinding||(Object.create?(function(i,t,e,r){r===void 0&&(r=e);var a=Object.getOwnPropertyDescriptor(t,e);(!a||("get"in a?!t.__esModule:a.writable||a.configurable))&&(a={enumerable:!0,get:function(){return t[e]}}),Object.defineProperty(i,r,a)}):(function(i,t,e,r){r===void 0&&(r=e),i[r]=t[e]})),o=Dc&&Dc.__exportStar||function(i,t){for(var e in i)e!=="default"&&!Object.prototype.hasOwnProperty.call(t,e)&&n(t,i,e)};Object.defineProperty(u,"__esModule",{value:!0}),o(nse(),u),o(v$(),u)})(Dc)),Dc}var Nc={},Qg={},Hg={},S$;function O$(){if(S$)return Hg;S$=1,Object.defineProperty(Hg,"__esModule",{value:!0}),Hg.WildcardCountAggregator=void 0;const u=jr(),n=ge(),o=Yt();let i=class extends u.AggregateEvaluator{constructor(e,r,a){super(e,r,a),this.bindingValues=new Map,this.state=void 0}putTerm(e){}async putBindings(e){this.handleDistinct(e)||(this.state===void 0&&(this.state=0),this.state+=1)}emptyValueTerm(){return(0,n.typedLiteral)("0",n.TypeURL.XSD_INTEGER)}termResult(){return this.state===void 0?this.emptyValue():(0,n.typedLiteral)(String(this.state),n.TypeURL.XSD_INTEGER)}handleDistinct(e){if(this.distinct){const r=[...e];r.sort((l,f)=>l[0].value.localeCompare(f[0].value));const a=r.map(([l])=>l.value).join(","),c=r.map(([,l])=>o.termToString(l)).join(","),s=this.bindingValues.get(a),d=s!==void 0&&s.has(c);return s||this.bindingValues.set(a,new Set),this.bindingValues.get(a).add(c),d}return!1}};return Hg.WildcardCountAggregator=i,Hg}var A$;function ase(){if(A$)return Qg;A$=1,Object.defineProperty(Qg,"__esModule",{value:!0}),Qg.ActorBindingsAggregatorFactoryWildcardCount=void 0;const u=jr(),n=pe(),o=O$();let i=class extends u.ActorBindingsAggregatorFactory{constructor(e){super(e)}async test(e){return e.expr.aggregator!=="count"||e.expr.expression.expressionType!=="wildcard"?(0,n.failTest)("This actor only supports the 'count' aggregator with wildcard."):(0,n.passTestVoid)()}async run({context:e,expr:r}){return new o.WildcardCountAggregator(await this.mediatorExpressionEvaluatorFactory.mediate({algExpr:r.expression,context:e}),r.distinct)}};return Qg.ActorBindingsAggregatorFactoryWildcardCount=i,Qg}var E$;function use(){return E$||(E$=1,(function(u){var n=Nc&&Nc.__createBinding||(Object.create?(function(i,t,e,r){r===void 0&&(r=e);var a=Object.getOwnPropertyDescriptor(t,e);(!a||("get"in a?!t.__esModule:a.writable||a.configurable))&&(a={enumerable:!0,get:function(){return t[e]}}),Object.defineProperty(i,r,a)}):(function(i,t,e,r){r===void 0&&(r=e),i[r]=t[e]})),o=Nc&&Nc.__exportStar||function(i,t){for(var e in i)e!=="default"&&!Object.prototype.hasOwnProperty.call(t,e)&&n(t,i,e)};Object.defineProperty(u,"__esModule",{value:!0}),o(ase(),u),o(O$(),u)})(Nc)),Nc}var jc={},Gg={},zg={},x$;function R$(){if(x$)return zg;x$=1,Object.defineProperty(zg,"__esModule",{value:!0}),zg.AverageAggregator=void 0;const u=jr(),n=ge();let o=class extends u.AggregateEvaluator{constructor(t,e,r,a,c,s){super(t,e,s),this.dataFactory=r,this.additionFunction=a,this.divisionFunction=c,this.state=void 0}emptyValueTerm(){return n.typedLiteral("0",n.TypeURL.XSD_INTEGER)}putTerm(t){if(this.state===void 0){const e=this.termToNumericOrError(t);this.state={sum:e,count:1}}else{const e=this.termToNumericOrError(t);this.state.sum=this.additionFunction.applyOnTerms([this.state.sum,e],this.evaluator),this.state.count++}}termResult(){if(this.state===void 0)return this.emptyValue();const t=new n.IntegerLiteral(this.state.count);return this.divisionFunction.applyOnTerms([this.state.sum,t],this.evaluator).toRDF(this.dataFactory)}};return zg.AverageAggregator=o,zg}var F$;function ose(){if(F$)return Gg;F$=1,Object.defineProperty(Gg,"__esModule",{value:!0}),Gg.ActorBindingsAggregatorFactoryAverage=void 0;const u=jr(),n=qe(),o=pe(),i=ge(),t=R$();let e=class extends u.ActorBindingsAggregatorFactory{constructor(a){super(a),this.mediatorFunctionFactory=a.mediatorFunctionFactory}async test(a){return a.expr.aggregator!=="avg"?(0,o.failTest)("This actor only supports the 'avg' aggregator."):(0,o.passTestVoid)()}async run({context:a,expr:c}){return new t.AverageAggregator(await this.mediatorExpressionEvaluatorFactory.mediate({algExpr:c.expression,context:a}),c.distinct,a.getSafe(n.KeysInitQuery.dataFactory),await this.mediatorFunctionFactory.mediate({functionName:i.SparqlOperator.ADDITION,context:a,requireTermExpression:!0}),await this.mediatorFunctionFactory.mediate({functionName:i.SparqlOperator.DIVISION,context:a,requireTermExpression:!0}))}};return Gg.ActorBindingsAggregatorFactoryAverage=e,Gg}var I$;function sse(){return I$||(I$=1,(function(u){var n=jc&&jc.__createBinding||(Object.create?(function(i,t,e,r){r===void 0&&(r=e);var a=Object.getOwnPropertyDescriptor(t,e);(!a||("get"in a?!t.__esModule:a.writable||a.configurable))&&(a={enumerable:!0,get:function(){return t[e]}}),Object.defineProperty(i,r,a)}):(function(i,t,e,r){r===void 0&&(r=e),i[r]=t[e]})),o=jc&&jc.__exportStar||function(i,t){for(var e in i)e!=="default"&&!Object.prototype.hasOwnProperty.call(t,e)&&n(t,i,e)};Object.defineProperty(u,"__esModule",{value:!0}),o(ose(),u),o(R$(),u)})(jc)),jc}var Lc={},Xg={},Jg={},P$;function D$(){if(P$)return Jg;P$=1,Object.defineProperty(Jg,"__esModule",{value:!0}),Jg.SumAggregator=void 0;const u=jr(),n=ge();let o=class extends u.AggregateEvaluator{constructor(t,e,r,a,c){super(t,e,c),this.dataFactory=r,this.additionFunction=a,this.state=void 0}emptyValueTerm(){return(0,n.typedLiteral)("0",n.TypeURL.XSD_INTEGER)}putTerm(t){if(this.state===void 0)this.state=this.termToNumericOrError(t);else{const e=this.termToNumericOrError(t);this.state=this.additionFunction.applyOnTerms([this.state,e],this.evaluator)}}termResult(){return this.state===void 0?this.emptyValue():this.state.toRDF(this.dataFactory)}};return Jg.SumAggregator=o,Jg}var N$;function cse(){if(N$)return Xg;N$=1,Object.defineProperty(Xg,"__esModule",{value:!0}),Xg.ActorBindingsAggregatorFactorySum=void 0;const u=jr(),n=qe(),o=pe(),i=ge(),t=D$();let e=class extends u.ActorBindingsAggregatorFactory{constructor(a){super(a),this.mediatorFunctionFactory=a.mediatorFunctionFactory}async test(a){return a.expr.aggregator!=="sum"?(0,o.failTest)("This actor only supports the 'sum' aggregator."):(0,o.passTestVoid)()}async run({expr:a,context:c}){return new t.SumAggregator(await this.mediatorExpressionEvaluatorFactory.mediate({algExpr:a.expression,context:c}),a.distinct,c.getSafe(n.KeysInitQuery.dataFactory),await this.mediatorFunctionFactory.mediate({functionName:i.SparqlOperator.ADDITION,context:c,requireTermExpression:!0}))}};return Xg.ActorBindingsAggregatorFactorySum=e,Xg}var j$;function dse(){return j$||(j$=1,(function(u){var n=Lc&&Lc.__createBinding||(Object.create?(function(i,t,e,r){r===void 0&&(r=e);var a=Object.getOwnPropertyDescriptor(t,e);(!a||("get"in a?!t.__esModule:a.writable||a.configurable))&&(a={enumerable:!0,get:function(){return t[e]}}),Object.defineProperty(i,r,a)}):(function(i,t,e,r){r===void 0&&(r=e),i[r]=t[e]})),o=Lc&&Lc.__exportStar||function(i,t){for(var e in i)e!=="default"&&!Object.prototype.hasOwnProperty.call(t,e)&&n(t,i,e)};Object.defineProperty(u,"__esModule",{value:!0}),o(cse(),u),o(D$(),u)})(Lc)),Lc}var Mc={},Kg={},kg={},L$;function lse(){if(L$)return kg;L$=1,Object.defineProperty(kg,"__esModule",{value:!0}),kg.ExpressionFunctionIn=void 0;const u=Te(),n=ge();let o=class extends u.ExpressionFunctionBase{constructor(t){super({arity:Number.POSITIVE_INFINITY,operator:n.SparqlOperator.IN,apply:async e=>{const{args:r,mapping:a,exprEval:c}=e,[s,...d]=r,l=await c.evaluatorExpressionEvaluation(s,a);return await this.inRecursive(l,{...e,args:d},[])}}),this.equalityFunction=t}checkArity(t){return t.length>0}async inRecursive(t,e,r){const{args:a,mapping:c,exprEval:s}=e;if(a.length===0)return r.every(l=>!l)?(0,n.bool)(!1):Promise.reject(new n.InError(r));try{const d=a.shift(),l=await s.evaluatorExpressionEvaluation(d,c);return this.equalityFunction.applyOnTerms([t,l],s).typedValue?(0,n.bool)(!0):this.inRecursive(t,e,[...r,!1])}catch(d){return this.inRecursive(t,e,[...r,d])}}};return kg.ExpressionFunctionIn=o,kg}var M$;function fse(){if(M$)return Kg;M$=1,Object.defineProperty(Kg,"__esModule",{value:!0}),Kg.ActorFunctionFactoryExpressionIn=void 0;const u=Te(),n=ge(),o=lse();let i=class extends u.ActorFunctionFactoryDedicated{constructor(e){super({...e,functionNames:[n.SparqlOperator.IN],termFunction:!1}),this.mediatorFunctionFactory=e.mediatorFunctionFactory}async run(e){const r=await this.mediatorFunctionFactory.mediate({functionName:n.SparqlOperator.EQUAL,requireTermExpression:!0,context:e.context,arguments:e.arguments});return new o.ExpressionFunctionIn(r)}};return Kg.ActorFunctionFactoryExpressionIn=i,Kg}var q$;function hse(){return q$||(q$=1,(function(u){var n=Mc&&Mc.__createBinding||(Object.create?(function(i,t,e,r){r===void 0&&(r=e);var a=Object.getOwnPropertyDescriptor(t,e);(!a||("get"in a?!t.__esModule:a.writable||a.configurable))&&(a={enumerable:!0,get:function(){return t[e]}}),Object.defineProperty(i,r,a)}):(function(i,t,e,r){r===void 0&&(r=e),i[r]=t[e]})),o=Mc&&Mc.__exportStar||function(i,t){for(var e in i)e!=="default"&&!Object.prototype.hasOwnProperty.call(t,e)&&n(t,i,e)};Object.defineProperty(u,"__esModule",{value:!0}),o(fse(),u)})(Mc)),Mc}var qc={},Wg={},Yg={},C$;function pse(){if(C$)return Yg;C$=1,Object.defineProperty(Yg,"__esModule",{value:!0}),Yg.ExpressionFunctionNotIn=void 0;const u=Te(),n=ge();let o=class extends u.ExpressionFunctionBase{constructor(t){super({arity:Number.POSITIVE_INFINITY,operator:n.SparqlOperator.NOT_IN,apply:async e=>{const r=await this.inFunction.apply(e);return(0,n.bool)(!r.typedValue)}}),this.inFunction=t}checkArity(t){return t.length>0}};return Yg.ExpressionFunctionNotIn=o,Yg}var B$;function yse(){if(B$)return Wg;B$=1,Object.defineProperty(Wg,"__esModule",{value:!0}),Wg.ActorFunctionFactoryExpressionNotIn=void 0;const u=Te(),n=ge(),o=pse();let i=class extends u.ActorFunctionFactoryDedicated{constructor(e){super({...e,functionNames:[n.SparqlOperator.NOT_IN],termFunction:!1}),this.mediatorFunctionFactory=e.mediatorFunctionFactory}async run(e){const r=await this.mediatorFunctionFactory.mediate({functionName:n.SparqlOperator.IN,context:e.context,arguments:e.arguments});return new o.ExpressionFunctionNotIn(r)}};return Wg.ActorFunctionFactoryExpressionNotIn=i,Wg}var $$;function bse(){return $$||($$=1,(function(u){var n=qc&&qc.__createBinding||(Object.create?(function(i,t,e,r){r===void 0&&(r=e);var a=Object.getOwnPropertyDescriptor(t,e);(!a||("get"in a?!t.__esModule:a.writable||a.configurable))&&(a={enumerable:!0,get:function(){return t[e]}}),Object.defineProperty(i,r,a)}):(function(i,t,e,r){r===void 0&&(r=e),i[r]=t[e]})),o=qc&&qc.__exportStar||function(i,t){for(var e in i)e!=="default"&&!Object.prototype.hasOwnProperty.call(t,e)&&n(t,i,e)};Object.defineProperty(u,"__esModule",{value:!0}),o(yse(),u)})(qc)),qc}var Cc={},Zg={},em={},U$;function _se(){if(U$)return em;U$=1,Object.defineProperty(em,"__esModule",{value:!0}),em.TermFunctionGreaterThanEqual=void 0;const u=Te(),n=ge();let o=class extends u.TermFunctionBase{constructor(t){super({arity:2,operator:n.SparqlOperator.GTE,overloads:(0,n.declare)(n.SparqlOperator.GTE).set(["term","term"],e=>([r,a])=>this.lessThanEqualFunction.applyOnTerms([a,r],e)).collect()}),this.lessThanEqualFunction=t}};return em.TermFunctionGreaterThanEqual=o,em}var V$;function gse(){if(V$)return Zg;V$=1,Object.defineProperty(Zg,"__esModule",{value:!0}),Zg.ActorFunctionFactoryTermGreaterThanEqual=void 0;const u=Te(),n=ge(),o=_se();let i=class extends u.ActorFunctionFactoryDedicated{constructor(e){super({...e,functionNames:[n.SparqlOperator.GTE],termFunction:!0}),this.mediatorFunctionFactory=e.mediatorFunctionFactory}async run(e){const r=await this.mediatorFunctionFactory.mediate({functionName:n.SparqlOperator.LTE,requireTermExpression:!0,context:e.context,arguments:e.arguments});return new o.TermFunctionGreaterThanEqual(r)}};return Zg.ActorFunctionFactoryTermGreaterThanEqual=i,Zg}var Q$;function mse(){return Q$||(Q$=1,(function(u){var n=Cc&&Cc.__createBinding||(Object.create?(function(i,t,e,r){r===void 0&&(r=e);var a=Object.getOwnPropertyDescriptor(t,e);(!a||("get"in a?!t.__esModule:a.writable||a.configurable))&&(a={enumerable:!0,get:function(){return t[e]}}),Object.defineProperty(i,r,a)}):(function(i,t,e,r){r===void 0&&(r=e),i[r]=t[e]})),o=Cc&&Cc.__exportStar||function(i,t){for(var e in i)e!=="default"&&!Object.prototype.hasOwnProperty.call(t,e)&&n(t,i,e)};Object.defineProperty(u,"__esModule",{value:!0}),o(gse(),u)})(Cc)),Cc}var Bc={},tm={},rm={},H$;function vse(){if(H$)return rm;H$=1,Object.defineProperty(rm,"__esModule",{value:!0}),rm.TermFunctionGreaterThan=void 0;const u=Te(),n=ge();let o=class extends u.TermFunctionBase{constructor(t){super({arity:2,operator:n.SparqlOperator.GT,overloads:(0,n.declare)(n.SparqlOperator.GT).set(["term","term"],e=>([r,a])=>this.lessThanFunction.applyOnTerms([a,r],e)).collect()}),this.lessThanFunction=t}};return rm.TermFunctionGreaterThan=o,rm}var G$;function Tse(){if(G$)return tm;G$=1,Object.defineProperty(tm,"__esModule",{value:!0}),tm.ActorFunctionFactoryTermGreaterThan=void 0;const u=Te(),n=ge(),o=vse();let i=class extends u.ActorFunctionFactoryDedicated{constructor(e){super({...e,functionNames:[n.SparqlOperator.GT],termFunction:!0}),this.mediatorFunctionFactory=e.mediatorFunctionFactory}async run(e){const r=await this.mediatorFunctionFactory.mediate({functionName:n.SparqlOperator.LT,requireTermExpression:!0,context:e.context,arguments:e.arguments});return new o.TermFunctionGreaterThan(r)}};return tm.ActorFunctionFactoryTermGreaterThan=i,tm}var z$;function wse(){return z$||(z$=1,(function(u){var n=Bc&&Bc.__createBinding||(Object.create?(function(i,t,e,r){r===void 0&&(r=e);var a=Object.getOwnPropertyDescriptor(t,e);(!a||("get"in a?!t.__esModule:a.writable||a.configurable))&&(a={enumerable:!0,get:function(){return t[e]}}),Object.defineProperty(i,r,a)}):(function(i,t,e,r){r===void 0&&(r=e),i[r]=t[e]})),o=Bc&&Bc.__exportStar||function(i,t){for(var e in i)e!=="default"&&!Object.prototype.hasOwnProperty.call(t,e)&&n(t,i,e)};Object.defineProperty(u,"__esModule",{value:!0}),o(Tse(),u)})(Bc)),Bc}var $c={},nm={},im={},X$;function Sse(){if(X$)return im;X$=1,Object.defineProperty(im,"__esModule",{value:!0}),im.TermFunctionInequality=void 0;const u=Te(),n=ge();let o=class extends u.TermFunctionBase{constructor(t){super({arity:2,operator:n.SparqlOperator.NOT_EQUAL,overloads:(0,n.declare)(n.SparqlOperator.NOT_EQUAL).set(["term","term"],e=>([r,a])=>(0,n.bool)(!this.equalityFunction.applyOnTerms([r,a],e).typedValue)).collect()}),this.equalityFunction=t}};return im.TermFunctionInequality=o,im}var J$;function Ose(){if(J$)return nm;J$=1,Object.defineProperty(nm,"__esModule",{value:!0}),nm.ActorFunctionFactoryTermInequality=void 0;const u=Te(),n=ge(),o=Sse();let i=class extends u.ActorFunctionFactoryDedicated{constructor(e){super({...e,functionNames:[n.SparqlOperator.NOT_EQUAL],termFunction:!0}),this.mediatorFunctionFactory=e.mediatorFunctionFactory}async run(e){const r=await this.mediatorFunctionFactory.mediate({functionName:n.SparqlOperator.EQUAL,requireTermExpression:!0,context:e.context,arguments:e.arguments});return new o.TermFunctionInequality(r)}};return nm.ActorFunctionFactoryTermInequality=i,nm}var K$;function Ase(){return K$||(K$=1,(function(u){var n=$c&&$c.__createBinding||(Object.create?(function(i,t,e,r){r===void 0&&(r=e);var a=Object.getOwnPropertyDescriptor(t,e);(!a||("get"in a?!t.__esModule:a.writable||a.configurable))&&(a={enumerable:!0,get:function(){return t[e]}}),Object.defineProperty(i,r,a)}):(function(i,t,e,r){r===void 0&&(r=e),i[r]=t[e]})),o=$c&&$c.__exportStar||function(i,t){for(var e in i)e!=="default"&&!Object.prototype.hasOwnProperty.call(t,e)&&n(t,i,e)};Object.defineProperty(u,"__esModule",{value:!0}),o(Ose(),u)})($c)),$c}var Uc={},am={},um={},k$;function Ese(){if(k$)return um;k$=1,Object.defineProperty(um,"__esModule",{value:!0}),um.TermFunctionLesserThanEqual=void 0;const u=Te(),n=ge();let o=class extends u.TermFunctionBase{constructor(t,e){super({arity:2,operator:n.SparqlOperator.LTE,overloads:(0,n.declare)(n.SparqlOperator.LTE).set(["term","term"],r=>([a,c])=>(0,n.bool)(this.lessThanFunction.applyOnTerms([a,c],r).typedValue||this.equalityFunction.applyOnTerms([a,c],r).typedValue)).collect()}),this.equalityFunction=t,this.lessThanFunction=e}};return um.TermFunctionLesserThanEqual=o,um}var W$;function xse(){if(W$)return am;W$=1,Object.defineProperty(am,"__esModule",{value:!0}),am.ActorFunctionFactoryTermLesserThanEqual=void 0;const u=Te(),n=ge(),o=Ese();let i=class extends u.ActorFunctionFactoryDedicated{constructor(e){super({...e,functionNames:[n.SparqlOperator.LTE],termFunction:!0}),this.mediatorFunctionFactory=e.mediatorFunctionFactory}async run(e){const r=await this.mediatorFunctionFactory.mediate({functionName:n.SparqlOperator.EQUAL,requireTermExpression:!0,context:e.context,arguments:e.arguments}),a=await this.mediatorFunctionFactory.mediate({functionName:n.SparqlOperator.LT,requireTermExpression:!0,context:e.context,arguments:e.arguments});return new o.TermFunctionLesserThanEqual(r,a)}};return am.ActorFunctionFactoryTermLesserThanEqual=i,am}var Y$;function Rse(){return Y$||(Y$=1,(function(u){var n=Uc&&Uc.__createBinding||(Object.create?(function(i,t,e,r){r===void 0&&(r=e);var a=Object.getOwnPropertyDescriptor(t,e);(!a||("get"in a?!t.__esModule:a.writable||a.configurable))&&(a={enumerable:!0,get:function(){return t[e]}}),Object.defineProperty(i,r,a)}):(function(i,t,e,r){r===void 0&&(r=e),i[r]=t[e]})),o=Uc&&Uc.__exportStar||function(i,t){for(var e in i)e!=="default"&&!Object.prototype.hasOwnProperty.call(t,e)&&n(t,i,e)};Object.defineProperty(u,"__esModule",{value:!0}),o(xse(),u)})(Uc)),Uc}var Vc={},om={},sm={},Z$;function Fse(){if(Z$)return sm;Z$=1,Object.defineProperty(sm,"__esModule",{value:!0}),sm.TermFunctionLesserThan=void 0;const u=Te(),n=qe(),o=ge();let i=class extends u.TermFunctionBase{constructor(e){super({arity:2,operator:o.SparqlOperator.LT,overloads:(0,o.declare)(o.SparqlOperator.LT).numberTest(()=>(r,a)=>r<a).stringTest(()=>(r,a)=>r.localeCompare(a)===-1).booleanTest(()=>(r,a)=>r<a).dateTimeTest(r=>(a,c)=>(0,o.toUTCDate)(a,r.context.getSafe(n.KeysExpressionEvaluator.defaultTimeZone)).getTime()<(0,o.toUTCDate)(c,r.context.getSafe(n.KeysExpressionEvaluator.defaultTimeZone)).getTime()).copy({from:[o.TypeURL.XSD_DATE_TIME,o.TypeURL.XSD_DATE_TIME],to:[o.TypeURL.XSD_DATE,o.TypeURL.XSD_DATE]}).set([o.TypeURL.XSD_YEAR_MONTH_DURATION,o.TypeURL.XSD_YEAR_MONTH_DURATION],()=>([r,a])=>(0,o.bool)((0,o.yearMonthDurationsToMonths)((0,o.defaultedYearMonthDurationRepresentation)(r.typedValue))<(0,o.yearMonthDurationsToMonths)((0,o.defaultedYearMonthDurationRepresentation)(a.typedValue)))).set([o.TypeURL.XSD_DAY_TIME_DURATION,o.TypeURL.XSD_DAY_TIME_DURATION],()=>([r,a])=>(0,o.bool)((0,o.dayTimeDurationsToSeconds)((0,o.defaultedDayTimeDurationRepresentation)(r.typedValue))<(0,o.dayTimeDurationsToSeconds)((0,o.defaultedDayTimeDurationRepresentation)(a.typedValue)))).set([o.TypeURL.XSD_TIME,o.TypeURL.XSD_TIME],r=>([a,c])=>(0,o.bool)((0,o.toUTCDate)((0,o.defaultedDateTimeRepresentation)(a.typedValue),r.context.getSafe(n.KeysExpressionEvaluator.defaultTimeZone)).getTime()<(0,o.toUTCDate)((0,o.defaultedDateTimeRepresentation)(c.typedValue),r.context.getSafe(n.KeysExpressionEvaluator.defaultTimeZone)).getTime())).set(["quad","quad"],r=>([a,c])=>{const s=this.quadComponentTest(a.subject,c.subject,r);if(s!==void 0)return(0,o.bool)(s);const d=this.quadComponentTest(a.predicate,c.predicate,r);if(d!==void 0)return(0,o.bool)(d);const l=this.quadComponentTest(a.object,c.object,r);return l!==void 0?(0,o.bool)(l):(0,o.bool)(this.quadComponentTest(a.graph,c.graph,r)??!1)},!1).collect()}),this.equalityFunction=e}quadComponentTest(e,r,a){return this.equalityFunction.applyOnTerms([e,r],a).typedValue?void 0:this.applyOnTerms([e,r],a).typedValue}};return sm.TermFunctionLesserThan=i,sm}var eU;function Ise(){if(eU)return om;eU=1,Object.defineProperty(om,"__esModule",{value:!0}),om.ActorFunctionFactoryTermLesserThan=void 0;const u=Te(),n=ge(),o=Fse();let i=class extends u.ActorFunctionFactoryDedicated{constructor(e){super({...e,functionNames:[n.SparqlOperator.LT],termFunction:!0}),this.mediatorFunctionFactory=e.mediatorFunctionFactory}async run(e){const r=await this.mediatorFunctionFactory.mediate({functionName:n.SparqlOperator.EQUAL,requireTermExpression:!0,context:e.context,arguments:e.arguments});return new o.TermFunctionLesserThan(r)}};return om.ActorFunctionFactoryTermLesserThan=i,om}var tU;function Pse(){return tU||(tU=1,(function(u){var n=Vc&&Vc.__createBinding||(Object.create?(function(i,t,e,r){r===void 0&&(r=e);var a=Object.getOwnPropertyDescriptor(t,e);(!a||("get"in a?!t.__esModule:a.writable||a.configurable))&&(a={enumerable:!0,get:function(){return t[e]}}),Object.defineProperty(i,r,a)}):(function(i,t,e,r){r===void 0&&(r=e),i[r]=t[e]})),o=Vc&&Vc.__exportStar||function(i,t){for(var e in i)e!=="default"&&!Object.prototype.hasOwnProperty.call(t,e)&&n(t,i,e)};Object.defineProperty(u,"__esModule",{value:!0}),o(Ise(),u)})(Vc)),Vc}var Qc={},cm={},rU;function Dse(){if(rU)return cm;rU=1,Object.defineProperty(cm,"__esModule",{value:!0}),cm.ActorHttpWayback=void 0;const u=Ti(),n=qe(),o=pe(),i=xf(),t="http://wayback.archive-it.org/";function e(c){const s=new Request(c.input,c.init);return{input:new Request(new URL(`/${s.url}`,t),s)}}function r(c){const s=c.get(n.KeysHttpProxy.httpProxyHandler);return s?d=>s.getProxy(e(d)):d=>Promise.resolve(e(d))}let a=class extends u.ActorHttp{constructor(s){super(s)}async test(s){return(0,o.passTestVoid)()}async run(s){let d=await this.mediatorHttp.mediate(s);if(d.status===404&&s.context.get(n.KeysHttpWayback.recoverBrokenLinks)){let l=await this.mediatorHttp.mediate({...s,context:s.context.set(n.KeysHttpWayback.recoverBrokenLinks,!1).set(n.KeysHttpProxy.httpProxyHandler,{getProxy:r(s.context)})});l.status===200&&([d,l]=[l,d]);const{body:f}=l;f&&("cancel"in f&&typeof f.cancel=="function"?await f.cancel():"destroy"in f&&typeof f.destroy=="function"?f.destroy():await(0,i.stringify)(u.ActorHttp.toNodeReadable(f)))}return d}};return cm.ActorHttpWayback=a,cm}var nU;function Nse(){return nU||(nU=1,(function(u){var n=Qc&&Qc.__createBinding||(Object.create?(function(i,t,e,r){r===void 0&&(r=e);var a=Object.getOwnPropertyDescriptor(t,e);(!a||("get"in a?!t.__esModule:a.writable||a.configurable))&&(a={enumerable:!0,get:function(){return t[e]}}),Object.defineProperty(i,r,a)}):(function(i,t,e,r){r===void 0&&(r=e),i[r]=t[e]})),o=Qc&&Qc.__exportStar||function(i,t){for(var e in i)e!=="default"&&!Object.prototype.hasOwnProperty.call(t,e)&&n(t,i,e)};Object.defineProperty(u,"__esModule",{value:!0}),o(Dse(),u)})(Qc)),Qc}var Hc={},dm={},Gc={},lm={},fm={},hm={},pm={},ym={},iU;function jse(){if(iU)return ym;iU=1,Object.defineProperty(ym,"__esModule",{value:!0}),ym.ContainerHandlerIdentifier=void 0;let u=class{canCombineWithGraph(){return!0}async handle(o,i,t,e,r,a){let c;if(i.emittedStack[a+1]&&i.idStack[a+1])c=i.idStack[a+1][0];else{const l=await t.getContainerKey(e[a],e,a)!==null?await t.resourceToTerm(await i.getContext(e),e[a]):t.dataFactory.blankNode();if(!l){i.emittedStack[a]=!1;return}c=l,i.idStack[a+1]=[c]}let s=i.idStack[a];s||(s=i.idStack[a]=[]),s.some(d=>d.equals(c))||s.push(c),await i.handlePendingContainerFlushBuffers()||(i.emittedStack[a]=!1)}};return ym.ContainerHandlerIdentifier=u,ym}var bm={},_m={},aU;function lw(){if(aU)return _m;aU=1,Object.defineProperty(_m,"__esModule",{value:!0}),_m.EntryHandlerPredicate=void 0;const u=wr(),n=zc();let o=class hJ{static async handlePredicateObject(t,e,r,a,c,s,d,l,f){const h=await e.getPropertiesDepth(r,a),p=await e.getDepthOffsetGraph(a,r),y=a-p,_=t.idStack[h];if(_&&!f)for(const b of _)if(p>=0){const g=t.idStack[y-1];if(g)for(const T of g)e.emitQuadChecked(a,b,c,s,T,d,l);else d?(e.validateReverseSubject(s),t.getUnidentifiedGraphBufferSafe(y-1).push({subject:s,predicate:c,object:b,isEmbedded:l})):t.getUnidentifiedGraphBufferSafe(y-1).push({subject:b,predicate:c,object:s,isEmbedded:l})}else{const g=await e.getGraphContainerValue(r,h);e.emitQuadChecked(a,b,c,s,g,d,l)}else if(d&&e.validateReverseSubject(s),f){if(t.rdfstar){t.idStack[a]&&t.emitError(new u.ErrorCoded(`Found an illegal @id inside an annotation: ${t.idStack[a][0].value}`,u.ERROR_CODES.INVALID_ANNOTATION));for(let g=0;g<a;g++)await e.unaliasKeyword(r[g],r,g)==="@id"&&t.emitError(new u.ErrorCoded("Found an illegal annotation inside an embedded node",u.ERROR_CODES.INVALID_ANNOTATION));const b=t.getAnnotationsBufferSafe(h),m={predicate:c,object:s,reverse:d,nestedAnnotations:[],depth:h};b.push(m);for(let g=b.length-2;g>=0;g--){const T=b[g];T.depth>h&&(m.nestedAnnotations.push(T),b.splice(g,1))}}}else t.getUnidentifiedValueBufferSafe(h).push({predicate:c,object:s,reverse:d,isEmbedded:l})}isPropertyHandler(){return!0}isStackProcessor(){return!0}async validate(t,e,r,a,c){const s=r[a];if(s){const d=await t.getContext(r);if(!t.jsonLiteralStack[a]&&await e.predicateToTerm(d,r[a]))return n.Util.getContextValueType(d,s)==="@json"&&(t.jsonLiteralStack[a+1]=!0),!0}return!1}async test(t,e,r,a,c){return a[c]}async handle(t,e,r,a,c,s,d){const l=a[s],f=await t.getContext(a),h=await e.predicateToTerm(f,r);if(h){const p=await e.valueToTerm(f,r,c,s,a);if(p.length)for(let y of p){let _=await e.unaliasKeywordParent(a,s);const b=n.Util.isPropertyReverse(f,l,_);let m=0;for(;_==="@reverse"||typeof _=="number";)typeof _=="number"?m++:s--,_=await e.unaliasKeywordParent(a,s-m);const g=n.Util.isPropertyInEmbeddedNode(_);e.validateReverseInEmbeddedNode(r,b,g);const T=n.Util.isPropertyInAnnotationObject(_);if(c){const v="@list"in n.Util.getContextValueContainer(f,r);if(v||c["@list"]){if((v&&!Array.isArray(c)&&!c["@list"]||c["@list"]&&!Array.isArray(c["@list"]))&&y!==e.rdfNil){const S=e.dataFactory.blankNode();t.emitQuad(s,e.dataFactory.quad(S,e.rdfRest,e.rdfNil,e.getDefaultGraph())),t.emitQuad(s,e.dataFactory.quad(S,e.rdfFirst,y,e.getDefaultGraph())),y=S}if(b&&!t.allowSubjectList)throw new u.ErrorCoded(`Found illegal list value in subject position at ${r}`,u.ERROR_CODES.INVALID_REVERSE_PROPERTY_VALUE)}}await hJ.handlePredicateObject(t,e,a,s,h,y,b,g,T)}}}};return _m.EntryHandlerPredicate=o,_m}var uU;function Lse(){if(uU)return bm;uU=1,Object.defineProperty(bm,"__esModule",{value:!0}),bm.ContainerHandlerIndex=void 0;const u=wr(),n=lw(),o=zc();let i=class{canCombineWithGraph(){return!0}async handle(e,r,a,c,s,d){if(!Array.isArray(s)){const l="@graph"in e,f=await r.getContext(c),h=c[d-1],p=o.Util.getContextValueIndex(f,h);if(p){if(u.Util.isPotentialKeyword(p))throw new u.ErrorCoded(`Keywords can not be used as @index value, got: ${p}`,u.ERROR_CODES.INVALID_TERM_DEFINITION);if(typeof p!="string")throw new u.ErrorCoded(`@index values must be strings, got: ${p}`,u.ERROR_CODES.INVALID_TERM_DEFINITION);if(typeof s!="object"){if(o.Util.getContextValueType(f,h)!=="@id")throw new u.ErrorCoded(`Property-based index containers require nodes as values or strings with @type: @id, but got: ${s}`,u.ERROR_CODES.INVALID_VALUE_OBJECT);const b=a.resourceToTerm(f,s);b&&(r.idStack[d+1]=[b])}const _=a.createVocabOrBaseTerm(f,p);if(_){const b=await a.valueToTerm(f,p,await a.getContainerKey(c[d],c,d),d,c);if(l){const m=await a.getGraphContainerValue(c,d+1);for(const g of b)r.emitQuad(d,a.dataFactory.quad(m,_,g,a.getDefaultGraph()))}else for(const m of b)await n.EntryHandlerPredicate.handlePredicateObject(r,a,c,d+1,_,m,!1,!1,!1)}}const y=l?2:1;await r.newOnValueJob(c.slice(0,c.length-y),s,d-y,!0),await r.handlePendingContainerFlushBuffers()}r.emittedStack[d]=!1}};return bm.ContainerHandlerIndex=i,bm}var gm={},oU;function Mse(){if(oU)return gm;oU=1,Object.defineProperty(gm,"__esModule",{value:!0}),gm.ContainerHandlerLanguage=void 0;const u=wr();let n=class{canCombineWithGraph(){return!1}async handle(i,t,e,r,a,c){const s=await e.getContainerKey(r[c],r,c);if(Array.isArray(a))a=a.map(d=>({"@value":d,"@language":s}));else{if(typeof a!="string")throw new u.ErrorCoded(`Got invalid language map value, got '${JSON.stringify(a)}', but expected string`,u.ERROR_CODES.INVALID_LANGUAGE_MAP_VALUE);a={"@value":a,"@language":s}}await t.newOnValueJob(r.slice(0,r.length-1),a,c-1,!0),t.emittedStack[c]=!1}};return gm.ContainerHandlerLanguage=n,gm}var mm={},sU;function qse(){if(sU)return mm;sU=1,Object.defineProperty(mm,"__esModule",{value:!0}),mm.ContainerHandlerType=void 0;const u=lw(),n=zc();let o=class{canCombineWithGraph(){return!1}async handle(t,e,r,a,c,s){if(!Array.isArray(c)){if(typeof c=="string"){const f=await e.getContext(a),p=n.Util.getContextValueType(f,a[s-1])==="@vocab"?await r.createVocabOrBaseTerm(f,c):await r.resourceToTerm(f,c);if(p){const y={"@id":p.termType==="NamedNode"?p.value:c};await e.newOnValueJob(a.slice(0,a.length-1),y,s-1,!0),e.idStack[s+1]=[p]}}else{const f=!!e.idStack[s+1];f||delete e.idStack[s],await e.newOnValueJob(a.slice(0,a.length-1),c,s-1,!0),f||(e.idStack[s+1]=e.idStack[s])}const d=await r.getContainerKey(a[s],a,s),l=d!==null?r.createVocabOrBaseTerm(await e.getContext(a),d):null;l&&await u.EntryHandlerPredicate.handlePredicateObject(e,r,a,s+1,r.rdfType,l,!1,!1,!1),await e.handlePendingContainerFlushBuffers()}e.emittedStack[s]=!1}};return mm.ContainerHandlerType=o,mm}var cU;function dU(){if(cU)return pm;cU=1,Object.defineProperty(pm,"__esModule",{value:!0}),pm.EntryHandlerContainer=void 0;const u=jse(),n=Lse(),o=Mse(),i=qse(),t=zc();let e=class sa{static isSimpleGraphContainer(a){return"@graph"in a&&("@set"in a&&Object.keys(a).length===2||Object.keys(a).length===1)}static isComplexGraphContainer(a){return"@graph"in a&&("@set"in a&&Object.keys(a).length>2||!("@set"in a)&&Object.keys(a).length>1)}static getContainerGraphIndex(a,c,s){let d=sa.isSimpleGraphContainer(a),l="";for(let f=c;f<s.length;f++)(!d||typeof s[f]=="number")&&(l+=":"+s[f]),!d&&typeof s[f]!="number"&&(d=!0);return l}static async getContainerHandler(a,c,s){const d={containers:{"@set":!0},depth:s,fallback:!0};let l=!1;const f=await a.getContext(c,2);for(let h=s-1;h>=0;h--)if(typeof c[h]!="number"){const p=t.Util.getContextValue(f,"@container",c[h],!1);if(p&&sa.isSimpleGraphContainer(p))return{containers:p,depth:h+1,fallback:!1};const y=t.Util.getContextValue(f,"@container",c[h-1],!1);if(y){const _="@graph"in y;for(const b in sa.CONTAINER_HANDLERS)if(y[b])return _?sa.CONTAINER_HANDLERS[b].canCombineWithGraph()?{containers:y,depth:h,fallback:!1}:d:l?d:{containers:y,depth:h,fallback:!1};return d}else{if(l)return d;l=!0}}return d}static async isBufferableContainerHandler(a,c,s){const d=await sa.getContainerHandler(a,c,s);return!d.fallback&&!("@graph"in d.containers)}isPropertyHandler(){return!1}isStackProcessor(){return!0}async validate(a,c,s,d,l){return!!await this.test(a,c,null,s,d)}async test(a,c,s,d,l){const f=t.Util.getContextValueContainer(await a.getContext(d,2),d[l-1]);for(const h in sa.CONTAINER_HANDLERS)if(f[h])return{containers:f,handler:sa.CONTAINER_HANDLERS[h]};return null}async handle(a,c,s,d,l,f,h){return h.handler.handle(h.containers,a,c,d,l,f)}};return e.CONTAINER_HANDLERS={"@id":new u.ContainerHandlerIdentifier,"@index":new n.ContainerHandlerIndex,"@language":new o.ContainerHandlerLanguage,"@type":new i.ContainerHandlerType},pm.EntryHandlerContainer=e,pm}var EE,lU;function Cse(){return lU||(lU=1,EE=function u(n){return n===null||typeof n!="object"||n.toJSON!=null?JSON.stringify(n):Array.isArray(n)?"["+n.reduce((o,i,t)=>{const e=t===0?"":",",r=i===void 0||typeof i=="symbol"?null:i;return o+e+u(r)},"")+"]":"{"+Object.keys(n).sort().reduce((o,i,t)=>{if(n[i]===void 0||typeof n[i]=="symbol")return o;const e=o.length===0?"":",";return o+e+u(i)+":"+u(n[i])},"")+"}"}),EE}var fU;function zc(){if(fU)return hm;fU=1,Object.defineProperty(hm,"__esModule",{value:!0}),hm.Util=void 0;const u=wr(),n=hr(),o=dU(),i=Cse();class t{constructor(r){this.parsingContext=r.parsingContext,this.dataFactory=r.dataFactory||new n.DataFactory,this.rdfFirst=this.dataFactory.namedNode(t.RDF+"first"),this.rdfRest=this.dataFactory.namedNode(t.RDF+"rest"),this.rdfNil=this.dataFactory.namedNode(t.RDF+"nil"),this.rdfType=this.dataFactory.namedNode(t.RDF+"type"),this.rdfJson=this.dataFactory.namedNode(t.RDF+"JSON")}static getContextValue(r,a,c,s){const d=r.getContextRaw()[c];if(!d)return s;const l=d[a];return l===void 0?s:l}static getContextValueContainer(r,a){return t.getContextValue(r,"@container",a,{"@set":!0})}static getContextValueType(r,a){const c=t.getContextValue(r,"@type",a,null);return c==="@none"?null:c}static getContextValueLanguage(r,a){return t.getContextValue(r,"@language",a,r.getContextRaw()["@language"]||null)}static getContextValueDirection(r,a){return t.getContextValue(r,"@direction",a,r.getContextRaw()["@direction"]||null)}static isContextValueReverse(r,a){return!!t.getContextValue(r,"@reverse",a,null)}static getContextValueIndex(r,a){return t.getContextValue(r,"@index",a,r.getContextRaw()["@index"]||null)}static isPropertyReverse(r,a,c){return c==="@reverse"!==t.isContextValueReverse(r,a)}static isPropertyInEmbeddedNode(r){return r==="@id"}static isPropertyInAnnotationObject(r){return r==="@annotation"}static isValidIri(r){return r!==null&&u.Util.isValidIri(r)}static isPrefixArray(r,a){if(r.length>a.length)return!1;for(let c=0;c<r.length;c++)if(r[c]!==a[c])return!1;return!0}async validateValueIndexes(r){if(this.parsingContext.validateValueIndexes){const a={};for(const c of r)if(c&&typeof c=="object"){const s=c["@id"],d=c["@index"];if(s&&d){const l=a[s];if(l&&l!==d)throw new u.ErrorCoded(`Conflicting @index value for ${s}`,u.ERROR_CODES.CONFLICTING_INDEXES);a[s]=d}}}}async valueToTerm(r,a,c,s,d){if(t.getContextValueType(r,a)==="@json")return[this.dataFactory.literal(this.valueToJsonString(c),this.rdfJson)];const l=typeof c;switch(l){case"object":if(c==null)return[];if(Array.isArray(c))return"@list"in t.getContextValueContainer(r,a)?c.length===0?[this.rdfNil]:this.parsingContext.idStack[s+1]||[]:(await this.validateValueIndexes(c),[]);if(r=await this.getContextSelfOrPropertyScoped(r,a),"@context"in c&&(r=await this.parsingContext.parseContext(c["@context"],(await this.parsingContext.getContext(d,0)).getContextRaw())),c=await this.unaliasKeywords(c,d,s,r),"@value"in c){let f,h,p,y,_;for(a in c){const b=c[a];switch(a){case"@value":f=b;break;case"@language":h=b;break;case"@direction":p=b;break;case"@type":y=b;break;case"@index":_=b;break;case"@annotation":break;default:throw new u.ErrorCoded(`Unknown value entry '${a}' in @value: ${JSON.stringify(c)}`,u.ERROR_CODES.INVALID_VALUE_OBJECT)}}if(await this.unaliasKeyword(y,d,s,!0,r)==="@json")return[this.dataFactory.literal(this.valueToJsonString(f),this.rdfJson)];if(f===null)return[];if(typeof f=="object")throw new u.ErrorCoded(`The value of an '@value' can not be an object, got '${JSON.stringify(f)}'`,u.ERROR_CODES.INVALID_VALUE_OBJECT_VALUE);if(this.parsingContext.validateValueIndexes&&_&&typeof _!="string")throw new u.ErrorCoded(`The value of an '@index' must be a string, got '${JSON.stringify(_)}'`,u.ERROR_CODES.INVALID_INDEX_VALUE);if(h){if(typeof f!="string")throw new u.ErrorCoded(`When an '@language' is set, the value of '@value' must be a string, got '${JSON.stringify(f)}'`,u.ERROR_CODES.INVALID_LANGUAGE_TAGGED_VALUE);if(!u.ContextParser.validateLanguage(h,this.parsingContext.strictValues,u.ERROR_CODES.INVALID_LANGUAGE_TAGGED_STRING))return[];(this.parsingContext.normalizeLanguageTags||this.parsingContext.activeProcessingMode===1)&&(h=h.toLowerCase())}if(p){if(typeof f!="string")throw new Error(`When an '@direction' is set, the value of '@value' must be a string, got '${JSON.stringify(f)}'`);if(!u.ContextParser.validateDirection(p,this.parsingContext.strictValues))return[]}if(h&&p&&this.parsingContext.rdfDirection){if(y)throw new u.ErrorCoded(`Can not have '@language', '@direction' and '@type' in a value: '${JSON.stringify(c)}'`,u.ERROR_CODES.INVALID_VALUE_OBJECT);return this.nullableTermToArray(this.createLanguageDirectionLiteral(s,f,h,p))}else if(h){if(y)throw new u.ErrorCoded(`Can not have both '@language' and '@type' in a value: '${JSON.stringify(c)}'`,u.ERROR_CODES.INVALID_VALUE_OBJECT);return[this.dataFactory.literal(f,h)]}else if(p&&this.parsingContext.rdfDirection){if(y)throw new u.ErrorCoded(`Can not have both '@direction' and '@type' in a value: '${JSON.stringify(c)}'`,u.ERROR_CODES.INVALID_VALUE_OBJECT);return this.nullableTermToArray(this.createLanguageDirectionLiteral(s,f,h,p))}else if(y){if(typeof y!="string")throw new u.ErrorCoded(`The value of an '@type' must be a string, got '${JSON.stringify(y)}'`,u.ERROR_CODES.INVALID_TYPED_VALUE);const b=this.createVocabOrBaseTerm(r,y);if(!b)throw new u.ErrorCoded(`Invalid '@type' value, got '${JSON.stringify(y)}'`,u.ERROR_CODES.INVALID_TYPED_VALUE);if(b.termType!=="NamedNode")throw new u.ErrorCoded(`Illegal value type (${b.termType}): ${y}`,u.ERROR_CODES.INVALID_TYPED_VALUE);return[this.dataFactory.literal(f,b)]}return await this.valueToTerm(new u.JsonLdContextNormalized({}),a,f,s,d)}else if("@set"in c){if(Object.keys(c).length>1)throw new u.ErrorCoded(`Found illegal neighbouring entries next to @set for key: '${a}'`,u.ERROR_CODES.INVALID_SET_OR_LIST_OBJECT);return[]}else if("@list"in c){if(Object.keys(c).length>1)throw new u.ErrorCoded(`Found illegal neighbouring entries next to @list for key: '${a}'`,u.ERROR_CODES.INVALID_SET_OR_LIST_OBJECT);const f=c["@list"];return Array.isArray(f)?f.length===0?[this.rdfNil]:this.parsingContext.idStack[s+1]||[]:await this.valueToTerm(await this.parsingContext.getContext(d),a,f,s-1,d.slice(0,-1))}else{if("@reverse"in c&&typeof c["@reverse"]=="boolean")return[];if("@graph"in t.getContextValueContainer(await this.parsingContext.getContext(d),a)){const f=this.parsingContext.graphContainerTermStack[s+1];return f?Object.values(f):[this.dataFactory.blankNode()]}else if("@id"in c){if(Object.keys(c).length>1&&(r=await this.parsingContext.getContext(d,0)),"@context"in c&&(r=await this.parsingContext.parseContext(c["@context"],r.getContextRaw())),c["@type"]==="@vocab")return this.nullableTermToArray(this.createVocabOrBaseTerm(r,c["@id"]));{const f=c["@id"];let h;if(typeof f=="object")if(this.parsingContext.rdfstar)h=this.parsingContext.idStack[s+1][0];else throw new u.ErrorCoded(`Found illegal @id '${c}'`,u.ERROR_CODES.INVALID_ID_VALUE);else h=this.resourceToTerm(r,f);return this.nullableTermToArray(h)}}else return this.parsingContext.emittedStack[s+1]||c&&typeof c=="object"&&Object.keys(c).length===0?this.parsingContext.idStack[s+1]||(this.parsingContext.idStack[s+1]=[this.dataFactory.blankNode()]):[]}case"string":return this.nullableTermToArray(this.stringValueToTerm(s,await this.getContextSelfOrPropertyScoped(r,a),a,c,null));case"boolean":return this.nullableTermToArray(this.stringValueToTerm(s,await this.getContextSelfOrPropertyScoped(r,a),a,(!!c).toString(),this.dataFactory.namedNode(t.XSD_BOOLEAN)));case"number":return this.nullableTermToArray(this.stringValueToTerm(s,await this.getContextSelfOrPropertyScoped(r,a),a,c,this.dataFactory.namedNode(c%1===0&&c<1e21?t.XSD_INTEGER:t.XSD_DOUBLE)));default:return this.parsingContext.emitError(new Error(`Could not determine the RDF type of a ${l}`)),[]}}async getContextSelfOrPropertyScoped(r,a){const c=r.getContextRaw()[a];return c&&typeof c=="object"&&"@context"in c&&(r=await this.parsingContext.parseContext(c,r.getContextRaw(),!0)),r}nullableTermToArray(r){return r?[r]:[]}predicateToTerm(r,a){const c=r.expandTerm(a,!0,this.parsingContext.getExpandOptions());if(!c)return null;if(c[0]==="_"&&c[1]===":")return this.parsingContext.produceGeneralizedRdf?this.dataFactory.blankNode(c.substr(2)):null;if(t.isValidIri(c))return this.dataFactory.namedNode(c);if(c&&this.parsingContext.strictValues)this.parsingContext.emitError(new u.ErrorCoded(`Invalid predicate IRI: ${c}`,u.ERROR_CODES.INVALID_IRI_MAPPING));else return null;return null}resourceToTerm(r,a){if(a.startsWith("_:"))return this.dataFactory.blankNode(a.substr(2));const c=r.expandTerm(a,!1,this.parsingContext.getExpandOptions());if(!t.isValidIri(c))if(c&&this.parsingContext.strictValues)this.parsingContext.emitError(new Error(`Invalid resource IRI: ${c}`));else return null;return this.dataFactory.namedNode(c)}createVocabOrBaseTerm(r,a){if(a.startsWith("_:"))return this.dataFactory.blankNode(a.substr(2));const c=this.parsingContext.getExpandOptions();let s=r.expandTerm(a,!0,c);if(s===a&&(s=r.expandTerm(a,!1,c)),!t.isValidIri(s))if(s&&this.parsingContext.strictValues&&!s.startsWith("@"))this.parsingContext.emitError(new Error(`Invalid term IRI: ${s}`));else return null;return this.dataFactory.namedNode(s)}intToString(r,a){return typeof r=="number"?Number.isFinite(r)?r%1===0&&(!a||a.value!==t.XSD_DOUBLE)?Number(r).toString():r.toExponential(15).replace(/(\d)0*e\+?/,"$1E"):r>0?"INF":"-INF":r}stringValueToTerm(r,a,c,s,d){const l=t.getContextValueType(a,c);if(l)if(l==="@id"){if(!d)return this.resourceToTerm(a,this.intToString(s,d))}else if(l==="@vocab"){if(!d)return this.createVocabOrBaseTerm(a,this.intToString(s,d))}else d=this.dataFactory.namedNode(l);if(!d){const f=t.getContextValueLanguage(a,c),h=t.getContextValueDirection(a,c);return h&&this.parsingContext.rdfDirection?this.createLanguageDirectionLiteral(r,this.intToString(s,d),f,h):this.dataFactory.literal(this.intToString(s,d),f)}return this.dataFactory.literal(this.intToString(s,d),d)}createLanguageDirectionLiteral(r,a,c,s){if(this.parsingContext.rdfDirection==="i18n-datatype")return c||(c=""),this.dataFactory.literal(a,this.dataFactory.namedNode(`https://www.w3.org/ns/i18n#${c}_${s}`));{const d=this.dataFactory.blankNode(),l=this.getDefaultGraph();return this.parsingContext.emitQuad(r,this.dataFactory.quad(d,this.dataFactory.namedNode(t.RDF+"value"),this.dataFactory.literal(a),l)),c&&this.parsingContext.emitQuad(r,this.dataFactory.quad(d,this.dataFactory.namedNode(t.RDF+"language"),this.dataFactory.literal(c),l)),this.parsingContext.emitQuad(r,this.dataFactory.quad(d,this.dataFactory.namedNode(t.RDF+"direction"),this.dataFactory.literal(s),l)),d}}valueToJsonString(r){return i(r)}async unaliasKeyword(r,a,c,s,d){if(Number.isInteger(r))return r;if(!s){const l=this.parsingContext.unaliasedKeywordCacheStack[c];if(l)return l}if(!u.Util.isPotentialKeyword(r)){d=d||await this.parsingContext.getContext(a);let l=d.getContextRaw()[r];l&&typeof l=="object"&&(l=l["@id"]),u.Util.isValidKeyword(l)&&(r=l)}return s?r:this.parsingContext.unaliasedKeywordCacheStack[c]=r}async unaliasKeywordParent(r,a){return await this.unaliasKeyword(a>0&&r[a-1],r,a-1)}async unaliasKeywords(r,a,c,s){const d={};for(const l in r)d[await this.unaliasKeyword(l,a,c+1,!0,s)]=r[l];return d}async isLiteral(r,a){for(let c=a;c>=0;c--){if(await this.unaliasKeyword(r[c],r,c)==="@annotation")return!1;if(this.parsingContext.literalStack[c]||this.parsingContext.jsonLiteralStack[c])return!0}return!1}async getDepthOffsetGraph(r,a){for(let c=r-1;c>0;c--)if(await this.unaliasKeyword(a[c],a,c)==="@graph"){const s=(await o.EntryHandlerContainer.getContainerHandler(this.parsingContext,a,c)).containers;return o.EntryHandlerContainer.isComplexGraphContainer(s)?-1:r-c-1}return-1}validateReverseSubject(r){if(r.termType==="Literal")throw new u.ErrorCoded(`Found illegal literal in subject position: ${r.value}`,u.ERROR_CODES.INVALID_REVERSE_PROPERTY_VALUE)}getDefaultGraph(){return this.parsingContext.defaultGraph||this.dataFactory.defaultGraph()}async getGraphContainerValue(r,a){let c=this.getDefaultGraph();const{containers:s,depth:d}=await o.EntryHandlerContainer.getContainerHandler(this.parsingContext,r,a);if("@graph"in s){const l=o.EntryHandlerContainer.getContainerGraphIndex(s,d,r),f=this.parsingContext.graphContainerTermStack[d];if(c=f?f[l]:null,!c){let h=null;if("@id"in s){const p=await this.getContainerKey(r[d],r,d);p!==null&&(h=await this.resourceToTerm(await this.parsingContext.getContext(r),p))}h||(h=this.dataFactory.blankNode()),this.parsingContext.graphContainerTermStack[d]||(this.parsingContext.graphContainerTermStack[d]={}),c=this.parsingContext.graphContainerTermStack[d][l]=h}}return c}async getPropertiesDepth(r,a){let c=a;for(let s=a-1;s>0;s--)if(typeof r[s]!="number"){const d=await this.unaliasKeyword(r[s],r,s);if(d==="@reverse")return s;if(d==="@nest")c=s;else return c}return c}async getContainerKey(r,a,c){const s=await this.unaliasKeyword(r,a,c);return s==="@none"?null:s}validateReverseInEmbeddedNode(r,a,c){if(c&&a&&!this.parsingContext.rdfstarReverseInEmbedded)throw new u.ErrorCoded(`Illegal reverse property in embedded node in ${r}`,u.ERROR_CODES.INVALID_EMBEDDED_NODE)}emitQuadChecked(r,a,c,s,d,l,f){let h;if(l?(this.validateReverseSubject(s),h=this.dataFactory.quad(s,c,a,d)):h=this.dataFactory.quad(a,c,s,d),f){if(h.graph.termType!=="DefaultGraph"&&(h=this.dataFactory.quad(h.subject,h.predicate,h.object)),this.parsingContext.idStack[r-1])throw new u.ErrorCoded("Illegal multiple properties in an embedded node",u.ERROR_CODES.INVALID_EMBEDDED_NODE);this.parsingContext.idStack[r-1]=[h]}else this.parsingContext.emitQuad(r,h);const p=this.parsingContext.annotationsBuffer[r];if(p){for(const y of p)this.emitAnnotation(r,h,y);delete this.parsingContext.annotationsBuffer[r]}}emitAnnotation(r,a,c){let s;c.reverse?(this.validateReverseSubject(c.object),s=this.dataFactory.quad(c.object,c.predicate,a)):s=this.dataFactory.quad(a,c.predicate,c.object),this.parsingContext.emitQuad(r,s);for(const d of c.nestedAnnotations)this.emitAnnotation(r,s,d)}}return t.XSD="http://www.w3.org/2001/XMLSchema#",t.XSD_BOOLEAN=t.XSD+"boolean",t.XSD_INTEGER=t.XSD+"integer",t.XSD_DOUBLE=t.XSD+"double",t.RDF="http://www.w3.org/1999/02/22-rdf-syntax-ns#",hm.Util=t,hm}var hU;function Bse(){if(hU)return fm;hU=1,Object.defineProperty(fm,"__esModule",{value:!0}),fm.EntryHandlerArrayValue=void 0;const u=zc(),n=wr();let o=class{isPropertyHandler(){return!1}isStackProcessor(){return!0}async validate(t,e,r,a,c){return this.test(t,e,null,r,a)}async test(t,e,r,a,c){return typeof a[c]=="number"}async handle(t,e,r,a,c,s){let d=await e.unaliasKeywordParent(a,s);if(d==="@list"){let l=null,f=0;for(let h=s-2;h>0;h--){const p=a[h];if(typeof p=="string"||typeof p=="number"){f=h,l=p;break}}if(l!==null){const h=await e.valueToTerm(await t.getContext(a),l,c,s,a);for(const p of h)await this.handleListElement(t,e,p,c,s,a.slice(0,f),f);h.length===0&&await this.handleListElement(t,e,null,c,s,a.slice(0,f),f)}}else if(d==="@set")await t.newOnValueJob(a.slice(0,-2),c,s-2,!1);else if(d!==void 0&&d!=="@type"){for(let f=s-1;f>0;f--)if(typeof a[f]!="number"){d=await e.unaliasKeyword(a[f],a,f);break}const l=await t.getContext(a.slice(0,-1));if("@list"in u.Util.getContextValueContainer(l,d)){t.emittedStack[s+1]=!0;const f=await e.valueToTerm(await t.getContext(a),d,c,s,a);for(const h of f)await this.handleListElement(t,e,h,c,s,a.slice(0,-1),s-1);f.length===0&&await this.handleListElement(t,e,null,c,s,a.slice(0,-1),s-1)}else t.shiftStack(s,1),await t.newOnValueJob(a.slice(0,-1),c,s-1,!1),t.contextTree.removeContext(a.slice(0,-1))}}async handleListElement(t,e,r,a,c,s,d){let l=t.listPointerStack[c];if(a!==null&&(await e.unaliasKeywords(a,s,c))["@value"]!==null){if(!l||!l.value){const f=e.dataFactory.blankNode();l={value:f,listRootDepth:d,listId:f}}else{const f=e.dataFactory.blankNode();t.emitQuad(c,e.dataFactory.quad(l.value,e.rdfRest,f,e.getDefaultGraph())),l.value=f}r&&t.emitQuad(c,e.dataFactory.quad(l.value,e.rdfFirst,r,e.getDefaultGraph()))}else l||(l={listRootDepth:d,listId:e.rdfNil});t.listPointerStack[c]=l,t.rdfstar&&t.annotationsBuffer[c]&&t.emitError(new n.ErrorCoded("Found an illegal annotation inside a list",n.ERROR_CODES.INVALID_ANNOTATION))}};return fm.EntryHandlerArrayValue=o,fm}var vm={},pU;function $se(){if(pU)return vm;pU=1,Object.defineProperty(vm,"__esModule",{value:!0}),vm.EntryHandlerInvalidFallback=void 0;let u=class{isPropertyHandler(){return!1}isStackProcessor(){return!0}async validate(o,i,t,e,r){return!1}async test(o,i,t,e,r){return!0}async handle(o,i,t,e,r,a){o.emittedStack[a]=!1}};return vm.EntryHandlerInvalidFallback=u,vm}var Tm={},wm={},yU;function Yi(){if(yU)return wm;yU=1,Object.defineProperty(wm,"__esModule",{value:!0}),wm.EntryHandlerKeyword=void 0;let u=class{constructor(o){this.keyword=o}isPropertyHandler(){return!1}isStackProcessor(){return!0}async validate(o,i,t,e,r){return!1}async test(o,i,t,e,r){return t===this.keyword}};return wm.EntryHandlerKeyword=u,wm}var bU;function Use(){if(bU)return Tm;bU=1,Object.defineProperty(Tm,"__esModule",{value:!0}),Tm.EntryHandlerKeywordContext=void 0;const u=wr(),n=Yi();let o=class extends n.EntryHandlerKeyword{constructor(){super("@context")}isStackProcessor(){return!1}async handle(t,e,r,a,c,s){t.streamingProfile&&(t.processingStack[s]||t.processingType[s]||t.idStack[s]!==void 0)&&t.emitError(new u.ErrorCoded("Found an out-of-order context, while streaming is enabled.(disable `streamingProfile`)",u.ERROR_CODES.INVALID_STREAMING_KEY_ORDER));const d=t.getContext(a),l=t.parseContext(c,(await d).getContextRaw());t.contextTree.setContext(a.slice(0,-1),l),t.emitContext(c),await t.validateContext(await l)}};return Tm.EntryHandlerKeywordContext=o,Tm}var Sm={},_U;function Vse(){if(_U)return Sm;_U=1,Object.defineProperty(Sm,"__esModule",{value:!0}),Sm.EntryHandlerKeywordGraph=void 0;const u=Yi();let n=class extends u.EntryHandlerKeyword{constructor(){super("@graph")}async handle(i,t,e,r,a,c){i.graphStack[c+1]=!0}};return Sm.EntryHandlerKeywordGraph=n,Sm}var Om={},gU;function Qse(){if(gU)return Om;gU=1,Object.defineProperty(Om,"__esModule",{value:!0}),Om.EntryHandlerKeywordId=void 0;const u=wr(),n=Yi();let o=class extends n.EntryHandlerKeyword{constructor(){super("@id")}isStackProcessor(){return!1}async handle(t,e,r,a,c,s){if(typeof c!="string"){if(t.rdfstar&&typeof c=="object"){const l=Object.keys(c);l.length===1&&l[0]==="@id"&&t.emitError(new u.ErrorCoded(`Invalid embedded node without property with @id ${c["@id"]}`,u.ERROR_CODES.INVALID_EMBEDDED_NODE))}else t.emitError(new u.ErrorCoded(`Found illegal @id '${c}'`,u.ERROR_CODES.INVALID_ID_VALUE));return}const d=await e.getPropertiesDepth(a,s);if(t.idStack[d]!==void 0&&(t.idStack[d][0].listHead?t.emitError(new u.ErrorCoded(`Found illegal neighbouring entries next to @list for key: '${a[s-1]}'`,u.ERROR_CODES.INVALID_SET_OR_LIST_OBJECT)):t.emitError(new u.ErrorCoded(`Found duplicate @ids '${t.idStack[d][0].value}' and '${c}'`,u.ERROR_CODES.COLLIDING_KEYWORDS))),t.rdfstar&&t.annotationsBuffer[s])for(const l of t.annotationsBuffer[s])l.depth===s&&t.emitError(new u.ErrorCoded(`Found an illegal @id inside an annotation: ${c}`,u.ERROR_CODES.INVALID_ANNOTATION));t.idStack[d]=e.nullableTermToArray(await e.resourceToTerm(await t.getContext(a),c))}};return Om.EntryHandlerKeywordId=o,Om}var Am={},mU;function Hse(){if(mU)return Am;mU=1,Object.defineProperty(Am,"__esModule",{value:!0}),Am.EntryHandlerKeywordIncluded=void 0;const u=wr(),n=Yi();let o=class extends n.EntryHandlerKeyword{constructor(){super("@included")}async handle(t,e,r,a,c,s){typeof c!="object"&&t.emitError(new u.ErrorCoded(`Found illegal @included '${c}'`,u.ERROR_CODES.INVALID_INCLUDED_VALUE));const d=await e.unaliasKeywords(c,a,s,await t.getContext(a));"@value"in d&&t.emitError(new u.ErrorCoded(`Found an illegal @included @value node '${JSON.stringify(c)}'`,u.ERROR_CODES.INVALID_INCLUDED_VALUE)),"@list"in d&&t.emitError(new u.ErrorCoded(`Found an illegal @included @list node '${JSON.stringify(c)}'`,u.ERROR_CODES.INVALID_INCLUDED_VALUE)),t.emittedStack[s]=!1}};return Am.EntryHandlerKeywordIncluded=o,Am}var Em={},vU;function Gse(){if(vU)return Em;vU=1,Object.defineProperty(Em,"__esModule",{value:!0}),Em.EntryHandlerKeywordNest=void 0;const u=wr(),n=Yi();let o=class extends n.EntryHandlerKeyword{constructor(){super("@nest")}async handle(t,e,r,a,c,s){typeof c!="object"&&t.emitError(new u.ErrorCoded(`Found invalid @nest entry for '${r}': '${c}'`,u.ERROR_CODES.INVALID_NEST_VALUE)),"@value"in await e.unaliasKeywords(c,a,s,await t.getContext(a))&&t.emitError(new u.ErrorCoded(`Found an invalid @value node for '${r}'`,u.ERROR_CODES.INVALID_NEST_VALUE)),t.emittedStack[s]=!1}};return Em.EntryHandlerKeywordNest=o,Em}var xm={},TU;function zse(){if(TU)return xm;TU=1,Object.defineProperty(xm,"__esModule",{value:!0}),xm.EntryHandlerKeywordType=void 0;const u=wr(),n=zc(),o=lw(),i=Yi();let t=class extends i.EntryHandlerKeyword{constructor(){super("@type")}isStackProcessor(){return!1}async handle(r,a,c,s,d,l){const f=s[l],h=await r.getContext(s),p=a.rdfType,y=await a.unaliasKeywordParent(s,l),_=n.Util.isPropertyReverse(h,f,y),b=n.Util.isPropertyInEmbeddedNode(y);a.validateReverseInEmbeddedNode(c,_,b);const m=n.Util.isPropertyInAnnotationObject(y),g=Array.isArray(d)?d:[d];for(const S of g){typeof S!="string"&&r.emitError(new u.ErrorCoded(`Found illegal @type '${S}'`,u.ERROR_CODES.INVALID_TYPE_VALUE));const F=a.createVocabOrBaseTerm(h,S);F&&await o.EntryHandlerPredicate.handlePredicateObject(r,a,s,l,p,F,_,b,m)}let T=Promise.resolve(h),v=!1;for(const S of g.sort()){const F=n.Util.getContextValue(h,"@context",S,null);F&&(v=!0,T=T.then(M=>r.parseContext(F,M.getContextRaw())))}r.streamingProfile&&(v||!r.streamingProfileAllowOutOfOrderPlainType)&&(r.processingStack[l]||r.idStack[l])&&r.emitError(new u.ErrorCoded("Found an out-of-order type-scoped context, while streaming is enabled.(disable `streamingProfile`)",u.ERROR_CODES.INVALID_STREAMING_KEY_ORDER)),v&&(T=T.then(S=>S.getContextRaw()["@propagate"]!==!0?new u.JsonLdContextNormalized(Object.assign(Object.assign({},S.getContextRaw()),{"@propagate":!1,"@__propagateFallback":h.getContextRaw()})):S),r.contextTree.setContext(s.slice(0,s.length-1),T)),r.processingType[l]=!0}};return xm.EntryHandlerKeywordType=t,xm}var Rm={},wU;function Xse(){if(wU)return Rm;wU=1,Object.defineProperty(Rm,"__esModule",{value:!0}),Rm.EntryHandlerKeywordUnknownFallback=void 0;const u=wr();let n=class pJ{isPropertyHandler(){return!1}isStackProcessor(){return!0}async validate(i,t,e,r,a){const c=await t.unaliasKeyword(e[r],e,r);return u.Util.isPotentialKeyword(c)?!(!a&&c==="@list"):!1}async test(i,t,e,r,a){return u.Util.isPotentialKeyword(e)}async handle(i,t,e,r,a,c){const s=pJ.VALID_KEYWORDS_TYPES[e];s!==void 0?s&&typeof a!==s.type&&i.emitError(new u.ErrorCoded(`Invalid value type for '${e}' with value '${a}'`,s.errorCode)):i.strictValues&&i.emitError(new Error(`Unknown keyword '${e}' with value '${a}'`)),i.emittedStack[c]=!1}};return n.VALID_KEYWORDS_TYPES={"@index":{type:"string",errorCode:u.ERROR_CODES.INVALID_INDEX_VALUE},"@list":null,"@reverse":{type:"object",errorCode:u.ERROR_CODES.INVALID_REVERSE_VALUE},"@set":null,"@value":null},Rm.EntryHandlerKeywordUnknownFallback=n,Rm}var Fm={},SU;function Jse(){if(SU)return Fm;SU=1,Object.defineProperty(Fm,"__esModule",{value:!0}),Fm.EntryHandlerKeywordValue=void 0;const u=Yi();let n=class extends u.EntryHandlerKeyword{constructor(){super("@value")}async validate(i,t,e,r,a){const c=e[r];return c&&!i.literalStack[r]&&await this.test(i,t,c,e,r)&&(i.literalStack[r]=!0),super.validate(i,t,e,r,a)}async test(i,t,e,r,a){return await t.unaliasKeyword(r[a],r.slice(0,r.length-1),a-1,!0)==="@value"}async handle(i,t,e,r,a,c){i.literalStack[c]=!0,delete i.unidentifiedValuesBuffer[c],delete i.unidentifiedGraphsBuffer[c],i.emittedStack[c]=!1}};return Fm.EntryHandlerKeywordValue=n,Fm}var Im={},Pm={},OU;function Kse(){if(OU)return Pm;OU=1,Object.defineProperty(Pm,"__esModule",{value:!0}),Pm.ContextTree=void 0;let u=class yJ{constructor(){this.subTrees={}}getContext(o){if(o.length>0){const[i,...t]=o,e=this.subTrees[i];if(e){const r=e.getContext(t);if(r)return r.then(({context:a,depth:c})=>({context:a,depth:c+1}))}}return this.context?this.context.then(i=>({context:i,depth:0})):null}setContext(o,i){if(o.length===0)this.context=i;else{const[t,...e]=o;let r=this.subTrees[t];r||(r=this.subTrees[t]=new yJ),r.setContext(e,i)}}removeContext(o){this.setContext(o,null)}};return Pm.ContextTree=u,Pm}var AU;function kse(){if(AU)return Im;AU=1,Object.defineProperty(Im,"__esModule",{value:!0}),Im.ParsingContext=void 0;const u=wr(),n=l0(),o=Kse(),i=RU();let t=class bJ{constructor(r){this.contextParser=new u.ContextParser({documentLoader:r.documentLoader,skipValidation:r.skipContextValidation}),this.streamingProfile=!!r.streamingProfile,this.baseIRI=r.baseIRI,this.produceGeneralizedRdf=!!r.produceGeneralizedRdf,this.allowSubjectList=!!r.allowSubjectList,this.processingMode=r.processingMode||i.JsonLdParser.DEFAULT_PROCESSING_MODE,this.strictValues=!!r.strictValues,this.validateValueIndexes=!!r.validateValueIndexes,this.defaultGraph=r.defaultGraph,this.rdfDirection=r.rdfDirection,this.normalizeLanguageTags=r.normalizeLanguageTags,this.streamingProfileAllowOutOfOrderPlainType=r.streamingProfileAllowOutOfOrderPlainType,this.rdfstar=r.rdfstar!==!1,this.rdfstarReverseInEmbedded=r.rdfstarReverseInEmbedded,this.topLevelProperties=!1,this.activeProcessingMode=parseFloat(this.processingMode),this.processingStack=[],this.processingType=[],this.emittedStack=[],this.idStack=[],this.graphStack=[],this.graphContainerTermStack=[],this.listPointerStack=[],this.contextTree=new o.ContextTree,this.literalStack=[],this.validationStack=[],this.unaliasedKeywordCacheStack=[],this.jsonLiteralStack=[],this.unidentifiedValuesBuffer=[],this.unidentifiedGraphsBuffer=[],this.annotationsBuffer=[],this.pendingContainerFlushBuffers=[],this.parser=r.parser,r.context?(this.rootContext=this.parseContext(r.context),this.rootContext.then(a=>this.validateContext(a))):this.rootContext=Promise.resolve(new u.JsonLdContextNormalized(this.baseIRI?{"@base":this.baseIRI,"@__baseDocument":!0}:{}))}async parseContext(r,a,c){return this.contextParser.parse(r,{baseIRI:this.baseIRI,ignoreProtection:c,normalizeLanguageTags:this.normalizeLanguageTags,parentContext:a,processingMode:this.activeProcessingMode})}validateContext(r){const a=r.getContextRaw()["@version"];if(a){if(this.activeProcessingMode&&a>this.activeProcessingMode)throw new n.ErrorCoded(`Unsupported JSON-LD version '${a}' under active processing mode ${this.activeProcessingMode}.`,n.ERROR_CODES.PROCESSING_MODE_CONFLICT);if(this.activeProcessingMode&&a<this.activeProcessingMode)throw new n.ErrorCoded(`Invalid JSON-LD version ${a} under active processing mode ${this.activeProcessingMode}.`,n.ERROR_CODES.INVALID_VERSION_VALUE);this.activeProcessingMode=a}}async getContext(r,a=1){const c=r;for(;typeof r[r.length-1]=="number";)r=r.slice(0,r.length-1);a&&(r=r.slice(0,-a));const s=await this.getContextPropagationAware(r);let l=s.context.getContextRaw();for(let f=s.depth;f<c.length-a;f++){const h=c[f],p=l[h];if(p&&typeof p=="object"&&"@context"in p){const y=(await this.parseContext(p,l,!0)).getContextRaw(),_=!(h in y)||y[h]["@context"]["@propagate"];(_!==!1||f===c.length-1-a)&&(l=Object.assign({},y),delete l["@propagate"],l[h]=Object.assign({},l[h]),"@id"in p&&(l[h]["@id"]=p["@id"]),delete l[h]["@context"],_!==!1&&this.contextTree.setContext(c.slice(0,f+a),Promise.resolve(new u.JsonLdContextNormalized(l))))}}return new u.JsonLdContextNormalized(l)}async getContextPropagationAware(r){const a=r.length;let c=null,s;do{s=!1,c&&"@__propagateFallback"in c.context.getContextRaw()?c.context=new u.JsonLdContextNormalized(c.context.getContextRaw()["@__propagateFallback"]):(c&&(r=r.slice(0,c.depth-1)),c=await this.contextTree.getContext(r)||{context:await this.rootContext,depth:0});const d=r[r.length-1];if(d in c.context.getContextRaw()){const l=c.context.getContextRaw()[d];l&&typeof l=="object"&&"@context"in l&&(s=!0)}}while(c.depth>0&&c.context.getContextRaw()["@propagate"]===!1&&c.depth!==a&&!s);return c.depth===0&&c.context.getContextRaw()["@propagate"]===!1&&c.depth!==a&&(c.context=new u.JsonLdContextNormalized({})),c}async newOnValueJob(r,a,c,s){await this.parser.newOnValueJob(r,a,c,s)}async handlePendingContainerFlushBuffers(){if(this.pendingContainerFlushBuffers.length>0){for(const r of this.pendingContainerFlushBuffers)await this.parser.flushBuffer(r.depth,r.keys),this.parser.flushStacks(r.depth);return this.pendingContainerFlushBuffers.splice(0,this.pendingContainerFlushBuffers.length),!0}else return!1}emitQuad(r,a){r===1&&(this.topLevelProperties=!0),this.parser.push(a)}emitError(r){this.parser.emit("error",r)}emitContext(r){this.parser.emit("context",r)}getUnidentifiedValueBufferSafe(r){let a=this.unidentifiedValuesBuffer[r];return a||(a=[],this.unidentifiedValuesBuffer[r]=a),a}getUnidentifiedGraphBufferSafe(r){let a=this.unidentifiedGraphsBuffer[r];return a||(a=[],this.unidentifiedGraphsBuffer[r]=a),a}getAnnotationsBufferSafe(r){let a=this.annotationsBuffer[r];return a||(a=[],this.annotationsBuffer[r]=a),a}getExpandOptions(){return bJ.EXPAND_OPTIONS[this.activeProcessingMode]}shiftStack(r,a){const c=this.idStack[r+a];if(c&&(this.idStack[r]=c,this.emittedStack[r]=!0,delete this.idStack[r+a]),this.pendingContainerFlushBuffers.length)for(const s of this.pendingContainerFlushBuffers)s.depth>=r+a&&(s.depth-=a,s.keys.splice(r,a));this.unidentifiedValuesBuffer[r+a]&&(this.unidentifiedValuesBuffer[r]=this.unidentifiedValuesBuffer[r+a],delete this.unidentifiedValuesBuffer[r+a]),this.annotationsBuffer[r+a-1]&&(this.annotationsBuffer[r-1]||(this.annotationsBuffer[r-1]=[]),this.annotationsBuffer[r-1]=[...this.annotationsBuffer[r-1],...this.annotationsBuffer[r+a-1]],delete this.annotationsBuffer[r+a-1])}};return t.EXPAND_OPTIONS={1:{allowPrefixForcing:!1,allowPrefixNonGenDelims:!1,allowVocabRelativeToBase:!1},1.1:{allowPrefixForcing:!0,allowPrefixNonGenDelims:!1,allowVocabRelativeToBase:!0}},Im.ParsingContext=t,Im}var Dm={},EU;function Wse(){if(EU)return Dm;EU=1,Object.defineProperty(Dm,"__esModule",{value:!0}),Dm.EntryHandlerKeywordAnnotation=void 0;const u=Yi(),n=wr();let o=class extends u.EntryHandlerKeyword{constructor(){super("@annotation")}async handle(t,e,r,a,c,s){(typeof c=="string"||typeof c=="object"&&c["@value"])&&t.emitError(new n.ErrorCoded(`Found illegal annotation value: ${JSON.stringify(c)}`,n.ERROR_CODES.INVALID_ANNOTATION))}};return Dm.EntryHandlerKeywordAnnotation=o,Dm}var xU;function RU(){if(xU)return lm;xU=1,Object.defineProperty(lm,"__esModule",{value:!0}),lm.JsonLdParser=void 0;const u=hN(),n=wr(),o=Pt(),i=Bse(),t=dU(),e=$se(),r=lw(),a=Use(),c=Vse(),s=Qse(),d=Hse(),l=Gse(),f=zse(),h=Xse(),p=Jse(),y=kse(),_=zc(),b=UO(),m=Wse();let g=class Gf extends o.Transform{constructor(v){super({readableObjectMode:!0}),v=v||{},this.options=v,this.parsingContext=new y.ParsingContext(Object.assign({parser:this},v)),this.util=new _.Util({dataFactory:v.dataFactory,parsingContext:this.parsingContext}),this.jsonParser=new u,this.contextJobs=[],this.typeJobs=[],this.contextAwaitingJobs=[],this.lastDepth=0,this.lastKeys=[],this.lastOnValueJob=Promise.resolve(),this.attachJsonParserListeners(),this.on("end",()=>{typeof this.jsonParser.mode<"u"&&this.emit("error",new Error("Unclosed document"))})}static fromHttpResponse(v,S,F,M){let O,w=["application/activity+json"];if(M&&M.wellKnownMediaTypes&&(w=M.wellKnownMediaTypes),S!=="application/ld+json"&&!w.includes(S)){if(S!=="application/json"&&!S.endsWith("+json"))throw new n.ErrorCoded(`Unsupported JSON-LD media type ${S}`,n.ERROR_CODES.LOADING_DOCUMENT_FAILED);if(F&&F.has("Link")&&F.forEach((R,D)=>{if(D==="link"){const B=(0,b.parse)(R);for(const C of B.get("rel","http://www.w3.org/ns/json-ld#context")){if(O)throw new n.ErrorCoded("Multiple JSON-LD context link headers were found on "+v,n.ERROR_CODES.MULTIPLE_CONTEXT_LINK_HEADERS);O=C.uri}}}),!O&&!(M!=null&&M.ignoreMissingContextLinkHeader))throw new n.ErrorCoded(`Missing context link header for media type ${S} on ${v}`,n.ERROR_CODES.LOADING_DOCUMENT_FAILED)}let E;if(F&&F.has("Content-Type")){const R=F.get("Content-Type"),D=/; *profile=([^"]*)/.exec(R);D&&D[1]==="http://www.w3.org/ns/json-ld#streaming"&&(E=!0)}return new Gf(Object.assign({baseIRI:v,context:O,streamingProfile:E},M||{}))}import(v){if("pipe"in v){v.on("error",F=>S.emit("error",F));const S=v.pipe(new Gf(this.options));return S}else{const S=new o.PassThrough({readableObjectMode:!0});v.on("error",M=>F.emit("error",M)),v.on("data",M=>S.push(M)),v.on("end",()=>S.push(null));const F=S.pipe(new Gf(this.options));return F}}_transform(v,S,F){this.jsonParser.write(v),this.lastOnValueJob.then(()=>F(),M=>F(M))}async newOnValueJob(v,S,F,M){let O=!0;if(M&&F<this.lastDepth){const B=this.parsingContext.listPointerStack[this.lastDepth];B&&(B.value&&this.push(this.util.dataFactory.quad(B.value,this.util.rdfRest,this.util.rdfNil,this.util.getDefaultGraph())),B.listId.listHead=!0,this.parsingContext.idStack[B.listRootDepth+1]=[B.listId],this.parsingContext.listPointerStack.splice(this.lastDepth,1)),await t.EntryHandlerContainer.isBufferableContainerHandler(this.parsingContext,this.lastKeys,this.lastDepth)?(this.parsingContext.pendingContainerFlushBuffers.push({depth:this.lastDepth,keys:this.lastKeys.slice(0,this.lastKeys.length)}),O=!1):await this.flushBuffer(this.lastDepth,this.lastKeys)}const w=await this.util.unaliasKeyword(v[F],v,F),E=await this.util.unaliasKeywordParent(v,F);this.parsingContext.emittedStack[F]=!0;let R=!0;n.Util.isValidKeyword(w)&&E==="@reverse"&&w!=="@context"&&this.emit("error",new n.ErrorCoded(`Found the @id '${S}' inside an @reverse property`,n.ERROR_CODES.INVALID_REVERSE_PROPERTY_MAP));let D=!1;this.parsingContext.validationStack.length>1&&(D=this.parsingContext.validationStack[this.parsingContext.validationStack.length-1].property);for(let B=Math.max(1,this.parsingContext.validationStack.length-1);B<v.length-1;B++){const C=this.parsingContext.validationStack[B]||(this.parsingContext.validationStack[B]=await this.validateKey(v.slice(0,B+1),B,D));if(C.valid)!D&&C.property&&(D=!0);else{this.parsingContext.emittedStack[F]=!1,R=!1;break}}if(await this.util.isLiteral(v,F)&&(R=!1),R)for(const B of Gf.ENTRY_HANDLERS){const C=await B.test(this.parsingContext,this.util,w,v,F);if(C){await B.handle(this.parsingContext,this.util,w,v,S,F,C),B.isStackProcessor()&&(this.parsingContext.processingStack[F]=!0);break}}F===0&&Array.isArray(S)&&await this.util.validateValueIndexes(S),O&&F<this.lastDepth&&this.flushStacks(this.lastDepth),this.lastDepth=F,this.lastKeys=v,this.parsingContext.unaliasedKeywordCacheStack.splice(F-1)}flushStacks(v){this.parsingContext.processingStack.splice(v,1),this.parsingContext.processingType.splice(v,1),this.parsingContext.emittedStack.splice(v,1),this.parsingContext.idStack.splice(v,1),this.parsingContext.graphStack.splice(v+1,1),this.parsingContext.graphContainerTermStack.splice(v,1),this.parsingContext.jsonLiteralStack.splice(v,1),this.parsingContext.validationStack.splice(v-1,2),this.parsingContext.literalStack.splice(v,this.parsingContext.literalStack.length-v),this.parsingContext.annotationsBuffer.splice(v,1)}async flushBuffer(v,S){let F=this.parsingContext.idStack[v];!!F||(F=this.parsingContext.idStack[v]=[this.util.dataFactory.blankNode()]);const O=this.parsingContext.unidentifiedValuesBuffer[v];if(O){for(const R of F){const D=await this.util.getDepthOffsetGraph(v,S),B=this.parsingContext.graphStack[v]||D>=0?this.parsingContext.idStack[v-D-1]:[await this.util.getGraphContainerValue(S,v)];if(B)for(const C of B){this.parsingContext.emittedStack[v]=!0;for(const $ of O)this.util.emitQuadChecked(v,R,$.predicate,$.object,C,$.reverse,$.isEmbedded)}else{const C=this.parsingContext.getUnidentifiedGraphBufferSafe(v-await this.util.getDepthOffsetGraph(v,S)-1);for(const $ of O)$.reverse?C.push({object:R,predicate:$.predicate,subject:$.object,isEmbedded:$.isEmbedded}):C.push({object:$.object,predicate:$.predicate,subject:R,isEmbedded:$.isEmbedded})}}this.parsingContext.unidentifiedValuesBuffer.splice(v,1),this.parsingContext.literalStack.splice(v,1),this.parsingContext.jsonLiteralStack.splice(v,1)}const w=this.parsingContext.unidentifiedGraphsBuffer[v];if(w){for(const R of F){const D=v===1&&R.termType==="BlankNode"&&!this.parsingContext.topLevelProperties?this.util.getDefaultGraph():R;this.parsingContext.emittedStack[v]=!0;for(const B of w)this.parsingContext.emitQuad(v,this.util.dataFactory.quad(B.subject,B.predicate,B.object,D))}this.parsingContext.unidentifiedGraphsBuffer.splice(v,1)}const E=this.parsingContext.annotationsBuffer[v];if(E){E.length>0&&v===1&&this.parsingContext.emitError(new n.ErrorCoded("Annotations can not be made on top-level nodes",n.ERROR_CODES.INVALID_ANNOTATION));const R=this.parsingContext.getAnnotationsBufferSafe(v-1);for(const D of E)R.push(D);delete this.parsingContext.annotationsBuffer[v]}}async validateKey(v,S,F){for(const M of Gf.ENTRY_HANDLERS)if(await M.validate(this.parsingContext,this.util,v,S,F))return{valid:!0,property:F||M.isPropertyHandler()};return{valid:!1,property:!1}}attachJsonParserListeners(){this.jsonParser.onValue=v=>{const S=this.jsonParser.stack.length,F=new Array(S+1).fill(0).map((M,O)=>O===S?this.jsonParser.key:this.jsonParser.stack[O].key);if(!this.isParsingContextInner(S)){const M=()=>this.newOnValueJob(F,v,S,!0);if(!this.parsingContext.streamingProfile&&!this.parsingContext.contextTree.getContext(F.slice(0,-1)))if(F[S]==="@context"){let O=this.contextJobs[S];O||(O=this.contextJobs[S]=[]),O.push(M)}else this.contextAwaitingJobs.push({job:M,keys:F,depth:S});else this.lastOnValueJob=this.lastOnValueJob.then(M);!this.parsingContext.streamingProfile&&S===0&&(this.lastOnValueJob=this.lastOnValueJob.then(()=>this.executeBufferedJobs()))}},this.jsonParser.onError=v=>{this.emit("error",v)}}isParsingContextInner(v){for(let S=v;S>0;S--)if(this.jsonParser.stack[S-1].key==="@context")return!0;return!1}async executeBufferedJobs(){for(const S of this.contextJobs)if(S)for(const F of S)await F();this.parsingContext.unaliasedKeywordCacheStack.splice(0);const v=[];for(const S of this.contextAwaitingJobs)await this.util.unaliasKeyword(S.keys[S.depth],S.keys,S.depth,!0)==="@type"||typeof S.keys[S.depth]=="number"&&await this.util.unaliasKeyword(S.keys[S.depth-1],S.keys,S.depth-1,!0)==="@type"?this.typeJobs.push({job:S.job,keys:S.keys.slice(0,S.keys.length-1)}):v.push(S);for(const S of v){if(this.typeJobs.length>0){const F=[],M=[];for(let E=0;E<this.typeJobs.length;E++){const R=this.typeJobs[E];_.Util.isPrefixArray(R.keys,S.keys)&&(F.push(R),M.push(E))}const O=F.sort((E,R)=>E.keys.length-R.keys.length);for(const E of O)await E.job();const w=M.sort().reverse();for(const E of w)this.typeJobs.splice(E,1)}await S.job()}}};return g.DEFAULT_PROCESSING_MODE="1.1",g.ENTRY_HANDLERS=[new i.EntryHandlerArrayValue,new a.EntryHandlerKeywordContext,new s.EntryHandlerKeywordId,new d.EntryHandlerKeywordIncluded,new c.EntryHandlerKeywordGraph,new l.EntryHandlerKeywordNest,new f.EntryHandlerKeywordType,new p.EntryHandlerKeywordValue,new m.EntryHandlerKeywordAnnotation,new t.EntryHandlerContainer,new h.EntryHandlerKeywordUnknownFallback,new r.EntryHandlerPredicate,new e.EntryHandlerInvalidFallback],lm.JsonLdParser=g,lm}var FU;function Yse(){return FU||(FU=1,(function(u){var n=Gc&&Gc.__createBinding||(Object.create?(function(i,t,e,r){r===void 0&&(r=e);var a=Object.getOwnPropertyDescriptor(t,e);(!a||("get"in a?!t.__esModule:a.writable||a.configurable))&&(a={enumerable:!0,get:function(){return t[e]}}),Object.defineProperty(i,r,a)}):(function(i,t,e,r){r===void 0&&(r=e),i[r]=t[e]})),o=Gc&&Gc.__exportStar||function(i,t){for(var e in i)e!=="default"&&!Object.prototype.hasOwnProperty.call(t,e)&&n(t,i,e)};Object.defineProperty(u,"__esModule",{value:!0}),o(RU(),u)})(Gc)),Gc}var Nm={},Xc={},jm={},xE={},IU;function PU(){return IU||(IU=1,(function(){(function(u){(function(n){var o=typeof globalThis<"u"&&globalThis||typeof u<"u"&&u||typeof Et<"u"&&Et||{},i={searchParams:"URLSearchParams"in o,iterable:"Symbol"in o&&"iterator"in Symbol,blob:"FileReader"in o&&"Blob"in o&&(function(){try{return new Blob,!0}catch{return!1}})(),formData:"FormData"in o,arrayBuffer:"ArrayBuffer"in o};function t(w){return w&&DataView.prototype.isPrototypeOf(w)}if(i.arrayBuffer)var e=["[object Int8Array]","[object Uint8Array]","[object Uint8ClampedArray]","[object Int16Array]","[object Uint16Array]","[object Int32Array]","[object Uint32Array]","[object Float32Array]","[object Float64Array]"],r=ArrayBuffer.isView||function(w){return w&&e.indexOf(Object.prototype.toString.call(w))>-1};function a(w){if(typeof w!="string"&&(w=String(w)),/[^a-z0-9\-#$%&'*+.^_`|~!]/i.test(w)||w==="")throw new TypeError('Invalid character in header field name: "'+w+'"');return w.toLowerCase()}function c(w){return typeof w!="string"&&(w=String(w)),w}function s(w){var E={next:function(){var R=w.shift();return{done:R===void 0,value:R}}};return i.iterable&&(E[Symbol.iterator]=function(){return E}),E}function d(w){this.map={},w instanceof d?w.forEach(function(E,R){this.append(R,E)},this):Array.isArray(w)?w.forEach(function(E){if(E.length!=2)throw new TypeError("Headers constructor: expected name/value pair to be length 2, found"+E.length);this.append(E[0],E[1])},this):w&&Object.getOwnPropertyNames(w).forEach(function(E){this.append(E,w[E])},this)}d.prototype.append=function(w,E){w=a(w),E=c(E);var R=this.map[w];this.map[w]=R?R+", "+E:E},d.prototype.delete=function(w){delete this.map[a(w)]},d.prototype.get=function(w){return w=a(w),this.has(w)?this.map[w]:null},d.prototype.has=function(w){return this.map.hasOwnProperty(a(w))},d.prototype.set=function(w,E){this.map[a(w)]=c(E)},d.prototype.forEach=function(w,E){for(var R in this.map)this.map.hasOwnProperty(R)&&w.call(E,this.map[R],R,this)},d.prototype.keys=function(){var w=[];return this.forEach(function(E,R){w.push(R)}),s(w)},d.prototype.values=function(){var w=[];return this.forEach(function(E){w.push(E)}),s(w)},d.prototype.entries=function(){var w=[];return this.forEach(function(E,R){w.push([R,E])}),s(w)},i.iterable&&(d.prototype[Symbol.iterator]=d.prototype.entries);function l(w){if(!w._noBody){if(w.bodyUsed)return Promise.reject(new TypeError("Already read"));w.bodyUsed=!0}}function f(w){return new Promise(function(E,R){w.onload=function(){E(w.result)},w.onerror=function(){R(w.error)}})}function h(w){var E=new FileReader,R=f(E);return E.readAsArrayBuffer(w),R}function p(w){var E=new FileReader,R=f(E),D=/charset=([A-Za-z0-9_-]+)/.exec(w.type),B=D?D[1]:"utf-8";return E.readAsText(w,B),R}function y(w){for(var E=new Uint8Array(w),R=new Array(E.length),D=0;D<E.length;D++)R[D]=String.fromCharCode(E[D]);return R.join("")}function _(w){if(w.slice)return w.slice(0);var E=new Uint8Array(w.byteLength);return E.set(new Uint8Array(w)),E.buffer}function b(){return this.bodyUsed=!1,this._initBody=function(w){this.bodyUsed=this.bodyUsed,this._bodyInit=w,w?typeof w=="string"?this._bodyText=w:i.blob&&Blob.prototype.isPrototypeOf(w)?this._bodyBlob=w:i.formData&&FormData.prototype.isPrototypeOf(w)?this._bodyFormData=w:i.searchParams&&URLSearchParams.prototype.isPrototypeOf(w)?this._bodyText=w.toString():i.arrayBuffer&&i.blob&&t(w)?(this._bodyArrayBuffer=_(w.buffer),this._bodyInit=new Blob([this._bodyArrayBuffer])):i.arrayBuffer&&(ArrayBuffer.prototype.isPrototypeOf(w)||r(w))?this._bodyArrayBuffer=_(w):this._bodyText=w=Object.prototype.toString.call(w):(this._noBody=!0,this._bodyText=""),this.headers.get("content-type")||(typeof w=="string"?this.headers.set("content-type","text/plain;charset=UTF-8"):this._bodyBlob&&this._bodyBlob.type?this.headers.set("content-type",this._bodyBlob.type):i.searchParams&&URLSearchParams.prototype.isPrototypeOf(w)&&this.headers.set("content-type","application/x-www-form-urlencoded;charset=UTF-8"))},i.blob&&(this.blob=function(){var w=l(this);if(w)return w;if(this._bodyBlob)return Promise.resolve(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(new Blob([this._bodyArrayBuffer]));if(this._bodyFormData)throw new Error("could not read FormData body as blob");return Promise.resolve(new Blob([this._bodyText]))}),this.arrayBuffer=function(){if(this._bodyArrayBuffer){var w=l(this);return w||(ArrayBuffer.isView(this._bodyArrayBuffer)?Promise.resolve(this._bodyArrayBuffer.buffer.slice(this._bodyArrayBuffer.byteOffset,this._bodyArrayBuffer.byteOffset+this._bodyArrayBuffer.byteLength)):Promise.resolve(this._bodyArrayBuffer))}else{if(i.blob)return this.blob().then(h);throw new Error("could not read as ArrayBuffer")}},this.text=function(){var w=l(this);if(w)return w;if(this._bodyBlob)return p(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(y(this._bodyArrayBuffer));if(this._bodyFormData)throw new Error("could not read FormData body as text");return Promise.resolve(this._bodyText)},i.formData&&(this.formData=function(){return this.text().then(v)}),this.json=function(){return this.text().then(JSON.parse)},this}var m=["CONNECT","DELETE","GET","HEAD","OPTIONS","PATCH","POST","PUT","TRACE"];function g(w){var E=w.toUpperCase();return m.indexOf(E)>-1?E:w}function T(w,E){if(!(this instanceof T))throw new TypeError('Please use the "new" operator, this DOM object constructor cannot be called as a function.');E=E||{};var R=E.body;if(w instanceof T){if(w.bodyUsed)throw new TypeError("Already read");this.url=w.url,this.credentials=w.credentials,E.headers||(this.headers=new d(w.headers)),this.method=w.method,this.mode=w.mode,this.signal=w.signal,!R&&w._bodyInit!=null&&(R=w._bodyInit,w.bodyUsed=!0)}else this.url=String(w);if(this.credentials=E.credentials||this.credentials||"same-origin",(E.headers||!this.headers)&&(this.headers=new d(E.headers)),this.method=g(E.method||this.method||"GET"),this.mode=E.mode||this.mode||null,this.signal=E.signal||this.signal||(function(){if("AbortController"in o){var C=new AbortController;return C.signal}})(),this.referrer=null,(this.method==="GET"||this.method==="HEAD")&&R)throw new TypeError("Body not allowed for GET or HEAD requests");if(this._initBody(R),(this.method==="GET"||this.method==="HEAD")&&(E.cache==="no-store"||E.cache==="no-cache")){var D=/([?&])_=[^&]*/;if(D.test(this.url))this.url=this.url.replace(D,"$1_="+new Date().getTime());else{var B=/\?/;this.url+=(B.test(this.url)?"&":"?")+"_="+new Date().getTime()}}}T.prototype.clone=function(){return new T(this,{body:this._bodyInit})};function v(w){var E=new FormData;return w.trim().split("&").forEach(function(R){if(R){var D=R.split("="),B=D.shift().replace(/\+/g," "),C=D.join("=").replace(/\+/g," ");E.append(decodeURIComponent(B),decodeURIComponent(C))}}),E}function S(w){var E=new d,R=w.replace(/\r?\n[\t ]+/g," ");return R.split("\r").map(function(D){return D.indexOf(`
`)===0?D.substr(1,D.length):D}).forEach(function(D){var B=D.split(":"),C=B.shift().trim();if(C){var $=B.join(":").trim();try{E.append(C,$)}catch(Z){console.warn("Response "+Z.message)}}}),E}b.call(T.prototype);function F(w,E){if(!(this instanceof F))throw new TypeError('Please use the "new" operator, this DOM object constructor cannot be called as a function.');if(E||(E={}),this.type="default",this.status=E.status===void 0?200:E.status,this.status<200||this.status>599)throw new RangeError("Failed to construct 'Response': The status provided (0) is outside the range [200, 599].");this.ok=this.status>=200&&this.status<300,this.statusText=E.statusText===void 0?"":""+E.statusText,this.headers=new d(E.headers),this.url=E.url||"",this._initBody(w)}b.call(F.prototype),F.prototype.clone=function(){return new F(this._bodyInit,{status:this.status,statusText:this.statusText,headers:new d(this.headers),url:this.url})},F.error=function(){var w=new F(null,{status:200,statusText:""});return w.ok=!1,w.status=0,w.type="error",w};var M=[301,302,303,307,308];F.redirect=function(w,E){if(M.indexOf(E)===-1)throw new RangeError("Invalid status code");return new F(null,{status:E,headers:{location:w}})},n.DOMException=o.DOMException;try{new n.DOMException}catch{n.DOMException=function(E,R){this.message=E,this.name=R;var D=Error(E);this.stack=D.stack},n.DOMException.prototype=Object.create(Error.prototype),n.DOMException.prototype.constructor=n.DOMException}function O(w,E){return new Promise(function(R,D){var B=new T(w,E);if(B.signal&&B.signal.aborted)return D(new n.DOMException("Aborted","AbortError"));var C=new XMLHttpRequest;function $(){C.abort()}C.onload=function(){var ce={statusText:C.statusText,headers:S(C.getAllResponseHeaders()||"")};B.url.indexOf("file://")===0&&(C.status<200||C.status>599)?ce.status=200:ce.status=C.status,ce.url="responseURL"in C?C.responseURL:ce.headers.get("X-Request-URL");var G="response"in C?C.response:C.responseText;setTimeout(function(){R(new F(G,ce))},0)},C.onerror=function(){setTimeout(function(){D(new TypeError("Network request failed"))},0)},C.ontimeout=function(){setTimeout(function(){D(new TypeError("Network request timed out"))},0)},C.onabort=function(){setTimeout(function(){D(new n.DOMException("Aborted","AbortError"))},0)};function Z(ce){try{return ce===""&&o.location.href?o.location.href:ce}catch{return ce}}if(C.open(B.method,Z(B.url),!0),B.credentials==="include"?C.withCredentials=!0:B.credentials==="omit"&&(C.withCredentials=!1),"responseType"in C&&(i.blob?C.responseType="blob":i.arrayBuffer&&(C.responseType="arraybuffer")),E&&typeof E.headers=="object"&&!(E.headers instanceof d||o.Headers&&E.headers instanceof o.Headers)){var ee=[];Object.getOwnPropertyNames(E.headers).forEach(function(ce){ee.push(a(ce)),C.setRequestHeader(ce,c(E.headers[ce]))}),B.headers.forEach(function(ce,G){ee.indexOf(G)===-1&&C.setRequestHeader(G,ce)})}else B.headers.forEach(function(ce,G){C.setRequestHeader(G,ce)});B.signal&&(B.signal.addEventListener("abort",$),C.onreadystatechange=function(){C.readyState===4&&B.signal.removeEventListener("abort",$)}),C.send(typeof B._bodyInit>"u"?null:B._bodyInit)})}return O.polyfill=!0,o.fetch||(o.fetch=O,o.Headers=d,o.Request=T,o.Response=F),n.Headers=d,n.Request=T,n.Response=F,n.fetch=O,Object.defineProperty(n,"__esModule",{value:!0}),n})({})})(typeof self<"u"?self:xE)})()),xE}var RE={},DU;function fw(){return DU||(DU=1,(function(u){Object.defineProperty(u,"__esModule",{value:!0}),u.ERROR_CODES=u.ErrorCoded=void 0;class n extends Error{constructor(i,t){super(i),this.code=t}}u.ErrorCoded=n,(function(o){o.COLLIDING_KEYWORDS="colliding keywords",o.CONFLICTING_INDEXES="conflicting indexes",o.CYCLIC_IRI_MAPPING="cyclic IRI mapping",o.INVALID_ID_VALUE="invalid @id value",o.INVALID_INDEX_VALUE="invalid @index value",o.INVALID_NEST_VALUE="invalid @nest value",o.INVALID_PREFIX_VALUE="invalid @prefix value",o.INVALID_PROPAGATE_VALUE="invalid @propagate value",o.INVALID_REVERSE_VALUE="invalid @reverse value",o.INVALID_IMPORT_VALUE="invalid @import value",o.INVALID_VERSION_VALUE="invalid @version value",o.INVALID_BASE_IRI="invalid base IRI",o.INVALID_CONTAINER_MAPPING="invalid container mapping",o.INVALID_CONTEXT_ENTRY="invalid context entry",o.INVALID_CONTEXT_NULLIFICATION="invalid context nullification",o.INVALID_DEFAULT_LANGUAGE="invalid default language",o.INVALID_INCLUDED_VALUE="invalid @included value",o.INVALID_IRI_MAPPING="invalid IRI mapping",o.INVALID_JSON_LITERAL="invalid JSON literal",o.INVALID_KEYWORD_ALIAS="invalid keyword alias",o.INVALID_LANGUAGE_MAP_VALUE="invalid language map value",o.INVALID_LANGUAGE_MAPPING="invalid language mapping",o.INVALID_LANGUAGE_TAGGED_STRING="invalid language-tagged string",o.INVALID_LANGUAGE_TAGGED_VALUE="invalid language-tagged value",o.INVALID_LOCAL_CONTEXT="invalid local context",o.INVALID_REMOTE_CONTEXT="invalid remote context",o.INVALID_REVERSE_PROPERTY="invalid reverse property",o.INVALID_REVERSE_PROPERTY_MAP="invalid reverse property map",o.INVALID_REVERSE_PROPERTY_VALUE="invalid reverse property value",o.INVALID_SCOPED_CONTEXT="invalid scoped context",o.INVALID_SCRIPT_ELEMENT="invalid script element",o.INVALID_SET_OR_LIST_OBJECT="invalid set or list object",o.INVALID_TERM_DEFINITION="invalid term definition",o.INVALID_TYPE_MAPPING="invalid type mapping",o.INVALID_TYPE_VALUE="invalid type value",o.INVALID_TYPED_VALUE="invalid typed value",o.INVALID_VALUE_OBJECT="invalid value object",o.INVALID_VALUE_OBJECT_VALUE="invalid value object value",o.INVALID_VOCAB_MAPPING="invalid vocab mapping",o.IRI_CONFUSED_WITH_PREFIX="IRI confused with prefix",o.KEYWORD_REDEFINITION="keyword redefinition",o.LOADING_DOCUMENT_FAILED="loading document failed",o.LOADING_REMOTE_CONTEXT_FAILED="loading remote context failed",o.MULTIPLE_CONTEXT_LINK_HEADERS="multiple context link headers",o.PROCESSING_MODE_CONFLICT="processing mode conflict",o.PROTECTED_TERM_REDEFINITION="protected term redefinition",o.CONTEXT_OVERFLOW="context overflow",o.INVALID_BASE_DIRECTION="invalid base direction",o.RECURSIVE_CONTEXT_INCLUSION="recursive context inclusion",o.INVALID_STREAMING_KEY_ORDER="invalid streaming key order",o.INVALID_EMBEDDED_NODE="invalid embedded node",o.INVALID_ANNOTATION="invalid annotation"})(u.ERROR_CODES||(u.ERROR_CODES={}))})(RE)),RE}var Lm={},NU;function jU(){if(NU)return Lm;NU=1,Object.defineProperty(Lm,"__esModule",{value:!0}),Lm.FetchDocumentLoader=void 0,PU();const u=fw(),n=UO(),o=Jr();let i=class{constructor(e){this.fetcher=e}async load(e){const r=await(this.fetcher||fetch)(e,{headers:new Headers({accept:"application/ld+json"})});if(r.ok&&r.headers){let a=r.headers.get("Content-Type");if(a){const c=a.indexOf(";");c>0&&(a=a.substr(0,c))}if(a==="application/ld+json")return await r.json();if(r.headers.has("Link")){let c;if(r.headers.forEach((s,d)=>{if(d==="link"){const l=(0,n.parse)(s);for(const f of l.get("type","application/ld+json"))if(f.rel==="alternate"){if(c)throw new Error("Multiple JSON-LD alternate links were found on "+e);c=(0,o.resolve)(f.uri,e)}}}),c)return this.load(c)}throw new u.ErrorCoded(`Unsupported JSON-LD media type ${a}`,u.ERROR_CODES.LOADING_DOCUMENT_FAILED)}else throw new Error(r.statusText||`Status code: ${r.status}`)}};return Lm.FetchDocumentLoader=i,Lm}var FE={},Mm={},LU;function IE(){if(LU)return Mm;LU=1,Object.defineProperty(Mm,"__esModule",{value:!0}),Mm.Util=void 0;let u=class Ii{static isCompactIri(o){return o.indexOf(":")>0&&!(o&&o[0]==="#")}static getPrefix(o,i){if(o&&o[0]==="#")return null;const t=o.indexOf(":");if(t>=0){if(o.length>t+1&&o.charAt(t+1)==="/"&&o.charAt(t+2)==="/")return null;const e=o.substr(0,t);if(e==="_")return null;if(i[e])return e}return null}static getContextValueId(o){if(o===null||typeof o=="string")return o;const i=o["@id"];return i||null}static isSimpleTermDefinitionPrefix(o,i){return!Ii.isPotentialKeyword(o)&&(i.allowPrefixNonGenDelims||typeof o=="string"&&(o[0]==="_"||Ii.isPrefixIriEndingWithGenDelim(o)))}static isPotentialKeyword(o){return typeof o=="string"&&Ii.KEYWORD_REGEX.test(o)}static isPrefixIriEndingWithGenDelim(o){return Ii.ENDS_WITH_GEN_DELIM.test(o)}static isPrefixValue(o){return o&&(typeof o=="string"||o&&typeof o=="object")}static isValidIri(o){return!!(o&&Ii.IRI_REGEX.test(o))}static isValidIriWeak(o){return!!o&&o[0]!==":"&&Ii.IRI_REGEX_WEAK.test(o)}static isValidKeyword(o){return Ii.VALID_KEYWORDS[o]}static isTermProtected(o,i){const t=o[i];return typeof t!="string"&&t&&t["@protected"]}static hasProtectedTerms(o){for(const i of Object.keys(o))if(Ii.isTermProtected(o,i))return!0;return!1}static isReservedInternalKeyword(o){return o.startsWith("@__")}static deepEqual(o,i){const t=Object.keys(o),e=Object.keys(i);return t.length!==e.length?!1:t.every(r=>{const a=o[r],c=i[r];return a===c||a!==null&&c!==null&&typeof a=="object"&&typeof c=="object"&&this.deepEqual(a,c)})}};return u.IRI_REGEX=/^([A-Za-z][A-Za-z0-9+-.]*|_):[^ "<>{}|\\\[\]`#]*(#[^#]*)?$/,u.IRI_REGEX_WEAK=/(?::[^:])|\//,u.KEYWORD_REGEX=/^@[a-z]+$/i,u.ENDS_WITH_GEN_DELIM=/[:/?#\[\]@]$/,u.REGEX_LANGUAGE_TAG=/^[a-zA-Z]+(-[a-zA-Z0-9]+)*$/,u.REGEX_DIRECTION_TAG=/^(ltr)|(rtl)$/,u.VALID_KEYWORDS={"@annotation":!0,"@base":!0,"@container":!0,"@context":!0,"@direction":!0,"@graph":!0,"@id":!0,"@import":!0,"@included":!0,"@index":!0,"@json":!0,"@language":!0,"@list":!0,"@nest":!0,"@none":!0,"@prefix":!0,"@propagate":!0,"@protected":!0,"@reverse":!0,"@set":!0,"@type":!0,"@value":!0,"@version":!0,"@vocab":!0},u.EXPAND_KEYS_BLACKLIST=["@base","@vocab","@language","@version","@direction"],u.ALIAS_DOMAIN_BLACKLIST=["@container","@graph","@id","@index","@list","@nest","@none","@prefix","@reverse","@set","@type","@value","@version"],u.ALIAS_RANGE_BLACKLIST=["@context","@preserve"],u.CONTAINERS=["@list","@set","@index","@language","@graph","@id","@type"],u.CONTAINERS_1_0=["@list","@set","@index"],Mm.Util=u,Mm}var MU;function qU(){return MU||(MU=1,(function(u){Object.defineProperty(u,"__esModule",{value:!0}),u.defaultExpandOptions=u.JsonLdContextNormalized=void 0;const n=Jr(),o=fw(),i=IE();class t{constructor(r){this.contextRaw=r}getContextRaw(){return this.contextRaw}expandTerm(r,a,c=u.defaultExpandOptions){const s=this.contextRaw[r];if(s===null||s&&s["@id"]===null)return null;let d=!0;if(s&&a){const _=i.Util.getContextValueId(s);if(_&&_!==r)if(typeof _!="string"||!i.Util.isValidIri(_)&&!i.Util.isValidKeyword(_))i.Util.isPotentialKeyword(_)||(d=!1);else return _}const l=i.Util.getPrefix(r,this.contextRaw),f=this.contextRaw["@vocab"],h=(!!f||f==="")&&f.indexOf(":")<0,p=this.contextRaw["@base"],y=i.Util.isPotentialKeyword(r);if(l){const _=this.contextRaw[l],b=i.Util.getContextValueId(_);if(b){if(typeof _=="string"||!c.allowPrefixForcing){if(!i.Util.isSimpleTermDefinitionPrefix(b,c))return r}else if(b[0]!=="_"&&!y&&!_["@prefix"]&&!(r in this.contextRaw))return r;return b+r.substr(l.length+1)}}else if(a&&(f||f===""||c.allowVocabRelativeToBase&&p&&h)&&!y&&!i.Util.isCompactIri(r))if(h){if(c.allowVocabRelativeToBase)return(f||p?(0,n.resolve)(f,p):"")+r;throw new o.ErrorCoded(`Relative vocab expansion for term '${r}' with vocab '${f}' is not allowed.`,o.ERROR_CODES.INVALID_VOCAB_MAPPING)}else return f+r;else if(!a&&p&&!y&&!i.Util.isCompactIri(r))return(0,n.resolve)(r,p);if(d)return r;throw new o.ErrorCoded(`Invalid IRI mapping found for context entry '${r}': '${JSON.stringify(s)}'`,o.ERROR_CODES.INVALID_IRI_MAPPING)}compactIri(r,a){if(a&&this.contextRaw["@vocab"]&&r.startsWith(this.contextRaw["@vocab"]))return r.substr(this.contextRaw["@vocab"].length);if(!a&&this.contextRaw["@base"]&&r.startsWith(this.contextRaw["@base"]))return r.substr(this.contextRaw["@base"].length);const c={prefix:"",suffix:r};for(const s in this.contextRaw){const d=this.contextRaw[s];if(d&&!i.Util.isPotentialKeyword(s)){const l=i.Util.getContextValueId(d);if(r.startsWith(l)){const f=r.substr(l.length);if(f)f.length<c.suffix.length&&(c.prefix=s,c.suffix=f);else if(a)return s}}}return c.prefix?c.prefix+":"+c.suffix:r}}u.JsonLdContextNormalized=t,u.defaultExpandOptions={allowPrefixForcing:!0,allowPrefixNonGenDelims:!1,allowVocabRelativeToBase:!0}})(FE)),FE}var CU;function Zse(){if(CU)return jm;CU=1,Object.defineProperty(jm,"__esModule",{value:!0}),jm.ContextParser=void 0,PU();const u=Jr(),n=fw(),o=jU(),i=qU(),t=IE();let e=class Vl{constructor(a){a=a||{},this.documentLoader=a.documentLoader||new o.FetchDocumentLoader,this.documentCache={},this.validateContext=!a.skipValidation,this.expandContentTypeToBase=!!a.expandContentTypeToBase,this.remoteContextsDepthLimit=a.remoteContextsDepthLimit||32,this.redirectSchemaOrgHttps="redirectSchemaOrgHttps"in a?!!a.redirectSchemaOrgHttps:!0}static validateLanguage(a,c,s){if(typeof a!="string")throw new n.ErrorCoded(`The value of an '@language' must be a string, got '${JSON.stringify(a)}'`,s);if(!t.Util.REGEX_LANGUAGE_TAG.test(a)){if(c)throw new n.ErrorCoded(`The value of an '@language' must be a valid language tag, got '${JSON.stringify(a)}'`,s);return!1}return!0}static validateDirection(a,c){if(typeof a!="string")throw new n.ErrorCoded(`The value of an '@direction' must be a string, got '${JSON.stringify(a)}'`,n.ERROR_CODES.INVALID_BASE_DIRECTION);if(!t.Util.REGEX_DIRECTION_TAG.test(a)){if(c)throw new n.ErrorCoded(`The value of an '@direction' must be 'ltr' or 'rtl', got '${JSON.stringify(a)}'`,n.ERROR_CODES.INVALID_BASE_DIRECTION);return!1}return!0}idifyReverseTerms(a){for(const c of Object.keys(a)){let s=a[c];if(s&&typeof s=="object"&&s["@reverse"]&&!s["@id"]){if(typeof s["@reverse"]!="string"||t.Util.isValidKeyword(s["@reverse"]))throw new n.ErrorCoded(`Invalid @reverse value, must be absolute IRI or blank node: '${s["@reverse"]}'`,n.ERROR_CODES.INVALID_IRI_MAPPING);s=a[c]=Object.assign(Object.assign({},s),{"@id":s["@reverse"]}),s["@id"]=s["@reverse"],t.Util.isPotentialKeyword(s["@reverse"])?delete s["@reverse"]:s["@reverse"]=!0}}return a}expandPrefixedTerms(a,c,s){const d=a.getContextRaw();for(const l of s||Object.keys(d))if(t.Util.EXPAND_KEYS_BLACKLIST.indexOf(l)<0&&!t.Util.isReservedInternalKeyword(l)){const f=d[l];if(t.Util.isPotentialKeyword(l)&&t.Util.ALIAS_DOMAIN_BLACKLIST.indexOf(l)>=0&&(l!=="@type"||typeof d[l]=="object"&&!(d[l]["@protected"]||d[l]["@container"]==="@set")))throw new n.ErrorCoded(`Keywords can not be aliased to something else.
Tried mapping ${l} to ${JSON.stringify(f)}`,n.ERROR_CODES.KEYWORD_REDEFINITION);if(t.Util.ALIAS_RANGE_BLACKLIST.indexOf(t.Util.getContextValueId(f))>=0)throw new n.ErrorCoded(`Aliasing to certain keywords is not allowed.
Tried mapping ${l} to ${JSON.stringify(f)}`,n.ERROR_CODES.INVALID_KEYWORD_ALIAS);if(f&&t.Util.isPotentialKeyword(t.Util.getContextValueId(f))&&f["@prefix"]===!0)throw new n.ErrorCoded(`Tried to use keyword aliases as prefix: '${l}': '${JSON.stringify(f)}'`,n.ERROR_CODES.INVALID_TERM_DEFINITION);for(;t.Util.isPrefixValue(d[l]);){const h=d[l];let p=!1;if(typeof h=="string")d[l]=a.expandTerm(h,!0),p=p||h!==d[l];else{const y=h["@id"],_=h["@type"],b=!("@prefix"in h)||t.Util.isValidIri(l);if("@id"in h)y!=null&&typeof y=="string"&&(d[l]=Object.assign(Object.assign({},d[l]),{"@id":a.expandTerm(y,!0)}),p=p||y!==d[l]["@id"]);else if(!t.Util.isPotentialKeyword(l)&&b){const m=a.expandTerm(l,!0);m!==l&&(d[l]=Object.assign(Object.assign({},d[l]),{"@id":m}),p=!0)}if(_&&typeof _=="string"&&_!=="@vocab"&&(!h["@container"]||!h["@container"]["@type"])&&b){let m=a.expandTerm(_,!0);c&&_===m&&(m=a.expandTerm(_,!1)),m!==_&&(p=!0,d[l]=Object.assign(Object.assign({},d[l]),{"@type":m}))}}if(!p)break}}}normalize(a,{processingMode:c,normalizeLanguageTags:s}){if(s||c===1)for(const d of Object.keys(a))if(d==="@language"&&typeof a[d]=="string")a[d]=a[d].toLowerCase();else{const l=a[d];if(l&&typeof l=="object"&&typeof l["@language"]=="string"){const f=l["@language"].toLowerCase();f!==l["@language"]&&(a[d]=Object.assign(Object.assign({},l),{"@language":f}))}}}containersToHash(a){for(const c of Object.keys(a)){const s=a[c];if(s&&typeof s=="object"){if(typeof s["@container"]=="string")a[c]=Object.assign(Object.assign({},s),{"@container":{[s["@container"]]:!0}});else if(Array.isArray(s["@container"])){const d={};for(const l of s["@container"])d[l]=!0;a[c]=Object.assign(Object.assign({},s),{"@container":d})}}}}applyScopedProtected(a,{processingMode:c},s){if(c&&c>=1.1&&a["@protected"]){for(const d of Object.keys(a))if(!t.Util.isReservedInternalKeyword(d)&&!t.Util.isPotentialKeyword(d)&&!t.Util.isTermProtected(a,d)){const l=a[d];l&&typeof l=="object"?"@protected"in a[d]||(a[d]=Object.assign(Object.assign({},a[d]),{"@protected":!0})):(a[d]={"@id":l,"@protected":!0},t.Util.isSimpleTermDefinitionPrefix(l,s)&&(a[d]=Object.assign(Object.assign({},a[d]),{"@prefix":!0})))}delete a["@protected"]}}validateKeywordRedefinitions(a,c,s,d){for(const l of d??Object.keys(c))if(t.Util.isTermProtected(a,l)&&(typeof c[l]=="string"?c[l]={"@id":c[l],"@protected":!0}:c[l]=Object.assign(Object.assign({},c[l]),{"@protected":!0}),!t.Util.deepEqual(a[l],c[l])))throw new n.ErrorCoded(`Attempted to override the protected keyword ${l} from ${JSON.stringify(t.Util.getContextValueId(a[l]))} to ${JSON.stringify(t.Util.getContextValueId(c[l]))}`,n.ERROR_CODES.PROTECTED_TERM_REDEFINITION)}validate(a,{processingMode:c}){for(const s of Object.keys(a)){if(t.Util.isReservedInternalKeyword(s))continue;if(s==="")throw new n.ErrorCoded(`The empty term is not allowed, got: '${s}': '${JSON.stringify(a[s])}'`,n.ERROR_CODES.INVALID_TERM_DEFINITION);const d=a[s],l=typeof d;if(t.Util.isPotentialKeyword(s)){switch(s.substr(1)){case"vocab":if(d!==null&&l!=="string")throw new n.ErrorCoded(`Found an invalid @vocab IRI: ${d}`,n.ERROR_CODES.INVALID_VOCAB_MAPPING);break;case"base":if(d!==null&&l!=="string")throw new n.ErrorCoded(`Found an invalid @base IRI: ${a[s]}`,n.ERROR_CODES.INVALID_BASE_IRI);break;case"language":d!==null&&Vl.validateLanguage(d,!0,n.ERROR_CODES.INVALID_DEFAULT_LANGUAGE);break;case"version":if(d!==null&&l!=="number")throw new n.ErrorCoded(`Found an invalid @version number: ${d}`,n.ERROR_CODES.INVALID_VERSION_VALUE);break;case"direction":d!==null&&Vl.validateDirection(d,!0);break;case"propagate":if(c===1)throw new n.ErrorCoded(`Found an illegal @propagate keyword: ${d}`,n.ERROR_CODES.INVALID_CONTEXT_ENTRY);if(d!==null&&l!=="boolean")throw new n.ErrorCoded(`Found an invalid @propagate value: ${d}`,n.ERROR_CODES.INVALID_PROPAGATE_VALUE);break}if(t.Util.isValidKeyword(s)&&t.Util.isValidKeyword(t.Util.getContextValueId(d)))throw new n.ErrorCoded(`Illegal keyword alias in term value, found: '${s}': '${t.Util.getContextValueId(d)}'`,n.ERROR_CODES.KEYWORD_REDEFINITION);continue}if(d!==null)switch(l){case"string":if(t.Util.getPrefix(d,a)===s)throw new n.ErrorCoded(`Detected cyclical IRI mapping in context entry: '${s}': '${JSON.stringify(d)}'`,n.ERROR_CODES.CYCLIC_IRI_MAPPING);if(t.Util.isValidIriWeak(s)){if(d==="@type")throw new n.ErrorCoded(`IRIs can not be mapped to @type, found: '${s}': '${d}'`,n.ERROR_CODES.INVALID_IRI_MAPPING);if(t.Util.isValidIri(d)&&d!==new i.JsonLdContextNormalized(a).expandTerm(s))throw new n.ErrorCoded(`IRIs can not be mapped to other IRIs, found: '${s}': '${d}'`,n.ERROR_CODES.INVALID_IRI_MAPPING)}break;case"object":if(!t.Util.isCompactIri(s)&&!("@id"in d)&&(d["@type"]==="@id"?!a["@base"]:!a["@vocab"]))throw new n.ErrorCoded(`Missing @id in context entry: '${s}': '${JSON.stringify(d)}'`,n.ERROR_CODES.INVALID_IRI_MAPPING);for(const f of Object.keys(d)){const h=d[f];if(h)switch(f){case"@id":if(t.Util.isValidKeyword(h)&&h!=="@type"&&h!=="@id"&&h!=="@graph"&&h!=="@nest")throw new n.ErrorCoded(`Illegal keyword alias in term value, found: '${s}': '${JSON.stringify(d)}'`,n.ERROR_CODES.INVALID_IRI_MAPPING);if(t.Util.isValidIriWeak(s)){if(h==="@type")throw new n.ErrorCoded(`IRIs can not be mapped to @type, found: '${s}': '${JSON.stringify(d)}'`,n.ERROR_CODES.INVALID_IRI_MAPPING);if(t.Util.isValidIri(h)&&h!==new i.JsonLdContextNormalized(a).expandTerm(s))throw new n.ErrorCoded(`IRIs can not be mapped to other IRIs, found: '${s}': '${JSON.stringify(d)}'`,n.ERROR_CODES.INVALID_IRI_MAPPING)}if(typeof h!="string")throw new n.ErrorCoded(`Detected non-string @id in context entry: '${s}': '${JSON.stringify(d)}'`,n.ERROR_CODES.INVALID_IRI_MAPPING);if(t.Util.getPrefix(h,a)===s)throw new n.ErrorCoded(`Detected cyclical IRI mapping in context entry: '${s}': '${JSON.stringify(d)}'`,n.ERROR_CODES.CYCLIC_IRI_MAPPING);break;case"@type":if(d["@container"]==="@type"&&h!=="@id"&&h!=="@vocab")throw new n.ErrorCoded(`@container: @type only allows @type: @id or @vocab, but got: '${s}': '${h}'`,n.ERROR_CODES.INVALID_TYPE_MAPPING);if(typeof h!="string")throw new n.ErrorCoded(`The value of an '@type' must be a string, got '${JSON.stringify(l)}'`,n.ERROR_CODES.INVALID_TYPE_MAPPING);if(h!=="@id"&&h!=="@vocab"&&(c===1||h!=="@json")&&(c===1||h!=="@none")&&(h[0]==="_"||!t.Util.isValidIri(h)))throw new n.ErrorCoded(`A context @type must be an absolute IRI, found: '${s}': '${h}'`,n.ERROR_CODES.INVALID_TYPE_MAPPING);break;case"@reverse":if(typeof h=="string"&&d["@id"]&&d["@id"]!==h)throw new n.ErrorCoded(`Found non-matching @id and @reverse term values in '${s}':'${h}' and '${d["@id"]}'`,n.ERROR_CODES.INVALID_REVERSE_PROPERTY);if("@nest"in d)throw new n.ErrorCoded(`@nest is not allowed in the reverse property '${s}'`,n.ERROR_CODES.INVALID_REVERSE_PROPERTY);break;case"@container":if(c===1&&(Object.keys(h).length>1||t.Util.CONTAINERS_1_0.indexOf(Object.keys(h)[0])<0))throw new n.ErrorCoded(`Invalid term @container for '${s}' ('${Object.keys(h)}') in 1.0, must be only one of ${t.Util.CONTAINERS_1_0.join(", ")}`,n.ERROR_CODES.INVALID_CONTAINER_MAPPING);for(const p of Object.keys(h)){if(p==="@list"&&d["@reverse"])throw new n.ErrorCoded(`Term value can not be @container: @list and @reverse at the same time on '${s}'`,n.ERROR_CODES.INVALID_REVERSE_PROPERTY);if(t.Util.CONTAINERS.indexOf(p)<0)throw new n.ErrorCoded(`Invalid term @container for '${s}' ('${p}'), must be one of ${t.Util.CONTAINERS.join(", ")}`,n.ERROR_CODES.INVALID_CONTAINER_MAPPING)}break;case"@language":Vl.validateLanguage(h,!0,n.ERROR_CODES.INVALID_LANGUAGE_MAPPING);break;case"@direction":Vl.validateDirection(h,!0);break;case"@prefix":if(h!==null&&typeof h!="boolean")throw new n.ErrorCoded(`Found an invalid term @prefix boolean in: '${s}': '${JSON.stringify(d)}'`,n.ERROR_CODES.INVALID_PREFIX_VALUE);if(!("@id"in d)&&!t.Util.isValidIri(s))throw new n.ErrorCoded(`Invalid @prefix definition for '${s}' ('${JSON.stringify(d)}'`,n.ERROR_CODES.INVALID_TERM_DEFINITION);break;case"@index":if(c===1||!d["@container"]||!d["@container"]["@index"])throw new n.ErrorCoded(`Attempt to add illegal key to value object: '${s}': '${JSON.stringify(d)}'`,n.ERROR_CODES.INVALID_TERM_DEFINITION);break;case"@nest":if(t.Util.isPotentialKeyword(h)&&h!=="@nest")throw new n.ErrorCoded(`Found an invalid term @nest value in: '${s}': '${JSON.stringify(d)}'`,n.ERROR_CODES.INVALID_NEST_VALUE)}}break;default:throw new n.ErrorCoded(`Found an invalid term value: '${s}': '${d}'`,n.ERROR_CODES.INVALID_TERM_DEFINITION)}}}applyBaseEntry(a,c,s){return typeof a=="string"||(s&&!("@base"in a)&&c.parentContext&&typeof c.parentContext=="object"&&"@base"in c.parentContext&&(a["@base"]=c.parentContext["@base"],c.parentContext["@__baseDocument"]&&(a["@__baseDocument"]=!0)),c.baseIRI&&!c.external&&("@base"in a?a["@base"]!==null&&typeof a["@base"]=="string"&&!t.Util.isValidIri(a["@base"])&&(a["@base"]=(0,u.resolve)(a["@base"],c.parentContext&&c.parentContext["@base"]||c.baseIRI)):(a["@base"]=c.baseIRI,a["@__baseDocument"]=!0))),a}normalizeContextIri(a,c){if(!t.Util.isValidIri(a))try{a=(0,u.resolve)(a,c)}catch{throw new Error(`Invalid context IRI: ${a}`)}return this.redirectSchemaOrgHttps&&a.startsWith("http://schema.org")&&(a="https://schema.org/"),a}async parseInnerContexts(a,c,s){for(const d of s??Object.keys(a)){const l=a[d];if(l&&typeof l=="object"&&"@context"in l&&l["@context"]!==null&&!c.ignoreScopedContexts){if(this.validateContext)try{const f=Object.assign(Object.assign({},a),{[d]:Object.assign({},a[d])});delete f[d]["@context"],await this.parse(l["@context"],Object.assign(Object.assign({},c),{external:!1,parentContext:f,ignoreProtection:!0,ignoreRemoteScopedContexts:!0,ignoreScopedContexts:!0}))}catch(f){throw new n.ErrorCoded(f.message,n.ERROR_CODES.INVALID_SCOPED_CONTEXT)}a[d]=Object.assign(Object.assign({},l),{"@context":(await this.parse(l["@context"],Object.assign(Object.assign({},c),{external:!1,minimalProcessing:!0,ignoreRemoteScopedContexts:!0,parentContext:a}))).getContextRaw()})}}return a}async parse(a,c={},s={}){const{baseIRI:d,parentContext:l,external:f,processingMode:h=Vl.DEFAULT_PROCESSING_MODE,normalizeLanguageTags:p,ignoreProtection:y,minimalProcessing:_}=c,b=c.remoteContexts||{};if(Object.keys(b).length>=this.remoteContextsDepthLimit)throw new n.ErrorCoded("Detected an overflow in remote context inclusions: "+Object.keys(b),n.ERROR_CODES.CONTEXT_OVERFLOW);if(a==null){if(!y&&l&&t.Util.hasProtectedTerms(l))throw new n.ErrorCoded("Illegal context nullification when terms are protected",n.ERROR_CODES.INVALID_CONTEXT_NULLIFICATION);return new i.JsonLdContextNormalized(this.applyBaseEntry({},c,!1))}else if(typeof a=="string"){const m=this.normalizeContextIri(a,d),g=this.getOverriddenLoad(m,c);if(g)return new i.JsonLdContextNormalized(g);const T=await this.parse(await this.load(m),Object.assign(Object.assign({},c),{baseIRI:m,external:!0,remoteContexts:Object.assign(Object.assign({},b),{[m]:!0})}));return this.applyBaseEntry(T.getContextRaw(),c,!0),T}else if(Array.isArray(a)){const m=[],g=await Promise.all(a.map((v,S)=>{if(typeof v=="string"){const F=this.normalizeContextIri(v,d);m[S]=F;const M=this.getOverriddenLoad(F,c);return M||this.load(F)}else return v}));if(_)return new i.JsonLdContextNormalized(g);const T=await g.reduce((v,S,F)=>v.then(M=>this.parse(S,Object.assign(Object.assign({},c),{baseIRI:m[F]||c.baseIRI,external:!!m[F]||c.external,parentContext:M.getContextRaw(),remoteContexts:m[F]?Object.assign(Object.assign({},b),{[m[F]]:!0}):b}),{skipValidation:F<g.length-1})),Promise.resolve(new i.JsonLdContextNormalized(l||{})));return this.applyBaseEntry(T.getContextRaw(),c,!0),T}else if(typeof a=="object"){if("@context"in a)return await this.parse(a["@context"],c);if(a=Object.assign({},a),f&&delete a["@base"],this.applyBaseEntry(a,c,!0),this.containersToHash(a),_)return new i.JsonLdContextNormalized(a);let m={};if("@import"in a)if(h>=1.1){if(typeof a["@import"]!="string")throw new n.ErrorCoded("An @import value must be a string, but got "+typeof a["@import"],n.ERROR_CODES.INVALID_IMPORT_VALUE);m=await this.loadImportContext(this.normalizeContextIri(a["@import"],d)),delete a["@import"]}else throw new n.ErrorCoded("Context importing is not supported in JSON-LD 1.0",n.ERROR_CODES.INVALID_CONTEXT_ENTRY);this.applyScopedProtected(m,{processingMode:h},i.defaultExpandOptions);const g=Object.assign(m,a);this.idifyReverseTerms(g),this.normalize(g,{processingMode:h,normalizeLanguageTags:p}),this.applyScopedProtected(g,{processingMode:h},i.defaultExpandOptions);const T=Object.keys(g),v=[];if(typeof l=="object")for(const F in l)F in g?v.push(F):g[F]=l[F];await this.parseInnerContexts(g,c,T);const S=new i.JsonLdContextNormalized(g);return(g&&g["@version"]||Vl.DEFAULT_PROCESSING_MODE)>=1.1&&(a["@vocab"]&&typeof a["@vocab"]=="string"||a["@vocab"]==="")&&(l&&"@vocab"in l&&a["@vocab"].indexOf(":")<0?g["@vocab"]=l["@vocab"]+a["@vocab"]:(t.Util.isCompactIri(a["@vocab"])||a["@vocab"]in g)&&(g["@vocab"]=S.expandTerm(a["@vocab"],!0))),this.expandPrefixedTerms(S,this.expandContentTypeToBase,T),!y&&l&&h>=1.1&&this.validateKeywordRedefinitions(l,g,i.defaultExpandOptions,v),this.validateContext&&!s.skipValidation&&this.validate(g,{processingMode:h}),S}else throw new n.ErrorCoded(`Tried parsing a context that is not a string, array or object, but got ${a}`,n.ERROR_CODES.INVALID_LOCAL_CONTEXT)}async load(a){const c=this.documentCache[a];if(c)return c;let s;try{s=await this.documentLoader.load(a)}catch(d){throw new n.ErrorCoded(`Failed to load remote context ${a}: ${d.message}`,n.ERROR_CODES.LOADING_REMOTE_CONTEXT_FAILED)}if(!("@context"in s))throw new n.ErrorCoded(`Missing @context in remote context at ${a}`,n.ERROR_CODES.INVALID_REMOTE_CONTEXT);return this.documentCache[a]=s["@context"]}getOverriddenLoad(a,c){if(a in(c.remoteContexts||{})){if(c.ignoreRemoteScopedContexts)return a;throw new n.ErrorCoded("Detected a cyclic context inclusion of "+a,n.ERROR_CODES.RECURSIVE_CONTEXT_INCLUSION)}return null}async loadImportContext(a){let c=await this.load(a);if(typeof c!="object"||Array.isArray(c))throw new n.ErrorCoded("An imported context must be a single object: "+a,n.ERROR_CODES.INVALID_REMOTE_CONTEXT);if("@import"in c)throw new n.ErrorCoded("An imported context can not import another context: "+a,n.ERROR_CODES.INVALID_CONTEXT_ENTRY);return c=Object.assign({},c),this.containersToHash(c),c}};return e.DEFAULT_PROCESSING_MODE=1.1,jm.ContextParser=e,jm}var PE={},BU;function ece(){return BU||(BU=1,Object.defineProperty(PE,"__esModule",{value:!0})),PE}var DE={},$U;function tce(){return $U||($U=1,Object.defineProperty(DE,"__esModule",{value:!0})),DE}var UU;function rce(){return UU||(UU=1,(function(u){var n=Xc&&Xc.__createBinding||(Object.create?(function(i,t,e,r){r===void 0&&(r=e);var a=Object.getOwnPropertyDescriptor(t,e);(!a||("get"in a?!t.__esModule:a.writable||a.configurable))&&(a={enumerable:!0,get:function(){return t[e]}}),Object.defineProperty(i,r,a)}):(function(i,t,e,r){r===void 0&&(r=e),i[r]=t[e]})),o=Xc&&Xc.__exportStar||function(i,t){for(var e in i)e!=="default"&&!Object.prototype.hasOwnProperty.call(t,e)&&n(t,i,e)};Object.defineProperty(u,"__esModule",{value:!0}),o(Zse(),u),o(fw(),u),o(jU(),u),o(ece(),u),o(tce(),u),o(qU(),u),o(IE(),u)})(Xc)),Xc}var VU;function QU(){if(VU)return Nm;VU=1,Object.defineProperty(Nm,"__esModule",{value:!0}),Nm.DocumentLoaderMediated=void 0;const u=Ti(),n=xf(),o=rce();let i=class _J extends o.FetchDocumentLoader{constructor(e,r){super(_J.createFetcher(e,r)),this.mediatorHttp=e,this.context=r}static createFetcher(e,r){return async(a,c)=>{const s=await e.mediate({input:a,init:c,context:r});return s.json=async()=>JSON.parse(await(0,n.stringify)(u.ActorHttp.toNodeReadable(s.body))),s}}};return Nm.DocumentLoaderMediated=i,Nm}var HU;function nce(){if(HU)return dm;HU=1,Object.defineProperty(dm,"__esModule",{value:!0}),dm.ActorRdfParseJsonLd=void 0;const u=mf(),n=qe(),o=pe(),i=Yse(),t=QU();let e=class extends u.ActorRdfParseFixedMediaTypes{constructor(a){super(a)}async testHandle(a,c,s){return s.has(n.KeysRdfParseHtmlScript.processingHtmlScript)&&c!=="application/ld+json"?(0,o.failTest)("JSON-LD in script tags can only have media type 'application/ld+json'"):!c||!(c in this.mediaTypePriorities||c.endsWith("+json"))?(0,o.failTest)(`Unrecognized media type: ${c}`):await this.testHandleChecked(a)}async runHandle(a,c,s){var h;const d=a.context.getSafe(n.KeysInitQuery.dataFactory);return{data:i.JsonLdParser.fromHttpResponse(((h=a.metadata)==null?void 0:h.baseIRI)??"",c,a.headers,{dataFactory:d,documentLoader:s.get(n.KeysRdfParseJsonLd.documentLoader)??new t.DocumentLoaderMediated(this.mediatorHttp,s),strictValues:s.get(n.KeysRdfParseJsonLd.strictValues),...s.get(n.KeysRdfParseJsonLd.parserOptions)}).import(a.data)}}};return dm.ActorRdfParseJsonLd=e,dm}var GU;function ice(){return GU||(GU=1,(function(u){var n=Hc&&Hc.__createBinding||(Object.create?(function(i,t,e,r){r===void 0&&(r=e);var a=Object.getOwnPropertyDescriptor(t,e);(!a||("get"in a?!t.__esModule:a.writable||a.configurable))&&(a={enumerable:!0,get:function(){return t[e]}}),Object.defineProperty(i,r,a)}):(function(i,t,e,r){r===void 0&&(r=e),i[r]=t[e]})),o=Hc&&Hc.__exportStar||function(i,t){for(var e in i)e!=="default"&&!Object.prototype.hasOwnProperty.call(t,e)&&n(t,i,e)};Object.defineProperty(u,"__esModule",{value:!0}),o(nce(),u),o(QU(),u)})(Hc)),Hc}var Jc={},qm={},Kc={},Cm={},zU;function ace(){if(zU)return Cm;zU=1,Object.defineProperty(Cm,"__esModule",{value:!0}),Cm.ActorRdfUpdateHypermedia=void 0;const u=pe();let n=class extends u.Actor{constructor(i,t){super(i),this.destinationType=t}async test(i){return i.forceDestinationType&&this.destinationType!==i.forceDestinationType?(0,u.failTest)(`Actor ${this.name} is not able to handle destination type ${i.forceDestinationType}.`):this.testMetadata(i)}};return Cm.ActorRdfUpdateHypermedia=n,Cm}var XU;function NE(){return XU||(XU=1,(function(u){var n=Kc&&Kc.__createBinding||(Object.create?(function(i,t,e,r){r===void 0&&(r=e);var a=Object.getOwnPropertyDescriptor(t,e);(!a||("get"in a?!t.__esModule:a.writable||a.configurable))&&(a={enumerable:!0,get:function(){return t[e]}}),Object.defineProperty(i,r,a)}):(function(i,t,e,r){r===void 0&&(r=e),i[r]=t[e]})),o=Kc&&Kc.__exportStar||function(i,t){for(var e in i)e!=="default"&&!Object.prototype.hasOwnProperty.call(t,e)&&n(t,i,e)};Object.defineProperty(u,"__esModule",{value:!0}),o(ace(),u)})(Kc)),Kc}var Bm={},JU;function KU(){if(JU)return Bm;JU=1,Object.defineProperty(Bm,"__esModule",{value:!0}),Bm.QuadDestinationPatchSparqlUpdate=void 0;const u=Ti(),n=pt(),o=E0(),i=Pt();let t=class{constructor(r,a,c){this.url=r,this.context=a,this.mediatorHttp=c}async update(r){const a=this.createCombinedQuadsQuery(r.insert,r.delete);await this.wrapSparqlUpdateRequest(a)}createCombinedQuadsQuery(r,a){return new n.ArrayIterator([],{autoStart:!1}).append(this.createQuadsQuery("DELETE",a)).append(a&&r?[` ;
`]:[]).append(this.createQuadsQuery("INSERT",r))}createQuadsQuery(r,a){return a?a.map(c=>{let s=`${(0,o.termToString)(c.subject)} ${(0,o.termToString)(c.predicate)} ${(0,o.termToString)(c.object)} .`;return c.graph.termType==="DefaultGraph"?s=`  ${s}
`:s=`  GRAPH ${(0,o.termToString)(c.graph)} { ${s} }
`,s}).prepend([`${r} DATA {
`]).append(["}"]):new n.ArrayIterator([],{autoStart:!1})}async wrapSparqlUpdateRequest(r){const a=new i.Readable;a.wrap(r);const c=new Headers({"content-type":"application/sparql-update"}),s=await this.mediatorHttp.mediate({context:this.context,init:{headers:c,method:"PATCH",body:u.ActorHttp.toWebReadableStream(a)},input:this.url});await(0,u.validateAndCloseHttpResponse)(this.url,s)}async deleteGraphs(r,a,c){throw new Error("Patch-based SPARQL Update destinations don't support named graphs")}async createGraphs(r,a){throw new Error("Patch-based SPARQL Update destinations don't support named graphs")}};return Bm.QuadDestinationPatchSparqlUpdate=t,Bm}var kU;function uce(){if(kU)return qm;kU=1,Object.defineProperty(qm,"__esModule",{value:!0}),qm.ActorRdfUpdateHypermediaPatchSparqlUpdate=void 0;const u=NE(),n=pe(),o=KU();let i=class extends u.ActorRdfUpdateHypermedia{constructor(e){super(e,"patchSparqlUpdate")}async testMetadata(e){return!e.forceDestinationType&&!e.metadata.patchSparqlUpdate?(0,n.failTest)(`Actor ${this.name} could not detect a destination with 'application/sparql-update' as 'Accept-Patch' header.`):!e.forceDestinationType&&!e.exists?(0,n.failTest)(`Actor ${this.name} can only patch a destination that already exists.`):(0,n.passTestVoid)()}async run(e){return this.logInfo(e.context,`Identified as patchSparqlUpdate destination: ${e.url}`),{destination:new o.QuadDestinationPatchSparqlUpdate(e.url,e.context,this.mediatorHttp)}}};return qm.ActorRdfUpdateHypermediaPatchSparqlUpdate=i,qm}var WU;function oce(){return WU||(WU=1,(function(u){var n=Jc&&Jc.__createBinding||(Object.create?(function(i,t,e,r){r===void 0&&(r=e);var a=Object.getOwnPropertyDescriptor(t,e);(!a||("get"in a?!t.__esModule:a.writable||a.configurable))&&(a={enumerable:!0,get:function(){return t[e]}}),Object.defineProperty(i,r,a)}):(function(i,t,e,r){r===void 0&&(r=e),i[r]=t[e]})),o=Jc&&Jc.__exportStar||function(i,t){for(var e in i)e!=="default"&&!Object.prototype.hasOwnProperty.call(t,e)&&n(t,i,e)};Object.defineProperty(u,"__esModule",{value:!0}),o(uce(),u),o(KU(),u)})(Jc)),Jc}var kc={},$m={},Um={},YU;function ZU(){if(YU)return Um;YU=1,Object.defineProperty(Um,"__esModule",{value:!0}),Um.QuadDestinationPutLdp=void 0;const u=Ti();let n=class{constructor(i,t,e,r,a,c){this.url=i,this.context=t,this.mediaTypes=e,this.mediatorHttp=r,this.mediatorRdfSerializeMediatypes=a,this.mediatorRdfSerialize=c}async update(i){if(i.delete)throw new Error("Put-based LDP destinations don't support deletions");i.insert&&await this.wrapRdfUpdateRequest("INSERT",i.insert)}async wrapRdfUpdateRequest(i,t){const{mediaTypes:e}=await this.mediatorRdfSerializeMediatypes.mediate({context:this.context,mediaTypes:!0}),r=this.mediaTypes.filter(l=>l in e),a=r.length>0?r[0]:Object.keys(e).sort((l,f)=>e[f]-e[l])[0],{handle:{data:c}}=await this.mediatorRdfSerialize.mediate({context:this.context,handle:{quadStream:t,context:this.context},handleMediaType:a}),s=new Headers({"content-type":a}),d=await this.mediatorHttp.mediate({context:this.context,init:{headers:s,method:"PUT",body:u.ActorHttp.toWebReadableStream(c)},input:this.url});await(0,u.validateAndCloseHttpResponse)(this.url,d)}async deleteGraphs(i,t,e){throw new Error("Put-based LDP destinations don't support named graphs")}async createGraphs(i,t){throw new Error("Put-based LDP destinations don't support named graphs")}};return Um.QuadDestinationPutLdp=n,Um}var eV;function sce(){if(eV)return $m;eV=1,Object.defineProperty($m,"__esModule",{value:!0}),$m.ActorRdfUpdateHypermediaPutLdp=void 0;const u=NE(),n=pe(),o=ZU();let i=class extends u.ActorRdfUpdateHypermedia{constructor(e){super(e,"putLdp")}async testMetadata(e){if(!e.forceDestinationType){if(!e.metadata.allowHttpMethods||!e.metadata.allowHttpMethods.includes("PUT"))return(0,n.failTest)(`Actor ${this.name} could not detect a destination with 'Allow: PUT' header.`);if(e.exists)return(0,n.failTest)(`Actor ${this.name} can only put on a destination that does not already exists.`)}return(0,n.passTestVoid)()}async run(e){return this.logInfo(e.context,`Identified as putLdp destination: ${e.url}`),{destination:new o.QuadDestinationPutLdp(e.url,e.context,e.metadata.putAccepted||[],this.mediatorHttp,this.mediatorRdfSerializeMediatypes,this.mediatorRdfSerialize)}}};return $m.ActorRdfUpdateHypermediaPutLdp=i,$m}var tV;function cce(){return tV||(tV=1,(function(u){var n=kc&&kc.__createBinding||(Object.create?(function(i,t,e,r){r===void 0&&(r=e);var a=Object.getOwnPropertyDescriptor(t,e);(!a||("get"in a?!t.__esModule:a.writable||a.configurable))&&(a={enumerable:!0,get:function(){return t[e]}}),Object.defineProperty(i,r,a)}):(function(i,t,e,r){r===void 0&&(r=e),i[r]=t[e]})),o=kc&&kc.__exportStar||function(i,t){for(var e in i)e!=="default"&&!Object.prototype.hasOwnProperty.call(t,e)&&n(t,i,e)};Object.defineProperty(u,"__esModule",{value:!0}),o(sce(),u),o(ZU(),u)})(kc)),kc}var Wc={},Vm={},Qm={},Yc={},Zc={},ed={},Hm={},rV;function dce(){if(rV)return Hm;rV=1,Object.defineProperty(Hm,"__esModule",{value:!0}),Hm.SparqlXmlParser=void 0;const u=hr(),n=ij(),o=Pt();let i=class{constructor(e){e=e||{},this.dataFactory=e.dataFactory||new u.DataFactory,this.prefixVariableQuestionMark=!!e.prefixVariableQuestionMark}parseXmlResultsStream(e){const r=g=>m.emit("error",g);e.on("error",r);const a=new n.SaxesParser,c=[];let s=!1,d=!1;const l=[];let f={},h="",p="",y,_="",b=[];a.on("error",r),a.on("opentag",g=>{g.name==="variable"&&this.stackEquals(c,["sparql","head"])?l.push(this.dataFactory.variable(g.attributes.name)):g.name==="results"&&this.stackEquals(c,["sparql"])?d=!0:g.name==="result"&&this.stackEquals(c,["sparql","results"])?f={}:g.name==="binding"&&this.stackEquals(c,["sparql","results","result"])?(h=g.attributes.name||"",p="",y="",_="",b=[]):g.name==="triple"&&this.stackBeginsWith(c,["sparql","results","result"])?b.push({components:{}}):c[c.length-1]==="triple"&&this.stackBeginsWith(c,["sparql","results","result","binding"])?(p="",y="",_="",["subject","predicate","object"].includes(g.name)?b[b.length-1].currentComponent=g.name:r(new Error(`Illegal quoted triple component '${g.name}' found on line ${a.line+1}`))):this.stackBeginsWith(c,["sparql","results","result","binding"])&&(p=g.name,"xml:lang"in g.attributes?y=g.attributes["xml:lang"]:"datatype"in g.attributes?y=this.dataFactory.namedNode(g.attributes.datatype):y=void 0),c.push(g.name)}),a.on("closetag",g=>{if(this.stackEquals(c,["sparql","head"])&&(m.emit("variables",l),s=!0),this.stackEquals(c,["sparql","results","result"])&&m.push(f),this.stackBeginsWith(c,["sparql","results","result","binding"])){let T;if(!h&&p)r(new Error(`Terms should have a name on line ${a.line+1}`));else if(p==="uri")T=this.dataFactory.namedNode(_);else if(p==="bnode")T=this.dataFactory.blankNode(_);else if(p==="literal")T=this.dataFactory.literal(_,y);else if(c[c.length-1]==="triple"){const v=b.pop();v&&v.components.subject&&v.components.predicate&&v.components.object?T=this.dataFactory.quad(v.components.subject,v.components.predicate,v.components.object):r(new Error(`Incomplete quoted triple on line ${a.line+1}`))}else p&&r(new Error(`Invalid term type '${p}' on line ${a.line+1}`));if(T)if(b.length>0){const v=b[b.length-1];v.components[v.currentComponent]&&r(new Error(`The ${v.currentComponent} in a quoted triple on line ${a.line+1} was already defined before`)),v.components[v.currentComponent]=T}else{const v=this.prefixVariableQuestionMark?"?"+h:h;f[v]=T}p=void 0}c.pop()}),a.on("text",g=>{this.stackBeginsWith(c,["sparql","results","result","binding"])&&c[c.length-1]===p&&(_=g)});const m=e.on("end",g=>{d?s||m.emit("variables",[]):m.emit("error",new Error("No valid SPARQL query results were found."))}).pipe(new o.Transform({objectMode:!0,transform(g,T,v){a.write(g),v()}}));return m}parseXmlBooleanStream(e){return new Promise((r,a)=>{const c=new n.SaxesParser,s=[];c.on("error",a),c.on("opentag",d=>{s.push(d.name)}),c.on("closetag",d=>{s.pop()}),c.on("text",d=>{this.stackEquals(s,["sparql","boolean"])&&r(d==="true")}),e.on("error",a).on("data",d=>c.write(d)).on("end",()=>a(new Error("No valid ASK response was found.")))})}stackEquals(e,r){return e.length===r.length&&e.every((a,c)=>r[c]===a)}stackBeginsWith(e,r){return e.length>=r.length&&r.every((a,c)=>e[c]===a)}};return Hm.SparqlXmlParser=i,Hm}var nV;function lce(){return nV||(nV=1,(function(u){var n=ed&&ed.__createBinding||(Object.create?(function(i,t,e,r){r===void 0&&(r=e);var a=Object.getOwnPropertyDescriptor(t,e);(!a||("get"in a?!t.__esModule:a.writable||a.configurable))&&(a={enumerable:!0,get:function(){return t[e]}}),Object.defineProperty(i,r,a)}):(function(i,t,e,r){r===void 0&&(r=e),i[r]=t[e]})),o=ed&&ed.__exportStar||function(i,t){for(var e in i)e!=="default"&&!Object.prototype.hasOwnProperty.call(t,e)&&n(t,i,e)};Object.defineProperty(u,"__esModule",{value:!0}),o(dce(),u)})(ed)),ed}var jE={exports:{}},iV;function fce(){return iV||(iV=1,(function(u){(function(){var n;typeof window=="object"&&window?n=window:n=Et,u.exports?u.exports=n.Promise?n.Promise:e:n.Promise||(n.Promise=e);var o=n.setImmediate||function(f){setTimeout(f,1)};function i(f,h){return function(){f.apply(h,arguments)}}var t=Array.isArray||function(f){return Object.prototype.toString.call(f)==="[object Array]"};function e(f){if(typeof this!="object")throw new TypeError("Promises must be constructed via new");if(typeof f!="function")throw new TypeError("not a function");this._state=null,this._value=null,this._deferreds=[],l(f,i(a,this),i(c,this))}function r(f){var h=this;if(this._state===null){this._deferreds.push(f);return}o(function(){var p=h._state?f.onFulfilled:f.onRejected;if(p===null){(h._state?f.resolve:f.reject)(h._value);return}var y;try{y=p(h._value)}catch(_){f.reject(_);return}f.resolve(y)})}function a(f){try{if(f===this)throw new TypeError("A promise cannot be resolved with itself.");if(f&&(typeof f=="object"||typeof f=="function")){var h=f.then;if(typeof h=="function"){l(i(h,f),i(a,this),i(c,this));return}}this._state=!0,this._value=f,s.call(this)}catch(p){c.call(this,p)}}function c(f){this._state=!1,this._value=f,s.call(this)}function s(){for(var f=0,h=this._deferreds.length;f<h;f++)r.call(this,this._deferreds[f]);this._deferreds=null}function d(f,h,p,y){this.onFulfilled=typeof f=="function"?f:null,this.onRejected=typeof h=="function"?h:null,this.resolve=p,this.reject=y}function l(f,h,p){var y=!1;try{f(function(_){y||(y=!0,h(_))},function(_){y||(y=!0,p(_))})}catch(_){if(y)return;y=!0,p(_)}}e.prototype.catch=function(f){return this.then(null,f)},e.prototype.then=function(f,h){var p=this;return new e(function(y,_){r.call(p,new d(f,h,y,_))})},e.all=function(){var f=Array.prototype.slice.call(arguments.length===1&&t(arguments[0])?arguments[0]:arguments);return new e(function(h,p){if(f.length===0)return h([]);var y=f.length;function _(m,g){try{if(g&&(typeof g=="object"||typeof g=="function")){var T=g.then;if(typeof T=="function"){T.call(g,function(v){_(m,v)},p);return}}f[m]=g,--y===0&&h(f)}catch(v){p(v)}}for(var b=0;b<f.length;b++)_(b,f[b])})},e.resolve=function(f){return f&&typeof f=="object"&&f.constructor===e?f:new e(function(h){h(f)})},e.reject=function(f){return new e(function(h,p){p(f)})},e.race=function(f){return new e(function(h,p){for(var y=0,_=f.length;y<_;y++)f[y].then(h,p)})}})()})(jE)),jE.exports}var LE,aV;function hce(){if(aV)return LE;aV=1;var u=fce();return LE=function(n,o,i){typeof o=="function"&&(i=o,o=null);var t="",e=new u(function(r,a){n.on("data",function(c){t+=typeof o=="string"?c.toString(o):c.toString()}),n.on("end",function(){r(t)}),n.on("error",a)});return i&&e.then(function(r){i(null,r)},i),e},LE}var uV;function pce(){if(uV)return Zc;uV=1;var u=Zc&&Zc.__awaiter||function(s,d,l,f){function h(p){return p instanceof l?p:new l(function(y){y(p)})}return new(l||(l=Promise))(function(p,y){function _(g){try{m(f.next(g))}catch(T){y(T)}}function b(g){try{m(f.throw(g))}catch(T){y(T)}}function m(g){g.done?p(g.value):h(g.value).then(_,b)}m((f=f.apply(s,d||[])).next())})};Object.defineProperty(Zc,"__esModule",{value:!0}),Zc.SparqlEndpointFetcher=void 0;const n=QC(),o=Xi,i=UC(),t=Vh(),e=bN(),r=lce(),a=hce();let c=class zf{constructor(d){var l,f,h;this.method=(l=d==null?void 0:d.method)!==null&&l!==void 0?l:"POST",this.timeout=d==null?void 0:d.timeout,this.additionalUrlParams=(f=d==null?void 0:d.additionalUrlParams)!==null&&f!==void 0?f:new URLSearchParams,this.defaultHeaders=(h=d==null?void 0:d.defaultHeaders)!==null&&h!==void 0?h:new Headers,this.fetchCb=d==null?void 0:d.fetch,this.sparqlJsonParser=new e.SparqlJsonParser(d),this.sparqlXmlParser=new r.SparqlXmlParser(d),this.sparqlParsers={[zf.CONTENTTYPE_SPARQL_JSON]:{parseBooleanStream:p=>this.sparqlJsonParser.parseJsonBooleanStream(p),parseResultsStream:p=>this.sparqlJsonParser.parseJsonResultsStream(p)},[zf.CONTENTTYPE_SPARQL_XML]:{parseBooleanStream:p=>this.sparqlXmlParser.parseXmlBooleanStream(p),parseResultsStream:p=>this.sparqlXmlParser.parseXmlResultsStream(p)}}}getQueryType(d){const l=new t.Parser({sparqlStar:!0}).parse(d);return l.type==="query"?l.queryType==="DESCRIBE"?"CONSTRUCT":l.queryType:"UNKNOWN"}getUpdateTypes(d){const l=new t.Parser({sparqlStar:!0}).parse(d);if(l.type==="update"){const f={};for(const h of l.updates)"type"in h?f[h.type]=!0:f[h.updateType]=!0;return f}return"UNKNOWN"}fetchBindings(d,l){return u(this,void 0,void 0,function*(){const[f,h]=yield this.fetchRawStream(d,l,zf.CONTENTTYPE_SPARQL),p=this.sparqlParsers[f];if(!p)throw new Error(`Unknown SPARQL results content type: ${f}`);return p.parseResultsStream(h)})}fetchAsk(d,l){return u(this,void 0,void 0,function*(){const[f,h]=yield this.fetchRawStream(d,l,zf.CONTENTTYPE_SPARQL),p=this.sparqlParsers[f];if(!p)throw new Error(`Unknown SPARQL results content type: ${f}`);return p.parseBooleanStream(h)})}fetchTriples(d,l){return u(this,void 0,void 0,function*(){const[f,h]=yield this.fetchRawStream(d,l,zf.CONTENTTYPE_TURTLE);return h.pipe(new o.StreamParser({format:f}))})}fetchUpdate(d,l){return u(this,void 0,void 0,function*(){const f=new AbortController,h={};this.defaultHeaders.forEach((y,_)=>{h[_]=y});const p={method:"POST",headers:Object.assign(Object.assign({},h),{"content-type":"application/sparql-update"}),body:l,signal:f.signal};yield this.handleFetchCall(d,p,{ignoreBody:!0}),f.abort()})}fetchRawStream(d,l,f){return u(this,void 0,void 0,function*(){let h=this.method==="POST"?d:`${d}?query=${encodeURIComponent(l)}`,p;const y=new Headers(this.defaultHeaders);if(y.append("Accept",f),this.method==="POST"){y.append("Content-Type","application/x-www-form-urlencoded"),p=new URLSearchParams,p.set("query",l);for(const[_,b]of this.additionalUrlParams.entries())p.set(_,b);y.append("Content-Length",p.toString().length.toString())}else this.additionalUrlParams.toString().length>0&&(h+=`&${this.additionalUrlParams.toString()}`);return this.handleFetchCall(h,{headers:y,method:this.method,body:p})})}handleFetchCall(d,l,f){return u(this,void 0,void 0,function*(){var h,p,y;let _,b;if(this.timeout){const T=new AbortController;l.signal=T.signal,_=setTimeout(()=>T.abort(),this.timeout)}const m=yield((h=this.fetchCb)!==null&&h!==void 0?h:fetch)(d,l);if(clearTimeout(_),!(f!=null&&f.ignoreBody)&&m.body&&(b=n(m.body)?m.body:(0,i.readableFromWeb)(m.body)),!m.ok||!b&&!(f!=null&&f.ignoreBody)){const T=d.split("?").at(0),v=b?yield a(b):"empty response";throw new Error(`Invalid SPARQL endpoint response from ${T} (HTTP status ${m.status}):
${v}`)}return[(y=(p=m.headers.get("Content-Type"))===null||p===void 0?void 0:p.split(";").at(0))!==null&&y!==void 0?y:"",b]})}};return Zc.SparqlEndpointFetcher=c,c.CONTENTTYPE_SPARQL_JSON="application/sparql-results+json",c.CONTENTTYPE_SPARQL_XML="application/sparql-results+xml",c.CONTENTTYPE_TURTLE="text/turtle",c.CONTENTTYPE_SPARQL=`${c.CONTENTTYPE_SPARQL_JSON};q=1.0,${c.CONTENTTYPE_SPARQL_XML};q=0.7`,Zc}var oV;function sV(){return oV||(oV=1,(function(u){var n=Yc&&Yc.__createBinding||(Object.create?(function(i,t,e,r){r===void 0&&(r=e);var a=Object.getOwnPropertyDescriptor(t,e);(!a||("get"in a?!t.__esModule:a.writable||a.configurable))&&(a={enumerable:!0,get:function(){return t[e]}}),Object.defineProperty(i,r,a)}):(function(i,t,e,r){r===void 0&&(r=e),i[r]=t[e]})),o=Yc&&Yc.__exportStar||function(i,t){for(var e in i)e!=="default"&&!Object.prototype.hasOwnProperty.call(t,e)&&n(t,i,e)};Object.defineProperty(u,"__esModule",{value:!0}),o(pce(),u)})(Yc)),Yc}var cV;function dV(){if(cV)return Qm;cV=1,Object.defineProperty(Qm,"__esModule",{value:!0}),Qm.QuadDestinationSparql=void 0;const u=xf(),n=pt(),o=sV(),i=E0();let t=class{constructor(r,a,c,s){this.url=r,this.context=a,this.mediatorHttp=c,this.endpointFetcher=new o.SparqlEndpointFetcher({fetch:(d,l)=>this.mediatorHttp.mediate({input:d,init:l,context:this.context}),prefixVariableQuestionMark:!0,dataFactory:s})}async update(r){const a=this.createCombinedQuadsQuery(r.insert,r.delete);await this.wrapSparqlUpdateRequest(a)}createCombinedQuadsQuery(r,a){return new n.ArrayIterator([],{autoStart:!1}).append(this.createQuadsQuery("DELETE",a)).append(a&&r?[` ;
`]:[]).append(this.createQuadsQuery("INSERT",r))}createQuadsQuery(r,a){return a?a.map(c=>{let s=`${(0,i.termToString)(c.subject)} ${(0,i.termToString)(c.predicate)} ${(0,i.termToString)(c.object)} .`;return c.graph.termType==="DefaultGraph"?s=`  ${s}
`:s=`  GRAPH ${(0,i.termToString)(c.graph)} { ${s} }
`,s}).prepend([`${r} DATA {
`]).append(["}"]):new n.ArrayIterator([],{autoStart:!1})}async wrapSparqlUpdateRequest(r){const a=await(0,u.stringify)(r);await this.endpointFetcher.fetchUpdate(this.url,a)}async deleteGraphs(r,a,c){const s=Array.isArray(r)?r:[r],d=[];for(const l of s){let f;typeof l=="string"?f=l:l.termType==="DefaultGraph"?f="DEFAULT":f=`GRAPH <${l.value}>`,d.push(`${c?"DROP":"CLEAR"} ${a?"":"SILENT "}${f}`)}await this.endpointFetcher.fetchUpdate(this.url,d.join("; "))}async createGraphs(r,a){const c=[];for(const s of r)c.push(`CREATE${a?"":" SILENT"} GRAPH <${s.value}>`);await this.endpointFetcher.fetchUpdate(this.url,c.join("; "))}};return Qm.QuadDestinationSparql=t,Qm}var lV;function yce(){if(lV)return Vm;lV=1,Object.defineProperty(Vm,"__esModule",{value:!0}),Vm.ActorRdfUpdateHypermediaSparql=void 0;const u=NE(),n=qe(),o=pe(),i=dV();let t=class extends u.ActorRdfUpdateHypermedia{constructor(r){super(r,"sparql")}async testMetadata(r){return!r.forceDestinationType&&!r.metadata.sparqlService&&!(this.checkUrlSuffixSparql&&(r.url.endsWith("/sparql")||r.url.endsWith("/sparql/")))&&!(this.checkUrlSuffixUpdate&&(r.url.endsWith("/update")||r.url.endsWith("/update/")))?(0,o.failTest)(`Actor ${this.name} could not detect a SPARQL service description or URL ending on /sparql or /update.`):(0,o.passTestVoid)()}async run(r){this.logInfo(r.context,`Identified as sparql destination: ${r.url}`);const a=r.context.getSafe(n.KeysInitQuery.dataFactory);return{destination:new i.QuadDestinationSparql(r.metadata.sparqlService||r.url,r.context,this.mediatorHttp,a)}}};return Vm.ActorRdfUpdateHypermediaSparql=t,Vm}var fV;function bce(){return fV||(fV=1,(function(u){var n=Wc&&Wc.__createBinding||(Object.create?(function(i,t,e,r){r===void 0&&(r=e);var a=Object.getOwnPropertyDescriptor(t,e);(!a||("get"in a?!t.__esModule:a.writable||a.configurable))&&(a={enumerable:!0,get:function(){return t[e]}}),Object.defineProperty(i,r,a)}):(function(i,t,e,r){r===void 0&&(r=e),i[r]=t[e]})),o=Wc&&Wc.__exportStar||function(i,t){for(var e in i)e!=="default"&&!Object.prototype.hasOwnProperty.call(t,e)&&n(t,i,e)};Object.defineProperty(u,"__esModule",{value:!0}),o(yce(),u),o(dV(),u)})(Wc)),Wc}var td={},Gm={},hV;function _ce(){if(hV)return Gm;hV=1,Object.defineProperty(Gm,"__esModule",{value:!0}),Gm.ActorQueryOperationAsk=void 0;const u=qt(),n=pe(),o=_t();let i=class extends u.ActorQueryOperationTypedMediated{constructor(e){super(e,"ask")}async testOperation(e,r){return(0,n.passTestVoid)()}async runOperation(e,r){const a=await this.mediatorQueryOperation.mediate({operation:e.input,context:r}),{bindingsStream:c}=(0,o.getSafeBindings)(a);return{type:"boolean",execute:async()=>(await c.take(1).toArray()).length===1}}};return Gm.ActorQueryOperationAsk=i,Gm}var pV;function gce(){return pV||(pV=1,(function(u){var n=td&&td.__createBinding||(Object.create?(function(i,t,e,r){r===void 0&&(r=e);var a=Object.getOwnPropertyDescriptor(t,e);(!a||("get"in a?!t.__esModule:a.writable||a.configurable))&&(a={enumerable:!0,get:function(){return t[e]}}),Object.defineProperty(i,r,a)}):(function(i,t,e,r){r===void 0&&(r=e),i[r]=t[e]})),o=td&&td.__exportStar||function(i,t){for(var e in i)e!=="default"&&!Object.prototype.hasOwnProperty.call(t,e)&&n(t,i,e)};Object.defineProperty(u,"__esModule",{value:!0}),o(_ce(),u)})(td)),td}var rd={},zm={},yV;function mce(){if(yV)return zm;yV=1,Object.defineProperty(zm,"__esModule",{value:!0}),zm.ActorQueryOperationBgpJoin=void 0;const u=qt(),n=qe(),o=pe(),i=st();let t=class extends u.ActorQueryOperationTypedMediated{constructor(r){super(r,"bgp")}async testOperation(r,a){return(0,o.passTestVoid)()}async runOperation(r,a){const c=a.getSafe(n.KeysInitQuery.dataFactory),s=new i.Factory(c);return this.mediatorQueryOperation.mediate({operation:s.createJoin(r.patterns),context:a})}};return zm.ActorQueryOperationBgpJoin=t,zm}var bV;function vce(){return bV||(bV=1,(function(u){var n=rd&&rd.__createBinding||(Object.create?(function(i,t,e,r){r===void 0&&(r=e);var a=Object.getOwnPropertyDescriptor(t,e);(!a||("get"in a?!t.__esModule:a.writable||a.configurable))&&(a={enumerable:!0,get:function(){return t[e]}}),Object.defineProperty(i,r,a)}):(function(i,t,e,r){r===void 0&&(r=e),i[r]=t[e]})),o=rd&&rd.__exportStar||function(i,t){for(var e in i)e!=="default"&&!Object.prototype.hasOwnProperty.call(t,e)&&n(t,i,e)};Object.defineProperty(u,"__esModule",{value:!0}),o(mce(),u)})(rd)),rd}var nd={},Xm={},Jm={},_V;function gV(){if(_V)return Jm;_V=1,Object.defineProperty(Jm,"__esModule",{value:!0}),Jm.BindingsToQuadsIterator=void 0;const u=pt(),n=_n();let o=class FT extends u.MultiTransformIterator{constructor(t,e,r){super(r,{autoStart:!1}),this.dataFactory=t,this.template=e,this.blankNodeCounter=0}static bindTerm(t,e){return e.termType==="Variable"?t.get(e):e}static bindQuad(t,e){try{return(0,n.mapTermsNested)(e,r=>{const a=FT.bindTerm(t,r);if(!a)throw new Error("Unbound term");return a})}catch{}}static localizeBlankNode(t,e,r){return r.termType==="BlankNode"?t.blankNode(`${r.value}${e}`):r}static localizeQuad(t,e,r){return(0,n.mapTermsNested)(r,a=>FT.localizeBlankNode(t,e,a))}bindTemplate(t,e,r){return e.map(FT.localizeQuad.bind(null,this.dataFactory,r)).map(c=>FT.bindQuad.bind(null,t)(c)).filter(Boolean)}_createTransformer(t){return new u.ArrayIterator(this.bindTemplate(t,this.template,this.blankNodeCounter++),{autoStart:!1})}};return Jm.BindingsToQuadsIterator=o,Jm}var mV;function Tce(){if(mV)return Xm;mV=1,Object.defineProperty(Xm,"__esModule",{value:!0}),Xm.ActorQueryOperationConstruct=void 0;const u=qt(),n=qe(),o=pe(),i=_t(),t=_n(),e=st(),r=gV();let a=class gJ extends u.ActorQueryOperationTypedMediated{constructor(s){super(s,"construct")}static getVariables(s){return(0,t.uniqTerms)([].concat.apply([],s.map(d=>(0,t.getVariables)((0,t.getTermsNested)(d)))))}async testOperation(s,d){return(0,o.passTestVoid)()}async runOperation(s,d){const l=d.getSafe(n.KeysInitQuery.dataFactory),f=gJ.getVariables(s.template),h={type:e.Algebra.types.PROJECT,input:s.input,variables:f},p=(0,i.getSafeBindings)(await this.mediatorQueryOperation.mediate({operation:h,context:d})),y=new r.BindingsToQuadsIterator(l,s.template,p.bindingsStream);return{metadata:()=>p.metadata().then(b=>({...b,order:void 0,cardinality:{type:b.cardinality.type,value:b.cardinality.value*s.template.length},availableOrders:void 0})),quadStream:y,type:"quads"}}};return Xm.ActorQueryOperationConstruct=a,Xm}var vV;function TV(){return vV||(vV=1,(function(u){var n=nd&&nd.__createBinding||(Object.create?(function(i,t,e,r){r===void 0&&(r=e);var a=Object.getOwnPropertyDescriptor(t,e);(!a||("get"in a?!t.__esModule:a.writable||a.configurable))&&(a={enumerable:!0,get:function(){return t[e]}}),Object.defineProperty(i,r,a)}):(function(i,t,e,r){r===void 0&&(r=e),i[r]=t[e]})),o=nd&&nd.__exportStar||function(i,t){for(var e in i)e!=="default"&&!Object.prototype.hasOwnProperty.call(t,e)&&n(t,i,e)};Object.defineProperty(u,"__esModule",{value:!0}),o(Tce(),u),o(gV(),u)})(nd)),nd}var id={},Km={},ME={},qn={},ad={},km={},wV;function SV(){if(wV)return km;wV=1,Object.defineProperty(km,"__esModule",{value:!0}),km.BlankNode=void 0;class u{constructor(o){this.termType="BlankNode",this.value=o}equals(o){return!!o&&o.termType==="BlankNode"&&o.value===this.value}}return km.BlankNode=u,km}var Wm={},Ym={},OV;function AV(){if(OV)return Ym;OV=1,Object.defineProperty(Ym,"__esModule",{value:!0}),Ym.DefaultGraph=void 0;class u{constructor(){this.termType="DefaultGraph",this.value=""}equals(o){return!!o&&o.termType==="DefaultGraph"}}return Ym.DefaultGraph=u,u.INSTANCE=new u,Ym}var Zm={},ev={},EV;function qE(){if(EV)return ev;EV=1,Object.defineProperty(ev,"__esModule",{value:!0}),ev.NamedNode=void 0;class u{constructor(o){this.termType="NamedNode",this.value=o}equals(o){return!!o&&o.termType==="NamedNode"&&o.value===this.value}}return ev.NamedNode=u,ev}var xV;function RV(){if(xV)return Zm;xV=1,Object.defineProperty(Zm,"__esModule",{value:!0}),Zm.Literal=void 0;const u=qE();class n{constructor(i,t){this.termType="Literal",this.value=i,typeof t=="string"?(this.language=t,this.datatype=n.RDF_LANGUAGE_STRING,this.direction=""):t?"termType"in t?(this.language="",this.datatype=t,this.direction=""):(this.language=t.language,this.datatype=t.direction?n.RDF_DIRECTIONAL_LANGUAGE_STRING:n.RDF_LANGUAGE_STRING,this.direction=t.direction||""):(this.language="",this.datatype=n.XSD_STRING,this.direction="")}equals(i){return!!i&&i.termType==="Literal"&&i.value===this.value&&i.language===this.language&&(i.direction===this.direction||!i.direction&&this.direction==="")&&this.datatype.equals(i.datatype)}}return Zm.Literal=n,n.RDF_LANGUAGE_STRING=new u.NamedNode("http://www.w3.org/1999/02/22-rdf-syntax-ns#langString"),n.RDF_DIRECTIONAL_LANGUAGE_STRING=new u.NamedNode("http://www.w3.org/1999/02/22-rdf-syntax-ns#dirLangString"),n.XSD_STRING=new u.NamedNode("http://www.w3.org/2001/XMLSchema#string"),Zm}var tv={},FV;function IV(){if(FV)return tv;FV=1,Object.defineProperty(tv,"__esModule",{value:!0}),tv.Quad=void 0;class u{constructor(o,i,t,e){this.termType="Quad",this.value="",this.subject=o,this.predicate=i,this.object=t,this.graph=e}equals(o){return!!o&&(o.termType==="Quad"||!o.termType)&&this.subject.equals(o.subject)&&this.predicate.equals(o.predicate)&&this.object.equals(o.object)&&this.graph.equals(o.graph)}}return tv.Quad=u,tv}var rv={},PV;function DV(){if(PV)return rv;PV=1,Object.defineProperty(rv,"__esModule",{value:!0}),rv.Variable=void 0;class u{constructor(o){this.termType="Variable",this.value=o}equals(o){return!!o&&o.termType==="Variable"&&o.value===this.value}}return rv.Variable=u,rv}var NV;function wce(){if(NV)return Wm;NV=1,Object.defineProperty(Wm,"__esModule",{value:!0}),Wm.DataFactory=void 0;const u=SV(),n=AV(),o=RV(),i=qE(),t=IV(),e=DV();let r=0;class a{constructor(s){this.blankNodeCounter=0,s=s||{},this.blankNodePrefix=s.blankNodePrefix||`df_${r++}_`}namedNode(s){return new i.NamedNode(s)}blankNode(s){return new u.BlankNode(s||`${this.blankNodePrefix}${this.blankNodeCounter++}`)}literal(s,d){return new o.Literal(s,d)}variable(s){return new e.Variable(s)}defaultGraph(){return n.DefaultGraph.INSTANCE}quad(s,d,l,f){return new t.Quad(s,d,l,f||this.defaultGraph())}fromTerm(s){switch(s.termType){case"NamedNode":return this.namedNode(s.value);case"BlankNode":return this.blankNode(s.value);case"Literal":return s.language?this.literal(s.value,s.language):s.datatype.equals(o.Literal.XSD_STRING)?this.literal(s.value):this.literal(s.value,this.fromTerm(s.datatype));case"Variable":return this.variable(s.value);case"DefaultGraph":return this.defaultGraph();case"Quad":return this.quad(this.fromTerm(s.subject),this.fromTerm(s.predicate),this.fromTerm(s.object),this.fromTerm(s.graph))}}fromQuad(s){return this.fromTerm(s)}resetBlankNodeCounter(){this.blankNodeCounter=0}}return Wm.DataFactory=a,Wm}var jV;function Sce(){return jV||(jV=1,(function(u){var n=ad&&ad.__createBinding||(Object.create?(function(i,t,e,r){r===void 0&&(r=e);var a=Object.getOwnPropertyDescriptor(t,e);(!a||("get"in a?!t.__esModule:a.writable||a.configurable))&&(a={enumerable:!0,get:function(){return t[e]}}),Object.defineProperty(i,r,a)}):(function(i,t,e,r){r===void 0&&(r=e),i[r]=t[e]})),o=ad&&ad.__exportStar||function(i,t){for(var e in i)e!=="default"&&!Object.prototype.hasOwnProperty.call(t,e)&&n(t,i,e)};Object.defineProperty(u,"__esModule",{value:!0}),o(SV(),u),o(wce(),u),o(AV(),u),o(RV(),u),o(qE(),u),o(IV(),u),o(DV(),u)})(ad)),ad}var LV;function Oce(){if(LV)return qn;LV=1,Object.defineProperty(qn,"__esModule",{value:!0}),qn.termToString=o,qn.getLiteralValue=i,qn.getLiteralType=t,qn.getLiteralLanguage=e,qn.getLiteralDirection=r,qn.stringToTerm=a,qn.quadToStringQuad=c,qn.stringQuadToQuad=s;const u=Sce(),n=new u.DataFactory;function o(d){if(d)switch(d.termType){case"NamedNode":return d.value;case"BlankNode":return"_:"+d.value;case"Literal":const l=d;return'"'+l.value+'"'+(l.datatype&&l.datatype.value!=="http://www.w3.org/2001/XMLSchema#string"&&l.datatype.value!=="http://www.w3.org/1999/02/22-rdf-syntax-ns#langString"&&l.datatype.value!=="http://www.w3.org/1999/02/22-rdf-syntax-ns#dirLangString"?"^^"+l.datatype.value:"")+(l.language?"@"+l.language:"")+(l.direction?"--"+l.direction:"");case"Quad":return`<<${o(d.subject)} ${o(d.predicate)} ${o(d.object)}${d.graph.termType==="DefaultGraph"?"":" "+o(d.graph)}>>`;case"Variable":return"?"+d.value;case"DefaultGraph":return d.value}}function i(d){const l=/^"([^]*)"/.exec(d);if(!l)throw new Error(d+" is not a literal");return l[1]}function t(d){const l=/^"[^]*"(?:\^\^([^"]+)|(@)[^@"]+)?$/.exec(d);if(!l)throw new Error(d+" is not a literal");return l[1]||(l[2]?"http://www.w3.org/1999/02/22-rdf-syntax-ns#langString":"http://www.w3.org/2001/XMLSchema#string")}function e(d){const l=/^"[^]*"(?:@([^@"]+)|\^\^[^"]+)?$/.exec(d);if(!l)throw new Error(d+" is not a literal");if(l[1]){let f=l[1].toLowerCase();const h=f.indexOf("--");return h>=0&&(f=f.slice(0,h)),f}return""}function r(d){const l=d.indexOf("--",d.lastIndexOf('"'));if(l>=0){const f=d.slice(l+2,d.length);if(f==="ltr"||f==="rtl")return f;throw new Error(d+" is not a literal with a valid direction")}return""}function a(d,l){if(l=l||n,!d||!d.length)return l.defaultGraph();switch(d[0]){case"_":return l.blankNode(d.substr(2));case"?":if(!l.variable)throw new Error("Missing 'variable()' method on the given DataFactory");return l.variable(d.substr(1));case'"':const f=e(d),h=r(d),p=l.namedNode(t(d));return l.literal(i(d),f?{language:f,direction:h}:p);case"<":default:if(d[0]==="<"&&d.length>4&&d[1]==="<"&&d[d.length-1]===">"&&d[d.length-2]===">"){const y=d.slice(2,-2).trim();let _=[],b=0,m=0,g=!1;for(let T=0;T<y.length;T++){const v=y[T];if(v==="<"&&b++,v===">"){if(b===0)throw new Error("Found closing tag without opening tag in "+d);b--}if(v==='"'){let S=!1,F=T;for(;F-- >0&&y[F]==="\\";)S=!S;S||(g=!g)}if(v===" "&&!g&&b===0){for(_.push(y.slice(m,T));y[T+1]===" ";)T+=1;m=T+1}}if(b!==0)throw new Error("Found opening tag without closing tag in "+d);if(_.push(y.slice(m,y.length)),_.length!==3&&_.length!==4)throw new Error("Nested quad syntax error "+d);return _=_.map(T=>T.startsWith("<")&&!T.includes(" ")?T.slice(1,-1):T),l.quad(a(_[0]),a(_[1]),a(_[2]),_[3]?a(_[3]):void 0)}return l.namedNode(d)}}function c(d){return{subject:o(d.subject),predicate:o(d.predicate),object:o(d.object),graph:o(d.graph)}}function s(d,l){return l=l||n,l.quad(a(d.subject,l),a(d.predicate,l),a(d.object,l),a(d.graph,l))}return qn}var MV;function Ace(){return MV||(MV=1,(function(u){Object.defineProperty(u,"__esModule",{value:!0}),u.termToString=u.stringToTerm=u.stringQuadToQuad=u.quadToStringQuad=u.getLiteralValue=u.getLiteralType=u.getLiteralDirection=u.getLiteralLanguage=void 0;const n=Oce();Object.defineProperty(u,"getLiteralLanguage",{enumerable:!0,get:function(){return n.getLiteralLanguage}}),Object.defineProperty(u,"getLiteralDirection",{enumerable:!0,get:function(){return n.getLiteralDirection}}),Object.defineProperty(u,"getLiteralType",{enumerable:!0,get:function(){return n.getLiteralType}}),Object.defineProperty(u,"getLiteralValue",{enumerable:!0,get:function(){return n.getLiteralValue}}),Object.defineProperty(u,"quadToStringQuad",{enumerable:!0,get:function(){return n.quadToStringQuad}}),Object.defineProperty(u,"stringQuadToQuad",{enumerable:!0,get:function(){return n.stringQuadToQuad}}),Object.defineProperty(u,"stringToTerm",{enumerable:!0,get:function(){return n.stringToTerm}}),Object.defineProperty(u,"termToString",{enumerable:!0,get:function(){return n.termToString}})})(ME)),ME}var qV;function Ece(){if(qV)return Km;qV=1,Object.defineProperty(Km,"__esModule",{value:!0}),Km.ActorQueryOperationDistinctIdentity=void 0;const u=qt(),n=pe(),o=_t(),i=Ace();let t=class extends u.ActorQueryOperationTypedMediated{constructor(r){super(r,"distinct")}async testOperation(r,a){return(0,n.passTestVoid)()}async runOperation(r,a){const c=await this.mediatorQueryOperation.mediate({operation:r.input,context:a});if(c.type==="quads"){const f=(0,o.getSafeQuads)(c);return{type:"quads",quadStream:f.quadStream.filter(await this.newIdentityFilterQuads()),metadata:f.metadata}}const s=(0,o.getSafeBindings)(c),d=(await s.metadata()).variables.map(f=>f.variable);return{type:"bindings",bindingsStream:s.bindingsStream.filter(await this.newIdentityFilter(d)),metadata:s.metadata}}async newIdentityFilter(r){const a={};return c=>{const s=r.map(d=>i.termToString(c.get(d))).join("-");return!(s in a)&&(a[s]=!0)}}async newIdentityFilterQuads(){const r={};return a=>{const c=Object.values(i.quadToStringQuad(a)).join(" ");return!(c in r)&&(r[c]=!0)}}};return Km.ActorQueryOperationDistinctIdentity=t,Km}var CV;function xce(){return CV||(CV=1,(function(u){var n=id&&id.__createBinding||(Object.create?(function(i,t,e,r){r===void 0&&(r=e);var a=Object.getOwnPropertyDescriptor(t,e);(!a||("get"in a?!t.__esModule:a.writable||a.configurable))&&(a={enumerable:!0,get:function(){return t[e]}}),Object.defineProperty(i,r,a)}):(function(i,t,e,r){r===void 0&&(r=e),i[r]=t[e]})),o=id&&id.__exportStar||function(i,t){for(var e in i)e!=="default"&&!Object.prototype.hasOwnProperty.call(t,e)&&n(t,i,e)};Object.defineProperty(u,"__esModule",{value:!0}),o(Ece(),u)})(id)),id}var ud={},nv={},BV;function Rce(){if(BV)return nv;BV=1,Object.defineProperty(nv,"__esModule",{value:!0}),nv.ActorQueryOperationExtend=void 0;const u=qt(),n=pe(),o=Vt(),i=ge(),t=_t();let e=class extends u.ActorQueryOperationTypedMediated{constructor(a){super(a,"extend"),this.mediatorExpressionEvaluatorFactory=a.mediatorExpressionEvaluatorFactory}async testOperation(){return(0,n.passTestVoid)()}async runOperation(a,c){const{expression:s,input:d,variable:l}=a,f=(0,t.getSafeBindings)(await this.mediatorQueryOperation.mediate({operation:d,context:c}));if((await f.metadata()).variables.some(_=>_.variable.equals(l)))throw new Error(`Illegal binding to variable '${l.value}' that has already been bound`);const h=await this.mediatorExpressionEvaluatorFactory.mediate({algExpr:s,context:c}),p=async(_,b,m)=>{try{const g=await h.evaluate(_),T=_.set(l,g);m(T)}catch(g){(0,i.isExpressionError)(g)?(m(_),this.logWarn(c,`Expression error for extend operation (${g.message})with bindings '${(0,o.bindingsToString)(_)}'`)):y.emit("error",g)}b()},y=f.bindingsStream.transform({autoStart:!1,transform:p});return{type:"bindings",bindingsStream:y,async metadata(){const _=await f.metadata();return{..._,variables:[..._.variables,{variable:l,canBeUndef:!1}]}}}}};return nv.ActorQueryOperationExtend=e,nv}var $V;function Fce(){return $V||($V=1,(function(u){var n=ud&&ud.__createBinding||(Object.create?(function(i,t,e,r){r===void 0&&(r=e);var a=Object.getOwnPropertyDescriptor(t,e);(!a||("get"in a?!t.__esModule:a.writable||a.configurable))&&(a={enumerable:!0,get:function(){return t[e]}}),Object.defineProperty(i,r,a)}):(function(i,t,e,r){r===void 0&&(r=e),i[r]=t[e]})),o=ud&&ud.__exportStar||function(i,t){for(var e in i)e!=="default"&&!Object.prototype.hasOwnProperty.call(t,e)&&n(t,i,e)};Object.defineProperty(u,"__esModule",{value:!0}),o(Rce(),u)})(ud)),ud}var od={},iv={},UV;function Ice(){if(UV)return iv;UV=1,Object.defineProperty(iv,"__esModule",{value:!0}),iv.ActorQueryOperationFilter=void 0;const u=qt(),n=pe(),o=Vt(),i=ge(),t=_t();let e=class extends u.ActorQueryOperationTypedMediated{constructor(a){super(a,"filter"),this.mediatorExpressionEvaluatorFactory=a.mediatorExpressionEvaluatorFactory}async testOperation(){return(0,n.passTestVoid)()}async runOperation(a,c){const s=await this.mediatorQueryOperation.mediate({operation:a.input,context:c}),d=(0,t.getSafeBindings)(s);(0,t.validateQueryOutput)(d,"bindings");const l=await this.mediatorExpressionEvaluatorFactory.mediate({algExpr:a.expression,context:c}),f=async(p,y,_)=>{try{await l.evaluateAsEBV(p)&&_(p)}catch(b){(0,i.isExpressionError)(b)?this.logWarn(c,"Error occurred while filtering.",()=>({error:b,bindings:(0,o.bindingsToString)(p)})):h.emit("error",b)}y()},h=d.bindingsStream.transform({transform:f,autoStart:!1});return{type:"bindings",bindingsStream:h,metadata:d.metadata}}};return iv.ActorQueryOperationFilter=e,iv}var VV;function Pce(){return VV||(VV=1,(function(u){var n=od&&od.__createBinding||(Object.create?(function(i,t,e,r){r===void 0&&(r=e);var a=Object.getOwnPropertyDescriptor(t,e);(!a||("get"in a?!t.__esModule:a.writable||a.configurable))&&(a={enumerable:!0,get:function(){return t[e]}}),Object.defineProperty(i,r,a)}):(function(i,t,e,r){r===void 0&&(r=e),i[r]=t[e]})),o=od&&od.__exportStar||function(i,t){for(var e in i)e!=="default"&&!Object.prototype.hasOwnProperty.call(t,e)&&n(t,i,e)};Object.defineProperty(u,"__esModule",{value:!0}),o(Ice(),u)})(od)),od}var sd={},av={},QV;function Dce(){if(QV)return av;QV=1,Object.defineProperty(av,"__esModule",{value:!0}),av.ActorQueryOperationFromQuad=void 0;const u=qt(),n=qe(),o=pe(),i=st();let t=class vn extends u.ActorQueryOperationTypedMediated{constructor(r){super(r,"from")}static copyOperation(r,a){const c={};for(const s of Object.keys(r))Array.isArray(r[s])&&s!=="template"?s==="variables"?c[s]=r[s]:c[s]=r[s].map(a):vn.ALGEBRA_TYPES.includes(r[s].type)?c[s]=a(r[s]):c[s]=r[s];return c}static applyOperationDefaultGraph(r,a,c){if(a.type==="bgp"&&a.patterns.length>0||a.type==="path"||a.type==="pattern"){if(a.type==="bgp")return vn.joinOperations(r,a.patterns.map(d=>{if(d.graph.termType!=="DefaultGraph")return r.createBgp([d]);const l=c.map(f=>r.createBgp([Object.assign(r.createPattern(d.subject,d.predicate,d.object,f),{metadata:d.metadata})]));return vn.unionOperations(r,l)}));if(a.graph.termType!=="DefaultGraph")return a;const s=c.map(d=>a.type==="path"?r.createPath(a.subject,a.predicate,a.object,d):Object.assign(r.createPattern(a.subject,a.predicate,a.object,d),{metadata:a.metadata}));return vn.unionOperations(r,s)}return vn.copyOperation(a,s=>this.applyOperationDefaultGraph(r,s,c))}static applyOperationNamedGraph(r,a,c,s){if(a.type==="bgp"&&a.patterns.length>0||a.type==="path"||a.type==="pattern"){const d=a.type==="bgp"?a.patterns[0].graph:a.graph;if(d.termType==="DefaultGraph")return{type:i.Algebra.types.BGP,patterns:[]};if(d.termType==="Variable"){if(c.length===1){const f=c[0],h={};h[`?${d.value}`]=f;const p=r.createValues([d],[h]);let y;return a.type==="bgp"?y=r.createBgp(a.patterns.map(_=>r.createPattern(_.subject,_.predicate,_.object,f))):a.type==="path"?y=r.createPath(a.subject,a.predicate,a.object,f):y=r.createPattern(a.subject,a.predicate,a.object,f),r.createJoin([p,y])}return vn.unionOperations(r,c.map(f=>vn.applyOperationNamedGraph(r,a,[f],s)))}return[...c,...s].some(f=>f.equals(d))?a:{type:i.Algebra.types.BGP,patterns:[]}}return vn.copyOperation(a,d=>this.applyOperationNamedGraph(r,d,c,s))}static joinOperations(r,a){if(a.length===1)return a[0];if(a.length>1)return r.createJoin(a);throw new Error("A join can only be applied on at least one operation")}static unionOperations(r,a){if(a.length===1)return a[0];if(a.length>1)return r.createUnion(a);throw new Error("A union can only be applied on at least one operation")}static createOperation(r,a){let c=a.input;return a.default.length>0&&(c=vn.applyOperationDefaultGraph(r,c,a.default)),(a.named.length>0||a.default.length>0)&&(c=vn.applyOperationNamedGraph(r,c,a.named,a.default)),c}async testOperation(r,a){return(0,o.passTestVoid)()}async runOperation(r,a){const c=a.getSafe(n.KeysInitQuery.dataFactory),s=new i.Factory(c),d=vn.createOperation(s,r);return this.mediatorQueryOperation.mediate({operation:d,context:a})}};return av.ActorQueryOperationFromQuad=t,t.ALGEBRA_TYPES=Object.keys(i.Algebra.types).map(e=>i.Algebra.types[e]),av}var HV;function Nce(){return HV||(HV=1,(function(u){var n=sd&&sd.__createBinding||(Object.create?(function(i,t,e,r){r===void 0&&(r=e);var a=Object.getOwnPropertyDescriptor(t,e);(!a||("get"in a?!t.__esModule:a.writable||a.configurable))&&(a={enumerable:!0,get:function(){return t[e]}}),Object.defineProperty(i,r,a)}):(function(i,t,e,r){r===void 0&&(r=e),i[r]=t[e]})),o=sd&&sd.__exportStar||function(i,t){for(var e in i)e!=="default"&&!Object.prototype.hasOwnProperty.call(t,e)&&n(t,i,e)};Object.defineProperty(u,"__esModule",{value:!0}),o(Dce(),u)})(sd)),sd}var cd={},uv={},GV;function jce(){if(GV)return uv;GV=1,Object.defineProperty(uv,"__esModule",{value:!0}),uv.ActorQueryOperationProject=void 0;const u=qt(),n=qe(),o=pe(),i=EO(),t=_t();let e=class extends u.ActorQueryOperationTypedMediated{constructor(a){super(a,"project")}async testOperation(a,c){return(0,o.passTestVoid)()}async runOperation(a,c){const s=c.getSafe(n.KeysInitQuery.dataFactory),d=(0,t.getSafeBindings)(await this.mediatorQueryOperation.mediate({operation:a.input,context:c})),l=await d.metadata(),f=Object.fromEntries(l.variables.map(g=>[g.variable.value,g])),h=a.variables.map(g=>({variable:g,canBeUndef:!1})),p=Object.fromEntries(h.map(g=>[g.variable.value,g])),y=l.variables.filter(g=>!(g.variable.value in p)),_=h.map(g=>({variable:g.variable,canBeUndef:!(g.variable.value in f)||f[g.variable.value].canBeUndef}));let b=y.length===0?d.bindingsStream:d.bindingsStream.map(g=>{for(const T of y)g=g.delete(T.variable);return g}),m=0;return b=b.map(g=>{m++;const T=new Map;return g.map(v=>{if(v instanceof i.BlankNodeBindingsScoped){let S=T.get(v.value);return S||(S=s.blankNode(`${v.value}${m}`),T.set(v.value,S)),S}return v})}),{type:"bindings",bindingsStream:b,metadata:async()=>({...l,variables:_})}}};return uv.ActorQueryOperationProject=e,uv}var zV;function Lce(){return zV||(zV=1,(function(u){var n=cd&&cd.__createBinding||(Object.create?(function(i,t,e,r){r===void 0&&(r=e);var a=Object.getOwnPropertyDescriptor(t,e);(!a||("get"in a?!t.__esModule:a.writable||a.configurable))&&(a={enumerable:!0,get:function(){return t[e]}}),Object.defineProperty(i,r,a)}):(function(i,t,e,r){r===void 0&&(r=e),i[r]=t[e]})),o=cd&&cd.__exportStar||function(i,t){for(var e in i)e!=="default"&&!Object.prototype.hasOwnProperty.call(t,e)&&n(t,i,e)};Object.defineProperty(u,"__esModule",{value:!0}),o(jce(),u)})(cd)),cd}var dd={},ov={},XV;function Mce(){if(XV)return ov;XV=1,Object.defineProperty(ov,"__esModule",{value:!0}),ov.ActorQueryOperationReducedHash=void 0;const u=qt(),n=pe(),o=_t(),i=ff();let t=class extends u.ActorQueryOperationTypedMediated{constructor(r){super(r,"reduced")}async testOperation(r,a){return(0,n.passTestVoid)()}async runOperation(r,a){const c=(0,o.getSafeBindings)(await this.mediatorQueryOperation.mediate({operation:r.input,context:a})),s=(await c.metadata()).variables.map(l=>l.variable);return{type:"bindings",bindingsStream:c.bindingsStream.filter(await this.newHashFilter(a,s)),metadata:c.metadata}}async newHashFilter(r,a){const{hashFunction:c}=await this.mediatorHashBindings.mediate({context:r}),s=new i.LRUCache({max:this.cacheSize});return d=>{const l=c(d,a);return s.has(l)?!1:(s.set(l,!0),!0)}}};return ov.ActorQueryOperationReducedHash=t,ov}var JV;function qce(){return JV||(JV=1,(function(u){var n=dd&&dd.__createBinding||(Object.create?(function(i,t,e,r){r===void 0&&(r=e);var a=Object.getOwnPropertyDescriptor(t,e);(!a||("get"in a?!t.__esModule:a.writable||a.configurable))&&(a={enumerable:!0,get:function(){return t[e]}}),Object.defineProperty(i,r,a)}):(function(i,t,e,r){r===void 0&&(r=e),i[r]=t[e]})),o=dd&&dd.__exportStar||function(i,t){for(var e in i)e!=="default"&&!Object.prototype.hasOwnProperty.call(t,e)&&n(t,i,e)};Object.defineProperty(u,"__esModule",{value:!0}),o(Mce(),u)})(dd)),dd}var ld={},sv={},KV;function Cce(){if(KV)return sv;KV=1,Object.defineProperty(sv,"__esModule",{value:!0}),sv.ActorQueryOperationSlice=void 0;const u=qt(),n=qe(),o=pe();let i=class extends u.ActorQueryOperationTypedMediated{constructor(e){super(e,"slice")}async testOperation(e,r){return(0,o.passTestVoid)()}async runOperation(e,r){e.length&&(r=r.set(n.KeysQueryOperation.limitIndicator,e.length));const a=await this.mediatorQueryOperation.mediate({operation:e.input,context:r});return a.type==="bindings"?{type:"bindings",bindingsStream:this.sliceStream(a.bindingsStream,e),metadata:this.sliceMetadata(a,e)}:a.type==="quads"?{type:"quads",quadStream:this.sliceStream(a.quadStream,e),metadata:this.sliceMetadata(a,e)}:a}sliceStream(e,r){const a=!!r.length||r.length===0,{start:c}=r,s=a?r.start+r.length-1:Number.POSITIVE_INFINITY;return e.transform({offset:c,limit:Math.max(s-c+1,0),autoStart:!1})}sliceMetadata(e,r){const a=!!r.length||r.length===0;return()=>e.metadata().then(c=>{const s={...c.cardinality};return Number.isFinite(s.value)&&(s.value=Math.max(0,s.value-r.start),a&&(s.value=Math.min(s.value,r.length))),{...c,cardinality:s}})}};return sv.ActorQueryOperationSlice=i,sv}var kV;function Bce(){return kV||(kV=1,(function(u){var n=ld&&ld.__createBinding||(Object.create?(function(i,t,e,r){r===void 0&&(r=e);var a=Object.getOwnPropertyDescriptor(t,e);(!a||("get"in a?!t.__esModule:a.writable||a.configurable))&&(a={enumerable:!0,get:function(){return t[e]}}),Object.defineProperty(i,r,a)}):(function(i,t,e,r){r===void 0&&(r=e),i[r]=t[e]})),o=ld&&ld.__exportStar||function(i,t){for(var e in i)e!=="default"&&!Object.prototype.hasOwnProperty.call(t,e)&&n(t,i,e)};Object.defineProperty(u,"__esModule",{value:!0}),o(Cce(),u)})(ld)),ld}var fd={},cv={},WV;function $ce(){if(WV)return cv;WV=1,Object.defineProperty(cv,"__esModule",{value:!0}),cv.ActorQueryOperationUnion=void 0;const u=qt(),n=pe(),o=br(),i=_t(),t=pt();let e=class Cw extends u.ActorQueryOperationTypedMediated{constructor(a){super(a,"union")}static unionVariables(a){const c={};for(const s of a)for(const d of s){c[d.variable.value]||(c[d.variable.value]={variable:d.variable,canBeUndef:d.canBeUndef,occurrences:0});const l=c[d.variable.value];l.canBeUndef=l.canBeUndef||d.canBeUndef,l.occurrences++}return Object.values(c).map(s=>s.occurrences===a.length?{variable:s.variable,canBeUndef:s.canBeUndef}:{variable:s.variable,canBeUndef:!0})}static async unionMetadata(a,c,s,d){let l=(await d.mediate({mode:"initialize",context:s})).metadata;for(const h of a)l={...h,...(await d.mediate({mode:"append",accumulatedMetadata:l,appendingMetadata:h,context:s})).metadata};l.state=new o.MetadataValidationState;const f=()=>l.state.invalidate();for(const h of a)h.state.addInvalidateListener(f);if(c){const h=a.map(p=>p.variables);l.variables=Cw.unionVariables(h)}return l}async testOperation(a,c){return(0,n.passTestVoid)()}async runOperation(a,c){const s=await Promise.all(a.input.map(l=>this.mediatorQueryOperation.mediate({operation:l,context:c})));let d;for(const l of s)if(d===void 0)d=l.type;else if(d!==l.type)throw new Error(`Unable to union ${d} and ${l.type}`);if(d==="bindings"||a.input.length===0){const l=s.map(i.getSafeBindings);return{type:"bindings",bindingsStream:new t.UnionIterator(l.map(p=>p.bindingsStream),{autoStart:!1}),metadata:()=>Promise.all(l.map(p=>p.metadata())).then(p=>Cw.unionMetadata(p,!0,c,this.mediatorRdfMetadataAccumulate))}}if(d==="quads"){const l=s.map(i.getSafeQuads);return{type:"quads",quadStream:new t.UnionIterator(l.map(p=>p.quadStream),{autoStart:!1}),metadata:()=>Promise.all(l.map(p=>p.metadata())).then(p=>Cw.unionMetadata(p,!1,c,this.mediatorRdfMetadataAccumulate))}}throw new Error(`Unable to union ${d}`)}};return cv.ActorQueryOperationUnion=e,cv}var YV;function ZV(){return YV||(YV=1,(function(u){var n=fd&&fd.__createBinding||(Object.create?(function(i,t,e,r){r===void 0&&(r=e);var a=Object.getOwnPropertyDescriptor(t,e);(!a||("get"in a?!t.__esModule:a.writable||a.configurable))&&(a={enumerable:!0,get:function(){return t[e]}}),Object.defineProperty(i,r,a)}):(function(i,t,e,r){r===void 0&&(r=e),i[r]=t[e]})),o=fd&&fd.__exportStar||function(i,t){for(var e in i)e!=="default"&&!Object.prototype.hasOwnProperty.call(t,e)&&n(t,i,e)};Object.defineProperty(u,"__esModule",{value:!0}),o($ce(),u)})(fd)),fd}var hd={},dv={},pd={},lv={},fv={},eQ;function tQ(){if(eQ)return fv;eQ=1,Object.defineProperty(fv,"__esModule",{value:!0}),fv.PathVariableObjectIterator=void 0;const u=_t(),n=pt(),o=Yt();let i=class extends n.BufferedIterator{constructor(e,r,a,c,s,d,l,f=16){super({autoStart:!1}),this.algebraFactory=e,this.subject=r,this.predicate=a,this.graph=c,this.context=s,this.mediatorQueryOperation=d,this.maxRunningOperations=f,this.termHashes=new Map,this.runningOperations=[],this.pendingOperations=[],this.started=!1,this._push(this.subject,l)}getProperty(e,r){return!this.started&&e==="metadata"&&this.startNextOperation(!1).catch(a=>this.emit("error",a)),super.getProperty(e,r)}_end(e){for(const r of this.runningOperations)r.destroy();super._end(e)}_push(e,r=!0){let a;if(r&&(a=(0,o.termToString)(e),this.termHashes.has(a)))return!1;const c=this.algebraFactory.dataFactory.variable("b");return this.pendingOperations.push({variable:c,operation:this.algebraFactory.createPath(e,this.predicate,c,this.graph)}),a&&(this.termHashes.set(a,e),super._push(e)),!0}async startNextOperation(e){this.started=!0;const r=this.pendingOperations.pop(),a=(0,u.getSafeBindings)(await this.mediatorQueryOperation.mediate({operation:r.operation,context:this.context})),c=a.bindingsStream.map(s=>s.get(r.variable));c.done||(this.runningOperations.push(c),c.on("error",s=>this.destroy(s)),c.on("readable",()=>{e&&this._fillBufferAsync(),this.readable=!0}),c.on("end",()=>{this.runningOperations.splice(this.runningOperations.indexOf(c),1),e&&this._fillBufferAsync(),this.readable=!0})),this.getProperty("metadata")||this.setProperty("metadata",a.metadata)}_read(e,r){const a=this;(async function(){for(;a.runningOperations.length<a.maxRunningOperations&&a.pendingOperations.length!==0;)await a.startNextOperation(!0);let c=0,s,d=!0;for(;!d||c!==(c=e);){d=!0;for(let l=0;l<a.runningOperations.length&&e>0;l++)(s=a.runningOperations[l].read())!==null&&(a._push(s)?e--:d=!1)}a.closeIfNeeded()})().then(()=>{r()},c=>this.destroy(c))}closeIfNeeded(){this.runningOperations.length===0&&this.pendingOperations.length===0&&this.close()}};return fv.PathVariableObjectIterator=i,fv}var rQ;function Uce(){if(rQ)return lv;rQ=1,Object.defineProperty(lv,"__esModule",{value:!0}),lv.ActorAbstractPath=void 0;const u=qt(),n=qe(),o=pe(),i=_t(),t=pt(),e=Yt(),r=st(),a=tQ();let c=class extends u.ActorQueryOperationTypedMediated{constructor(d,l){super(d,"path"),this.predicateType=l}async testOperation(d,l){return d.predicate.type!==this.predicateType?(0,o.failTest)(`This Actor only supports ${this.predicateType} Path operations.`):(0,o.passTestVoid)()}generateVariable(d,l,f){return f?l&&(l.subject.value===f||l.object.value===f)?this.generateVariable(d,l,`${f}b`):d.variable(f):this.generateVariable(d,l,"b")}async isPathArbitraryLengthDistinct(d,l,f){return l.get(n.KeysQueryOperation.isPathArbitraryLengthDistinctKey)?(l=l.set(n.KeysQueryOperation.isPathArbitraryLengthDistinctKey,!1),{context:l,operation:void 0}):(l=l.set(n.KeysQueryOperation.isPathArbitraryLengthDistinctKey,!0),{context:l,operation:(0,i.getSafeBindings)(await this.mediatorQueryOperation.mediate({operation:d.createDistinct(f),context:l}))})}async predicateStarGraphVariable(d,l,f,h,p,y,_){const b=this.getPathSources(f),m=this.generateVariable(y.dataFactory,y.createPath(d,f,l,h)),g=y.createUnion([this.assignPatternSources(y,y.createPattern(d,m,l,h),b),this.assignPatternSources(y,y.createPattern(l,m,d,h),b)]),T=(0,i.getSafeBindings)(await this.mediatorQueryOperation.mediate({context:p,operation:g})),v=new Set;return{bindingsStream:new t.MultiTransformIterator(T.bindingsStream,{multiTransform:F=>{const M=F.get(h);return v.has(M.value)?new t.EmptyIterator:(v.add(M.value),new t.TransformIterator(async()=>{const O=new t.BufferedIterator;return await this.getObjectsPredicateStar(y,d,f,M,p,{},O,{count:0}),O.map(w=>_.bindings([[l,w],[h,M]]))},{maxBufferSize:128}))},autoStart:!1}),metadata:T.metadata}}async getObjectsPredicateStarEval(d,l,f,h,p,y,_,b){if(h.termType==="Variable")return this.predicateStarGraphVariable(d,f,l,h,p,_,b);const m=new a.PathVariableObjectIterator(_,d,l,h,p,this.mediatorQueryOperation,y);return{bindingsStream:m.map(T=>b.bindings([[f,T]])),async metadata(){const T=await new Promise(v=>{m.getProperty("metadata",S=>v(S()))});return T.cardinality.value++,T}}}async getObjectsPredicateStar(d,l,f,h,p,y,_,b){const m=(0,e.termToString)(l);if(y[m])return;_._push(l),y[m]=l,b.count++;const g=this.generateVariable(d.dataFactory),T=d.createPath(l,f,g,h),v=(0,i.getSafeBindings)(await this.mediatorQueryOperation.mediate({operation:T,context:p}));return v.bindingsStream.on("data",async S=>{const F=S.get(g);await this.getObjectsPredicateStar(d,F,f,h,p,y,_,b)}),v.bindingsStream.on("end",()=>{--b.count===0&&_.close()}),v.metadata}async getSubjectAndObjectBindingsPredicateStar(d,l,f,h,p,y,_,b,m,g,T,v,S){const F=(0,e.termToString)(h)+(0,e.termToString)(y);if(m[F])return;if(T.count++,m[F]=!0,g._push(S.bindings([[d,f],[l,h]])),F in b){const O=await b[F];for(const w of O)await this.getSubjectAndObjectBindingsPredicateStar(d,l,f,w,p,y,_,b,m,g,T,v,S);--T.count===0&&g.close();return}const M=new Promise(async(O,w)=>{const E=[],R=this.generateVariable(v.dataFactory),D=v.createPath(h,p,R,y),B=(0,i.getSafeBindings)(await this.mediatorQueryOperation.mediate({operation:D,context:_}));B.bindingsStream.on("data",async C=>{const $=C.get(R);E.push($),await this.getSubjectAndObjectBindingsPredicateStar(d,l,f,$,p,y,_,b,m,g,T,v,S)}),B.bindingsStream.on("error",w),B.bindingsStream.on("end",()=>{--T.count===0&&g.close(),O(E)})});b[F]=M}getPathSources(d){switch(d.type){case r.Algebra.types.ALT:case r.Algebra.types.SEQ:return d.input.flatMap(l=>this.getPathSources(l));case r.Algebra.types.INV:case r.Algebra.types.ONE_OR_MORE_PATH:case r.Algebra.types.ZERO_OR_MORE_PATH:case r.Algebra.types.ZERO_OR_ONE_PATH:return this.getPathSources(d.path);case r.Algebra.types.LINK:case r.Algebra.types.NPS:{const l=(0,i.getOperationSource)(d);if(!l)throw new Error("Could not find a required source on a link path operation");return[l]}}}assignPatternSources(d,l,f){if(f.length===0)throw new Error("Attempted to assign zero sources to a pattern during property path handling");return f.length===1?(0,i.assignOperationSource)(l,f[0]):d.createUnion(f.map(h=>(0,i.assignOperationSource)(l,h)),!0)}};return lv.ActorAbstractPath=c,lv}var nQ;function Zi(){return nQ||(nQ=1,(function(u){var n=pd&&pd.__createBinding||(Object.create?(function(i,t,e,r){r===void 0&&(r=e);var a=Object.getOwnPropertyDescriptor(t,e);(!a||("get"in a?!t.__esModule:a.writable||a.configurable))&&(a={enumerable:!0,get:function(){return t[e]}}),Object.defineProperty(i,r,a)}):(function(i,t,e,r){r===void 0&&(r=e),i[r]=t[e]})),o=pd&&pd.__exportStar||function(i,t){for(var e in i)e!=="default"&&!Object.prototype.hasOwnProperty.call(t,e)&&n(t,i,e)};Object.defineProperty(u,"__esModule",{value:!0}),o(Uce(),u),o(tQ(),u)})(pd)),pd}var iQ;function Vce(){if(iQ)return dv;iQ=1,Object.defineProperty(dv,"__esModule",{value:!0}),dv.ActorQueryOperationPathAlt=void 0;const u=Zi(),n=ZV(),o=qe(),i=_t(),t=pt(),e=st();let r=class extends u.ActorAbstractPath{constructor(c){super(c,e.Algebra.types.ALT)}async runOperation(c,s){const d=s.getSafe(o.KeysInitQuery.dataFactory),l=new e.Factory(d),f=c.predicate,h=(await Promise.all(f.input.map(_=>this.mediatorQueryOperation.mediate({context:s,operation:l.createPath(c.subject,_,c.object,c.graph)})))).map(i.getSafeBindings);return{type:"bindings",bindingsStream:new t.UnionIterator(h.map(_=>_.bindingsStream),{autoStart:!1}),metadata:()=>Promise.all(h.map(_=>_.metadata())).then(_=>n.ActorQueryOperationUnion.unionMetadata(_,!0,s,this.mediatorRdfMetadataAccumulate))}}};return dv.ActorQueryOperationPathAlt=r,dv}var aQ;function Qce(){return aQ||(aQ=1,(function(u){var n=hd&&hd.__createBinding||(Object.create?(function(i,t,e,r){r===void 0&&(r=e);var a=Object.getOwnPropertyDescriptor(t,e);(!a||("get"in a?!t.__esModule:a.writable||a.configurable))&&(a={enumerable:!0,get:function(){return t[e]}}),Object.defineProperty(i,r,a)}):(function(i,t,e,r){r===void 0&&(r=e),i[r]=t[e]})),o=hd&&hd.__exportStar||function(i,t){for(var e in i)e!=="default"&&!Object.prototype.hasOwnProperty.call(t,e)&&n(t,i,e)};Object.defineProperty(u,"__esModule",{value:!0}),o(Vce(),u)})(hd)),hd}var yd={},hv={},uQ;function Hce(){if(uQ)return hv;uQ=1,Object.defineProperty(hv,"__esModule",{value:!0}),hv.ActorQueryOperationPathInv=void 0;const u=Zi(),n=qe(),o=st();let i=class extends u.ActorAbstractPath{constructor(e){super(e,o.Algebra.types.INV)}async runOperation(e,r){const a=r.getSafe(n.KeysInitQuery.dataFactory),c=new o.Factory(a),s=e.predicate,d=c.createPath(e.object,s.path,e.subject,e.graph);return this.mediatorQueryOperation.mediate({operation:d,context:r})}};return hv.ActorQueryOperationPathInv=i,hv}var oQ;function Gce(){return oQ||(oQ=1,(function(u){var n=yd&&yd.__createBinding||(Object.create?(function(i,t,e,r){r===void 0&&(r=e);var a=Object.getOwnPropertyDescriptor(t,e);(!a||("get"in a?!t.__esModule:a.writable||a.configurable))&&(a={enumerable:!0,get:function(){return t[e]}}),Object.defineProperty(i,r,a)}):(function(i,t,e,r){r===void 0&&(r=e),i[r]=t[e]})),o=yd&&yd.__exportStar||function(i,t){for(var e in i)e!=="default"&&!Object.prototype.hasOwnProperty.call(t,e)&&n(t,i,e)};Object.defineProperty(u,"__esModule",{value:!0}),o(Hce(),u)})(yd)),yd}var bd={},pv={},sQ;function zce(){if(sQ)return pv;sQ=1,Object.defineProperty(pv,"__esModule",{value:!0}),pv.ActorQueryOperationPathLink=void 0;const u=Zi(),n=qe(),o=st();let i=class extends u.ActorAbstractPath{constructor(e){super(e,o.Algebra.types.LINK)}async runOperation(e,r){const a=r.getSafe(n.KeysInitQuery.dataFactory),c=new o.Factory(a),s=e.predicate,d=Object.assign(c.createPattern(e.subject,s.iri,e.object,e.graph),{metadata:s.metadata});return this.mediatorQueryOperation.mediate({operation:d,context:r})}};return pv.ActorQueryOperationPathLink=i,pv}var cQ;function Xce(){return cQ||(cQ=1,(function(u){var n=bd&&bd.__createBinding||(Object.create?(function(i,t,e,r){r===void 0&&(r=e);var a=Object.getOwnPropertyDescriptor(t,e);(!a||("get"in a?!t.__esModule:a.writable||a.configurable))&&(a={enumerable:!0,get:function(){return t[e]}}),Object.defineProperty(i,r,a)}):(function(i,t,e,r){r===void 0&&(r=e),i[r]=t[e]})),o=bd&&bd.__exportStar||function(i,t){for(var e in i)e!=="default"&&!Object.prototype.hasOwnProperty.call(t,e)&&n(t,i,e)};Object.defineProperty(u,"__esModule",{value:!0}),o(zce(),u)})(bd)),bd}var _d={},yv={},dQ;function Jce(){if(dQ)return yv;dQ=1,Object.defineProperty(yv,"__esModule",{value:!0}),yv.ActorQueryOperationPathNps=void 0;const u=Zi(),n=qe(),o=_t(),i=st();let t=class extends u.ActorAbstractPath{constructor(r){super(r,i.Algebra.types.NPS)}async runOperation(r,a){const c=a.getSafe(n.KeysInitQuery.dataFactory),s=new i.Factory(c),d=r.predicate,l=this.generateVariable(c,r),f=Object.assign(s.createPattern(r.subject,l,r.object,r.graph),{metadata:d.metadata}),h=(0,o.getSafeBindings)(await this.mediatorQueryOperation.mediate({operation:f,context:a}));return{type:"bindings",bindingsStream:h.bindingsStream.map(y=>d.iris.some(_=>_.equals(y.get(l)))?null:y.delete(l)),metadata:h.metadata}}};return yv.ActorQueryOperationPathNps=t,yv}var lQ;function Kce(){return lQ||(lQ=1,(function(u){var n=_d&&_d.__createBinding||(Object.create?(function(i,t,e,r){r===void 0&&(r=e);var a=Object.getOwnPropertyDescriptor(t,e);(!a||("get"in a?!t.__esModule:a.writable||a.configurable))&&(a={enumerable:!0,get:function(){return t[e]}}),Object.defineProperty(i,r,a)}):(function(i,t,e,r){r===void 0&&(r=e),i[r]=t[e]})),o=_d&&_d.__exportStar||function(i,t){for(var e in i)e!=="default"&&!Object.prototype.hasOwnProperty.call(t,e)&&n(t,i,e)};Object.defineProperty(u,"__esModule",{value:!0}),o(Jce(),u)})(_d)),_d}var gd={},bv={},fQ;function kce(){if(fQ)return bv;fQ=1,Object.defineProperty(bv,"__esModule",{value:!0}),bv.ActorQueryOperationClear=void 0;const u=qt(),n=qe(),o=_t();let i=class extends u.ActorQueryOperationTypedMediated{constructor(e){super(e,"clear")}async testOperation(e,r){return(0,o.testReadOnly)(r)}async runOperation(e,r){const a=r.getSafe(n.KeysInitQuery.dataFactory);let c;e.source==="DEFAULT"?c=a.defaultGraph():typeof e.source=="string"?c=e.source:c=[e.source];const{execute:s}=await this.mediatorUpdateQuads.mediate({deleteGraphs:{graphs:c,requireExistence:!e.silent,dropGraphs:!1},context:r});return{type:"void",execute:s}}};return bv.ActorQueryOperationClear=i,bv}var hQ;function Wce(){return hQ||(hQ=1,(function(u){var n=gd&&gd.__createBinding||(Object.create?(function(i,t,e,r){r===void 0&&(r=e);var a=Object.getOwnPropertyDescriptor(t,e);(!a||("get"in a?!t.__esModule:a.writable||a.configurable))&&(a={enumerable:!0,get:function(){return t[e]}}),Object.defineProperty(i,r,a)}):(function(i,t,e,r){r===void 0&&(r=e),i[r]=t[e]})),o=gd&&gd.__exportStar||function(i,t){for(var e in i)e!=="default"&&!Object.prototype.hasOwnProperty.call(t,e)&&n(t,i,e)};Object.defineProperty(u,"__esModule",{value:!0}),o(kce(),u)})(gd)),gd}var md={},_v={},pQ;function Yce(){if(pQ)return _v;pQ=1,Object.defineProperty(_v,"__esModule",{value:!0}),_v.ActorQueryOperationUpdateCompositeUpdate=void 0;const u=qt(),n=_t();let o=class extends u.ActorQueryOperationTypedMediated{constructor(t){super(t,"compositeupdate")}async testOperation(t,e){return(0,n.testReadOnly)(e)}async runOperation(t,e){return{type:"void",execute:()=>(async()=>{for(const a of t.updates)await(0,n.getSafeVoid)(await this.mediatorQueryOperation.mediate({operation:a,context:e})).execute()})()}}};return _v.ActorQueryOperationUpdateCompositeUpdate=o,_v}var yQ;function Zce(){return yQ||(yQ=1,(function(u){var n=md&&md.__createBinding||(Object.create?(function(i,t,e,r){r===void 0&&(r=e);var a=Object.getOwnPropertyDescriptor(t,e);(!a||("get"in a?!t.__esModule:a.writable||a.configurable))&&(a={enumerable:!0,get:function(){return t[e]}}),Object.defineProperty(i,r,a)}):(function(i,t,e,r){r===void 0&&(r=e),i[r]=t[e]})),o=md&&md.__exportStar||function(i,t){for(var e in i)e!=="default"&&!Object.prototype.hasOwnProperty.call(t,e)&&n(t,i,e)};Object.defineProperty(u,"__esModule",{value:!0}),o(Yce(),u)})(md)),md}var vd={},gv={},bQ;function ede(){if(bQ)return gv;bQ=1,Object.defineProperty(gv,"__esModule",{value:!0}),gv.ActorQueryOperationCreate=void 0;const u=qt(),n=_t();let o=class extends u.ActorQueryOperationTypedMediated{constructor(t){super(t,"create")}async testOperation(t,e){return(0,n.testReadOnly)(e)}async runOperation(t,e){const{execute:r}=await this.mediatorUpdateQuads.mediate({createGraphs:{graphs:[t.source],requireNonExistence:!t.silent},context:e});return{type:"void",execute:r}}};return gv.ActorQueryOperationCreate=o,gv}var _Q;function tde(){return _Q||(_Q=1,(function(u){var n=vd&&vd.__createBinding||(Object.create?(function(i,t,e,r){r===void 0&&(r=e);var a=Object.getOwnPropertyDescriptor(t,e);(!a||("get"in a?!t.__esModule:a.writable||a.configurable))&&(a={enumerable:!0,get:function(){return t[e]}}),Object.defineProperty(i,r,a)}):(function(i,t,e,r){r===void 0&&(r=e),i[r]=t[e]})),o=vd&&vd.__exportStar||function(i,t){for(var e in i)e!=="default"&&!Object.prototype.hasOwnProperty.call(t,e)&&n(t,i,e)};Object.defineProperty(u,"__esModule",{value:!0}),o(ede(),u)})(vd)),vd}var Td={},mv={},gQ;function rde(){if(gQ)return mv;gQ=1,Object.defineProperty(mv,"__esModule",{value:!0}),mv.ActorQueryOperationDrop=void 0;const u=qt(),n=qe(),o=_t();let i=class extends u.ActorQueryOperationTypedMediated{constructor(e){super(e,"drop")}async testOperation(e,r){return(0,o.testReadOnly)(r)}async runOperation(e,r){const a=r.getSafe(n.KeysInitQuery.dataFactory);let c;e.source==="DEFAULT"?c=a.defaultGraph():typeof e.source=="string"?c=e.source:c=[e.source];const{execute:s}=await this.mediatorUpdateQuads.mediate({deleteGraphs:{graphs:c,requireExistence:!e.silent,dropGraphs:!0},context:r});return{type:"void",execute:s}}};return mv.ActorQueryOperationDrop=i,mv}var mQ;function nde(){return mQ||(mQ=1,(function(u){var n=Td&&Td.__createBinding||(Object.create?(function(i,t,e,r){r===void 0&&(r=e);var a=Object.getOwnPropertyDescriptor(t,e);(!a||("get"in a?!t.__esModule:a.writable||a.configurable))&&(a={enumerable:!0,get:function(){return t[e]}}),Object.defineProperty(i,r,a)}):(function(i,t,e,r){r===void 0&&(r=e),i[r]=t[e]})),o=Td&&Td.__exportStar||function(i,t){for(var e in i)e!=="default"&&!Object.prototype.hasOwnProperty.call(t,e)&&n(t,i,e)};Object.defineProperty(u,"__esModule",{value:!0}),o(rde(),u)})(Td)),Td}var wd={},vv={},vQ;function ide(){if(vQ)return vv;vQ=1,Object.defineProperty(vv,"__esModule",{value:!0}),vv.ActorQueryOperationLoad=void 0;const u=qt(),n=qe(),o=_t(),i=st();let t=class extends u.ActorQueryOperationTypedMediated{constructor(r){super(r,"load")}async testOperation(r,a){return(0,o.testReadOnly)(a)}async runOperation(r,a){const c=a.getSafe(n.KeysInitQuery.dataFactory),s=new i.Factory(c);let d=a;r.silent&&(d=d.set(n.KeysInitQuery.lenient,!0));const{querySource:l}=await this.mediatorQuerySourceIdentify.mediate({querySourceUnidentified:{value:r.source.value},context:d});let h=(0,o.getSafeQuads)(await this.mediatorQueryOperation.mediate({operation:s.createConstruct((0,o.assignOperationSource)(s.createPattern(c.variable("s"),c.variable("p"),c.variable("o")),l),[s.createPattern(c.variable("s"),c.variable("p"),c.variable("o"))]),context:d})).quadStream;r.destination&&(h=h.map(y=>c.quad(y.subject,y.predicate,y.object,r.destination)));const{execute:p}=await this.mediatorUpdateQuads.mediate({quadStreamInsert:h,context:a});return{type:"void",execute:p}}};return vv.ActorQueryOperationLoad=t,vv}var TQ;function ade(){return TQ||(TQ=1,(function(u){var n=wd&&wd.__createBinding||(Object.create?(function(i,t,e,r){r===void 0&&(r=e);var a=Object.getOwnPropertyDescriptor(t,e);(!a||("get"in a?!t.__esModule:a.writable||a.configurable))&&(a={enumerable:!0,get:function(){return t[e]}}),Object.defineProperty(i,r,a)}):(function(i,t,e,r){r===void 0&&(r=e),i[r]=t[e]})),o=wd&&wd.__exportStar||function(i,t){for(var e in i)e!=="default"&&!Object.prototype.hasOwnProperty.call(t,e)&&n(t,i,e)};Object.defineProperty(u,"__esModule",{value:!0}),o(ide(),u)})(wd)),wd}var Sd={},Tv={},wQ;function ude(){if(wQ)return Tv;wQ=1,Object.defineProperty(Tv,"__esModule",{value:!0}),Tv.ActorQueryOperationJoin=void 0;const u=qt(),n=zr(),o=pe(),i=br(),t=_t(),e=pt(),r=hr();let a=class extends u.ActorQueryOperationTypedMediated{constructor(s){super(s,"join")}async testOperation(s,d){return(0,o.passTestVoid)()}async runOperation(s,d){const l=(await Promise.all(s.input.map(async f=>({output:await this.mediatorQueryOperation.mediate({operation:f,context:d}),operation:f})))).map(({output:f,operation:h})=>({output:(0,t.getSafeBindings)(f),operation:h}));if((await Promise.all(l.map(f=>f.output.metadata()))).some(f=>f.cardinality.value===0&&f.cardinality.type==="exact")){for(const f of l)f.output.bindingsStream.close();return{bindingsStream:new e.ArrayIterator([],{autoStart:!1}),metadata:async()=>({state:new i.MetadataValidationState,cardinality:{type:"exact",value:0},variables:n.ActorRdfJoin.joinVariables(new r.DataFactory,await n.ActorRdfJoin.getMetadatas(l))}),type:"bindings"}}return this.mediatorJoin.mediate({type:"inner",entries:l,context:d})}};return Tv.ActorQueryOperationJoin=a,Tv}var SQ;function ode(){return SQ||(SQ=1,(function(u){var n=Sd&&Sd.__createBinding||(Object.create?(function(i,t,e,r){r===void 0&&(r=e);var a=Object.getOwnPropertyDescriptor(t,e);(!a||("get"in a?!t.__esModule:a.writable||a.configurable))&&(a={enumerable:!0,get:function(){return t[e]}}),Object.defineProperty(i,r,a)}):(function(i,t,e,r){r===void 0&&(r=e),i[r]=t[e]})),o=Sd&&Sd.__exportStar||function(i,t){for(var e in i)e!=="default"&&!Object.prototype.hasOwnProperty.call(t,e)&&n(t,i,e)};Object.defineProperty(u,"__esModule",{value:!0}),o(ude(),u)})(Sd)),Sd}var Od={},wv={},OQ;function sde(){if(OQ)return wv;OQ=1,Object.defineProperty(wv,"__esModule",{value:!0}),wv.ActorQueryOperationLeftJoin=void 0;const u=qt(),n=pe(),o=Vt(),i=ge(),t=_t();let e=class extends u.ActorQueryOperationTypedMediated{constructor(a){super(a,"leftjoin"),this.mediatorExpressionEvaluatorFactory=a.mediatorExpressionEvaluatorFactory}async testOperation(a,c){return(0,n.passTestVoid)()}async runOperation(a,c){const s=(await Promise.all(a.input.map(async l=>({output:await this.mediatorQueryOperation.mediate({operation:l,context:c}),operation:l})))).map(({output:l,operation:f})=>({output:(0,t.getSafeBindings)(l),operation:f})),d=await this.mediatorJoin.mediate({type:"optional",entries:s,context:c});if(a.expression){const f=(await s[1].output.metadata()).variables,h=await this.mediatorExpressionEvaluatorFactory.mediate({algExpr:a.expression,context:c}),p=d.bindingsStream.transform({autoStart:!1,transform:async(y,_,b)=>{if(!f.every(m=>y.has(m.variable.value)))return b(y),_();try{await h.evaluateAsEBV(y)&&b(y)}catch(m){(0,i.isExpressionError)(m)?this.logWarn(c,"Error occurred while filtering.",()=>({error:m,bindings:(0,o.bindingsToString)(y)})):p.emit("error",m)}_()}});d.bindingsStream=p}return d}};return wv.ActorQueryOperationLeftJoin=e,wv}var AQ;function cde(){return AQ||(AQ=1,(function(u){var n=Od&&Od.__createBinding||(Object.create?(function(i,t,e,r){r===void 0&&(r=e);var a=Object.getOwnPropertyDescriptor(t,e);(!a||("get"in a?!t.__esModule:a.writable||a.configurable))&&(a={enumerable:!0,get:function(){return t[e]}}),Object.defineProperty(i,r,a)}):(function(i,t,e,r){r===void 0&&(r=e),i[r]=t[e]})),o=Od&&Od.__exportStar||function(i,t){for(var e in i)e!=="default"&&!Object.prototype.hasOwnProperty.call(t,e)&&n(t,i,e)};Object.defineProperty(u,"__esModule",{value:!0}),o(sde(),u)})(Od)),Od}var Ad={},Sv={},EQ;function dde(){if(EQ)return Sv;EQ=1,Object.defineProperty(Sv,"__esModule",{value:!0}),Sv.ActorQueryOperationMinus=void 0;const u=qt(),n=pe(),o=_t();let i=class extends u.ActorQueryOperationTypedMediated{constructor(e){super(e,"minus")}async testOperation(e,r){return(0,n.passTestVoid)()}async runOperation(e,r){const a=(await Promise.all(e.input.map(async c=>({output:await this.mediatorQueryOperation.mediate({operation:c,context:r}),operation:c})))).map(({output:c,operation:s})=>({output:(0,o.getSafeBindings)(c),operation:s}));return this.mediatorJoin.mediate({type:"minus",entries:a,context:r})}};return Sv.ActorQueryOperationMinus=i,Sv}var xQ;function lde(){return xQ||(xQ=1,(function(u){var n=Ad&&Ad.__createBinding||(Object.create?(function(i,t,e,r){r===void 0&&(r=e);var a=Object.getOwnPropertyDescriptor(t,e);(!a||("get"in a?!t.__esModule:a.writable||a.configurable))&&(a={enumerable:!0,get:function(){return t[e]}}),Object.defineProperty(i,r,a)}):(function(i,t,e,r){r===void 0&&(r=e),i[r]=t[e]})),o=Ad&&Ad.__exportStar||function(i,t){for(var e in i)e!=="default"&&!Object.prototype.hasOwnProperty.call(t,e)&&n(t,i,e)};Object.defineProperty(u,"__esModule",{value:!0}),o(dde(),u)})(Ad)),Ad}var Ed={},Ov={},RQ;function fde(){if(RQ)return Ov;RQ=1,Object.defineProperty(Ov,"__esModule",{value:!0}),Ov.ActorQueryOperationPathSeq=void 0;const u=Zi(),n=qe(),o=_t(),i=st();let t=class extends u.ActorAbstractPath{constructor(r){super(r,i.Algebra.types.SEQ)}async runOperation(r,a){const c=a.getSafe(n.KeysInitQuery.dataFactory),s=new i.Factory(c),d=r.predicate;let l=r.subject;const f=[],h=await Promise.all(d.input.map((_,b)=>{const m=b===d.input.length-1?r.object:this.generateVariable(c,r,`b${b}`),g=s.createPath(l,_,m,r.graph),T=this.mediatorQueryOperation.mediate({context:a,operation:g});return l=m,b<d.input.length-1&&f.push(m),{output:T,operation:g}}).map(async({output:_,operation:b})=>({output:(0,o.getSafeBindings)(await _),operation:b}))),p=(0,o.getSafeBindings)(await this.mediatorJoin.mediate({type:"inner",entries:h,context:a}));return{type:"bindings",bindingsStream:p.bindingsStream.transform({transform(_,b,m){for(const g of f)_=_.delete(g);m(_),b()}}),async metadata(){const _=await p.metadata(),b=_.variables.filter(m=>!f.some(g=>g.value===m.variable.value));return{..._,variables:b}}}}};return Ov.ActorQueryOperationPathSeq=t,Ov}var FQ;function hde(){return FQ||(FQ=1,(function(u){var n=Ed&&Ed.__createBinding||(Object.create?(function(i,t,e,r){r===void 0&&(r=e);var a=Object.getOwnPropertyDescriptor(t,e);(!a||("get"in a?!t.__esModule:a.writable||a.configurable))&&(a={enumerable:!0,get:function(){return t[e]}}),Object.defineProperty(i,r,a)}):(function(i,t,e,r){r===void 0&&(r=e),i[r]=t[e]})),o=Ed&&Ed.__exportStar||function(i,t){for(var e in i)e!=="default"&&!Object.prototype.hasOwnProperty.call(t,e)&&n(t,i,e)};Object.defineProperty(u,"__esModule",{value:!0}),o(fde(),u)})(Ed)),Ed}var xd={},Av={},IQ;function pde(){if(IQ)return Av;IQ=1,Object.defineProperty(Av,"__esModule",{value:!0}),Av.ActorRdfJoinMultiSmallest=void 0;const u=zr(),n=qe(),o=pe(),i=_t(),t=st();let e=class extends u.ActorRdfJoin{constructor(a){super(a,{logicalType:"inner",physicalName:"multi-smallest",limitEntries:3,limitEntriesMin:!0,canHandleUndefs:!0,isLeaf:!1})}async sortJoinEntries(a,c){return(await this.mediatorJoinEntriesSort.mediate({entries:a,context:c})).entries}async getOutput(a,c){const s=a.context.getSafe(n.KeysInitQuery.dataFactory),d=new t.Factory(s),l=c.sortedEntries,f=l[0],h=l[1];l.splice(0,2);const p={output:(0,i.getSafeBindings)(await this.mediatorJoin.mediate({type:a.type,entries:[f,h],context:a.context})),operation:d.createJoin([f.operation,h.operation],!1)};return l.push(p),{result:await this.mediatorJoin.mediate({type:a.type,entries:l,context:a.context})}}async getJoinCoefficients(a,c){let{metadatas:s}=c;s=[...s];const d=await this.sortJoinEntries(a.entries.map((h,p)=>({...h,metadata:s[p]})),a.context);s=d.map(h=>h.metadata);const l=u.ActorRdfJoin.getRequestInitialTimes(s),f=u.ActorRdfJoin.getRequestItemTimes(s);return(0,o.passTestWithSideData)({iterations:s[0].cardinality.value*s[1].cardinality.value*s.slice(2).reduce((h,p)=>h*p.cardinality.value,1),persistedItems:0,blockingItems:0,requestTime:l[0]+s[0].cardinality.value*f[0]+l[1]+s[1].cardinality.value*f[1]+s.slice(2).reduce((h,p,y)=>h+l.slice(2)[y]+p.cardinality.value*f.slice(2)[y],0)},{...c,sortedEntries:d})}};return Av.ActorRdfJoinMultiSmallest=e,Av}var PQ;function yde(){return PQ||(PQ=1,(function(u){var n=xd&&xd.__createBinding||(Object.create?(function(i,t,e,r){r===void 0&&(r=e);var a=Object.getOwnPropertyDescriptor(t,e);(!a||("get"in a?!t.__esModule:a.writable||a.configurable))&&(a={enumerable:!0,get:function(){return t[e]}}),Object.defineProperty(i,r,a)}):(function(i,t,e,r){r===void 0&&(r=e),i[r]=t[e]})),o=xd&&xd.__exportStar||function(i,t){for(var e in i)e!=="default"&&!Object.prototype.hasOwnProperty.call(t,e)&&n(t,i,e)};Object.defineProperty(u,"__esModule",{value:!0}),o(pde(),u)})(xd)),xd}var Rd={},Ev={},xv={},DQ;function NQ(){if(DQ)return xv;DQ=1,Object.defineProperty(xv,"__esModule",{value:!0}),xv.MaxAggregator=void 0;const u=jr();let n=class extends u.AggregateEvaluator{constructor(i,t,e,r){super(i,t,r),this.orderByEvaluator=e,this.state=void 0}putTerm(i){if(i.termType!=="Literal")throw new Error(`Term with value ${i.value} has type ${i.termType} and is not a literal`);this.state===void 0?this.state=i:this.orderByEvaluator.orderTypes(this.state,i)===-1&&(this.state=i)}termResult(){return this.state===void 0?this.emptyValue():this.state}};return xv.MaxAggregator=n,xv}var jQ;function bde(){if(jQ)return Ev;jQ=1,Object.defineProperty(Ev,"__esModule",{value:!0}),Ev.ActorBindingsAggregatorFactoryMax=void 0;const u=jr(),n=pe(),o=NQ();let i=class extends u.ActorBindingsAggregatorFactory{constructor(e){super(e),this.mediatorTermComparatorFactory=e.mediatorTermComparatorFactory}async test(e){return e.expr.aggregator!=="max"?(0,n.failTest)("This actor only supports the 'max' aggregator."):(0,n.passTestVoid)()}async run({expr:e,context:r}){return new o.MaxAggregator(await this.mediatorExpressionEvaluatorFactory.mediate({algExpr:e.expression,context:r}),e.distinct,await this.mediatorTermComparatorFactory.mediate({context:r}))}};return Ev.ActorBindingsAggregatorFactoryMax=i,Ev}var LQ;function _de(){return LQ||(LQ=1,(function(u){var n=Rd&&Rd.__createBinding||(Object.create?(function(i,t,e,r){r===void 0&&(r=e);var a=Object.getOwnPropertyDescriptor(t,e);(!a||("get"in a?!t.__esModule:a.writable||a.configurable))&&(a={enumerable:!0,get:function(){return t[e]}}),Object.defineProperty(i,r,a)}):(function(i,t,e,r){r===void 0&&(r=e),i[r]=t[e]})),o=Rd&&Rd.__exportStar||function(i,t){for(var e in i)e!=="default"&&!Object.prototype.hasOwnProperty.call(t,e)&&n(t,i,e)};Object.defineProperty(u,"__esModule",{value:!0}),o(bde(),u),o(NQ(),u)})(Rd)),Rd}var Fd={},Rv={},Fv={},MQ;function qQ(){if(MQ)return Fv;MQ=1,Object.defineProperty(Fv,"__esModule",{value:!0}),Fv.MinAggregator=void 0;const u=jr();let n=class extends u.AggregateEvaluator{constructor(i,t,e,r){super(i,t,r),this.orderByEvaluator=e,this.state=void 0}putTerm(i){if(i.termType!=="Literal")throw new Error(`Term with value ${i.value} has type ${i.termType} and is not a literal`);this.state===void 0?this.state=i:this.orderByEvaluator.orderTypes(this.state,i)===1&&(this.state=i)}termResult(){return this.state===void 0?this.emptyValue():this.state}};return Fv.MinAggregator=n,Fv}var CQ;function gde(){if(CQ)return Rv;CQ=1,Object.defineProperty(Rv,"__esModule",{value:!0}),Rv.ActorBindingsAggregatorFactoryMin=void 0;const u=jr(),n=pe(),o=qQ();let i=class extends u.ActorBindingsAggregatorFactory{constructor(e){super(e),this.mediatorTermComparatorFactory=e.mediatorTermComparatorFactory}async test(e){return e.expr.aggregator!=="min"?(0,n.failTest)("This actor only supports the 'min' aggregator."):(0,n.passTestVoid)()}async run({context:e,expr:r}){return new o.MinAggregator(await this.mediatorExpressionEvaluatorFactory.mediate({algExpr:r.expression,context:e}),r.distinct,await this.mediatorTermComparatorFactory.mediate({context:e}))}};return Rv.ActorBindingsAggregatorFactoryMin=i,Rv}var BQ;function mde(){return BQ||(BQ=1,(function(u){var n=Fd&&Fd.__createBinding||(Object.create?(function(i,t,e,r){r===void 0&&(r=e);var a=Object.getOwnPropertyDescriptor(t,e);(!a||("get"in a?!t.__esModule:a.writable||a.configurable))&&(a={enumerable:!0,get:function(){return t[e]}}),Object.defineProperty(i,r,a)}):(function(i,t,e,r){r===void 0&&(r=e),i[r]=t[e]})),o=Fd&&Fd.__exportStar||function(i,t){for(var e in i)e!=="default"&&!Object.prototype.hasOwnProperty.call(t,e)&&n(t,i,e)};Object.defineProperty(u,"__esModule",{value:!0}),o(gde(),u),o(qQ(),u)})(Fd)),Fd}var Id={},Iv={},Pv={},$Q;function vde(){if($Q)return Pv;$Q=1,Object.defineProperty(Pv,"__esModule",{value:!0}),Pv.SortIterator=void 0;const u=pt();let n=class extends u.TransformIterator{constructor(i,t,e){super(i,e);const r=e&&e.window;this.windowLength=Number.isFinite(r)&&r>0?r:Number.POSITIVE_INFINITY,this.sort=t,this.sorted=[]}_read(i,t){let e,{length:r}=this.sorted;for(;r!==this.windowLength&&(e=this.source.read(),e!==null);){let a=0,c=r-1,s,d;for(;a<=c;)s=Math.trunc((a+c)/2),d=this.sort(e,this.sorted[s]),d<0?a=s+1:d>0?c=s-1:(a=s,c=-1);this.sorted.splice(a,0,e),r++}r===this.windowLength&&this._push(this.sorted.pop()),t()}_flush(i){let{length:t}=this.sorted;for(;t--;)this._push(this.sorted.pop());i()}};return Pv.SortIterator=n,Pv}var UQ;function Tde(){if(UQ)return Iv;UQ=1,Object.defineProperty(Iv,"__esModule",{value:!0}),Iv.ActorQueryOperationOrderBy=void 0;const u=qt(),n=pe(),o=ge(),i=_t(),t=st(),e=vde();let r=class extends u.ActorQueryOperationTypedMediated{constructor(c){super(c,"orderby"),this.window=c.window??Number.POSITIVE_INFINITY,this.mediatorExpressionEvaluatorFactory=c.mediatorExpressionEvaluatorFactory,this.mediatorTermComparatorFactory=c.mediatorTermComparatorFactory}async testOperation(){return(0,n.passTestVoid)()}async runOperation(c,s){const d=await this.mediatorQueryOperation.mediate({operation:c.input,context:s}),l=(0,i.getSafeBindings)(d),f={window:this.window};let{bindingsStream:h}=l;const p=await this.mediatorTermComparatorFactory.mediate({context:s});for(let y=c.expressions.length-1;y>=0;y--){let _=c.expressions[y];const b=this.isAscending(_);_=this.extractSortExpression(_);const m=await this.mediatorExpressionEvaluatorFactory.mediate({algExpr:_,context:s}),g=async(S,F,M)=>{try{const O=await m.evaluate(S);M({bindings:S,result:O})}catch(O){(0,o.isExpressionError)(O)||h.emit("error",O),M({bindings:S,result:void 0})}F()},T=h.transform({transform:g});h=new e.SortIterator(T,(S,F)=>{let M=p.orderTypes(S.result,F.result);return b||(M*=-1),M},f).map(({bindings:S})=>S)}return{type:"bindings",bindingsStream:h,metadata:l.metadata}}extractSortExpression(c){const{expressionType:s,operator:d}=c;return s!==t.Algebra.expressionTypes.OPERATOR?c:d==="desc"?c.args[0]:c}isAscending(c){const{expressionType:s,operator:d}=c;return s!==t.Algebra.expressionTypes.OPERATOR?!0:d!=="desc"}};return Iv.ActorQueryOperationOrderBy=r,Iv}var VQ;function wde(){return VQ||(VQ=1,(function(u){var n=Id&&Id.__createBinding||(Object.create?(function(i,t,e,r){r===void 0&&(r=e);var a=Object.getOwnPropertyDescriptor(t,e);(!a||("get"in a?!t.__esModule:a.writable||a.configurable))&&(a={enumerable:!0,get:function(){return t[e]}}),Object.defineProperty(i,r,a)}):(function(i,t,e,r){r===void 0&&(r=e),i[r]=t[e]})),o=Id&&Id.__exportStar||function(i,t){for(var e in i)e!=="default"&&!Object.prototype.hasOwnProperty.call(t,e)&&n(t,i,e)};Object.defineProperty(u,"__esModule",{value:!0}),o(Tde(),u)})(Id)),Id}var Pd={},Dv={},QQ;function Sde(){if(QQ)return Dv;QQ=1,Object.defineProperty(Dv,"__esModule",{value:!0}),Dv.ActorOptimizeQueryOperationFilterPushdown=void 0;const u=gn(),n=qe(),o=pe(),i=_t(),t=_n(),e=st();let r=class extends u.ActorOptimizeQueryOperation{constructor(c){super(c)}async test(c){return(0,o.passTestVoid)()}async run(c){const s=c.context.getSafe(n.KeysInitQuery.dataFactory),d=new e.Factory(s);let l=c.operation;const f=this;this.splitConjunctive&&(l=e.Util.mapOperation(l,{filter(b,m){return b.expression.expressionType===e.Algebra.expressionTypes.OPERATOR&&b.expression.operator==="&&"?(f.logDebug(c.context,`Split conjunctive filter into ${b.expression.args.length} nested filters`),{recurse:!0,result:b.expression.args.reduce((g,T)=>m.createFilter(g,T),b.input)}):{recurse:!0,result:b}}},d));const h=this.getSources(l),p=new Map(await Promise.all(h.map(async b=>[b,await b.source.getSelectorShape(c.context)])));let y=!0,_=0;for(;y&&_<this.maxIterations;)y=!1,l=e.Util.mapOperation(l,{filter(b,m){if(!f.shouldAttemptPushDown(b,h,p))return{recurse:!0,result:b};const g=f.getExpressionVariables(b.expression),[T,v]=f.filterPushdown(b.expression,g,b.input,m,c.context);return T&&(y=!0),{recurse:!0,result:v}}}),_++;return _>1&&f.logDebug(c.context,`Pushed down filters in ${_} iterations`),this.mergeConjunctive&&(l=e.Util.mapOperation(l,{filter(b,m){if(b.input.type===e.Algebra.types.FILTER){const{nestedExpressions:g,input:T}=f.getNestedFilterExpressions(b);return f.logDebug(c.context,`Merge ${g.length} nested filters into conjunctive filter`),{recurse:!0,result:m.createFilter(T,g.slice(1).reduce((v,S)=>m.createOperatorExpression("&&",[v,S]),g[0]))}}return{recurse:!0,result:b}}})),{operation:l,context:c.context}}shouldAttemptPushDown(c,s,d){if(this.aggressivePushdown)return!0;const l=c.expression;return!!(l.expressionType===e.Algebra.expressionTypes.OPERATOR&&l.operator==="="&&(l.args[0].expressionType==="term"&&l.args[0].term.termType!=="Variable"&&l.args[1].expressionType==="term"&&l.args[1].term.termType==="Variable"||l.args[0].expressionType==="term"&&l.args[0].term.termType==="Variable"&&l.args[1].expressionType==="term"&&l.args[1].term.termType!=="Variable")||s.some(f=>(0,i.doesShapeAcceptOperation)(d.get(f),c)))}getSources(c){const s=new Set,d=l=>{const f=(0,i.getOperationSource)(l);return f&&s.add(f),!1};return e.Util.recurseOperation(c,{[e.Algebra.types.PATTERN]:d,[e.Algebra.types.LINK]:d,[e.Algebra.types.NPS]:d,[e.Algebra.types.SERVICE]:d}),[...s]}getExpressionVariables(c){switch(c.expressionType){case e.Algebra.expressionTypes.AGGREGATE:case e.Algebra.expressionTypes.WILDCARD:throw new Error(`Getting expression variables is not supported for ${c.expressionType}`);case e.Algebra.expressionTypes.EXISTENCE:return e.Util.inScopeVariables(c.input);case e.Algebra.expressionTypes.NAMED:return[];case e.Algebra.expressionTypes.OPERATOR:return(0,t.uniqTerms)(c.args.flatMap(s=>this.getExpressionVariables(s)));case e.Algebra.expressionTypes.TERM:return c.term.termType==="Variable"?[c.term]:[]}}getOverlappingOperations(c,s){const d=[],l=[],f=[];for(const h of c.input){const p=e.Util.inScopeVariables(h);this.variablesSubSetOf(s,p)?d.push(h):this.variablesIntersect(s,p)?l.push(h):f.push(h)}return{fullyOverlapping:d,partiallyOverlapping:l,notOverlapping:f}}filterPushdown(c,s,d,l,f){if(this.isExpressionFalse(c))return[!0,l.createUnion([])];if(c.type===e.Algebra.types.EXPRESSION&&c.expressionType===e.Algebra.expressionTypes.EXISTENCE)return[!1,l.createFilter(d,c)];switch(d.type){case e.Algebra.types.EXTEND:return this.variablesIntersect([d.variable],s)?[!1,l.createFilter(d,c)]:[!0,l.createExtend(this.filterPushdown(c,s,d.input,l,f)[1],d.variable,d.expression)];case e.Algebra.types.FILTER:{const[h,p]=this.filterPushdown(c,s,d.input,l,f);return[h,l.createFilter(p,d.expression)]}case e.Algebra.types.JOIN:{if(d.input.length===0)return[!1,l.createFilter(d,c)];const{fullyOverlapping:h,partiallyOverlapping:p,notOverlapping:y}=this.getOverlappingOperations(d,s),_=[];let b=!1;return h.length>0&&(b=!0,_.push(l.createJoin(h.map(m=>this.filterPushdown(c,s,m,l,f)[1])))),p.length>0&&_.push(l.createFilter(l.createJoin(p,!1),c)),y.length>0&&_.push(...y),_.length>1&&(b=!0),b&&this.logDebug(f,`Push down filter across join entries with ${h.length} fully overlapping, ${p.length} partially overlapping, and ${y.length} not overlapping`),[b,_.length===1?_[0]:l.createJoin(_)]}case e.Algebra.types.NOP:return[!0,d];case e.Algebra.types.PROJECT:return this.variablesIntersect(d.variables,s)?[!0,l.createProject(this.filterPushdown(c,s,d.input,l,f)[1],d.variables)]:[!0,d];case e.Algebra.types.UNION:{const{fullyOverlapping:h,partiallyOverlapping:p,notOverlapping:y}=this.getOverlappingOperations(d,s),_=[];let b=!1;return h.length>0&&(b=!0,_.push(l.createUnion(h.map(m=>this.filterPushdown(c,s,m,l,f)[1])))),p.length>0&&_.push(l.createFilter(l.createUnion(p,!1),c)),y.length>0&&_.push(...y),_.length>1&&(b=!0),b&&this.logDebug(f,`Push down filter across union entries with ${h.length} fully overlapping, ${p.length} partially overlapping, and ${y.length} not overlapping`),[b,_.length===1?_[0]:l.createUnion(_)]}case e.Algebra.types.VALUES:return this.variablesIntersect(d.variables,s)?[!1,l.createFilter(d,c)]:[!0,d];case e.Algebra.types.LEFT_JOIN:{if(this.pushIntoLeftJoins){const h=e.Util.inScopeVariables(d.input[1]);if(!this.variablesIntersect(s,h))return this.logDebug(f,"Push down filter into left join"),[!0,l.createLeftJoin(this.filterPushdown(c,s,d.input[0],l,f)[1],d.input[1],d.expression)]}return[!1,l.createFilter(d,c)]}case e.Algebra.types.PATTERN:{if(this.pushEqualityIntoPatterns){const h=this.getEqualityExpressionPushableIntoPattern(c);if(h){let p=!1;const y=d.metadata;if(d=(0,t.mapTermsNested)(d,_=>_.equals(h.variable)?(p=!0,h.term):_),d.type=e.Algebra.types.PATTERN,d.metadata=y,p)return this.logDebug(f,`Push down filter into pattern for ?${h.variable.value}`),[!0,l.createJoin([d,l.createValues([h.variable],[{[`?${h.variable.value}`]:h.term}])])]}}return[!1,l.createFilter(d,c)]}case e.Algebra.types.PATH:{if(this.pushEqualityIntoPatterns){const h=this.getEqualityExpressionPushableIntoPattern(c);if(h&&(d.subject.equals(h.variable)||d.object.equals(h.variable))){this.logDebug(f,`Push down filter into path for ?${h.variable.value}`);const p=d.metadata;return d=l.createPath(d.subject.equals(h.variable)?h.term:d.subject,d.predicate,d.object.equals(h.variable)?h.term:d.object),d.metadata=p,[!0,l.createJoin([d,l.createValues([h.variable],[{[`?${h.variable.value}`]:h.term}])])]}}return[!1,l.createFilter(d,c)]}case e.Algebra.types.MINUS:case e.Algebra.types.ALT:case e.Algebra.types.ASK:case e.Algebra.types.BGP:case e.Algebra.types.CONSTRUCT:case e.Algebra.types.DESCRIBE:case e.Algebra.types.DISTINCT:case e.Algebra.types.EXPRESSION:case e.Algebra.types.FROM:case e.Algebra.types.GRAPH:case e.Algebra.types.GROUP:case e.Algebra.types.INV:case e.Algebra.types.LINK:case e.Algebra.types.NPS:case e.Algebra.types.ONE_OR_MORE_PATH:case e.Algebra.types.ORDER_BY:case e.Algebra.types.REDUCED:case e.Algebra.types.SEQ:case e.Algebra.types.SERVICE:case e.Algebra.types.SLICE:case e.Algebra.types.ZERO_OR_MORE_PATH:case e.Algebra.types.ZERO_OR_ONE_PATH:case e.Algebra.types.COMPOSITE_UPDATE:case e.Algebra.types.DELETE_INSERT:case e.Algebra.types.LOAD:case e.Algebra.types.CLEAR:case e.Algebra.types.CREATE:case e.Algebra.types.DROP:case e.Algebra.types.ADD:case e.Algebra.types.MOVE:case e.Algebra.types.COPY:return[!1,l.createFilter(d,c)]}}getEqualityExpressionPushableIntoPattern(c){if(c.expressionType===e.Algebra.expressionTypes.OPERATOR&&c.operator==="="){if(c.args[0].expressionType==="term"&&c.args[0].term.termType!=="Variable"&&(c.args[0].term.termType!=="Literal"||this.isLiteralWithCanonicalLexicalForm(c.args[0].term))&&c.args[1].expressionType==="term"&&c.args[1].term.termType==="Variable")return{variable:c.args[1].term,term:c.args[0].term};if(c.args[0].expressionType==="term"&&c.args[0].term.termType==="Variable"&&c.args[1].expressionType==="term"&&c.args[1].term.termType!=="Variable"&&(c.args[1].term.termType!=="Literal"||this.isLiteralWithCanonicalLexicalForm(c.args[1].term)))return{variable:c.args[0].term,term:c.args[1].term}}}isLiteralWithCanonicalLexicalForm(c){if(c.termType==="Literal")switch(c.datatype.value){case"http://www.w3.org/2001/XMLSchema#string":case"http://www.w3.org/1999/02/22-rdf-syntax-ns#langString":case"http://www.w3.org/2001/XMLSchema#normalizedString":case"http://www.w3.org/2001/XMLSchema#anyURI":case"http://www.w3.org/2001/XMLSchema#base64Binary":case"http://www.w3.org/2001/XMLSchema#language":case"http://www.w3.org/2001/XMLSchema#Name":case"http://www.w3.org/2001/XMLSchema#NCName":case"http://www.w3.org/2001/XMLSchema#NMTOKEN":case"http://www.w3.org/2001/XMLSchema#token":case"http://www.w3.org/2001/XMLSchema#hexBinary":return!0}return!1}variablesIntersect(c,s){return c.some(d=>s.some(l=>d.equals(l)))}variablesSubSetOf(c,s){return c.length<=s.length&&c.every(d=>s.some(l=>d.equals(l)))}isExpressionFalse(c){return c.term&&c.term.termType==="Literal"&&c.term.value==="false"}getNestedFilterExpressions(c){if(c.input.type===e.Algebra.types.FILTER){const s=this.getNestedFilterExpressions(c.input);return{nestedExpressions:[c.expression,...s.nestedExpressions],input:s.input}}return{nestedExpressions:[c.expression],input:c.input}}};return Dv.ActorOptimizeQueryOperationFilterPushdown=r,Dv}var HQ;function Ode(){return HQ||(HQ=1,(function(u){var n=Pd&&Pd.__createBinding||(Object.create?(function(i,t,e,r){r===void 0&&(r=e);var a=Object.getOwnPropertyDescriptor(t,e);(!a||("get"in a?!t.__esModule:a.writable||a.configurable))&&(a={enumerable:!0,get:function(){return t[e]}}),Object.defineProperty(i,r,a)}):(function(i,t,e,r){r===void 0&&(r=e),i[r]=t[e]})),o=Pd&&Pd.__exportStar||function(i,t){for(var e in i)e!=="default"&&!Object.prototype.hasOwnProperty.call(t,e)&&n(t,i,e)};Object.defineProperty(u,"__esModule",{value:!0}),o(Sde(),u)})(Pd)),Pd}var Dd={},Nv={},Nd={},GQ;function zQ(){if(GQ)return Nd;GQ=1,Object.defineProperty(Nd,"__esModule",{value:!0}),Nd.ActorDereferenceHttpBase=Nd.mediaTypesToAcceptString=void 0;const u=AA(),n=Ti(),o=pe(),i=xf(),t=Jr(),e=/^[^ ;]*/u;function r(c,s){const d="*/*;q=0.1",l=[],f=Object.entries(c).map(([p,y])=>({mediaType:p,priority:y})).sort((p,y)=>y.priority===p.priority?p.mediaType.localeCompare(y.mediaType):y.priority-p.priority);let h=f.length-1;for(const{mediaType:p,priority:y}of f){const _=p+(y===1?"":`;q=${y.toFixed(3).replace(/0*$/u,"")}`);if(h+_.length>s){for(;h+d.length>s;){const b=l.pop()??"";h-=b.length+1}l.push(d);break}l.push(_),h+=_.length}return l.length===0?"*/*":l.join(",")}Nd.mediaTypesToAcceptString=r;let a=class extends u.ActorDereference{constructor(s){super(s)}async test({url:s}){return/^https?:/u.test(s)?(0,o.passTestVoid)():(0,o.failTest)(`Cannot retrieve ${s} because it is not an HTTP(S) URL.`)}async run(s){var b,m;let d=!0;const l=new Headers(s.headers);l.append("Accept",r(await((b=s.mediaTypes)==null?void 0:b.call(s))??{},this.getMaxAcceptHeaderLength()));let f;const h=Date.now();try{f=await this.mediatorHttp.mediate({context:s.context,init:{headers:l,method:s.method},input:s.url})}catch(g){return this.handleDereferenceErrors(s,g)}const p=(0,t.resolve)(f.url,s.url),y=Date.now()-h;if(f.status!==200){d=!1;const g=f.body?await(0,i.stringify)(n.ActorHttp.toNodeReadable(f.body)):"empty response";if(!s.acceptErrors){const T=new Error(`Could not retrieve ${s.url} (HTTP status ${f.status}):
${g}`);return this.handleDereferenceErrors(s,T,f.headers,y)}}const _=(m=e.exec(f.headers.get("content-type")??""))==null?void 0:m[0];return{url:p,data:d?n.ActorHttp.toNodeReadable(f.body):(0,u.emptyReadable)(),exists:d,requestTime:y,headers:f.headers,mediaType:_==="text/plain"?void 0:_}}};return Nd.ActorDereferenceHttpBase=a,Nd}var XQ;function Ade(){if(XQ)return Nv;XQ=1,Object.defineProperty(Nv,"__esModule",{value:!0}),Nv.ActorDereferenceHttp=void 0;const u=zQ();class n extends u.ActorDereferenceHttpBase{getMaxAcceptHeaderLength(){return this.maxAcceptHeaderLengthBrowser}}return Nv.ActorDereferenceHttp=n,Nv}var JQ;function Ede(){return JQ||(JQ=1,(function(u){var n=Dd&&Dd.__createBinding||(Object.create?(function(i,t,e,r){r===void 0&&(r=e);var a=Object.getOwnPropertyDescriptor(t,e);(!a||("get"in a?!t.__esModule:a.writable||a.configurable))&&(a={enumerable:!0,get:function(){return t[e]}}),Object.defineProperty(i,r,a)}):(function(i,t,e,r){r===void 0&&(r=e),i[r]=t[e]})),o=Dd&&Dd.__exportStar||function(i,t){for(var e in i)e!=="default"&&!Object.prototype.hasOwnProperty.call(t,e)&&n(t,i,e)};Object.defineProperty(u,"__esModule",{value:!0}),o(Ade(),u),o(zQ(),u)})(Dd)),Dd}var jd={},jv={},KQ;function xde(){if(KQ)return jv;KQ=1,Object.defineProperty(jv,"__esModule",{value:!0}),jv.ActorHttpProxy=void 0;const u=Ti(),n=qe(),o=pe();let i=class extends u.ActorHttp{constructor(e){super(e)}async test(e){const r=e.context.get(n.KeysHttpProxy.httpProxyHandler);return r?await r.getProxy(e)?(0,o.passTest)({time:Number.POSITIVE_INFINITY}):(0,o.failTest)(`Actor ${this.name} could not determine a proxy for the given request.`):(0,o.failTest)(`Actor ${this.name} could not find a proxy handler in the context.`)}async run(e){const r=typeof e.input=="string"?e.input:e.input.url,a=e.context.get(n.KeysHttpProxy.httpProxyHandler),c=await this.mediatorHttp.mediate({...await a.getProxy(e),context:e.context.delete(n.KeysHttpProxy.httpProxyHandler)});return Object.defineProperty(c,"url",{configurable:!0,enumerable:!0,get:()=>c.headers.get("x-final-url")??r}),c}};return jv.ActorHttpProxy=i,jv}var Lv={},kQ;function Rde(){if(kQ)return Lv;kQ=1,Object.defineProperty(Lv,"__esModule",{value:!0}),Lv.ProxyHandlerStatic=void 0;let u=class{constructor(o){this.prefixUrl=o}async getProxy(o){return{init:o.init,input:this.modifyInput(o.input)}}modifyInput(o){return typeof o=="string"?this.prefixUrl+o:new Request(this.prefixUrl+o.url,o)}};return Lv.ProxyHandlerStatic=u,Lv}var WQ;function Fde(){return WQ||(WQ=1,(function(u){var n=jd&&jd.__createBinding||(Object.create?(function(i,t,e,r){r===void 0&&(r=e);var a=Object.getOwnPropertyDescriptor(t,e);(!a||("get"in a?!t.__esModule:a.writable||a.configurable))&&(a={enumerable:!0,get:function(){return t[e]}}),Object.defineProperty(i,r,a)}):(function(i,t,e,r){r===void 0&&(r=e),i[r]=t[e]})),o=jd&&jd.__exportStar||function(i,t){for(var e in i)e!=="default"&&!Object.prototype.hasOwnProperty.call(t,e)&&n(t,i,e)};Object.defineProperty(u,"__esModule",{value:!0}),o(xde(),u),o(Rde(),u)})(jd)),jd}var Ld={},Mv={},YQ;function Ide(){if(YQ)return Mv;YQ=1,Object.defineProperty(Mv,"__esModule",{value:!0}),Mv.ActorContextPreprocessQuerySourceIdentify=void 0;const u=sp(),n=qe(),o=pe(),i=ff();let t=class extends u.ActorContextPreprocess{constructor(r){super(r),this.cache=this.cacheSize?new i.LRUCache({max:this.cacheSize}):void 0;const a=this.cache;a&&this.httpInvalidator.addInvalidateListener(({url:c})=>c?a.delete(c):a.clear())}async test(r){return(0,o.passTestVoid)()}async run(r){let a=r.context;if(a.has(n.KeysInitQuery.querySourcesUnidentified)){const c=r.context.get(n.KeysInitQuery.querySourcesUnidentified),s=await Promise.all(c.map(f=>this.expandSource(f))),d=await Promise.all(s.map(async f=>this.identifySource(f,r.context))),l=r.context.get(n.KeysStatistics.dereferencedLinks);if(l)for(const f of d)l.updateStatistic({url:f.source.referenceValue,metadata:{seed:!0}},f.source);a=r.context.delete(n.KeysInitQuery.querySourcesUnidentified).set(n.KeysQueryOperation.querySources,d)}return{context:a}}async expandSource(r){return typeof r=="string"||"match"in r?{value:r}:{...r,context:(await this.mediatorContextPreprocess.mediate({context:o.ActionContext.ensureActionContext(r.context??{})})).context}}identifySource(r,a){let c;return typeof r.value=="string"&&this.cache&&(c=this.cache.get(r.value)),c||(c=this.mediatorQuerySourceIdentify.mediate({querySourceUnidentified:r,context:a}).then(({querySource:s})=>s),typeof r.value=="string"&&this.cache&&this.cache.set(r.value,c)),c}};return Mv.ActorContextPreprocessQuerySourceIdentify=t,Mv}var ZQ;function Pde(){return ZQ||(ZQ=1,(function(u){var n=Ld&&Ld.__createBinding||(Object.create?(function(i,t,e,r){r===void 0&&(r=e);var a=Object.getOwnPropertyDescriptor(t,e);(!a||("get"in a?!t.__esModule:a.writable||a.configurable))&&(a={enumerable:!0,get:function(){return t[e]}}),Object.defineProperty(i,r,a)}):(function(i,t,e,r){r===void 0&&(r=e),i[r]=t[e]})),o=Ld&&Ld.__exportStar||function(i,t){for(var e in i)e!=="default"&&!Object.prototype.hasOwnProperty.call(t,e)&&n(t,i,e)};Object.defineProperty(u,"__esModule",{value:!0}),o(Ide(),u)})(Ld)),Ld}var Md={},qv={},eH;function Dde(){if(eH)return qv;eH=1,Object.defineProperty(qv,"__esModule",{value:!0}),qv.ActorRdfUpdateQuadsHypermedia=void 0;const u=cE(),n=pe(),o=ff();let i=class extends u.ActorRdfUpdateQuadsDestination{constructor(e){super(e),this.cache=this.cacheSize?new o.LRUCache({max:this.cacheSize}):void 0;const r=this.cache;r&&this.httpInvalidator.addInvalidateListener(({url:a})=>a?r.delete(a):r.clear())}async test(e){return(0,u.getContextDestinationUrl)((0,u.getContextDestination)(e.context))?(0,n.passTestVoid)():(0,n.failTest)(`Actor ${this.name} can only update quads against a single destination URL.`)}getDestination(e){const r=(0,u.getContextDestination)(e);let a=(0,u.getContextDestinationUrl)(r);if(this.cache&&this.cache.has(a))return this.cache.get(a);const c=(async()=>{var f;let s,d;try{const h=await this.mediatorDereferenceRdf.mediate({context:e,url:a,acceptErrors:!0});d=h.exists,a=h.url;const p=await this.mediatorMetadata.mediate({context:e,url:a,quads:h.data,triples:(f=h.metadata)==null?void 0:f.triples});s=(await this.mediatorMetadataExtract.mediate({context:e,url:a,metadata:p.metadata,headers:h.headers,requestTime:h.requestTime})).metadata}catch{s={},d=!1}const{destination:l}=await this.mediatorRdfUpdateHypermedia.mediate({context:e,url:a,metadata:s,exists:d,forceDestinationType:(0,u.getDataDestinationType)(r)});return l})();return this.cache&&this.cache.set(a,c),c}};return qv.ActorRdfUpdateQuadsHypermedia=i,qv}var tH;function Nde(){return tH||(tH=1,(function(u){var n=Md&&Md.__createBinding||(Object.create?(function(i,t,e,r){r===void 0&&(r=e);var a=Object.getOwnPropertyDescriptor(t,e);(!a||("get"in a?!t.__esModule:a.writable||a.configurable))&&(a={enumerable:!0,get:function(){return t[e]}}),Object.defineProperty(i,r,a)}):(function(i,t,e,r){r===void 0&&(r=e),i[r]=t[e]})),o=Md&&Md.__exportStar||function(i,t){for(var e in i)e!=="default"&&!Object.prototype.hasOwnProperty.call(t,e)&&n(t,i,e)};Object.defineProperty(u,"__esModule",{value:!0}),o(Dde(),u)})(Md)),Md}var qd={},Cv={},rH;function jde(){if(rH)return Cv;rH=1,Object.defineProperty(Cv,"__esModule",{value:!0}),Cv.ActionObserverHttp=void 0;const u=pe();class n extends u.ActionObserver{constructor(i){super(i),this.requests=0,this.bus.subscribeObserver(this),this.httpInvalidator.addInvalidateListener(()=>{this.requests=0})}onRun(i,t,e){this.observedActors.includes(i.name)&&this.requests++}}return Cv.ActionObserverHttp=n,Cv}var Bv={},nH;function Lde(){if(nH)return Bv;nH=1,Object.defineProperty(Bv,"__esModule",{value:!0}),Bv.ActorQueryResultSerializeSparqlJson=void 0;const u=Kn(),n=pe(),o=pt(),i=Pt();let t=class IT extends u.ActorQueryResultSerializeFixedMediaTypes{constructor(r){super(r)}static bindingToJsonBindings(r){if(r.termType==="Literal"){const a=r,c={value:a.value,type:"literal"},{language:s,datatype:d}=a;return s?c["xml:lang"]=s:d&&d.value!=="http://www.w3.org/2001/XMLSchema#string"&&(c.datatype=d.value),c}return r.termType==="BlankNode"?{value:r.value,type:"bnode"}:r.termType==="Quad"?{value:{subject:IT.bindingToJsonBindings(r.subject),predicate:IT.bindingToJsonBindings(r.predicate),object:IT.bindingToJsonBindings(r.object)},type:"triple"}:{value:r.value,type:"uri"}}async testHandleChecked(r,a){return["bindings","boolean"].includes(r.type)?(0,n.passTestVoid)():(0,n.failTest)("This actor can only handle bindings streams or booleans.")}async runHandle(r,a,c){const s=new i.Readable,d={};if(r.type==="bindings"){const l=await r.metadata();l.variables.length>0&&(d.vars=l.variables.map(f=>f.variable.value))}if(s.push(`{"head": ${JSON.stringify(d)},
`),r.type==="bindings"){const l=r.bindingsStream;s.push(`"results": { "bindings": [
`);let f=!0;function*h(p){yield p()}s.wrap((0,o.wrap)(l).map(p=>{const y=`${f?"":`,
`}${JSON.stringify(Object.fromEntries([...p].map(([_,b])=>[_.value,IT.bindingToJsonBindings(b)])))}`;return f=!1,y}).append((0,o.wrap)(h(()=>`
]}${this.emitMetadata?`,
"metadata": { "httpRequests": ${this.httpObserver.requests} }`:""}}
`))))}else s.wrap((0,o.wrap)(r.execute().then(l=>[`"boolean":${l}
}
`])));return{data:s}}};return Bv.ActorQueryResultSerializeSparqlJson=t,Bv}var iH;function aH(){return iH||(iH=1,(function(u){var n=qd&&qd.__createBinding||(Object.create?(function(i,t,e,r){r===void 0&&(r=e);var a=Object.getOwnPropertyDescriptor(t,e);(!a||("get"in a?!t.__esModule:a.writable||a.configurable))&&(a={enumerable:!0,get:function(){return t[e]}}),Object.defineProperty(i,r,a)}):(function(i,t,e,r){r===void 0&&(r=e),i[r]=t[e]})),o=qd&&qd.__exportStar||function(i,t){for(var e in i)e!=="default"&&!Object.prototype.hasOwnProperty.call(t,e)&&n(t,i,e)};Object.defineProperty(u,"__esModule",{value:!0}),o(jde(),u),o(Lde(),u)})(qd)),qd}var Cd={},$v={},uH;function Mde(){if(uH)return $v;uH=1,Object.defineProperty($v,"__esModule",{value:!0}),$v.ActionObserverHttp=void 0;const u=pe();let n=class extends u.ActionObserver{constructor(i){super(i),this.requests=0,this.bus.subscribeObserver(this),this.httpInvalidator.addInvalidateListener(()=>{this.requests=0})}onRun(i,t,e){this.observedActors.includes(i.name)&&this.requests++}};return $v.ActionObserverHttp=n,$v}var Uv={},oH;function qde(){if(oH)return Uv;oH=1,Object.defineProperty(Uv,"__esModule",{value:!0}),Uv.ActorQueryResultSerializeStats=void 0;const u=Kn(),n=qe(),o=pe(),i=pt(),t=Pt();let e=class extends u.ActorQueryResultSerializeFixedMediaTypes{constructor(a){super(a)}async testHandleChecked(a,c){return["bindings","quads"].includes(a.type)?(0,o.passTestVoid)():(0,o.failTest)("This actor can only handle bindings streams or quad streams.")}pushHeader(a){const c=["Result","Delay (ms)","HTTP requests"].join(",");a.push(`${c}
`)}createStat(a,c){return`${[c,this.delay(a),this.httpObserver.requests].join(",")}
`}createSpecialLine(a,c){return`${[a,this.delay(c),this.httpObserver.requests].join(",")}
`}async runHandle(a,c,s){const d=new t.Readable,l=a.type==="bindings"?a.bindingsStream:a.quadStream,f=a.context.getSafe(n.KeysInitQuery.queryTimestampHighResolution);let h=1;function*p(_){yield _()}const y=(0,i.wrap)(l).map(()=>this.createStat(f,h++)).prepend([this.createSpecialLine("PLANNING",f)]).append((0,i.wrap)(p(()=>this.createSpecialLine("TOTAL",f))));return this.pushHeader(d),d.wrap(y),{data:d}}now(){return performance.now()}delay(a){return this.now()-a}};return Uv.ActorQueryResultSerializeStats=e,Uv}var sH;function cH(){return sH||(sH=1,(function(u){var n=Cd&&Cd.__createBinding||(Object.create?(function(i,t,e,r){r===void 0&&(r=e);var a=Object.getOwnPropertyDescriptor(t,e);(!a||("get"in a?!t.__esModule:a.writable||a.configurable))&&(a={enumerable:!0,get:function(){return t[e]}}),Object.defineProperty(i,r,a)}):(function(i,t,e,r){r===void 0&&(r=e),i[r]=t[e]})),o=Cd&&Cd.__exportStar||function(i,t){for(var e in i)e!=="default"&&!Object.prototype.hasOwnProperty.call(t,e)&&n(t,i,e)};Object.defineProperty(u,"__esModule",{value:!0}),o(Mde(),u),o(qde(),u)})(Cd)),Cd}var Bd={},Vv={},$d={},Qv={},dH;function Cde(){if(dH)return Qv;dH=1,Object.defineProperty(Qv,"__esModule",{value:!0}),Qv.ActorQuerySourceIdentifyHypermedia=void 0;const u=pe();class n extends u.Actor{constructor(i,t){super(i),this.sourceType=t}async test(i){return i.forceSourceType&&this.sourceType!==i.forceSourceType?(0,u.failTest)(`Actor ${this.name} is not able to handle source type ${i.forceSourceType}.`):this.testMetadata(i)}}return Qv.ActorQuerySourceIdentifyHypermedia=n,Qv}var lH;function CE(){return lH||(lH=1,(function(u){var n=$d&&$d.__createBinding||(Object.create?(function(i,t,e,r){r===void 0&&(r=e);var a=Object.getOwnPropertyDescriptor(t,e);(!a||("get"in a?!t.__esModule:a.writable||a.configurable))&&(a={enumerable:!0,get:function(){return t[e]}}),Object.defineProperty(i,r,a)}):(function(i,t,e,r){r===void 0&&(r=e),i[r]=t[e]})),o=$d&&$d.__exportStar||function(i,t){for(var e in i)e!=="default"&&!Object.prototype.hasOwnProperty.call(t,e)&&n(t,i,e)};Object.defineProperty(u,"__esModule",{value:!0}),o(Cde(),u)})($d)),$d}var Hv={},Ud={},Gv={},fH;function Bde(){if(fH)return Gv;fH=1,Object.defineProperty(Gv,"__esModule",{value:!0}),Gv.ActorQuerySourceIdentify=void 0;const u=pe();let n=class extends u.Actor{constructor(i){super(i)}};return Gv.ActorQuerySourceIdentify=n,Gv}var yr={},hH;function $de(){if(hH)return yr;hH=1,Object.defineProperty(yr,"__esModule",{value:!0}),yr.filterMatchingQuotedQuads=yr.quadsOrderToBindingsOrder=yr.quadsMetadataToBindingsMetadata=yr.setMetadata=yr.getDuplicateElementLinks=yr.getVariables=yr.isTermVariable=yr.quadsToBindings=void 0;const u=Wi(),n=br(),o=Yt(),i=_n(),t=m6();function e(h,p,y,_,b){const m=a(p),g=p.graph.termType==="Variable"&&!b,T=c(p),v=(0,i.reduceTermsNested)(p,(M,O,w)=>(O.termType==="Variable"&&(M[w.join("_")]=O.value),M),{});let S=h;g&&(S=S.filter(M=>M.graph.termType!=="DefaultGraph")),T&&(S=S.filter(M=>{for(const O in T){const w=O.split("_"),E=(0,i.getValueNestedPath)(M,w);for(const R of T[O])if(!E.equals((0,i.getValueNestedPath)(M,R)))return!1}return!0}));const F=new u.ClosableIterator(S.map(M=>_.bindings(Object.keys(v).map(O=>{const w=O.split("_"),E=v[O],R=(0,i.getValueNestedPath)(M,w);return[y.variable(E),R]}))),{onClose:()=>h.destroy()});return s(y,F,h,v,m,g||!!T),F}yr.quadsToBindings=e;function r(h){return h.termType==="Variable"}yr.isTermVariable=r;function a(h){return(0,i.uniqTerms)((0,i.getTermsNested)(h).filter(r))}yr.getVariables=a;function c(h){const p={};let y=!1;if((0,i.forEachTermsNested)(h,(b,m)=>{if(b.termType==="Variable"){const g=(0,o.termToString)(b),T=(p[g]||(p[g]=[])).push(m);y=y||T>1}}),!y)return;const _={};for(const b in p){const m=p[b],g=m.slice(1);g.length>0&&(_[m[0].join("_")]=g)}return _}yr.getDuplicateElementLinks=c;function s(h,p,y,_,b,m){const g=v=>{m&&(v.cardinality.type="estimate"),p.setProperty("metadata",d(h,(0,n.validateMetadataQuads)(v),_,b)),v.state&&v.state.addInvalidateListener(()=>{s(h,p,y,_,b,m)})},T=y.getProperty("metadata");T?g(T):y.getProperty("metadata",g)}yr.setMetadata=s;function d(h,p,y,_){return{...p,order:p.order?l(h,p.order,y):void 0,availableOrders:p.availableOrders?p.availableOrders.map(b=>({cost:b.cost,terms:l(h,b.terms,y)})):void 0,variables:_.map(b=>({variable:b,canBeUndef:!1}))}}yr.quadsMetadataToBindingsMetadata=d;function l(h,p,y){const _={};return p.map(b=>{const m=y[b.term];if(m&&!_[m])return _[m]=!0,{term:h.variable(m),direction:b.direction}}).filter(Boolean)}yr.quadsOrderToBindingsOrder=l;function f(h,p){return(0,i.someTerms)(h,y=>y.termType==="Quad")&&(p=p.filter(y=>(0,t.matchPatternMappings)(y,h))),p}return yr.filterMatchingQuotedQuads=f,yr}var pH;function zv(){return pH||(pH=1,(function(u){var n=Ud&&Ud.__createBinding||(Object.create?(function(i,t,e,r){r===void 0&&(r=e);var a=Object.getOwnPropertyDescriptor(t,e);(!a||("get"in a?!t.__esModule:a.writable||a.configurable))&&(a={enumerable:!0,get:function(){return t[e]}}),Object.defineProperty(i,r,a)}):(function(i,t,e,r){r===void 0&&(r=e),i[r]=t[e]})),o=Ud&&Ud.__exportStar||function(i,t){for(var e in i)e!=="default"&&!Object.prototype.hasOwnProperty.call(t,e)&&n(t,i,e)};Object.defineProperty(u,"__esModule",{value:!0}),o(Bde(),u),o($de(),u)})(Ud)),Ud}var yH;function bH(){if(yH)return Hv;yH=1,Object.defineProperty(Hv,"__esModule",{value:!0}),Hv.QuerySourceQpf=void 0;const u=zv(),n=qe(),o=br(),i=pt(),t=Yt(),e=E0(),r=_n();let a=class{constructor(d,l,f,h,p,y,_,b,m,g,T,v,S,F){if(this.referenceValue=T,this.mediatorMetadata=d,this.mediatorMetadataExtract=l,this.mediatorDereferenceRdf=f,this.dataFactory=h,this.algebraFactory=p,this.bindingsFactory=y,this.subjectUri=_,this.predicateUri=b,this.objectUri=m,this.graphUri=g,this.url=T,this.bindingsRestricted=S,this.cachedQuads={},this.searchForm=this.getSearchForm(v),this.defaultGraph=v.defaultGraph?this.dataFactory.namedNode(v.defaultGraph):void 0,F){let M=(0,i.wrap)(F);this.defaultGraph&&(M=this.reverseMapQuadsToDefaultGraph(M)),v={...v,state:new o.MetadataValidationState},M.setProperty("metadata",v),this.cacheQuads(M,this.dataFactory.variable(""),this.dataFactory.variable(""),this.dataFactory.variable(""),this.dataFactory.variable(""))}this.selectorShape=this.bindingsRestricted?{type:"operation",operation:{operationType:"pattern",pattern:this.algebraFactory.createPattern(this.dataFactory.variable("s"),this.dataFactory.variable("p"),this.dataFactory.variable("o"),this.dataFactory.variable("g"))},variablesOptional:[this.dataFactory.variable("s"),this.dataFactory.variable("p"),this.dataFactory.variable("o"),this.dataFactory.variable("g")],filterBindings:!0}:{type:"operation",operation:{operationType:"pattern",pattern:this.algebraFactory.createPattern(this.dataFactory.variable("s"),this.dataFactory.variable("p"),this.dataFactory.variable("o"),this.dataFactory.variable("g"))},variablesOptional:[this.dataFactory.variable("s"),this.dataFactory.variable("p"),this.dataFactory.variable("o"),this.dataFactory.variable("g")]}}async getSelectorShape(){return this.selectorShape}queryBindings(d,l,f){if(d.type!=="pattern")throw new Error(`Attempted to pass non-pattern operation '${d.type}' to QuerySourceQpf`);const h=!!l.get(n.KeysQueryOperation.unionDefaultGraph);let p=this.match(d.subject,d.predicate,d.object,d.graph,h,l,f);return p=(0,u.filterMatchingQuotedQuads)(d,p),(0,u.quadsToBindings)(p,d,this.dataFactory,this.bindingsFactory,h)}getSearchForm(d){if(!d.searchForms||!d.searchForms.values)return;const{searchForms:l}=d;for(const f of l.values)if(this.graphUri&&this.subjectUri in f.mappings&&this.predicateUri in f.mappings&&this.objectUri in f.mappings&&this.graphUri in f.mappings&&Object.keys(f.mappings).length===4||this.subjectUri in f.mappings&&this.predicateUri in f.mappings&&this.objectUri in f.mappings&&Object.keys(f.mappings).length===3)return f}createFragmentUri(d,l,f,h,p){const y={},_=[{uri:this.subjectUri,term:l},{uri:this.predicateUri,term:f},{uri:this.objectUri,term:h},{uri:this.graphUri,term:p}];for(const b of _)b.uri&&(this.bindingsRestricted||b.term.termType!=="Variable"&&(b.term.termType!=="Quad"||(0,r.everyTermsNested)(b.term,m=>m.termType!=="Variable")))&&(y[b.uri]=(0,t.termToString)(b.term));return d.getUri(y)}match(d,l,f,h,p,y,_){let b=!1;if(h.termType==="DefaultGraph")if(this.defaultGraph)b=!0,h=this.defaultGraph;else if(Object.keys(this.searchForm.mappings).length===4&&!this.defaultGraph)if(p)h=this.dataFactory.variable("g");else{const v=new i.ArrayIterator([],{autoStart:!1});return v.setProperty("metadata",{state:new o.MetadataValidationState,requestTime:0,cardinality:{type:"exact",value:0},first:null,next:null,last:null}),v}else Object.keys(this.searchForm.mappings).length===3&&(h=this.dataFactory.variable("g"));if(!(_!=null&&_.filterBindings)){const v=this.getCachedQuads(d,l,f,h);if(v)return v}const m=this;let g;const T=(async function(){var O;let v=m.createFragmentUri(m.searchForm,d,l,f,h);_!=null&&_.filterBindings&&(v=await m.getBindingsRestrictedLink(d,l,f,h,v,_.filterBindings));const S=await m.mediatorDereferenceRdf.mediate({context:y,url:v});v=S.url;const F=await m.mediatorMetadata.mediate({context:y,url:v,quads:S.data,triples:(O=S.metadata)==null?void 0:O.triples}),{metadata:M}=await m.mediatorMetadataExtract.mediate({context:y,url:v,metadata:F.metadata,requestTime:S.requestTime});return g.setProperty("metadata",{...M,state:new o.MetadataValidationState,subsetOf:m.url}),F.data})();return g=new i.TransformIterator(async()=>{const v=await T,S=this.dataFactory.defaultGraph();let F=(0,i.wrap)(v).transform({filter(M){return(0,r.matchPattern)(M,d,l,f,h)?!0:b&&(0,r.matchPattern)(M,d,l,f,S)}});return(b||h.termType==="Variable")&&(F=this.reverseMapQuadsToDefaultGraph(F)),F},{autoStart:!1}),_!=null&&_.filterBindings?g:(this.cacheQuads(g,d,l,f,h),this.getCachedQuads(d,l,f,h))}async getBindingsRestrictedLink(d,l,f,h,p,y){const _=[];for(const m of await y.bindings.toArray()){const g=["("];for(const T of y.metadata.variables){const v=m.get(T.variable);g.push(v?(0,e.termToString)(v):"UNDEF"),g.push(" ")}g.push(")"),_.push(g.join(""))}_.length===0&&_.push("(<ex:comunica:unknown>)");const b=encodeURIComponent(`(${y.metadata.variables.map(m=>`?${m.variable.value}`).join(" ")}) { ${_.join(" ")} }`);return`${p}&values=${b}`}reverseMapQuadsToDefaultGraph(d){const l=this.dataFactory.defaultGraph();return d.map(f=>(0,r.mapTerms)(f,(h,p)=>p==="graph"&&h.equals(this.defaultGraph)?l:h))}getPatternId(d,l,f,h){return JSON.stringify({s:d.termType==="Variable"?"":c(d),p:l.termType==="Variable"?"":c(l),o:f.termType==="Variable"?"":c(f),g:h.termType==="Variable"?"":c(h)})}cacheQuads(d,l,f,h,p){const y=this.getPatternId(l,f,h,p);this.cachedQuads[y]=d.clone()}getCachedQuads(d,l,f,h){const p=this.getPatternId(d,l,f,h),y=this.cachedQuads[p];if(y)return y.clone()}queryQuads(d,l){throw new Error("queryQuads is not implemented in QuerySourceQpf")}queryBoolean(d,l){throw new Error("queryBoolean is not implemented in QuerySourceQpf")}queryVoid(d,l){throw new Error("queryVoid is not implemented in QuerySourceQpf")}};Hv.QuerySourceQpf=a;function c(s){return s.termType==="DefaultGraph"?"|":(0,t.termToString)(s)}return Hv}var _H;function Ude(){if(_H)return Vv;_H=1,Object.defineProperty(Vv,"__esModule",{value:!0}),Vv.ActorQuerySourceIdentifyHypermediaQpf=void 0;const u=CE(),n=qe(),o=pe(),i=Vt(),t=st(),e=bH();let r=class extends u.ActorQuerySourceIdentifyHypermedia{constructor(c){super(c,"qpf")}async test(c){return c.forceSourceType&&c.forceSourceType!=="qpf"&&c.forceSourceType!=="brtpf"?(0,o.failTest)(`Actor ${this.name} is not able to handle source type ${c.forceSourceType}.`):this.testMetadata(c)}async testMetadata(c){const{searchForm:s}=await this.createSource(c.url,c.metadata,c.context,c.forceSourceType==="brtpf");return s?c.handledDatasets&&c.handledDatasets[s.dataset]?(0,o.failTest)(`Actor ${this.name} can only be applied for the first page of a QPF dataset.`):(0,o.passTest)({filterFactor:1}):(0,o.failTest)("Illegal state: found no TPF/QPF search form anymore in metadata.")}async run(c){this.logInfo(c.context,`Identified as qpf source: ${c.url}`);const s=await this.createSource(c.url,c.metadata,c.context,c.forceSourceType==="brtpf",c.quads);return{source:s,dataset:s.searchForm.dataset}}async createSource(c,s,d,l,f){const h=d.getSafe(n.KeysInitQuery.dataFactory),p=new t.Factory(h);return new e.QuerySourceQpf(this.mediatorMetadata,this.mediatorMetadataExtract,this.mediatorDereferenceRdf,h,p,await i.BindingsFactory.create(this.mediatorMergeBindingsContext,d,h),this.subjectUri,this.predicateUri,this.objectUri,this.graphUri,c,s,l,f)}};return Vv.ActorQuerySourceIdentifyHypermediaQpf=r,Vv}var gH;function Vde(){return gH||(gH=1,(function(u){var n=Bd&&Bd.__createBinding||(Object.create?(function(i,t,e,r){r===void 0&&(r=e);var a=Object.getOwnPropertyDescriptor(t,e);(!a||("get"in a?!t.__esModule:a.writable||a.configurable))&&(a={enumerable:!0,get:function(){return t[e]}}),Object.defineProperty(i,r,a)}):(function(i,t,e,r){r===void 0&&(r=e),i[r]=t[e]})),o=Bd&&Bd.__exportStar||function(i,t){for(var e in i)e!=="default"&&!Object.prototype.hasOwnProperty.call(t,e)&&n(t,i,e)};Object.defineProperty(u,"__esModule",{value:!0}),o(Ude(),u),o(bH(),u)})(Bd)),Bd}var Vd={},Xv={},Jv={},mH;function vH(){if(mH)return Jv;mH=1,Object.defineProperty(Jv,"__esModule",{value:!0}),Jv.QuerySourceSparql=void 0;const u=qe(),n=pe(),o=br(),i=_t(),t=pt(),e=sV(),r=ff(),a=_n(),c=st();let s=class Tn{constructor(l,f,h,p,y,_,b,m,g,T,v,S,F,M,O){this.referenceValue=l,this.url=l,this.context=f,this.mediatorHttp=h,this.bindMethod=p,this.dataFactory=y,this.algebraFactory=_,this.bindingsFactory=b,this.endpointFetcher=new e.SparqlEndpointFetcher({method:m?"GET":"POST",fetch:(w,E)=>this.mediatorHttp.mediate({input:w,init:E,context:this.lastSourceContext}),prefixVariableQuestionMark:!0,dataFactory:y}),this.cache=g>0?new r.LRUCache({max:g}):void 0,this.countTimeout=T,this.cardinalityCountQueries=v,this.cardinalityEstimateConstruction=S,this.defaultGraph=F,this.unionDefaultGraph=M??!1,this.datasets=O}async getSelectorShape(){return Tn.SELECTOR_SHAPE}queryBindings(l,f,h){let p;h!=null&&h.joinBindings?p=Tn.addBindingsToOperation(this.algebraFactory,this.bindMethod,l,h.joinBindings):p=Promise.resolve(l);const y=new t.TransformIterator(async()=>{const _=await p,b=c.Util.inScopeVariables(_),m=f.get(u.KeysInitQuery.queryString),g=f.getSafe(u.KeysInitQuery.queryFormat),T=!(h!=null&&h.joinBindings)&&m&&g.language==="sparql"?m:Tn.operationToSelectQuery(this.algebraFactory,_,b),v=Tn.getOperationUndefs(_);return this.queryBindingsRemote(this.url,T,b,f,v)},{autoStart:!1});return this.attachMetadata(y,f,p),y}queryQuads(l,f){this.lastSourceContext=this.context.merge(f);const h=this.endpointFetcher.fetchTriples(this.url,f.get(u.KeysInitQuery.queryString)??Tn.operationToQuery(l));this.lastSourceContext=void 0;const p=(0,t.wrap)(h,{autoStart:!1,maxBufferSize:Number.POSITIVE_INFINITY});return this.attachMetadata(p,f,Promise.resolve(l.input)),p}queryBoolean(l,f){this.lastSourceContext=this.context.merge(f);const h=this.endpointFetcher.fetchAsk(this.url,f.get(u.KeysInitQuery.queryString)??Tn.operationToQuery(l));return this.lastSourceContext=void 0,h}queryVoid(l,f){this.lastSourceContext=this.context.merge(f);const h=this.endpointFetcher.fetchUpdate(this.url,f.get(u.KeysInitQuery.queryString)??Tn.operationToQuery(l));return this.lastSourceContext=void 0,h}attachMetadata(l,f,h){let p=[];new Promise(async(y,_)=>{var b,m;try{const g=await h,T=c.Util.inScopeVariables(g),v=this.operationToNormalizedCountQuery(g),S=Tn.getOperationUndefs(g);p=T.map(E=>({variable:E,canBeUndef:S.some(R=>R.equals(E))}));const F=(b=this.cache)==null?void 0:b.get(v);if(F)return y(F);if(this.cardinalityEstimateConstruction){const E=await this.estimateOperationCardinality(g);if(Number.isFinite(E.value))return(m=this.cache)==null||m.set(v,E),y(E)}if(!this.cardinalityCountQueries)return y({type:"estimate",value:Number.POSITIVE_INFINITY,dataset:this.url});const M=setTimeout(()=>y({type:"estimate",value:Number.POSITIVE_INFINITY,dataset:this.url}),this.countTimeout),O=this.dataFactory.variable("count"),w=await this.queryBindingsRemote(this.url,v,[O],f,[]);w.on("data",E=>{var B;clearTimeout(M);const R=E.get(O),D={type:"estimate",value:Number.POSITIVE_INFINITY,dataset:this.url};if(R){const C=Number.parseInt(R.value,10);Number.isNaN(C)||(D.type="exact",D.value=C,(B=this.cache)==null||B.set(v,D))}return y(D)}),w.on("error",()=>{clearTimeout(M),y({type:"estimate",value:Number.POSITIVE_INFINITY,dataset:this.url})}),w.on("end",()=>{clearTimeout(M),y({type:"estimate",value:Number.POSITIVE_INFINITY,dataset:this.url})})}catch(g){return _(g)}}).then(y=>{l.setProperty("metadata",{state:new o.MetadataValidationState,cardinality:y,variables:p})}).catch(()=>l.setProperty("metadata",{state:new o.MetadataValidationState,cardinality:{type:"estimate",value:Number.POSITIVE_INFINITY,dataset:this.url},variables:p}))}operationToNormalizedCountQuery(l){const f=l.type===c.Algebra.types.PATTERN?this.algebraFactory.createPattern(l.subject.termType==="Variable"?this.dataFactory.variable("s"):l.subject,l.predicate.termType==="Variable"?this.dataFactory.variable("p"):l.predicate,l.object.termType==="Variable"?this.dataFactory.variable("o"):l.object):l;return Tn.operationToCountQuery(this.dataFactory,this.algebraFactory,f)}async estimateOperationCardinality(l){const f={getCardinality:h=>{var _;const p=this.operationToNormalizedCountQuery(h),y=(_=this.cache)==null?void 0:_.get(p);if(y)return y;if(this.datasets){const b=this.datasets.filter(g=>this.unionDefaultGraph||this.defaultGraph&&g.uri.endsWith(this.defaultGraph)).map(g=>(0,i.estimateCardinality)(h,g));return{type:b.some(g=>g.type==="estimate")?"estimate":"exact",value:b.length>0?b.reduce((g,T)=>g+T.value,0):0,dataset:this.url}}},source:this.url,uri:this.url};return(0,i.estimateCardinality)(l,f)}static async addBindingsToOperation(l,f,h,p){const y=await p.bindings.toArray();switch(f){case"values":return l.createJoin([l.createValues(p.metadata.variables.map(_=>_.variable),y.map(_=>Object.fromEntries([..._].map(([b,m])=>[`?${b.value}`,m])))),h],!1);case"union":throw new Error('Not implemented yet: "union" case');case"filter":throw new Error('Not implemented yet: "filter" case')}}static operationToSelectQuery(l,f,h){return Tn.operationToQuery(l.createProject(f,h))}static operationToCountQuery(l,f,h){return Tn.operationToQuery(f.createProject(f.createExtend(f.createGroup(h,[],[f.createBoundAggregate(l.variable("var0"),"count",f.createWildcardExpression(),!1)]),l.variable("count"),f.createTermExpression(l.variable("var0"))),[l.variable("count")]))}static operationToQuery(l){return(0,c.toSparql)(l,{sparqlStar:!0})}static getOperationUndefs(l){const f=[];return c.Util.recurseOperation(l,{leftjoin(h){const p=c.Util.inScopeVariables(h.input[0]),y=c.Util.inScopeVariables(h.input[1]);for(const _ of y)p.some(b=>b.equals(_))||f.push(_);return!1},values(h){for(const p of h.variables)h.bindings.some(y=>!(`?${p.value}`in y))&&f.push(p);return!1},union(h){const p=h.input.map(c.Util.inScopeVariables);for(const y of(0,a.uniqTerms)(p.flat()))p.every(_=>_.some(b=>b.equals(y)))||f.push(y);return!0}}),(0,a.uniqTerms)(f)}async queryBindingsRemote(l,f,h,p,y){const _=new Set;for(const m of y)_.add(m.value);this.lastSourceContext=this.context.merge(p);const b=await this.endpointFetcher.fetchBindings(l,f);return this.lastSourceContext=void 0,(0,t.wrap)(b,{autoStart:!1,maxBufferSize:Number.POSITIVE_INFINITY}).map(m=>this.bindingsFactory.bindings(h.map(g=>{var v;const T=m[`?${g.value}`];return!_.has(g.value)&&!T&&((v=n.Actor.getContextLogger(this.context))==null||v.warn(`The endpoint ${l} failed to provide a binding for ${g.value}.`)),[g,T]}).filter(([g,T])=>!!T)))}toString(){return`QuerySourceSparql(${this.url})`}};return Jv.QuerySourceSparql=s,s.SELECTOR_SHAPE={type:"disjunction",children:[{type:"operation",operation:{operationType:"wildcard"},joinBindings:!0}]},Jv}var TH;function Qde(){if(TH)return Xv;TH=1,Object.defineProperty(Xv,"__esModule",{value:!0}),Xv.ActorQuerySourceIdentifyHypermediaSparql=void 0;const u=CE(),n=qe(),o=pe(),i=Vt(),t=st(),e=vH();let r=class extends u.ActorQuerySourceIdentifyHypermedia{constructor(c){super(c,"sparql")}async testMetadata(c){return!c.forceSourceType&&!this.forceSourceType&&!c.metadata.sparqlService&&!(this.checkUrlSuffix&&(c.url.endsWith("/sparql")||c.url.endsWith("/sparql/")))?(0,o.failTest)(`Actor ${this.name} could not detect a SPARQL service description or URL ending on /sparql.`):(0,o.passTest)({filterFactor:1})}async run(c){var h;this.logInfo(c.context,`Identified ${c.url} as sparql source with service URL: ${c.metadata.sparqlService||c.url}`);const s=c.context.getSafe(n.KeysInitQuery.dataFactory),d=new t.Factory(s),l=((h=c.context.get(n.KeysQueryOperation.querySources))==null?void 0:h.length)===1;return{source:new e.QuerySourceSparql(c.forceSourceType??this.forceSourceType?c.url:c.metadata.sparqlService||c.url,c.context,this.mediatorHttp,this.bindMethod,s,d,await i.BindingsFactory.create(this.mediatorMergeBindingsContext,c.context,s),this.forceHttpGet,this.cacheSize,this.countTimeout,this.cardinalityCountQueries&&!l,this.cardinalityEstimateConstruction,c.metadata.defaultGraph,c.metadata.unionDefaultGraph,c.metadata.datasets)}}};return Xv.ActorQuerySourceIdentifyHypermediaSparql=r,Xv}var wH;function Hde(){return wH||(wH=1,(function(u){var n=Vd&&Vd.__createBinding||(Object.create?(function(i,t,e,r){r===void 0&&(r=e);var a=Object.getOwnPropertyDescriptor(t,e);(!a||("get"in a?!t.__esModule:a.writable||a.configurable))&&(a={enumerable:!0,get:function(){return t[e]}}),Object.defineProperty(i,r,a)}):(function(i,t,e,r){r===void 0&&(r=e),i[r]=t[e]})),o=Vd&&Vd.__exportStar||function(i,t){for(var e in i)e!=="default"&&!Object.prototype.hasOwnProperty.call(t,e)&&n(t,i,e)};Object.defineProperty(u,"__esModule",{value:!0}),o(Qde(),u),o(vH(),u)})(Vd)),Vd}var Qd={},Kv={},Hd={},kv={},Wv={},SH;function OH(){if(SH)return Wv;SH=1,Object.defineProperty(Wv,"__esModule",{value:!0}),Wv.QuerySourceRdfJs=void 0;const u=zv(),n=qe(),o=br(),i=pt(),t=_n(),e=st();let r=class Yr{constructor(c,s,d){this.source=c,this.referenceValue=c,this.dataFactory=s,this.bindingsFactory=d;const l=new e.Factory(this.dataFactory);this.selectorShape={type:"operation",operation:{operationType:"pattern",pattern:l.createPattern(this.dataFactory.variable("s"),this.dataFactory.variable("p"),this.dataFactory.variable("o"))},variablesOptional:[this.dataFactory.variable("s"),this.dataFactory.variable("p"),this.dataFactory.variable("o")]},this.dummyDefaultGraph=this.dataFactory.variable("__comunica:defaultGraph")}static nullifyVariables(c,s){return!c||c.termType==="Variable"||!s&&c.termType==="Quad"&&(0,t.someTermsNested)(c,d=>d.termType==="Variable")?void 0:c}static hasDuplicateVariables(c){const s=(0,t.filterTermsNested)(c,d=>d.termType==="Variable");return s.length>1&&(0,t.uniqTerms)(s).length<s.length}async getSelectorShape(){return this.selectorShape}queryBindings(c,s){var p;if(c.type!=="pattern")throw new Error(`Attempted to pass non-pattern operation '${c.type}' to QuerySourceRdfJs`);const d=!!s.get(n.KeysQueryOperation.unionDefaultGraph);if(c.graph.termType==="DefaultGraph"&&d&&(c.graph=this.dummyDefaultGraph),this.source.matchBindings){const y=this.source.matchBindings(this.bindingsFactory,c.subject,c.predicate,c.object,c.graph);let _=y instanceof i.AsyncIterator?y:(0,i.wrap)(y,{autoStart:!1}),b=!1;if(c.graph.termType==="Variable"&&!d){b=!0;const m=c.graph;_=_.filter(g=>g.get(m).termType!=="DefaultGraph")}if(c.graph.equals(this.dummyDefaultGraph)&&(_=_.map(m=>m.delete(this.dummyDefaultGraph)),c.graph=this.dataFactory.defaultGraph()),!_.getProperty("metadata")){const m=(0,u.getVariables)(c).map(g=>({variable:g,canBeUndef:!1}));this.setMetadata(_,c,s,b,{variables:m}).catch(g=>_.destroy(g))}return _}const l=!!((p=this.source.features)!=null&&p.quotedTripleFiltering),f=this.source.match(Yr.nullifyVariables(c.subject,l),Yr.nullifyVariables(c.predicate,l),Yr.nullifyVariables(c.object,l),Yr.nullifyVariables(c.graph,l));let h=f instanceof i.AsyncIterator?f:(0,i.wrap)(f,{autoStart:!1});return l||(h=(0,u.filterMatchingQuotedQuads)(c,h)),h.getProperty("metadata")||this.setMetadata(h,c,s).catch(y=>h.destroy(y)),c.graph.equals(this.dummyDefaultGraph)&&(c.graph=this.dataFactory.defaultGraph()),(0,u.quadsToBindings)(h,c,this.dataFactory,this.bindingsFactory,!!s.get(n.KeysQueryOperation.unionDefaultGraph))}async setMetadata(c,s,d,l=!1,f={}){var b;const h=!!((b=this.source.features)!=null&&b.quotedTripleFiltering),p=!!d.get(n.KeysQueryOperation.unionDefaultGraph);s.graph.termType==="DefaultGraph"&&p&&(s.graph=this.dummyDefaultGraph);let y;if(this.source.countQuads)y=await this.source.countQuads(Yr.nullifyVariables(s.subject,h),Yr.nullifyVariables(s.predicate,h),Yr.nullifyVariables(s.object,h),Yr.nullifyVariables(s.graph,h));else{let m=0;y=await new Promise((g,T)=>{const v=this.source.match(Yr.nullifyVariables(s.subject,h),Yr.nullifyVariables(s.predicate,h),Yr.nullifyVariables(s.object,h),Yr.nullifyVariables(s.graph,h));v.on("error",T),v.on("end",()=>g(m)),v.on("data",()=>m++)})}const _=!h&&(0,t.someTerms)(s,m=>m.termType==="Quad")||Yr.hasDuplicateVariables(s);c.setProperty("metadata",{state:new o.MetadataValidationState,cardinality:{type:_||l?"estimate":"exact",value:y},requestTime:0,...f})}queryQuads(c,s){throw new Error("queryQuads is not implemented in QuerySourceRdfJs")}queryBoolean(c,s){throw new Error("queryBoolean is not implemented in QuerySourceRdfJs")}queryVoid(c,s){throw new Error("queryVoid is not implemented in QuerySourceRdfJs")}toString(){return`QuerySourceRdfJs(${this.source.constructor.name})`}};return Wv.QuerySourceRdfJs=r,Wv}var AH;function Gde(){if(AH)return kv;AH=1,Object.defineProperty(kv,"__esModule",{value:!0}),kv.ActorQuerySourceIdentifyRdfJs=void 0;const u=zv(),n=qe(),o=pe(),i=Vt(),t=OH();let e=class extends u.ActorQuerySourceIdentify{constructor(a){super(a)}async test(a){const c=a.querySourceUnidentified;return c.type!==void 0&&c.type!=="rdfjs"?(0,o.failTest)(`${this.name} requires a single query source with rdfjs type to be present in the context.`):typeof c.value=="string"||!("match"in c.value)?(0,o.failTest)(`${this.name} received an invalid rdfjs query source.`):(0,o.passTestVoid)()}async run(a){const c=a.context.getSafe(n.KeysInitQuery.dataFactory);return{querySource:{source:new t.QuerySourceRdfJs(a.querySourceUnidentified.value,c,await i.BindingsFactory.create(this.mediatorMergeBindingsContext,a.context,c)),context:a.querySourceUnidentified.context??new o.ActionContext}}}};return kv.ActorQuerySourceIdentifyRdfJs=e,kv}var BE={},EH;function zde(){return EH||(EH=1,Object.defineProperty(BE,"__esModule",{value:!0})),BE}var xH;function $E(){return xH||(xH=1,(function(u){var n=Hd&&Hd.__createBinding||(Object.create?(function(i,t,e,r){r===void 0&&(r=e);var a=Object.getOwnPropertyDescriptor(t,e);(!a||("get"in a?!t.__esModule:a.writable||a.configurable))&&(a={enumerable:!0,get:function(){return t[e]}}),Object.defineProperty(i,r,a)}):(function(i,t,e,r){r===void 0&&(r=e),i[r]=t[e]})),o=Hd&&Hd.__exportStar||function(i,t){for(var e in i)e!=="default"&&!Object.prototype.hasOwnProperty.call(t,e)&&n(t,i,e)};Object.defineProperty(u,"__esModule",{value:!0}),o(Gde(),u),o(zde(),u),o(OH(),u)})(Hd)),Hd}var hw={},Gd={},Yv={},Zv={},zd={},e2={},RH;function FH(){if(RH)return e2;RH=1,Object.defineProperty(e2,"__esModule",{value:!0}),e2.BlankNode=void 0;class u{constructor(o){this.termType="BlankNode",this.value=o}equals(o){return!!o&&o.termType==="BlankNode"&&o.value===this.value}}return e2.BlankNode=u,e2}var t2={},r2={},IH;function PH(){if(IH)return r2;IH=1,Object.defineProperty(r2,"__esModule",{value:!0}),r2.DefaultGraph=void 0;class u{constructor(){this.termType="DefaultGraph",this.value=""}equals(o){return!!o&&o.termType==="DefaultGraph"}}return r2.DefaultGraph=u,u.INSTANCE=new u,r2}var n2={},i2={},DH;function UE(){if(DH)return i2;DH=1,Object.defineProperty(i2,"__esModule",{value:!0}),i2.NamedNode=void 0;class u{constructor(o){this.termType="NamedNode",this.value=o}equals(o){return!!o&&o.termType==="NamedNode"&&o.value===this.value}}return i2.NamedNode=u,i2}var NH;function jH(){if(NH)return n2;NH=1,Object.defineProperty(n2,"__esModule",{value:!0}),n2.Literal=void 0;const u=UE();class n{constructor(i,t){this.termType="Literal",this.value=i,typeof t=="string"?(this.language=t,this.datatype=n.RDF_LANGUAGE_STRING,this.direction=""):t?"termType"in t?(this.language="",this.datatype=t,this.direction=""):(this.language=t.language,this.datatype=t.direction?n.RDF_DIRECTIONAL_LANGUAGE_STRING:n.RDF_LANGUAGE_STRING,this.direction=t.direction||""):(this.language="",this.datatype=n.XSD_STRING,this.direction="")}equals(i){return!!i&&i.termType==="Literal"&&i.value===this.value&&i.language===this.language&&(i.direction===this.direction||!i.direction&&this.direction==="")&&this.datatype.equals(i.datatype)}}return n2.Literal=n,n.RDF_LANGUAGE_STRING=new u.NamedNode("http://www.w3.org/1999/02/22-rdf-syntax-ns#langString"),n.RDF_DIRECTIONAL_LANGUAGE_STRING=new u.NamedNode("http://www.w3.org/1999/02/22-rdf-syntax-ns#dirLangString"),n.XSD_STRING=new u.NamedNode("http://www.w3.org/2001/XMLSchema#string"),n2}var a2={},LH;function MH(){if(LH)return a2;LH=1,Object.defineProperty(a2,"__esModule",{value:!0}),a2.Quad=void 0;class u{constructor(o,i,t,e){this.termType="Quad",this.value="",this.subject=o,this.predicate=i,this.object=t,this.graph=e}equals(o){return!!o&&(o.termType==="Quad"||!o.termType)&&this.subject.equals(o.subject)&&this.predicate.equals(o.predicate)&&this.object.equals(o.object)&&this.graph.equals(o.graph)}}return a2.Quad=u,a2}var u2={},qH;function CH(){if(qH)return u2;qH=1,Object.defineProperty(u2,"__esModule",{value:!0}),u2.Variable=void 0;class u{constructor(o){this.termType="Variable",this.value=o}equals(o){return!!o&&o.termType==="Variable"&&o.value===this.value}}return u2.Variable=u,u2}var BH;function Xde(){if(BH)return t2;BH=1,Object.defineProperty(t2,"__esModule",{value:!0}),t2.DataFactory=void 0;const u=FH(),n=PH(),o=jH(),i=UE(),t=MH(),e=CH();let r=0;class a{constructor(s){this.blankNodeCounter=0,s=s||{},this.blankNodePrefix=s.blankNodePrefix||`df_${r++}_`}namedNode(s){return new i.NamedNode(s)}blankNode(s){return new u.BlankNode(s||`${this.blankNodePrefix}${this.blankNodeCounter++}`)}literal(s,d){return new o.Literal(s,d)}variable(s){return new e.Variable(s)}defaultGraph(){return n.DefaultGraph.INSTANCE}quad(s,d,l,f){return new t.Quad(s,d,l,f||this.defaultGraph())}fromTerm(s){switch(s.termType){case"NamedNode":return this.namedNode(s.value);case"BlankNode":return this.blankNode(s.value);case"Literal":return s.language?this.literal(s.value,s.language):s.datatype.equals(o.Literal.XSD_STRING)?this.literal(s.value):this.literal(s.value,this.fromTerm(s.datatype));case"Variable":return this.variable(s.value);case"DefaultGraph":return this.defaultGraph();case"Quad":return this.quad(this.fromTerm(s.subject),this.fromTerm(s.predicate),this.fromTerm(s.object),this.fromTerm(s.graph))}}fromQuad(s){return this.fromTerm(s)}resetBlankNodeCounter(){this.blankNodeCounter=0}}return t2.DataFactory=a,t2}var $H;function ti(){return $H||($H=1,(function(u){var n=zd&&zd.__createBinding||(Object.create?(function(i,t,e,r){r===void 0&&(r=e);var a=Object.getOwnPropertyDescriptor(t,e);(!a||("get"in a?!t.__esModule:a.writable||a.configurable))&&(a={enumerable:!0,get:function(){return t[e]}}),Object.defineProperty(i,r,a)}):(function(i,t,e,r){r===void 0&&(r=e),i[r]=t[e]})),o=zd&&zd.__exportStar||function(i,t){for(var e in i)e!=="default"&&!Object.prototype.hasOwnProperty.call(t,e)&&n(t,i,e)};Object.defineProperty(u,"__esModule",{value:!0}),o(FH(),u),o(Xde(),u),o(PH(),u),o(jH(),u),o(UE(),u),o(MH(),u),o(CH(),u)})(zd)),zd}var Xd={},Dt={},UH;function Jde(){if(UH)return Dt;UH=1,Object.defineProperty(Dt,"__esModule",{value:!0}),Dt.TRIPLE_TERM_NAMES=Dt.QUAD_TERM_NAMES=void 0,Dt.getTerms=o,Dt.getTermsNested=i,Dt.getNamedTerms=t,Dt.collectNamedTerms=e,Dt.forEachTerms=r,Dt.forEachTermsNested=a,Dt.filterTerms=c,Dt.filterTermsNested=s,Dt.filterQuadTermNames=d,Dt.filterQuadTermNamesNested=l,Dt.mapTerms=f,Dt.mapTermsNested=h,Dt.reduceTerms=p,Dt.reduceTermsNested=y,Dt.everyTerms=_,Dt.everyTermsNested=b,Dt.someTerms=m,Dt.someTermsNested=g,Dt.getValueNestedPath=T,Dt.matchTerm=v,Dt.matchPattern=S,Dt.matchPatternComplete=F,Dt.matchPatternMappings=M;const u=ti(),n=new u.DataFactory;Dt.QUAD_TERM_NAMES=["subject","predicate","object","graph"],Dt.TRIPLE_TERM_NAMES=["subject","predicate","object"];function o(O,w){return w&&O.graph.termType==="DefaultGraph"?[O.subject,O.predicate,O.object]:[O.subject,O.predicate,O.object,O.graph]}function i(O,w){const E=[];for(const R of o(O,w))R.termType==="Quad"?i(R,w).forEach(D=>E.push(D)):E.push(R);return E}function t(O){return[{key:"subject",value:O.subject},{key:"predicate",value:O.predicate},{key:"object",value:O.object},{key:"graph",value:O.graph}]}function e(O,w,E){const R={};return O.forEach(D=>R[D.key]=D.value),w&&(R.subject=R.subject||w("subject"),R.predicate=R.predicate||w("predicate"),R.object=R.object||w("object"),R.graph=R.graph||w("graph")),(E||n).quad(R.subject,R.predicate,R.object,R.graph)}function r(O,w){w(O.subject,"subject"),w(O.predicate,"predicate"),w(O.object,"object"),w(O.graph,"graph")}function a(O,w,E=[]){O.subject.termType==="Quad"?a(O.subject,w,[...E,"subject"]):w(O.subject,[...E,"subject"]),O.predicate.termType==="Quad"?a(O.predicate,w,[...E,"predicate"]):w(O.predicate,[...E,"predicate"]),O.object.termType==="Quad"?a(O.object,w,[...E,"object"]):w(O.object,[...E,"object"]),O.graph.termType==="Quad"?a(O.graph,w,[...E,"graph"]):w(O.graph,[...E,"graph"])}function c(O,w){const E=[];return w(O.subject,"subject")&&E.push(O.subject),w(O.predicate,"predicate")&&E.push(O.predicate),w(O.object,"object")&&E.push(O.object),w(O.graph,"graph")&&E.push(O.graph),E}function s(O,w,E=[]){let R=[];return O.subject.termType==="Quad"?R=[...R,...s(O.subject,w,[...E,"subject"])]:w(O.subject,[...E,"subject"])&&R.push(O.subject),O.predicate.termType==="Quad"?R=[...R,...s(O.predicate,w,[...E,"predicate"])]:w(O.predicate,[...E,"predicate"])&&R.push(O.predicate),O.object.termType==="Quad"?R=[...R,...s(O.object,w,[...E,"object"])]:w(O.object,[...E,"object"])&&R.push(O.object),O.graph.termType==="Quad"?R=[...R,...s(O.graph,w,[...E,"graph"])]:w(O.graph,[...E,"graph"])&&R.push(O.graph),R}function d(O,w){const E=[];return w(O.subject,"subject")&&E.push("subject"),w(O.predicate,"predicate")&&E.push("predicate"),w(O.object,"object")&&E.push("object"),w(O.graph,"graph")&&E.push("graph"),E}function l(O,w,E=[]){let R=[];const D=[...E,"subject"];O.subject.termType==="Quad"?R=[...R,...l(O.subject,w,D)]:w(O.subject,D)&&R.push(D);const B=[...E,"predicate"];O.predicate.termType==="Quad"?R=[...R,...l(O.predicate,w,B)]:w(O.predicate,B)&&R.push(B);const C=[...E,"object"];O.object.termType==="Quad"?R=[...R,...l(O.object,w,C)]:w(O.object,C)&&R.push(C);const $=[...E,"graph"];return O.graph.termType==="Quad"?R=[...R,...l(O.graph,w,$)]:w(O.graph,$)&&R.push($),R}function f(O,w,E){return(E||n).quad(w(O.subject,"subject"),w(O.predicate,"predicate"),w(O.object,"object"),w(O.graph,"graph"))}function h(O,w,E,R=[]){return(E||n).quad(O.subject.termType==="Quad"?h(O.subject,w,E,[...R,"subject"]):w(O.subject,[...R,"subject"]),O.predicate.termType==="Quad"?h(O.predicate,w,E,[...R,"predicate"]):w(O.predicate,[...R,"predicate"]),O.object.termType==="Quad"?h(O.object,w,E,[...R,"object"]):w(O.object,[...R,"object"]),O.graph.termType==="Quad"?h(O.graph,w,E,[...R,"graph"]):w(O.graph,[...R,"graph"]))}function p(O,w,E){let R=E;return R=w(R,O.subject,"subject"),R=w(R,O.predicate,"predicate"),R=w(R,O.object,"object"),w(R,O.graph,"graph")}function y(O,w,E,R=[]){let D=E;return O.subject.termType==="Quad"?D=y(O.subject,w,D,[...R,"subject"]):D=w(D,O.subject,[...R,"subject"]),O.predicate.termType==="Quad"?D=y(O.predicate,w,D,[...R,"predicate"]):D=w(D,O.predicate,[...R,"predicate"]),O.object.termType==="Quad"?D=y(O.object,w,D,[...R,"object"]):D=w(D,O.object,[...R,"object"]),O.graph.termType==="Quad"?D=y(O.graph,w,D,[...R,"graph"]):D=w(D,O.graph,[...R,"graph"]),D}function _(O,w){return w(O.subject,"subject")&&w(O.predicate,"predicate")&&w(O.object,"object")&&w(O.graph,"graph")}function b(O,w,E=[]){return(O.subject.termType==="Quad"?b(O.subject,w,[...E,"subject"]):w(O.subject,[...E,"subject"]))&&(O.predicate.termType==="Quad"?b(O.predicate,w,[...E,"predicate"]):w(O.predicate,[...E,"predicate"]))&&(O.object.termType==="Quad"?b(O.object,w,[...E,"object"]):w(O.object,[...E,"object"]))&&(O.graph.termType==="Quad"?b(O.graph,w,[...E,"graph"]):w(O.graph,[...E,"graph"]))}function m(O,w){return w(O.subject,"subject")||w(O.predicate,"predicate")||w(O.object,"object")||w(O.graph,"graph")}function g(O,w,E=[]){return(O.subject.termType==="Quad"?g(O.subject,w,[...E,"subject"]):w(O.subject,[...E,"subject"]))||(O.predicate.termType==="Quad"?g(O.predicate,w,[...E,"predicate"]):w(O.predicate,[...E,"predicate"]))||(O.object.termType==="Quad"?g(O.object,w,[...E,"object"]):w(O.object,[...E,"object"]))||(O.graph.termType==="Quad"?g(O.graph,w,[...E,"graph"]):w(O.graph,[...E,"graph"]))}function T(O,w){if(w.length===0)return O;if(O.termType==="Quad")return T(O[w[0]],w.slice(1));throw new Error(`Tried to get ${w[0]} from term of type ${O.termType}`)}function v(O,w){return!w||w.termType==="Variable"||w.termType==="Quad"&&O.termType==="Quad"&&F(O,w)||w.equals(O)}function S(O,w,E,R,D){return v(O.subject,w)&&v(O.predicate,E)&&v(O.object,R)&&v(O.graph,D)}function F(O,w){return S(O,w.subject,w.predicate,w.object,w.graph)}function M(O,w,E={}){const R={};function D(B,C){return _(B,($,Z)=>{var ee,ce;const G=C[Z];switch($.termType){case"Variable":return E.skipVarMapping&&G.termType==="Variable"||((ce=(ee=R[$.value])===null||ee===void 0?void 0:ee.equals(G))!==null&&ce!==void 0?ce:(R[$.value]=G,!0));case"Quad":return G.termType==="Quad"&&D($,G);default:return $.equals(G)}})}return D(w,O)&&(E.returnMappings?R:!0)}return Dt}var un={},VE={},Cn={},VH;function Kde(){if(VH)return Cn;VH=1,Object.defineProperty(Cn,"__esModule",{value:!0}),Cn.termToString=o,Cn.getLiteralValue=i,Cn.getLiteralType=t,Cn.getLiteralLanguage=e,Cn.getLiteralDirection=r,Cn.stringToTerm=a,Cn.quadToStringQuad=c,Cn.stringQuadToQuad=s;const u=ti(),n=new u.DataFactory;function o(d){if(d)switch(d.termType){case"NamedNode":return d.value;case"BlankNode":return"_:"+d.value;case"Literal":const l=d;return'"'+l.value+'"'+(l.datatype&&l.datatype.value!=="http://www.w3.org/2001/XMLSchema#string"&&l.datatype.value!=="http://www.w3.org/1999/02/22-rdf-syntax-ns#langString"&&l.datatype.value!=="http://www.w3.org/1999/02/22-rdf-syntax-ns#dirLangString"?"^^"+l.datatype.value:"")+(l.language?"@"+l.language:"")+(l.direction?"--"+l.direction:"");case"Quad":return`<<${o(d.subject)} ${o(d.predicate)} ${o(d.object)}${d.graph.termType==="DefaultGraph"?"":" "+o(d.graph)}>>`;case"Variable":return"?"+d.value;case"DefaultGraph":return d.value}}function i(d){const l=/^"([^]*)"/.exec(d);if(!l)throw new Error(d+" is not a literal");return l[1]}function t(d){const l=/^"[^]*"(?:\^\^([^"]+)|(@)[^@"]+)?$/.exec(d);if(!l)throw new Error(d+" is not a literal");return l[1]||(l[2]?"http://www.w3.org/1999/02/22-rdf-syntax-ns#langString":"http://www.w3.org/2001/XMLSchema#string")}function e(d){const l=/^"[^]*"(?:@([^@"]+)|\^\^[^"]+)?$/.exec(d);if(!l)throw new Error(d+" is not a literal");if(l[1]){let f=l[1].toLowerCase();const h=f.indexOf("--");return h>=0&&(f=f.slice(0,h)),f}return""}function r(d){const l=d.indexOf("--",d.lastIndexOf('"'));if(l>=0){const f=d.slice(l+2,d.length);if(f==="ltr"||f==="rtl")return f;throw new Error(d+" is not a literal with a valid direction")}return""}function a(d,l){if(l=l||n,!d||!d.length)return l.defaultGraph();switch(d[0]){case"_":return l.blankNode(d.substr(2));case"?":if(!l.variable)throw new Error("Missing 'variable()' method on the given DataFactory");return l.variable(d.substr(1));case'"':const f=e(d),h=r(d),p=l.namedNode(t(d));return l.literal(i(d),f?{language:f,direction:h}:p);case"<":default:if(d[0]==="<"&&d.length>4&&d[1]==="<"&&d[d.length-1]===">"&&d[d.length-2]===">"){const y=d.slice(2,-2).trim();let _=[],b=0,m=0,g=!1;for(let T=0;T<y.length;T++){const v=y[T];if(v==="<"&&b++,v===">"){if(b===0)throw new Error("Found closing tag without opening tag in "+d);b--}if(v==='"'){let S=!1,F=T;for(;F-- >0&&y[F]==="\\";)S=!S;S||(g=!g)}if(v===" "&&!g&&b===0){for(_.push(y.slice(m,T));y[T+1]===" ";)T+=1;m=T+1}}if(b!==0)throw new Error("Found opening tag without closing tag in "+d);if(_.push(y.slice(m,y.length)),_.length!==3&&_.length!==4)throw new Error("Nested quad syntax error "+d);return _=_.map(T=>T.startsWith("<")&&!T.includes(" ")?T.slice(1,-1):T),l.quad(a(_[0]),a(_[1]),a(_[2]),_[3]?a(_[3]):void 0)}return l.namedNode(d)}}function c(d){return{subject:o(d.subject),predicate:o(d.predicate),object:o(d.object),graph:o(d.graph)}}function s(d,l){return l=l||n,l.quad(a(d.subject,l),a(d.predicate,l),a(d.object,l),a(d.graph,l))}return Cn}var QH;function o2(){return QH||(QH=1,(function(u){Object.defineProperty(u,"__esModule",{value:!0}),u.termToString=u.stringToTerm=u.stringQuadToQuad=u.quadToStringQuad=u.getLiteralValue=u.getLiteralType=u.getLiteralDirection=u.getLiteralLanguage=void 0;const n=Kde();Object.defineProperty(u,"getLiteralLanguage",{enumerable:!0,get:function(){return n.getLiteralLanguage}}),Object.defineProperty(u,"getLiteralDirection",{enumerable:!0,get:function(){return n.getLiteralDirection}}),Object.defineProperty(u,"getLiteralType",{enumerable:!0,get:function(){return n.getLiteralType}}),Object.defineProperty(u,"getLiteralValue",{enumerable:!0,get:function(){return n.getLiteralValue}}),Object.defineProperty(u,"quadToStringQuad",{enumerable:!0,get:function(){return n.quadToStringQuad}}),Object.defineProperty(u,"stringQuadToQuad",{enumerable:!0,get:function(){return n.stringQuadToQuad}}),Object.defineProperty(u,"stringToTerm",{enumerable:!0,get:function(){return n.stringToTerm}}),Object.defineProperty(u,"termToString",{enumerable:!0,get:function(){return n.termToString}})})(VE)),VE}var HH;function kde(){if(HH)return un;HH=1,Object.defineProperty(un,"__esModule",{value:!0}),un.TERM_TYPES=void 0,un.uniqTerms=n,un.getTermsOfType=o,un.getNamedNodes=i,un.getBlankNodes=t,un.getLiterals=e,un.getVariables=r,un.getDefaultGraphs=a,un.getQuads=c;const u=o2();un.TERM_TYPES=["NamedNode","BlankNode","Literal","Variable","DefaultGraph","Quad"];function n(s){const d={};return s.filter(l=>{const f=(0,u.termToString)(l);return!(f in d)&&(d[f]=!0)})}function o(s,d){return s.filter(l=>l.termType===d)}function i(s){return o(s,"NamedNode")}function t(s){return o(s,"BlankNode")}function e(s){return o(s,"Literal")}function r(s){return o(s,"Variable")}function a(s){return o(s,"DefaultGraph")}function c(s){return o(s,"Quad")}return un}var GH;function pw(){return GH||(GH=1,(function(u){var n=Xd&&Xd.__createBinding||(Object.create?(function(i,t,e,r){r===void 0&&(r=e);var a=Object.getOwnPropertyDescriptor(t,e);(!a||("get"in a?!t.__esModule:a.writable||a.configurable))&&(a={enumerable:!0,get:function(){return t[e]}}),Object.defineProperty(i,r,a)}):(function(i,t,e,r){r===void 0&&(r=e),i[r]=t[e]})),o=Xd&&Xd.__exportStar||function(i,t){for(var e in i)e!=="default"&&!Object.prototype.hasOwnProperty.call(t,e)&&n(t,i,e)};Object.defineProperty(u,"__esModule",{value:!0}),o(Jde(),u),o(kde(),u)})(Xd)),Xd}var s2={},zH;function XH(){if(zH)return s2;zH=1,Object.defineProperty(s2,"__esModule",{value:!0}),s2.TermDictionaryNumberRecordFullTerms=void 0;const u=ti(),n=o2();let o=class{constructor(t=new u.DataFactory){this.lastId=0,this.dictionary={},this.reverseDictionary={},this.features={quotedTriples:!1},this.dataFactory=t}encode(t){const e=(0,n.termToString)(t);let r=this.dictionary[e];return r===void 0&&(r=this.lastId++,this.dictionary[e]=r,this.reverseDictionary[r]=t),r}encodeOptional(t){const e=(0,n.termToString)(t);return this.dictionary[e]}decode(t){const e=this.reverseDictionary[t];if(e===void 0)throw new Error(`The value ${t} is not present in this dictionary`);return e}*encodings(){for(const t of Object.keys(this.reverseDictionary))yield Number.parseInt(t,10)}findQuotedTriples(t){throw new Error("findQuotedTriples is not supported")}findQuotedTriplesEncoded(t){throw new Error("findQuotedTriplesEncoded is not supported")}};return s2.TermDictionaryNumberRecordFullTerms=o,s2}var c2={},d2={},QE={},JH;function ri(){return JH||(JH=1,(function(u){Object.defineProperty(u,"__esModule",{value:!0}),u.QUAD_TERM_NAMES_INVERSE=void 0,u.getBestIndex=o,u.getComponentOrderScore=i,u.orderQuadComponents=t,u.encodeOptionalTerms=e,u.quadToPattern=r,u.quadHasVariables=a,u.arePatternsQuoted=c;const n=pw();u.QUAD_TERM_NAMES_INVERSE=Object.fromEntries(n.QUAD_TERM_NAMES.map((s,d)=>[s,d]));function o(s,d){if(s.length===1||d.every(h=>h!==void 0))return 0;const l=[];for(let h=0;h<n.QUAD_TERM_NAMES.length;h++)d[h]&&l.push(n.QUAD_TERM_NAMES[h]);return s.map((h,p)=>({score:i(h,l),index:p})).sort((h,p)=>p.score-h.score)[0].index}function i(s,d){return s.map((l,f)=>d.includes(l)?s.length-f:0).reduce((l,f)=>l+f,0)}function t(s,d){return s.map(l=>{const f=u.QUAD_TERM_NAMES_INVERSE[l];return d[f]})}function e(s,d){const l=s.map(f=>{if(f){if(f.termType==="Quad"&&a(f))return;const h=d.encodeOptional(f);return h===void 0?"none":h}return f});if(!l.includes("none"))return l}function r(s,d,l,f,h){let p=!1;return[[s||void 0,d||void 0,l||void 0,f||void 0].map(_=>{if(_){if(_.termType==="Variable")return;if(_.termType==="Quad"){if(h)return _;p=!0;return}}return _}),p]}function a(s){for(const d of n.QUAD_TERM_NAMES){const l=s[d];if(l.termType==="Variable"||l.termType==="Quad"&&a(l))return!0}return!1}function c(s){return s.map(d=>(d==null?void 0:d.termType)==="Quad"&&a(d))}})(QE)),QE}var KH;function HE(){if(KH)return d2;KH=1,Object.defineProperty(d2,"__esModule",{value:!0}),d2.RdfStoreIndexNestedMap=void 0;const u=ri();let n=class{constructor(i){this.features={quotedTripleFiltering:!1},this.dictionary=i.dictionary,this.nestedMap=new Map}set(i,t){const e=this.nestedMap;let r=e.get(i[0]);r||(r=new Map,e.set(i[0],r));let a=r.get(i[1]);a||(a=new Map,r.set(i[1],a));let c=a.get(i[2]);c||(c=new Map,a.set(i[2],c));const s=c.has(i[3]);return s||c.set(i[3],t),!s}remove(i){const t=this.nestedMap,e=t.get(i[0]);if(!e)return!1;const r=e.get(i[1]);if(!r)return!1;const a=r.get(i[2]);if(!a)return!1;const c=a.delete(i[3]);return c&&a.size===0&&(r.delete(i[2]),r.size===0&&(e.delete(i[1]),e.size===0&&t.delete(i[0]))),c}get(i){const t=(0,u.encodeOptionalTerms)(i,this.dictionary);if(!(!t||t.includes(void 0)))return this.getEncoded(t)}getEncoded(i){const t=this.nestedMap.get(i[0]);if(!t)return;const e=t.get(i[1]);if(!e)return;const r=e.get(i[2]);if(r)return r.get(i[3])}*find(i){const t=(0,u.encodeOptionalTerms)(i,this.dictionary);if(!t)return;const[e,r,a,c]=t,[s,d,l,f]=i;let h,p,y,_,b,m,g;const T=this.nestedMap,v=e!==void 0?T.has(e)?[e]:[]:T.keys();for(const S of v){b=T.get(S),h=s||this.dictionary.decode(S);const F=r!==void 0?b.has(r)?[r]:[]:b.keys();for(const M of F){m=b.get(M),p=d||this.dictionary.decode(M);const O=a!==void 0?m.has(a)?[a]:[]:m.keys();for(const w of O){g=m.get(w),y=l||this.dictionary.decode(w);const E=c!==void 0?g.has(c)?[c]:[]:g.keys();for(const R of E)_=f||this.dictionary.decode(R),yield[h,p,y,_]}}}}*findEncoded(i,t){const[e,r,a,c]=i;let s,d,l;const f=this.nestedMap,h=e!==void 0?f.has(e)?[e]:[]:f.keys();for(const p of h){s=f.get(p);const y=r!==void 0?s.has(r)?[r]:[]:s.keys();for(const _ of y){d=s.get(_);const b=a!==void 0?d.has(a)?[a]:[]:d.keys();for(const m of b){l=d.get(m);const g=c!==void 0?l.has(c)?[c]:[]:l.keys();for(const T of g)yield[p,_,m,T]}}}}count(i){let t=0;const e=(0,u.encodeOptionalTerms)(i,this.dictionary);if(!e)return 0;const r=e[0],a=e[1],c=e[2],s=e[3];let d,l,f;const h=this.nestedMap,p=r!==void 0?h.has(r)?[r]:[]:h.keys();for(const y of p){d=h.get(y);const _=a!==void 0?d.has(a)?[a]:[]:d.keys();for(const b of _){l=d.get(b);const m=c!==void 0?l.has(c)?[c]:[]:l.keys();for(const g of m)f=l.get(g),s!==void 0?f.has(s)&&t++:t+=f.size}}return t}};return d2.RdfStoreIndexNestedMap=n,d2}var kH;function WH(){if(kH)return c2;kH=1,Object.defineProperty(c2,"__esModule",{value:!0}),c2.TermDictionaryQuotedIndexed=void 0;const u=ti(),n=HE(),o=ri();let i=class Pi{constructor(e,r=new u.DataFactory){this.quotedTriplesDictionary=[],this.features={quotedTriples:!0},this.plainTermDictionary=e;const a={indexCombinations:[],indexConstructor:void 0,dictionary:this,dataFactory:r};this.quotedTriplesReverseDictionaries=[new n.RdfStoreIndexNestedMap(a),new n.RdfStoreIndexNestedMap(a),new n.RdfStoreIndexNestedMap(a)],this.dataFactory=r}encode(e){return e.termType==="Quad"?this.encodeQuotedTriple(e,!1):this.plainTermDictionary.encode(e)}encodeQuotedTriple(e,r){if(e.graph.termType!=="DefaultGraph")throw new Error("Encoding of quoted quads outside of the default graph is not allowed");const a=(0,o.encodeOptionalTerms)([e.subject,e.predicate,e.object,e.graph],this),c=a&&a.every(f=>f!==void 0)?this.quotedTriplesReverseDictionaries[0].getEncoded(a):void 0;if(c!==void 0||r)return c===void 0?void 0:Pi.BITMASK|c;const s=[this.encode(e.subject),this.encode(e.predicate),this.encode(e.object)],d=this.quotedTriplesDictionary.length+1;this.quotedTriplesDictionary.push(s);const l=this.encode(this.dataFactory.defaultGraph());return this.quotedTriplesReverseDictionaries[0].set([s[0],s[1],s[2],l],d),this.quotedTriplesReverseDictionaries[1].set([s[1],s[2],s[0],l],d),this.quotedTriplesReverseDictionaries[2].set([s[2],s[0],s[1],l],d),Pi.BITMASK|d}encodeOptional(e){return e.termType==="Quad"?this.encodeQuotedTriple(e,!0):this.plainTermDictionary.encodeOptional(e)}decode(e){if(Pi.BITMASK&e){const r=(~Pi.BITMASK&e)-1;if(r>=this.quotedTriplesDictionary.length)throw new Error(`The value ${e} is not present in the quoted triples range of the dictionary`);const a=this.quotedTriplesDictionary[r];return this.dataFactory.quad(this.decode(a[0]),this.decode(a[1]),this.decode(a[2]))}return this.plainTermDictionary.decode(e)}*encodings(){for(const e of this.plainTermDictionary.encodings())yield e;for(const e of this.quotedTriplesDictionary.keys())yield Pi.BITMASK|1+e}*findQuotedTriples(e){for(const r of this.findQuotedTriplesEncoded(e))yield this.decode(r)}*findQuotedTriplesEncoded(e){const[r,a]=(0,o.quadToPattern)(e.subject,e.predicate,e.object,e.graph,!0);for(const c of this.patternToIterable(r[0]))for(const s of this.patternToIterable(r[1]))for(const d of this.patternToIterable(r[2]))for(const l of this.patternToIterable(r[3]))if(c&&s||!s&&!d){const f=[c,s,d,l];for(const h of this.quotedTriplesReverseDictionaries[0].findEncoded(f,r))yield Pi.BITMASK|this.quotedTriplesReverseDictionaries[0].getEncoded(h)}else if(!c&&s){const f=[s,d,c,l];for(const h of this.quotedTriplesReverseDictionaries[1].findEncoded(f,r))yield Pi.BITMASK|this.quotedTriplesReverseDictionaries[1].getEncoded(h)}else{const f=[d,c,s,l];for(const h of this.quotedTriplesReverseDictionaries[2].findEncoded(f,r))yield Pi.BITMASK|this.quotedTriplesReverseDictionaries[2].getEncoded(h)}}*patternToIterable(e){if((e==null?void 0:e.termType)==="Quad"){yield*this.findQuotedTriplesEncoded(e);return}if(e===void 0){yield void 0;return}const r=this.encodeOptional(e);r!==void 0&&(yield r)}};return c2.TermDictionaryQuotedIndexed=i,i.BITMASK=1<<31,c2}var l2={},YH;function ZH(){if(YH)return l2;YH=1,Object.defineProperty(l2,"__esModule",{value:!0}),l2.RdfStoreIndexNestedMapQuoted=void 0;const u=ri(),n=HE();let o=class extends n.RdfStoreIndexNestedMap{constructor(t){super(t),this.features={quotedTripleFiltering:!0}}*getQuotedPatternKeys(t,e){for(const r of this.dictionary.findQuotedTriplesEncoded(e))t.has(r)&&(yield r)}*find(t){const e=(0,u.encodeOptionalTerms)(t,this.dictionary);if(!e)return;const[r,a,c,s]=e,[d,l,f,h]=t,[p,y,_,b]=(0,u.arePatternsQuoted)(t);let m,g,T,v,S,F,M;const O=this.nestedMap,w=d!==void 0?p?this.getQuotedPatternKeys(O,d):O.has(r)?[r]:[]:O.keys();for(const E of w){S=O.get(E),m=!p&&d?d:this.dictionary.decode(E);const R=l!==void 0?y?this.getQuotedPatternKeys(S,l):S.has(a)?[a]:[]:S.keys();for(const D of R){F=S.get(D),g=!y&&l?l:this.dictionary.decode(D);const B=f!==void 0?_?this.getQuotedPatternKeys(F,f):F.has(c)?[c]:[]:F.keys();for(const C of B){M=F.get(C),T=!_&&f?f:this.dictionary.decode(C);const $=h!==void 0?b?this.getQuotedPatternKeys(M,h):M.has(s)?[s]:[]:M.keys();for(const Z of $)v=!b&&h?h:this.dictionary.decode(Z),yield[m,g,T,v]}}}}*findEncoded(t,e){const[r,a,c,s]=t,[d,l,f,h]=e,[p,y,_,b]=(0,u.arePatternsQuoted)(e);let m,g,T;const v=this.nestedMap,S=d!==void 0?p?this.getQuotedPatternKeys(v,d):v.has(r)?[r]:[]:v.keys();for(const F of S){m=v.get(F);const M=l!==void 0?y?this.getQuotedPatternKeys(m,l):m.has(a)?[a]:[]:m.keys();for(const O of M){g=m.get(O);const w=f!==void 0?_?this.getQuotedPatternKeys(g,f):g.has(c)?[c]:[]:g.keys();for(const E of w){T=g.get(E);const R=h!==void 0?b?this.getQuotedPatternKeys(T,h):T.has(s)?[s]:[]:T.keys();for(const D of R)yield[Number.parseInt(F,10),Number.parseInt(O,10),Number.parseInt(E,10),Number.parseInt(D,10)]}}}}count(t){let e=0;const r=(0,u.encodeOptionalTerms)(t,this.dictionary);if(!r)return 0;const[a,c,s,d]=r,[l,f,h,p]=t,[y,_,b,m]=(0,u.arePatternsQuoted)(t);let g,T,v;const S=this.nestedMap,F=l!==void 0?y?this.getQuotedPatternKeys(S,l):S.has(a)?[a]:[]:S.keys();for(const M of F){g=S.get(M);const O=f!==void 0?_?this.getQuotedPatternKeys(g,f):g.has(c)?[c]:[]:g.keys();for(const w of O){T=g.get(w);const E=h!==void 0?b?this.getQuotedPatternKeys(T,h):T.has(s)?[s]:[]:T.keys();for(const R of E)v=T.get(R),p!==void 0?m?e+=[...this.getQuotedPatternKeys(v,p)].length:v.has(d)&&e++:e+=v.size}}return e}};return l2.RdfStoreIndexNestedMapQuoted=o,l2}var eG;function tG(){if(eG)return Zv;eG=1,Object.defineProperty(Zv,"__esModule",{value:!0}),Zv.RdfStore=void 0;const u=pt(),n=ti(),o=pw(),i=nG(),t=XH(),e=WH(),r=ZH(),a=ri();let c=class PT{constructor(d){this.features={quotedTripleFiltering:!0},this._size=0,this.options=d,this.dataFactory=d.dataFactory,this.dictionary=d.dictionary,this.indexesWrapped=PT.constructIndexesWrapped(d),this.indexesWrappedComponentOrders=this.indexesWrapped.map(l=>l.componentOrder)}static createDefault(){return new PT({indexCombinations:PT.DEFAULT_INDEX_COMBINATIONS,indexConstructor:d=>new r.RdfStoreIndexNestedMapQuoted(d),dictionary:new e.TermDictionaryQuotedIndexed(new t.TermDictionaryNumberRecordFullTerms),dataFactory:new n.DataFactory})}static constructIndexesWrapped(d){const l=[];if(d.indexCombinations.length===0)throw new Error("At least one index combination is required");for(const f of d.indexCombinations){if(!PT.isCombinationValid(f))throw new Error(`Invalid index combination: ${f}`);l.push({index:d.indexConstructor(d),componentOrder:f,componentOrderInverse:Object.fromEntries(f.map((h,p)=>[h,p]))})}return l}static isCombinationValid(d){for(const l of o.QUAD_TERM_NAMES)if(!d.includes(l))return!1;return d.length===4}get size(){return this._size}addQuad(d){const l=[this.dictionary.encode(d.subject),this.dictionary.encode(d.predicate),this.dictionary.encode(d.object),this.dictionary.encode(d.graph)];let f=!1;for(const h of this.indexesWrapped)f=h.index.set((0,a.orderQuadComponents)(h.componentOrder,l),!0);return f?(this._size++,!0):!1}removeQuad(d){const l=[this.dictionary.encodeOptional(d.subject),this.dictionary.encodeOptional(d.predicate),this.dictionary.encodeOptional(d.object),this.dictionary.encodeOptional(d.graph)];if(l.includes(void 0))return!1;let f=!1;for(const h of this.indexesWrapped)if(f=h.index.remove((0,a.orderQuadComponents)(h.componentOrder,l)),!f)break;return f?(this._size--,!0):!1}remove(d){return d.on("data",l=>this.removeQuad(l)),d}removeMatches(d,l,f,h){return this.remove(this.match(d,l,f,h))}deleteGraph(d){return typeof d=="string"&&(d=this.dataFactory.namedNode(d)),this.removeMatches(void 0,void 0,void 0,d)}import(d){return d.on("data",l=>this.addQuad(l)),d}*readQuads(d,l,f,h){const p=!!this.dictionary.features.quotedTriples&&Object.values(this.indexesWrapped).every(g=>g.index.features.quotedTripleFiltering),[y,_]=(0,a.quadToPattern)(d,l,f,h,p),b=this.indexesWrapped[(0,a.getBestIndex)(this.indexesWrappedComponentOrders,y)],m=(0,a.orderQuadComponents)(b.componentOrder,y);for(const g of b.index.find(m)){const T=this.dataFactory.quad(g[b.componentOrderInverse.subject],g[b.componentOrderInverse.predicate],g[b.componentOrderInverse.object],g[b.componentOrderInverse.graph]);_?(0,o.matchPattern)(T,d,l,f,h)&&(yield T):yield T}}getQuads(d,l,f,h){return[...this.readQuads(d,l,f,h)]}match(d,l,f,h){return(0,u.wrap)(this.readQuads(d,l,f,h))}*readBindings(d,l,f,h,p){const y=!!this.dictionary.features.quotedTriples&&Object.values(this.indexesWrapped).every(O=>O.index.features.quotedTripleFiltering),[_,b]=(0,a.quadToPattern)(l,f,h,p,y),m=this.indexesWrapped[(0,a.getBestIndex)(this.indexesWrappedComponentOrders,_)],g=(0,a.orderQuadComponents)(m.componentOrder,_),T=(0,a.encodeOptionalTerms)(g,this.dictionary);if(!T)return;const v=(0,a.orderQuadComponents)(m.componentOrder,[l,f,h,p]),S=[];for(let O=0;O<v.length;O++)(v[O].termType==="Variable"||v[O].termType==="Quad")&&S.push(O);let F=!1;const M=v.map((O,w)=>{const E=[];for(let R=w+1;R<v.length;R++)O.equals(v[R])&&(E.push(R),F=!0);return E});for(const O of m.index.findEncoded(T,g)){let w=!1,E=!1;const R=[];for(const D of S){if(F){const C=M[D];if(C){for(const $ of C)if(O[D]!==O[$]){w=!0;break}}if(w)break}const B=this.dictionary.decode(O[D]);if(v[D].termType==="Quad"){if(B.termType==="Quad"){const C=(0,o.matchPatternMappings)(B,v[D],{returnMappings:!0});if(C){E=!0;for(const[$,Z]of Object.entries(C)){const ee=this.dataFactory.variable($);if(R.some(ce=>ce[0].equals(ee)&&!ce[1].equals(Z))){w=!0;break}R.push([ee,Z])}continue}}w=!0;break}if(E&&R.some(C=>C[0].equals(v[D])&&!C[1].equals(B))){w=!0;break}R.push([v[D],B])}w||(yield d.bindings(R))}}getBindings(d,l,f,h,p){return[...this.readBindings(d,l,f,h,p)]}matchBindings(d,l,f,h,p){return(0,u.wrap)(this.readBindings(d,l,f,h,p))}countQuads(d,l,f,h){const p=!!this.dictionary.features.quotedTriples&&Object.values(this.indexesWrapped).every(m=>m.index.features.quotedTripleFiltering),[y]=(0,a.quadToPattern)(d,l,f,h,p);if(y.every(m=>m===void 0))return this.size;const _=this.indexesWrapped[(0,a.getBestIndex)(this.indexesWrappedComponentOrders,y)],b=(0,a.orderQuadComponents)(_.componentOrder,y);return _.index.count(b)}asDataset(){return new i.DatasetCoreWrapper(this)}};return Zv.RdfStore=c,c.DEFAULT_INDEX_COMBINATIONS=[["graph","subject","predicate","object"],["graph","predicate","object","subject"],["graph","object","subject","predicate"]],Zv}var rG;function nG(){if(rG)return Yv;rG=1,Object.defineProperty(Yv,"__esModule",{value:!0}),Yv.DatasetCoreWrapper=void 0;const u=tG();let n=class mJ{constructor(i){this.store=i}get size(){return this.store.size}add(i){return this.store.addQuad(i),this}delete(i){return this.store.removeQuad(i),this}has(i){for(const t of this.store.readQuads(i.subject,i.predicate,i.object,i.graph))return!0;return!1}match(i,t,e,r){const a=new u.RdfStore(this.store.options);for(const c of this.store.readQuads(i,t,e,r))a.addQuad(c);return new mJ(a)}[Symbol.iterator](){return this.store.readQuads()}};return Yv.DatasetCoreWrapper=n,Yv}var GE={},iG;function Wde(){return iG||(iG=1,Object.defineProperty(GE,"__esModule",{value:!0})),GE}var f2={},aG;function Yde(){if(aG)return f2;aG=1,Object.defineProperty(f2,"__esModule",{value:!0}),f2.TermDictionaryNumberMap=void 0;const u=ti(),n=o2();let o=class{constructor(t=new u.DataFactory){this.lastId=0,this.dictionary=new Map,this.reverseDictionary=new Map,this.features={quotedTriples:!1},this.dataFactory=t}encode(t){const e=(0,n.termToString)(t);let r=this.dictionary.get(e);return r===void 0&&(r=this.lastId++,this.dictionary.set(e,r),this.reverseDictionary.set(r,e)),r}encodeOptional(t){const e=(0,n.termToString)(t);return this.dictionary.get(e)}decode(t){const e=this.reverseDictionary.get(t);if(e===void 0)throw new Error(`The value ${t} is not present in this dictionary`);return(0,n.stringToTerm)(e,this.dataFactory)}encodings(){return this.reverseDictionary.keys()}findQuotedTriples(t){throw new Error("findQuotedTriples is not supported")}findQuotedTriplesEncoded(t){throw new Error("findQuotedTriplesEncoded is not supported")}};return f2.TermDictionaryNumberMap=o,f2}var h2={},uG;function Zde(){if(uG)return h2;uG=1,Object.defineProperty(h2,"__esModule",{value:!0}),h2.TermDictionaryNumberRecord=void 0;const u=ti(),n=o2();let o=class{constructor(t=new u.DataFactory){this.lastId=0,this.dictionary={},this.reverseDictionary={},this.features={quotedTriples:!1},this.dataFactory=t}encode(t){const e=(0,n.termToString)(t);let r=this.dictionary[e];return r===void 0&&(r=this.lastId++,this.dictionary[e]=r,this.reverseDictionary[r]=e),r}encodeOptional(t){const e=(0,n.termToString)(t);return this.dictionary[e]}decode(t){const e=this.reverseDictionary[t];if(e===void 0)throw new Error(`The value ${t} is not present in this dictionary`);return(0,n.stringToTerm)(e,this.dataFactory)}*encodings(){for(const t of Object.keys(this.reverseDictionary))yield Number.parseInt(t,10)}findQuotedTriples(t){throw new Error("findQuotedTriples is not supported")}findQuotedTriplesEncoded(t){throw new Error("findQuotedTriplesEncoded is not supported")}};return h2.TermDictionaryNumberRecord=o,h2}var p2={},oG;function ele(){if(oG)return p2;oG=1,Object.defineProperty(p2,"__esModule",{value:!0}),p2.TermDictionaryQuoted=void 0;const u=ti(),n=pw();let o=class Ql{constructor(t,e,r=new u.DataFactory){this.features={quotedTriples:!0},this.plainTermDictionary=t,this.quotedTriplesDictionary=e,this.dataFactory=r}encode(t){return t.termType==="Quad"?Ql.BITMASK|1+this.quotedTriplesDictionary.encode(t):this.plainTermDictionary.encode(t)}encodeOptional(t){if(t.termType==="Quad"){const e=this.quotedTriplesDictionary.encodeOptional(t);return e===void 0?e:Ql.BITMASK|1+e}return this.plainTermDictionary.encodeOptional(t)}decode(t){if(Ql.BITMASK&t){const e=(~Ql.BITMASK&t)-1;return this.quotedTriplesDictionary.decode(e)}return this.plainTermDictionary.decode(t)}*encodings(){for(const t of this.plainTermDictionary.encodings())yield t;for(const t of this.quotedTriplesDictionary.encodings())yield Ql.BITMASK|1+t}*findQuotedTriples(t){for(const e of this.findQuotedTriplesEncoded(t))yield this.decode(e)}*findQuotedTriplesEncoded(t){for(let e of this.quotedTriplesDictionary.encodings()){e=Ql.BITMASK|1+e;const r=this.decode(e);(0,n.matchPattern)(r,t.subject,t.predicate,t.object,t.graph)&&(yield e)}}};return p2.TermDictionaryQuoted=o,o.BITMASK=1<<31,p2}var y2={},sG;function tle(){if(sG)return y2;sG=1,Object.defineProperty(y2,"__esModule",{value:!0}),y2.TermDictionaryQuotedReferential=void 0;const u=ti(),n=pw(),o=ri();let i=class Di{constructor(e,r=new u.DataFactory){this.quotedTriplesDictionary=[],this.quotedTriplesReverseDictionary={},this.features={quotedTriples:!0},this.plainTermDictionary=e,this.dataFactory=r}encode(e){return e.termType==="Quad"?this.encodeQuotedTriple(e,!1):this.plainTermDictionary.encode(e)}encodeQuotedTriple(e,r){var l;if(e.graph.termType!=="DefaultGraph")throw new Error("Encoding of quoted quads outside of the default graph is not allowed");const a=(l=(0,o.encodeOptionalTerms)([e.subject,e.predicate,e.object,void 0],this))==null?void 0:l.slice(0,3),c=a&&a.every(f=>f!==void 0)?this.quotedTriplesReverseDictionary[a.join(Di.SEPARATOR)]:void 0;if(c!==void 0||r)return c===void 0?void 0:Di.BITMASK|c;const s=[this.encode(e.subject),this.encode(e.predicate),this.encode(e.object)],d=this.quotedTriplesDictionary.length+1;return this.quotedTriplesDictionary.push(s),this.quotedTriplesReverseDictionary[s.join(Di.SEPARATOR)]=d,Di.BITMASK|d}encodeOptional(e){return e.termType==="Quad"?this.encodeQuotedTriple(e,!0):this.plainTermDictionary.encodeOptional(e)}decode(e){if(Di.BITMASK&e){const r=(~Di.BITMASK&e)-1;if(r>=this.quotedTriplesDictionary.length)throw new Error(`The value ${e} is not present in the quoted triples range of the dictionary`);const a=this.quotedTriplesDictionary[r];return this.dataFactory.quad(this.decode(a[0]),this.decode(a[1]),this.decode(a[2]))}return this.plainTermDictionary.decode(e)}*encodings(){for(const e of this.plainTermDictionary.encodings())yield e;for(const e of this.quotedTriplesDictionary.keys())yield Di.BITMASK|1+e}*findQuotedTriples(e){for(const r of this.findQuotedTriplesEncoded(e))yield this.decode(r)}*findQuotedTriplesEncoded(e){for(let r of this.quotedTriplesDictionary.keys()){r=Di.BITMASK|1+r;const a=this.decode(r);(0,n.matchPattern)(a,e.subject,e.predicate,e.object,e.graph)&&(yield r)}}};return y2.TermDictionaryQuotedReferential=i,i.BITMASK=1<<31,i.SEPARATOR="_",y2}var b2={},cG;function rle(){if(cG)return b2;cG=1,Object.defineProperty(b2,"__esModule",{value:!0}),b2.TermDictionarySymbol=void 0;const u=ti(),n=o2();let o=class{constructor(t=new u.DataFactory){this.features={quotedTriples:!1},this.dataFactory=t}encode(t){return Symbol.for(`rdf::${(0,n.termToString)(t)}`)}encodeOptional(t){return this.encode(t)}decode(t){const e=Symbol.keyFor(t);if(e===void 0)throw new Error(`The value ${String(t)} is not present in this dictionary`);return(0,n.stringToTerm)(e.slice(5),this.dataFactory)}encodings(){throw new Error("encodings is not supported")}findQuotedTriples(t){throw new Error("findQuotedTriples is not supported")}findQuotedTriplesEncoded(t){throw new Error("findQuotedTriplesEncoded is not supported")}};return b2.TermDictionarySymbol=o,b2}var zE={},dG;function nle(){return dG||(dG=1,Object.defineProperty(zE,"__esModule",{value:!0})),zE}var _2={},lG;function fG(){if(lG)return _2;lG=1,Object.defineProperty(_2,"__esModule",{value:!0}),_2.RdfStoreIndexNestedMapRecursive=void 0;const u=ri();let n=class{constructor(i){this.features={quotedTripleFiltering:!1},this.dictionary=i.dictionary,this.nestedMap=new Map}set(i,t){let e=this.nestedMap,r=!1;for(const[a,c]of i.entries()){const s=e;let d=s.get(c);d?a===i.length-1&&(r=!0):(d=a===i.length-1?t:new Map,s.set(c,d)),e=d}return!r}remove(i){const t=this.nestedMap,e=t.get(i[0]);if(!e)return!1;const r=e.get(i[1]);if(!r)return!1;const a=r.get(i[2]);if(!a)return!1;const c=a.delete(i[3]);return c&&a.size===0&&(r.delete(i[2]),r.size===0&&(e.delete(i[1]),e.size===0&&t.delete(i[0]))),c}get(i){const t=(0,u.encodeOptionalTerms)(i,this.dictionary);if(!(!t||t.includes(void 0)))return this.getEncoded(t)}getEncoded(i){const t=this.nestedMap.get(i[0]);if(!t)return;const e=t.get(i[1]);if(!e)return;const r=e.get(i[2]);if(r)return r.get(i[3])}*find(i){const t=(0,u.encodeOptionalTerms)(i,this.dictionary);if(t)for(const e of this.findEncoded(t,i))yield[t[0]!==void 0?i[0]:this.dictionary.decode(e[0]),t[1]!==void 0?i[1]:this.dictionary.decode(e[1]),t[2]!==void 0?i[2]:this.dictionary.decode(e[2]),t[3]!==void 0?i[3]:this.dictionary.decode(e[3])]}*findEncoded(i,t){return yield*this.findEncodedInner(0,i,t,this.nestedMap,[])}*findEncodedInner(i,t,e,r,a){if(i===t.length)yield[...a];else{const c=t[i];if(e[i]){const d=c;if(d!==void 0){const l=r.get(d);l&&(a[i]=c,yield*this.findEncodedInner(i+1,t,e,l,a))}}else for(const[d,l]of r.entries())a[i]=d,yield*this.findEncodedInner(i+1,t,e,l,a)}}count(i){return this.countInner(0,i,this.nestedMap)}countInner(i,t,e){const r=t[i];let a=0;if(r){const c=this.dictionary.encodeOptional(r);if(c!==void 0){if(i===t.length-1)return e.has(c)?1:0;const s=e.get(c);s&&(a+=this.countInner(i+1,t,s))}}else{if(i===t.length-1)return e.size;for(const c of e.values())a+=this.countInner(i+1,t,c)}return a}};return _2.RdfStoreIndexNestedMapRecursive=n,_2}var g2={},hG;function ile(){if(hG)return g2;hG=1,Object.defineProperty(g2,"__esModule",{value:!0}),g2.RdfStoreIndexNestedMapRecursiveQuoted=void 0;const u=ri(),n=fG();let o=class extends n.RdfStoreIndexNestedMapRecursive{constructor(t){super(t),this.features={quotedTripleFiltering:!0}}*findEncoded(t,e){return yield*this.findEncodedInnerQuoted(0,t,e,(0,u.arePatternsQuoted)(e),this.nestedMap,[])}*findEncodedInnerQuoted(t,e,r,a,c,s){if(t===e.length)yield[...s];else{const d=e[t],l=r[t];if(l)if(a[t]){const f=this.dictionary.findQuotedTriplesEncoded(l);for(const h of f){const p=c.get(h);p&&(s[t]=h,yield*this.findEncodedInnerQuoted(t+1,e,r,a,p,s))}}else{const f=d;if(f!==void 0){const h=c.get(f);h&&(s[t]=d,yield*this.findEncodedInnerQuoted(t+1,e,r,a,h,s))}}else for(const[f,h]of c.entries())s[t]=f,yield*this.findEncodedInnerQuoted(t+1,e,r,a,h,s)}}countInner(t,e,r){const a=e[t];let c=0;if(a)if(a.termType==="Quad"&&(0,u.quadHasVariables)(a)){const s=this.dictionary.findQuotedTriplesEncoded(a);for(const d of s)if(t===e.length-1)r.has(d)&&c++;else{const l=r.get(d);l&&(c+=this.countInner(t+1,e,l))}}else{const s=this.dictionary.encodeOptional(a);if(s!==void 0){if(t===e.length-1)return r.has(s)?1:0;const d=r.get(s);d&&(c+=this.countInner(t+1,e,d))}}else{if(t===e.length-1)return r.size;for(const s of r.values())c+=this.countInner(t+1,e,s)}return c}};return g2.RdfStoreIndexNestedMapRecursiveQuoted=o,g2}var m2={},pG;function yG(){if(pG)return m2;pG=1,Object.defineProperty(m2,"__esModule",{value:!0}),m2.RdfStoreIndexNestedRecord=void 0;const u=ri();let n=class{constructor(i){this.features={quotedTripleFiltering:!1},this.dictionary=i.dictionary,this.nestedRecords={}}set(i,t){const e=this.nestedRecords,r=e[i[0]]||(e[i[0]]={}),a=r[i[1]]||(r[i[1]]={}),c=a[i[2]]||(a[i[2]]={});return c[i[3]]?!1:(c[i[3]]=t,!0)}remove(i){const t=this.nestedRecords,e=t[i[0]];if(!e)return!1;const r=e[i[1]];if(!r)return!1;const a=r[i[2]];return!a||!a[i[3]]?!1:(delete a[i[3]],Object.keys(a).length===0&&(delete r[i[2]],Object.keys(r).length===0&&(delete e[i[1]],Object.keys(e).length===0&&delete t[i[0]])),!0)}get(i){const t=(0,u.encodeOptionalTerms)(i,this.dictionary);if(!(!t||t.includes(void 0)))return this.getEncoded(t)}getEncoded(i){var t,e,r;return(r=(e=(t=this.nestedRecords[i[0]])==null?void 0:t[i[1]])==null?void 0:e[i[2]])==null?void 0:r[i[3]]}*find(i){const t=(0,u.encodeOptionalTerms)(i,this.dictionary);if(!t)return;const[e,r,a,c]=t,[s,d,l,f]=i;let h,p,y,_,b,m,g;const T=this.nestedRecords,v=e!==void 0?e in T?[e]:[]:Object.keys(T);for(const S of v){b=T[S],h=s||this.dictionary.decode(Number.parseInt(S,10));const F=r!==void 0?r in b?[r]:[]:Object.keys(b);for(const M of F){m=b[M],p=d||this.dictionary.decode(Number.parseInt(M,10));const O=a!==void 0?a in m?[a]:[]:Object.keys(m);for(const w of O){g=m[w],y=l||this.dictionary.decode(Number.parseInt(w,10));const E=c!==void 0?c in g?[c]:[]:Object.keys(g);for(const R of E)_=f||this.dictionary.decode(Number.parseInt(R,10)),yield[h,p,y,_]}}}}*findEncoded(i,t){const[e,r,a,c]=i;let s,d,l;const f=this.nestedRecords,h=e!==void 0?e in f?[e]:[]:Object.keys(f);for(const p of h){s=f[p];const y=r!==void 0?r in s?[r]:[]:Object.keys(s);for(const _ of y){d=s[_];const b=a!==void 0?a in d?[a]:[]:Object.keys(d);for(const m of b){l=d[m];const g=c!==void 0?c in l?[c]:[]:Object.keys(l);for(const T of g)yield[Number.parseInt(p,10),Number.parseInt(_,10),Number.parseInt(m,10),Number.parseInt(T,10)]}}}}count(i){let t=0;const e=(0,u.encodeOptionalTerms)(i,this.dictionary);if(!e)return 0;const r=e[0],a=e[1],c=e[2],s=e[3];let d,l,f;const h=this.nestedRecords,p=r!==void 0?r in h?[r]:[]:Object.keys(h);for(const y of p){d=h[y];const _=a!==void 0?a in d?[a]:[]:Object.keys(d);for(const b of _){l=d[b];const m=c!==void 0?c in l?[c]:[]:Object.keys(l);for(const g of m)f=l[g],s!==void 0?s in f&&t++:t+=Object.keys(f).length}}return t}};return m2.RdfStoreIndexNestedRecord=n,m2}var v2={},bG;function ale(){if(bG)return v2;bG=1,Object.defineProperty(v2,"__esModule",{value:!0}),v2.RdfStoreIndexNestedRecordQuoted=void 0;const u=ri(),n=yG();let o=class extends n.RdfStoreIndexNestedRecord{constructor(t){super(t),this.features={quotedTripleFiltering:!0}}*getQuotedPatternKeys(t,e){for(const r of this.dictionary.findQuotedTriplesEncoded(e))r in t&&(yield r)}*find(t){const e=(0,u.encodeOptionalTerms)(t,this.dictionary);if(!e)return;const[r,a,c,s]=e,[d,l,f,h]=t,[p,y,_,b]=(0,u.arePatternsQuoted)(t);let m,g,T,v,S,F,M;const O=this.nestedRecords,w=d!==void 0?p?this.getQuotedPatternKeys(O,d):r in O?[r]:[]:Object.keys(O);for(const E of w){S=O[E],m=!p&&d?d:this.dictionary.decode(Number.parseInt(E,10));const R=l!==void 0?y?this.getQuotedPatternKeys(S,l):a in S?[a]:[]:Object.keys(S);for(const D of R){F=S[D],g=!y&&l?l:this.dictionary.decode(Number.parseInt(D,10));const B=f!==void 0?_?this.getQuotedPatternKeys(F,f):c in F?[c]:[]:Object.keys(F);for(const C of B){M=F[C],T=!_&&f?f:this.dictionary.decode(Number.parseInt(C,10));const $=h!==void 0?b?this.getQuotedPatternKeys(M,h):s in M?[s]:[]:Object.keys(M);for(const Z of $)v=!b&&h?h:this.dictionary.decode(Number.parseInt(Z,10)),yield[m,g,T,v]}}}}*findEncoded(t,e){const[r,a,c,s]=t,[d,l,f,h]=e,[p,y,_,b]=(0,u.arePatternsQuoted)(e);let m,g,T;const v=this.nestedRecords,S=d!==void 0?p?this.getQuotedPatternKeys(v,d):r in v?[r]:[]:Object.keys(v);for(const F of S){m=v[F];const M=l!==void 0?y?this.getQuotedPatternKeys(m,l):a in m?[a]:[]:Object.keys(m);for(const O of M){g=m[O];const w=f!==void 0?_?this.getQuotedPatternKeys(g,f):c in g?[c]:[]:Object.keys(g);for(const E of w){T=g[E];const R=h!==void 0?b?this.getQuotedPatternKeys(T,h):s in T?[s]:[]:Object.keys(T);for(const D of R)yield[Number.parseInt(F,10),Number.parseInt(O,10),Number.parseInt(E,10),Number.parseInt(D,10)]}}}}count(t){let e=0;const r=(0,u.encodeOptionalTerms)(t,this.dictionary);if(!r)return 0;const[a,c,s,d]=r,[l,f,h,p]=t,[y,_,b,m]=(0,u.arePatternsQuoted)(t);let g,T,v;const S=this.nestedRecords,F=l!==void 0?y?this.getQuotedPatternKeys(S,l):a in S?[a]:[]:Object.keys(S);for(const M of F){g=S[M];const O=f!==void 0?_?this.getQuotedPatternKeys(g,f):c in g?[c]:[]:Object.keys(g);for(const w of O){T=g[w];const E=h!==void 0?b?this.getQuotedPatternKeys(T,h):s in T?[s]:[]:Object.keys(T);for(const R of E)v=T[R],p!==void 0?m?e+=[...this.getQuotedPatternKeys(v,p)].length:d in v&&e++:e+=Object.keys(v).length}}return e}};return v2.RdfStoreIndexNestedRecordQuoted=o,v2}var XE={},_G;function ule(){return _G||(_G=1,Object.defineProperty(XE,"__esModule",{value:!0})),XE}var JE={},gG;function ole(){return gG||(gG=1,Object.defineProperty(JE,"__esModule",{value:!0})),JE}var mG;function sle(){return mG||(mG=1,(function(u){var n=Gd&&Gd.__createBinding||(Object.create?(function(i,t,e,r){r===void 0&&(r=e);var a=Object.getOwnPropertyDescriptor(t,e);(!a||("get"in a?!t.__esModule:a.writable||a.configurable))&&(a={enumerable:!0,get:function(){return t[e]}}),Object.defineProperty(i,r,a)}):(function(i,t,e,r){r===void 0&&(r=e),i[r]=t[e]})),o=Gd&&Gd.__exportStar||function(i,t){for(var e in i)e!=="default"&&!Object.prototype.hasOwnProperty.call(t,e)&&n(t,i,e)};Object.defineProperty(u,"__esModule",{value:!0}),o(nG(),u),o(Wde(),u),o(Yde(),u),o(Zde(),u),o(XH(),u),o(ele(),u),o(WH(),u),o(tle(),u),o(rle(),u),o(nle(),u),o(HE(),u),o(ZH(),u),o(fG(),u),o(ile(),u),o(yG(),u),o(ale(),u),o(ule(),u),o(ri(),u),o(ole(),u),o(tG(),u)})(Gd)),Gd}var vG;function TG(){if(vG)return hw;vG=1,Object.defineProperty(hw,"__esModule",{value:!0}),hw.storeStream=n;const u=sle();function n(o){const i=u.RdfStore.createDefault();return new Promise((t,e)=>i.import(o).on("error",e).once("end",()=>t(i)))}return hw}var wG;function cle(){if(wG)return Kv;wG=1,Object.defineProperty(Kv,"__esModule",{value:!0}),Kv.ActorQuerySourceIdentifyHypermediaNone=void 0;const u=$E(),n=CE(),o=qe(),i=pe(),t=Vt(),e=TG();let r=class extends n.ActorQuerySourceIdentifyHypermedia{constructor(c){super(c,"file")}async testMetadata(c){return(0,i.passTest)({filterFactor:0})}async run(c){this.logInfo(c.context,`Identified as file source: ${c.url}`);const s=c.context.getSafe(o.KeysInitQuery.dataFactory),d=new u.QuerySourceRdfJs(await(0,e.storeStream)(c.quads),s,await t.BindingsFactory.create(this.mediatorMergeBindingsContext,c.context,s));return d.toString=()=>`QuerySourceRdfJs(${c.url})`,d.referenceValue=c.url,{source:d}}};return Kv.ActorQuerySourceIdentifyHypermediaNone=r,Kv}var SG;function dle(){return SG||(SG=1,(function(u){var n=Qd&&Qd.__createBinding||(Object.create?(function(i,t,e,r){r===void 0&&(r=e);var a=Object.getOwnPropertyDescriptor(t,e);(!a||("get"in a?!t.__esModule:a.writable||a.configurable))&&(a={enumerable:!0,get:function(){return t[e]}}),Object.defineProperty(i,r,a)}):(function(i,t,e,r){r===void 0&&(r=e),i[r]=t[e]})),o=Qd&&Qd.__exportStar||function(i,t){for(var e in i)e!=="default"&&!Object.prototype.hasOwnProperty.call(t,e)&&n(t,i,e)};Object.defineProperty(u,"__esModule",{value:!0}),o(cle(),u)})(Qd)),Qd}var Jd={},T2={},Kd={},w2={},OG;function lle(){if(OG)return w2;OG=1,Object.defineProperty(w2,"__esModule",{value:!0}),w2.ActorExpressionEvaluatorFactory=void 0;const u=pe();let n=class extends u.Actor{constructor(i){super(i),this.mediatorQueryOperation=i.mediatorQueryOperation,this.mediatorFunctionFactory=i.mediatorFunctionFactory,this.mediatorMergeBindingsContext=i.mediatorMergeBindingsContext}};return w2.ActorExpressionEvaluatorFactory=n,w2}var AG;function fle(){return AG||(AG=1,(function(u){var n=Kd&&Kd.__createBinding||(Object.create?(function(i,t,e,r){r===void 0&&(r=e);var a=Object.getOwnPropertyDescriptor(t,e);(!a||("get"in a?!t.__esModule:a.writable||a.configurable))&&(a={enumerable:!0,get:function(){return t[e]}}),Object.defineProperty(i,r,a)}):(function(i,t,e,r){r===void 0&&(r=e),i[r]=t[e]})),o=Kd&&Kd.__exportStar||function(i,t){for(var e in i)e!=="default"&&!Object.prototype.hasOwnProperty.call(t,e)&&n(t,i,e)};Object.defineProperty(u,"__esModule",{value:!0}),o(lle(),u)})(Kd)),Kd}var S2={},EG;function xG(){if(EG)return S2;EG=1,Object.defineProperty(S2,"__esModule",{value:!0}),S2.AlgebraTransformer=void 0;const u=qe(),n=ge(),o=st();let i=class Bw extends n.TermTransformer{constructor(e,r){super(e.getSafe(u.KeysExpressionEvaluator.superTypeProvider)),this.context=e,this.mediatorFunctionFactory=r}async transformAlgebra(e){const r=o.Algebra.expressionTypes;switch(e.expressionType){case r.TERM:return this.transformTerm(e);case r.OPERATOR:return await this.transformOperator(e);case r.NAMED:return await this.transformNamed(e);case r.EXISTENCE:return Bw.transformExistence(e);case r.AGGREGATE:return Bw.transformAggregate(e);case r.WILDCARD:return Bw.transformWildcard(e)}}static transformWildcard(e){return new n.NamedNode(e.wildcard.value)}async getOperator(e,r){const a=await this.mediatorFunctionFactory.mediate({functionName:e,arguments:r.args,context:this.context}),c=await Promise.all(r.args.map(s=>this.transformAlgebra(s)));if(!a.checkArity(c))throw new n.InvalidArity(c,e);return new n.Operator(e,c,a.apply)}async transformOperator(e){return this.getOperator(e.operator.toLowerCase(),e)}async transformNamed(e){return this.getOperator(e.name.value,e)}static transformAggregate(e){const r=e.aggregator;return new n.Aggregate(r,e)}static transformExistence(e){return new n.Existence(e)}};return S2.AlgebraTransformer=i,S2}var O2={},A2={},RG;function FG(){if(RG)return A2;RG=1,Object.defineProperty(A2,"__esModule",{value:!0}),A2.InternalEvaluator=void 0;const u=qe(),n=Vi(),o=ge(),i=_t(),t=st(),e=xG();let r=class{constructor(c,s,d,l){this.context=c,this.mediatorQueryOperation=d,this.bindingsFactory=l,this.subEvaluators={[n.ExpressionType.Term]:(f,h)=>this.term(f),[n.ExpressionType.Variable]:(f,h)=>this.variable(f,h),[n.ExpressionType.Operator]:(f,h)=>this.evalFunction(f,h),[n.ExpressionType.Existence]:(f,h)=>this.evalExistence(f,h),[n.ExpressionType.Aggregate]:(f,h)=>this.evalAggregate()},this.transformer=new e.AlgebraTransformer(c,s)}async evaluatorExpressionEvaluation(c,s){return this.subEvaluators[c.expressionType].bind(this)(c,s)}term(c){return c}variable(c,s){const d=s.get(o.expressionToVar(this.context.getSafe(u.KeysInitQuery.dataFactory),c));if(!d)throw new o.UnboundVariableError(c.name,s);return this.transformer.transformRDFTermUnsafe(d)}async evalFunction(c,s){return c.apply({args:c.args,mapping:s,exprEval:this})}async evalExistence(c,s){const d=this.context.getSafe(u.KeysInitQuery.dataFactory),l=new t.Factory(d),f=(0,i.materializeOperation)(c.expression.input,s,l,this.bindingsFactory),h=await this.mediatorQueryOperation.mediate({operation:f,context:this.context}),p=(0,i.getSafeBindings)(h);return await new Promise((y,_)=>{p.bindingsStream.on("end",()=>{y(!1)}),p.bindingsStream.on("error",_),p.bindingsStream.on("data",()=>{p.bindingsStream.close(),y(!0)})}).then(y=>c.expression.not?!y:y).then(y=>new o.BooleanLiteral(y))}evalAggregate(){throw new o.NoAggregator}};return A2.InternalEvaluator=r,A2}var IG;function hle(){if(IG)return O2;IG=1,Object.defineProperty(O2,"__esModule",{value:!0}),O2.ExpressionEvaluator=void 0;const u=qe(),n=FG();let o=class{constructor(t,e,r,a,c){this.context=t,this.expr=e,this.mediatorFunctionFactory=r,this.mediatorQueryOperation=a,this.bindingsFactory=c,this.internalEvaluator=new n.InternalEvaluator(t,r,a,c)}async evaluate(t){return(await this.internalEvaluator.evaluatorExpressionEvaluation(this.expr,t)).toRDF(this.context.getSafe(u.KeysInitQuery.dataFactory))}async evaluateAsEBV(t){return(await this.internalEvaluator.evaluatorExpressionEvaluation(this.expr,t)).coerceEBV()}evaluateAsEvaluatorExpression(t){return this.evaluatorExpressionEvaluation(this.expr,t)}evaluatorExpressionEvaluation(t,e){return this.internalEvaluator.evaluatorExpressionEvaluation(t,e)}};return O2.ExpressionEvaluator=o,O2}var PG;function ple(){if(PG)return T2;PG=1,Object.defineProperty(T2,"__esModule",{value:!0}),T2.ActorExpressionEvaluatorFactoryDefault=void 0;const u=fle(),n=qe(),o=pe(),i=Vt(),t=ge(),e=xG(),r=hle();let a=class extends u.ActorExpressionEvaluatorFactory{constructor(s){super(s)}async test(s){return(0,o.passTestVoid)()}async run(s){const d=(0,t.prepareEvaluatorActionContext)(s.context);return new r.ExpressionEvaluator(d,await new e.AlgebraTransformer(d,this.mediatorFunctionFactory).transformAlgebra(s.algExpr),this.mediatorFunctionFactory,this.mediatorQueryOperation,await i.BindingsFactory.create(this.mediatorMergeBindingsContext,s.context,s.context.getSafe(n.KeysInitQuery.dataFactory)))}};return T2.ActorExpressionEvaluatorFactoryDefault=a,T2}var DG;function yle(){return DG||(DG=1,(function(u){var n=Jd&&Jd.__createBinding||(Object.create?(function(i,t,e,r){r===void 0&&(r=e);var a=Object.getOwnPropertyDescriptor(t,e);(!a||("get"in a?!t.__esModule:a.writable||a.configurable))&&(a={enumerable:!0,get:function(){return t[e]}}),Object.defineProperty(i,r,a)}):(function(i,t,e,r){r===void 0&&(r=e),i[r]=t[e]})),o=Jd&&Jd.__exportStar||function(i,t){for(var e in i)e!=="default"&&!Object.prototype.hasOwnProperty.call(t,e)&&n(t,i,e)};Object.defineProperty(u,"__esModule",{value:!0}),o(ple(),u)})(Jd)),Jd}var kd={},E2={},x2={},NG;function ble(){if(NG)return x2;NG=1,Object.defineProperty(x2,"__esModule",{value:!0}),x2.GroupsState=void 0;const u=qe(),n=Vt();let o=class{constructor(t,e,r,a,c){this.pattern=t,this.mediatorBindingsAggregatorFactory=e,this.context=r,this.bindingsFactory=a,this.variables=c,this.groups=new Map,this.groupsInitializer=new Map,this.groupVariables=new Set(this.pattern.variables.map(s=>s.value)),this.waitCounter=1,this.resultHasBeenCalled=!1}consumeBindings(t){const e=this.resultCheck();if(e)return e;this.waitCounter++;const r=t.filter((d,l)=>this.groupVariables.has(l.value)),a=this.hashBindings(r);let c=this.groupsInitializer.get(a),s;if(c){const d=c;s=(async()=>{const l=await d;await Promise.all(this.pattern.aggregates.map(async f=>{const h=f.variable.value;await l.aggregators[h].putBindings(t)}))})().then(async()=>{await this.subtractWaitCounterAndCollect()})}else c=(async()=>{const d={};await Promise.all(this.pattern.aggregates.map(async f=>{const h=f.variable.value;d[h]=await this.mediatorBindingsAggregatorFactory.mediate({expr:f,context:this.context}),await d[h].putBindings(t)}));const l={aggregators:d,bindings:r};return this.groups.set(a,l),await this.subtractWaitCounterAndCollect(),l})(),this.groupsInitializer.set(a,c),s=c;return s}async subtractWaitCounterAndCollect(){--this.waitCounter===0&&await this.handleResultCollection()}async handleResultCollection(){const t=this.context.getSafe(u.KeysInitQuery.dataFactory);let e=await Promise.all([...this.groups].map(async([r,a])=>{const{bindings:c,aggregators:s}=a;let d=c;for(const l in s){const f=await s[l].result();f&&(d=d.set(t.variable(l),f))}return d}));if(e.length===0&&this.groupVariables.size===0){const r=[];await Promise.all(this.pattern.aggregates.map(async a=>{const c=a.variable,d=await(await this.mediatorBindingsAggregatorFactory.mediate({expr:a,context:this.context})).result();d!==void 0&&r.push([c,d])})),e=[this.bindingsFactory.bindings(r)]}this.waitResolver(e)}resultCheck(){if(this.resultHasBeenCalled)return Promise.reject(new Error("Calling any function after calling collectResult is invalid."))}async collectResults(){const t=this.resultCheck();if(t)return t;this.resultHasBeenCalled=!0;const e=new Promise(r=>{this.waitResolver=r});return await this.subtractWaitCounterAndCollect(),e}hashBindings(t){return(0,n.bindingsToCompactString)(t,this.variables)}};return x2.GroupsState=o,x2}var jG;function _le(){if(jG)return E2;jG=1,Object.defineProperty(E2,"__esModule",{value:!0}),E2.ActorQueryOperationGroup=void 0;const u=qt(),n=qe(),o=pe(),i=Vt(),t=_t(),e=pt(),r=ble();let a=class extends u.ActorQueryOperationTypedMediated{constructor(s){super(s,"group"),this.mediatorBindingsAggregatorFactory=s.mediatorBindingsAggregatorFactory}async testOperation(){return(0,o.passTestVoid)()}async runOperation(s,d){const l=d.getSafe(n.KeysInitQuery.dataFactory),f=await i.BindingsFactory.create(this.mediatorMergeBindingsContext,d,l),{input:h,aggregates:p}=s,y=await this.mediatorQueryOperation.mediate({operation:h,context:d}),_=(0,t.getSafeBindings)(y),b=[...s.variables,...p.map(T=>T.variable)].map(T=>({variable:T,canBeUndef:!1})),m=(await _.metadata()).variables.map(T=>T.variable);return{type:"bindings",bindingsStream:new e.TransformIterator(()=>new Promise((T,v)=>{const S=new r.GroupsState(s,this.mediatorBindingsAggregatorFactory,d,f,m);_.bindingsStream.on("end",async()=>{try{const F=new e.ArrayIterator(await S.collectResults(),{autoStart:!1});T(F)}catch(F){v(F)}}),_.bindingsStream.on("error",v),_.bindingsStream.on("data",F=>{S.consumeBindings(F).catch(v)})}),{autoStart:!1}),metadata:async()=>({...await _.metadata(),variables:b})}}};return E2.ActorQueryOperationGroup=a,E2}var LG;function gle(){return LG||(LG=1,(function(u){var n=kd&&kd.__createBinding||(Object.create?(function(i,t,e,r){r===void 0&&(r=e);var a=Object.getOwnPropertyDescriptor(t,e);(!a||("get"in a?!t.__esModule:a.writable||a.configurable))&&(a={enumerable:!0,get:function(){return t[e]}}),Object.defineProperty(i,r,a)}):(function(i,t,e,r){r===void 0&&(r=e),i[r]=t[e]})),o=kd&&kd.__exportStar||function(i,t){for(var e in i)e!=="default"&&!Object.prototype.hasOwnProperty.call(t,e)&&n(t,i,e)};Object.defineProperty(u,"__esModule",{value:!0}),o(_le(),u)})(kd)),kd}var Wd={},R2={},MG;function mle(){if(MG)return R2;MG=1,Object.defineProperty(R2,"__esModule",{value:!0}),R2.ActorQueryOperationNop=void 0;const u=qt(),n=qe(),o=pe(),i=Vt(),t=br(),e=pt();let r=class extends u.ActorQueryOperationTypedMediated{constructor(c){super(c,"nop")}async testOperation(c,s){return(0,o.passTestVoid)()}async runOperation(c,s){const d=s.getSafe(n.KeysInitQuery.dataFactory),l=await i.BindingsFactory.create(this.mediatorMergeBindingsContext,s,d);return{bindingsStream:new e.SingletonIterator(l.bindings()),metadata:()=>Promise.resolve({state:new t.MetadataValidationState,cardinality:{type:"exact",value:1},variables:[]}),type:"bindings"}}};return R2.ActorQueryOperationNop=r,R2}var qG;function vle(){return qG||(qG=1,(function(u){var n=Wd&&Wd.__createBinding||(Object.create?(function(i,t,e,r){r===void 0&&(r=e);var a=Object.getOwnPropertyDescriptor(t,e);(!a||("get"in a?!t.__esModule:a.writable||a.configurable))&&(a={enumerable:!0,get:function(){return t[e]}}),Object.defineProperty(i,r,a)}):(function(i,t,e,r){r===void 0&&(r=e),i[r]=t[e]})),o=Wd&&Wd.__exportStar||function(i,t){for(var e in i)e!=="default"&&!Object.prototype.hasOwnProperty.call(t,e)&&n(t,i,e)};Object.defineProperty(u,"__esModule",{value:!0}),o(mle(),u)})(Wd)),Wd}var Yd={},F2={},CG;function Tle(){if(CG)return F2;CG=1,Object.defineProperty(F2,"__esModule",{value:!0}),F2.ActorQueryOperationService=void 0;const u=qt(),n=qe(),o=pe(),i=Vt(),t=br(),e=_t(),r=pt();let a=class extends u.ActorQueryOperationTypedMediated{constructor(s){super(s,"service")}async testOperation(s,d){return s.name.termType!=="NamedNode"?(0,o.failTest)(`${this.name} can only query services by IRI, while a ${s.name.termType} was given.`):(0,o.passTestVoid)()}async runOperation(s,d){const{querySource:l}=await this.mediatorQuerySourceIdentify.mediate({querySourceUnidentified:{value:s.name.value,type:this.forceSparqlEndpoint?"sparql":void 0},context:d});let f;try{f=(0,e.getSafeBindings)(await this.mediatorQueryOperation.mediate({operation:(0,e.assignOperationSource)(s.input,l),context:d}))}catch(h){if(s.silent){const p=d.getSafe(n.KeysInitQuery.dataFactory),y=await i.BindingsFactory.create(this.mediatorMergeBindingsContext,d,p);f={bindingsStream:new r.SingletonIterator(y.bindings()),type:"bindings",metadata:async()=>({state:new t.MetadataValidationState,cardinality:{type:"exact",value:1},variables:[]})},this.logWarn(d,`An error occurred when executing a SERVICE clause: ${h.message}`)}else throw h}return f}};return F2.ActorQueryOperationService=a,F2}var BG;function wle(){return BG||(BG=1,(function(u){var n=Yd&&Yd.__createBinding||(Object.create?(function(i,t,e,r){r===void 0&&(r=e);var a=Object.getOwnPropertyDescriptor(t,e);(!a||("get"in a?!t.__esModule:a.writable||a.configurable))&&(a={enumerable:!0,get:function(){return t[e]}}),Object.defineProperty(i,r,a)}):(function(i,t,e,r){r===void 0&&(r=e),i[r]=t[e]})),o=Yd&&Yd.__exportStar||function(i,t){for(var e in i)e!=="default"&&!Object.prototype.hasOwnProperty.call(t,e)&&n(t,i,e)};Object.defineProperty(u,"__esModule",{value:!0}),o(Tle(),u)})(Yd)),Yd}var Zd={},I2={},$G;function Sle(){if($G)return I2;$G=1,Object.defineProperty(I2,"__esModule",{value:!0}),I2.ActorQueryOperationValues=void 0;const u=qt(),n=qe(),o=pe(),i=Vt(),t=br(),e=pt();let r=class extends u.ActorQueryOperationTyped{constructor(c){super(c,"values")}async testOperation(c,s){return(0,o.passTestVoid)()}async runOperation(c,s){const d=s.getSafe(n.KeysInitQuery.dataFactory),l=await i.BindingsFactory.create(this.mediatorMergeBindingsContext,s,d);return{type:"bindings",bindingsStream:new e.ArrayIterator(c.bindings.map(p=>l.bindings(Object.entries(p).map(([y,_])=>[d.variable(y.slice(1)),_])))),metadata:()=>Promise.resolve({state:new t.MetadataValidationState,cardinality:{type:"exact",value:c.bindings.length},variables:c.variables.map(p=>({variable:p,canBeUndef:c.bindings.some(y=>!(`?${p.value}`in y))}))})}}};return I2.ActorQueryOperationValues=r,I2}var UG;function Ole(){return UG||(UG=1,(function(u){var n=Zd&&Zd.__createBinding||(Object.create?(function(i,t,e,r){r===void 0&&(r=e);var a=Object.getOwnPropertyDescriptor(t,e);(!a||("get"in a?!t.__esModule:a.writable||a.configurable))&&(a={enumerable:!0,get:function(){return t[e]}}),Object.defineProperty(i,r,a)}):(function(i,t,e,r){r===void 0&&(r=e),i[r]=t[e]})),o=Zd&&Zd.__exportStar||function(i,t){for(var e in i)e!=="default"&&!Object.prototype.hasOwnProperty.call(t,e)&&n(t,i,e)};Object.defineProperty(u,"__esModule",{value:!0}),o(Sle(),u)})(Zd)),Zd}var el={},P2={},VG;function Ale(){if(VG)return P2;VG=1,Object.defineProperty(P2,"__esModule",{value:!0}),P2.ActorQueryOperationPathOneOrMore=void 0;const u=Zi(),n=qe(),o=Vt(),i=_t(),t=pt(),e=st();let r=class extends u.ActorAbstractPath{constructor(c){super(c,e.Algebra.types.ONE_OR_MORE_PATH)}async runOperation(c,s){const d=s.getSafe(n.KeysInitQuery.dataFactory),l=new e.Factory(d),f=await o.BindingsFactory.create(this.mediatorMergeBindingsContext,s,d),h=await this.isPathArbitraryLengthDistinct(l,s,c);if(h.operation)return h.operation;s=h.context;const p=c.predicate;if(c.subject.termType!=="Variable"&&c.object.termType==="Variable"){const m=c.object,g=await this.getObjectsPredicateStarEval(c.subject,p.path,m,c.graph,s,!1,l,f),T=(c.graph.termType==="Variable"?[m,c.graph]:[m]).map(v=>({variable:v,canBeUndef:!1}));return{type:"bindings",bindingsStream:g.bindingsStream,metadata:async()=>({...await g.metadata(),variables:T})}}if(c.subject.termType==="Variable"&&c.object.termType==="Variable"){const m=l.createDistinct(l.createPath(c.subject,c.predicate.path,c.object,c.graph)),g=(0,i.getSafeBindings)(await this.mediatorQueryOperation.mediate({context:s,operation:m})),T=c.subject,v=c.object,S={},F=new t.MultiTransformIterator(g.bindingsStream,{multiTransform:O=>{const w=O.get(T),E=O.get(v),R=c.graph.termType==="Variable"?O.get(c.graph):c.graph;return new t.TransformIterator(async()=>{const D=new t.BufferedIterator;return await this.getSubjectAndObjectBindingsPredicateStar(T,v,w,E,p.path,R,s,S,{},D,{count:0},l,f),D.map(B=>(c.graph.termType==="Variable"&&(B=B.set(c.graph,R)),B))},{autoStart:!1,maxBufferSize:128})},autoStart:!1}),M=(c.graph.termType==="Variable"?[T,v,c.graph]:[T,v]).map(O=>({variable:O,canBeUndef:!1}));return{type:"bindings",bindingsStream:F,metadata:async()=>({...await g.metadata(),variables:M})}}if(c.subject.termType==="Variable"&&c.object.termType!=="Variable")return this.mediatorQueryOperation.mediate({context:s,operation:l.createPath(c.object,l.createOneOrMorePath(l.createInv(p.path)),c.subject,c.graph)});const y=this.generateVariable(d),_=(0,i.getSafeBindings)(await this.mediatorQueryOperation.mediate({context:s,operation:l.createPath(c.subject,p,y,c.graph)}));return{type:"bindings",bindingsStream:_.bindingsStream.map(m=>c.object.equals(m.get(y))?c.graph.termType==="Variable"?f.bindings([[c.graph,m.get(c.graph)]]):f.bindings():null),metadata:async()=>({...await _.metadata(),variables:(c.graph.termType==="Variable"?[c.graph]:[]).map(m=>({variable:m,canBeUndef:!1}))})}}};return P2.ActorQueryOperationPathOneOrMore=r,P2}var QG;function Ele(){return QG||(QG=1,(function(u){var n=el&&el.__createBinding||(Object.create?(function(i,t,e,r){r===void 0&&(r=e);var a=Object.getOwnPropertyDescriptor(t,e);(!a||("get"in a?!t.__esModule:a.writable||a.configurable))&&(a={enumerable:!0,get:function(){return t[e]}}),Object.defineProperty(i,r,a)}):(function(i,t,e,r){r===void 0&&(r=e),i[r]=t[e]})),o=el&&el.__exportStar||function(i,t){for(var e in i)e!=="default"&&!Object.prototype.hasOwnProperty.call(t,e)&&n(t,i,e)};Object.defineProperty(u,"__esModule",{value:!0}),o(Ale(),u)})(el)),el}var tl={},D2={},HG;function xle(){if(HG)return D2;HG=1,Object.defineProperty(D2,"__esModule",{value:!0}),D2.ActorQueryOperationPathZeroOrMore=void 0;const u=Zi(),n=qe(),o=Vt(),i=_t(),t=pt(),e=Yt(),r=st();let a=class extends u.ActorAbstractPath{constructor(s){super(s,r.Algebra.types.ZERO_OR_MORE_PATH)}async runOperation(s,d){const l=d.getSafe(n.KeysInitQuery.dataFactory),f=new r.Factory(l),h=await o.BindingsFactory.create(this.mediatorMergeBindingsContext,d,l),p=await this.isPathArbitraryLengthDistinct(f,d,s);if(p.operation)return p.operation;d=p.context;const y=s.predicate,_=this.getPathSources(y),b=s.subject.termType==="Variable",m=s.object.termType==="Variable";if(s.subject.termType==="Variable"&&s.object.termType==="Variable"){const M=this.generateVariable(l,s),O=this.assignPatternSources(f,f.createPattern(s.subject,M,s.object,s.graph),_),w=(0,i.getSafeBindings)(await this.mediatorQueryOperation.mediate({context:d,operation:O})),E=s.subject,R=s.object,D=new Set,B={},C=new t.MultiTransformIterator(w.bindingsStream,{multiTransform:Z=>{const ee=Z.get(E),ce=Z.get(R),G=s.graph.termType==="Variable"?Z.get(s.graph):s.graph,fe=(0,e.termToString)(ee)+(0,e.termToString)(G),me=(0,e.termToString)(ce)+(0,e.termToString)(G);return new t.TransformIterator(async()=>{if(D.has(fe)&&D.has(me))return new t.EmptyIterator;const ye=new t.BufferedIterator,re={count:0};return D.has(fe)||(D.add(fe),await this.getSubjectAndObjectBindingsPredicateStar(E,R,ee,ee,y.path,G,d,B,{},ye,re,f,h)),D.has(me)||(D.add(me),await this.getSubjectAndObjectBindingsPredicateStar(E,R,ce,ce,y.path,G,d,B,{},ye,re,f,h)),ye.map(xe=>(s.graph.termType==="Variable"&&(xe=xe.set(s.graph,G)),xe))},{autoStart:!1,maxBufferSize:128})},autoStart:!1}),$=(s.graph.termType==="Variable"?[E,s.object,s.graph]:[E,s.object]).map(Z=>({variable:Z,canBeUndef:!1}));return{type:"bindings",bindingsStream:C,metadata:async()=>({...await w.metadata(),variables:$})}}if(!b&&!m){const M=this.generateVariable(l),O=await this.getObjectsPredicateStarEval(s.subject,y.path,M,s.graph,d,!0,f,h);return{type:"bindings",bindingsStream:O.bindingsStream.map(E=>s.object.equals(E.get(M))?s.graph.termType==="Variable"?h.bindings([[s.graph,E.get(s.graph)]]):h.bindings():null),metadata:async()=>({...await O.metadata(),variables:(s.graph.termType==="Variable"?[s.graph]:[]).map(E=>({variable:E,canBeUndef:!1}))})}}const g=b?s.object:s.subject,T=b?s.subject:s.object,v=b?f.createInv(y.path):y.path,S=await this.getObjectsPredicateStarEval(g,v,T,s.graph,d,!0,f,h),F=(s.graph.termType==="Variable"?[T,s.graph]:[T]).map(M=>({variable:M,canBeUndef:!1}));return{type:"bindings",bindingsStream:S.bindingsStream,metadata:async()=>({...await S.metadata(),variables:F})}}};return D2.ActorQueryOperationPathZeroOrMore=a,D2}var GG;function Rle(){return GG||(GG=1,(function(u){var n=tl&&tl.__createBinding||(Object.create?(function(i,t,e,r){r===void 0&&(r=e);var a=Object.getOwnPropertyDescriptor(t,e);(!a||("get"in a?!t.__esModule:a.writable||a.configurable))&&(a={enumerable:!0,get:function(){return t[e]}}),Object.defineProperty(i,r,a)}):(function(i,t,e,r){r===void 0&&(r=e),i[r]=t[e]})),o=tl&&tl.__exportStar||function(i,t){for(var e in i)e!=="default"&&!Object.prototype.hasOwnProperty.call(t,e)&&n(t,i,e)};Object.defineProperty(u,"__esModule",{value:!0}),o(xle(),u)})(tl)),tl}var rl={},N2={},zG;function Fle(){if(zG)return N2;zG=1,Object.defineProperty(N2,"__esModule",{value:!0}),N2.ActorQueryOperationPathZeroOrOne=void 0;const u=Zi(),n=qe(),o=Vt(),i=br(),t=_t(),e=pt(),r=st();let a=class extends u.ActorAbstractPath{constructor(s){super(s,r.Algebra.types.ZERO_OR_ONE_PATH)}async runOperation(s,d){const l=d.getSafe(n.KeysInitQuery.dataFactory),f=new r.Factory(l),h=await o.BindingsFactory.create(this.mediatorMergeBindingsContext,d,l),p=s.predicate,y=this.getPathSources(p),_=[];if(s.subject.termType!=="Variable"&&s.object.termType!=="Variable"&&s.subject.equals(s.object))return{type:"bindings",bindingsStream:new e.SingletonIterator(h.bindings()),metadata:()=>Promise.resolve({state:new i.MetadataValidationState,cardinality:{type:"exact",value:1},variables:[]})};const b=await this.isPathArbitraryLengthDistinct(f,d,s);if(b.operation)return b.operation;d=b.context;const m=(0,t.getSafeBindings)(await this.mediatorQueryOperation.mediate({context:d,operation:f.createPath(s.subject,p.path,s.object,s.graph)}));let g;if(s.subject.termType==="Variable"&&s.object.termType==="Variable"){const v=this.generateVariable(l,s),S=(0,t.getSafeBindings)(await this.mediatorQueryOperation.mediate({context:d,operation:f.createFilter(this.assignPatternSources(f,f.createPattern(s.subject,v,s.object,s.graph),y),f.createOperatorExpression("=",[f.createTermExpression(s.subject),f.createTermExpression(s.object)]))})).bindingsStream.map(F=>F.delete(v));g=new e.UnionIterator([S,m.bindingsStream],{autoStart:!1})}else s.subject.termType==="Variable"&&_.push(h.bindings([[s.subject,s.object]])),s.object.termType==="Variable"&&_.push(h.bindings([[s.object,s.subject]])),g=m.bindingsStream.prepend(_);return{type:"bindings",bindingsStream:g,metadata:async()=>{const v=await m.metadata();return{...v,cardinality:{...v.cardinality,value:v.cardinality.value+1}}}}}};return N2.ActorQueryOperationPathZeroOrOne=a,N2}var XG;function Ile(){return XG||(XG=1,(function(u){var n=rl&&rl.__createBinding||(Object.create?(function(i,t,e,r){r===void 0&&(r=e);var a=Object.getOwnPropertyDescriptor(t,e);(!a||("get"in a?!t.__esModule:a.writable||a.configurable))&&(a={enumerable:!0,get:function(){return t[e]}}),Object.defineProperty(i,r,a)}):(function(i,t,e,r){r===void 0&&(r=e),i[r]=t[e]})),o=rl&&rl.__exportStar||function(i,t){for(var e in i)e!=="default"&&!Object.prototype.hasOwnProperty.call(t,e)&&n(t,i,e)};Object.defineProperty(u,"__esModule",{value:!0}),o(Fle(),u)})(rl)),rl}var nl={},j2={},JG;function Ple(){if(JG)return j2;JG=1,Object.defineProperty(j2,"__esModule",{value:!0}),j2.ActorQueryOperationUpdateDeleteInsert=void 0;const u=TV(),n=qt(),o=qe(),i=Vt(),t=_t(),e=pt();let r=class extends n.ActorQueryOperationTypedMediated{constructor(c){super(c,"deleteinsert"),this.blankNodeCounter=0}async testOperation(c,s){return(0,t.testReadOnly)(s)}async runOperation(c,s){const d=s.getSafe(o.KeysInitQuery.dataFactory),l=await i.BindingsFactory.create(this.mediatorMergeBindingsContext,s,d),f=c.where?(0,t.getSafeBindings)(await this.mediatorQueryOperation.mediate({operation:c.where,context:s})).bindingsStream:new e.ArrayIterator([l.bindings()],{autoStart:!1});let h,p;c.insert&&(h=new u.BindingsToQuadsIterator(d,c.insert.map(u.BindingsToQuadsIterator.localizeQuad.bind(null,d,this.blankNodeCounter)),f.clone()),this.blankNodeCounter++),c.delete&&(p=new u.BindingsToQuadsIterator(d,c.delete.map(u.BindingsToQuadsIterator.localizeQuad.bind(null,d,this.blankNodeCounter)),f.clone()),this.blankNodeCounter++);const{execute:y}=await this.mediatorUpdateQuads.mediate({quadStreamInsert:h,quadStreamDelete:p,context:s});return{type:"void",execute:y}}};return j2.ActorQueryOperationUpdateDeleteInsert=r,j2}var KG;function Dle(){return KG||(KG=1,(function(u){var n=nl&&nl.__createBinding||(Object.create?(function(i,t,e,r){r===void 0&&(r=e);var a=Object.getOwnPropertyDescriptor(t,e);(!a||("get"in a?!t.__esModule:a.writable||a.configurable))&&(a={enumerable:!0,get:function(){return t[e]}}),Object.defineProperty(i,r,a)}):(function(i,t,e,r){r===void 0&&(r=e),i[r]=t[e]})),o=nl&&nl.__exportStar||function(i,t){for(var e in i)e!=="default"&&!Object.prototype.hasOwnProperty.call(t,e)&&n(t,i,e)};Object.defineProperty(u,"__esModule",{value:!0}),o(Ple(),u)})(nl)),nl}var il={},L2={},al={},M2={},kG;function Nle(){if(kG)return M2;kG=1,Object.defineProperty(M2,"__esModule",{value:!0}),M2.ActorQueryProcess=void 0;const u=pe();let n=class extends u.Actor{constructor(i){super(i)}};return M2.ActorQueryProcess=n,M2}var WG;function yw(){return WG||(WG=1,(function(u){var n=al&&al.__createBinding||(Object.create?(function(i,t,e,r){r===void 0&&(r=e);var a=Object.getOwnPropertyDescriptor(t,e);(!a||("get"in a?!t.__esModule:a.writable||a.configurable))&&(a={enumerable:!0,get:function(){return t[e]}}),Object.defineProperty(i,r,a)}):(function(i,t,e,r){r===void 0&&(r=e),i[r]=t[e]})),o=al&&al.__exportStar||function(i,t){for(var e in i)e!=="default"&&!Object.prototype.hasOwnProperty.call(t,e)&&n(t,i,e)};Object.defineProperty(u,"__esModule",{value:!0}),o(Nle(),u)})(al)),al}var YG;function jle(){if(YG)return L2;YG=1,Object.defineProperty(L2,"__esModule",{value:!0}),L2.ActorQueryProcessSequential=void 0;const u=yw(),n=qe(),o=pe(),i=Vt(),t=_t(),e=st();let r=class extends u.ActorQueryProcess{constructor(c){super(c)}async test(c){return c.context.get(n.KeysInitQuery.explain)??c.context.get(new o.ActionContextKey("explain"))?(0,o.failTest)(`${this.name} is not able to explain queries.`):(0,o.passTestVoid)()}async run(c){let{operation:s,context:d}=await this.parse(c.query,c.context);return{operation:s,context:d}=await this.optimize(s,d),{result:await this.evaluate(s,d)}}async parse(c,s){s=(await this.mediatorContextPreprocess.mediate({context:s,initialize:!0})).context;let d;if(typeof c=="string"){s=s.set(n.KeysInitQuery.queryString,c);const l=s.get(n.KeysInitQuery.baseIRI),f=s.get(n.KeysInitQuery.queryFormat),h=await this.mediatorQueryParse.mediate({context:s,query:c,queryFormat:f,baseIRI:l});d=h.operation,h.baseIRI&&(s=s.set(n.KeysInitQuery.baseIRI,h.baseIRI))}else d=c;if(s.has(n.KeysInitQuery.initialBindings)){const l=s.getSafe(n.KeysInitQuery.dataFactory),f=new e.Factory(l),h=await i.BindingsFactory.create(this.mediatorMergeBindingsContext,s,l);d=(0,t.materializeOperation)(d,s.get(n.KeysInitQuery.initialBindings),f,h,{strictTargetVariables:!0}),s=s.delete(n.KeysInitQuery.queryString)}return{operation:d,context:s}}async optimize(c,s){return s=s.set(n.KeysInitQuery.query,c),{operation:c,context:s}=await this.mediatorOptimizeQueryOperation.mediate({context:s,operation:c}),s=s.set(n.KeysInitQuery.query,c),{operation:c,context:s}}async evaluate(c,s){const d=await this.mediatorQueryOperation.mediate({context:s,operation:c});return d.context=s,d}};return L2.ActorQueryProcessSequential=r,L2}var ZG;function Lle(){return ZG||(ZG=1,(function(u){var n=il&&il.__createBinding||(Object.create?(function(i,t,e,r){r===void 0&&(r=e);var a=Object.getOwnPropertyDescriptor(t,e);(!a||("get"in a?!t.__esModule:a.writable||a.configurable))&&(a={enumerable:!0,get:function(){return t[e]}}),Object.defineProperty(i,r,a)}):(function(i,t,e,r){r===void 0&&(r=e),i[r]=t[e]})),o=il&&il.__exportStar||function(i,t){for(var e in i)e!=="default"&&!Object.prototype.hasOwnProperty.call(t,e)&&n(t,i,e)};Object.defineProperty(u,"__esModule",{value:!0}),o(jle(),u)})(il)),il}var ul={},q2={},C2={},B2={},$2={},ez;function Mle(){if(ez)return $2;ez=1,Object.defineProperty($2,"__esModule",{value:!0}),$2.LinkedRdfSourcesAsyncRdfIterator=void 0;const u=qe(),n=br(),o=pt();let i=class extends o.BufferedIterator{constructor(e,r,a,c,s,d,l,f){if(super({autoStart:!1,...f}),this.started=!1,this.currentIterators=[],this.iteratorsPendingCreation=0,this.iteratorsPendingTermination=0,this.accumulatedMetadata=Promise.resolve(void 0),this._reading=!1,this.cacheSize=e,this.operation=r,this.queryBindingsOptions=a,this.context=c,this.firstUrl=s,this.maxIterators=d,this.sourceStateGetter=l,this.maxIterators<=0)throw new Error(`LinkedRdfSourcesAsyncRdfIterator.maxIterators must be larger than zero, but got ${this.maxIterators}`)}kickstart(){this.started||this._fillBufferAsync()}getProperty(e,r){return e==="metadata"&&!this.started&&(this.preflightMetadata||(this.preflightMetadata=new Promise((a,c)=>{this.sourceStateGetter({url:this.firstUrl},{}).then(s=>{const d=s.source.queryBindings(this.operation,this.context);d.getProperty("metadata",l=>{l.state=new n.MetadataValidationState,d.destroy(),this.accumulateMetadata(s.metadata,l).then(f=>{const h={...s.metadata,...l,...f};a(h)}).catch(()=>{a({...s.metadata,state:new n.MetadataValidationState})})})}).catch(c)})),this.preflightMetadata.then(a=>this.setProperty("metadata",a)).catch(a=>this.emit("error",a))),super.getProperty(e,r)}_end(e){for(const r of this.currentIterators)r.destroy();super._end(e)}_read(e,r){if(this.started){for(const a of this.currentIterators){for(;e>0;){const c=a.read();if(c===null)break;e--,this._push(c)}if(e<=0)break}e>=0&&this.canStartNewIterator()?this.sourceStateGetter({url:this.firstUrl},{}).then(a=>{this.startIteratorsForNextUrls(a.handledDatasets,!1),r()}):r()}else this.started=!0,this.sourceStateGetter({url:this.firstUrl},{}).then(a=>{this.startIterator(a),r()}).catch(a=>setTimeout(()=>this.destroy(a)))}canStartNewIterator(){return this.currentIterators.length+this.iteratorsPendingCreation+this.iteratorsPendingTermination<this.maxIterators&&(!this.canStartNewIteratorConsiderReadable()||!this.readable)}canStartNewIteratorConsiderReadable(){return!0}areIteratorsRunning(){return this.currentIterators.length+this.iteratorsPendingCreation+this.iteratorsPendingTermination>0}startIterator(e){try{const r=e.source.queryBindings(this.operation,this.context,this.queryBindingsOptions);this.currentIterators.push(r);let a=!1,c=!1;r._destination=this,r.on("error",s=>this.destroy(s)),r.on("readable",()=>this._fillBuffer()),r.on("end",()=>{this.currentIterators.splice(this.currentIterators.indexOf(r),1),a=!0,c||this.iteratorsPendingTermination++,c&&this.startIteratorsForNextUrls(e.handledDatasets,!0)}),r.getProperty("metadata",s=>{this.accumulatedMetadata=this.accumulatedMetadata.then(d=>(async()=>(d||(d=e.metadata),this.accumulateMetadata(d,s)))().then(l=>{const f={...e.metadata,...s,...l};return f.state=new n.MetadataValidationState,this.updateMetadata(f),this.preflightMetadata&&this.preflightMetadata.then(h=>h.state.invalidate()).catch(()=>{}),this.getSourceLinks(f,e).then(h=>Promise.all(h)).then(async h=>{const p=await this.getLinkQueue();for(const y of h)p.push(y,e.link);c=!0,a&&this.iteratorsPendingTermination--,this.startIteratorsForNextUrls(e.handledDatasets,!0)}).catch(h=>this.destroy(h)),f})).catch(d=>(this.destroy(d),{}))})}catch(r){this.destroy(r)}}updateMetadata(e){const r=this.getProperty("metadata");this.setProperty("metadata",e),r==null||r.state.invalidate()}isRunning(){return!this.done}startIteratorsForNextUrls(e,r){this.getLinkQueue().then(a=>{for(;this.canStartNewIterator()&&this.isRunning();){const c=a.pop();if(c)this.iteratorsPendingCreation++,this.sourceStateGetter(c,e).then(s=>{const d=this.context.get(u.KeysStatistics.dereferencedLinks);d&&d.updateStatistic({url:s.link.url,metadata:{...s.metadata,...s.link.metadata}},s.source),this.iteratorsPendingCreation--,this.startIterator(s)}).catch(s=>this.emit("error",s));else break}r&&this.isCloseable(a,!0)&&this.close()}).catch(a=>this.destroy(a))}isCloseable(e,r){return e.isEmpty()&&!this.areIteratorsRunning()}};return $2.LinkedRdfSourcesAsyncRdfIterator=i,$2}var tz;function qle(){if(tz)return B2;tz=1,Object.defineProperty(B2,"__esModule",{value:!0}),B2.MediatedLinkedRdfSourcesAsyncRdfIterator=void 0;const u=qe(),n=Mle();let o=class extends n.LinkedRdfSourcesAsyncRdfIterator{constructor(t,e,r,a,c,s,d,l,f,h,p,y,_,b){super(t,e,r,a,s,d,l,f?{maxBufferSize:Number.POSITIVE_INFINITY}:void 0),this.wasForcefullyClosed=!1,this.forceSourceType=c,this.mediatorMetadataAccumulate=h,this.mediatorRdfResolveHypermediaLinks=p,this.mediatorRdfResolveHypermediaLinksQueue=y,this.handledUrls={[s]:!0},this.aggregatedStore=f,this.dataFactory=_,this.algebraFactory=b}close(){if(!this.aggregatedStore){super.close();return}this.getLinkQueue().then(t=>{this.isCloseable(t,!1)?(this.aggregatedStore&&setTimeout(()=>this.aggregatedStore.end()),super.close()):this.wasForcefullyClosed=!0}).catch(t=>super.destroy(t))}destroy(t){if(!this.aggregatedStore){super.destroy(t);return}this.getLinkQueue().then(e=>{t??this.isCloseable(e,!1)?(this.aggregatedStore&&setTimeout(()=>this.aggregatedStore.end()),super.destroy(t)):this.wasForcefullyClosed=!0}).catch(e=>super.destroy(e))}isCloseable(t,e){return(e?t.isEmpty():this.wasForcefullyClosed||t.isEmpty())&&!this.areIteratorsRunning()}canStartNewIterator(){return!this.wasForcefullyClosed&&this.aggregatedStore&&this.aggregatedStore.hasRunningIterators()||super.canStartNewIterator()}canStartNewIteratorConsiderReadable(){return!this.aggregatedStore}isRunning(){return this.aggregatedStore&&this.aggregatedStore.hasRunningIterators()||!this.done}getLinkQueue(){return this.linkQueue||(this.linkQueue=this.mediatorRdfResolveHypermediaLinksQueue.mediate({firstUrl:this.firstUrl,context:this.context}).then(t=>t.linkQueue)),this.linkQueue}async getSourceLinks(t,e){try{const{links:r}=await this.mediatorRdfResolveHypermediaLinks.mediate({context:this.context,metadata:t}),a=this.context.get(u.KeysStatistics.discoveredLinks);if(a)for(const c of r)a.updateStatistic({url:c.url,metadata:{...c.metadata}},e.link);return r.filter(c=>this.handledUrls[c.url]?!1:(this.handledUrls[c.url]=!0,!0))}catch{return[]}}startIterator(t){var e;if(this.aggregatedStore&&!this.aggregatedStore.containedSources.has(t.link.url)){(e=this.aggregatedStore)==null||e.containedSources.add(t.link.url);const r=t.source.queryBindings(this.algebraFactory.createPattern(this.dataFactory.variable("s"),this.dataFactory.variable("p"),this.dataFactory.variable("o"),this.dataFactory.variable("g")),this.context.set(u.KeysQueryOperation.unionDefaultGraph,!0)).map(a=>this.dataFactory.quad(a.get("s"),a.get("p"),a.get("o"),a.get("g")));this.aggregatedStore.import(r).on("end",()=>{super.startIterator(t)})}else super.startIterator(t)}async accumulateMetadata(t,e){return(await this.mediatorMetadataAccumulate.mediate({mode:"append",accumulatedMetadata:t,appendingMetadata:e,context:this.context})).metadata}updateMetadata(t){var e;super.updateMetadata(t),(e=this.aggregatedStore)==null||e.setBaseMetadata(t,!0)}};return B2.MediatedLinkedRdfSourcesAsyncRdfIterator=o,B2}var U2={},ol={},V2={},KE={},Bn={},sl={},Q2={},rz;function nz(){if(rz)return Q2;rz=1,Object.defineProperty(Q2,"__esModule",{value:!0}),Q2.BlankNode=void 0;let u=class{constructor(o){this.termType="BlankNode",this.value=o}equals(o){return!!o&&o.termType==="BlankNode"&&o.value===this.value}};return Q2.BlankNode=u,Q2}var H2={},G2={},iz;function az(){if(iz)return G2;iz=1,Object.defineProperty(G2,"__esModule",{value:!0}),G2.DefaultGraph=void 0;let u=class{constructor(){this.termType="DefaultGraph",this.value=""}equals(o){return!!o&&o.termType==="DefaultGraph"}};return G2.DefaultGraph=u,u.INSTANCE=new u,G2}var z2={},X2={},uz;function kE(){if(uz)return X2;uz=1,Object.defineProperty(X2,"__esModule",{value:!0}),X2.NamedNode=void 0;let u=class{constructor(o){this.termType="NamedNode",this.value=o}equals(o){return!!o&&o.termType==="NamedNode"&&o.value===this.value}};return X2.NamedNode=u,X2}var oz;function sz(){if(oz)return z2;oz=1,Object.defineProperty(z2,"__esModule",{value:!0}),z2.Literal=void 0;const u=kE();let n=class DT{constructor(i,t){this.termType="Literal",this.value=i,typeof t=="string"?(this.language=t,this.datatype=DT.RDF_LANGUAGE_STRING,this.direction=""):t?"termType"in t?(this.language="",this.datatype=t,this.direction=""):(this.language=t.language,this.datatype=t.direction?DT.RDF_DIRECTIONAL_LANGUAGE_STRING:DT.RDF_LANGUAGE_STRING,this.direction=t.direction||""):(this.language="",this.datatype=DT.XSD_STRING,this.direction="")}equals(i){return!!i&&i.termType==="Literal"&&i.value===this.value&&i.language===this.language&&(i.direction===this.direction||!i.direction&&this.direction==="")&&this.datatype.equals(i.datatype)}};return z2.Literal=n,n.RDF_LANGUAGE_STRING=new u.NamedNode("http://www.w3.org/1999/02/22-rdf-syntax-ns#langString"),n.RDF_DIRECTIONAL_LANGUAGE_STRING=new u.NamedNode("http://www.w3.org/1999/02/22-rdf-syntax-ns#dirLangString"),n.XSD_STRING=new u.NamedNode("http://www.w3.org/2001/XMLSchema#string"),z2}var J2={},cz;function dz(){if(cz)return J2;cz=1,Object.defineProperty(J2,"__esModule",{value:!0}),J2.Quad=void 0;let u=class{constructor(o,i,t,e){this.termType="Quad",this.value="",this.subject=o,this.predicate=i,this.object=t,this.graph=e}equals(o){return!!o&&(o.termType==="Quad"||!o.termType)&&this.subject.equals(o.subject)&&this.predicate.equals(o.predicate)&&this.object.equals(o.object)&&this.graph.equals(o.graph)}};return J2.Quad=u,J2}var K2={},lz;function fz(){if(lz)return K2;lz=1,Object.defineProperty(K2,"__esModule",{value:!0}),K2.Variable=void 0;let u=class{constructor(o){this.termType="Variable",this.value=o}equals(o){return!!o&&o.termType==="Variable"&&o.value===this.value}};return K2.Variable=u,K2}var hz;function Cle(){if(hz)return H2;hz=1,Object.defineProperty(H2,"__esModule",{value:!0}),H2.DataFactory=void 0;const u=nz(),n=az(),o=sz(),i=kE(),t=dz(),e=fz();let r=0,a=class{constructor(s){this.blankNodeCounter=0,s=s||{},this.blankNodePrefix=s.blankNodePrefix||`df_${r++}_`}namedNode(s){return new i.NamedNode(s)}blankNode(s){return new u.BlankNode(s||`${this.blankNodePrefix}${this.blankNodeCounter++}`)}literal(s,d){return new o.Literal(s,d)}variable(s){return new e.Variable(s)}defaultGraph(){return n.DefaultGraph.INSTANCE}quad(s,d,l,f){return new t.Quad(s,d,l,f||this.defaultGraph())}fromTerm(s){switch(s.termType){case"NamedNode":return this.namedNode(s.value);case"BlankNode":return this.blankNode(s.value);case"Literal":return s.language?this.literal(s.value,s.language):s.datatype.equals(o.Literal.XSD_STRING)?this.literal(s.value):this.literal(s.value,this.fromTerm(s.datatype));case"Variable":return this.variable(s.value);case"DefaultGraph":return this.defaultGraph();case"Quad":return this.quad(this.fromTerm(s.subject),this.fromTerm(s.predicate),this.fromTerm(s.object),this.fromTerm(s.graph))}}fromQuad(s){return this.fromTerm(s)}resetBlankNodeCounter(){this.blankNodeCounter=0}};return H2.DataFactory=a,H2}var pz;function yz(){return pz||(pz=1,(function(u){var n=sl&&sl.__createBinding||(Object.create?(function(i,t,e,r){r===void 0&&(r=e);var a=Object.getOwnPropertyDescriptor(t,e);(!a||("get"in a?!t.__esModule:a.writable||a.configurable))&&(a={enumerable:!0,get:function(){return t[e]}}),Object.defineProperty(i,r,a)}):(function(i,t,e,r){r===void 0&&(r=e),i[r]=t[e]})),o=sl&&sl.__exportStar||function(i,t){for(var e in i)e!=="default"&&!Object.prototype.hasOwnProperty.call(t,e)&&n(t,i,e)};Object.defineProperty(u,"__esModule",{value:!0}),o(nz(),u),o(Cle(),u),o(az(),u),o(sz(),u),o(kE(),u),o(dz(),u),o(fz(),u)})(sl)),sl}var bz;function Ble(){if(bz)return Bn;bz=1,Object.defineProperty(Bn,"__esModule",{value:!0}),Bn.termToString=o,Bn.getLiteralValue=i,Bn.getLiteralType=t,Bn.getLiteralLanguage=e,Bn.getLiteralDirection=r,Bn.stringToTerm=a,Bn.quadToStringQuad=c,Bn.stringQuadToQuad=s;const u=yz(),n=new u.DataFactory;function o(d){if(d)switch(d.termType){case"NamedNode":return d.value;case"BlankNode":return"_:"+d.value;case"Literal":const l=d;return'"'+l.value+'"'+(l.datatype&&l.datatype.value!=="http://www.w3.org/2001/XMLSchema#string"&&l.datatype.value!=="http://www.w3.org/1999/02/22-rdf-syntax-ns#langString"&&l.datatype.value!=="http://www.w3.org/1999/02/22-rdf-syntax-ns#dirLangString"?"^^"+l.datatype.value:"")+(l.language?"@"+l.language:"")+(l.direction?"--"+l.direction:"");case"Quad":return`<<${o(d.subject)} ${o(d.predicate)} ${o(d.object)}${d.graph.termType==="DefaultGraph"?"":" "+o(d.graph)}>>`;case"Variable":return"?"+d.value;case"DefaultGraph":return d.value}}function i(d){const l=/^"([^]*)"/.exec(d);if(!l)throw new Error(d+" is not a literal");return l[1]}function t(d){const l=/^"[^]*"(?:\^\^([^"]+)|(@)[^@"]+)?$/.exec(d);if(!l)throw new Error(d+" is not a literal");return l[1]||(l[2]?"http://www.w3.org/1999/02/22-rdf-syntax-ns#langString":"http://www.w3.org/2001/XMLSchema#string")}function e(d){const l=/^"[^]*"(?:@([^@"]+)|\^\^[^"]+)?$/.exec(d);if(!l)throw new Error(d+" is not a literal");if(l[1]){let f=l[1].toLowerCase();const h=f.indexOf("--");return h>=0&&(f=f.slice(0,h)),f}return""}function r(d){const l=d.indexOf("--",d.lastIndexOf('"'));if(l>=0){const f=d.slice(l+2,d.length);if(f==="ltr"||f==="rtl")return f;throw new Error(d+" is not a literal with a valid direction")}return""}function a(d,l){if(l=l||n,!d||!d.length)return l.defaultGraph();switch(d[0]){case"_":return l.blankNode(d.substr(2));case"?":if(!l.variable)throw new Error("Missing 'variable()' method on the given DataFactory");return l.variable(d.substr(1));case'"':const f=e(d),h=r(d),p=l.namedNode(t(d));return l.literal(i(d),f?{language:f,direction:h}:p);case"<":default:if(d[0]==="<"&&d.length>4&&d[1]==="<"&&d[d.length-1]===">"&&d[d.length-2]===">"){const y=d.slice(2,-2).trim();let _=[],b=0,m=0,g=!1;for(let T=0;T<y.length;T++){const v=y[T];if(v==="<"&&b++,v===">"){if(b===0)throw new Error("Found closing tag without opening tag in "+d);b--}if(v==='"'){let S=!1,F=T;for(;F-- >0&&y[F]==="\\";)S=!S;S||(g=!g)}if(v===" "&&!g&&b===0){for(_.push(y.slice(m,T));y[T+1]===" ";)T+=1;m=T+1}}if(b!==0)throw new Error("Found opening tag without closing tag in "+d);if(_.push(y.slice(m,y.length)),_.length!==3&&_.length!==4)throw new Error("Nested quad syntax error "+d);return _=_.map(T=>T.startsWith("<")&&!T.includes(" ")?T.slice(1,-1):T),l.quad(a(_[0]),a(_[1]),a(_[2]),_[3]?a(_[3]):void 0)}return l.namedNode(d)}}function c(d){return{subject:o(d.subject),predicate:o(d.predicate),object:o(d.object),graph:o(d.graph)}}function s(d,l){return l=l||n,l.quad(a(d.subject,l),a(d.predicate,l),a(d.object,l),a(d.graph,l))}return Bn}var _z;function gz(){return _z||(_z=1,(function(u){Object.defineProperty(u,"__esModule",{value:!0}),u.termToString=u.stringToTerm=u.stringQuadToQuad=u.quadToStringQuad=u.getLiteralValue=u.getLiteralType=u.getLiteralDirection=u.getLiteralLanguage=void 0;const n=Ble();Object.defineProperty(u,"getLiteralLanguage",{enumerable:!0,get:function(){return n.getLiteralLanguage}}),Object.defineProperty(u,"getLiteralDirection",{enumerable:!0,get:function(){return n.getLiteralDirection}}),Object.defineProperty(u,"getLiteralType",{enumerable:!0,get:function(){return n.getLiteralType}}),Object.defineProperty(u,"getLiteralValue",{enumerable:!0,get:function(){return n.getLiteralValue}}),Object.defineProperty(u,"quadToStringQuad",{enumerable:!0,get:function(){return n.quadToStringQuad}}),Object.defineProperty(u,"stringQuadToQuad",{enumerable:!0,get:function(){return n.stringQuadToQuad}}),Object.defineProperty(u,"stringToTerm",{enumerable:!0,get:function(){return n.stringToTerm}}),Object.defineProperty(u,"termToString",{enumerable:!0,get:function(){return n.termToString}})})(KE)),KE}var cl={},Nt={},mz;function $le(){if(mz)return Nt;mz=1,Object.defineProperty(Nt,"__esModule",{value:!0}),Nt.TRIPLE_TERM_NAMES=Nt.QUAD_TERM_NAMES=void 0,Nt.getTerms=o,Nt.getTermsNested=i,Nt.getNamedTerms=t,Nt.collectNamedTerms=e,Nt.forEachTerms=r,Nt.forEachTermsNested=a,Nt.filterTerms=c,Nt.filterTermsNested=s,Nt.filterQuadTermNames=d,Nt.filterQuadTermNamesNested=l,Nt.mapTerms=f,Nt.mapTermsNested=h,Nt.reduceTerms=p,Nt.reduceTermsNested=y,Nt.everyTerms=_,Nt.everyTermsNested=b,Nt.someTerms=m,Nt.someTermsNested=g,Nt.getValueNestedPath=T,Nt.matchTerm=v,Nt.matchPattern=S,Nt.matchPatternComplete=F,Nt.matchPatternMappings=M;const u=yz(),n=new u.DataFactory;Nt.QUAD_TERM_NAMES=["subject","predicate","object","graph"],Nt.TRIPLE_TERM_NAMES=["subject","predicate","object"];function o(O,w){return w&&O.graph.termType==="DefaultGraph"?[O.subject,O.predicate,O.object]:[O.subject,O.predicate,O.object,O.graph]}function i(O,w){const E=[];for(const R of o(O,w))R.termType==="Quad"?i(R,w).forEach(D=>E.push(D)):E.push(R);return E}function t(O){return[{key:"subject",value:O.subject},{key:"predicate",value:O.predicate},{key:"object",value:O.object},{key:"graph",value:O.graph}]}function e(O,w,E){const R={};return O.forEach(D=>R[D.key]=D.value),w&&(R.subject=R.subject||w("subject"),R.predicate=R.predicate||w("predicate"),R.object=R.object||w("object"),R.graph=R.graph||w("graph")),(E||n).quad(R.subject,R.predicate,R.object,R.graph)}function r(O,w){w(O.subject,"subject"),w(O.predicate,"predicate"),w(O.object,"object"),w(O.graph,"graph")}function a(O,w,E=[]){O.subject.termType==="Quad"?a(O.subject,w,[...E,"subject"]):w(O.subject,[...E,"subject"]),O.predicate.termType==="Quad"?a(O.predicate,w,[...E,"predicate"]):w(O.predicate,[...E,"predicate"]),O.object.termType==="Quad"?a(O.object,w,[...E,"object"]):w(O.object,[...E,"object"]),O.graph.termType==="Quad"?a(O.graph,w,[...E,"graph"]):w(O.graph,[...E,"graph"])}function c(O,w){const E=[];return w(O.subject,"subject")&&E.push(O.subject),w(O.predicate,"predicate")&&E.push(O.predicate),w(O.object,"object")&&E.push(O.object),w(O.graph,"graph")&&E.push(O.graph),E}function s(O,w,E=[]){let R=[];return O.subject.termType==="Quad"?R=[...R,...s(O.subject,w,[...E,"subject"])]:w(O.subject,[...E,"subject"])&&R.push(O.subject),O.predicate.termType==="Quad"?R=[...R,...s(O.predicate,w,[...E,"predicate"])]:w(O.predicate,[...E,"predicate"])&&R.push(O.predicate),O.object.termType==="Quad"?R=[...R,...s(O.object,w,[...E,"object"])]:w(O.object,[...E,"object"])&&R.push(O.object),O.graph.termType==="Quad"?R=[...R,...s(O.graph,w,[...E,"graph"])]:w(O.graph,[...E,"graph"])&&R.push(O.graph),R}function d(O,w){const E=[];return w(O.subject,"subject")&&E.push("subject"),w(O.predicate,"predicate")&&E.push("predicate"),w(O.object,"object")&&E.push("object"),w(O.graph,"graph")&&E.push("graph"),E}function l(O,w,E=[]){let R=[];const D=[...E,"subject"];O.subject.termType==="Quad"?R=[...R,...l(O.subject,w,D)]:w(O.subject,D)&&R.push(D);const B=[...E,"predicate"];O.predicate.termType==="Quad"?R=[...R,...l(O.predicate,w,B)]:w(O.predicate,B)&&R.push(B);const C=[...E,"object"];O.object.termType==="Quad"?R=[...R,...l(O.object,w,C)]:w(O.object,C)&&R.push(C);const $=[...E,"graph"];return O.graph.termType==="Quad"?R=[...R,...l(O.graph,w,$)]:w(O.graph,$)&&R.push($),R}function f(O,w,E){return(E||n).quad(w(O.subject,"subject"),w(O.predicate,"predicate"),w(O.object,"object"),w(O.graph,"graph"))}function h(O,w,E,R=[]){return(E||n).quad(O.subject.termType==="Quad"?h(O.subject,w,E,[...R,"subject"]):w(O.subject,[...R,"subject"]),O.predicate.termType==="Quad"?h(O.predicate,w,E,[...R,"predicate"]):w(O.predicate,[...R,"predicate"]),O.object.termType==="Quad"?h(O.object,w,E,[...R,"object"]):w(O.object,[...R,"object"]),O.graph.termType==="Quad"?h(O.graph,w,E,[...R,"graph"]):w(O.graph,[...R,"graph"]))}function p(O,w,E){let R=E;return R=w(R,O.subject,"subject"),R=w(R,O.predicate,"predicate"),R=w(R,O.object,"object"),w(R,O.graph,"graph")}function y(O,w,E,R=[]){let D=E;return O.subject.termType==="Quad"?D=y(O.subject,w,D,[...R,"subject"]):D=w(D,O.subject,[...R,"subject"]),O.predicate.termType==="Quad"?D=y(O.predicate,w,D,[...R,"predicate"]):D=w(D,O.predicate,[...R,"predicate"]),O.object.termType==="Quad"?D=y(O.object,w,D,[...R,"object"]):D=w(D,O.object,[...R,"object"]),O.graph.termType==="Quad"?D=y(O.graph,w,D,[...R,"graph"]):D=w(D,O.graph,[...R,"graph"]),D}function _(O,w){return w(O.subject,"subject")&&w(O.predicate,"predicate")&&w(O.object,"object")&&w(O.graph,"graph")}function b(O,w,E=[]){return(O.subject.termType==="Quad"?b(O.subject,w,[...E,"subject"]):w(O.subject,[...E,"subject"]))&&(O.predicate.termType==="Quad"?b(O.predicate,w,[...E,"predicate"]):w(O.predicate,[...E,"predicate"]))&&(O.object.termType==="Quad"?b(O.object,w,[...E,"object"]):w(O.object,[...E,"object"]))&&(O.graph.termType==="Quad"?b(O.graph,w,[...E,"graph"]):w(O.graph,[...E,"graph"]))}function m(O,w){return w(O.subject,"subject")||w(O.predicate,"predicate")||w(O.object,"object")||w(O.graph,"graph")}function g(O,w,E=[]){return(O.subject.termType==="Quad"?g(O.subject,w,[...E,"subject"]):w(O.subject,[...E,"subject"]))||(O.predicate.termType==="Quad"?g(O.predicate,w,[...E,"predicate"]):w(O.predicate,[...E,"predicate"]))||(O.object.termType==="Quad"?g(O.object,w,[...E,"object"]):w(O.object,[...E,"object"]))||(O.graph.termType==="Quad"?g(O.graph,w,[...E,"graph"]):w(O.graph,[...E,"graph"]))}function T(O,w){if(w.length===0)return O;if(O.termType==="Quad")return T(O[w[0]],w.slice(1));throw new Error(`Tried to get ${w[0]} from term of type ${O.termType}`)}function v(O,w){return!w||w.termType==="Variable"||w.termType==="Quad"&&O.termType==="Quad"&&F(O,w)||w.equals(O)}function S(O,w,E,R,D){return v(O.subject,w)&&v(O.predicate,E)&&v(O.object,R)&&v(O.graph,D)}function F(O,w){return S(O,w.subject,w.predicate,w.object,w.graph)}function M(O,w,E={}){const R={};function D(B,C){return _(B,($,Z)=>{var ee,ce;const G=C[Z];switch($.termType){case"Variable":return E.skipVarMapping&&G.termType==="Variable"||((ce=(ee=R[$.value])===null||ee===void 0?void 0:ee.equals(G))!==null&&ce!==void 0?ce:(R[$.value]=G,!0));case"Quad":return G.termType==="Quad"&&D($,G);default:return $.equals(G)}})}return D(w,O)&&(E.returnMappings?R:!0)}return Nt}var on={},vz;function Ule(){if(vz)return on;vz=1,Object.defineProperty(on,"__esModule",{value:!0}),on.TERM_TYPES=void 0,on.uniqTerms=n,on.getTermsOfType=o,on.getNamedNodes=i,on.getBlankNodes=t,on.getLiterals=e,on.getVariables=r,on.getDefaultGraphs=a,on.getQuads=c;const u=gz();on.TERM_TYPES=["NamedNode","BlankNode","Literal","Variable","DefaultGraph","Quad"];function n(s){const d={};return s.filter(l=>{const f=(0,u.termToString)(l);return!(f in d)&&(d[f]=!0)})}function o(s,d){return s.filter(l=>l.termType===d)}function i(s){return o(s,"NamedNode")}function t(s){return o(s,"BlankNode")}function e(s){return o(s,"Literal")}function r(s){return o(s,"Variable")}function a(s){return o(s,"DefaultGraph")}function c(s){return o(s,"Quad")}return on}var Tz;function Vle(){return Tz||(Tz=1,(function(u){var n=cl&&cl.__createBinding||(Object.create?(function(i,t,e,r){r===void 0&&(r=e);var a=Object.getOwnPropertyDescriptor(t,e);(!a||("get"in a?!t.__esModule:a.writable||a.configurable))&&(a={enumerable:!0,get:function(){return t[e]}}),Object.defineProperty(i,r,a)}):(function(i,t,e,r){r===void 0&&(r=e),i[r]=t[e]})),o=cl&&cl.__exportStar||function(i,t){for(var e in i)e!=="default"&&!Object.prototype.hasOwnProperty.call(t,e)&&n(t,i,e)};Object.defineProperty(u,"__esModule",{value:!0}),o($le(),u),o(Ule(),u)})(cl)),cl}var wz;function Sz(){if(wz)return V2;wz=1,Object.defineProperty(V2,"__esModule",{value:!0}),V2.PendingStreamsIndex=void 0;const u=gz(),n=Vle();let o=class Hl{constructor(){this.indexedStreams=new Map,this.allStreams=[]}termToString(t){return t&&t.termType!=="Variable"?(0,u.termToString)(t):Hl.ID_VARIABLE}addPatternListener(t,e,r,a,c){this.allStreams.push(t);const s=`${this.termToString(e)}${Hl.ID_SEPARATOR}${this.termToString(r)}${Hl.ID_SEPARATOR}${this.termToString(a)}${Hl.ID_SEPARATOR}${this.termToString(c)}`;let d=this.indexedStreams.get(s);d||(d=[],this.indexedStreams.set(s,d)),d.push(t)}getPendingStreamsForQuad(t){let e=[(0,n.getTerms)(t).map(a=>(0,u.termToString)(a))];for(let a=0;a<n.QUAD_TERM_NAMES.length;a++){const c=e;e=[];for(const s of c){e.push(s);const d=[...s];d[a]=Hl.ID_VARIABLE,e.push(d)}}const r=[];for(const a of e){const c=this.indexedStreams.get(a.join(Hl.ID_SEPARATOR));c&&r.push(...c)}return r}};return o.ID_VARIABLE="?",o.ID_SEPARATOR=":",V2.PendingStreamsIndex=o,V2}var $n={},Oz;function Qle(){if(Oz)return $n;Oz=1;var u=$n&&$n.__asyncValues||function(a){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var c=a[Symbol.asyncIterator],s;return c?c.call(a):(a=typeof __values=="function"?__values(a):a[Symbol.iterator](),s={},d("next"),d("throw"),d("return"),s[Symbol.asyncIterator]=function(){return this},s);function d(f){s[f]=a[f]&&function(h){return new Promise(function(p,y){h=a[f](h),l(p,y,h.done,h.value)})}}function l(f,h,p,y){Promise.resolve(y).then(function(_){f({value:_,done:p})},h)}},n=$n&&$n.__await||function(a){return this instanceof n?(this.v=a,this):new n(a)},o=$n&&$n.__asyncGenerator||function(a,c,s){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var d=s.apply(a,c||[]),l,f=[];return l={},h("next"),h("throw"),h("return"),l[Symbol.asyncIterator]=function(){return this},l;function h(g){d[g]&&(l[g]=function(T){return new Promise(function(v,S){f.push([g,T,v,S])>1||p(g,T)})})}function p(g,T){try{y(d[g](T))}catch(v){m(f[0][3],v)}}function y(g){g.value instanceof n?Promise.resolve(g.value.v).then(_,b):m(f[0][2],g)}function _(g){p("next",g)}function b(g){p("throw",g)}function m(g,T){g(T),f.shift(),f.length&&p(f[0][0],f[0][1])}};Object.defineProperty($n,"__esModule",{value:!0}),$n.StreamingStore=void 0;const i=Xi,t=Pt(),e=Sz();let r=class vJ{constructor(c=new i.Store){this.pendingStreams=new e.PendingStreamsIndex,this.ended=!1,this.listeners=[],this.store=c}addEndListener(c){this.listeners.push(c)}emitEndEvent(){for(const c of this.listeners)c()}hasEnded(){return this.ended}end(){this.ended=!0;for(const c of this.pendingStreams.allStreams)c.push(null);this.emitEndEvent()}importToListeners(c){c.on("data",s=>{if(!this.ended&&!this.store.countQuads(s.subject,s.predicate,s.object,s.graph))for(const d of this.pendingStreams.getPendingStreamsForQuad(s))d.emit("quad",s),d.isInitialized&&d.push(s)})}static concatStreams(c){return o(this,arguments,function*(){var d,l,f,h;for(const b of c)try{for(var p=!0,y=(l=void 0,u(b)),_;_=yield n(y.next()),d=_.done,!d;){h=_.value,p=!1;try{yield yield n(h)}finally{p=!0}}}catch(m){l={error:m}}finally{try{!p&&!d&&(f=y.return)&&(yield n(f.call(y)))}finally{if(l)throw l.error}}})}import(c){if(this.ended)throw new Error("Attempted to import into an ended StreamingStore");return this.importToListeners(c),this.store.import(c)}match(c,s,d,l){const f=this.store.match(c,s,d,l);let h=f;if(!this.ended){const p=new t.PassThrough({objectMode:!0});this.pendingStreams.addPatternListener(p,c,s,d,l),h=t.Readable.from(vJ.concatStreams([f,p])),p.on("quad",_=>{h.emit("quad",_)}),h._pipeSource=f;const y=f._read;f._read=_=>{p.isInitialized=!0,y.call(f,_)}}return h}getStore(){return this.store}};return $n.StreamingStore=r,$n}var Az;function Hle(){return Az||(Az=1,(function(u){var n=ol&&ol.__createBinding||(Object.create?(function(i,t,e,r){r===void 0&&(r=e);var a=Object.getOwnPropertyDescriptor(t,e);(!a||("get"in a?!t.__esModule:a.writable||a.configurable))&&(a={enumerable:!0,get:function(){return t[e]}}),Object.defineProperty(i,r,a)}):(function(i,t,e,r){r===void 0&&(r=e),i[r]=t[e]})),o=ol&&ol.__exportStar||function(i,t){for(var e in i)e!=="default"&&!Object.prototype.hasOwnProperty.call(t,e)&&n(t,i,e)};Object.defineProperty(u,"__esModule",{value:!0}),o(Sz(),u),o(Qle(),u)})(ol)),ol}var Ez;function Gle(){if(Ez)return U2;Ez=1,Object.defineProperty(U2,"__esModule",{value:!0}),U2.StreamingStoreMetadata=void 0;const u=Wi(),n=br(),o=Hle();let i=class extends o.StreamingStore{constructor(e,r){super(e),this.started=!1,this.containedSources=new Set,this.runningIterators=new Set,this.iteratorCreatedListeners=new Set,this.baseMetadata={state:new n.MetadataValidationState,cardinality:{type:"exact",value:0},variables:[]},this.metadataAccumulator=r}import(e){return this.ended||super.import(e),e}hasRunningIterators(){return this.runningIterators.size>0}match(e,r,a,c){const s=super.match(e,r,a,c),d=new u.ClosableTransformIterator(s,{autoStart:!1,onClose:()=>{this.runningIterators.delete(d)}});let l=this.getStore().countQuads(e,r,a,c);const f={state:new n.MetadataValidationState,cardinality:{type:"estimate",value:l}};d.setProperty("metadata",f),d.setProperty("lastCount",l),s.on("quad",()=>{d.setProperty("lastCount",++l),this.updateMetadataState(d,l)}),this.runningIterators.add(d);for(const h of this.iteratorCreatedListeners)h();return d}setBaseMetadata(e,r){if(this.baseMetadata={...e},this.baseMetadata.cardinality={type:"exact",value:0},r)for(const a of this.runningIterators){const c=a.getProperty("lastCount");this.updateMetadataState(a,c)}}updateMetadataState(e,r){const a={state:new n.MetadataValidationState,cardinality:{type:"estimate",value:r},variables:[]};this.metadataAccumulator(this.baseMetadata,a).then(c=>{c.state=new n.MetadataValidationState;const s=e.getProperty("metadata");e.setProperty("metadata",c),s==null||s.state.invalidate()}).catch(()=>{})}addIteratorCreatedListener(e){this.iteratorCreatedListeners.add(e)}removeIteratorCreatedListener(e){this.iteratorCreatedListeners.delete(e)}};return U2.StreamingStoreMetadata=i,U2}var xz;function Rz(){if(xz)return C2;xz=1,Object.defineProperty(C2,"__esModule",{value:!0}),C2.QuerySourceHypermedia=void 0;const u=$E(),n=qe(),o=pt(),i=ff(),t=Pt(),e=st(),r=qle(),a=Gle();let c=class{constructor(d,l,f,h,p,y,_,b,m){this.referenceValue=l,this.cacheSize=d,this.firstUrl=l,this.forceSourceType=f,this.maxIterators=h,this.mediators=y,this.aggregateStore=p,this.logWarning=_,this.dataFactory=b,this.bindingsFactory=m,this.sourcesState=new i.LRUCache({max:this.cacheSize})}async getSelectorShape(d){return(await this.getSourceCached({url:this.firstUrl},{},d,this.getAggregateStore(d))).source.getSelectorShape(d)}queryBindings(d,l,f){const h=this.getAggregateStore(l);if(h&&d.type==="pattern"&&h.started)return new u.QuerySourceRdfJs(h,l.getSafe(n.KeysInitQuery.dataFactory),this.bindingsFactory).queryBindings(d,l);this.sourcesState.size===0&&this.getSourceCached({url:this.firstUrl},{},l,h).catch(b=>_.destroy(b));const p=l.getSafe(n.KeysInitQuery.dataFactory),y=new e.Factory(p),_=new r.MediatedLinkedRdfSourcesAsyncRdfIterator(this.cacheSize,d,f,l,this.forceSourceType,this.firstUrl,this.maxIterators,(b,m)=>this.getSourceCached(b,m,l,h),h,this.mediators.mediatorMetadataAccumulate,this.mediators.mediatorRdfResolveHypermediaLinks,this.mediators.mediatorRdfResolveHypermediaLinksQueue,p,y);if(h){h.started=!0;const b=()=>_.kickstart();h.addIteratorCreatedListener(b),_.on("end",()=>h.removeIteratorCreatedListener(b))}return _}queryQuads(d,l){return new o.TransformIterator(async()=>(await this.getSourceCached({url:this.firstUrl},{},l,this.getAggregateStore(l))).source.queryQuads(d,l))}async queryBoolean(d,l){return await(await this.getSourceCached({url:this.firstUrl},{},l,this.getAggregateStore(l))).source.queryBoolean(d,l)}async queryVoid(d,l){return await(await this.getSourceCached({url:this.firstUrl},{},l,this.getAggregateStore(l))).source.queryVoid(d,l)}async getSource(d,l,f,h){var g,T;d.context&&(f=f.merge(d.context));let p=d.url,y,_;if(this.forceSourceType==="sparql"&&((g=f.get(n.KeysQueryOperation.querySources))==null?void 0:g.length)===1)y=new t.Readable,y.read=()=>null,{metadata:_}=await this.mediators.mediatorMetadataAccumulate.mediate({context:f,mode:"initialize"});else try{const v=await this.mediators.mediatorDereferenceRdf.mediate({context:f,url:p});p=v.url;const S=await this.mediators.mediatorMetadata.mediate({context:f,url:p,quads:v.data,triples:(T=v.metadata)==null?void 0:T.triples});S.data.on("error",()=>{}),_=(await this.mediators.mediatorMetadataExtract.mediate({context:f,url:p,metadata:S.metadata,headers:v.headers,requestTime:v.requestTime})).metadata,y=S.data,d.transform&&(y=await d.transform(y))}catch(v){y=new t.Readable,y.read=()=>(setTimeout(()=>y.emit("error",v)),null),{metadata:_}=await this.mediators.mediatorMetadataAccumulate.mediate({context:f,mode:"initialize"}),this.logWarning(`Metadata extraction for ${p} failed: ${v.message}`)}h==null||h.setBaseMetadata(_,!1),h==null||h.containedSources.add(d.url),h==null||h.import(y);const{source:b,dataset:m}=await this.mediators.mediatorQuerySourceIdentifyHypermedia.mediate({context:f,forceSourceType:d.url===this.firstUrl?this.forceSourceType:void 0,handledDatasets:l,metadata:_,quads:y,url:p});return m&&(l[m]=!0),{link:d,source:b,metadata:_,handledDatasets:l}}getSourceCached(d,l,f,h){let p=this.sourcesState.get(d.url);return p||(p=this.getSource(d,l,f,h),(d.url===this.firstUrl||h===void 0)&&this.sourcesState.set(d.url,p),p)}getAggregateStore(d){let l;if(this.aggregateStore){const f=d.get(n.KeysQuerySourceIdentify.hypermediaSourcesAggregatedStores);if(f)return l=f.get(this.firstUrl),l||(l=new a.StreamingStoreMetadata(void 0,async(h,p)=>(await this.mediators.mediatorMetadataAccumulate.mediate({mode:"append",accumulatedMetadata:h,appendingMetadata:p,context:d})).metadata),f.set(this.firstUrl,l)),l}}toString(){return`QuerySourceHypermedia(${this.firstUrl})`}};return C2.QuerySourceHypermedia=c,C2}var Fz;function zle(){if(Fz)return q2;Fz=1,Object.defineProperty(q2,"__esModule",{value:!0}),q2.ActorQuerySourceIdentifyHypermedia=void 0;const u=zv(),n=qe(),o=pe(),i=Vt(),t=Rz();let e=class extends u.ActorQuerySourceIdentify{constructor(a){super(a)}async test(a){return typeof a.querySourceUnidentified.value!="string"?(0,o.failTest)(`${this.name} requires a single query source with a URL value to be present in the context.`):(0,o.passTestVoid)()}async run(a){var s;const c=a.context.getSafe(n.KeysInitQuery.dataFactory);return{querySource:{source:new t.QuerySourceHypermedia(this.cacheSize,a.querySourceUnidentified.value,a.querySourceUnidentified.type,this.maxIterators,this.aggregateTraversalStore&&!!((s=a.querySourceUnidentified.context)!=null&&s.get(n.KeysQuerySourceIdentify.traverse)),{mediatorMetadata:this.mediatorMetadata,mediatorMetadataExtract:this.mediatorMetadataExtract,mediatorMetadataAccumulate:this.mediatorMetadataAccumulate,mediatorDereferenceRdf:this.mediatorDereferenceRdf,mediatorQuerySourceIdentifyHypermedia:this.mediatorQuerySourceIdentifyHypermedia,mediatorRdfResolveHypermediaLinks:this.mediatorRdfResolveHypermediaLinks,mediatorRdfResolveHypermediaLinksQueue:this.mediatorRdfResolveHypermediaLinksQueue},d=>this.logWarn(a.context,d),c,await i.BindingsFactory.create(this.mediatorMergeBindingsContext,a.context,c)),context:a.querySourceUnidentified.context??new o.ActionContext}}}};return q2.ActorQuerySourceIdentifyHypermedia=e,q2}var Iz;function Xle(){return Iz||(Iz=1,(function(u){var n=ul&&ul.__createBinding||(Object.create?(function(i,t,e,r){r===void 0&&(r=e);var a=Object.getOwnPropertyDescriptor(t,e);(!a||("get"in a?!t.__esModule:a.writable||a.configurable))&&(a={enumerable:!0,get:function(){return t[e]}}),Object.defineProperty(i,r,a)}):(function(i,t,e,r){r===void 0&&(r=e),i[r]=t[e]})),o=ul&&ul.__exportStar||function(i,t){for(var e in i)e!=="default"&&!Object.prototype.hasOwnProperty.call(t,e)&&n(t,i,e)};Object.defineProperty(u,"__esModule",{value:!0}),o(zle(),u),o(Rz(),u)})(ul)),ul}var dl={},k2={},Pz;function Jle(){if(Pz)return k2;Pz=1,Object.defineProperty(k2,"__esModule",{value:!0}),k2.ActorRdfJoinNone=void 0;const u=zr(),n=qe(),o=pe(),i=Vt(),t=br(),e=pt();let r=class extends u.ActorRdfJoin{constructor(c){super(c,{logicalType:"inner",physicalName:"none",limitEntries:0})}async test(c){return c.entries.length>0?(0,o.failTest)(`Actor ${this.name} can only join zero entries`):await this.getJoinCoefficients(c,void 0)}async getOutput(c){const s=c.context.getSafe(n.KeysInitQuery.dataFactory),d=await i.BindingsFactory.create(this.mediatorMergeBindingsContext,c.context,s);return{result:{bindingsStream:new e.ArrayIterator([d.bindings()],{autoStart:!1}),metadata:()=>Promise.resolve({state:new t.MetadataValidationState,cardinality:{type:"exact",value:1},variables:[]}),type:"bindings"}}}async getJoinCoefficients(c,s){return(0,o.passTestWithSideData)({iterations:0,persistedItems:0,blockingItems:0,requestTime:0},s)}};return k2.ActorRdfJoinNone=r,k2}var Dz;function Kle(){return Dz||(Dz=1,(function(u){var n=dl&&dl.__createBinding||(Object.create?(function(i,t,e,r){r===void 0&&(r=e);var a=Object.getOwnPropertyDescriptor(t,e);(!a||("get"in a?!t.__esModule:a.writable||a.configurable))&&(a={enumerable:!0,get:function(){return t[e]}}),Object.defineProperty(i,r,a)}):(function(i,t,e,r){r===void 0&&(r=e),i[r]=t[e]})),o=dl&&dl.__exportStar||function(i,t){for(var e in i)e!=="default"&&!Object.prototype.hasOwnProperty.call(t,e)&&n(t,i,e)};Object.defineProperty(u,"__esModule",{value:!0}),o(Jle(),u)})(dl)),dl}var ll={},W2={},fl={},Y2={},Nz;function kle(){if(Nz)return Y2;Nz=1,Object.defineProperty(Y2,"__esModule",{value:!0}),Y2.ActorRdfJoinMultiBind=void 0;const u=zr(),n=qe(),o=pe(),i=Vt(),t=_t(),e=pt(),r=st();let a=class TJ extends u.ActorRdfJoin{constructor(s){super(s,{logicalType:"inner",physicalName:"bind",canHandleUndefs:!0,isLeaf:!1})}static createBindStream(s,d,l,f,h,p,y){const _=s==="depth-first",b=m=>{const g=l.map(v=>(0,t.materializeOperation)(v,m,p,y,{bindFilter:!0})),T=v=>v.merge(m);return new e.TransformIterator(async()=>(await f(g,m)).transform({map:T}),{maxBufferSize:128,autoStart:_})};switch(s){case"depth-first":return new e.MultiTransformIterator(d,{autoStart:!1,multiTransform:b,optional:h});case"breadth-first":return new e.UnionIterator(d.transform({map:b,optional:h}),{autoStart:!1});default:throw new Error(`Received request for unknown bind order: ${s}`)}}async getOutput(s,d){const l=s.context.getSafe(n.KeysInitQuery.dataFactory),f=new r.Factory(l),h=await i.BindingsFactory.create(this.mediatorMergeBindingsContext,s.context,l),p=d.entriesSorted;this.logDebug(s.context,"First entry for Bind Join: ",()=>({entry:p[0].operation,cardinality:p[0].metadata.cardinality,order:p[0].metadata.order,availableOrders:p[0].metadata.availableOrders}));for(const[g,T]of p.entries())g!==0&&T.output.bindingsStream.close();const y=p[0].output,_=[...p];_.splice(0,1);const b=s.context.set(n.KeysQueryOperation.joinLeftMetadata,p[0].metadata).set(n.KeysQueryOperation.joinRightMetadatas,_.map(g=>g.metadata));return{result:{type:"bindings",bindingsStream:TJ.createBindStream(this.bindOrder,y.bindingsStream,_.map(g=>g.operation),async(g,T)=>{const v=g.length===1?g[0]:f.createJoin(g,g.every(F=>!F.metadata));return(0,t.getSafeBindings)(await this.mediatorQueryOperation.mediate({operation:v,context:b==null?void 0:b.set(n.KeysQueryOperation.joinBindings,T)})).bindingsStream},!1,f,h),metadata:()=>this.constructResultMetadata(p,p.map(g=>g.metadata),s.context)},physicalPlanMetadata:{bindIndex:d.entriesUnsorted.indexOf(p[0]),bindOperation:p[0].operation,bindOperationCardinality:p[0].metadata.cardinality,bindOrder:this.bindOrder}}}canBindWithOperation(s){let d=!0;return r.Util.recurseOperation(s,{[r.Algebra.types.EXTEND](){return d=!1,!1},[r.Algebra.types.GROUP](){return d=!1,!1}}),d}async getJoinCoefficients(s,d){let{metadatas:l}=d;const f=s.entries.map((O,w)=>({...O,metadata:l[w]})),h=await u.ActorRdfJoin.sortJoinEntries(this.mediatorJoinEntriesSort,f,s.context);if(h.isFailed())return h;const p=h.get();l=p.map(O=>O.metadata);const y=u.ActorRdfJoin.getRequestInitialTimes(l),_=u.ActorRdfJoin.getRequestItemTimes(l),b=[...p],m=[...y],g=[..._];if(b.splice(0,1),m.splice(0,1),g.splice(0,1),b.some(O=>!this.canBindWithOperation(O.operation)))return(0,o.failTest)(`Actor ${this.name} can not bind on Extend and Group operations`);if(b.some(O=>O.operationModified))return(0,o.failTest)(`Actor ${this.name} can not be used over remaining entries with modified operations`);const T=_.some(O=>O>0);if(l[0].cardinality.value*this.minMaxCardinalityRatio/(T?1:3)>Math.max(...l.map(O=>O.cardinality.value)))return(0,o.failTest)(`Actor ${this.name} can only run if the smallest stream is much smaller than largest stream`);const v=await Promise.all(b.map(async O=>(await this.mediatorJoinSelectivity.mediate({entries:[p[0],O],context:s.context})).selectivity*this.selectivityModifier)),S=b.map((O,w)=>O.metadata.cardinality.value*v[w]).reduce((O,w)=>O+w,0),F=m.reduce((O,w)=>O+w,0),M=g.reduce((O,w)=>O+w,0);return(0,o.passTestWithSideData)({iterations:l[0].cardinality.value*S,persistedItems:0,blockingItems:0,requestTime:y[0]+l[0].cardinality.value*(_[0]+F+S*M)},{...d,entriesUnsorted:f,entriesSorted:p})}};return Y2.ActorRdfJoinMultiBind=a,Y2}var jz;function Lz(){return jz||(jz=1,(function(u){var n=fl&&fl.__createBinding||(Object.create?(function(i,t,e,r){r===void 0&&(r=e);var a=Object.getOwnPropertyDescriptor(t,e);(!a||("get"in a?!t.__esModule:a.writable||a.configurable))&&(a={enumerable:!0,get:function(){return t[e]}}),Object.defineProperty(i,r,a)}):(function(i,t,e,r){r===void 0&&(r=e),i[r]=t[e]})),o=fl&&fl.__exportStar||function(i,t){for(var e in i)e!=="default"&&!Object.prototype.hasOwnProperty.call(t,e)&&n(t,i,e)};Object.defineProperty(u,"__esModule",{value:!0}),o(kle(),u)})(fl)),fl}var Mz;function Wle(){if(Mz)return W2;Mz=1,Object.defineProperty(W2,"__esModule",{value:!0}),W2.ActorRdfJoinOptionalBind=void 0;const u=Lz(),n=zr(),o=qe(),i=pe(),t=Vt(),e=_t(),r=st();let a=class extends n.ActorRdfJoin{constructor(s){super(s,{logicalType:"optional",physicalName:"bind",limitEntries:2,canHandleUndefs:!0,isLeaf:!1,requiresVariableOverlap:!0})}async getOutput(s){const d=s.context.getSafe(o.KeysInitQuery.dataFactory),l=new r.Factory(d),f=await t.BindingsFactory.create(this.mediatorMergeBindingsContext,s.context,d);s.entries[1].output.bindingsStream.close();const h=s.context.set(o.KeysQueryOperation.joinLeftMetadata,await s.entries[0].output.metadata()).set(o.KeysQueryOperation.joinRightMetadatas,[await s.entries[1].output.metadata()]);return{result:{type:"bindings",bindingsStream:u.ActorRdfJoinMultiBind.createBindStream(this.bindOrder,s.entries[0].output.bindingsStream,[s.entries[1].operation],async(y,_)=>{const b=y[0];return(0,e.getSafeBindings)(await this.mediatorQueryOperation.mediate({operation:b,context:h==null?void 0:h.set(o.KeysQueryOperation.joinBindings,_)})).bindingsStream},!0,l,f),metadata:async()=>await this.constructResultMetadata(s.entries,await n.ActorRdfJoin.getMetadatas(s.entries),s.context,{},!0)}}}async getJoinCoefficients(s,d){const{metadatas:l}=d,f=n.ActorRdfJoin.getRequestInitialTimes(l),h=n.ActorRdfJoin.getRequestItemTimes(l);if(s.entries[1].operation.type===r.Algebra.types.EXTEND||s.entries[1].operation.type===r.Algebra.types.GROUP)return(0,i.failTest)(`Actor ${this.name} can not bind on Extend and Group operations`);const p=(await this.mediatorJoinSelectivity.mediate({entries:s.entries,context:s.context})).selectivity*this.selectivityModifier;return(0,i.passTestWithSideData)({iterations:l[0].cardinality.value*l[1].cardinality.value*p,persistedItems:0,blockingItems:0,requestTime:f[0]+l[0].cardinality.value*(h[0]+f[1]+p*l[1].cardinality.value*h[1])},d)}};return W2.ActorRdfJoinOptionalBind=a,W2}var qz;function Yle(){return qz||(qz=1,(function(u){var n=ll&&ll.__createBinding||(Object.create?(function(i,t,e,r){r===void 0&&(r=e);var a=Object.getOwnPropertyDescriptor(t,e);(!a||("get"in a?!t.__esModule:a.writable||a.configurable))&&(a={enumerable:!0,get:function(){return t[e]}}),Object.defineProperty(i,r,a)}):(function(i,t,e,r){r===void 0&&(r=e),i[r]=t[e]})),o=ll&&ll.__exportStar||function(i,t){for(var e in i)e!=="default"&&!Object.prototype.hasOwnProperty.call(t,e)&&n(t,i,e)};Object.defineProperty(u,"__esModule",{value:!0}),o(Wle(),u)})(ll)),ll}var hl={},Z2={},pl={},eT={},Cz;function Zle(){if(Cz)return eT;Cz=1,Object.defineProperty(eT,"__esModule",{value:!0}),eT.ActorTermComparatorFactory=void 0;const u=pe();let n=class extends u.Actor{constructor(i){super(i),this.mediatorQueryOperation=i.mediatorQueryOperation,this.mediatorFunctionFactory=i.mediatorFunctionFactory,this.mediatorMergeBindingsContext=i.mediatorMergeBindingsContext}};return eT.ActorTermComparatorFactory=n,eT}var Bz;function efe(){return Bz||(Bz=1,(function(u){var n=pl&&pl.__createBinding||(Object.create?(function(i,t,e,r){r===void 0&&(r=e);var a=Object.getOwnPropertyDescriptor(t,e);(!a||("get"in a?!t.__esModule:a.writable||a.configurable))&&(a={enumerable:!0,get:function(){return t[e]}}),Object.defineProperty(i,r,a)}):(function(i,t,e,r){r===void 0&&(r=e),i[r]=t[e]})),o=pl&&pl.__exportStar||function(i,t){for(var e in i)e!=="default"&&!Object.prototype.hasOwnProperty.call(t,e)&&n(t,i,e)};Object.defineProperty(u,"__esModule",{value:!0}),o(Zle(),u)})(pl)),pl}var tT={},$z;function tfe(){if($z)return tT;$z=1,Object.defineProperty(tT,"__esModule",{value:!0}),tT.TermComparatorExpressionEvaluator=void 0;let u=class{constructor(o,i,t){this.internalEvaluator=o,this.equalityFunction=i,this.lessThanFunction=t,this._TERM_ORDERING_PRIORITY={Variable:0,BlankNode:1,NamedNode:2,Literal:3,Quad:4,DefaultGraph:5}}orderTypes(o,i){if(o===i)return 0;if(o===void 0)return-1;if(i===void 0)return 1;if(o.termType!==i.termType)return this._TERM_ORDERING_PRIORITY[o.termType]<this._TERM_ORDERING_PRIORITY[i.termType]?-1:1;if(o.equals(i))return 0;if(o.termType==="Quad"&&i.termType==="Quad"){const t=this.orderTypes(o.subject,i.subject);if(t!==0)return t;const e=this.orderTypes(o.predicate,i.predicate);if(e!==0)return e;const r=this.orderTypes(o.object,i.object);return r!==0?r:this.orderTypes(o.graph,i.graph)}return o.termType==="Literal"?this.orderLiteralTypes(o,i):this.comparePrimitives(o.value,i.value)}orderLiteralTypes(o,i){const t=this.internalEvaluator.transformer.transformLiteral(o),e=this.internalEvaluator.transformer.transformLiteral(i);try{return this.equalityFunction.applyOnTerms([t,e],this.internalEvaluator).typedValue?0:this.lessThanFunction.applyOnTerms([t,e],this.internalEvaluator).typedValue?-1:1}catch{const r=this.comparePrimitives(t.dataType,e.dataType);return r!==0?r:this.comparePrimitives(t.str(),e.str())}}comparePrimitives(o,i){return o===i?0:o<i?-1:1}};return tT.TermComparatorExpressionEvaluator=u,tT}var Uz;function rfe(){if(Uz)return Z2;Uz=1,Object.defineProperty(Z2,"__esModule",{value:!0}),Z2.ActorTermComparatorFactoryExpressionEvaluator=void 0;const u=FG(),n=efe(),o=qe(),i=pe(),t=Vt(),e=ge(),r=tfe();let a=class extends n.ActorTermComparatorFactory{async test(s){return(0,i.passTestVoid)()}async run({context:s}){return s=e.prepareEvaluatorActionContext(s),new r.TermComparatorExpressionEvaluator(new u.InternalEvaluator(s,this.mediatorFunctionFactory,this.mediatorQueryOperation,await t.BindingsFactory.create(this.mediatorMergeBindingsContext,s,s.getSafe(o.KeysInitQuery.dataFactory))),await this.mediatorFunctionFactory.mediate({functionName:e.SparqlOperator.EQUAL,context:s,requireTermExpression:!0}),await this.mediatorFunctionFactory.mediate({functionName:e.SparqlOperator.LT,context:s,requireTermExpression:!0}))}};return Z2.ActorTermComparatorFactoryExpressionEvaluator=a,Z2}var Vz;function nfe(){return Vz||(Vz=1,(function(u){var n=hl&&hl.__createBinding||(Object.create?(function(i,t,e,r){r===void 0&&(r=e);var a=Object.getOwnPropertyDescriptor(t,e);(!a||("get"in a?!t.__esModule:a.writable||a.configurable))&&(a={enumerable:!0,get:function(){return t[e]}}),Object.defineProperty(i,r,a)}):(function(i,t,e,r){r===void 0&&(r=e),i[r]=t[e]})),o=hl&&hl.__exportStar||function(i,t){for(var e in i)e!=="default"&&!Object.prototype.hasOwnProperty.call(t,e)&&n(t,i,e)};Object.defineProperty(u,"__esModule",{value:!0}),o(rfe(),u)})(hl)),hl}var yl={},rT={},Qz;function ife(){if(Qz)return rT;Qz=1,Object.defineProperty(rT,"__esModule",{value:!0}),rT.ActorRdfJoinMultiSmallestFilterBindings=void 0;const u=zr(),n=qe(),o=pe(),i=Vt(),t=Wi(),e=_t(),r=pt(),a=st();let c=class extends u.ActorRdfJoin{constructor(d){super(d,{logicalType:"inner",physicalName:"multi-smallest-filter-bindings",limitEntries:2,limitEntriesMin:!0,isLeaf:!1})}async sortJoinEntries(d,l){let{entries:f}=await this.mediatorJoinEntriesSort.mediate({entries:d,context:l});f=f.sort((m,g)=>m.operationModified&&!g.operationModified?-1:0);const h=f.splice(0,1)[0];let p,y=-1,_=0;for(const[m,g]of f.entries()){const T=h.metadata.variables.filter(v=>g.metadata.variables.some(S=>v.variable.equals(S.variable))).length;(!p||T>_||T===_&&(g.metadata.variables.length<p.metadata.variables.length||g.metadata.variables.length===p.metadata.variables.length&&g.metadata.cardinality.value<p.metadata.cardinality.value))&&(p=g,y=m,_=T)}if(_===0)return(0,o.failTest)(`Actor ${this.name} can only join with common variables`);const b=f;return b.splice(y,1),(0,o.passTest)({first:h,second:p,remaining:b})}async getOutput(d){const l=d.context.getSafe(n.KeysInitQuery.dataFactory),f=new a.Factory(l),h=await u.ActorRdfJoin.getEntriesWithMetadatas([...d.entries]),{first:p,second:y,remaining:_}=(await this.sortJoinEntries(h,d.context)).getOrThrow(),b=p.output.bindingsStream;p.output.bindingsStream=b.clone();const m=p.metadata.variables.filter(E=>y.metadata.variables.some(R=>E.variable.equals(R.variable))),g={},T=b.clone().map(E=>E.filter((R,D)=>m.some(B=>B.variable.equals(D)))).filter(E=>{const R=(0,i.bindingsToString)(E);return!(R in g)&&(g[R]=!0)}),v=new t.ChunkedIterator(T,this.blockSize,{autoStart:!1}),S=(0,e.getOperationSource)(y.operation),M={output:{type:"bindings",bindingsStream:new r.UnionIterator(v.map(E=>S.source.queryBindings(y.operation,S.context?d.context.merge(S.context):d.context,{filterBindings:{bindings:E,metadata:p.metadata}}))),metadata:y.output.metadata},operation:y.operation,operationModified:!0};y.output.bindingsStream.destroy();const O={output:(0,e.getSafeBindings)(await this.mediatorJoin.mediate({type:d.type,entries:[p,M],context:d.context.set(n.KeysRdfJoin.lastPhysicalJoin,this.physicalName)})),operation:f.createJoin([p.operation,M.operation],!1),operationModified:!0},w=_;return w.unshift(O),{result:await this.mediatorJoin.mediate({type:d.type,entries:w,context:d.context}),physicalPlanMetadata:{firstIndex:h.indexOf(p),secondIndex:h.indexOf(y)}}}async getJoinCoefficients(d,l){let{metadatas:f}=l;if(d.context.get(n.KeysRdfJoin.lastPhysicalJoin)===this.physicalName)return(0,o.failTest)(`Actor ${this.name} can not be called recursively`);f=[...f];const h=await this.sortJoinEntries(d.entries.map((M,O)=>({...M,metadata:f[O]})),d.context);if(h.isFailed())return h;const{first:p,second:y,remaining:_}=h.get(),b=(0,e.getOperationSource)(y.operation);if(!b)return(0,o.failTest)(`Actor ${this.name} can only process if entries[1] has a source`);const m=y.operation,g=await b.source.getSelectorShape(d.context);if(!(0,e.doesShapeAcceptOperation)(g,m,{filterBindings:!0}))return(0,o.failTest)(`Actor ${this.name} can only process if entries[1] accept filterBindings`);f=[p.metadata,y.metadata,..._.map(M=>M.metadata)];const T=u.ActorRdfJoin.getRequestInitialTimes(f),v=u.ActorRdfJoin.getRequestItemTimes(f),{selectivity:S}=await this.mediatorJoinSelectivity.mediate({entries:[p,y],context:d.context}),F=_.reduce((M,O)=>M*O.metadata.cardinality.value*this.selectivityModifier,1);return(0,o.passTestWithSideData)({iterations:S*this.selectivityModifier*y.metadata.cardinality.value*F,persistedItems:p.metadata.cardinality.value,blockingItems:p.metadata.cardinality.value,requestTime:T[0]+f[0].cardinality.value*v[0]+T[1]+F*v[1]},l)}};return rT.ActorRdfJoinMultiSmallestFilterBindings=c,rT}var Hz;function afe(){return Hz||(Hz=1,(function(u){var n=yl&&yl.__createBinding||(Object.create?(function(i,t,e,r){r===void 0&&(r=e);var a=Object.getOwnPropertyDescriptor(t,e);(!a||("get"in a?!t.__esModule:a.writable||a.configurable))&&(a={enumerable:!0,get:function(){return t[e]}}),Object.defineProperty(i,r,a)}):(function(i,t,e,r){r===void 0&&(r=e),i[r]=t[e]})),o=yl&&yl.__exportStar||function(i,t){for(var e in i)e!=="default"&&!Object.prototype.hasOwnProperty.call(t,e)&&n(t,i,e)};Object.defineProperty(u,"__esModule",{value:!0}),o(ife(),u)})(yl)),yl}var bl={},nT={},Gz;function ufe(){if(Gz)return nT;Gz=1,Object.defineProperty(nT,"__esModule",{value:!0}),nT.ActorQueryProcessExplainLogical=void 0;const u=yw(),n=qe(),o=pe();let i=class extends u.ActorQueryProcess{constructor(e){super(e)}async test(e){return(e.context.get(n.KeysInitQuery.explain)??e.context.get(new o.ActionContextKey("explain")))!=="logical"?(0,o.failTest)(`${this.name} can only explain in 'logical' mode.`):(0,o.passTestVoid)()}async run(e){let{operation:r,context:a}=await this.queryProcessor.parse(e.query,e.context);return{operation:r,context:a}=await this.queryProcessor.optimize(r,a),{result:{explain:!0,type:"logical",data:r}}}};return nT.ActorQueryProcessExplainLogical=i,nT}var zz;function ofe(){return zz||(zz=1,(function(u){var n=bl&&bl.__createBinding||(Object.create?(function(i,t,e,r){r===void 0&&(r=e);var a=Object.getOwnPropertyDescriptor(t,e);(!a||("get"in a?!t.__esModule:a.writable||a.configurable))&&(a={enumerable:!0,get:function(){return t[e]}}),Object.defineProperty(i,r,a)}):(function(i,t,e,r){r===void 0&&(r=e),i[r]=t[e]})),o=bl&&bl.__exportStar||function(i,t){for(var e in i)e!=="default"&&!Object.prototype.hasOwnProperty.call(t,e)&&n(t,i,e)};Object.defineProperty(u,"__esModule",{value:!0}),o(ufe(),u)})(bl)),bl}var _l={},iT={},Xz;function sfe(){if(Xz)return iT;Xz=1,Object.defineProperty(iT,"__esModule",{value:!0}),iT.ActorQueryProcessExplainParsed=void 0;const u=yw(),n=qe(),o=pe();let i=class extends u.ActorQueryProcess{constructor(e){super(e)}async test(e){return(e.context.get(n.KeysInitQuery.explain)??e.context.get(new o.ActionContextKey("explain")))!=="parsed"?(0,o.failTest)(`${this.name} can only explain in 'parsed' mode.`):(0,o.passTestVoid)()}async run(e){const{operation:r}=await this.queryProcessor.parse(e.query,e.context);return{result:{explain:!0,type:"parsed",data:r}}}};return iT.ActorQueryProcessExplainParsed=i,iT}var Jz;function cfe(){return Jz||(Jz=1,(function(u){var n=_l&&_l.__createBinding||(Object.create?(function(i,t,e,r){r===void 0&&(r=e);var a=Object.getOwnPropertyDescriptor(t,e);(!a||("get"in a?!t.__esModule:a.writable||a.configurable))&&(a={enumerable:!0,get:function(){return t[e]}}),Object.defineProperty(i,r,a)}):(function(i,t,e,r){r===void 0&&(r=e),i[r]=t[e]})),o=_l&&_l.__exportStar||function(i,t){for(var e in i)e!=="default"&&!Object.prototype.hasOwnProperty.call(t,e)&&n(t,i,e)};Object.defineProperty(u,"__esModule",{value:!0}),o(sfe(),u)})(_l)),_l}var gl={},aT={},ml={},Kz;function kz(){if(Kz)return ml;Kz=1,Object.defineProperty(ml,"__esModule",{value:!0}),ml.numberToString=ml.MemoryPhysicalQueryPlanLogger=void 0;const u=Yt();let n=class{constructor(){this.planNodes=new Map}logOperation(t,e,r,a,c,s){const d={actor:c,logicalOperator:t,physicalOperator:e,rawNode:r,children:[],metadata:s};if(this.planNodes.set(r,d),this.rootNode){if(!a)throw new Error("Detected more than one parent-less node");const l=this.planNodes.get(a);if(!l)throw new Error("Could not find parent node");l.children.push(d)}else{if(a)throw new Error("No root node has been set yet, while a parent is being referenced");this.rootNode=d}}stashChildren(t,e){const r=this.planNodes.get(t);if(!r)throw new Error("Could not find plan node");r.children=e?r.children.filter(e):[]}unstashChild(t,e){const r=this.planNodes.get(t);if(r){const a=this.planNodes.get(e);if(!a)throw new Error("Could not find plan parent node");a.children.push(r)}}appendMetadata(t,e){const r=this.planNodes.get(t);r&&(r.metadata={...r.metadata,...e})}toJson(){return this.rootNode?this.planNodeToJson(this.rootNode):{}}planNodeToJson(t){var r;const e={logical:t.logicalOperator,physical:t.physicalOperator,...this.getLogicalMetadata(t.rawNode),...this.compactMetadata(t.metadata)};if(t.children.length>0&&(e.children=t.children.map(a=>this.planNodeToJson(a))),e.physical==="bind"&&e.children){const a={};for(const s of e.children){const d=((r=s.children)==null?void 0:r.at(-1))??s,l=this.getPlanHash(d).join(",");a[l]||(a[l]=[]),a[l].push(s)}const c=[];for(const s of Object.values(a))c.push({occurrences:s.length,firstOccurrence:s[0]});e.childrenCompact=c,delete e.children}return e}getPlanHash(t){let e=[`${t.logical}-${t.physical}`];return t.children?e=[...e,...t.children.flatMap(r=>this.getPlanHash(r))]:t.childrenCompact&&(e=[...e,...t.childrenCompact.flatMap(r=>this.getPlanHash(r.firstOccurrence))]),e}compactMetadata(t){return Object.fromEntries(Object.entries(t).map(([e,r])=>[e,this.compactMetadataValue(r)]))}compactMetadataValue(t){return t&&typeof t=="object"&&"termType"in t?this.getLogicalMetadata(t):t}getLogicalMetadata(t){var r;const e={};if("type"in t){const a=t;switch((r=a.metadata)!=null&&r.scopedSource&&(e.source=a.metadata.scopedSource.source.toString()),a.type){case"pattern":e.pattern=this.quadToString(a);break;case"project":e.variables=a.variables.map(c=>c.value);break}}return e}quadToString(t){return`${(0,u.termToString)(t.subject)} ${(0,u.termToString)(t.predicate)} ${(0,u.termToString)(t.object)}${t.graph.termType==="DefaultGraph"?"":` ${(0,u.termToString)(t.graph)}`}`}toCompactString(){const t=this.toJson(),e=[],r=new Map;if("logical"in t?this.nodeToCompactString(e,r,"",t):e.push("Empty"),r.size>0){e.push(""),e.push("sources:");for(const[a,c]of r.entries())e.push(`  ${c}: ${a}`)}return e.join(`
`)}nodeToCompactString(t,e,r,a,c){let s;a.source&&(s=e.get(a.source),s===void 0&&(s=e.size,e.set(a.source,s))),t.push(`${r}${a.logical}${a.physical?`(${a.physical})`:""}${a.pattern?` (${a.pattern})`:""}${a.variables?` (${a.variables.join(",")})`:""}${a.bindOperation?` bindOperation:(${a.bindOperation.pattern}) bindCardEst:${a.bindOperationCardinality.type==="estimate"?"~":""}${o(a.bindOperationCardinality.value)}`:""}${a.cardinality?` cardEst:${a.cardinality.type==="estimate"?"~":""}${o(a.cardinality.value)}`:""}${a.source?` src:${s}`:""}${a.cardinalityReal?` cardReal:${a.cardinalityReal}`:""}${a.timeSelf?` timeSelf:${o(a.timeSelf)}ms`:""}${a.timeLife?` timeLife:${o(a.timeLife)}ms`:""}${c?` ${c}`:""}`);for(const d of a.children??[])this.nodeToCompactString(t,e,`${r}  `,d);for(const d of a.childrenCompact??[])this.nodeToCompactString(t,e,`${r}  `,d.firstOccurrence,`compacted-occurrences:${d.occurrences}`)}};ml.MemoryPhysicalQueryPlanLogger=n;function o(i){return i.toLocaleString("en-US",{minimumFractionDigits:0,maximumFractionDigits:3})}return ml.numberToString=o,ml}var Wz;function dfe(){if(Wz)return aT;Wz=1,Object.defineProperty(aT,"__esModule",{value:!0}),aT.ActorQueryProcessExplainPhysical=void 0;const u=yw(),n=qe(),o=pe(),i=kz();let t=class extends u.ActorQueryProcess{constructor(r){super(r)}async test(r){const a=r.context.get(n.KeysInitQuery.explain)??r.context.get(new o.ActionContextKey("explain"));return a!=="physical"&&a!=="physical-json"?(0,o.failTest)(`${this.name} can only explain in 'physical' or 'physical-json' mode.`):(0,o.passTestVoid)()}async run(r){let{operation:a,context:c}=await this.queryProcessor.parse(r.query,r.context);({operation:a,context:c}=await this.queryProcessor.optimize(a,c));const s=new i.MemoryPhysicalQueryPlanLogger;c=c.set(n.KeysInitQuery.physicalQueryPlanLogger,s);const d=await this.queryProcessor.evaluate(a,c);switch(d.type){case"bindings":await d.bindingsStream.toArray();break;case"quads":await d.quadStream.toArray();break;case"boolean":await d.execute();break;case"void":await d.execute();break}const l=r.context.get(n.KeysInitQuery.explain)??r.context.getSafe(new o.ActionContextKey("explain"));return{result:{explain:!0,type:l,data:l==="physical"?s.toCompactString():s.toJson()}}}};return aT.ActorQueryProcessExplainPhysical=t,aT}var Yz;function lfe(){return Yz||(Yz=1,(function(u){var n=gl&&gl.__createBinding||(Object.create?(function(i,t,e,r){r===void 0&&(r=e);var a=Object.getOwnPropertyDescriptor(t,e);(!a||("get"in a?!t.__esModule:a.writable||a.configurable))&&(a={enumerable:!0,get:function(){return t[e]}}),Object.defineProperty(i,r,a)}):(function(i,t,e,r){r===void 0&&(r=e),i[r]=t[e]})),o=gl&&gl.__exportStar||function(i,t){for(var e in i)e!=="default"&&!Object.prototype.hasOwnProperty.call(t,e)&&n(t,i,e)};Object.defineProperty(u,"__esModule",{value:!0}),o(dfe(),u),o(kz(),u)})(gl)),gl}var vl={},uT={},Zz;function ffe(){if(Zz)return uT;Zz=1,Object.defineProperty(uT,"__esModule",{value:!0}),uT.ActorOptimizeQueryOperationPruneEmptySourceOperations=void 0;const u=gn(),n=qe(),o=pe(),i=_t(),t=st();let e=class NT extends u.ActorOptimizeQueryOperation{constructor(a){super(a)}async test(a){return(0,i.getOperationSource)(a.operation)?(0,o.failTest)(`Actor ${this.name} does not work with top-level operation sources.`):(0,o.passTestVoid)()}async run(a){const c=a.context.getSafe(n.KeysInitQuery.dataFactory),s=new t.Factory(c);let d=a.operation;const l=[],f=this;t.Util.recurseOperation(d,{[t.Algebra.types.UNION](p){return f.collectMultiOperationInputs(p.input,l,t.Algebra.types.PATTERN),!0},[t.Algebra.types.ALT](p){return f.collectMultiOperationInputs(p.input,l,t.Algebra.types.LINK),!1},[t.Algebra.types.SERVICE](){return!1}});const h=new Set;return await Promise.all(l.map(async p=>{const y=p.type==="link"?s.createPattern(c.variable("s"),p.iri,c.variable("o")):p;await this.hasSourceResults(s,(0,i.getOperationSource)(p),y,a.context)||h.add(p)})),h.size>0&&(this.logDebug(a.context,`Pruning ${h.size} source-specific operations`),d=t.Util.mapOperation(d,{[t.Algebra.types.UNION](p,y){return f.mapMultiOperation(p,h,_=>y.createUnion(_))},[t.Algebra.types.ALT](p,y){return f.mapMultiOperation(p,h,_=>y.createAlt(_))}},s),d=t.Util.mapOperation(d,{[t.Algebra.types.PROJECT](p,y){return NT.hasEmptyOperation(p)?{recurse:!1,result:y.createUnion([])}:{recurse:!0,result:p}},[t.Algebra.types.LEFT_JOIN](p){return NT.hasEmptyOperation(p.input[1])?{recurse:!0,result:p.input[0]}:{recurse:!0,result:p}}},s)),{operation:d,context:a.context}}static hasEmptyOperation(a){let c=!1;return t.Util.recurseOperation(a,{[t.Algebra.types.UNION](s){return s.input.every(d=>NT.hasEmptyOperation(d))&&(c=!0),!1},[t.Algebra.types.ALT](s){return s.input.length===0&&(c=!0),!1},[t.Algebra.types.LEFT_JOIN](s){return NT.hasEmptyOperation(s.input[0])&&(c=!0),!1}}),c}collectMultiOperationInputs(a,c,s){for(const d of a)(0,i.getOperationSource)(d)&&d.type===s&&c.push(d)}mapMultiOperation(a,c,s){const d=a.input.filter(l=>!c.has(l));return d.length===a.input.length?{result:a,recurse:!0}:d.length===0?{result:s([]),recurse:!1}:d.length===1?{result:d[0],recurse:!0}:{result:s(d),recurse:!0}}async hasSourceResults(a,c,s,d){var f;if(((f=c.context)==null?void 0:f.get(n.KeysQuerySourceIdentify.traverse))??d.get(n.KeysQuerySourceIdentify.traverse))return!0;if(this.useAskIfSupported){const h=a.createAsk(s);if((0,i.doesShapeAcceptOperation)(await c.source.getSelectorShape(d),h))return c.source.queryBoolean(h,d)}const l=c.source.queryBindings(s,d);return new Promise((h,p)=>{l.on("error",p),l.getProperty("metadata",y=>{l.destroy(),h(y.cardinality.value>0)})})}};return uT.ActorOptimizeQueryOperationPruneEmptySourceOperations=e,uT}var eX;function hfe(){return eX||(eX=1,(function(u){var n=vl&&vl.__createBinding||(Object.create?(function(i,t,e,r){r===void 0&&(r=e);var a=Object.getOwnPropertyDescriptor(t,e);(!a||("get"in a?!t.__esModule:a.writable||a.configurable))&&(a={enumerable:!0,get:function(){return t[e]}}),Object.defineProperty(i,r,a)}):(function(i,t,e,r){r===void 0&&(r=e),i[r]=t[e]})),o=vl&&vl.__exportStar||function(i,t){for(var e in i)e!=="default"&&!Object.prototype.hasOwnProperty.call(t,e)&&n(t,i,e)};Object.defineProperty(u,"__esModule",{value:!0}),o(ffe(),u)})(vl)),vl}var Tl={},oT={},tX;function pfe(){if(tX)return oT;tX=1,Object.defineProperty(oT,"__esModule",{value:!0}),oT.ActorHttpRetry=void 0;const u=Ti(),n=qe(),o=pe();let i=class Gl extends u.ActorHttp{constructor(e){super(e),this.activeDelays={},this.httpInvalidator=e.httpInvalidator,this.httpInvalidator.addInvalidateListener(r=>this.handleHttpInvalidateEvent(r)),this.mediatorHttp=e.mediatorHttp}async test(e){if(e.context.has(Gl.keyWrapped))return(0,o.failTest)(`${this.name} can only wrap a request once`);const r=e.context.get(n.KeysHttp.httpRetryCount);return!r||r<1?(0,o.failTest)(`${this.name} requires a retry count greater than zero to function`):(0,o.passTest)({time:0})}async run(e){const r=u.ActorHttp.getInputUrl(e.input),a=e.context.getSafe(n.KeysHttp.httpRetryCount)+1,c=e.context.get(n.KeysHttp.httpRetryDelayFallback)??0,s=e.context.get(n.KeysHttp.httpRetryDelayLimit),d=e.context.get(n.KeysHttp.httpRetryStatusCodes);for(let l=1;l<=a;l++){const f=r.host in this.activeDelays?this.activeDelays[r.host].date.getTime()-Date.now():c;if(s&&f>s){this.logWarn(e.context,"Requested delay exceeds the limit",()=>({url:r.href,delay:f,delayDate:this.activeDelays[r.host].date.toISOString(),delayLimit:s,currentAttempt:`${l} / ${a}`}));break}else f>0&&l>1&&(this.logDebug(e.context,"Delaying request",()=>({url:r.href,delay:f,currentAttempt:`${l} / ${a}`})),await Gl.sleep(f));const h=await this.mediatorHttp.mediate({...e,context:e.context.set(Gl.keyWrapped,!0)});if(h.ok)return h;if(d&&d.includes(h.status)){this.logDebug(e.context,"Status code in force retry list, forcing retry",()=>({url:r.href,status:h.status,statusText:h.statusText,currentAttempt:`${l} / ${a}`}));continue}if(h.status===504){this.logDebug(e.context,"Received proxy timeout",()=>({url:r.href,status:h.status,statusText:h.statusText,currentAttempt:`${l} / ${a}`}));continue}if(h.status===429||h.status===503||h.status===405&&h.headers.has("retry-after")){const p=h.headers.get("retry-after");if(p){const y=Gl.parseRetryAfterHeader(p);y?(r.host in this.activeDelays&&clearTimeout(this.activeDelays[r.host].timeout),this.activeDelays[r.host]={date:y,timeout:setTimeout(()=>delete this.activeDelays[r.host],y.getTime()-Date.now())}):this.logDebug(e.context,"Invalid Retry-After header value from server",()=>({url:r.href,status:h.status,statusText:h.statusText,retryAfterHeader:p,currentAttempt:`${l} / ${a}`}))}this.logDebug(e.context,"Server temporarily unavailable",()=>({url:r.href,status:h.status,statusText:h.statusText,currentAttempt:`${l} / ${a}`}));continue}if(h.status>=400&&h.status<500){this.logDebug(e.context,"Server reported client-side error",()=>({url:r.href,status:h.status,statusText:h.statusText,currentAttempt:`${l} / ${a}`}));break}if(h.status>=500&&h.status<600){this.logDebug(e.context,"Server-side error encountered, terminating",()=>({url:r.href,status:h.status,statusText:h.statusText,currentAttempt:`${l} / ${a}`}));break}this.logDebug(e.context,"Request failed",()=>({url:r.href,status:h.status,statusText:h.statusText,currentAttempt:`${l} / ${a}`}))}throw new Error(`Request failed: ${r.href}`)}static async sleep(e){e>0&&await new Promise(r=>setTimeout(r,e))}static parseRetryAfterHeader(e){if(Gl.numberRegex.test(e))return new Date(Date.now()+Number.parseInt(e,10)*1e3);if(Gl.dateRegex.test(e))return new Date(e)}handleHttpInvalidateEvent(e){const r=e.url?new URL(e.url).host:void 0;for(const a of Object.keys(this.activeDelays))(!r||a===r)&&(clearTimeout(this.activeDelays[a].timeout),delete this.activeDelays[a])}};return oT.ActorHttpRetry=i,i.dateRegex=/^(Mon|Tue|Wed|Thu|Fri|Sat|Sun), [0-9]{2} (Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec) [0-9]{4} [0-9]{2}:[0-9]{2}:[0-9]{2} GMT$/u,i.numberRegex=/^[0-9]+$/u,i.keyWrapped=new o.ActionContextKey("urn:comunica:actor-http-retry#wrapped"),oT}var rX;function yfe(){return rX||(rX=1,(function(u){var n=Tl&&Tl.__createBinding||(Object.create?(function(i,t,e,r){r===void 0&&(r=e);var a=Object.getOwnPropertyDescriptor(t,e);(!a||("get"in a?!t.__esModule:a.writable||a.configurable))&&(a={enumerable:!0,get:function(){return t[e]}}),Object.defineProperty(i,r,a)}):(function(i,t,e,r){r===void 0&&(r=e),i[r]=t[e]})),o=Tl&&Tl.__exportStar||function(i,t){for(var e in i)e!=="default"&&!Object.prototype.hasOwnProperty.call(t,e)&&n(t,i,e)};Object.defineProperty(u,"__esModule",{value:!0}),o(pfe(),u)})(Tl)),Tl}var wl={},sT={},nX;function bfe(){if(nX)return sT;nX=1,Object.defineProperty(sT,"__esModule",{value:!0}),sT.ActorHttpLimitRate=void 0;const u=Ti(),n=pe();let o=class Nx extends u.ActorHttp{constructor(t){super(t),this.mediatorHttp=t.mediatorHttp,this.httpInvalidator=t.httpInvalidator,this.httpInvalidator.addInvalidateListener(e=>this.handleHttpInvalidateEvent(e)),this.correctionMultiplier=t.correctionMultiplier,this.failureMultiplier=t.failureMultiplier,this.limitByDefault=t.limitByDefault,this.allowOverlap=t.allowOverlap,this.hostData=new Map}async test(t){return t.context.has(Nx.keyWrapped)?(0,n.failTest)(`${this.name} can only wrap a request once`):(0,n.passTest)({time:0})}async run(t){const e=u.ActorHttp.getInputUrl(t.input);let r=this.hostData.get(e.host);r||(r={latestRequestTimestamp:0,rateLimited:this.limitByDefault,requestInterval:Number.NEGATIVE_INFINITY},this.hostData.set(e.host,r));const a=Date.now();let c=0;r.rateLimited&&(c=Math.max(0,r.latestRequestTimestamp+r.requestInterval-a)),r.latestRequestTimestamp=a+(this.allowOverlap?0:1)*c,c>0&&(this.logDebug(t.context,"Delaying request",()=>({url:e.href,requestInterval:r.requestInterval,currentDelay:c})),await new Promise(d=>setTimeout(d,c)));const s=d=>{const l=(d?1:this.failureMultiplier)*(Date.now()-a-c);r.requestInterval<0?r.requestInterval=Math.round(l*this.correctionMultiplier):r.requestInterval+=Math.round(this.correctionMultiplier*(l-r.requestInterval)),!d&&!r.rateLimited&&(this.logDebug(t.context,"Marking host as rate-limited",()=>({host:e.host})),r.rateLimited=!0)};try{const d=await this.mediatorHttp.mediate({...t,context:t.context.set(Nx.keyWrapped,!0)});return s(d.ok),d}catch(d){throw s(!1),d}}handleHttpInvalidateEvent(t){if(t.url){const e=new URL(t.url).host;this.hostData.delete(e)}else this.hostData.clear()}};return sT.ActorHttpLimitRate=o,o.keyWrapped=new n.ActionContextKey("urn:comunica:actor-http-limit-rate#wrapped"),sT}var iX;function _fe(){return iX||(iX=1,(function(u){var n=wl&&wl.__createBinding||(Object.create?(function(i,t,e,r){r===void 0&&(r=e);var a=Object.getOwnPropertyDescriptor(t,e);(!a||("get"in a?!t.__esModule:a.writable||a.configurable))&&(a={enumerable:!0,get:function(){return t[e]}}),Object.defineProperty(i,r,a)}):(function(i,t,e,r){r===void 0&&(r=e),i[r]=t[e]})),o=wl&&wl.__exportStar||function(i,t){for(var e in i)e!=="default"&&!Object.prototype.hasOwnProperty.call(t,e)&&n(t,i,e)};Object.defineProperty(u,"__esModule",{value:!0}),o(bfe(),u)})(wl)),wl}var Sl={},cT={},aX;function gfe(){if(aX)return cT;aX=1,Object.defineProperty(cT,"__esModule",{value:!0}),cT.ActorQuerySourceIdentifySerialized=void 0;const u=zv(),n=pe(),o=TG(),i=Pt();let t=class extends u.ActorQuerySourceIdentify{constructor(r){super(r)}async test(r){return this.isStringSource(r.querySourceUnidentified)?(0,n.passTestVoid)():(0,n.failTest)(`${this.name} requires a single query source with serialized type to be present in the context.`)}async run(r){return await this.mediatorQuerySourceIdentify.mediate({querySourceUnidentified:{type:"rdfjs",value:await this.getRdfSource(r.context,r.querySourceUnidentified),context:r.querySourceUnidentified.context},context:r.context})}async getRdfSource(r,a){const c=new i.Readable({objectMode:!0});c._read=()=>{},c.push(a.value),c.push(null);const s={context:r,handle:{metadata:{baseIRI:a.baseIRI},data:c,context:r},handleMediaType:a.mediaType},d=await this.mediatorRdfParse.mediate(s);return await(0,o.storeStream)(d.handle.data)}isStringSource(r){return"type"in r?r.type==="serialized":typeof r.value!="string"?!1:"mediaType"in r}};return cT.ActorQuerySourceIdentifySerialized=t,cT}var uX;function mfe(){return uX||(uX=1,(function(u){var n=Sl&&Sl.__createBinding||(Object.create?(function(i,t,e,r){r===void 0&&(r=e);var a=Object.getOwnPropertyDescriptor(t,e);(!a||("get"in a?!t.__esModule:a.writable||a.configurable))&&(a={enumerable:!0,get:function(){return t[e]}}),Object.defineProperty(i,r,a)}):(function(i,t,e,r){r===void 0&&(r=e),i[r]=t[e]})),o=Sl&&Sl.__exportStar||function(i,t){for(var e in i)e!=="default"&&!Object.prototype.hasOwnProperty.call(t,e)&&n(t,i,e)};Object.defineProperty(u,"__esModule",{value:!0}),o(gfe(),u)})(Sl)),Sl}var Ol={},dT={},oX;function vfe(){if(oX)return dT;oX=1,Object.defineProperty(dT,"__esModule",{value:!0}),dT.ActorRdfJoinMultiBindSource=void 0;const u=zr(),n=qe(),o=pe(),i=Wi(),t=_t(),e=pt(),r=st();let a=class extends u.ActorRdfJoin{constructor(s){super(s,{logicalType:"inner",physicalName:"bind-source",canHandleUndefs:!0})}async getOutput(s,d){const l=s.context.getSafe(n.KeysInitQuery.dataFactory),f=new r.Factory(l),h=d.entriesSorted;this.logDebug(s.context,"First entry for Bind Join Source: ",()=>({entry:h[0].operation,cardinality:h[0].metadata.cardinality,order:h[0].metadata.order,availableOrders:h[0].metadata.availableOrders}));for(const[v,S]of h.entries())v!==0&&S.output.bindingsStream.close();const p=h[0].output,y=h[0].metadata,_=[...h];_.splice(0,1);const b=(0,t.getOperationSource)(_[0].operation),m=this.createOperationFromEntries(f,_),g=new i.ChunkedIterator(p.bindingsStream,this.blockSize,{autoStart:!1});return{result:{type:"bindings",bindingsStream:new e.UnionIterator(g.map(v=>b.source.queryBindings(m,b.context?s.context.merge(b.context):s.context,{joinBindings:{bindings:v,metadata:y}}))),metadata:()=>this.constructResultMetadata(h,h.map(v=>v.metadata),s.context)},physicalPlanMetadata:{bindIndex:d.entriesUnsorted.indexOf(h[0])}}}async sortJoinEntries(s,d){const l=await u.ActorRdfJoin.sortJoinEntries(this.mediatorJoinEntriesSort,s,d);return l.isFailed()?l:(s=l.get(),s=s.sort((f,h)=>f.operationModified&&!h.operationModified?-1:0),(0,o.passTest)(s))}async getJoinCoefficients(s,d){let{metadatas:l}=d;const f=s.context.getSafe(n.KeysInitQuery.dataFactory),h=new r.Factory(f),p=s.entries.map((w,E)=>({...w,metadata:l[E]})),y=await this.sortJoinEntries(p,s.context);if(y.isFailed())return y;const _=y.get();l=_.map(w=>w.metadata);const b=u.ActorRdfJoin.getRequestInitialTimes(l),m=u.ActorRdfJoin.getRequestItemTimes(l),g=[..._];[...b],[...m],g.splice(0,1);const T=g.map(w=>(0,t.getOperationSource)(w.operation));if(T.some(w=>!w))return(0,o.failTest)(`Actor ${this.name} can not bind on remaining operations without source annotation`);if(T.some(w=>w!==T[0]))return(0,o.failTest)(`Actor ${this.name} can not bind on remaining operations with non-equal source annotation`);const v=T[0],S=this.createOperationFromEntries(h,g),F=await v.source.getSelectorShape(s.context);if(!(0,t.doesShapeAcceptOperation)(F,S,{joinBindings:!0}))return(0,o.failTest)(`Actor ${this.name} detected a source that can not handle passing down join bindings`);const M=await Promise.all(g.map(async w=>(await this.mediatorJoinSelectivity.mediate({entries:[_[0],w],context:s.context})).selectivity*this.selectivityModifier)),O=g.map((w,E)=>w.metadata.cardinality.value*M[E]).reduce((w,E)=>w+E,0);return(0,o.passTestWithSideData)({iterations:1,persistedItems:l[0].cardinality.value,blockingItems:l[0].cardinality.value,requestTime:b[0]+l[0].cardinality.value*m[0]+b[1]+O*m[1]},{...d,entriesUnsorted:p,entriesSorted:_})}createOperationFromEntries(s,d){return d.length===1?d[0].operation:s.createJoin(d.map(l=>l.operation),!0)}};return dT.ActorRdfJoinMultiBindSource=a,dT}var sX;function Tfe(){return sX||(sX=1,(function(u){var n=Ol&&Ol.__createBinding||(Object.create?(function(i,t,e,r){r===void 0&&(r=e);var a=Object.getOwnPropertyDescriptor(t,e);(!a||("get"in a?!t.__esModule:a.writable||a.configurable))&&(a={enumerable:!0,get:function(){return t[e]}}),Object.defineProperty(i,r,a)}):(function(i,t,e,r){r===void 0&&(r=e),i[r]=t[e]})),o=Ol&&Ol.__exportStar||function(i,t){for(var e in i)e!=="default"&&!Object.prototype.hasOwnProperty.call(t,e)&&n(t,i,e)};Object.defineProperty(u,"__esModule",{value:!0}),o(vfe(),u)})(Ol)),Ol}var Al={},lT={},cX;function wfe(){if(cX)return lT;cX=1,Object.defineProperty(lT,"__esModule",{value:!0}),lT.ActorOptimizeQueryOperationJoinConnected=void 0;const u=gn(),n=qe(),o=pe(),i=st();let t=class $w extends u.ActorOptimizeQueryOperation{async test(r){return(0,o.passTestVoid)()}async run(r){const a=r.context.getSafe(n.KeysInitQuery.dataFactory),c=new i.Factory(a);return{operation:i.Util.mapOperation(r.operation,{join(d,l){return{recurse:!1,result:$w.cluster(d,l)}}},c),context:r.context}}static cluster(r,a){const c=r.input.map(f=>({inScopeVariables:Object.fromEntries(i.Util.inScopeVariables(f).map(h=>[h.value,!0])),entries:[f]}));let s,d=c;do s=d,d=$w.clusterIteration(s);while(s.length!==d.length);const l=d.map(f=>f.entries.length===1?f.entries[0]:a.createJoin(f.entries));return l.length===1?l[0]:a.createJoin(l,!1)}static clusterIteration(r){const a=[];for(const c of r){let s=!1;for(const d of a)if($w.haveOverlappingVariables(c.inScopeVariables,d.inScopeVariables)){d.entries=[...d.entries,...c.entries],d.inScopeVariables={...d.inScopeVariables,...c.inScopeVariables},s=!0;break}s||a.push({inScopeVariables:c.inScopeVariables,entries:c.entries})}return a}static haveOverlappingVariables(r,a){for(const c of Object.keys(r))if(a[c])return!0;return!1}};return lT.ActorOptimizeQueryOperationJoinConnected=t,lT}var dX;function Sfe(){return dX||(dX=1,(function(u){var n=Al&&Al.__createBinding||(Object.create?(function(i,t,e,r){r===void 0&&(r=e);var a=Object.getOwnPropertyDescriptor(t,e);(!a||("get"in a?!t.__esModule:a.writable||a.configurable))&&(a={enumerable:!0,get:function(){return t[e]}}),Object.defineProperty(i,r,a)}):(function(i,t,e,r){r===void 0&&(r=e),i[r]=t[e]})),o=Al&&Al.__exportStar||function(i,t){for(var e in i)e!=="default"&&!Object.prototype.hasOwnProperty.call(t,e)&&n(t,i,e)};Object.defineProperty(u,"__esModule",{value:!0}),o(wfe(),u)})(Al)),Al}var El={},fT={},lX;function Ofe(){if(lX)return fT;lX=1,Object.defineProperty(fT,"__esModule",{value:!0}),fT.ActorOptimizeQueryOperationBgpToJoin=void 0;const u=gn(),n=qe(),o=pe(),i=st();let t=class extends u.ActorOptimizeQueryOperation{async test(r){return(0,o.passTestVoid)()}async run(r){const a=r.context.getSafe(n.KeysInitQuery.dataFactory),c=new i.Factory(a);return{operation:i.Util.mapOperation(r.operation,{bgp(d,l){return{recurse:!1,result:l.createJoin(d.patterns)}}},c),context:r.context}}};return fT.ActorOptimizeQueryOperationBgpToJoin=t,fT}var fX;function Afe(){return fX||(fX=1,(function(u){var n=El&&El.__createBinding||(Object.create?(function(i,t,e,r){r===void 0&&(r=e);var a=Object.getOwnPropertyDescriptor(t,e);(!a||("get"in a?!t.__esModule:a.writable||a.configurable))&&(a={enumerable:!0,get:function(){return t[e]}}),Object.defineProperty(i,r,a)}):(function(i,t,e,r){r===void 0&&(r=e),i[r]=t[e]})),o=El&&El.__exportStar||function(i,t){for(var e in i)e!=="default"&&!Object.prototype.hasOwnProperty.call(t,e)&&n(t,i,e)};Object.defineProperty(u,"__esModule",{value:!0}),o(Ofe(),u)})(El)),El}var xl={},hT={},hX;function Efe(){if(hX)return hT;hX=1,Object.defineProperty(hT,"__esModule",{value:!0}),hT.ActorOptimizeQueryOperationJoinBgp=void 0;const u=gn(),n=qe(),o=pe(),i=st();let t=class extends u.ActorOptimizeQueryOperation{async test(r){return(0,o.passTestVoid)()}async run(r){const a=r.context.getSafe(n.KeysInitQuery.dataFactory),c=new i.Factory(a);return{operation:i.Util.mapOperation(r.operation,{join(d,l){return d.input.every(f=>f.type==="bgp")?{recurse:!1,result:l.createBgp(d.input.flatMap(f=>f.patterns))}:{recurse:!1,result:d}}},c),context:r.context}}};return hT.ActorOptimizeQueryOperationJoinBgp=t,hT}var pX;function xfe(){return pX||(pX=1,(function(u){var n=xl&&xl.__createBinding||(Object.create?(function(i,t,e,r){r===void 0&&(r=e);var a=Object.getOwnPropertyDescriptor(t,e);(!a||("get"in a?!t.__esModule:a.writable||a.configurable))&&(a={enumerable:!0,get:function(){return t[e]}}),Object.defineProperty(i,r,a)}):(function(i,t,e,r){r===void 0&&(r=e),i[r]=t[e]})),o=xl&&xl.__exportStar||function(i,t){for(var e in i)e!=="default"&&!Object.prototype.hasOwnProperty.call(t,e)&&n(t,i,e)};Object.defineProperty(u,"__esModule",{value:!0}),o(Efe(),u)})(xl)),xl}var Rl={},pT={},yX;function Rfe(){if(yX)return pT;yX=1,Object.defineProperty(pT,"__esModule",{value:!0}),pT.ActorOptimizeQueryOperationAssignSourcesExhaustive=void 0;const u=gn(),n=cE(),o=qe(),i=pe(),t=_t(),e=st();let r=class extends u.ActorOptimizeQueryOperation{constructor(c){super(c)}async test(c){return(0,i.passTestVoid)()}async run(c){const s=c.context.getSafe(o.KeysInitQuery.dataFactory),d=new e.Factory(s),l=c.context.get(o.KeysQueryOperation.querySources)??[];if(l.length===0)return{operation:c.operation,context:c.context};if(l.length===1){const f=l[0],h=c.context.get(o.KeysRdfUpdateQuads.destination);if(!h||f.source.referenceValue===(0,n.getDataDestinationValue)(h))try{const p=await f.source.getSelectorShape(c.context);if((0,t.doesShapeAcceptOperation)(p,c.operation))return{operation:(0,t.assignOperationSource)(c.operation,f),context:c.context}}catch{}}return{operation:this.assignExhaustive(d,c.operation,l),context:c.context.delete(o.KeysInitQuery.queryString)}}assignExhaustive(c,s,d){const l=this;return e.Util.mapOperation(s,{[e.Algebra.types.PATTERN](f,h){return d.length===1?{result:(0,t.assignOperationSource)(f,d[0]),recurse:!1}:{result:h.createUnion(d.map(p=>(0,t.assignOperationSource)(f,p))),recurse:!1}},[e.Algebra.types.LINK](f,h){return d.length===1?{result:(0,t.assignOperationSource)(f,d[0]),recurse:!1}:{result:h.createAlt(d.map(p=>(0,t.assignOperationSource)(f,p))),recurse:!1}},[e.Algebra.types.NPS](f,h){return d.length===1?{result:(0,t.assignOperationSource)(f,d[0]),recurse:!1}:{result:h.createAlt(d.map(p=>(0,t.assignOperationSource)(f,p))),recurse:!1}},[e.Algebra.types.SERVICE](f){return{result:f,recurse:!1}},[e.Algebra.types.CONSTRUCT](f,h){return{result:h.createConstruct(l.assignExhaustive(c,f.input,d),f.template),recurse:!1}},[e.Algebra.types.DELETE_INSERT](f,h){return{result:h.createDeleteInsert(f.delete,f.insert,f.where?l.assignExhaustive(c,f.where,d):void 0),recurse:!1}}},c)}};return pT.ActorOptimizeQueryOperationAssignSourcesExhaustive=r,pT}var bX;function Ffe(){return bX||(bX=1,(function(u){var n=Rl&&Rl.__createBinding||(Object.create?(function(i,t,e,r){r===void 0&&(r=e);var a=Object.getOwnPropertyDescriptor(t,e);(!a||("get"in a?!t.__esModule:a.writable||a.configurable))&&(a={enumerable:!0,get:function(){return t[e]}}),Object.defineProperty(i,r,a)}):(function(i,t,e,r){r===void 0&&(r=e),i[r]=t[e]})),o=Rl&&Rl.__exportStar||function(i,t){for(var e in i)e!=="default"&&!Object.prototype.hasOwnProperty.call(t,e)&&n(t,i,e)};Object.defineProperty(u,"__esModule",{value:!0}),o(Rfe(),u)})(Rl)),Rl}var Fl={},yT={},_X;function Ife(){if(_X)return yT;_X=1,Object.defineProperty(yT,"__esModule",{value:!0}),yT.ActorOptimizeQueryOperationDescribeToConstructsSubject=void 0;const u=gn(),n=qe(),o=pe(),i=st();let t=class extends u.ActorOptimizeQueryOperation{constructor(r){super(r)}async test(r){return r.operation.type!==i.Algebra.types.DESCRIBE?(0,o.failTest)(`Actor ${this.name} only supports describe operations, but got ${r.operation.type}`):(0,o.passTest)(!0)}async run(r){const a=r.context.getSafe(n.KeysInitQuery.dataFactory),c=new i.Factory(a),s=r.operation,d=s.terms.filter(f=>f.termType!=="Variable").map(f=>{const h=[a.quad(f,a.variable("__predicate"),a.variable("__object"))];return h.forEach(y=>y.type="pattern"),{input:{type:i.Algebra.types.BGP,patterns:h},template:h,type:"construct"}});if(d.length!==s.terms.length){let f=[];s.terms.filter(h=>h.termType==="Variable").forEach((h,p)=>{const y=[a.quad(h,a.variable(`__predicate${p}`),a.variable(`__object${p}`))];y.forEach(_=>_.type="pattern"),f=[...f,...y]}),d.push({input:{type:i.Algebra.types.JOIN,input:[s.input,{type:i.Algebra.types.BGP,patterns:f}]},template:f,type:i.Algebra.types.CONSTRUCT})}return{operation:c.createUnion(d,!1),context:r.context}}};return yT.ActorOptimizeQueryOperationDescribeToConstructsSubject=t,yT}var gX;function Pfe(){return gX||(gX=1,(function(u){var n=Fl&&Fl.__createBinding||(Object.create?(function(i,t,e,r){r===void 0&&(r=e);var a=Object.getOwnPropertyDescriptor(t,e);(!a||("get"in a?!t.__esModule:a.writable||a.configurable))&&(a={enumerable:!0,get:function(){return t[e]}}),Object.defineProperty(i,r,a)}):(function(i,t,e,r){r===void 0&&(r=e),i[r]=t[e]})),o=Fl&&Fl.__exportStar||function(i,t){for(var e in i)e!=="default"&&!Object.prototype.hasOwnProperty.call(t,e)&&n(t,i,e)};Object.defineProperty(u,"__esModule",{value:!0}),o(Ife(),u)})(Fl)),Fl}var WE,mX;function Dfe(){return mX||(mX=1,WE=function(u){const n=new(QK()).LoggerVoid,o=new(pe()).Bus({name:"https://linkedsoftwaredependencies.org/bundles/npm/@comunica/bus-init/^4.0.0/components/ActorInit.jsonld#ActorInit_default_bus"}),i=new(pe()).Bus({name:"https://linkedsoftwaredependencies.org/bundles/npm/@comunica/bus-context-preprocess/^4.0.0/components/ActorContextPreprocess.jsonld#ActorContextPreprocess_default_bus"}),t=new(pe()).Bus({name:"https://linkedsoftwaredependencies.org/bundles/npm/@comunica/bus-hash-bindings/^4.0.0/components/ActorHashBindings.jsonld#ActorHashBindings_default_bus"}),e=new(pe()).Bus({name:"https://linkedsoftwaredependencies.org/bundles/npm/@comunica/bus-hash-quads/^4.0.0/components/ActorHashQuads.jsonld#ActorHashQuads_default_bus"}),r=new(pe()).Bus({name:"https://linkedsoftwaredependencies.org/bundles/npm/@comunica/bus-optimize-query-operation/^4.0.0/components/ActorOptimizeQueryOperation.jsonld#ActorOptimizeQueryOperation_default_bus"}),a=new(pe()).Bus({name:"https://linkedsoftwaredependencies.org/bundles/npm/@comunica/bus-query-parse/^4.0.0/components/ActorQueryParse.jsonld#ActorQueryParse_default_bus"}),c=new(pe()).Bus({name:"https://linkedsoftwaredependencies.org/bundles/npm/@comunica/bus-query-result-serialize/^4.0.0/components/ActorQueryResultSerialize.jsonld#ActorQueryResultSerialize_default_bus"}),s=new(pe()).Bus({name:"https://linkedsoftwaredependencies.org/bundles/npm/@comunica/bus-query-source-identify-hypermedia/^4.0.0/components/ActorQuerySourceIdentifyHypermedia.jsonld#ActorQuerySourceIdentifyHypermedia_default_bus"}),d=new(pe()).Bus({name:"https://linkedsoftwaredependencies.org/bundles/npm/@comunica/bus-dereference/^4.0.0/components/ActorDereference.jsonld#ActorDereference_default_bus"}),l=new(pe()).Bus({name:"https://linkedsoftwaredependencies.org/bundles/npm/@comunica/bus-dereference-rdf/^4.0.0/components/ActorDereferenceRdf.jsonld#ActorDereferenceRdf_default_bus"}),f=new(pe()).Bus({name:"https://linkedsoftwaredependencies.org/bundles/npm/@comunica/bus-rdf-join-entries-sort/^4.0.0/components/ActorRdfJoinEntriesSort.jsonld#ActorRdfJoinEntriesSort_default_bus"}),h=new(pe()).Bus({name:"https://linkedsoftwaredependencies.org/bundles/npm/@comunica/bus-rdf-join-selectivity/^4.0.0/components/ActorRdfJoinSelectivity.jsonld#ActorRdfJoinSelectivity_default_bus"}),p=new(pe()).Bus({name:"https://linkedsoftwaredependencies.org/bundles/npm/@comunica/bus-rdf-metadata/^4.0.0/components/ActorRdfMetadata.jsonld#ActorRdfMetadata_default_bus"}),y=new(pe()).Bus({name:"https://linkedsoftwaredependencies.org/bundles/npm/@comunica/bus-rdf-metadata-accumulate/^4.0.0/components/ActorRdfMetadataAccumulate.jsonld#ActorRdfMetadataAccumulate_default_bus"}),_=new(pe()).Bus({name:"https://linkedsoftwaredependencies.org/bundles/npm/@comunica/bus-rdf-metadata-extract/^4.0.0/components/ActorRdfMetadataExtract.jsonld#ActorRdfMetadataExtract_default_bus"}),b=new(pe()).Bus({name:"https://linkedsoftwaredependencies.org/bundles/npm/@comunica/bus-rdf-parse/^4.0.0/components/ActorRdfParse.jsonld#ActorRdfParse_default_bus"}),m=new(pe()).Bus({name:"https://linkedsoftwaredependencies.org/bundles/npm/@comunica/bus-rdf-parse-html/^4.0.0/components/ActorRdfParseHtml.jsonld#ActorRdfParseHtml_default_bus"}),g=new(pe()).Bus({name:"https://linkedsoftwaredependencies.org/bundles/npm/@comunica/bus-rdf-resolve-hypermedia-links/^4.0.0/components/ActorRdfResolveHypermediaLinks.jsonld#ActorRdfResolveHypermediaLinks_default_bus"}),T=new(pe()).Bus({name:"https://linkedsoftwaredependencies.org/bundles/npm/@comunica/bus-rdf-resolve-hypermedia-links-queue/^4.0.0/components/ActorRdfResolveHypermediaLinksQueue.jsonld#ActorRdfResolveHypermediaLinksQueue_default_bus"}),v=new(pe()).Bus({name:"https://linkedsoftwaredependencies.org/bundles/npm/@comunica/bus-rdf-serialize/^4.0.0/components/ActorRdfSerialize.jsonld#ActorRdfSerialize_default_bus"}),S=new(pe()).Bus({name:"https://linkedsoftwaredependencies.org/bundles/npm/@comunica/bus-rdf-update-hypermedia/^4.0.0/components/ActorRdfUpdateHypermedia.jsonld#ActorRdfUpdateHypermedia_default_bus"}),F=new(pe()).Bus({name:"https://linkedsoftwaredependencies.org/bundles/npm/@comunica/bus-rdf-update-quads/^4.0.0/components/ActorRdfUpdateQuads.jsonld#ActorRdfUpdateQuads_default_bus"}),M=new(pe()).Bus({name:"https://linkedsoftwaredependencies.org/bundles/npm/@comunica/bus-bindings-aggregator-factory/^4.0.0/components/ActorBindingsAggregatorFactory.jsonld#ActorBindingsAggregatorFactory_default_bus"}),O=new(pe()).Bus({name:"https://linkedsoftwaredependencies.org/bundles/npm/@comunica/bus-expression-evaluator-factory/^4.0.0/components/ActorExpressionEvaluatorFactory.jsonld#ActorExpressionEvaluatorFactory_default_bus"}),w=new(Te()).BusFunctionFactory({name:"https://linkedsoftwaredependencies.org/bundles/npm/@comunica/bus-function-factory/^4.0.0/components/ActorFunctionFactory.jsonld#ActorFunctionFactory_default_bus"}),E=new(pe()).Bus({name:"https://linkedsoftwaredependencies.org/bundles/npm/@comunica/bus-http/^4.0.0/components/ActorHttp.jsonld#ActorHttp_default_bus"}),R=new(pe()).Bus({name:"https://linkedsoftwaredependencies.org/bundles/npm/@comunica/bus-http/^4.0.0/components/ActorHttp.jsonld#ActorHttp_fallback_bus"}),D=new(qt()).BusQueryOperation({name:"https://linkedsoftwaredependencies.org/bundles/npm/@comunica/bus-query-operation/^4.0.0/components/ActorQueryOperation.jsonld#ActorQueryOperation_default_bus"}),B=new(pe()).Bus({name:"https://linkedsoftwaredependencies.org/bundles/npm/@comunica/bus-query-process/^4.0.0/components/ActorQueryProcess.jsonld#ActorQueryProcess_default_bus"}),C=new(pe()).Bus({name:"https://linkedsoftwaredependencies.org/bundles/npm/@comunica/bus-query-source-identify/^4.0.0/components/ActorQuerySourceIdentify.jsonld#ActorQuerySourceIdentify_default_bus"}),$=new(pe()).Bus({name:"https://linkedsoftwaredependencies.org/bundles/npm/@comunica/bus-rdf-join/^4.0.0/components/ActorRdfJoin.jsonld#ActorRdfJoin_default_bus"}),Z=new(pe()).Bus({name:"https://linkedsoftwaredependencies.org/bundles/npm/@comunica/bus-term-comparator-factory/^4.0.0/components/ActorTermComparatorFactory.jsonld#ActorTermComparatorFactory_default_bus"}),ee=new(pe()).Bus({name:"https://linkedsoftwaredependencies.org/bundles/npm/@comunica/bus-http-invalidate/^4.0.0/components/ActorHttpInvalidate.jsonld#ActorHttpInvalidate_default_bus"}),ce=new(pe()).Bus({name:"https://linkedsoftwaredependencies.org/bundles/npm/@comunica/bus-merge-bindings-context/^4.0.0/components/ActorMergeBindingsContext.jsonld#ActorMergeBindingsContext_default_bus"});new(Ok()).ActorContextPreprocessConvertShortcuts({contextKeyShortcuts:{baseIRI:"@comunica/actor-init-query:baseIRI",dataFactory:"@comunica/actor-init-query:dataFactory",datetime:"@comunica/actor-http-memento:datetime",destination:"@comunica/bus-rdf-update-quads:destination",distinctConstruct:"@comunica/actor-init-query:distinctConstruct",explain:"@comunica/actor-init-query:explain",extensionFunctionCreator:"@comunica/actor-init-query:extensionFunctionCreator",extensionFunctions:"@comunica/actor-init-query:extensionFunctions",fetch:"@comunica/bus-http:fetch",functionArgumentsCache:"@comunica/actor-init-query:functionArgumentsCache",httpAuth:"@comunica/bus-http:auth",httpBodyTimeout:"@comunica/bus-http:http-body-timeout",httpIncludeCredentials:"@comunica/bus-http:include-credentials",httpProxyHandler:"@comunica/actor-http-proxy:httpProxyHandler",httpRetryCount:"@comunica/bus-http:http-retry-count",httpRetryDelayFallback:"@comunica/bus-http:http-retry-delay-fallback",httpRetryDelayLimit:"@comunica/bus-http:http-retry-delay-limit",httpTimeout:"@comunica/bus-http:http-timeout",initialBindings:"@comunica/actor-init-query:initialBindings",invalidateCache:"@comunica/actor-init-query:invalidateCache",lenient:"@comunica/actor-init-query:lenient",log:"@comunica/core:log",queryFormat:"@comunica/actor-init-query:queryFormat",queryTimestamp:"@comunica/actor-init-query:queryTimestamp",queryTimestampHighResolution:"@comunica/actor-init-query:queryTimestampHighResolution",readOnly:"@comunica/bus-query-operation:readOnly",recoverBrokenLinks:"@comunica/bus-http-wayback:recover-broken-links",sources:"@comunica/actor-init-query:querySourcesUnidentified",traverse:"@comunica/bus-query-source-identify:traverse",unionDefaultGraph:"@comunica/bus-query-operation:unionDefaultGraph"},name:"urn:comunica:default:context-preprocess/actors#convert-shortcuts",bus:i,busFailMessage:"Context preprocessing failed"}),new(Ek()).ActorContextPreprocessSetDefaults({logger:n,name:"urn:comunica:default:context-preprocess/actors#set-defaults",bus:i,busFailMessage:"Context preprocessing failed"}),new(Rk()).ActorContextPreprocessSourceToDestination({name:"urn:comunica:default:context-preprocess/actors#source-to-destination",bus:i,busFailMessage:"Context preprocessing failed"});const G=new(XI()).ActorContextPreprocessQuerySourceSkolemize({name:"urn:comunica:default:context-preprocess/actors#query-source-skolemize",bus:i,busFailMessage:"Context preprocessing failed"}),fe=new(kI()).MediatorCombinePipeline({name:"urn:comunica:default:context-preprocess/mediators#main",bus:i});new(Ck()).ActorHashBindingsMurmur({name:"urn:comunica:default:hash-bindings/actors#murmur",bus:t,busFailMessage:"Failed to obtaining hash functions for bindings"});const me=new(_r()).MediatorRace({name:"urn:comunica:default:hash-bindings/mediators#main",bus:t});new(Qk()).ActorHashQuadsMurmur({name:"urn:comunica:default:hash-quads/actors#murmur",bus:e,busFailMessage:"Failed to obtaining hash functions for quads"}),new(zk()).ActorOptimizeQueryOperationRewriteCopy({name:"urn:comunica:default:optimize-query-operation/actors#rewrite-copy",bus:r,busFailMessage:"Query optimization failed: none of the configured actors were able to optimize"}),new(Jk()).ActorOptimizeQueryOperationRewriteMove({name:"urn:comunica:default:optimize-query-operation/actors#rewrite-move",bus:r,busFailMessage:"Query optimization failed: none of the configured actors were able to optimize"}),new(kk()).ActorOptimizeQueryOperationRewriteAdd({name:"urn:comunica:default:optimize-query-operation/actors#rewrite-add",bus:r,busFailMessage:"Query optimization failed: none of the configured actors were able to optimize"});const ye=new(rW()).ActorOptimizeQueryOperationGroupSources({name:"urn:comunica:default:optimize-query-operation/actors#group-sources",bus:r,busFailMessage:"Query optimization failed: none of the configured actors were able to optimize"});new(iW()).ActorOptimizeQueryOperationConstructDistinct({name:"urn:comunica:default:optimize-query-operation/actors#construct-distinct",bus:r,busFailMessage:"Query optimization failed: none of the configured actors were able to optimize"});const re=new(kI()).MediatorCombinePipeline({filterFailures:!0,name:"urn:comunica:default:optimize-query-operation/mediators#main",bus:r});new(oW()).ActorQueryParseSparql({prefixes:{dbpedia:"http://dbpedia.org/resource/","dbpedia-owl":"http://dbpedia.org/ontology/",dbpprop:"http://dbpedia.org/property/",dc:"http://purl.org/dc/terms/",dc11:"http://purl.org/dc/elements/1.1/",dcterms:"http://purl.org/dc/terms/",foaf:"http://xmlns.com/foaf/0.1/",geo:"http://www.w3.org/2003/01/geo/wgs84_pos#",owl:"http://www.w3.org/2002/07/owl#",rdf:"http://www.w3.org/1999/02/22-rdf-syntax-ns#",rdfs:"http://www.w3.org/2000/01/rdf-schema#",schema:"http://schema.org/",skos:"http://www.w3.org/2008/05/skos#",xsd:"http://www.w3.org/2001/XMLSchema#"},name:"urn:comunica:default:query-parse/actors#sparql",bus:a,busFailMessage:'Query parsing failed: none of the configured parsers were able to the query "${action.query}"'}),new(LY()).ActorQueryParseGraphql({name:"urn:comunica:default:query-parse/actors#graphql",bus:a,busFailMessage:'Query parsing failed: none of the configured parsers were able to the query "${action.query}"'});const xe=new(_r()).MediatorRace({name:"urn:comunica:default:query-parse/mediators#main",bus:a});new(XY()).ActorQueryResultSerializeJson({mediaTypePriorities:{"application/json":1},mediaTypeFormats:{"application/json":"https://comunica.linkeddatafragments.org/#results_JSON"},name:"urn:comunica:default:query-result-serialize/actors#json",bus:c,busFailMessage:"Query result serialization failed: none of the configured actors were able to serialize for type ${action.handle.type}"}),new(KY()).ActorQueryResultSerializeSimple({mediaTypePriorities:{simple:.9},mediaTypeFormats:{simple:"https://comunica.linkeddatafragments.org/#results_simple"},name:"urn:comunica:default:query-result-serialize/actors#simple",bus:c,busFailMessage:"Query result serialization failed: none of the configured actors were able to serialize for type ${action.handle.type}"}),new(WY()).ActorQueryResultSerializeSparqlCsv({mediaTypePriorities:{"text/csv":.75},mediaTypeFormats:{"text/csv":"http://www.w3.org/ns/formats/SPARQL_Results_CSV"},name:"urn:comunica:default:query-result-serialize/actors#csv",bus:c,busFailMessage:"Query result serialization failed: none of the configured actors were able to serialize for type ${action.handle.type}"}),new(eZ()).ActorQueryResultSerializeSparqlTsv({mediaTypePriorities:{"text/tab-separated-values":.75},mediaTypeFormats:{"text/tab-separated-values":"http://www.w3.org/ns/formats/SPARQL_Results_TSV"},name:"urn:comunica:default:query-result-serialize/actors#sparql-tsv",bus:c,busFailMessage:"Query result serialization failed: none of the configured actors were able to serialize for type ${action.handle.type}"}),new(nZ()).ActorQueryResultSerializeSparqlXml({mediaTypePriorities:{"application/sparql-results+xml":.8},mediaTypeFormats:{"application/sparql-results+xml":"http://www.w3.org/ns/formats/SPARQL_Results_XML"},name:"urn:comunica:default:query-result-serialize/actors#sparql-xml",bus:c,busFailMessage:"Query result serialization failed: none of the configured actors were able to serialize for type ${action.handle.type}"}),new(aZ()).ActorQueryResultSerializeTable({columnWidth:50,mediaTypePriorities:{table:.6},mediaTypeFormats:{table:"https://comunica.linkeddatafragments.org/#results_table"},name:"urn:comunica:default:query-result-serialize/actors#table",bus:c,busFailMessage:"Query result serialization failed: none of the configured actors were able to serialize for type ${action.handle.type}"}),new(bZ()).ActorQueryResultSerializeTree({mediaTypePriorities:{tree:.5},mediaTypeFormats:{tree:"https://comunica.linkeddatafragments.org/#results_tree"},name:"urn:comunica:default:query-result-serialize/actors#tree",bus:c,busFailMessage:"Query result serialization failed: none of the configured actors were able to serialize for type ${action.handle.type}"});const Re=new(_r()).MediatorRace({name:"urn:comunica:default:query-result-serialize/mediators#serialize",bus:c}),Ie=new(Hi()).MediatorCombineUnion({field:"mediaTypes",name:"urn:comunica:default:query-result-serialize/mediators#mediaType",bus:c}),he=new(Hi()).MediatorCombineUnion({field:"mediaTypeFormats",name:"urn:comunica:default:query-result-serialize/mediators#mediaTypeFormat",bus:c}),be=new(gf()).MediatorNumber({field:"filterFactor",type:"max",ignoreFailures:!0,name:"urn:comunica:default:query-source-identify-hypermedia/mediators#main",bus:s}),V=new(wZ()).ActorDereferenceFallback({name:"urn:comunica:default:dereference/actors#fallback",bus:d,busFailMessage:"Dereferencing failed: none of the configured actors were able to handle ${action.url}"}),P=new(_r()).MediatorRace({name:"urn:comunica:default:dereference/mediators#main",bus:d}),N=new(_r()).MediatorRace({name:"urn:comunica:default:dereference-rdf/mediators#main",bus:l});new(AZ()).ActorRdfJoinEntriesSortCardinality({name:"urn:comunica:default:rdf-join-entries-sort/actors#cardinality",bus:f,busFailMessage:"Sorting join entries failed: none of the configured actors were able to sort"});const A=new(gf()).MediatorNumber({field:"accuracy",type:"max",ignoreFailures:!0,name:"urn:comunica:default:rdf-join-entries-sort/mediators#main",bus:f});new(FZ()).ActorRdfJoinSelectivityVariableCounting({name:"urn:comunica:default:rdf-join-selectivity/actors#variable-counting",bus:h,busFailMessage:"Determining join selectivity failed: none of the configured actors were able to calculate selectivities"});const I=new(gf()).MediatorNumber({field:"accuracy",type:"max",ignoreFailures:!0,name:"urn:comunica:default:rdf-join-selectivity/mediators#main",bus:h});new(DZ()).ActorRdfMetadataPrimaryTopic({metadataToData:!1,dataToMetadataOnInvalidMetadataGraph:!0,name:"urn:comunica:default:rdf-metadata/actors#primary-topic",bus:p,busFailMessage:"Metadata splicing failed: none of the configured actors were able to splice metadata from ${action.url}"}),new(jZ()).ActorRdfMetadataAll({name:"urn:comunica:default:rdf-metadata/actors#all",bus:p,busFailMessage:"Metadata splicing failed: none of the configured actors were able to splice metadata from ${action.url}"});const q=new(_r()).MediatorRace({name:"urn:comunica:default:rdf-metadata/mediators#main",bus:p});new(qZ()).ActorRdfMetadataAccumulateCardinality({name:"urn:comunica:default:rdf-metadata-accumulate/actors#cardinality",bus:y,busFailMessage:"Metadata accumulation failed: none of the configured actors were able to accumulate metadata in mode ${action.mode}"}),new(BZ()).ActorRdfMetadataAccumulatePageSize({name:"urn:comunica:default:rdf-metadata-accumulate/actors#pagesize",bus:y,busFailMessage:"Metadata accumulation failed: none of the configured actors were able to accumulate metadata in mode ${action.mode}"}),new(UZ()).ActorRdfMetadataAccumulateRequestTime({name:"urn:comunica:default:rdf-metadata-accumulate/actors#requesttime",bus:y,busFailMessage:"Metadata accumulation failed: none of the configured actors were able to accumulate metadata in mode ${action.mode}"});const H=new(Hi()).MediatorCombineUnion({field:"metadata",name:"urn:comunica:default:rdf-metadata-accumulate/mediators#main",bus:y});new(GZ()).ActorRdfMetadataExtractHydraControls({name:"urn:comunica:default:rdf-metadata-extract/actors#hydra-controls",bus:_,busFailMessage:"Metadata extraction failed: none of the configured actors were able to extract metadata from ${action.url}"}),new(XZ()).ActorRdfMetadataExtractHydraCount({predicates:["http://www.w3.org/ns/hydra/core#totalItems","http://rdfs.org/ns/void#triples"],name:"urn:comunica:default:rdf-metadata-extract/actors#hydra-count",bus:_,busFailMessage:"Metadata extraction failed: none of the configured actors were able to extract metadata from ${action.url}"}),new(KZ()).ActorRdfMetadataExtractHydraPagesize({predicates:["http://www.w3.org/ns/hydra/core#itemsPerPage"],name:"urn:comunica:default:rdf-metadata-extract/actors#hydra-pagesize",bus:_,busFailMessage:"Metadata extraction failed: none of the configured actors were able to extract metadata from ${action.url}"}),new(WZ()).ActorRdfMetadataExtractRequestTime({name:"urn:comunica:default:rdf-metadata-extract/actors#request-time",bus:_,busFailMessage:"Metadata extraction failed: none of the configured actors were able to extract metadata from ${action.url}"}),new(ZZ()).ActorRdfMetadataExtractAllowHttpMethods({name:"urn:comunica:default:rdf-metadata-extract/actors#allow-http-methods",bus:_,busFailMessage:"Metadata extraction failed: none of the configured actors were able to extract metadata from ${action.url}"}),new(tee()).ActorRdfMetadataExtractPutAccepted({name:"urn:comunica:default:rdf-metadata-extract/actors#put-accepted",bus:_,busFailMessage:"Metadata extraction failed: none of the configured actors were able to extract metadata from ${action.url}"}),new(nee()).ActorRdfMetadataExtractPatchSparqlUpdate({name:"urn:comunica:default:rdf-metadata-extract/actors#patch-sparql-update",bus:_,busFailMessage:"Metadata extraction failed: none of the configured actors were able to extract metadata from ${action.url}"}),new(aee()).ActorRdfMetadataExtractSparqlService({inferHttpsEndpoint:!0,name:"urn:comunica:default:rdf-metadata-extract/actors#sparql-service",bus:_,busFailMessage:"Metadata extraction failed: none of the configured actors were able to extract metadata from ${action.url}"}),new(see()).ActorRdfMetadataExtractVoid({name:"urn:comunica:default:rdf-metadata-extract/actors#void",bus:_,busFailMessage:"Metadata extraction failed: none of the configured actors were able to extract metadata from ${action.url}"});const U=new(Hi()).MediatorCombineUnion({filterFailures:!0,field:"metadata",name:"urn:comunica:default:rdf-metadata-extract/mediators#main",bus:_});new(jee()).ActorRdfParseN3({mediaTypePriorities:{"application/n-quads":1,"application/n-triples":.8,"application/trig":.95,"text/n3":.35,"text/turtle":.6},mediaTypeFormats:{"application/n-quads":"http://www.w3.org/ns/formats/N-Quads","application/n-triples":"http://www.w3.org/ns/formats/N-Triples","application/trig":"http://www.w3.org/ns/formats/TriG","text/n3":"http://www.w3.org/ns/formats/N3","text/turtle":"http://www.w3.org/ns/formats/Turtle"},priorityScale:1,name:"urn:comunica:default:rdf-parse/actors#n3",bus:b,busFailMessage:"RDF parsing failed: none of the configured parsers were able to handle the media type ${action.handle.mediaType} for ${action.handle.url}"}),new(Hee()).ActorRdfParseRdfXml({mediaTypePriorities:{"application/rdf+xml":1},mediaTypeFormats:{"application/rdf+xml":"http://www.w3.org/ns/formats/RDF_XML"},priorityScale:.5,name:"urn:comunica:default:rdf-parse/actors#rdfxml",bus:b,busFailMessage:"RDF parsing failed: none of the configured parsers were able to handle the media type ${action.handle.mediaType} for ${action.handle.url}"}),new(ste()).ActorRdfParseXmlRdfa({mediaTypePriorities:{"application/xml":1,"image/svg+xml":1,"text/xml":1},mediaTypeFormats:{"application/xml":"http://www.w3.org/ns/formats/RDFa","image/svg+xml":"http://www.w3.org/ns/formats/RDFa","text/xml":"http://www.w3.org/ns/formats/RDFa"},priorityScale:.3,name:"urn:comunica:default:rdf-parse/actors#xmlrdfa",bus:b,busFailMessage:"RDF parsing failed: none of the configured parsers were able to handle the media type ${action.handle.mediaType} for ${action.handle.url}"}),new(hte()).ActorRdfParseShaclc({mediaTypePriorities:{"text/shaclc":1,"text/shaclc-ext":.5},mediaTypeFormats:{"text/shaclc":"http://www.w3.org/ns/formats/Shaclc","text/shaclc-ext":"http://www.w3.org/ns/formats/ShaclcExtended"},priorityScale:.1,name:"urn:comunica:default:rdf-parse/actors#shaclc",bus:b,busFailMessage:"RDF parsing failed: none of the configured parsers were able to handle the media type ${action.handle.mediaType} for ${action.handle.url}"});const X=new(_r()).MediatorRace({name:"urn:comunica:default:rdf-parse/mediators#parse",bus:b}),Q=new(Hi()).MediatorCombineUnion({field:"mediaTypes",name:"urn:comunica:default:rdf-parse/mediators#mediaType",bus:b});new(bte()).ActorRdfParseHtml({busRdfParseHtml:m,mediaTypePriorities:{"application/xhtml+xml":.9,"text/html":1},mediaTypeFormats:{"application/xhtml+xml":"http://www.w3.org/ns/formats/HTML","text/html":"http://www.w3.org/ns/formats/HTML"},priorityScale:.2,name:"urn:comunica:default:rdf-parse/actors#html",bus:b,busFailMessage:"RDF parsing failed: none of the configured parsers were able to handle the media type ${action.handle.mediaType} for ${action.handle.url}"}),new(xte()).ActorRdfParseHtmlMicrodata({name:"urn:comunica:default:rdf-parse-html/actors#microdata",bus:m,busFailMessage:"RDF HTML parsing failed: none of the configured parsers were able to parse RDF in HTML"}),new(Pte()).ActorRdfParseHtmlRdfa({name:"urn:comunica:default:rdf-parse-html/actors#rdfa",bus:m,busFailMessage:"RDF HTML parsing failed: none of the configured parsers were able to parse RDF in HTML"}),new(Lte()).ActorRdfResolveHypermediaLinksNext({name:"urn:comunica:default:rdf-resolve-hypermedia-links/actors#next",bus:g,busFailMessage:"Hypermedia link resolution failed: none of the configured actors were able to resolve links from metadata"});const k=new(_r()).MediatorRace({name:"urn:comunica:default:rdf-resolve-hypermedia-links/mediators#main",bus:g});new(Ute()).ActorRdfResolveHypermediaLinksQueueFifo({name:"urn:comunica:default:rdf-resolve-hypermedia-links-queue/actors#fifo",bus:T,busFailMessage:"Link queue creation failed: none of the configured actors were able to create a link queue starting from ${action.firstUrl}"});const oe=new(_r()).MediatorRace({name:"urn:comunica:default:rdf-resolve-hypermedia-links-queue/mediators#main",bus:T});new(Gte()).ActorRdfSerializeN3({mediaTypePriorities:{"application/n-quads":1,"application/n-triples":.8,"application/trig":.95,"text/n3":.35,"text/turtle":.6},mediaTypeFormats:{"application/n-quads":"http://www.w3.org/ns/formats/N-Quads","application/n-triples":"http://www.w3.org/ns/formats/N-Triples","application/trig":"http://www.w3.org/ns/formats/TriG","text/n3":"http://www.w3.org/ns/formats/N3","text/turtle":"http://www.w3.org/ns/formats/Turtle"},name:"urn:comunica:default:rdf-serialize/actors#n3",bus:v,busFailMessage:"RDF serialization failed: none of the configured serializers were able to handle media type ${action.handleMediaType}"}),new(kte()).ActorRdfSerializeJsonLd({jsonStringifyIndentSpaces:2,mediaTypePriorities:{"application/ld+json":1},mediaTypeFormats:{"application/ld+json":"http://www.w3.org/ns/formats/JSON-LD"},priorityScale:.9,name:"urn:comunica:default:rdf-serialize/actors#jsonld",bus:v,busFailMessage:"RDF serialization failed: none of the configured serializers were able to handle media type ${action.handleMediaType}"}),new(hre()).ActorRdfSerializeShaclc({mediaTypePriorities:{"text/shaclc":1,"text/shaclc-ext":.5},mediaTypeFormats:{"text/shaclc":"http://www.w3.org/ns/formats/Shaclc","text/shaclc-ext":"http://www.w3.org/ns/formats/ShaclcExtended"},priorityScale:.1,name:"urn:comunica:default:rdf-serialize/actors#shaclc",bus:v,busFailMessage:"RDF serialization failed: none of the configured serializers were able to handle media type ${action.handleMediaType}"});const se=new(_r()).MediatorRace({name:"urn:comunica:default:rdf-serialize/mediators#serialize",bus:v}),Se=new(Hi()).MediatorCombineUnion({field:"mediaTypes",name:"urn:comunica:default:rdf-serialize/mediators#mediaType",bus:v}),Me=new(Hi()).MediatorCombineUnion({field:"mediaTypeFormats",name:"urn:comunica:default:rdf-serialize/mediators#mediaTypeFormat",bus:v}),Oe=new(_r()).MediatorRace({name:"urn:comunica:default:rdf-update-hypermedia/mediators#main",bus:S});new(mre()).ActorRdfUpdateQuadsRdfJsStore({name:"urn:comunica:default:rdf-update-quads/actors#rdfjs-store",bus:F,busFailMessage:"RDF updating failed: none of the configured actors were able to handle an update"});const ue=new(_r()).MediatorRace({name:"urn:comunica:default:rdf-update-quads/mediators#main",bus:F}),L=new(_r()).MediatorRace({name:"urn:comunica:default:bindings-aggregator-factory/mediators#main",bus:M}),x=new(_r()).MediatorRace({name:"urn:comunica:default:expression-evaluator-factory/mediators#main",bus:O});new(wre()).ActorFunctionFactoryExpressionBnode({name:"urn:comunica:default:function-factory/actors#expression-function-bnode",bus:w,busFailMessage:"Creation of function evaluator failed: no configured actor was able to evaluate function ${action.functionName}"}),new(Are()).ActorFunctionFactoryExpressionBound({name:"urn:comunica:default:function-factory/actors#expression-function-bound",bus:w,busFailMessage:"Creation of function evaluator failed: no configured actor was able to evaluate function ${action.functionName}"}),new(Rre()).ActorFunctionFactoryExpressionCoalesce({name:"urn:comunica:default:function-factory/actors#expression-function-coalesce",bus:w,busFailMessage:"Creation of function evaluator failed: no configured actor was able to evaluate function ${action.functionName}"}),new(Pre()).ActorFunctionFactoryExpressionConcat({name:"urn:comunica:default:function-factory/actors#expression-function-concat",bus:w,busFailMessage:"Creation of function evaluator failed: no configured actor was able to evaluate function ${action.functionName}"}),new(jre()).ActorFunctionFactoryExpressionExtensions({name:"urn:comunica:default:function-factory/actors#expression-function-extensions",bus:w,busFailMessage:"Creation of function evaluator failed: no configured actor was able to evaluate function ${action.functionName}"}),new(qre()).ActorFunctionFactoryExpressionIf({name:"urn:comunica:default:function-factory/actors#expression-function-if",bus:w,busFailMessage:"Creation of function evaluator failed: no configured actor was able to evaluate function ${action.functionName}"}),new($re()).ActorFunctionFactoryExpressionLogicalAnd({name:"urn:comunica:default:function-factory/actors#expression-function-logical-and",bus:w,busFailMessage:"Creation of function evaluator failed: no configured actor was able to evaluate function ${action.functionName}"}),new(Qre()).ActorFunctionFactoryExpressionLogicalOr({name:"urn:comunica:default:function-factory/actors#expression-function-logical-or",bus:w,busFailMessage:"Creation of function evaluator failed: no configured actor was able to evaluate function ${action.functionName}"}),new(zre()).ActorFunctionFactoryExpressionSameTerm({name:"urn:comunica:default:function-factory/actors#expression-function-same-term",bus:w,busFailMessage:"Creation of function evaluator failed: no configured actor was able to evaluate function ${action.functionName}"}),new(Kre()).ActorFunctionFactoryTermAbs({name:"urn:comunica:default:function-factory/actors#term-function-abs",bus:w,busFailMessage:"Creation of function evaluator failed: no configured actor was able to evaluate function ${action.functionName}"}),new(Zre()).ActorFunctionFactoryTermAddition({name:"urn:comunica:default:function-factory/actors#term-function-addition",bus:w,busFailMessage:"Creation of function evaluator failed: no configured actor was able to evaluate function ${action.functionName}"}),new(rne()).ActorFunctionFactoryTermCeil({name:"urn:comunica:default:function-factory/actors#term-function-ceil",bus:w,busFailMessage:"Creation of function evaluator failed: no configured actor was able to evaluate function ${action.functionName}"}),new(ane()).ActorFunctionFactoryTermContains({name:"urn:comunica:default:function-factory/actors#term-function-contains",bus:w,busFailMessage:"Creation of function evaluator failed: no configured actor was able to evaluate function ${action.functionName}"}),new(sne()).ActorFunctionFactoryTermDatatype({name:"urn:comunica:default:function-factory/actors#term-function-datatype",bus:w,busFailMessage:"Creation of function evaluator failed: no configured actor was able to evaluate function ${action.functionName}"}),new(lne()).ActorFunctionFactoryTermDay({name:"urn:comunica:default:function-factory/actors#term-function-day",bus:w,busFailMessage:"Creation of function evaluator failed: no configured actor was able to evaluate function ${action.functionName}"}),new(pne()).ActorFunctionFactoryTermDivision({name:"urn:comunica:default:function-factory/actors#term-function-division",bus:w,busFailMessage:"Creation of function evaluator failed: no configured actor was able to evaluate function ${action.functionName}"}),new(_ne()).ActorFunctionFactoryTermEncodeForUri({name:"urn:comunica:default:function-factory/actors#term-function-encode-for-uri",bus:w,busFailMessage:"Creation of function evaluator failed: no configured actor was able to evaluate function ${action.functionName}"}),new(vne()).ActorFunctionFactoryTermEquality({name:"urn:comunica:default:function-factory/actors#term-function-equality",bus:w,busFailMessage:"Creation of function evaluator failed: no configured actor was able to evaluate function ${action.functionName}"}),new(Sne()).ActorFunctionFactoryTermFloor({name:"urn:comunica:default:function-factory/actors#term-function-floor",bus:w,busFailMessage:"Creation of function evaluator failed: no configured actor was able to evaluate function ${action.functionName}"}),new(Ene()).ActorFunctionFactoryTermHours({name:"urn:comunica:default:function-factory/actors#term-function-hours",bus:w,busFailMessage:"Creation of function evaluator failed: no configured actor was able to evaluate function ${action.functionName}"}),new(Fne()).ActorFunctionFactoryTermIri({name:"urn:comunica:default:function-factory/actors#term-function-iri",bus:w,busFailMessage:"Creation of function evaluator failed: no configured actor was able to evaluate function ${action.functionName}"}),new(Dne()).ActorFunctionFactoryTermIsBlank({name:"urn:comunica:default:function-factory/actors#term-function-is-blank",bus:w,busFailMessage:"Creation of function evaluator failed: no configured actor was able to evaluate function ${action.functionName}"}),new(Lne()).ActorFunctionFactoryTermIsIri({name:"urn:comunica:default:function-factory/actors#term-function-is-iri",bus:w,busFailMessage:"Creation of function evaluator failed: no configured actor was able to evaluate function ${action.functionName}"}),new(Cne()).ActorFunctionFactoryTermIsLiteral({name:"urn:comunica:default:function-factory/actors#term-function-is-literal",bus:w,busFailMessage:"Creation of function evaluator failed: no configured actor was able to evaluate function ${action.functionName}"}),new(Une()).ActorFunctionFactoryTermIsNumeric({name:"urn:comunica:default:function-factory/actors#term-function-is-numeric",bus:w,busFailMessage:"Creation of function evaluator failed: no configured actor was able to evaluate function ${action.functionName}"}),new(Hne()).ActorFunctionFactoryTermIsTriple({name:"urn:comunica:default:function-factory/actors#term-function-is-triple",bus:w,busFailMessage:"Creation of function evaluator failed: no configured actor was able to evaluate function ${action.functionName}"}),new(Xne()).ActorFunctionFactoryTermLang({name:"urn:comunica:default:function-factory/actors#term-function-lang",bus:w,busFailMessage:"Creation of function evaluator failed: no configured actor was able to evaluate function ${action.functionName}"}),new(kne()).ActorFunctionFactoryTermLangmatches({name:"urn:comunica:default:function-factory/actors#term-function-langmatches",bus:w,busFailMessage:"Creation of function evaluator failed: no configured actor was able to evaluate function ${action.functionName}"}),new(Zne()).ActorFunctionFactoryTermLcase({name:"urn:comunica:default:function-factory/actors#term-function-lcase",bus:w,busFailMessage:"Creation of function evaluator failed: no configured actor was able to evaluate function ${action.functionName}"}),new(nie()).ActorFunctionFactoryTermMd5({name:"urn:comunica:default:function-factory/actors#term-function-md5",bus:w,busFailMessage:"Creation of function evaluator failed: no configured actor was able to evaluate function ${action.functionName}"}),new(uie()).ActorFunctionFactoryTermMinutes({name:"urn:comunica:default:function-factory/actors#term-function-minutes",bus:w,busFailMessage:"Creation of function evaluator failed: no configured actor was able to evaluate function ${action.functionName}"}),new(cie()).ActorFunctionFactoryTermMonth({name:"urn:comunica:default:function-factory/actors#term-function-month",bus:w,busFailMessage:"Creation of function evaluator failed: no configured actor was able to evaluate function ${action.functionName}"}),new(fie()).ActorFunctionFactoryTermMultiplication({name:"urn:comunica:default:function-factory/actors#term-function-multiplication",bus:w,busFailMessage:"Creation of function evaluator failed: no configured actor was able to evaluate function ${action.functionName}"}),new(yie()).ActorFunctionFactoryTermNot({name:"urn:comunica:default:function-factory/actors#term-function-not",bus:w,busFailMessage:"Creation of function evaluator failed: no configured actor was able to evaluate function ${action.functionName}"}),new(gie()).ActorFunctionFactoryTermNow({name:"urn:comunica:default:function-factory/actors#term-function-now",bus:w,busFailMessage:"Creation of function evaluator failed: no configured actor was able to evaluate function ${action.functionName}"}),new(Tie()).ActorFunctionFactoryTermObject({name:"urn:comunica:default:function-factory/actors#term-function-object",bus:w,busFailMessage:"Creation of function evaluator failed: no configured actor was able to evaluate function ${action.functionName}"}),new(Oie()).ActorFunctionFactoryTermPredicate({name:"urn:comunica:default:function-factory/actors#term-function-predicate",bus:w,busFailMessage:"Creation of function evaluator failed: no configured actor was able to evaluate function ${action.functionName}"}),new(xie()).ActorFunctionFactoryTermRand({name:"urn:comunica:default:function-factory/actors#term-function-rand",bus:w,busFailMessage:"Creation of function evaluator failed: no configured actor was able to evaluate function ${action.functionName}"}),new(a7()).ActorFunctionFactoryTermRegex({name:"urn:comunica:default:function-factory/actors#term-function-regex",bus:w,busFailMessage:"Creation of function evaluator failed: no configured actor was able to evaluate function ${action.functionName}"}),new(Pie()).ActorFunctionFactoryTermReplace({name:"urn:comunica:default:function-factory/actors#term-function-replace",bus:w,busFailMessage:"Creation of function evaluator failed: no configured actor was able to evaluate function ${action.functionName}"}),new(jie()).ActorFunctionFactoryTermRound({name:"urn:comunica:default:function-factory/actors#term-function-round",bus:w,busFailMessage:"Creation of function evaluator failed: no configured actor was able to evaluate function ${action.functionName}"}),new(qie()).ActorFunctionFactoryTermSeconds({name:"urn:comunica:default:function-factory/actors#term-function-seconds",bus:w,busFailMessage:"Creation of function evaluator failed: no configured actor was able to evaluate function ${action.functionName}"}),new($ie()).ActorFunctionFactoryTermSha1({name:"urn:comunica:default:function-factory/actors#term-function-sha1",bus:w,busFailMessage:"Creation of function evaluator failed: no configured actor was able to evaluate function ${action.functionName}"}),new(Qie()).ActorFunctionFactoryTermSha256({name:"urn:comunica:default:function-factory/actors#term-function-sha256",bus:w,busFailMessage:"Creation of function evaluator failed: no configured actor was able to evaluate function ${action.functionName}"}),new(zie()).ActorFunctionFactoryTermSha384({name:"urn:comunica:default:function-factory/actors#term-function-sha384",bus:w,busFailMessage:"Creation of function evaluator failed: no configured actor was able to evaluate function ${action.functionName}"}),new(Kie()).ActorFunctionFactoryTermSha512({name:"urn:comunica:default:function-factory/actors#term-function-sha512",bus:w,busFailMessage:"Creation of function evaluator failed: no configured actor was able to evaluate function ${action.functionName}"}),new(Yie()).ActorFunctionFactoryTermStrAfter({name:"urn:comunica:default:function-factory/actors#term-function-str-after",bus:w,busFailMessage:"Creation of function evaluator failed: no configured actor was able to evaluate function ${action.functionName}"}),new(tae()).ActorFunctionFactoryTermStrBefore({name:"urn:comunica:default:function-factory/actors#term-function-str-before",bus:w,busFailMessage:"Creation of function evaluator failed: no configured actor was able to evaluate function ${action.functionName}"}),new(iae()).ActorFunctionFactoryTermStrDt({name:"urn:comunica:default:function-factory/actors#term-function-str-dt",bus:w,busFailMessage:"Creation of function evaluator failed: no configured actor was able to evaluate function ${action.functionName}"}),new(oae()).ActorFunctionFactoryTermStrEnds({name:"urn:comunica:default:function-factory/actors#term-function-str-ends",bus:w,busFailMessage:"Creation of function evaluator failed: no configured actor was able to evaluate function ${action.functionName}"}),new(dae()).ActorFunctionFactoryTermStrLang({name:"urn:comunica:default:function-factory/actors#term-function-str-lang",bus:w,busFailMessage:"Creation of function evaluator failed: no configured actor was able to evaluate function ${action.functionName}"}),new(hae()).ActorFunctionFactoryTermStrLen({name:"urn:comunica:default:function-factory/actors#term-function-str-len",bus:w,busFailMessage:"Creation of function evaluator failed: no configured actor was able to evaluate function ${action.functionName}"}),new(bae()).ActorFunctionFactoryTermStrStarts({name:"urn:comunica:default:function-factory/actors#term-function-str-starts",bus:w,busFailMessage:"Creation of function evaluator failed: no configured actor was able to evaluate function ${action.functionName}"}),new(Dae()).ActorFunctionFactoryTermStrUuid({name:"urn:comunica:default:function-factory/actors#term-function-str-uuid",bus:w,busFailMessage:"Creation of function evaluator failed: no configured actor was able to evaluate function ${action.functionName}"}),new(Lae()).ActorFunctionFactoryTermStr({name:"urn:comunica:default:function-factory/actors#term-function-str",bus:w,busFailMessage:"Creation of function evaluator failed: no configured actor was able to evaluate function ${action.functionName}"}),new(Cae()).ActorFunctionFactoryTermSubStr({name:"urn:comunica:default:function-factory/actors#term-function-sub-str",bus:w,busFailMessage:"Creation of function evaluator failed: no configured actor was able to evaluate function ${action.functionName}"}),new(Uae()).ActorFunctionFactoryTermSubject({name:"urn:comunica:default:function-factory/actors#term-function-subject",bus:w,busFailMessage:"Creation of function evaluator failed: no configured actor was able to evaluate function ${action.functionName}"}),new(Hae()).ActorFunctionFactoryTermSubtraction({name:"urn:comunica:default:function-factory/actors#term-function-subtraction",bus:w,busFailMessage:"Creation of function evaluator failed: no configured actor was able to evaluate function ${action.functionName}"}),new(Xae()).ActorFunctionFactoryTermTimezone({name:"urn:comunica:default:function-factory/actors#term-function-timezone",bus:w,busFailMessage:"Creation of function evaluator failed: no configured actor was able to evaluate function ${action.functionName}"}),new(kae()).ActorFunctionFactoryTermTriple({name:"urn:comunica:default:function-factory/actors#term-function-triple",bus:w,busFailMessage:"Creation of function evaluator failed: no configured actor was able to evaluate function ${action.functionName}"}),new(Zae()).ActorFunctionFactoryTermTz({name:"urn:comunica:default:function-factory/actors#term-function-tz",bus:w,busFailMessage:"Creation of function evaluator failed: no configured actor was able to evaluate function ${action.functionName}"}),new(rue()).ActorFunctionFactoryTermUcase({name:"urn:comunica:default:function-factory/actors#term-function-ucase",bus:w,busFailMessage:"Creation of function evaluator failed: no configured actor was able to evaluate function ${action.functionName}"}),new(aue()).ActorFunctionFactoryTermUnaryMinus({name:"urn:comunica:default:function-factory/actors#term-function-unary-minus",bus:w,busFailMessage:"Creation of function evaluator failed: no configured actor was able to evaluate function ${action.functionName}"}),new(sue()).ActorFunctionFactoryTermUnaryPlus({name:"urn:comunica:default:function-factory/actors#term-function-unary-plus",bus:w,busFailMessage:"Creation of function evaluator failed: no configured actor was able to evaluate function ${action.functionName}"}),new(lue()).ActorFunctionFactoryTermUuid({name:"urn:comunica:default:function-factory/actors#term-function-uuid",bus:w,busFailMessage:"Creation of function evaluator failed: no configured actor was able to evaluate function ${action.functionName}"}),new(pue()).ActorFunctionFactoryTermXsdToBoolean({name:"urn:comunica:default:function-factory/actors#term-function-xsd-to-boolean",bus:w,busFailMessage:"Creation of function evaluator failed: no configured actor was able to evaluate function ${action.functionName}"}),new(_ue()).ActorFunctionFactoryTermXsdToDate({name:"urn:comunica:default:function-factory/actors#term-function-xsd-to-date",bus:w,busFailMessage:"Creation of function evaluator failed: no configured actor was able to evaluate function ${action.functionName}"}),new(vue()).ActorFunctionFactoryTermXsdToDatetime({name:"urn:comunica:default:function-factory/actors#term-function-xsd-to-datetime",bus:w,busFailMessage:"Creation of function evaluator failed: no configured actor was able to evaluate function ${action.functionName}"}),new(Sue()).ActorFunctionFactoryTermXsdToDayTimeDuration({name:"urn:comunica:default:function-factory/actors#term-function-xsd-to-day-time-duration",bus:w,busFailMessage:"Creation of function evaluator failed: no configured actor was able to evaluate function ${action.functionName}"}),new(Eue()).ActorFunctionFactoryTermXsdToDecimal({name:"urn:comunica:default:function-factory/actors#term-function-xsd-to-decimal",bus:w,busFailMessage:"Creation of function evaluator failed: no configured actor was able to evaluate function ${action.functionName}"}),new(Fue()).ActorFunctionFactoryTermXsdToDouble({name:"urn:comunica:default:function-factory/actors#term-function-xsd-to-double",bus:w,busFailMessage:"Creation of function evaluator failed: no configured actor was able to evaluate function ${action.functionName}"}),new(Due()).ActorFunctionFactoryTermXsdToDuration({name:"urn:comunica:default:function-factory/actors#term-function-xsd-to-duration",bus:w,busFailMessage:"Creation of function evaluator failed: no configured actor was able to evaluate function ${action.functionName}"}),new(Lue()).ActorFunctionFactoryTermXsdToFloat({name:"urn:comunica:default:function-factory/actors#term-function-xsd-to-float",bus:w,busFailMessage:"Creation of function evaluator failed: no configured actor was able to evaluate function ${action.functionName}"}),new(Cue()).ActorFunctionFactoryTermXsdToInteger({name:"urn:comunica:default:function-factory/actors#term-function-xsd-to-integer",bus:w,busFailMessage:"Creation of function evaluator failed: no configured actor was able to evaluate function ${action.functionName}"}),new(Uue()).ActorFunctionFactoryTermXsdToString({name:"urn:comunica:default:function-factory/actors#term-function-xsd-to-string",bus:w,busFailMessage:"Creation of function evaluator failed: no configured actor was able to evaluate function ${action.functionName}"}),new(Hue()).ActorFunctionFactoryTermXsdToTime({name:"urn:comunica:default:function-factory/actors#term-function-xsd-to-time",bus:w,busFailMessage:"Creation of function evaluator failed: no configured actor was able to evaluate function ${action.functionName}"}),new(Xue()).ActorFunctionFactoryTermXsdToYearMonthDuration({name:"urn:comunica:default:function-factory/actors#term-function-xsd-to-year-month-duration",bus:w,busFailMessage:"Creation of function evaluator failed: no configured actor was able to evaluate function ${action.functionName}"}),new(kue()).ActorFunctionFactoryTermYear({name:"urn:comunica:default:function-factory/actors#term-function-year",bus:w,busFailMessage:"Creation of function evaluator failed: no configured actor was able to evaluate function ${action.functionName}"});const j=new(_r()).MediatorRace({name:"urn:comunica:default:function-factory/mediators#main",bus:w}),z=new(noe()).ActorHttpFetch({agentOptions:{keepAlive:!0,maxSockets:5},name:"urn:comunica:default:http/actors#fetch",bus:E,busFailMessage:"HTTP request failed: none of the configured actors were able to handle ${action.input}"}),W=new(gf()).MediatorNumber({field:"time",type:"min",ignoreFailures:!0,name:"urn:comunica:default:http/mediators#no-fallback",bus:E}),le=new(gf()).MediatorNumber({field:"time",type:"min",ignoreFailures:!0,name:"urn:comunica:default:http/mediators#main",bus:R});new(aoe()).ActorQueryOperationSource({name:"urn:comunica:default:query-operation/actors#source",bus:D,busFailMessage:"Query operation processing failed: none of the configured actors were able to handle the operation type ${action.operation.type}"});const ae=new(gf()).MediatorNumber({field:"httpRequests",type:"min",ignoreFailures:!0,name:"urn:comunica:default:query-operation/mediators#main",bus:D}),De=new(_r()).MediatorRace({name:"urn:comunica:default:query-process/mediators#main",bus:B}),Ve=new(_r()).MediatorRace({name:"urn:comunica:default:query-source-identify/mediators#main",bus:C}),Be=new(ooe()).MediatorJoinCoefficientsFixed({cpuWeight:10,memoryWeight:1,timeWeight:2,ioWeight:10,name:"urn:comunica:default:rdf-join/mediators#main",bus:$}),Ze=new(_r()).MediatorRace({name:"urn:comunica:default:term-comparator-factory/mediators#main",bus:Z}),J=new(Df()).ActorHttpInvalidateListenable({name:"https://linkedsoftwaredependencies.org/bundles/npm/@comunica/actor-context-preprocess-query-source-identify/^4.0.0/components/ActorContextPreprocessQuerySourceIdentify.jsonld#IActorContextPreprocessQuerySourceIdentifyArgs_default_invalidator",bus:ee,busFailMessage:"HTTP invalidation failed: none of the configured actors were able to invalidate ${action.url}"}),we=new(doe()).MediatorAll({name:"urn:comunica:default:http-invalidate/mediators#main",bus:ee}),Ee=new(Df()).ActorHttpInvalidateListenable({name:"https://linkedsoftwaredependencies.org/bundles/npm/@comunica/actor-rdf-update-quads-hypermedia/^4.0.0/components/ActorRdfUpdateQuadsHypermedia.jsonld#IActorRdfUpdateQuadsHypermediaArgs_default_invalidator",bus:ee,busFailMessage:"HTTP invalidation failed: none of the configured actors were able to invalidate ${action.url}"}),$e=new(Df()).ActorHttpInvalidateListenable({name:"https://linkedsoftwaredependencies.org/bundles/npm/@comunica/actor-http-retry/^4.0.0/components/ActorHttpRetry.jsonld#IActorHttpQueueArgs_default_invalidator",bus:ee,busFailMessage:"HTTP invalidation failed: none of the configured actors were able to invalidate ${action.url}"}),Pe=new(Df()).ActorHttpInvalidateListenable({name:"https://linkedsoftwaredependencies.org/bundles/npm/@comunica/actor-http-limit-rate/^4.0.0/components/ActorHttpLimitRate.jsonld#IActorHttpLimitRateArgs_default_invalidator",bus:ee,busFailMessage:"HTTP invalidation failed: none of the configured actors were able to invalidate ${action.url}"}),et=new(Df()).ActorHttpInvalidateListenable({name:"https://linkedsoftwaredependencies.org/bundles/npm/@comunica/actor-query-result-serialize-sparql-json/^4.0.0/components/ActionObserverHttp.jsonld#IActionObserverHttpArgs_default_invalidator",bus:ee,busFailMessage:"HTTP invalidation failed: none of the configured actors were able to invalidate ${action.url}"}),rt=new(Df()).ActorHttpInvalidateListenable({name:"https://linkedsoftwaredependencies.org/bundles/npm/@comunica/actor-query-result-serialize-stats/^4.0.0/components/ActionObserverHttp.jsonld#IActionObserverHttpArgs_default_invalidator",bus:ee,busFailMessage:"HTTP invalidation failed: none of the configured actors were able to invalidate ${action.url}"}),ke=new(Hi()).MediatorCombineUnion({field:"mergeHandlers",name:"urn:comunica:default:merge-bindings-context/mediators#main",bus:ce});new(foe()).ActorRdfJoinEntriesSortSelectivity({mediatorJoinSelectivity:I,name:"urn:comunica:default:rdf-join-entries-sort/actors#selectivity",bus:f,busFailMessage:"Sorting join entries failed: none of the configured actors were able to sort"}),new(moe()).ActorRdfJoinSingle({mediatorJoinSelectivity:I,name:"urn:comunica:default:rdf-join/actors#inner-single",bus:$,busFailMessage:"RDF joining failed: none of the configured actors were able to handle the join type ${action.type}"}),new(Toe()).ActorRdfJoinMultiEmpty({mediatorJoinSelectivity:I,name:"urn:comunica:default:rdf-join/actors#inner-multi-empty",bus:$,busFailMessage:"RDF joining failed: none of the configured actors were able to handle the join type ${action.type}"});const ft=new(NB()).ActorRdfJoinHash({mediatorHashBindings:me,canHandleUndefs:!1,mediatorJoinSelectivity:I,name:"urn:comunica:default:rdf-join/actors#inner-hash-def",bus:$,busFailMessage:"RDF joining failed: none of the configured actors were able to handle the join type ${action.type}"}),te=new(NB()).ActorRdfJoinHash({mediatorHashBindings:me,canHandleUndefs:!0,mediatorJoinSelectivity:I,name:"urn:comunica:default:rdf-join/actors#inner-hash-undef",bus:$,busFailMessage:"RDF joining failed: none of the configured actors were able to handle the join type ${action.type}"}),ne=new(Doe()).ActorRdfJoinSymmetricHash({mediatorHashBindings:me,mediatorJoinSelectivity:I,name:"urn:comunica:default:rdf-join/actors#inner-symmetric-hash",bus:$,busFailMessage:"RDF joining failed: none of the configured actors were able to handle the join type ${action.type}"}),Ne=new(joe()).ActorRdfJoinNestedLoop({mediatorJoinSelectivity:I,name:"urn:comunica:default:rdf-join/actors#inner-nested-loop",bus:$,busFailMessage:"RDF joining failed: none of the configured actors were able to handle the join type ${action.type}"});new(dw()).ActorRdfJoinOptionalHash({canHandleUndefs:!1,blocking:!1,mediatorJoinSelectivity:I,name:"urn:comunica:default:rdf-join/actors#optional-hash-def-nonblocking",bus:$,busFailMessage:"RDF joining failed: none of the configured actors were able to handle the join type ${action.type}"}),new(dw()).ActorRdfJoinOptionalHash({canHandleUndefs:!1,blocking:!0,mediatorJoinSelectivity:I,name:"urn:comunica:default:rdf-join/actors#optional-hash-def-blocking",bus:$,busFailMessage:"RDF joining failed: none of the configured actors were able to handle the join type ${action.type}"}),new(dw()).ActorRdfJoinOptionalHash({canHandleUndefs:!0,blocking:!1,mediatorJoinSelectivity:I,name:"urn:comunica:default:rdf-join/actors#optional-hash-undef-nonblocking",bus:$,busFailMessage:"RDF joining failed: none of the configured actors were able to handle the join type ${action.type}"}),new(dw()).ActorRdfJoinOptionalHash({canHandleUndefs:!0,blocking:!0,mediatorJoinSelectivity:I,name:"urn:comunica:default:rdf-join/actors#optional-hash-undef-blocking",bus:$,busFailMessage:"RDF joining failed: none of the configured actors were able to handle the join type ${action.type}"}),new(Coe()).ActorRdfJoinOptionalNestedLoop({mediatorJoinSelectivity:I,name:"urn:comunica:default:rdf-join/actors#optional-nested-loop",bus:$,busFailMessage:"RDF joining failed: none of the configured actors were able to handle the join type ${action.type}"}),new(kB()).ActorRdfJoinMinusHash({canHandleUndefs:!1,mediatorJoinSelectivity:I,name:"urn:comunica:default:rdf-join/actors#minus-hash-def",bus:$,busFailMessage:"RDF joining failed: none of the configured actors were able to handle the join type ${action.type}"}),new(kB()).ActorRdfJoinMinusHash({canHandleUndefs:!0,mediatorJoinSelectivity:I,name:"urn:comunica:default:rdf-join/actors#minus-hash-undef",bus:$,busFailMessage:"RDF joining failed: none of the configured actors were able to handle the join type ${action.type}"}),new(Qoe()).ActorDereferenceRdfParse({mediatorDereference:P,mediatorParse:X,mediatorParseMediatypes:Q,mediaMappings:{htm:"text/html",html:"text/html",json:"application/json",jsonld:"application/ld+json",n3:"text/n3",nq:"application/n-quads",nquads:"application/n-quads",nt:"application/n-triples",ntriples:"application/n-triples",owl:"application/rdf+xml",rdf:"application/rdf+xml",rdfxml:"application/rdf+xml",shaclc:"text/shaclc",shaclce:"text/shaclc-ext",shc:"text/shaclc",shce:"text/shaclc-ext",svg:"image/svg+xml",svgz:"image/svg+xml",trig:"application/trig",ttl:"text/turtle",turtle:"text/turtle",xht:"application/xhtml+xml",xhtml:"application/xhtml+xml",xml:"application/xml"},name:"urn:comunica:default:dereference-rdf/actors#parse",bus:l,busFailMessage:"RDF dereferencing failed: none of the configured parsers were able to handle the media type ${action.handle.mediaType} for ${action.handle.url}"}),new(Joe()).ActorRdfParseHtmlScript({mediatorRdfParseMediatypes:Q,mediatorRdfParseHandle:X,name:"urn:comunica:default:rdf-parse-html/actors#script",bus:m,busFailMessage:"RDF HTML parsing failed: none of the configured parsers were able to parse RDF in HTML"}),new(koe()).ActorQueryResultSerializeRdf({mediatorRdfSerialize:se,mediatorMediaTypeCombiner:Se,mediatorMediaTypeFormatCombiner:Me,name:"urn:comunica:default:query-result-serialize/actors#rdf",bus:c,busFailMessage:"Query result serialization failed: none of the configured actors were able to serialize for type ${action.handle.type}"}),new(ese()).ActorBindingsAggregatorFactoryGroupConcat({mediatorExpressionEvaluatorFactory:x,name:"urn:comunica:default:bindings-aggregator-factory/actors#group-concat",bus:M,busFailMessage:"Creation of Aggregator failed: none of the configured actors were able to handle ${action.expr.aggregator}"}),new(rse()).ActorBindingsAggregatorFactoryCount({mediatorExpressionEvaluatorFactory:x,name:"urn:comunica:default:bindings-aggregator-factory/actors#count",bus:M,busFailMessage:"Creation of Aggregator failed: none of the configured actors were able to handle ${action.expr.aggregator}"}),new(ise()).ActorBindingsAggregatorFactorySample({mediatorExpressionEvaluatorFactory:x,name:"urn:comunica:default:bindings-aggregator-factory/actors#sample",bus:M,busFailMessage:"Creation of Aggregator failed: none of the configured actors were able to handle ${action.expr.aggregator}"}),new(use()).ActorBindingsAggregatorFactoryWildcardCount({mediatorExpressionEvaluatorFactory:x,name:"urn:comunica:default:bindings-aggregator-factory/actors#wildcard-count",bus:M,busFailMessage:"Creation of Aggregator failed: none of the configured actors were able to handle ${action.expr.aggregator}"}),new(sse()).ActorBindingsAggregatorFactoryAverage({mediatorFunctionFactory:j,mediatorExpressionEvaluatorFactory:x,name:"urn:comunica:default:bindings-aggregator-factory/actors#average",bus:M,busFailMessage:"Creation of Aggregator failed: none of the configured actors were able to handle ${action.expr.aggregator}"}),new(dse()).ActorBindingsAggregatorFactorySum({mediatorFunctionFactory:j,mediatorExpressionEvaluatorFactory:x,name:"urn:comunica:default:bindings-aggregator-factory/actors#sum",bus:M,busFailMessage:"Creation of Aggregator failed: none of the configured actors were able to handle ${action.expr.aggregator}"}),new(hse()).ActorFunctionFactoryExpressionIn({mediatorFunctionFactory:j,name:"urn:comunica:default:function-factory/actors#expression-function-in",bus:w,busFailMessage:"Creation of function evaluator failed: no configured actor was able to evaluate function ${action.functionName}"}),new(bse()).ActorFunctionFactoryExpressionNotIn({mediatorFunctionFactory:j,name:"urn:comunica:default:function-factory/actors#expression-function-not-in",bus:w,busFailMessage:"Creation of function evaluator failed: no configured actor was able to evaluate function ${action.functionName}"}),new(mse()).ActorFunctionFactoryTermGreaterThanEqual({mediatorFunctionFactory:j,name:"urn:comunica:default:function-factory/actors#term-function-greater-than-equal",bus:w,busFailMessage:"Creation of function evaluator failed: no configured actor was able to evaluate function ${action.functionName}"}),new(wse()).ActorFunctionFactoryTermGreaterThan({mediatorFunctionFactory:j,name:"urn:comunica:default:function-factory/actors#term-function-greater-than",bus:w,busFailMessage:"Creation of function evaluator failed: no configured actor was able to evaluate function ${action.functionName}"}),new(Ase()).ActorFunctionFactoryTermInequality({mediatorFunctionFactory:j,name:"urn:comunica:default:function-factory/actors#term-function-inequality",bus:w,busFailMessage:"Creation of function evaluator failed: no configured actor was able to evaluate function ${action.functionName}"}),new(Rse()).ActorFunctionFactoryTermLesserThanEqual({mediatorFunctionFactory:j,name:"urn:comunica:default:function-factory/actors#term-function-lesser-than-equal",bus:w,busFailMessage:"Creation of function evaluator failed: no configured actor was able to evaluate function ${action.functionName}"}),new(Pse()).ActorFunctionFactoryTermLesserThan({mediatorFunctionFactory:j,name:"urn:comunica:default:function-factory/actors#term-function-lesser-than",bus:w,busFailMessage:"Creation of function evaluator failed: no configured actor was able to evaluate function ${action.functionName}"}),new(Nse()).ActorHttpWayback({mediatorHttp:W,name:"urn:comunica:default:http/actors#wayback",bus:R,busFailMessage:"HTTP request failed: none of the configured actors were able to handle ${action.input}"}),new(ice()).ActorRdfParseJsonLd({mediatorHttp:le,mediaTypePriorities:{"application/json":.15,"application/ld+json":1},mediaTypeFormats:{"application/json":"http://www.w3.org/ns/formats/JSON-LD","application/ld+json":"http://www.w3.org/ns/formats/JSON-LD"},priorityScale:.9,name:"urn:comunica:default:rdf-parse/actors#jsonld",bus:b,busFailMessage:"RDF parsing failed: none of the configured parsers were able to handle the media type ${action.handle.mediaType} for ${action.handle.url}"}),new(oce()).ActorRdfUpdateHypermediaPatchSparqlUpdate({mediatorHttp:le,name:"urn:comunica:default:rdf-update-hypermedia/actors#patch-sparql-update",bus:S,busFailMessage:"RDF hypermedia updating failed: none of the configured actors were able to handle an update for ${action.url}"}),new(cce()).ActorRdfUpdateHypermediaPutLdp({mediatorHttp:le,mediatorRdfSerializeMediatypes:Se,mediatorRdfSerialize:se,name:"urn:comunica:default:rdf-update-hypermedia/actors#put-ldp",bus:S,busFailMessage:"RDF hypermedia updating failed: none of the configured actors were able to handle an update for ${action.url}"}),new(bce()).ActorRdfUpdateHypermediaSparql({mediatorHttp:le,checkUrlSuffixSparql:!0,checkUrlSuffixUpdate:!0,name:"urn:comunica:default:rdf-update-hypermedia/actors#sparql",bus:S,busFailMessage:"RDF hypermedia updating failed: none of the configured actors were able to handle an update for ${action.url}"}),new(gce()).ActorQueryOperationAsk({mediatorQueryOperation:ae,name:"urn:comunica:default:query-operation/actors#ask",bus:D,busFailMessage:"Query operation processing failed: none of the configured actors were able to handle the operation type ${action.operation.type}"}),new(vce()).ActorQueryOperationBgpJoin({mediatorQueryOperation:ae,name:"urn:comunica:default:query-operation/actors#bgp",bus:D,busFailMessage:"Query operation processing failed: none of the configured actors were able to handle the operation type ${action.operation.type}"}),new(TV()).ActorQueryOperationConstruct({mediatorQueryOperation:ae,name:"urn:comunica:default:query-operation/actors#construct",bus:D,busFailMessage:"Query operation processing failed: none of the configured actors were able to handle the operation type ${action.operation.type}"}),new(xce()).ActorQueryOperationDistinctIdentity({mediatorQueryOperation:ae,name:"urn:comunica:default:query-operation/actors#distinct",bus:D,busFailMessage:"Query operation processing failed: none of the configured actors were able to handle the operation type ${action.operation.type}"}),new(Fce()).ActorQueryOperationExtend({mediatorExpressionEvaluatorFactory:x,mediatorQueryOperation:ae,name:"urn:comunica:default:query-operation/actors#extend",bus:D,busFailMessage:"Query operation processing failed: none of the configured actors were able to handle the operation type ${action.operation.type}"}),new(Pce()).ActorQueryOperationFilter({mediatorExpressionEvaluatorFactory:x,mediatorQueryOperation:ae,name:"urn:comunica:default:query-operation/actors#filter",bus:D,busFailMessage:"Query operation processing failed: none of the configured actors were able to handle the operation type ${action.operation.type}"}),new(Nce()).ActorQueryOperationFromQuad({mediatorQueryOperation:ae,name:"urn:comunica:default:query-operation/actors#from",bus:D,busFailMessage:"Query operation processing failed: none of the configured actors were able to handle the operation type ${action.operation.type}"}),new(Lce()).ActorQueryOperationProject({mediatorQueryOperation:ae,name:"urn:comunica:default:query-operation/actors#project",bus:D,busFailMessage:"Query operation processing failed: none of the configured actors were able to handle the operation type ${action.operation.type}"}),new(qce()).ActorQueryOperationReducedHash({mediatorHashBindings:me,cacheSize:100,mediatorQueryOperation:ae,name:"urn:comunica:default:query-operation/actors#reduced",bus:D,busFailMessage:"Query operation processing failed: none of the configured actors were able to handle the operation type ${action.operation.type}"}),new(Bce()).ActorQueryOperationSlice({mediatorQueryOperation:ae,name:"urn:comunica:default:query-operation/actors#slice",bus:D,busFailMessage:"Query operation processing failed: none of the configured actors were able to handle the operation type ${action.operation.type}"}),new(ZV()).ActorQueryOperationUnion({mediatorRdfMetadataAccumulate:H,mediatorQueryOperation:ae,name:"urn:comunica:default:query-operation/actors#union",bus:D,busFailMessage:"Query operation processing failed: none of the configured actors were able to handle the operation type ${action.operation.type}"}),new(Qce()).ActorQueryOperationPathAlt({mediatorRdfMetadataAccumulate:H,mediatorQueryOperation:ae,name:"urn:comunica:default:query-operation/actors#path-alt",bus:D,busFailMessage:"Query operation processing failed: none of the configured actors were able to handle the operation type ${action.operation.type}"}),new(Gce()).ActorQueryOperationPathInv({mediatorQueryOperation:ae,name:"urn:comunica:default:query-operation/actors#path-inv",bus:D,busFailMessage:"Query operation processing failed: none of the configured actors were able to handle the operation type ${action.operation.type}"}),new(Xce()).ActorQueryOperationPathLink({mediatorQueryOperation:ae,name:"urn:comunica:default:query-operation/actors#path-link",bus:D,busFailMessage:"Query operation processing failed: none of the configured actors were able to handle the operation type ${action.operation.type}"}),new(Kce()).ActorQueryOperationPathNps({mediatorQueryOperation:ae,name:"urn:comunica:default:query-operation/actors#path-nps",bus:D,busFailMessage:"Query operation processing failed: none of the configured actors were able to handle the operation type ${action.operation.type}"}),new(Wce()).ActorQueryOperationClear({mediatorUpdateQuads:ue,mediatorQueryOperation:ae,name:"urn:comunica:default:query-operation/actors#update-clear",bus:D,busFailMessage:"Query operation processing failed: none of the configured actors were able to handle the operation type ${action.operation.type}"}),new(Zce()).ActorQueryOperationUpdateCompositeUpdate({mediatorQueryOperation:ae,name:"urn:comunica:default:query-operation/actors#update-composite",bus:D,busFailMessage:"Query operation processing failed: none of the configured actors were able to handle the operation type ${action.operation.type}"}),new(tde()).ActorQueryOperationCreate({mediatorUpdateQuads:ue,mediatorQueryOperation:ae,name:"urn:comunica:default:query-operation/actors#update-create",bus:D,busFailMessage:"Query operation processing failed: none of the configured actors were able to handle the operation type ${action.operation.type}"}),new(nde()).ActorQueryOperationDrop({mediatorUpdateQuads:ue,mediatorQueryOperation:ae,name:"urn:comunica:default:query-operation/actors#update-drop",bus:D,busFailMessage:"Query operation processing failed: none of the configured actors were able to handle the operation type ${action.operation.type}"}),new(ade()).ActorQueryOperationLoad({mediatorUpdateQuads:ue,mediatorQuerySourceIdentify:Ve,mediatorQueryOperation:ae,name:"urn:comunica:default:query-operation/actors#update-load",bus:D,busFailMessage:"Query operation processing failed: none of the configured actors were able to handle the operation type ${action.operation.type}"}),new(ode()).ActorQueryOperationJoin({mediatorJoin:Be,mediatorQueryOperation:ae,name:"urn:comunica:default:query-operation/actors#join",bus:D,busFailMessage:"Query operation processing failed: none of the configured actors were able to handle the operation type ${action.operation.type}"}),new(cde()).ActorQueryOperationLeftJoin({mediatorJoin:Be,mediatorExpressionEvaluatorFactory:x,mediatorQueryOperation:ae,name:"urn:comunica:default:query-operation/actors#leftjoin",bus:D,busFailMessage:"Query operation processing failed: none of the configured actors were able to handle the operation type ${action.operation.type}"}),new(lde()).ActorQueryOperationMinus({mediatorJoin:Be,mediatorQueryOperation:ae,name:"urn:comunica:default:query-operation/actors#minus",bus:D,busFailMessage:"Query operation processing failed: none of the configured actors were able to handle the operation type ${action.operation.type}"}),new(hde()).ActorQueryOperationPathSeq({mediatorJoin:Be,mediatorQueryOperation:ae,name:"urn:comunica:default:query-operation/actors#path-seq",bus:D,busFailMessage:"Query operation processing failed: none of the configured actors were able to handle the operation type ${action.operation.type}"});const Ce=new(yde()).ActorRdfJoinMultiSmallest({mediatorJoinEntriesSort:A,mediatorJoin:Be,mediatorJoinSelectivity:I,name:"urn:comunica:default:rdf-join/actors#inner-multi-smallest",bus:$,busFailMessage:"RDF joining failed: none of the configured actors were able to handle the join type ${action.type}"});new(_de()).ActorBindingsAggregatorFactoryMax({mediatorTermComparatorFactory:Ze,mediatorExpressionEvaluatorFactory:x,name:"urn:comunica:default:bindings-aggregator-factory/actors#max",bus:M,busFailMessage:"Creation of Aggregator failed: none of the configured actors were able to handle ${action.expr.aggregator}"}),new(mde()).ActorBindingsAggregatorFactoryMin({mediatorTermComparatorFactory:Ze,mediatorExpressionEvaluatorFactory:x,name:"urn:comunica:default:bindings-aggregator-factory/actors#min",bus:M,busFailMessage:"Creation of Aggregator failed: none of the configured actors were able to handle ${action.expr.aggregator}"}),new(wde()).ActorQueryOperationOrderBy({mediatorExpressionEvaluatorFactory:x,mediatorTermComparatorFactory:Ze,mediatorQueryOperation:ae,name:"urn:comunica:default:query-operation/actors#orderby",bus:D,busFailMessage:"Query operation processing failed: none of the configured actors were able to handle the operation type ${action.operation.type}"});const Qe=new(Ode()).ActorOptimizeQueryOperationFilterPushdown({aggressivePushdown:!1,maxIterations:10,splitConjunctive:!0,mergeConjunctive:!0,pushIntoLeftJoins:!0,pushEqualityIntoPatterns:!0,name:"urn:comunica:default:optimize-query-operation/actors#filter-pushdown",bus:r,busFailMessage:"Query optimization failed: none of the configured actors were able to optimize",beforeActors:[ye]});new(Ede()).ActorDereferenceHttp({mediatorHttp:le,maxAcceptHeaderLength:1024,maxAcceptHeaderLengthBrowser:128,name:"urn:comunica:default:dereference/actors#http",bus:d,busFailMessage:"Dereferencing failed: none of the configured actors were able to handle ${action.url}",beforeActors:[V]});const Tt=new(Fde()).ActorHttpProxy({mediatorHttp:le,name:"urn:comunica:default:http/actors#proxy",bus:E,busFailMessage:"HTTP request failed: none of the configured actors were able to handle ${action.input}",beforeActors:[z]});new(Pde()).ActorContextPreprocessQuerySourceIdentify({cacheSize:100,httpInvalidator:J,mediatorQuerySourceIdentify:Ve,mediatorContextPreprocess:fe,name:"urn:comunica:default:context-preprocess/actors#query-source-identify",bus:i,busFailMessage:"Context preprocessing failed",beforeActors:[G]});const Ue=new(vF()).ActorInitQuery({mediatorQueryProcess:De,mediatorQueryResultSerialize:Re,mediatorQueryResultSerializeMediaTypeCombiner:Ie,mediatorQueryResultSerializeMediaTypeFormatCombiner:he,mediatorHttpInvalidate:we,defaultQueryInputFormat:"sparql",allowNoSources:!1,name:"urn:comunica:default:init/actors#query",bus:o,busFailMessage:"Initialization failed: none of the configured actors were to initialize"});new(Nde()).ActorRdfUpdateQuadsHypermedia({cacheSize:100,httpInvalidator:Ee,mediatorDereferenceRdf:N,mediatorMetadata:q,mediatorMetadataExtract:U,mediatorRdfUpdateHypermedia:Oe,name:"urn:comunica:default:rdf-update-quads/actors#hypermedia",bus:F,busFailMessage:"RDF updating failed: none of the configured actors were able to handle an update"});const ht=new(aH()).ActionObserverHttp({httpInvalidator:et,observedActors:["urn:comunica:default:http/actors#fetch"],name:"https://linkedsoftwaredependencies.org/bundles/npm/@comunica/actor-query-result-serialize-sparql-json/^4.0.0/components/ActorQueryResultSerializeSparqlJson.jsonld#ActorQueryResultSerializeSparqlJson_default_observer",bus:E}),He=new(cH()).ActionObserverHttp({httpInvalidator:rt,observedActors:["urn:comunica:default:http/actors#fetch"],name:"https://linkedsoftwaredependencies.org/bundles/npm/@comunica/actor-query-result-serialize-stats/^4.0.0/components/ActorQueryResultSerializeStats.jsonld#ActorQueryResultSerializeStats_default_observer",bus:E});new(Vde()).ActorQuerySourceIdentifyHypermediaQpf({mediatorMetadata:q,mediatorMetadataExtract:U,mediatorDereferenceRdf:N,mediatorMergeBindingsContext:ke,subjectUri:"http://www.w3.org/1999/02/22-rdf-syntax-ns#subject",predicateUri:"http://www.w3.org/1999/02/22-rdf-syntax-ns#predicate",objectUri:"http://www.w3.org/1999/02/22-rdf-syntax-ns#object",graphUri:"http://www.w3.org/ns/sparql-service-description#graph",name:"urn:comunica:default:query-source-identify-hypermedia/actors#qpf",bus:s,busFailMessage:"Query source hypermedia identification failed: none of the configured actors were able to identify ${action.url}"}),new(Hde()).ActorQuerySourceIdentifyHypermediaSparql({mediatorHttp:le,mediatorMergeBindingsContext:ke,checkUrlSuffix:!0,forceHttpGet:!1,cacheSize:1024,forceSourceType:!1,bindMethod:"values",countTimeout:3e3,cardinalityCountQueries:!0,cardinalityEstimateConstruction:!1,name:"urn:comunica:default:query-source-identify-hypermedia/actors#sparql",bus:s,busFailMessage:"Query source hypermedia identification failed: none of the configured actors were able to identify ${action.url}"}),new(dle()).ActorQuerySourceIdentifyHypermediaNone({mediatorMergeBindingsContext:ke,name:"urn:comunica:default:query-source-identify-hypermedia/actors#none",bus:s,busFailMessage:"Query source hypermedia identification failed: none of the configured actors were able to identify ${action.url}"}),new(yle()).ActorExpressionEvaluatorFactoryDefault({mediatorQueryOperation:ae,mediatorFunctionFactory:j,mediatorMergeBindingsContext:ke,name:"urn:comunica:default:expression-evaluator-factory/actors#default",bus:O,busFailMessage:"Creation of Expression Evaluator failed"}),new(gle()).ActorQueryOperationGroup({mediatorMergeBindingsContext:ke,mediatorBindingsAggregatorFactory:L,mediatorQueryOperation:ae,name:"urn:comunica:default:query-operation/actors#group",bus:D,busFailMessage:"Query operation processing failed: none of the configured actors were able to handle the operation type ${action.operation.type}"}),new(vle()).ActorQueryOperationNop({mediatorMergeBindingsContext:ke,mediatorQueryOperation:ae,name:"urn:comunica:default:query-operation/actors#nop",bus:D,busFailMessage:"Query operation processing failed: none of the configured actors were able to handle the operation type ${action.operation.type}"}),new(wle()).ActorQueryOperationService({forceSparqlEndpoint:!1,mediatorMergeBindingsContext:ke,mediatorQuerySourceIdentify:Ve,mediatorQueryOperation:ae,name:"urn:comunica:default:query-operation/actors#service",bus:D,busFailMessage:"Query operation processing failed: none of the configured actors were able to handle the operation type ${action.operation.type}"}),new(Ole()).ActorQueryOperationValues({mediatorMergeBindingsContext:ke,name:"urn:comunica:default:query-operation/actors#values",bus:D,busFailMessage:"Query operation processing failed: none of the configured actors were able to handle the operation type ${action.operation.type}"}),new(Ele()).ActorQueryOperationPathOneOrMore({mediatorMergeBindingsContext:ke,mediatorQueryOperation:ae,name:"urn:comunica:default:query-operation/actors#path-one-or-more",bus:D,busFailMessage:"Query operation processing failed: none of the configured actors were able to handle the operation type ${action.operation.type}"}),new(Rle()).ActorQueryOperationPathZeroOrMore({mediatorMergeBindingsContext:ke,mediatorQueryOperation:ae,name:"urn:comunica:default:query-operation/actors#path-zero-or-more",bus:D,busFailMessage:"Query operation processing failed: none of the configured actors were able to handle the operation type ${action.operation.type}"}),new(Ile()).ActorQueryOperationPathZeroOrOne({mediatorMergeBindingsContext:ke,mediatorQueryOperation:ae,name:"urn:comunica:default:query-operation/actors#path-zero-or-one",bus:D,busFailMessage:"Query operation processing failed: none of the configured actors were able to handle the operation type ${action.operation.type}"}),new(Dle()).ActorQueryOperationUpdateDeleteInsert({mediatorUpdateQuads:ue,mediatorMergeBindingsContext:ke,mediatorQueryOperation:ae,name:"urn:comunica:default:query-operation/actors#update-delete-insert",bus:D,busFailMessage:"Query operation processing failed: none of the configured actors were able to handle the operation type ${action.operation.type}"});const Je=new(Lle()).ActorQueryProcessSequential({mediatorContextPreprocess:fe,mediatorQueryParse:xe,mediatorOptimizeQueryOperation:re,mediatorQueryOperation:ae,mediatorMergeBindingsContext:ke,name:"urn:comunica:default:query-process/actors#sequential",bus:B,busFailMessage:'Query processing failed: none of the configured actor were process to the query "${action.query}"'}),tt=new(Xle()).ActorQuerySourceIdentifyHypermedia({cacheSize:100,maxIterators:64,aggregateTraversalStore:!0,mediatorDereferenceRdf:N,mediatorMetadata:q,mediatorMetadataExtract:U,mediatorMetadataAccumulate:H,mediatorQuerySourceIdentifyHypermedia:be,mediatorRdfResolveHypermediaLinks:k,mediatorRdfResolveHypermediaLinksQueue:oe,mediatorMergeBindingsContext:ke,name:"urn:comunica:default:query-source-identify/actors#hypermedia",bus:C,busFailMessage:"Query source identification failed: none of the configured actors were able to identify ${action.querySourceUnidentified.value}"});new(Kle()).ActorRdfJoinNone({mediatorMergeBindingsContext:ke,mediatorJoinSelectivity:I,name:"urn:comunica:default:rdf-join/actors#inner-none",bus:$,busFailMessage:"RDF joining failed: none of the configured actors were able to handle the join type ${action.type}"}),new(Yle()).ActorRdfJoinOptionalBind({bindOrder:"depth-first",selectivityModifier:1e-6,mediatorQueryOperation:ae,mediatorMergeBindingsContext:ke,mediatorJoinSelectivity:I,name:"urn:comunica:default:rdf-join/actors#optional-bind",bus:$,busFailMessage:"RDF joining failed: none of the configured actors were able to handle the join type ${action.type}"}),new(nfe()).ActorTermComparatorFactoryExpressionEvaluator({mediatorQueryOperation:ae,mediatorFunctionFactory:j,mediatorMergeBindingsContext:ke,name:"urn:comunica:default:term-comparator-factory/actors#expression-evaluator",bus:Z,busFailMessage:"Creation of term comparator failed"});const wt=new(Lz()).ActorRdfJoinMultiBind({bindOrder:"depth-first",selectivityModifier:1e-4,minMaxCardinalityRatio:60,mediatorJoinEntriesSort:A,mediatorQueryOperation:ae,mediatorMergeBindingsContext:ke,mediatorJoinSelectivity:I,name:"urn:comunica:default:rdf-join/actors#inner-multi-bind",bus:$,busFailMessage:"RDF joining failed: none of the configured actors were able to handle the join type ${action.type}",beforeActors:[Ce,ft,te,ne,Ne]});new(afe()).ActorRdfJoinMultiSmallestFilterBindings({selectivityModifier:1e-4,blockSize:64,mediatorJoinEntriesSort:A,mediatorJoin:Be,mediatorJoinSelectivity:I,name:"urn:comunica:default:rdf-join/actors#inner-multi-smallest-filter-bindings",bus:$,busFailMessage:"RDF joining failed: none of the configured actors were able to handle the join type ${action.type}",beforeActors:[Ce,ft,te,ne,Ne]}),new(aH()).ActorQueryResultSerializeSparqlJson({emitMetadata:!0,httpObserver:ht,mediaTypePriorities:{"application/sparql-results+json":.8},mediaTypeFormats:{"application/sparql-results+json":"http://www.w3.org/ns/formats/SPARQL_Results_JSON"},name:"urn:comunica:default:query-result-serialize/actors#sparql-json",bus:c,busFailMessage:"Query result serialization failed: none of the configured actors were able to serialize for type ${action.handle.type}"}),new(cH()).ActorQueryResultSerializeStats({httpObserver:He,mediaTypePriorities:{stats:.5},mediaTypeFormats:{stats:"https://comunica.linkeddatafragments.org/#results_stats"},name:"urn:comunica:default:query-result-serialize/actors#stats",bus:c,busFailMessage:"Query result serialization failed: none of the configured actors were able to serialize for type ${action.handle.type}"}),new(ofe()).ActorQueryProcessExplainLogical({queryProcessor:Je,name:"urn:comunica:default:query-process/actors#explain-logical",bus:B,busFailMessage:'Query processing failed: none of the configured actor were process to the query "${action.query}"'}),new(cfe()).ActorQueryProcessExplainParsed({queryProcessor:Je,name:"urn:comunica:default:query-process/actors#explain-parsed",bus:B,busFailMessage:'Query processing failed: none of the configured actor were process to the query "${action.query}"'}),new(lfe()).ActorQueryProcessExplainPhysical({queryProcessor:Je,name:"urn:comunica:default:query-process/actors#explain-physical",bus:B,busFailMessage:'Query processing failed: none of the configured actor were process to the query "${action.query}"'});const at=new(hfe()).ActorOptimizeQueryOperationPruneEmptySourceOperations({useAskIfSupported:!1,name:"urn:comunica:default:optimize-query-operation/actors#prune-empty-source-operations",bus:r,busFailMessage:"Query optimization failed: none of the configured actors were able to optimize",beforeActors:[Qe]});new(yfe()).ActorHttpRetry({mediatorHttp:le,httpInvalidator:$e,name:"urn:comunica:default:http/actors#retry",bus:E,busFailMessage:"HTTP request failed: none of the configured actors were able to handle ${action.input}",beforeActors:[Tt]}),new(_fe()).ActorHttpLimitRate({mediatorHttp:le,httpInvalidator:Pe,correctionMultiplier:.1,failureMultiplier:10,limitByDefault:!1,allowOverlap:!1,name:"urn:comunica:default:http/actors#limit-rate",bus:E,busFailMessage:"HTTP request failed: none of the configured actors were able to handle ${action.input}",beforeActors:[Tt]}),new($E()).ActorQuerySourceIdentifyRdfJs({mediatorMergeBindingsContext:ke,name:"urn:comunica:default:query-source-identify/actors#rdfjs",bus:C,busFailMessage:"Query source identification failed: none of the configured actors were able to identify ${action.querySourceUnidentified.value}",beforeActors:[tt]}),new(mfe()).ActorQuerySourceIdentifySerialized({mediatorRdfParse:X,mediatorQuerySourceIdentify:Ve,name:"urn:comunica:default:query-source-identify/actors#serialized",bus:C,busFailMessage:"Query source identification failed: none of the configured actors were able to identify ${action.querySourceUnidentified.value}",beforeActors:[tt]}),new(Tfe()).ActorRdfJoinMultiBindSource({selectivityModifier:1e-4,blockSize:16,mediatorJoinEntriesSort:A,mediatorJoinSelectivity:I,name:"urn:comunica:default:rdf-join/actors#inner-multi-bind-source",bus:$,busFailMessage:"RDF joining failed: none of the configured actors were able to handle the join type ${action.type}",beforeActors:[Ce,wt,ft,te,ne,Ne]});const Xe=new(Sfe()).ActorOptimizeQueryOperationJoinConnected({name:"urn:comunica:default:optimize-query-operation/actors#join-connected",bus:r,busFailMessage:"Query optimization failed: none of the configured actors were able to optimize",beforeActors:[at]}),Lr=new(Afe()).ActorOptimizeQueryOperationBgpToJoin({name:"urn:comunica:default:optimize-query-operation/actors#bgp-to-join",bus:r,busFailMessage:"Query optimization failed: none of the configured actors were able to optimize",beforeActors:[Xe]}),Ge=new(xfe()).ActorOptimizeQueryOperationJoinBgp({name:"urn:comunica:default:optimize-query-operation/actors#join-bgp",bus:r,busFailMessage:"Query optimization failed: none of the configured actors were able to optimize",beforeActors:[Lr]}),ie=new(Ffe()).ActorOptimizeQueryOperationAssignSourcesExhaustive({name:"urn:comunica:default:optimize-query-operation/actors#assign-sources-exhaustive",bus:r,busFailMessage:"Query optimization failed: none of the configured actors were able to optimize",beforeActors:[Ge]});return new(Pfe()).ActorOptimizeQueryOperationDescribeToConstructsSubject({name:"urn:comunica:default:optimize-query-operation/actors#describe-to-constructs-subject",bus:r,busFailMessage:"Query optimization failed: none of the configured actors were able to optimize",beforeActors:[ie]}),Ue}),WE}var vX;function Nfe(){if(vX)return Vn;vX=1,Object.defineProperty(Vn,"__esModule",{value:!0}),Vn.QueryEngine=void 0;const u=vF(),n=Dfe();let o=class extends u.QueryEngineBase{constructor(t=n()){super(t)}};return Vn.QueryEngine=o,Vn}var TX;function jfe(){return TX||(TX=1,(function(u){var n=Ct&&Ct.__createBinding||(Object.create?(function(i,t,e,r){r===void 0&&(r=e);var a=Object.getOwnPropertyDescriptor(t,e);(!a||("get"in a?!t.__esModule:a.writable||a.configurable))&&(a={enumerable:!0,get:function(){return t[e]}}),Object.defineProperty(i,r,a)}):(function(i,t,e,r){r===void 0&&(r=e),i[r]=t[e]})),o=Ct&&Ct.__exportStar||function(i,t){for(var e in i)e!=="default"&&!Object.prototype.hasOwnProperty.call(t,e)&&n(t,i,e)};Object.defineProperty(u,"__esModule",{value:!0}),o(Nfe(),u)})(Ct)),Ct}var Lfe=jfe();self.global=self;let bT=null,bw=!1;self.onmessage=async u=>{const{data:n}=u;if(n)if(n.type==="run"){const{query:o,sources:i}=n;bw=!1,bT=new AbortController;const{signal:t}=bT,e=new Lfe.QueryEngine;try{const r=await e.queryBindings(o,{sources:i,lenient:!0}),a=[];let c;for await(const d of r){if(bw||t.aborted)throw new DOMException("Aborted","AbortError");c||(c=d);const l={};d.forEach((f,h)=>{let p;switch(f.termType){case"Literal":p="literal";break;case"NamedNode":p="uri";break;case"BlankNode":p="bnode";break;default:p=f.termType.toLowerCase()}l[h.value]={type:p,value:f.value}}),a.push(l)}const s=c?Array.from(c.keys()).map(d=>d.value):[];self.postMessage({type:"result",payload:{head:{vars:s},results:{bindings:a}}})}catch(r){(r==null?void 0:r.name)==="AbortError"?self.postMessage({type:"cancelled"}):self.postMessage({type:"error",error:{name:r==null?void 0:r.name,message:r==null?void 0:r.message}})}finally{bT=null,bw=!1}}else n.type==="cancel"&&(bT&&bT.abort(),bw=!0)}})();
